(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function pl(e){const s=Object.create(null);for(const n of e.split(","))s[n]=1;return n=>n in s}const nt={},En=[],$s=()=>{},tr=()=>!1,ni=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),fl=e=>e.startsWith("onUpdate:"),It=Object.assign,vl=(e,s)=>{const n=e.indexOf(s);n>-1&&e.splice(n,1)},dd=Object.prototype.hasOwnProperty,Qe=(e,s)=>dd.call(e,s),Ie=Array.isArray,Tn=e=>mo(e)==="[object Map]",Vn=e=>mo(e)==="[object Set]",Zl=e=>mo(e)==="[object Date]",Re=e=>typeof e=="function",mt=e=>typeof e=="string",Ss=e=>typeof e=="symbol",tt=e=>e!==null&&typeof e=="object",sr=e=>(tt(e)||Re(e))&&Re(e.then)&&Re(e.catch),nr=Object.prototype.toString,mo=e=>nr.call(e),ud=e=>mo(e).slice(8,-1),or=e=>mo(e)==="[object Object]",oi=e=>mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,to=pl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ii=e=>{const s=Object.create(null);return(n=>s[n]||(s[n]=e(n)))},pd=/-\w/g,on=ii(e=>e.replace(pd,s=>s.slice(1).toUpperCase())),fd=/\B([A-Z])/g,rn=ii(e=>e.replace(fd,"-$1").toLowerCase()),ir=ii(e=>e.charAt(0).toUpperCase()+e.slice(1)),ji=ii(e=>e?`on${ir(e)}`:""),sn=(e,s)=>!Object.is(e,s),Do=(e,...s)=>{for(let n=0;n<e.length;n++)e[n](...s)},lr=(e,s,n,o=!1)=>{Object.defineProperty(e,s,{configurable:!0,enumerable:!1,writable:o,value:n})},li=e=>{const s=parseFloat(e);return isNaN(s)?e:s},vd=e=>{const s=mt(e)?Number(e):NaN;return isNaN(s)?e:s};let ea;const ai=()=>ea||(ea=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ve(e){if(Ie(e)){const s={};for(let n=0;n<e.length;n++){const o=e[n],i=mt(o)?gd(o):Ve(o);if(i)for(const l in i)s[l]=i[l]}return s}else if(mt(e)||tt(e))return e}const xd=/;(?![^(]*\))/g,bd=/:([^]+)/,md=/\/\*[^]*?\*\//g;function gd(e){const s={};return e.replace(md,"").split(xd).forEach(n=>{if(n){const o=n.split(bd);o.length>1&&(s[o[0].trim()]=o[1].trim())}}),s}function W(e){let s="";if(mt(e))s=e;else if(Ie(e))for(let n=0;n<e.length;n++){const o=W(e[n]);o&&(s+=o+" ")}else if(tt(e))for(const n in e)e[n]&&(s+=n+" ");return s.trim()}const hd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yd=pl(hd);function ar(e){return!!e||e===""}function wd(e,s){if(e.length!==s.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=hn(e[o],s[o]);return n}function hn(e,s){if(e===s)return!0;let n=Zl(e),o=Zl(s);if(n||o)return n&&o?e.getTime()===s.getTime():!1;if(n=Ss(e),o=Ss(s),n||o)return e===s;if(n=Ie(e),o=Ie(s),n||o)return n&&o?wd(e,s):!1;if(n=tt(e),o=tt(s),n||o){if(!n||!o)return!1;const i=Object.keys(e).length,l=Object.keys(s).length;if(i!==l)return!1;for(const a in e){const r=e.hasOwnProperty(a),p=s.hasOwnProperty(a);if(r&&!p||!r&&p||!hn(e[a],s[a]))return!1}}return String(e)===String(s)}function xl(e,s){return e.findIndex(n=>hn(n,s))}const rr=e=>!!(e&&e.__v_isRef===!0),w=e=>mt(e)?e:e==null?"":Ie(e)||tt(e)&&(e.toString===nr||!Re(e.toString))?rr(e)?w(e.value):JSON.stringify(e,cr,2):String(e),cr=(e,s)=>rr(s)?cr(e,s.value):Tn(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((n,[o,i],l)=>(n[Ai(o,l)+" =>"]=i,n),{})}:Vn(s)?{[`Set(${s.size})`]:[...s.values()].map(n=>Ai(n))}:Ss(s)?Ai(s):tt(s)&&!Ie(s)&&!or(s)?String(s):s,Ai=(e,s="")=>{var n;return Ss(e)?`Symbol(${(n=e.description)!=null?n:s})`:e};let es;class kd{constructor(s=!1){this.detached=s,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=es,!s&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].pause();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].resume();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].resume()}}run(s){if(this._active){const n=es;try{return es=this,s()}finally{es=n}}}on(){++this._on===1&&(this.prevScope=es,es=this)}off(){this._on>0&&--this._on===0&&(es=this.prevScope,this.prevScope=void 0)}stop(s){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function _d(){return es}let lt;const Oi=new WeakSet;class dr{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,es&&es.active&&es.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Oi.has(this)&&(Oi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ta(this),fr(this);const s=lt,n=vs;lt=this,vs=!0;try{return this.fn()}finally{vr(this),lt=s,vs=n,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)gl(s);this.deps=this.depsTail=void 0,ta(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Oi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gi(this)&&this.run()}get dirty(){return Gi(this)}}let ur=0,so,no;function pr(e,s=!1){if(e.flags|=8,s){e.next=no,no=e;return}e.next=so,so=e}function bl(){ur++}function ml(){if(--ur>0)return;if(no){let s=no;for(no=void 0;s;){const n=s.next;s.next=void 0,s.flags&=-9,s=n}}let e;for(;so;){let s=so;for(so=void 0;s;){const n=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(o){e||(e=o)}s=n}}if(e)throw e}function fr(e){for(let s=e.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function vr(e){let s,n=e.depsTail,o=n;for(;o;){const i=o.prevDep;o.version===-1?(o===n&&(n=i),gl(o),zd(o)):s=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=i}e.deps=s,e.depsTail=n}function Gi(e){for(let s=e.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(xr(s.dep.computed)||s.dep.version!==s.version))return!0;return!!e._dirty}function xr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===co)||(e.globalVersion=co,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Gi(e))))return;e.flags|=2;const s=e.dep,n=lt,o=vs;lt=e,vs=!0;try{fr(e);const i=e.fn(e._value);(s.version===0||sn(i,e._value))&&(e.flags|=128,e._value=i,s.version++)}catch(i){throw s.version++,i}finally{lt=n,vs=o,vr(e),e.flags&=-3}}function gl(e,s=!1){const{dep:n,prevSub:o,nextSub:i}=e;if(o&&(o.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)gl(l,!0)}!s&&!--n.sc&&n.map&&n.map.delete(n.key)}function zd(e){const{prevDep:s,nextDep:n}=e;s&&(s.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=s,e.nextDep=void 0)}let vs=!0;const br=[];function Fs(){br.push(vs),vs=!1}function Ws(){const e=br.pop();vs=e===void 0?!0:e}function ta(e){const{cleanup:s}=e;if(e.cleanup=void 0,s){const n=lt;lt=void 0;try{s()}finally{lt=n}}}let co=0;class $d{constructor(s,n){this.sub=s,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hl{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(s){if(!lt||!vs||lt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==lt)n=this.activeLink=new $d(lt,this),lt.deps?(n.prevDep=lt.depsTail,lt.depsTail.nextDep=n,lt.depsTail=n):lt.deps=lt.depsTail=n,mr(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=lt.depsTail,n.nextDep=void 0,lt.depsTail.nextDep=n,lt.depsTail=n,lt.deps===n&&(lt.deps=o)}return n}trigger(s){this.version++,co++,this.notify(s)}notify(s){bl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ml()}}}function mr(e){if(e.dep.sc++,e.sub.flags&4){const s=e.dep.computed;if(s&&!e.dep.subs){s.flags|=20;for(let o=s.deps;o;o=o.nextDep)mr(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ho=new WeakMap,mn=Symbol(""),qi=Symbol(""),uo=Symbol("");function Nt(e,s,n){if(vs&&lt){let o=Ho.get(e);o||Ho.set(e,o=new Map);let i=o.get(n);i||(o.set(n,i=new hl),i.map=o,i.key=n),i.track()}}function Vs(e,s,n,o,i,l){const a=Ho.get(e);if(!a){co++;return}const r=p=>{p&&p.trigger()};if(bl(),s==="clear")a.forEach(r);else{const p=Ie(e),b=p&&oi(n);if(p&&n==="length"){const u=Number(o);a.forEach((v,g)=>{(g==="length"||g===uo||!Ss(g)&&g>=u)&&r(v)})}else switch((n!==void 0||a.has(void 0))&&r(a.get(n)),b&&r(a.get(uo)),s){case"add":p?b&&r(a.get("length")):(r(a.get(mn)),Tn(e)&&r(a.get(qi)));break;case"delete":p||(r(a.get(mn)),Tn(e)&&r(a.get(qi)));break;case"set":Tn(e)&&r(a.get(mn));break}}ml()}function Cd(e,s){const n=Ho.get(e);return n&&n.get(s)}function In(e){const s=Ne(e);return s===e?s:(Nt(s,"iterate",uo),ls(e)?s:s.map(bs))}function ri(e){return Nt(e=Ne(e),"iterate",uo),e}function Zs(e,s){return Hs(e)?Pn(gn(e)?bs(s):s):bs(s)}const Sd={__proto__:null,[Symbol.iterator](){return Pi(this,Symbol.iterator,e=>Zs(this,e))},concat(...e){return In(this).concat(...e.map(s=>Ie(s)?In(s):s))},entries(){return Pi(this,"entries",e=>(e[1]=Zs(this,e[1]),e))},every(e,s){return Rs(this,"every",e,s,void 0,arguments)},filter(e,s){return Rs(this,"filter",e,s,n=>n.map(o=>Zs(this,o)),arguments)},find(e,s){return Rs(this,"find",e,s,n=>Zs(this,n),arguments)},findIndex(e,s){return Rs(this,"findIndex",e,s,void 0,arguments)},findLast(e,s){return Rs(this,"findLast",e,s,n=>Zs(this,n),arguments)},findLastIndex(e,s){return Rs(this,"findLastIndex",e,s,void 0,arguments)},forEach(e,s){return Rs(this,"forEach",e,s,void 0,arguments)},includes(...e){return Ri(this,"includes",e)},indexOf(...e){return Ri(this,"indexOf",e)},join(e){return In(this).join(e)},lastIndexOf(...e){return Ri(this,"lastIndexOf",e)},map(e,s){return Rs(this,"map",e,s,void 0,arguments)},pop(){return Yn(this,"pop")},push(...e){return Yn(this,"push",e)},reduce(e,...s){return sa(this,"reduce",e,s)},reduceRight(e,...s){return sa(this,"reduceRight",e,s)},shift(){return Yn(this,"shift")},some(e,s){return Rs(this,"some",e,s,void 0,arguments)},splice(...e){return Yn(this,"splice",e)},toReversed(){return In(this).toReversed()},toSorted(e){return In(this).toSorted(e)},toSpliced(...e){return In(this).toSpliced(...e)},unshift(...e){return Yn(this,"unshift",e)},values(){return Pi(this,"values",e=>Zs(this,e))}};function Pi(e,s,n){const o=ri(e),i=o[s]();return o!==e&&!ls(e)&&(i._next=i.next,i.next=()=>{const l=i._next();return l.done||(l.value=n(l.value)),l}),i}const Id=Array.prototype;function Rs(e,s,n,o,i,l){const a=ri(e),r=a!==e&&!ls(e),p=a[s];if(p!==Id[s]){const v=p.apply(e,l);return r?bs(v):v}let b=n;a!==e&&(r?b=function(v,g){return n.call(this,Zs(e,v),g,e)}:n.length>2&&(b=function(v,g){return n.call(this,v,g,e)}));const u=p.call(a,b,o);return r&&i?i(u):u}function sa(e,s,n,o){const i=ri(e);let l=n;return i!==e&&(ls(e)?n.length>3&&(l=function(a,r,p){return n.call(this,a,r,p,e)}):l=function(a,r,p){return n.call(this,a,Zs(e,r),p,e)}),i[s](l,...o)}function Ri(e,s,n){const o=Ne(e);Nt(o,"iterate",uo);const i=o[s](...n);return(i===-1||i===!1)&&ci(n[0])?(n[0]=Ne(n[0]),o[s](...n)):i}function Yn(e,s,n=[]){Fs(),bl();const o=Ne(e)[s].apply(e,n);return ml(),Ws(),o}const Md=pl("__proto__,__v_isRef,__isVue"),gr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ss));function Ed(e){Ss(e)||(e=String(e));const s=Ne(this);return Nt(s,"has",e),s.hasOwnProperty(e)}class hr{constructor(s=!1,n=!1){this._isReadonly=s,this._isShallow=n}get(s,n,o){if(n==="__v_skip")return s.__v_skip;const i=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return l;if(n==="__v_raw")return o===(i?l?Vd:_r:l?kr:wr).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(o)?s:void 0;const a=Ie(s);if(!i){let p;if(a&&(p=Sd[n]))return p;if(n==="hasOwnProperty")return Ed}const r=Reflect.get(s,n,Tt(s)?s:o);if((Ss(n)?gr.has(n):Md(n))||(i||Nt(s,"get",n),l))return r;if(Tt(r)){const p=a&&oi(n)?r:r.value;return i&&tt(p)?Ji(p):p}return tt(r)?i?Ji(r):Ks(r):r}}class yr extends hr{constructor(s=!1){super(!1,s)}set(s,n,o,i){let l=s[n];const a=Ie(s)&&oi(n);if(!this._isShallow){const b=Hs(l);if(!ls(o)&&!Hs(o)&&(l=Ne(l),o=Ne(o)),!a&&Tt(l)&&!Tt(o))return b||(l.value=o),!0}const r=a?Number(n)<s.length:Qe(s,n),p=Reflect.set(s,n,o,Tt(s)?s:i);return s===Ne(i)&&(r?sn(o,l)&&Vs(s,"set",n,o):Vs(s,"add",n,o)),p}deleteProperty(s,n){const o=Qe(s,n);s[n];const i=Reflect.deleteProperty(s,n);return i&&o&&Vs(s,"delete",n,void 0),i}has(s,n){const o=Reflect.has(s,n);return(!Ss(n)||!gr.has(n))&&Nt(s,"has",n),o}ownKeys(s){return Nt(s,"iterate",Ie(s)?"length":mn),Reflect.ownKeys(s)}}class Td extends hr{constructor(s=!1){super(!0,s)}set(s,n){return!0}deleteProperty(s,n){return!0}}const jd=new yr,Ad=new Td,Od=new yr(!0);const Yi=e=>e,To=e=>Reflect.getPrototypeOf(e);function Pd(e,s,n){return function(...o){const i=this.__v_raw,l=Ne(i),a=Tn(l),r=e==="entries"||e===Symbol.iterator&&a,p=e==="keys"&&a,b=i[e](...o),u=n?Yi:s?Pn:bs;return!s&&Nt(l,"iterate",p?qi:mn),It(Object.create(b),{next(){const{value:v,done:g}=b.next();return g?{value:v,done:g}:{value:r?[u(v[0]),u(v[1])]:u(v),done:g}}})}}function jo(e){return function(...s){return e==="delete"?!1:e==="clear"?void 0:this}}function Rd(e,s){const n={get(i){const l=this.__v_raw,a=Ne(l),r=Ne(i);e||(sn(i,r)&&Nt(a,"get",i),Nt(a,"get",r));const{has:p}=To(a),b=s?Yi:e?Pn:bs;if(p.call(a,i))return b(l.get(i));if(p.call(a,r))return b(l.get(r));l!==a&&l.get(i)},get size(){const i=this.__v_raw;return!e&&Nt(Ne(i),"iterate",mn),i.size},has(i){const l=this.__v_raw,a=Ne(l),r=Ne(i);return e||(sn(i,r)&&Nt(a,"has",i),Nt(a,"has",r)),i===r?l.has(i):l.has(i)||l.has(r)},forEach(i,l){const a=this,r=a.__v_raw,p=Ne(r),b=s?Yi:e?Pn:bs;return!e&&Nt(p,"iterate",mn),r.forEach((u,v)=>i.call(l,b(u),b(v),a))}};return It(n,e?{add:jo("add"),set:jo("set"),delete:jo("delete"),clear:jo("clear")}:{add(i){!s&&!ls(i)&&!Hs(i)&&(i=Ne(i));const l=Ne(this);return To(l).has.call(l,i)||(l.add(i),Vs(l,"add",i,i)),this},set(i,l){!s&&!ls(l)&&!Hs(l)&&(l=Ne(l));const a=Ne(this),{has:r,get:p}=To(a);let b=r.call(a,i);b||(i=Ne(i),b=r.call(a,i));const u=p.call(a,i);return a.set(i,l),b?sn(l,u)&&Vs(a,"set",i,l):Vs(a,"add",i,l),this},delete(i){const l=Ne(this),{has:a,get:r}=To(l);let p=a.call(l,i);p||(i=Ne(i),p=a.call(l,i)),r&&r.call(l,i);const b=l.delete(i);return p&&Vs(l,"delete",i,void 0),b},clear(){const i=Ne(this),l=i.size!==0,a=i.clear();return l&&Vs(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Pd(i,e,s)}),n}function yl(e,s){const n=Rd(e,s);return(o,i,l)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?o:Reflect.get(Qe(n,i)&&i in o?n:o,i,l)}const Nd={get:yl(!1,!1)},Ld={get:yl(!1,!0)},Dd={get:yl(!0,!1)};const wr=new WeakMap,kr=new WeakMap,_r=new WeakMap,Vd=new WeakMap;function Bd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ud(e){return e.__v_skip||!Object.isExtensible(e)?0:Bd(ud(e))}function Ks(e){return Hs(e)?e:wl(e,!1,jd,Nd,wr)}function Fd(e){return wl(e,!1,Od,Ld,kr)}function Ji(e){return wl(e,!0,Ad,Dd,_r)}function wl(e,s,n,o,i){if(!tt(e)||e.__v_raw&&!(s&&e.__v_isReactive))return e;const l=Ud(e);if(l===0)return e;const a=i.get(e);if(a)return a;const r=new Proxy(e,l===2?o:n);return i.set(e,r),r}function gn(e){return Hs(e)?gn(e.__v_raw):!!(e&&e.__v_isReactive)}function Hs(e){return!!(e&&e.__v_isReadonly)}function ls(e){return!!(e&&e.__v_isShallow)}function ci(e){return e?!!e.__v_raw:!1}function Ne(e){const s=e&&e.__v_raw;return s?Ne(s):e}function Wd(e){return!Qe(e,"__v_skip")&&Object.isExtensible(e)&&lr(e,"__v_skip",!0),e}const bs=e=>tt(e)?Ks(e):e,Pn=e=>tt(e)?Ji(e):e;function Tt(e){return e?e.__v_isRef===!0:!1}function C(e){return Kd(e,!1)}function Kd(e,s){return Tt(e)?e:new Hd(e,s)}class Hd{constructor(s,n){this.dep=new hl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?s:Ne(s),this._value=n?s:bs(s),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(s){const n=this._rawValue,o=this.__v_isShallow||ls(s)||Hs(s);s=o?s:Ne(s),sn(s,n)&&(this._rawValue=s,this._value=o?s:bs(s),this.dep.trigger())}}function at(e){return Tt(e)?e.value:e}const Gd={get:(e,s,n)=>s==="__v_raw"?e:at(Reflect.get(e,s,n)),set:(e,s,n,o)=>{const i=e[s];return Tt(i)&&!Tt(n)?(i.value=n,!0):Reflect.set(e,s,n,o)}};function zr(e){return gn(e)?e:new Proxy(e,Gd)}function qd(e){const s=Ie(e)?new Array(e.length):{};for(const n in e)s[n]=Jd(e,n);return s}class Yd{constructor(s,n,o){this._object=s,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=Ne(s);let i=!0,l=s;if(!Ie(s)||!oi(String(n)))do i=!ci(l)||ls(l);while(i&&(l=l.__v_raw));this._shallow=i}get value(){let s=this._object[this._key];return this._shallow&&(s=at(s)),this._value=s===void 0?this._defaultValue:s}set value(s){if(this._shallow&&Tt(this._raw[this._key])){const n=this._object[this._key];if(Tt(n)){n.value=s;return}}this._object[this._key]=s}get dep(){return Cd(this._raw,this._key)}}function Jd(e,s,n){return new Yd(e,s,n)}class Xd{constructor(s,n,o){this.fn=s,this.setter=n,this._value=void 0,this.dep=new hl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=co-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&lt!==this)return pr(this,!0),!0}get value(){const s=this.dep.track();return xr(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function Qd(e,s,n=!1){let o,i;return Re(e)?o=e:(o=e.get,i=e.set),new Xd(o,i,n)}const Ao={},Go=new WeakMap;let xn;function Zd(e,s=!1,n=xn){if(n){let o=Go.get(n);o||Go.set(n,o=[]),o.push(e)}}function eu(e,s,n=nt){const{immediate:o,deep:i,once:l,scheduler:a,augmentJob:r,call:p}=n,b=O=>i?O:ls(O)||i===!1||i===0?Bs(O,1):Bs(O);let u,v,g,j,B=!1,N=!1;if(Tt(e)?(v=()=>e.value,B=ls(e)):gn(e)?(v=()=>b(e),B=!0):Ie(e)?(N=!0,B=e.some(O=>gn(O)||ls(O)),v=()=>e.map(O=>{if(Tt(O))return O.value;if(gn(O))return b(O);if(Re(O))return p?p(O,2):O()})):Re(e)?s?v=p?()=>p(e,2):e:v=()=>{if(g){Fs();try{g()}finally{Ws()}}const O=xn;xn=u;try{return p?p(e,3,[j]):e(j)}finally{xn=O}}:v=$s,s&&i){const O=v,A=i===!0?1/0:i;v=()=>Bs(O(),A)}const L=_d(),S=()=>{u.stop(),L&&L.active&&vl(L.effects,u)};if(l&&s){const O=s;s=(...A)=>{O(...A),S()}}let T=N?new Array(e.length).fill(Ao):Ao;const E=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(s){const A=u.run();if(i||B||(N?A.some((R,Y)=>sn(R,T[Y])):sn(A,T))){g&&g();const R=xn;xn=u;try{const Y=[A,T===Ao?void 0:N&&T[0]===Ao?[]:T,j];T=A,p?p(s,3,Y):s(...Y)}finally{xn=R}}}else u.run()};return r&&r(E),u=new dr(v),u.scheduler=a?()=>a(E,!1):E,j=O=>Zd(O,!1,u),g=u.onStop=()=>{const O=Go.get(u);if(O){if(p)p(O,4);else for(const A of O)A();Go.delete(u)}},s?o?E(!0):T=u.run():a?a(E.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Bs(e,s=1/0,n){if(s<=0||!tt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=s))return e;if(n.set(e,s),s--,Tt(e))Bs(e.value,s,n);else if(Ie(e))for(let o=0;o<e.length;o++)Bs(e[o],s,n);else if(Vn(e)||Tn(e))e.forEach(o=>{Bs(o,s,n)});else if(or(e)){for(const o in e)Bs(e[o],s,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Bs(e[o],s,n)}return e}function go(e,s,n,o){try{return o?e(...o):e()}catch(i){di(i,s,n)}}function ms(e,s,n,o){if(Re(e)){const i=go(e,s,n,o);return i&&sr(i)&&i.catch(l=>{di(l,s,n)}),i}if(Ie(e)){const i=[];for(let l=0;l<e.length;l++)i.push(ms(e[l],s,n,o));return i}}function di(e,s,n,o=!0){const i=s?s.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:a}=s&&s.appContext.config||nt;if(s){let r=s.parent;const p=s.proxy,b=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const u=r.ec;if(u){for(let v=0;v<u.length;v++)if(u[v](e,p,b)===!1)return}r=r.parent}if(l){Fs(),go(l,null,10,[e,p,b]),Ws();return}}tu(e,n,i,o,a)}function tu(e,s,n,o=!0,i=!1){if(i)throw e;console.error(e)}const Ft=[];let ks=-1;const jn=[];let en=null,Mn=0;const $r=Promise.resolve();let qo=null;function _s(e){const s=qo||$r;return e?s.then(this?e.bind(this):e):s}function su(e){let s=ks+1,n=Ft.length;for(;s<n;){const o=s+n>>>1,i=Ft[o],l=po(i);l<e||l===e&&i.flags&2?s=o+1:n=o}return s}function kl(e){if(!(e.flags&1)){const s=po(e),n=Ft[Ft.length-1];!n||!(e.flags&2)&&s>=po(n)?Ft.push(e):Ft.splice(su(s),0,e),e.flags|=1,Cr()}}function Cr(){qo||(qo=$r.then(Ir))}function nu(e){Ie(e)?jn.push(...e):en&&e.id===-1?en.splice(Mn+1,0,e):e.flags&1||(jn.push(e),e.flags|=1),Cr()}function na(e,s,n=ks+1){for(;n<Ft.length;n++){const o=Ft[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;Ft.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Sr(e){if(jn.length){const s=[...new Set(jn)].sort((n,o)=>po(n)-po(o));if(jn.length=0,en){en.push(...s);return}for(en=s,Mn=0;Mn<en.length;Mn++){const n=en[Mn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}en=null,Mn=0}}const po=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ir(e){try{for(ks=0;ks<Ft.length;ks++){const s=Ft[ks];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),go(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;ks<Ft.length;ks++){const s=Ft[ks];s&&(s.flags&=-2)}ks=-1,Ft.length=0,Sr(),qo=null,(Ft.length||jn.length)&&Ir()}}let cs=null,Mr=null;function Yo(e){const s=cs;return cs=e,Mr=e&&e.type.__scopeId||null,s}function Cs(e,s=cs,n){if(!s||e._n)return e;const o=(...i)=>{o._d&&Qo(-1);const l=Yo(s);let a;try{a=e(...i)}finally{Yo(l),o._d&&Qo(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function le(e,s){if(cs===null)return e;const n=xi(cs),o=e.dirs||(e.dirs=[]);for(let i=0;i<s.length;i++){let[l,a,r,p=nt]=s[i];l&&(Re(l)&&(l={mounted:l,updated:l}),l.deep&&Bs(a),o.push({dir:l,instance:n,value:a,oldValue:void 0,arg:r,modifiers:p}))}return e}function pn(e,s,n,o){const i=e.dirs,l=s&&s.dirs;for(let a=0;a<i.length;a++){const r=i[a];l&&(r.oldValue=l[a].value);let p=r.dir[o];p&&(Fs(),ms(p,n,8,[e.el,r,e,s]),Ws())}}function ou(e,s){if(Kt){let n=Kt.provides;const o=Kt.parent&&Kt.parent.provides;o===n&&(n=Kt.provides=Object.create(o)),n[e]=s}}function Vo(e,s,n=!1){const o=Ml();if(o||An){let i=An?An._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Re(s)?s.call(o&&o.proxy):s}}const iu=Symbol.for("v-scx"),lu=()=>Vo(iu);function ds(e,s,n){return Er(e,s,n)}function Er(e,s,n=nt){const{immediate:o,deep:i,flush:l,once:a}=n,r=It({},n),p=s&&o||!s&&l!=="post";let b;if(xo){if(l==="sync"){const j=lu();b=j.__watcherHandles||(j.__watcherHandles=[])}else if(!p){const j=()=>{};return j.stop=$s,j.resume=$s,j.pause=$s,j}}const u=Kt;r.call=(j,B,N)=>ms(j,u,B,N);let v=!1;l==="post"?r.scheduler=j=>{Ut(j,u&&u.suspense)}:l!=="sync"&&(v=!0,r.scheduler=(j,B)=>{B?j():kl(j)}),r.augmentJob=j=>{s&&(j.flags|=4),v&&(j.flags|=2,u&&(j.id=u.uid,j.i=u))};const g=eu(e,s,r);return xo&&(b?b.push(g):p&&g()),g}function au(e,s,n){const o=this.proxy,i=mt(e)?e.includes(".")?Tr(o,e):()=>o[e]:e.bind(o,o);let l;Re(s)?l=s:(l=s.handler,n=s);const a=ho(this),r=Er(i,l.bind(o),n);return a(),r}function Tr(e,s){const n=s.split(".");return()=>{let o=e;for(let i=0;i<n.length&&o;i++)o=o[n[i]];return o}}const jr=Symbol("_vte"),Ar=e=>e.__isTeleport,oo=e=>e&&(e.disabled||e.disabled===""),oa=e=>e&&(e.defer||e.defer===""),ia=e=>typeof SVGElement<"u"&&e instanceof SVGElement,la=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Xi=(e,s)=>{const n=e&&e.to;return mt(n)?s?s(n):null:n},Or={name:"Teleport",__isTeleport:!0,process(e,s,n,o,i,l,a,r,p,b){const{mc:u,pc:v,pbc:g,o:{insert:j,querySelector:B,createText:N,createComment:L}}=b,S=oo(s.props);let{shapeFlag:T,children:E,dynamicChildren:O}=s;if(e==null){const A=s.el=N(""),R=s.anchor=N("");j(A,n,o),j(R,n,o);const Y=(ce,ze)=>{T&16&&u(E,ce,ze,i,l,a,r,p)},we=()=>{const ce=s.target=Xi(s.props,B),ze=Pr(ce,s,N,j);ce&&(a!=="svg"&&ia(ce)?a="svg":a!=="mathml"&&la(ce)&&(a="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(ce),S||(Y(ce,ze),Bo(s,!1)))};S&&(Y(n,R),Bo(s,!0)),oa(s.props)?(s.el.__isMounted=!1,Ut(()=>{we(),delete s.el.__isMounted},l)):we()}else{if(oa(s.props)&&e.el.__isMounted===!1){Ut(()=>{Or.process(e,s,n,o,i,l,a,r,p,b)},l);return}s.el=e.el,s.targetStart=e.targetStart;const A=s.anchor=e.anchor,R=s.target=e.target,Y=s.targetAnchor=e.targetAnchor,we=oo(e.props),ce=we?n:R,ze=we?A:Y;if(a==="svg"||ia(R)?a="svg":(a==="mathml"||la(R))&&(a="mathml"),O?(g(e.dynamicChildren,O,ce,i,l,a,r),Sl(e,s,!0)):p||v(e,s,ce,ze,i,l,a,r,!1),S)we?s.props&&e.props&&s.props.to!==e.props.to&&(s.props.to=e.props.to):Oo(s,n,A,b,1);else if((s.props&&s.props.to)!==(e.props&&e.props.to)){const Te=s.target=Xi(s.props,B);Te&&Oo(s,Te,null,b,0)}else we&&Oo(s,R,Y,b,1);Bo(s,S)}},remove(e,s,n,{um:o,o:{remove:i}},l){const{shapeFlag:a,children:r,anchor:p,targetStart:b,targetAnchor:u,target:v,props:g}=e;if(v&&(i(b),i(u)),l&&i(p),a&16){const j=l||!oo(g);for(let B=0;B<r.length;B++){const N=r[B];o(N,s,n,j,!!N.dynamicChildren)}}},move:Oo,hydrate:ru};function Oo(e,s,n,{o:{insert:o},m:i},l=2){l===0&&o(e.targetAnchor,s,n);const{el:a,anchor:r,shapeFlag:p,children:b,props:u}=e,v=l===2;if(v&&o(a,s,n),(!v||oo(u))&&p&16)for(let g=0;g<b.length;g++)i(b[g],s,n,2);v&&o(r,s,n)}function ru(e,s,n,o,i,l,{o:{nextSibling:a,parentNode:r,querySelector:p,insert:b,createText:u}},v){function g(N,L,S,T){L.anchor=v(a(N),L,r(N),n,o,i,l),L.targetStart=S,L.targetAnchor=T}const j=s.target=Xi(s.props,p),B=oo(s.props);if(j){const N=j._lpa||j.firstChild;if(s.shapeFlag&16)if(B)g(e,s,N,N&&a(N));else{s.anchor=a(e);let L=N;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")s.targetStart=L;else if(L.data==="teleport anchor"){s.targetAnchor=L,j._lpa=s.targetAnchor&&a(s.targetAnchor);break}}L=a(L)}s.targetAnchor||Pr(j,s,u,b),v(N&&a(N),s,j,n,o,i,l)}Bo(s,B)}else B&&s.shapeFlag&16&&g(e,s,e,a(e));return s.anchor&&a(s.anchor)}const ft=Or;function Bo(e,s){const n=e.ctx;if(n&&n.ut){let o,i;for(s?(o=e.el,i=e.anchor):(o=e.targetStart,i=e.targetAnchor);o&&o!==i;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Pr(e,s,n,o){const i=s.targetStart=n(""),l=s.targetAnchor=n("");return i[jr]=l,e&&(o(i,e),o(l,e)),l}const Ls=Symbol("_leaveCb"),Po=Symbol("_enterCb");function Rr(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gt(()=>{e.isMounted=!0}),Wr(()=>{e.isUnmounting=!0}),e}const rs=[Function,Array],Nr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rs,onEnter:rs,onAfterEnter:rs,onEnterCancelled:rs,onBeforeLeave:rs,onLeave:rs,onAfterLeave:rs,onLeaveCancelled:rs,onBeforeAppear:rs,onAppear:rs,onAfterAppear:rs,onAppearCancelled:rs},Lr=e=>{const s=e.subTree;return s.component?Lr(s.component):s},cu={name:"BaseTransition",props:Nr,setup(e,{slots:s}){const n=Ml(),o=Rr();return()=>{const i=s.default&&_l(s.default(),!0);if(!i||!i.length)return;const l=Dr(i),a=Ne(e),{mode:r}=a;if(o.isLeaving)return Ni(l);const p=aa(l);if(!p)return Ni(l);let b=fo(p,a,o,n,v=>b=v);p.type!==Wt&&yn(p,b);let u=n.subTree&&aa(n.subTree);if(u&&u.type!==Wt&&!bn(u,p)&&Lr(n).type!==Wt){let v=fo(u,a,o,n);if(yn(u,v),r==="out-in"&&p.type!==Wt)return o.isLeaving=!0,v.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete v.afterLeave,u=void 0},Ni(l);r==="in-out"&&p.type!==Wt?v.delayLeave=(g,j,B)=>{const N=Vr(o,u);N[String(u.key)]=u,g[Ls]=()=>{j(),g[Ls]=void 0,delete b.delayedLeave,u=void 0},b.delayedLeave=()=>{B(),delete b.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return l}}};function Dr(e){let s=e[0];if(e.length>1){for(const n of e)if(n.type!==Wt){s=n;break}}return s}const du=cu;function Vr(e,s){const{leavingVNodes:n}=e;let o=n.get(s.type);return o||(o=Object.create(null),n.set(s.type,o)),o}function fo(e,s,n,o,i){const{appear:l,mode:a,persisted:r=!1,onBeforeEnter:p,onEnter:b,onAfterEnter:u,onEnterCancelled:v,onBeforeLeave:g,onLeave:j,onAfterLeave:B,onLeaveCancelled:N,onBeforeAppear:L,onAppear:S,onAfterAppear:T,onAppearCancelled:E}=s,O=String(e.key),A=Vr(n,e),R=(ce,ze)=>{ce&&ms(ce,o,9,ze)},Y=(ce,ze)=>{const Te=ze[1];R(ce,ze),Ie(ce)?ce.every(se=>se.length<=1)&&Te():ce.length<=1&&Te()},we={mode:a,persisted:r,beforeEnter(ce){let ze=p;if(!n.isMounted)if(l)ze=L||p;else return;ce[Ls]&&ce[Ls](!0);const Te=A[O];Te&&bn(e,Te)&&Te.el[Ls]&&Te.el[Ls](),R(ze,[ce])},enter(ce){let ze=b,Te=u,se=v;if(!n.isMounted)if(l)ze=S||b,Te=T||u,se=E||v;else return;let K=!1;const I=ce[Po]=y=>{K||(K=!0,y?R(se,[ce]):R(Te,[ce]),we.delayedLeave&&we.delayedLeave(),ce[Po]=void 0)};ze?Y(ze,[ce,I]):I()},leave(ce,ze){const Te=String(e.key);if(ce[Po]&&ce[Po](!0),n.isUnmounting)return ze();R(g,[ce]);let se=!1;const K=ce[Ls]=I=>{se||(se=!0,ze(),I?R(N,[ce]):R(B,[ce]),ce[Ls]=void 0,A[Te]===e&&delete A[Te])};A[Te]=e,j?Y(j,[ce,K]):K()},clone(ce){const ze=fo(ce,s,n,o,i);return i&&i(ze),ze}};return we}function Ni(e){if(ui(e))return e=ln(e),e.children=null,e}function aa(e){if(!ui(e))return Ar(e.type)&&e.children?Dr(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:s,children:n}=e;if(n){if(s&16)return n[0];if(s&32&&Re(n.default))return n.default()}}function yn(e,s){e.shapeFlag&6&&e.component?(e.transition=s,yn(e.component.subTree,s)):e.shapeFlag&128?(e.ssContent.transition=s.clone(e.ssContent),e.ssFallback.transition=s.clone(e.ssFallback)):e.transition=s}function _l(e,s=!1,n){let o=[],i=0;for(let l=0;l<e.length;l++){let a=e[l];const r=n==null?a.key:String(n)+String(a.key!=null?a.key:l);a.type===oe?(a.patchFlag&128&&i++,o=o.concat(_l(a.children,s,r))):(s||a.type!==Wt)&&o.push(r!=null?ln(a,{key:r}):a)}if(i>1)for(let l=0;l<o.length;l++)o[l].patchFlag=-2;return o}function Br(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Jo=new WeakMap;function io(e,s,n,o,i=!1){if(Ie(e)){e.forEach((B,N)=>io(B,s&&(Ie(s)?s[N]:s),n,o,i));return}if(lo(o)&&!i){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&io(e,s,n,o.component.subTree);return}const l=o.shapeFlag&4?xi(o.component):o.el,a=i?null:l,{i:r,r:p}=e,b=s&&s.r,u=r.refs===nt?r.refs={}:r.refs,v=r.setupState,g=Ne(v),j=v===nt?tr:B=>Qe(g,B);if(b!=null&&b!==p){if(ra(s),mt(b))u[b]=null,j(b)&&(v[b]=null);else if(Tt(b)){b.value=null;const B=s;B.k&&(u[B.k]=null)}}if(Re(p))go(p,r,12,[a,u]);else{const B=mt(p),N=Tt(p);if(B||N){const L=()=>{if(e.f){const S=B?j(p)?v[p]:u[p]:p.value;if(i)Ie(S)&&vl(S,l);else if(Ie(S))S.includes(l)||S.push(l);else if(B)u[p]=[l],j(p)&&(v[p]=u[p]);else{const T=[l];p.value=T,e.k&&(u[e.k]=T)}}else B?(u[p]=a,j(p)&&(v[p]=a)):N&&(p.value=a,e.k&&(u[e.k]=a))};if(a){const S=()=>{L(),Jo.delete(e)};S.id=-1,Jo.set(e,S),Ut(S,n)}else ra(e),L()}}}function ra(e){const s=Jo.get(e);s&&(s.flags|=8,Jo.delete(e))}ai().requestIdleCallback;ai().cancelIdleCallback;const lo=e=>!!e.type.__asyncLoader,ui=e=>e.type.__isKeepAlive;function uu(e,s){Ur(e,"a",s)}function pu(e,s){Ur(e,"da",s)}function Ur(e,s,n=Kt){const o=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(pi(s,o,n),n){let i=n.parent;for(;i&&i.parent;)ui(i.parent.vnode)&&fu(o,s,n,i),i=i.parent}}function fu(e,s,n,o){const i=pi(s,e,o,!0);zl(()=>{vl(o[s],i)},n)}function pi(e,s,n=Kt,o=!1){if(n){const i=n[e]||(n[e]=[]),l=s.__weh||(s.__weh=(...a)=>{Fs();const r=ho(n),p=ms(s,n,e,a);return r(),Ws(),p});return o?i.unshift(l):i.push(l),l}}const Gs=e=>(s,n=Kt)=>{(!xo||e==="sp")&&pi(e,(...o)=>s(...o),n)},vu=Gs("bm"),Gt=Gs("m"),xu=Gs("bu"),Fr=Gs("u"),Wr=Gs("bum"),zl=Gs("um"),bu=Gs("sp"),mu=Gs("rtg"),gu=Gs("rtc");function hu(e,s=Kt){pi("ec",e,s)}const yu=Symbol.for("v-ndc");function ye(e,s,n,o){let i;const l=n,a=Ie(e);if(a||mt(e)){const r=a&&gn(e);let p=!1,b=!1;r&&(p=!ls(e),b=Hs(e),e=ri(e)),i=new Array(e.length);for(let u=0,v=e.length;u<v;u++)i[u]=s(p?b?Pn(bs(e[u])):bs(e[u]):e[u],u,void 0,l)}else if(typeof e=="number"){i=new Array(e);for(let r=0;r<e;r++)i[r]=s(r+1,r,void 0,l)}else if(tt(e))if(e[Symbol.iterator])i=Array.from(e,(r,p)=>s(r,p,void 0,l));else{const r=Object.keys(e);i=new Array(r.length);for(let p=0,b=r.length;p<b;p++){const u=r[p];i[p]=s(e[u],u,p,l)}}else i=[];return i}const Qi=e=>e?rc(e)?xi(e):Qi(e.parent):null,ao=It(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qi(e.parent),$root:e=>Qi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Hr(e),$forceUpdate:e=>e.f||(e.f=()=>{kl(e.update)}),$nextTick:e=>e.n||(e.n=_s.bind(e.proxy)),$watch:e=>au.bind(e)}),Li=(e,s)=>e!==nt&&!e.__isScriptSetup&&Qe(e,s),wu={get({_:e},s){if(s==="__v_skip")return!0;const{ctx:n,setupState:o,data:i,props:l,accessCache:a,type:r,appContext:p}=e;if(s[0]!=="$"){const g=a[s];if(g!==void 0)switch(g){case 1:return o[s];case 2:return i[s];case 4:return n[s];case 3:return l[s]}else{if(Li(o,s))return a[s]=1,o[s];if(i!==nt&&Qe(i,s))return a[s]=2,i[s];if(Qe(l,s))return a[s]=3,l[s];if(n!==nt&&Qe(n,s))return a[s]=4,n[s];Zi&&(a[s]=0)}}const b=ao[s];let u,v;if(b)return s==="$attrs"&&Nt(e.attrs,"get",""),b(e);if((u=r.__cssModules)&&(u=u[s]))return u;if(n!==nt&&Qe(n,s))return a[s]=4,n[s];if(v=p.config.globalProperties,Qe(v,s))return v[s]},set({_:e},s,n){const{data:o,setupState:i,ctx:l}=e;return Li(i,s)?(i[s]=n,!0):o!==nt&&Qe(o,s)?(o[s]=n,!0):Qe(e.props,s)||s[0]==="$"&&s.slice(1)in e?!1:(l[s]=n,!0)},has({_:{data:e,setupState:s,accessCache:n,ctx:o,appContext:i,props:l,type:a}},r){let p;return!!(n[r]||e!==nt&&r[0]!=="$"&&Qe(e,r)||Li(s,r)||Qe(l,r)||Qe(o,r)||Qe(ao,r)||Qe(i.config.globalProperties,r)||(p=a.__cssModules)&&p[r])},defineProperty(e,s,n){return n.get!=null?e._.accessCache[s]=0:Qe(n,"value")&&this.set(e,s,n.value,null),Reflect.defineProperty(e,s,n)}};function ca(e){return Ie(e)?e.reduce((s,n)=>(s[n]=null,s),{}):e}let Zi=!0;function ku(e){const s=Hr(e),n=e.proxy,o=e.ctx;Zi=!1,s.beforeCreate&&da(s.beforeCreate,e,"bc");const{data:i,computed:l,methods:a,watch:r,provide:p,inject:b,created:u,beforeMount:v,mounted:g,beforeUpdate:j,updated:B,activated:N,deactivated:L,beforeDestroy:S,beforeUnmount:T,destroyed:E,unmounted:O,render:A,renderTracked:R,renderTriggered:Y,errorCaptured:we,serverPrefetch:ce,expose:ze,inheritAttrs:Te,components:se,directives:K,filters:I}=s;if(b&&_u(b,o,null),a)for(const D in a){const ae=a[D];Re(ae)&&(o[D]=ae.bind(n))}if(i){const D=i.call(n,n);tt(D)&&(e.data=Ks(D))}if(Zi=!0,l)for(const D in l){const ae=l[D],ue=Re(ae)?ae.bind(n,n):Re(ae.get)?ae.get.bind(n,n):$s,F=!Re(ae)&&Re(ae.set)?ae.set.bind(n):$s,ve=be({get:ue,set:F});Object.defineProperty(o,D,{enumerable:!0,configurable:!0,get:()=>ve.value,set:xe=>ve.value=xe})}if(r)for(const D in r)Kr(r[D],o,n,D);if(p){const D=Re(p)?p.call(n):p;Reflect.ownKeys(D).forEach(ae=>{ou(ae,D[ae])})}u&&da(u,e,"c");function z(D,ae){Ie(ae)?ae.forEach(ue=>D(ue.bind(n))):ae&&D(ae.bind(n))}if(z(vu,v),z(Gt,g),z(xu,j),z(Fr,B),z(uu,N),z(pu,L),z(hu,we),z(gu,R),z(mu,Y),z(Wr,T),z(zl,O),z(bu,ce),Ie(ze))if(ze.length){const D=e.exposed||(e.exposed={});ze.forEach(ae=>{Object.defineProperty(D,ae,{get:()=>n[ae],set:ue=>n[ae]=ue,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===$s&&(e.render=A),Te!=null&&(e.inheritAttrs=Te),se&&(e.components=se),K&&(e.directives=K),ce&&Br(e)}function _u(e,s,n=$s){Ie(e)&&(e=el(e));for(const o in e){const i=e[o];let l;tt(i)?"default"in i?l=Vo(i.from||o,i.default,!0):l=Vo(i.from||o):l=Vo(i),Tt(l)?Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:a=>l.value=a}):s[o]=l}}function da(e,s,n){ms(Ie(e)?e.map(o=>o.bind(s.proxy)):e.bind(s.proxy),s,n)}function Kr(e,s,n,o){let i=o.includes(".")?Tr(n,o):()=>n[o];if(mt(e)){const l=s[e];Re(l)&&ds(i,l)}else if(Re(e))ds(i,e.bind(n));else if(tt(e))if(Ie(e))e.forEach(l=>Kr(l,s,n,o));else{const l=Re(e.handler)?e.handler.bind(n):s[e.handler];Re(l)&&ds(i,l,e)}}function Hr(e){const s=e.type,{mixins:n,extends:o}=s,{mixins:i,optionsCache:l,config:{optionMergeStrategies:a}}=e.appContext,r=l.get(s);let p;return r?p=r:!i.length&&!n&&!o?p=s:(p={},i.length&&i.forEach(b=>Xo(p,b,a,!0)),Xo(p,s,a)),tt(s)&&l.set(s,p),p}function Xo(e,s,n,o=!1){const{mixins:i,extends:l}=s;l&&Xo(e,l,n,!0),i&&i.forEach(a=>Xo(e,a,n,!0));for(const a in s)if(!(o&&a==="expose")){const r=zu[a]||n&&n[a];e[a]=r?r(e[a],s[a]):s[a]}return e}const zu={data:ua,props:pa,emits:pa,methods:eo,computed:eo,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:eo,directives:eo,watch:Cu,provide:ua,inject:$u};function ua(e,s){return s?e?function(){return It(Re(e)?e.call(this,this):e,Re(s)?s.call(this,this):s)}:s:e}function $u(e,s){return eo(el(e),el(s))}function el(e){if(Ie(e)){const s={};for(let n=0;n<e.length;n++)s[e[n]]=e[n];return s}return e}function Bt(e,s){return e?[...new Set([].concat(e,s))]:s}function eo(e,s){return e?It(Object.create(null),e,s):s}function pa(e,s){return e?Ie(e)&&Ie(s)?[...new Set([...e,...s])]:It(Object.create(null),ca(e),ca(s??{})):s}function Cu(e,s){if(!e)return s;if(!s)return e;const n=It(Object.create(null),e);for(const o in s)n[o]=Bt(e[o],s[o]);return n}function Gr(){return{app:null,config:{isNativeTag:tr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Su=0;function Iu(e,s){return function(o,i=null){Re(o)||(o=It({},o)),i!=null&&!tt(i)&&(i=null);const l=Gr(),a=new WeakSet,r=[];let p=!1;const b=l.app={_uid:Su++,_component:o,_props:i,_container:null,_context:l,_instance:null,version:lp,get config(){return l.config},set config(u){},use(u,...v){return a.has(u)||(u&&Re(u.install)?(a.add(u),u.install(b,...v)):Re(u)&&(a.add(u),u(b,...v))),b},mixin(u){return l.mixins.includes(u)||l.mixins.push(u),b},component(u,v){return v?(l.components[u]=v,b):l.components[u]},directive(u,v){return v?(l.directives[u]=v,b):l.directives[u]},mount(u,v,g){if(!p){const j=b._ceVNode||Ze(o,i);return j.appContext=l,g===!0?g="svg":g===!1&&(g=void 0),e(j,u,g),p=!0,b._container=u,u.__vue_app__=b,xi(j.component)}},onUnmount(u){r.push(u)},unmount(){p&&(ms(r,b._instance,16),e(null,b._container),delete b._container.__vue_app__)},provide(u,v){return l.provides[u]=v,b},runWithContext(u){const v=An;An=b;try{return u()}finally{An=v}}};return b}}let An=null;const Mu=(e,s)=>s==="modelValue"||s==="model-value"?e.modelModifiers:e[`${s}Modifiers`]||e[`${on(s)}Modifiers`]||e[`${rn(s)}Modifiers`];function Eu(e,s,...n){if(e.isUnmounted)return;const o=e.vnode.props||nt;let i=n;const l=s.startsWith("update:"),a=l&&Mu(o,s.slice(7));a&&(a.trim&&(i=n.map(u=>mt(u)?u.trim():u)),a.number&&(i=n.map(li)));let r,p=o[r=ji(s)]||o[r=ji(on(s))];!p&&l&&(p=o[r=ji(rn(s))]),p&&ms(p,e,6,i);const b=o[r+"Once"];if(b){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,ms(b,e,6,i)}}const Tu=new WeakMap;function qr(e,s,n=!1){const o=n?Tu:s.emitsCache,i=o.get(e);if(i!==void 0)return i;const l=e.emits;let a={},r=!1;if(!Re(e)){const p=b=>{const u=qr(b,s,!0);u&&(r=!0,It(a,u))};!n&&s.mixins.length&&s.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!l&&!r?(tt(e)&&o.set(e,null),null):(Ie(l)?l.forEach(p=>a[p]=null):It(a,l),tt(e)&&o.set(e,a),a)}function fi(e,s){return!e||!ni(s)?!1:(s=s.slice(2).replace(/Once$/,""),Qe(e,s[0].toLowerCase()+s.slice(1))||Qe(e,rn(s))||Qe(e,s))}function fa(e){const{type:s,vnode:n,proxy:o,withProxy:i,propsOptions:[l],slots:a,attrs:r,emit:p,render:b,renderCache:u,props:v,data:g,setupState:j,ctx:B,inheritAttrs:N}=e,L=Yo(e);let S,T;try{if(n.shapeFlag&4){const O=i||o,A=O;S=zs(b.call(A,O,u,v,j,g,B)),T=r}else{const O=s;S=zs(O.length>1?O(v,{attrs:r,slots:a,emit:p}):O(v,null)),T=s.props?r:ju(r)}}catch(O){ro.length=0,di(O,e,1),S=Ze(Wt)}let E=S;if(T&&N!==!1){const O=Object.keys(T),{shapeFlag:A}=E;O.length&&A&7&&(l&&O.some(fl)&&(T=Au(T,l)),E=ln(E,T,!1,!0))}return n.dirs&&(E=ln(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&yn(E,n.transition),S=E,Yo(L),S}const ju=e=>{let s;for(const n in e)(n==="class"||n==="style"||ni(n))&&((s||(s={}))[n]=e[n]);return s},Au=(e,s)=>{const n={};for(const o in e)(!fl(o)||!(o.slice(9)in s))&&(n[o]=e[o]);return n};function Ou(e,s,n){const{props:o,children:i,component:l}=e,{props:a,children:r,patchFlag:p}=s,b=l.emitsOptions;if(s.dirs||s.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return o?va(o,a,b):!!a;if(p&8){const u=s.dynamicProps;for(let v=0;v<u.length;v++){const g=u[v];if(a[g]!==o[g]&&!fi(b,g))return!0}}}else return(i||r)&&(!r||!r.$stable)?!0:o===a?!1:o?a?va(o,a,b):!0:!!a;return!1}function va(e,s,n){const o=Object.keys(s);if(o.length!==Object.keys(e).length)return!0;for(let i=0;i<o.length;i++){const l=o[i];if(s[l]!==e[l]&&!fi(n,l))return!0}return!1}function Pu({vnode:e,parent:s},n){for(;s;){const o=s.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=s.vnode).el=n,s=s.parent;else break}}const Yr={},Jr=()=>Object.create(Yr),Xr=e=>Object.getPrototypeOf(e)===Yr;function Ru(e,s,n,o=!1){const i={},l=Jr();e.propsDefaults=Object.create(null),Qr(e,s,i,l);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=o?i:Fd(i):e.type.props?e.props=i:e.props=l,e.attrs=l}function Nu(e,s,n,o){const{props:i,attrs:l,vnode:{patchFlag:a}}=e,r=Ne(i),[p]=e.propsOptions;let b=!1;if((o||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let v=0;v<u.length;v++){let g=u[v];if(fi(e.emitsOptions,g))continue;const j=s[g];if(p)if(Qe(l,g))j!==l[g]&&(l[g]=j,b=!0);else{const B=on(g);i[B]=tl(p,r,B,j,e,!1)}else j!==l[g]&&(l[g]=j,b=!0)}}}else{Qr(e,s,i,l)&&(b=!0);let u;for(const v in r)(!s||!Qe(s,v)&&((u=rn(v))===v||!Qe(s,u)))&&(p?n&&(n[v]!==void 0||n[u]!==void 0)&&(i[v]=tl(p,r,v,void 0,e,!0)):delete i[v]);if(l!==r)for(const v in l)(!s||!Qe(s,v))&&(delete l[v],b=!0)}b&&Vs(e.attrs,"set","")}function Qr(e,s,n,o){const[i,l]=e.propsOptions;let a=!1,r;if(s)for(let p in s){if(to(p))continue;const b=s[p];let u;i&&Qe(i,u=on(p))?!l||!l.includes(u)?n[u]=b:(r||(r={}))[u]=b:fi(e.emitsOptions,p)||(!(p in o)||b!==o[p])&&(o[p]=b,a=!0)}if(l){const p=Ne(n),b=r||nt;for(let u=0;u<l.length;u++){const v=l[u];n[v]=tl(i,p,v,b[v],e,!Qe(b,v))}}return a}function tl(e,s,n,o,i,l){const a=e[n];if(a!=null){const r=Qe(a,"default");if(r&&o===void 0){const p=a.default;if(a.type!==Function&&!a.skipFactory&&Re(p)){const{propsDefaults:b}=i;if(n in b)o=b[n];else{const u=ho(i);o=b[n]=p.call(null,s),u()}}else o=p;i.ce&&i.ce._setProp(n,o)}a[0]&&(l&&!r?o=!1:a[1]&&(o===""||o===rn(n))&&(o=!0))}return o}const Lu=new WeakMap;function Zr(e,s,n=!1){const o=n?Lu:s.propsCache,i=o.get(e);if(i)return i;const l=e.props,a={},r=[];let p=!1;if(!Re(e)){const u=v=>{p=!0;const[g,j]=Zr(v,s,!0);It(a,g),j&&r.push(...j)};!n&&s.mixins.length&&s.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!l&&!p)return tt(e)&&o.set(e,En),En;if(Ie(l))for(let u=0;u<l.length;u++){const v=on(l[u]);xa(v)&&(a[v]=nt)}else if(l)for(const u in l){const v=on(u);if(xa(v)){const g=l[u],j=a[v]=Ie(g)||Re(g)?{type:g}:It({},g),B=j.type;let N=!1,L=!0;if(Ie(B))for(let S=0;S<B.length;++S){const T=B[S],E=Re(T)&&T.name;if(E==="Boolean"){N=!0;break}else E==="String"&&(L=!1)}else N=Re(B)&&B.name==="Boolean";j[0]=N,j[1]=L,(N||Qe(j,"default"))&&r.push(v)}}const b=[a,r];return tt(e)&&o.set(e,b),b}function xa(e){return e[0]!=="$"&&!to(e)}const $l=e=>e==="_"||e==="_ctx"||e==="$stable",Cl=e=>Ie(e)?e.map(zs):[zs(e)],Du=(e,s,n)=>{if(s._n)return s;const o=Cs((...i)=>Cl(s(...i)),n);return o._c=!1,o},ec=(e,s,n)=>{const o=e._ctx;for(const i in e){if($l(i))continue;const l=e[i];if(Re(l))s[i]=Du(i,l,o);else if(l!=null){const a=Cl(l);s[i]=()=>a}}},tc=(e,s)=>{const n=Cl(s);e.slots.default=()=>n},sc=(e,s,n)=>{for(const o in s)(n||!$l(o))&&(e[o]=s[o])},Vu=(e,s,n)=>{const o=e.slots=Jr();if(e.vnode.shapeFlag&32){const i=s._;i?(sc(o,s,n),n&&lr(o,"_",i,!0)):ec(s,o)}else s&&tc(e,s)},Bu=(e,s,n)=>{const{vnode:o,slots:i}=e;let l=!0,a=nt;if(o.shapeFlag&32){const r=s._;r?n&&r===1?l=!1:sc(i,s,n):(l=!s.$stable,ec(s,i)),a=s}else s&&(tc(e,s),a={default:1});if(l)for(const r in i)!$l(r)&&a[r]==null&&delete i[r]},Ut=Hu;function Uu(e){return Fu(e)}function Fu(e,s){const n=ai();n.__VUE__=!0;const{insert:o,remove:i,patchProp:l,createElement:a,createText:r,createComment:p,setText:b,setElementText:u,parentNode:v,nextSibling:g,setScopeId:j=$s,insertStaticContent:B}=e,N=(_,$,V,X=null,q=null,J=null,re=void 0,ne=null,ee=!!$.dynamicChildren)=>{if(_===$)return;_&&!bn(_,$)&&(X=Et(_),xe(_,q,J,!0),_=null),$.patchFlag===-2&&(ee=!1,$.dynamicChildren=null);const{type:G,ref:ke,shapeFlag:ie}=$;switch(G){case vi:L(_,$,V,X);break;case Wt:S(_,$,V,X);break;case Uo:_==null&&T($,V,X,re);break;case oe:se(_,$,V,X,q,J,re,ne,ee);break;default:ie&1?A(_,$,V,X,q,J,re,ne,ee):ie&6?K(_,$,V,X,q,J,re,ne,ee):(ie&64||ie&128)&&G.process(_,$,V,X,q,J,re,ne,ee,Ot)}ke!=null&&q?io(ke,_&&_.ref,J,$||_,!$):ke==null&&_&&_.ref!=null&&io(_.ref,null,J,_,!0)},L=(_,$,V,X)=>{if(_==null)o($.el=r($.children),V,X);else{const q=$.el=_.el;$.children!==_.children&&b(q,$.children)}},S=(_,$,V,X)=>{_==null?o($.el=p($.children||""),V,X):$.el=_.el},T=(_,$,V,X)=>{[_.el,_.anchor]=B(_.children,$,V,X,_.el,_.anchor)},E=({el:_,anchor:$},V,X)=>{let q;for(;_&&_!==$;)q=g(_),o(_,V,X),_=q;o($,V,X)},O=({el:_,anchor:$})=>{let V;for(;_&&_!==$;)V=g(_),i(_),_=V;i($)},A=(_,$,V,X,q,J,re,ne,ee)=>{if($.type==="svg"?re="svg":$.type==="math"&&(re="mathml"),_==null)R($,V,X,q,J,re,ne,ee);else{const G=_.el&&_.el._isVueCE?_.el:null;try{G&&G._beginPatch(),ce(_,$,q,J,re,ne,ee)}finally{G&&G._endPatch()}}},R=(_,$,V,X,q,J,re,ne)=>{let ee,G;const{props:ke,shapeFlag:ie,transition:ge,dirs:Me}=_;if(ee=_.el=a(_.type,J,ke&&ke.is,ke),ie&8?u(ee,_.children):ie&16&&we(_.children,ee,null,X,q,Di(_,J),re,ne),Me&&pn(_,null,X,"created"),Y(ee,_,_.scopeId,re,X),ke){for(const Xe in ke)Xe!=="value"&&!to(Xe)&&l(ee,Xe,null,ke[Xe],J,X);"value"in ke&&l(ee,"value",null,ke.value,J),(G=ke.onVnodeBeforeMount)&&ys(G,X,_)}Me&&pn(_,null,X,"beforeMount");const Le=Wu(q,ge);Le&&ge.beforeEnter(ee),o(ee,$,V),((G=ke&&ke.onVnodeMounted)||Le||Me)&&Ut(()=>{G&&ys(G,X,_),Le&&ge.enter(ee),Me&&pn(_,null,X,"mounted")},q)},Y=(_,$,V,X,q)=>{if(V&&j(_,V),X)for(let J=0;J<X.length;J++)j(_,X[J]);if(q){let J=q.subTree;if($===J||ic(J.type)&&(J.ssContent===$||J.ssFallback===$)){const re=q.vnode;Y(_,re,re.scopeId,re.slotScopeIds,q.parent)}}},we=(_,$,V,X,q,J,re,ne,ee=0)=>{for(let G=ee;G<_.length;G++){const ke=_[G]=ne?tn(_[G]):zs(_[G]);N(null,ke,$,V,X,q,J,re,ne)}},ce=(_,$,V,X,q,J,re)=>{const ne=$.el=_.el;let{patchFlag:ee,dynamicChildren:G,dirs:ke}=$;ee|=_.patchFlag&16;const ie=_.props||nt,ge=$.props||nt;let Me;if(V&&fn(V,!1),(Me=ge.onVnodeBeforeUpdate)&&ys(Me,V,$,_),ke&&pn($,_,V,"beforeUpdate"),V&&fn(V,!0),(ie.innerHTML&&ge.innerHTML==null||ie.textContent&&ge.textContent==null)&&u(ne,""),G?ze(_.dynamicChildren,G,ne,V,X,Di($,q),J):re||ae(_,$,ne,null,V,X,Di($,q),J,!1),ee>0){if(ee&16)Te(ne,ie,ge,V,q);else if(ee&2&&ie.class!==ge.class&&l(ne,"class",null,ge.class,q),ee&4&&l(ne,"style",ie.style,ge.style,q),ee&8){const Le=$.dynamicProps;for(let Xe=0;Xe<Le.length;Xe++){const Fe=Le[Xe],qe=ie[Fe],yt=ge[Fe];(yt!==qe||Fe==="value")&&l(ne,Fe,qe,yt,q,V)}}ee&1&&_.children!==$.children&&u(ne,$.children)}else!re&&G==null&&Te(ne,ie,ge,V,q);((Me=ge.onVnodeUpdated)||ke)&&Ut(()=>{Me&&ys(Me,V,$,_),ke&&pn($,_,V,"updated")},X)},ze=(_,$,V,X,q,J,re)=>{for(let ne=0;ne<$.length;ne++){const ee=_[ne],G=$[ne],ke=ee.el&&(ee.type===oe||!bn(ee,G)||ee.shapeFlag&198)?v(ee.el):V;N(ee,G,ke,null,X,q,J,re,!0)}},Te=(_,$,V,X,q)=>{if($!==V){if($!==nt)for(const J in $)!to(J)&&!(J in V)&&l(_,J,$[J],null,q,X);for(const J in V){if(to(J))continue;const re=V[J],ne=$[J];re!==ne&&J!=="value"&&l(_,J,ne,re,q,X)}"value"in V&&l(_,"value",$.value,V.value,q)}},se=(_,$,V,X,q,J,re,ne,ee)=>{const G=$.el=_?_.el:r(""),ke=$.anchor=_?_.anchor:r("");let{patchFlag:ie,dynamicChildren:ge,slotScopeIds:Me}=$;Me&&(ne=ne?ne.concat(Me):Me),_==null?(o(G,V,X),o(ke,V,X),we($.children||[],V,ke,q,J,re,ne,ee)):ie>0&&ie&64&&ge&&_.dynamicChildren&&_.dynamicChildren.length===ge.length?(ze(_.dynamicChildren,ge,V,q,J,re,ne),($.key!=null||q&&$===q.subTree)&&Sl(_,$,!0)):ae(_,$,V,ke,q,J,re,ne,ee)},K=(_,$,V,X,q,J,re,ne,ee)=>{$.slotScopeIds=ne,_==null?$.shapeFlag&512?q.ctx.activate($,V,X,re,ee):I($,V,X,q,J,re,ee):y(_,$,ee)},I=(_,$,V,X,q,J,re)=>{const ne=_.component=Zu(_,X,q);if(ui(_)&&(ne.ctx.renderer=Ot),ep(ne,!1,re),ne.asyncDep){if(q&&q.registerDep(ne,z,re),!_.el){const ee=ne.subTree=Ze(Wt);S(null,ee,$,V),_.placeholder=ee.el}}else z(ne,_,$,V,q,J,re)},y=(_,$,V)=>{const X=$.component=_.component;if(Ou(_,$,V))if(X.asyncDep&&!X.asyncResolved){D(X,$,V);return}else X.next=$,X.update();else $.el=_.el,X.vnode=$},z=(_,$,V,X,q,J,re)=>{const ne=()=>{if(_.isMounted){let{next:ie,bu:ge,u:Me,parent:Le,vnode:Xe}=_;{const Pt=nc(_);if(Pt){ie&&(ie.el=Xe.el,D(_,ie,re)),Pt.asyncDep.then(()=>{_.isUnmounted||ne()});return}}let Fe=ie,qe;fn(_,!1),ie?(ie.el=Xe.el,D(_,ie,re)):ie=Xe,ge&&Do(ge),(qe=ie.props&&ie.props.onVnodeBeforeUpdate)&&ys(qe,Le,ie,Xe),fn(_,!0);const yt=fa(_),Dt=_.subTree;_.subTree=yt,N(Dt,yt,v(Dt.el),Et(Dt),_,q,J),ie.el=yt.el,Fe===null&&Pu(_,yt.el),Me&&Ut(Me,q),(qe=ie.props&&ie.props.onVnodeUpdated)&&Ut(()=>ys(qe,Le,ie,Xe),q)}else{let ie;const{el:ge,props:Me}=$,{bm:Le,m:Xe,parent:Fe,root:qe,type:yt}=_,Dt=lo($);fn(_,!1),Le&&Do(Le),!Dt&&(ie=Me&&Me.onVnodeBeforeMount)&&ys(ie,Fe,$),fn(_,!0);{qe.ce&&qe.ce._def.shadowRoot!==!1&&qe.ce._injectChildStyle(yt);const Pt=_.subTree=fa(_);N(null,Pt,V,X,_,q,J),$.el=Pt.el}if(Xe&&Ut(Xe,q),!Dt&&(ie=Me&&Me.onVnodeMounted)){const Pt=$;Ut(()=>ys(ie,Fe,Pt),q)}($.shapeFlag&256||Fe&&lo(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&_.a&&Ut(_.a,q),_.isMounted=!0,$=V=X=null}};_.scope.on();const ee=_.effect=new dr(ne);_.scope.off();const G=_.update=ee.run.bind(ee),ke=_.job=ee.runIfDirty.bind(ee);ke.i=_,ke.id=_.uid,ee.scheduler=()=>kl(ke),fn(_,!0),G()},D=(_,$,V)=>{$.component=_;const X=_.vnode.props;_.vnode=$,_.next=null,Nu(_,$.props,X,V),Bu(_,$.children,V),Fs(),na(_),Ws()},ae=(_,$,V,X,q,J,re,ne,ee=!1)=>{const G=_&&_.children,ke=_?_.shapeFlag:0,ie=$.children,{patchFlag:ge,shapeFlag:Me}=$;if(ge>0){if(ge&128){F(G,ie,V,X,q,J,re,ne,ee);return}else if(ge&256){ue(G,ie,V,X,q,J,re,ne,ee);return}}Me&8?(ke&16&&ct(G,q,J),ie!==G&&u(V,ie)):ke&16?Me&16?F(G,ie,V,X,q,J,re,ne,ee):ct(G,q,J,!0):(ke&8&&u(V,""),Me&16&&we(ie,V,X,q,J,re,ne,ee))},ue=(_,$,V,X,q,J,re,ne,ee)=>{_=_||En,$=$||En;const G=_.length,ke=$.length,ie=Math.min(G,ke);let ge;for(ge=0;ge<ie;ge++){const Me=$[ge]=ee?tn($[ge]):zs($[ge]);N(_[ge],Me,V,null,q,J,re,ne,ee)}G>ke?ct(_,q,J,!0,!1,ie):we($,V,X,q,J,re,ne,ee,ie)},F=(_,$,V,X,q,J,re,ne,ee)=>{let G=0;const ke=$.length;let ie=_.length-1,ge=ke-1;for(;G<=ie&&G<=ge;){const Me=_[G],Le=$[G]=ee?tn($[G]):zs($[G]);if(bn(Me,Le))N(Me,Le,V,null,q,J,re,ne,ee);else break;G++}for(;G<=ie&&G<=ge;){const Me=_[ie],Le=$[ge]=ee?tn($[ge]):zs($[ge]);if(bn(Me,Le))N(Me,Le,V,null,q,J,re,ne,ee);else break;ie--,ge--}if(G>ie){if(G<=ge){const Me=ge+1,Le=Me<ke?$[Me].el:X;for(;G<=ge;)N(null,$[G]=ee?tn($[G]):zs($[G]),V,Le,q,J,re,ne,ee),G++}}else if(G>ge)for(;G<=ie;)xe(_[G],q,J,!0),G++;else{const Me=G,Le=G,Xe=new Map;for(G=Le;G<=ge;G++){const gt=$[G]=ee?tn($[G]):zs($[G]);gt.key!=null&&Xe.set(gt.key,G)}let Fe,qe=0;const yt=ge-Le+1;let Dt=!1,Pt=0;const ps=new Array(yt);for(G=0;G<yt;G++)ps[G]=0;for(G=Me;G<=ie;G++){const gt=_[G];if(qe>=yt){xe(gt,q,J,!0);continue}let Jt;if(gt.key!=null)Jt=Xe.get(gt.key);else for(Fe=Le;Fe<=ge;Fe++)if(ps[Fe-Le]===0&&bn(gt,$[Fe])){Jt=Fe;break}Jt===void 0?xe(gt,q,J,!0):(ps[Jt-Le]=G+1,Jt>=Pt?Pt=Jt:Dt=!0,N(gt,$[Jt],V,null,q,J,re,ne,ee),qe++)}const Yt=Dt?Ku(ps):En;for(Fe=Yt.length-1,G=yt-1;G>=0;G--){const gt=Le+G,Jt=$[gt],H=$[gt+1],h=gt+1<ke?H.el||oc(H):X;ps[G]===0?N(null,Jt,V,h,q,J,re,ne,ee):Dt&&(Fe<0||G!==Yt[Fe]?ve(Jt,V,h,2):Fe--)}}},ve=(_,$,V,X,q=null)=>{const{el:J,type:re,transition:ne,children:ee,shapeFlag:G}=_;if(G&6){ve(_.component.subTree,$,V,X);return}if(G&128){_.suspense.move($,V,X);return}if(G&64){re.move(_,$,V,Ot);return}if(re===oe){o(J,$,V);for(let ie=0;ie<ee.length;ie++)ve(ee[ie],$,V,X);o(_.anchor,$,V);return}if(re===Uo){E(_,$,V);return}if(X!==2&&G&1&&ne)if(X===0)ne.beforeEnter(J),o(J,$,V),Ut(()=>ne.enter(J),q);else{const{leave:ie,delayLeave:ge,afterLeave:Me}=ne,Le=()=>{_.ctx.isUnmounted?i(J):o(J,$,V)},Xe=()=>{J._isLeaving&&J[Ls](!0),ie(J,()=>{Le(),Me&&Me()})};ge?ge(J,Le,Xe):Xe()}else o(J,$,V)},xe=(_,$,V,X=!1,q=!1)=>{const{type:J,props:re,ref:ne,children:ee,dynamicChildren:G,shapeFlag:ke,patchFlag:ie,dirs:ge,cacheIndex:Me}=_;if(ie===-2&&(q=!1),ne!=null&&(Fs(),io(ne,null,V,_,!0),Ws()),Me!=null&&($.renderCache[Me]=void 0),ke&256){$.ctx.deactivate(_);return}const Le=ke&1&&ge,Xe=!lo(_);let Fe;if(Xe&&(Fe=re&&re.onVnodeBeforeUnmount)&&ys(Fe,$,_),ke&6)Mt(_.component,V,X);else{if(ke&128){_.suspense.unmount(V,X);return}Le&&pn(_,null,$,"beforeUnmount"),ke&64?_.type.remove(_,$,V,Ot,X):G&&!G.hasOnce&&(J!==oe||ie>0&&ie&64)?ct(G,$,V,!1,!0):(J===oe&&ie&384||!q&&ke&16)&&ct(ee,$,V),X&&We(_)}(Xe&&(Fe=re&&re.onVnodeUnmounted)||Le)&&Ut(()=>{Fe&&ys(Fe,$,_),Le&&pn(_,null,$,"unmounted")},V)},We=_=>{const{type:$,el:V,anchor:X,transition:q}=_;if($===oe){ot(V,X);return}if($===Uo){O(_);return}const J=()=>{i(V),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(_.shapeFlag&1&&q&&!q.persisted){const{leave:re,delayLeave:ne}=q,ee=()=>re(V,J);ne?ne(_.el,J,ee):ee()}else J()},ot=(_,$)=>{let V;for(;_!==$;)V=g(_),i(_),_=V;i($)},Mt=(_,$,V)=>{const{bum:X,scope:q,job:J,subTree:re,um:ne,m:ee,a:G}=_;ba(ee),ba(G),X&&Do(X),q.stop(),J&&(J.flags|=8,xe(re,_,$,V)),ne&&Ut(ne,$),Ut(()=>{_.isUnmounted=!0},$)},ct=(_,$,V,X=!1,q=!1,J=0)=>{for(let re=J;re<_.length;re++)xe(_[re],$,V,X,q)},Et=_=>{if(_.shapeFlag&6)return Et(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const $=g(_.anchor||_.el),V=$&&$[jr];return V?g(V):$};let At=!1;const kt=(_,$,V)=>{let X;_==null?$._vnode&&(xe($._vnode,null,null,!0),X=$._vnode.component):N($._vnode||null,_,$,null,null,null,V),$._vnode=_,At||(At=!0,na(X),Sr(),At=!1)},Ot={p:N,um:xe,m:ve,r:We,mt:I,mc:we,pc:ae,pbc:ze,n:Et,o:e};return{render:kt,hydrate:void 0,createApp:Iu(kt)}}function Di({type:e,props:s},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:n}function fn({effect:e,job:s},n){n?(e.flags|=32,s.flags|=4):(e.flags&=-33,s.flags&=-5)}function Wu(e,s){return(!e||e&&!e.pendingBranch)&&s&&!s.persisted}function Sl(e,s,n=!1){const o=e.children,i=s.children;if(Ie(o)&&Ie(i))for(let l=0;l<o.length;l++){const a=o[l];let r=i[l];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=i[l]=tn(i[l]),r.el=a.el),!n&&r.patchFlag!==-2&&Sl(a,r)),r.type===vi&&(r.patchFlag!==-1?r.el=a.el:r.__elIndex=l+(e.type===oe?1:0)),r.type===Wt&&!r.el&&(r.el=a.el)}}function Ku(e){const s=e.slice(),n=[0];let o,i,l,a,r;const p=e.length;for(o=0;o<p;o++){const b=e[o];if(b!==0){if(i=n[n.length-1],e[i]<b){s[o]=i,n.push(o);continue}for(l=0,a=n.length-1;l<a;)r=l+a>>1,e[n[r]]<b?l=r+1:a=r;b<e[n[l]]&&(l>0&&(s[o]=n[l-1]),n[l]=o)}}for(l=n.length,a=n[l-1];l-- >0;)n[l]=a,a=s[a];return n}function nc(e){const s=e.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:nc(s)}function ba(e){if(e)for(let s=0;s<e.length;s++)e[s].flags|=8}function oc(e){if(e.placeholder)return e.placeholder;const s=e.component;return s?oc(s.subTree):null}const ic=e=>e.__isSuspense;function Hu(e,s){s&&s.pendingBranch?Ie(e)?s.effects.push(...e):s.effects.push(e):nu(e)}const oe=Symbol.for("v-fgt"),vi=Symbol.for("v-txt"),Wt=Symbol.for("v-cmt"),Uo=Symbol.for("v-stc"),ro=[];let is=null;function c(e=!1){ro.push(is=e?null:[])}function Gu(){ro.pop(),is=ro[ro.length-1]||null}let vo=1;function Qo(e,s=!1){vo+=e,e<0&&is&&s&&(is.hasOnce=!0)}function lc(e){return e.dynamicChildren=vo>0?is||En:null,Gu(),vo>0&&is&&is.push(e),e}function f(e,s,n,o,i,l){return lc(t(e,s,n,o,i,l,!0))}function Ee(e,s,n,o,i){return lc(Ze(e,s,n,o,i,!0))}function Zo(e){return e?e.__v_isVNode===!0:!1}function bn(e,s){return e.type===s.type&&e.key===s.key}const ac=({key:e})=>e??null,Fo=({ref:e,ref_key:s,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?mt(e)||Tt(e)||Re(e)?{i:cs,r:e,k:s,f:!!n}:e:null);function t(e,s=null,n=null,o=0,i=null,l=e===oe?0:1,a=!1,r=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:s,key:s&&ac(s),ref:s&&Fo(s),scopeId:Mr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:cs};return r?(Il(p,n),l&128&&e.normalize(p)):n&&(p.shapeFlag|=mt(n)?8:16),vo>0&&!a&&is&&(p.patchFlag>0||l&6)&&p.patchFlag!==32&&is.push(p),p}const Ze=qu;function qu(e,s=null,n=null,o=0,i=null,l=!1){if((!e||e===yu)&&(e=Wt),Zo(e)){const r=ln(e,s,!0);return n&&Il(r,n),vo>0&&!l&&is&&(r.shapeFlag&6?is[is.indexOf(e)]=r:is.push(r)),r.patchFlag=-2,r}if(op(e)&&(e=e.__vccOpts),s){s=Yu(s);let{class:r,style:p}=s;r&&!mt(r)&&(s.class=W(r)),tt(p)&&(ci(p)&&!Ie(p)&&(p=It({},p)),s.style=Ve(p))}const a=mt(e)?1:ic(e)?128:Ar(e)?64:tt(e)?4:Re(e)?2:0;return t(e,s,n,o,i,a,l,!0)}function Yu(e){return e?ci(e)||Xr(e)?It({},e):e:null}function ln(e,s,n=!1,o=!1){const{props:i,ref:l,patchFlag:a,children:r,transition:p}=e,b=s?Ju(i||{},s):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:b,key:b&&ac(b),ref:s&&s.ref?n&&l?Ie(l)?l.concat(Fo(s)):[l,Fo(s)]:Fo(s):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:s&&e.type!==oe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ln(e.ssContent),ssFallback:e.ssFallback&&ln(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&o&&yn(u,p.clone(u)),u}function ns(e=" ",s=0){return Ze(vi,null,e,s)}function wt(e,s){const n=Ze(Uo,null,e);return n.staticCount=s,n}function M(e="",s=!1){return s?(c(),Ee(Wt,null,e)):Ze(Wt,null,e)}function zs(e){return e==null||typeof e=="boolean"?Ze(Wt):Ie(e)?Ze(oe,null,e.slice()):Zo(e)?tn(e):Ze(vi,null,String(e))}function tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ln(e)}function Il(e,s){let n=0;const{shapeFlag:o}=e;if(s==null)s=null;else if(Ie(s))n=16;else if(typeof s=="object")if(o&65){const i=s.default;i&&(i._c&&(i._d=!1),Il(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=s._;!i&&!Xr(s)?s._ctx=cs:i===3&&cs&&(cs.slots._===1?s._=1:(s._=2,e.patchFlag|=1024))}else Re(s)?(s={default:s,_ctx:cs},n=32):(s=String(s),o&64?(n=16,s=[ns(s)]):n=8);e.children=s,e.shapeFlag|=n}function Ju(...e){const s={};for(let n=0;n<e.length;n++){const o=e[n];for(const i in o)if(i==="class")s.class!==o.class&&(s.class=W([s.class,o.class]));else if(i==="style")s.style=Ve([s.style,o.style]);else if(ni(i)){const l=s[i],a=o[i];a&&l!==a&&!(Ie(l)&&l.includes(a))&&(s[i]=l?[].concat(l,a):a)}else i!==""&&(s[i]=o[i])}return s}function ys(e,s,n,o=null){ms(e,s,7,[n,o])}const Xu=Gr();let Qu=0;function Zu(e,s,n){const o=e.type,i=(s?s.appContext:e.appContext)||Xu,l={uid:Qu++,vnode:e,type:o,parent:s,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new kd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(i.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zr(o,i),emitsOptions:qr(o,i),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:o.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=s?s.root:l,l.emit=Eu.bind(null,l),e.ce&&e.ce(l),l}let Kt=null;const Ml=()=>Kt||cs;let ei,sl;{const e=ai(),s=(n,o)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(o),l=>{i.length>1?i.forEach(a=>a(l)):i[0](l)}};ei=s("__VUE_INSTANCE_SETTERS__",n=>Kt=n),sl=s("__VUE_SSR_SETTERS__",n=>xo=n)}const ho=e=>{const s=Kt;return ei(e),e.scope.on(),()=>{e.scope.off(),ei(s)}},ma=()=>{Kt&&Kt.scope.off(),ei(null)};function rc(e){return e.vnode.shapeFlag&4}let xo=!1;function ep(e,s=!1,n=!1){s&&sl(s);const{props:o,children:i}=e.vnode,l=rc(e);Ru(e,o,l,s),Vu(e,i,n||s);const a=l?tp(e,s):void 0;return s&&sl(!1),a}function tp(e,s){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wu);const{setup:o}=n;if(o){Fs();const i=e.setupContext=o.length>1?np(e):null,l=ho(e),a=go(o,e,0,[e.props,i]),r=sr(a);if(Ws(),l(),(r||e.sp)&&!lo(e)&&Br(e),r){if(a.then(ma,ma),s)return a.then(p=>{ga(e,p)}).catch(p=>{di(p,e,0)});e.asyncDep=a}else ga(e,a)}else cc(e)}function ga(e,s,n){Re(s)?e.type.__ssrInlineRender?e.ssrRender=s:e.render=s:tt(s)&&(e.setupState=zr(s)),cc(e)}function cc(e,s,n){const o=e.type;e.render||(e.render=o.render||$s);{const i=ho(e);Fs();try{ku(e)}finally{Ws(),i()}}}const sp={get(e,s){return Nt(e,"get",""),e[s]}};function np(e){const s=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,sp),slots:e.slots,emit:e.emit,expose:s}}function xi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(zr(Wd(e.exposed)),{get(s,n){if(n in s)return s[n];if(n in ao)return ao[n](e)},has(s,n){return n in s||n in ao}})):e.proxy}function op(e){return Re(e)&&"__vccOpts"in e}const be=(e,s)=>Qd(e,s,xo);function ip(e,s,n){try{Qo(-1);const o=arguments.length;return o===2?tt(s)&&!Ie(s)?Zo(s)?Ze(e,null,[s]):Ze(e,s):Ze(e,null,s):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Zo(n)&&(n=[n]),Ze(e,s,n))}finally{Qo(1)}}const lp="3.5.27";let nl;const ha=typeof window<"u"&&window.trustedTypes;if(ha)try{nl=ha.createPolicy("vue",{createHTML:e=>e})}catch{}const dc=nl?e=>nl.createHTML(e):e=>e,ap="http://www.w3.org/2000/svg",rp="http://www.w3.org/1998/Math/MathML",Ns=typeof document<"u"?document:null,ya=Ns&&Ns.createElement("template"),cp={insert:(e,s,n)=>{s.insertBefore(e,n||null)},remove:e=>{const s=e.parentNode;s&&s.removeChild(e)},createElement:(e,s,n,o)=>{const i=s==="svg"?Ns.createElementNS(ap,e):s==="mathml"?Ns.createElementNS(rp,e):n?Ns.createElement(e,{is:n}):Ns.createElement(e);return e==="select"&&o&&o.multiple!=null&&i.setAttribute("multiple",o.multiple),i},createText:e=>Ns.createTextNode(e),createComment:e=>Ns.createComment(e),setText:(e,s)=>{e.nodeValue=s},setElementText:(e,s)=>{e.textContent=s},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ns.querySelector(e),setScopeId(e,s){e.setAttribute(s,"")},insertStaticContent(e,s,n,o,i,l){const a=n?n.previousSibling:s.lastChild;if(i&&(i===l||i.nextSibling))for(;s.insertBefore(i.cloneNode(!0),n),!(i===l||!(i=i.nextSibling)););else{ya.innerHTML=dc(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const r=ya.content;if(o==="svg"||o==="mathml"){const p=r.firstChild;for(;p.firstChild;)r.appendChild(p.firstChild);r.removeChild(p)}s.insertBefore(r,n)}return[a?a.nextSibling:s.firstChild,n?n.previousSibling:s.lastChild]}},Js="transition",Jn="animation",Rn=Symbol("_vtc"),uc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},pc=It({},Nr,uc),dp=e=>(e.displayName="Transition",e.props=pc,e),nn=dp((e,{slots:s})=>ip(du,fc(e),s)),vn=(e,s=[])=>{Ie(e)?e.forEach(n=>n(...s)):e&&e(...s)},wa=e=>e?Ie(e)?e.some(s=>s.length>1):e.length>1:!1;function fc(e){const s={};for(const se in e)se in uc||(s[se]=e[se]);if(e.css===!1)return s;const{name:n="v",type:o,duration:i,enterFromClass:l=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:p=l,appearActiveClass:b=a,appearToClass:u=r,leaveFromClass:v=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:j=`${n}-leave-to`}=e,B=up(i),N=B&&B[0],L=B&&B[1],{onBeforeEnter:S,onEnter:T,onEnterCancelled:E,onLeave:O,onLeaveCancelled:A,onBeforeAppear:R=S,onAppear:Y=T,onAppearCancelled:we=E}=s,ce=(se,K,I,y)=>{se._enterCancelled=y,Qs(se,K?u:r),Qs(se,K?b:a),I&&I()},ze=(se,K)=>{se._isLeaving=!1,Qs(se,v),Qs(se,j),Qs(se,g),K&&K()},Te=se=>(K,I)=>{const y=se?Y:T,z=()=>ce(K,se,I);vn(y,[K,z]),ka(()=>{Qs(K,se?p:l),ws(K,se?u:r),wa(y)||_a(K,o,N,z)})};return It(s,{onBeforeEnter(se){vn(S,[se]),ws(se,l),ws(se,a)},onBeforeAppear(se){vn(R,[se]),ws(se,p),ws(se,b)},onEnter:Te(!1),onAppear:Te(!0),onLeave(se,K){se._isLeaving=!0;const I=()=>ze(se,K);ws(se,v),se._enterCancelled?(ws(se,g),ol(se)):(ol(se),ws(se,g)),ka(()=>{se._isLeaving&&(Qs(se,v),ws(se,j),wa(O)||_a(se,o,L,I))}),vn(O,[se,I])},onEnterCancelled(se){ce(se,!1,void 0,!0),vn(E,[se])},onAppearCancelled(se){ce(se,!0,void 0,!0),vn(we,[se])},onLeaveCancelled(se){ze(se),vn(A,[se])}})}function up(e){if(e==null)return null;if(tt(e))return[Vi(e.enter),Vi(e.leave)];{const s=Vi(e);return[s,s]}}function Vi(e){return vd(e)}function ws(e,s){s.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Rn]||(e[Rn]=new Set)).add(s)}function Qs(e,s){s.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[Rn];n&&(n.delete(s),n.size||(e[Rn]=void 0))}function ka(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let pp=0;function _a(e,s,n,o){const i=e._endId=++pp,l=()=>{i===e._endId&&o()};if(n!=null)return setTimeout(l,n);const{type:a,timeout:r,propCount:p}=vc(e,s);if(!a)return o();const b=a+"end";let u=0;const v=()=>{e.removeEventListener(b,g),l()},g=j=>{j.target===e&&++u>=p&&v()};setTimeout(()=>{u<p&&v()},r+1),e.addEventListener(b,g)}function vc(e,s){const n=window.getComputedStyle(e),o=B=>(n[B]||"").split(", "),i=o(`${Js}Delay`),l=o(`${Js}Duration`),a=za(i,l),r=o(`${Jn}Delay`),p=o(`${Jn}Duration`),b=za(r,p);let u=null,v=0,g=0;s===Js?a>0&&(u=Js,v=a,g=l.length):s===Jn?b>0&&(u=Jn,v=b,g=p.length):(v=Math.max(a,b),u=v>0?a>b?Js:Jn:null,g=u?u===Js?l.length:p.length:0);const j=u===Js&&/\b(?:transform|all)(?:,|$)/.test(o(`${Js}Property`).toString());return{type:u,timeout:v,propCount:g,hasTransform:j}}function za(e,s){for(;e.length<s.length;)e=e.concat(e);return Math.max(...s.map((n,o)=>$a(n)+$a(e[o])))}function $a(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ol(e){return(e?e.ownerDocument:document).body.offsetHeight}function fp(e,s,n){const o=e[Rn];o&&(s=(s?[s,...o]:[...o]).join(" ")),s==null?e.removeAttribute("class"):n?e.setAttribute("class",s):e.className=s}const ti=Symbol("_vod"),xc=Symbol("_vsh"),El={name:"show",beforeMount(e,{value:s},{transition:n}){e[ti]=e.style.display==="none"?"":e.style.display,n&&s?n.beforeEnter(e):Xn(e,s)},mounted(e,{value:s},{transition:n}){n&&s&&n.enter(e)},updated(e,{value:s,oldValue:n},{transition:o}){!s!=!n&&(o?s?(o.beforeEnter(e),Xn(e,!0),o.enter(e)):o.leave(e,()=>{Xn(e,!1)}):Xn(e,s))},beforeUnmount(e,{value:s}){Xn(e,s)}};function Xn(e,s){e.style.display=s?e[ti]:"none",e[xc]=!s}const vp=Symbol(""),xp=/(?:^|;)\s*display\s*:/;function bp(e,s,n){const o=e.style,i=mt(n);let l=!1;if(n&&!i){if(s)if(mt(s))for(const a of s.split(";")){const r=a.slice(0,a.indexOf(":")).trim();n[r]==null&&Wo(o,r,"")}else for(const a in s)n[a]==null&&Wo(o,a,"");for(const a in n)a==="display"&&(l=!0),Wo(o,a,n[a])}else if(i){if(s!==n){const a=o[vp];a&&(n+=";"+a),o.cssText=n,l=xp.test(n)}}else s&&e.removeAttribute("style");ti in e&&(e[ti]=l?o.display:"",e[xc]&&(o.display="none"))}const Ca=/\s*!important$/;function Wo(e,s,n){if(Ie(n))n.forEach(o=>Wo(e,s,o));else if(n==null&&(n=""),s.startsWith("--"))e.setProperty(s,n);else{const o=mp(e,s);Ca.test(n)?e.setProperty(rn(o),n.replace(Ca,""),"important"):e[o]=n}}const Sa=["Webkit","Moz","ms"],Bi={};function mp(e,s){const n=Bi[s];if(n)return n;let o=on(s);if(o!=="filter"&&o in e)return Bi[s]=o;o=ir(o);for(let i=0;i<Sa.length;i++){const l=Sa[i]+o;if(l in e)return Bi[s]=l}return s}const Ia="http://www.w3.org/1999/xlink";function Ma(e,s,n,o,i,l=yd(s)){o&&s.startsWith("xlink:")?n==null?e.removeAttributeNS(Ia,s.slice(6,s.length)):e.setAttributeNS(Ia,s,n):n==null||l&&!ar(n)?e.removeAttribute(s):e.setAttribute(s,l?"":Ss(n)?String(n):n)}function Ea(e,s,n,o,i){if(s==="innerHTML"||s==="textContent"){n!=null&&(e[s]=s==="innerHTML"?dc(n):n);return}const l=e.tagName;if(s==="value"&&l!=="PROGRESS"&&!l.includes("-")){const r=l==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(r!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(s),e._value=n;return}let a=!1;if(n===""||n==null){const r=typeof e[s];r==="boolean"?n=ar(n):n==null&&r==="string"?(n="",a=!0):r==="number"&&(n=0,a=!0)}try{e[s]=n}catch{}a&&e.removeAttribute(i||s)}function Us(e,s,n,o){e.addEventListener(s,n,o)}function gp(e,s,n,o){e.removeEventListener(s,n,o)}const Ta=Symbol("_vei");function hp(e,s,n,o,i=null){const l=e[Ta]||(e[Ta]={}),a=l[s];if(o&&a)a.value=o;else{const[r,p]=yp(s);if(o){const b=l[s]=_p(o,i);Us(e,r,b,p)}else a&&(gp(e,r,a,p),l[s]=void 0)}}const ja=/(?:Once|Passive|Capture)$/;function yp(e){let s;if(ja.test(e)){s={};let o;for(;o=e.match(ja);)e=e.slice(0,e.length-o[0].length),s[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rn(e.slice(2)),s]}let Ui=0;const wp=Promise.resolve(),kp=()=>Ui||(wp.then(()=>Ui=0),Ui=Date.now());function _p(e,s){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;ms(zp(o,n.value),s,5,[o])};return n.value=e,n.attached=kp(),n}function zp(e,s){if(Ie(s)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},s.map(o=>i=>!i._stopped&&o&&o(i))}else return s}const Aa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$p=(e,s,n,o,i,l)=>{const a=i==="svg";s==="class"?fp(e,o,a):s==="style"?bp(e,n,o):ni(s)?fl(s)||hp(e,s,n,o,l):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Cp(e,s,o,a))?(Ea(e,s,o),!e.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&Ma(e,s,o,a,l,s!=="value")):e._isVueCE&&(/[A-Z]/.test(s)||!mt(o))?Ea(e,on(s),o,l,s):(s==="true-value"?e._trueValue=o:s==="false-value"&&(e._falseValue=o),Ma(e,s,o,a))};function Cp(e,s,n,o){if(o)return!!(s==="innerHTML"||s==="textContent"||s in e&&Aa(s)&&Re(n));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="autocorrect"||s==="sandbox"&&e.tagName==="IFRAME"||s==="form"||s==="list"&&e.tagName==="INPUT"||s==="type"&&e.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Aa(s)&&mt(n)?!1:s in e}const bc=new WeakMap,mc=new WeakMap,si=Symbol("_moveCb"),Oa=Symbol("_enterCb"),Sp=e=>(delete e.props.mode,e),Ip=Sp({name:"TransitionGroup",props:It({},pc,{tag:String,moveClass:String}),setup(e,{slots:s}){const n=Ml(),o=Rr();let i,l;return Fr(()=>{if(!i.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!Ap(i[0].el,n.vnode.el,a)){i=[];return}i.forEach(Ep),i.forEach(Tp);const r=i.filter(jp);ol(n.vnode.el),r.forEach(p=>{const b=p.el,u=b.style;ws(b,a),u.transform=u.webkitTransform=u.transitionDuration="";const v=b[si]=g=>{g&&g.target!==b||(!g||g.propertyName.endsWith("transform"))&&(b.removeEventListener("transitionend",v),b[si]=null,Qs(b,a))};b.addEventListener("transitionend",v)}),i=[]}),()=>{const a=Ne(e),r=fc(a);let p=a.tag||oe;if(i=[],l)for(let b=0;b<l.length;b++){const u=l[b];u.el&&u.el instanceof Element&&(i.push(u),yn(u,fo(u,r,o,n)),bc.set(u,{left:u.el.offsetLeft,top:u.el.offsetTop}))}l=s.default?_l(s.default()):[];for(let b=0;b<l.length;b++){const u=l[b];u.key!=null&&yn(u,fo(u,r,o,n))}return Ze(p,null,l)}}}),Mp=Ip;function Ep(e){const s=e.el;s[si]&&s[si](),s[Oa]&&s[Oa]()}function Tp(e){mc.set(e,{left:e.el.offsetLeft,top:e.el.offsetTop})}function jp(e){const s=bc.get(e),n=mc.get(e),o=s.left-n.left,i=s.top-n.top;if(o||i){const l=e.el.style;return l.transform=l.webkitTransform=`translate(${o}px,${i}px)`,l.transitionDuration="0s",e}}function Ap(e,s,n){const o=e.cloneNode(),i=e[Rn];i&&i.forEach(r=>{r.split(/\s+/).forEach(p=>p&&o.classList.remove(p))}),n.split(/\s+/).forEach(r=>r&&o.classList.add(r)),o.style.display="none";const l=s.nodeType===1?s:s.parentNode;l.appendChild(o);const{hasTransform:a}=vc(o);return l.removeChild(o),a}const an=e=>{const s=e.props["onUpdate:modelValue"]||!1;return Ie(s)?n=>Do(s,n):s};function Op(e){e.target.composing=!0}function Pa(e){const s=e.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const us=Symbol("_assign");function Ra(e,s,n){return s&&(e=e.trim()),n&&(e=li(e)),e}const pe={created(e,{modifiers:{lazy:s,trim:n,number:o}},i){e[us]=an(i);const l=o||i.props&&i.props.type==="number";Us(e,s?"change":"input",a=>{a.target.composing||e[us](Ra(e.value,n,l))}),(n||l)&&Us(e,"change",()=>{e.value=Ra(e.value,n,l)}),s||(Us(e,"compositionstart",Op),Us(e,"compositionend",Pa),Us(e,"change",Pa))},mounted(e,{value:s}){e.value=s??""},beforeUpdate(e,{value:s,oldValue:n,modifiers:{lazy:o,trim:i,number:l}},a){if(e[us]=an(a),e.composing)return;const r=(l||e.type==="number")&&!/^0\d/.test(e.value)?li(e.value):e.value,p=s??"";r!==p&&(document.activeElement===e&&e.type!=="range"&&(o&&s===n||i&&e.value.trim()===p)||(e.value=p))}},Ds={deep:!0,created(e,s,n){e[us]=an(n),Us(e,"change",()=>{const o=e._modelValue,i=Ln(e),l=e.checked,a=e[us];if(Ie(o)){const r=xl(o,i),p=r!==-1;if(l&&!p)a(o.concat(i));else if(!l&&p){const b=[...o];b.splice(r,1),a(b)}}else if(Vn(o)){const r=new Set(o);l?r.add(i):r.delete(i),a(r)}else a(gc(e,l))})},mounted:Na,beforeUpdate(e,s,n){e[us]=an(n),Na(e,s,n)}};function Na(e,{value:s,oldValue:n},o){e._modelValue=s;let i;if(Ie(s))i=xl(s,o.props.value)>-1;else if(Vn(s))i=s.has(o.props.value);else{if(s===n)return;i=hn(s,gc(e,!0))}e.checked!==i&&(e.checked=i)}const Pp={created(e,{value:s},n){e.checked=hn(s,n.props.value),e[us]=an(n),Us(e,"change",()=>{e[us](Ln(e))})},beforeUpdate(e,{value:s,oldValue:n},o){e[us]=an(o),s!==n&&(e.checked=hn(s,o.props.value))}},Nn={deep:!0,created(e,{value:s,modifiers:{number:n}},o){const i=Vn(s);Us(e,"change",()=>{const l=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?li(Ln(a)):Ln(a));e[us](e.multiple?i?new Set(l):l:l[0]),e._assigning=!0,_s(()=>{e._assigning=!1})}),e[us]=an(o)},mounted(e,{value:s}){La(e,s)},beforeUpdate(e,s,n){e[us]=an(n)},updated(e,{value:s}){e._assigning||La(e,s)}};function La(e,s){const n=e.multiple,o=Ie(s);if(!(n&&!o&&!Vn(s))){for(let i=0,l=e.options.length;i<l;i++){const a=e.options[i],r=Ln(a);if(n)if(o){const p=typeof r;p==="string"||p==="number"?a.selected=s.some(b=>String(b)===String(r)):a.selected=xl(s,r)>-1}else a.selected=s.has(r);else if(hn(Ln(a),s)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ln(e){return"_value"in e?e._value:e.value}function gc(e,s){const n=s?"_trueValue":"_falseValue";return n in e?e[n]:s}const Rp={created(e,s,n){Ro(e,s,n,null,"created")},mounted(e,s,n){Ro(e,s,n,null,"mounted")},beforeUpdate(e,s,n,o){Ro(e,s,n,o,"beforeUpdate")},updated(e,s,n,o){Ro(e,s,n,o,"updated")}};function Np(e,s){switch(e){case"SELECT":return Nn;case"TEXTAREA":return pe;default:switch(s){case"checkbox":return Ds;case"radio":return Pp;default:return pe}}}function Ro(e,s,n,o,i){const a=Np(e.tagName,n.props&&n.props.type)[i];a&&a(e,s,n,o)}const Lp=["ctrl","shift","alt","meta"],Dp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,s)=>Lp.some(n=>e[`${n}Key`]&&!s.includes(n))},je=(e,s)=>{const n=e._withMods||(e._withMods={}),o=s.join(".");return n[o]||(n[o]=((i,...l)=>{for(let a=0;a<s.length;a++){const r=Dp[s[a]];if(r&&r(i,s))return}return e(i,...l)}))},Vp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xs=(e,s)=>{const n=e._withKeys||(e._withKeys={}),o=s.join(".");return n[o]||(n[o]=(i=>{if(!("key"in i))return;const l=rn(i.key);if(s.some(a=>a===l||Vp[a]===l))return e(i)}))},Bp=It({patchProp:$p},cp);let Da;function Up(){return Da||(Da=Uu(Bp))}const Fp=((...e)=>{const s=Up().createApp(...e),{mount:n}=s;return s.mount=o=>{const i=Kp(o);if(!i)return;const l=s._component;!Re(l)&&!l.render&&!l.template&&(l.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=n(i,!1,Wp(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},s});function Wp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kp(e){return mt(e)?document.querySelector(e):e}const Hp="modulepreload",Gp=function(e,s){return new URL(e,s).href},Va={},il=function(s,n,o){let i=Promise.resolve();if(n&&n.length>0){let b=function(u){return Promise.all(u.map(v=>Promise.resolve(v).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const a=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),p=r?.nonce||r?.getAttribute("nonce");i=b(n.map(u=>{if(u=Gp(u,o),u in Va)return;Va[u]=!0;const v=u.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(o)for(let B=a.length-1;B>=0;B--){const N=a[B];if(N.href===u&&(!v||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${g}`))return;const j=document.createElement("link");if(j.rel=v?"stylesheet":Hp,v||(j.as="script"),j.crossOrigin="",j.href=u,p&&j.setAttribute("nonce",p),document.head.appendChild(j),v)return new Promise((B,N)=>{j.addEventListener("load",B),j.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return i.then(a=>{for(const r of a||[])r.status==="rejected"&&l(r.reason);return s().catch(l)})},qp="Roche_db",Yp=11,Pe={PERSONAS:"personas",CONTACTS:"contacts",SETTINGS:"settings",PRESETS:"presets",CONVERSATIONS:"conversations",MESSAGES:"messages",WORLDBOOK_CATEGORIES:"worldbook_categories",WORLDBOOK_ENTRIES:"worldbook_entries",RELATIONSHIPS:"relationships",STICKER_CATEGORIES:"sticker_categories",STICKERS:"stickers",CORE_MEMORIES:"core_memories",FACT_MEMORIES:"fact_memories",REGEX_CATEGORIES:"regex_categories",REGEX_ENTRIES:"regex_entries"};let Lt=null,Qn=null;const Is=()=>Lt?Promise.resolve():Qn||(Qn=new Promise((e,s)=>{const n=indexedDB.open(qp,Yp);n.onerror=o=>{const i=o.target.error;console.error("IndexedDB error:",i),Qn=null,s(i||"Error opening database")},n.onsuccess=o=>{Lt=o.target.result,e()},n.onupgradeneeded=o=>{const i=o.target.result;if(i.objectStoreNames.contains(Pe.PERSONAS)||i.createObjectStore(Pe.PERSONAS,{keyPath:"id"}),i.objectStoreNames.contains(Pe.CONTACTS)||i.createObjectStore(Pe.CONTACTS,{keyPath:"id"}),i.objectStoreNames.contains(Pe.SETTINGS)||i.createObjectStore(Pe.SETTINGS,{keyPath:"id"}),i.objectStoreNames.contains(Pe.PRESETS)||i.createObjectStore(Pe.PRESETS,{keyPath:"id"}),i.objectStoreNames.contains(Pe.CONVERSATIONS)||i.createObjectStore(Pe.CONVERSATIONS,{keyPath:"id"}),!i.objectStoreNames.contains(Pe.MESSAGES)){const l=i.createObjectStore(Pe.MESSAGES,{keyPath:"id"});l.createIndex("conversationId","conversationId",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}if(i.objectStoreNames.contains(Pe.WORLDBOOK_CATEGORIES)||i.createObjectStore(Pe.WORLDBOOK_CATEGORIES,{keyPath:"id"}),i.objectStoreNames.contains(Pe.WORLDBOOK_ENTRIES)||i.createObjectStore(Pe.WORLDBOOK_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),!i.objectStoreNames.contains(Pe.RELATIONSHIPS)){const l=i.createObjectStore(Pe.RELATIONSHIPS,{keyPath:"id"});l.createIndex("sourceId","sourceId",{unique:!1}),l.createIndex("targetId","targetId",{unique:!1}),l.createIndex("type","type",{unique:!1})}if(i.objectStoreNames.contains(Pe.STICKER_CATEGORIES)||i.createObjectStore(Pe.STICKER_CATEGORIES,{keyPath:"id"}),i.objectStoreNames.contains(Pe.STICKERS)||i.createObjectStore(Pe.STICKERS,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),i.objectStoreNames.contains(Pe.CORE_MEMORIES)||i.createObjectStore(Pe.CORE_MEMORIES,{keyPath:"conversationId"}),!i.objectStoreNames.contains(Pe.FACT_MEMORIES)){const l=i.createObjectStore(Pe.FACT_MEMORIES,{keyPath:"id"});l.createIndex("conversationId","conversationId",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}i.objectStoreNames.contains(Pe.REGEX_CATEGORIES)||i.createObjectStore(Pe.REGEX_CATEGORIES,{keyPath:"id"}),i.objectStoreNames.contains(Pe.REGEX_ENTRIES)||i.createObjectStore(Pe.REGEX_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),i.objectStoreNames.contains("chats")&&i.deleteObjectStore("chats")}}),Qn),ss=async e=>(Lt||await Is(),new Promise((s,n)=>{const l=Lt.transaction([e],"readonly").objectStore(e).getAll();l.onsuccess=()=>s(l.result),l.onerror=()=>n(l.error)})),Je=async(e,s)=>(Lt||await Is(),new Promise((n,o)=>{const a=Lt.transaction([e],"readwrite").objectStore(e).put(s);a.onsuccess=()=>n(),a.onerror=()=>o(a.error)})),os=async(e,s)=>(Lt||await Is(),new Promise((n,o)=>{const a=Lt.transaction([e],"readwrite").objectStore(e).delete(s);a.onsuccess=()=>n(),a.onerror=()=>o(a.error)})),hc=async()=>{Lt||await Is();const n=Lt.transaction([Pe.SETTINGS],"readonly").objectStore(Pe.SETTINGS).get("current");return new Promise((o,i)=>{n.onsuccess=()=>o(n.result),n.onerror=()=>i(n.error)})},Tl=async e=>Je(Pe.SETTINGS,{...e,id:"current"}),bo=async()=>ss(Pe.PRESETS),jl=async e=>Je(Pe.PRESETS,e),Se=Pe,yc=async e=>(Lt||await Is(),new Promise((s,n)=>{const a=Lt.transaction([Pe.MESSAGES],"readonly").objectStore(Pe.MESSAGES).index("conversationId").getAll(IDBKeyRange.only(e));a.onsuccess=()=>{const r=a.result;r.sort((p,b)=>p.timestamp-b.timestamp),s(r)},a.onerror=()=>n(a.error)})),wc=async e=>(Lt||await Is(),new Promise((s,n)=>{const a=Lt.transaction([Pe.FACT_MEMORIES],"readonly").objectStore(Pe.FACT_MEMORIES).index("conversationId").getAll(IDBKeyRange.only(e));a.onsuccess=()=>{const r=a.result;r.sort((p,b)=>b.timestamp-p.timestamp),s(r)},a.onerror=()=>n(a.error)})),Jp=async e=>(Lt||await Is(),new Promise((s,n)=>{const a=Lt.transaction([Pe.REGEX_ENTRIES],"readonly").objectStore(Pe.REGEX_ENTRIES).index("categoryId").getAll(IDBKeyRange.only(e));a.onsuccess=()=>{const r=a.result;r.sort((p,b)=>(p.order||0)-(b.order||0)),s(r)},a.onerror=()=>n(a.error)})),ll=Object.freeze(Object.defineProperty({__proto__:null,DB_STORES:Se,deleteItem:os,getAll:ss,getFactMemoriesByConversationId:wc,getMessagesByConversationId:yc,getPresets:bo,getRegexEntriesByCategory:Jp,getSettings:hc,initDB:Is,put:Je,savePreset:jl,saveSettings:Tl},Symbol.toStringTag,{value:"Module"})),Ba=[{id:"p1",handle:"studio_noir",name:"Noir Official",persona:"A mysterious, high-end design studio director obsessed with brutalism and silence.",avatar:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",bio:"Curating architectural silence and high-contrast fashion. Based in Paris.",link:"noir.studio/archive",location:"Paris, FR",stats:{followers:"18.4k",following:"942"}}],k=Ks({activePersonaId:localStorage.getItem("noir_active_persona_id")||"p1",personas:[],contacts:[],conversations:[],messages:{},relationships:[],stickerCategories:[],stickers:[],regexCategories:[],regexEntries:[],isInitialized:!1,wallet:JSON.parse(localStorage.getItem("noir_wallet_data")||JSON.stringify({balance:0,hasPassword:!1,password:"",transactions:[]})),videoCallState:{isActive:!1,isMinimized:!1,chatId:null}}),Fi=(e,s)=>{k.videoCallState.isActive=e,s&&(k.videoCallState.chatId=s),e||(k.videoCallState.isMinimized=!1,k.videoCallState.chatId=null)},Xp=e=>{k.videoCallState.isMinimized=e},Al=()=>{localStorage.setItem("noir_wallet_data",JSON.stringify(k.wallet))},al=(e,s,n)=>{const o=Date.now(),i={id:crypto.randomUUID(),type:e,amount:s,title:n,timestamp:o,status:"completed"};if(e==="deposit")k.wallet.balance+=s;else if(e==="withdraw"||e==="transfer"){if(k.wallet.balance<s)return!1;k.wallet.balance-=s}return k.wallet.transactions.unshift(i),Al(),!0},Ua=(e,s)=>{k.wallet.balance+=e;const n={id:crypto.randomUUID(),type:"deposit",amount:e,title:"Refund: "+s,timestamp:Date.now(),status:"completed"};k.wallet.transactions.unshift(n),Al()},Qp=e=>{k.wallet.password=e,k.wallet.hasPassword=!0,Al()},kc=e=>k.wallet.password===e,Zp=async()=>{const e=await ss(Se.REGEX_CATEGORIES);k.regexCategories=e||[];const s=await ss(Se.REGEX_ENTRIES);k.regexEntries=s||[]},ef=async()=>{try{await Is();const e=await ss(Se.PERSONAS);if(e.length>0){const a=e.filter(r=>r&&r.id);k.personas.splice(0,k.personas.length,...a)}else{k.personas.splice(0,k.personas.length,...Ba);for(const a of Ba)await Je(Se.PERSONAS,a)}const n=(await ss(Se.CONTACTS)).filter(a=>a&&a.id);k.contacts.splice(0,k.contacts.length,...n);const o=await ss(Se.CONVERSATIONS);k.conversations.splice(0,k.conversations.length,...o.reverse());const i=await ss(Se.RELATIONSHIPS);k.relationships.splice(0,k.relationships.length,...i),await df(),await Zp();const l=localStorage.getItem("noir_active_persona_id");l&&(k.activePersonaId=l),k.isInitialized=!0,console.log("Store initialized. Actve:",k.activePersonaId,"Personas:",k.personas.length)}catch(e){console.error("Failed to initialize store:",e)}},rl=be(()=>k.personas.find(e=>e.id===k.activePersonaId)||k.personas[0]),tf=async e=>{k.personas.push(e),await Je(Se.PERSONAS,JSON.parse(JSON.stringify(e)))},sf=async e=>{const s=k.personas.findIndex(n=>n.id===e.id);s!==-1&&(k.personas[s]=e,await Je(Se.PERSONAS,JSON.parse(JSON.stringify(e))))},nf=async e=>{const s=k.personas.findIndex(n=>n.id===e);if(s!==-1&&(k.personas.splice(s,1),await os(Se.PERSONAS,e),k.activePersonaId===e)){const n=k.personas[0];n&&bi(n.id)}},bi=e=>{console.log("Setting active persona:",e),k.activePersonaId=e,localStorage.setItem("noir_active_persona_id",e)},of=async e=>{k.contacts.push(e),await Je(Se.CONTACTS,e)},lf=async e=>{const s=k.contacts.findIndex(n=>n.id===e.id);s!==-1&&(k.contacts[s]=e,await Je(Se.CONTACTS,e))},af=async e=>{const s=k.contacts.findIndex(n=>n.id===e);s!==-1&&(k.contacts.splice(s,1),await os(Se.CONTACTS,e))},Fa=async e=>{if(!k.conversations.find(n=>n.id===e.id)){k.conversations.unshift(e);const n=JSON.parse(JSON.stringify(e));await Je(Se.CONVERSATIONS,n);const o=e.myActivePersonaId||k.activePersonaId,i=e.participants?.find(l=>l!==o&&l!=="user"&&l!==e.myActivePersonaId)||e.contactId;o&&i&&(k.relationships.find(a=>a.sourceId===o&&a.targetId===i)||await _c(o,i,"new"))}},Dn=async e=>{const s=k.conversations.findIndex(n=>n.id===e.id);if(s!==-1){const n={...k.conversations[s],...e};k.conversations[s]=n;try{const i=JSON.parse(JSON.stringify(Ne(n)));await Je(Se.CONVERSATIONS,i)}catch(o){console.error("Failed to serialize conversation for DB:",o)}}},Ko=async e=>{k.messages[e]||(k.messages[e]=[]);const s=await yc(e);k.messages[e]=s},jt=async(e,s)=>{k.messages[e]||(k.messages[e]=[]),k.messages[e].push(s),await Je(Se.MESSAGES,s);const n=k.conversations.find(o=>o.id===e);n&&Dn({...n,lastMessage:s.text,time:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),updatedAt:s.timestamp}),setTimeout(()=>{mf(e).catch(o=>{console.warn("[Memory] Summarization check failed:",o)})},500)},Xs=async(e,s)=>{if(!k.messages[e])return;const n=k.messages[e].findIndex(o=>o.id===s.id);n!==-1&&(k.messages[e][n]=s,await Je(Se.MESSAGES,s))},rf=async(e,s)=>{if(!k.messages[e])return;const n=k.messages[e].findIndex(o=>o.id===s);n!==-1&&(k.messages[e].splice(n,1),await os(Se.MESSAGES,s))},Wi=async(e,s)=>{if(k.messages[e]){k.messages[e]=k.messages[e].filter(n=>!s.includes(n.id));for(const n of s)await os(Se.MESSAGES,n)}},mi=e=>k.conversations.find(s=>s.id===e),_c=async(e,s,n)=>{const o=k.relationships.find(l=>l.sourceId===e&&l.targetId===s);if(o){o.type!==n&&await zc(o.id,n);return}const i={id:crypto.randomUUID(),sourceId:e,targetId:s,type:n,createdAt:Date.now()};k.relationships.push(i),await Je(Se.RELATIONSHIPS,i)},zc=async(e,s)=>{const n=k.relationships.findIndex(o=>o.id===e);if(n!==-1){const o={...k.relationships[n],type:s};k.relationships[n]=o,await Je(Se.RELATIONSHIPS,o)}},cf=async e=>{const s=k.relationships.findIndex(n=>n.id===e);s!==-1&&(k.relationships.splice(s,1),await os(Se.RELATIONSHIPS,e))},df=async()=>{const e=await ss(Se.STICKER_CATEGORIES);k.stickerCategories=e||[];const s=await ss(Se.STICKERS);k.stickers=s||[]},Wa=async(e,s)=>{const n={id:crypto.randomUUID(),name:e,coverUrl:s||"",createdAt:Date.now()};return k.stickerCategories.push(n),await Je(Se.STICKER_CATEGORIES,n),n},uf=async(e,s)=>{const n=k.stickerCategories.findIndex(o=>o.id===e);if(n!==-1){const o={...k.stickerCategories[n],...s};k.stickerCategories[n]=o,await Je(Se.STICKER_CATEGORIES,o)}},Ka=async e=>{const s=k.stickerCategories.findIndex(n=>n.id===e);if(s!==-1){k.stickerCategories.splice(s,1),await os(Se.STICKER_CATEGORIES,e);const n=k.stickers.filter(o=>o.categoryId===e);for(const o of n)await cl(o.id)}},No=async(e,s,n)=>{const o={id:crypto.randomUUID(),categoryId:e,url:s,keyword:n||"sticker",createdAt:Date.now()};return k.stickers.push(o),await Je(Se.STICKERS,o),o},cl=async e=>{const s=k.stickers.findIndex(n=>n.id===e);s!==-1&&(k.stickers.splice(s,1),await os(Se.STICKERS,e))},On=e=>k.stickers.filter(s=>s.categoryId===e),gi=async e=>{try{return(await ss(Se.CORE_MEMORIES)).find(o=>o.conversationId===e)||null}catch(s){return console.error("Failed to load core memory:",s),null}},$c=async(e,s)=>{const n={conversationId:e,summary:s,lastUpdatedAt:Date.now()};return await Je(Se.CORE_MEMORIES,n),n},Cc=async e=>{try{return await wc(e)}catch(s){return console.error("Failed to load fact memories:",s),[]}},pf=async(e,s)=>{const n={id:crypto.randomUUID(),conversationId:e,...s,timestamp:Date.now()};return await Je(Se.FACT_MEMORIES,n),n},ff=async e=>{await os(Se.FACT_MEMORIES,e)},vf=e=>{if(!e||e==="null")return null;try{const s=new Date(e);return isNaN(s.getTime())?null:s.getTime()}catch{return null}},xf=async e=>{try{const n=(await ss(Se.FACT_MEMORIES)).find(o=>o.id===e);n&&(n.appointmentMentioned=!0,await Je(Se.FACT_MEMORIES,n),console.log("[Appointment] Marked as mentioned:",e))}catch(s){console.error("[Appointment] Failed to mark as mentioned:",s)}},bf=async e=>{try{const s=localStorage.getItem("noir_mounted_apis");if(s){const l=JSON.parse(s)[e];if(l&&l!=="default"){const{getPresets:a}=await il(async()=>{const{getPresets:b}=await Promise.resolve().then(()=>ll);return{getPresets:b}},void 0,import.meta.url),p=(await a()).find(b=>b.id===l);if(p)return{endpoint:p.endpoint,apiKey:p.apiKey,model:p.model,temperature:p.temperature??.3}}}const{getSettings:n}=await il(async()=>{const{getSettings:i}=await Promise.resolve().then(()=>ll);return{getSettings:i}},void 0,import.meta.url),o=await n();return o?{endpoint:o.endpoint,apiKey:o.apiKey,model:o.model,temperature:.3}:null}catch(s){return console.error("[Memory] Failed to get mounted API config:",s),null}},Lo=new Set,mf=async e=>{if(Lo.has(e)){console.log(`[Memory] Summarization already in progress for ${e}, skipping.`);return}try{const s=k.conversations.find(p=>p.id===e);if(!s||!(s.localSettings?.longTermMemoryEnabled===!0))return;const o=s.localSettings?.ltmSummarizeTrigger||100,i=k.messages[e]||[],a=(await gi(e))?.lastUpdatedAt||0,r=i.filter(p=>p.timestamp>a);if(r.length>=o){Lo.add(e),console.log(`[Memory] Triggering auto-summarization for ${e}. ${r.length} new messages.`);try{await Sc(e,r)}finally{Lo.delete(e)}}}catch(s){Lo.delete(e),console.error("[Memory] Check summarization failed:",s)}},Sc=async(e,s)=>{try{const n=await bf("memorySummarization");if(!n||!n.apiKey){console.warn("[Memory] No API configured for summarization");return}const i=k.conversations.find(L=>L.id===e)?.localSettings?.ltmCoreMaxChars||500,a=(await gi(e))?.summary||"",r=L=>{const S=new Date(L),T=S.getFullYear(),E=String(S.getMonth()+1).padStart(2,"0"),O=String(S.getDate()).padStart(2,"0"),A=String(S.getHours()).padStart(2,"0"),R=String(S.getMinutes()).padStart(2,"0");return`${T}-${E}-${O} ${A}:${R}`},p=s.map(L=>{const S=L.isMe?"User":k.contacts.find(O=>O.id===L.senderId)?.name||"Assistant",T=L.timestamp?`[${r(L.timestamp)}]`:"";let E=L.text||"";return L.type==="transfer"?E=`[${L.amount}${L.recipientName||""}${L.note?": "+L.note:""}]`:L.type==="sticker"?E=`[: ${L.keyword||""}]`:L.type==="voice"?E=`[: ${L.text||""}]`:L.type==="image"?E="[]":L.type==="payment_notice"?E=L.action==="collect"?`[${L.amount}]`:`[${L.amount}]`:E||(E="[]"),`${T} ${S}: ${E}`}).join(`
`),b=new Date,v=`

15
****
 
1. 
2. 
3. 
4. 
5. 

 
- 
- TODO
- 
- 

{"who": "", "what": "", "when": "", "fact_type": "", "appointment_time": "null"}


- event: 
- preference: 
- relationship: 
- identity: 
- appointment: 

 YYYY-MM-DD HH:mm ${`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`}
 appointment  appointment_time
 
 //

2
${i}


${a?`${a}
`:""}
${p}

JSON
{"facts": [{"who": "", "what": "", "when": "YYYY-MM-DD HH:mm", "fact_type": "", "appointment_time": "YYYY-MM-DD HH:mmnull"}], "core_summary": ""}`,g=n.endpoint.replace(/\/+$/,"")+"/chat/completions",j=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.apiKey}`},body:JSON.stringify({model:n.model,messages:[{role:"system",content:""},{role:"user",content:v}],temperature:n.temperature,response_format:{type:"json_object"}})});if(!j.ok)throw new Error(`API Error: ${j.status}`);const N=(await j.json()).choices?.[0]?.message?.content;if(N)try{const L=JSON.parse(N);if(L.facts&&Array.isArray(L.facts)){for(const S of L.facts){const T=Array.isArray(S.who)?S.who:[S.who].filter(Boolean);await pf(e,{who:T,action:S.what,when:S.when||null,factType:S.fact_type||"other",appointmentTime:S.appointment_time?vf(S.appointment_time):null,appointmentMentioned:!1})}console.log(`[Memory] Saved ${L.facts.length} fact memories`)}L.core_summary&&(await $c(e,L.core_summary),console.log("[Memory] Updated core memory"))}catch(L){console.error("[Memory] Failed to parse AI response:",L)}}catch(n){console.error("[Memory] Auto-summarization failed:",n)}},dl=3,gf=15,hf=.2,yf=30,Ha=1.5,Ga=.75,ul=e=>e?e.toLowerCase().replace(/[""''\s]+/g," ").split(" ").filter(s=>s.length>0):[],wf=(e,s,n)=>{const o=ul(e),i=ul(s),l=i.length;if(o.length===0||l===0)return 0;const a={};i.forEach(p=>{a[p]=(a[p]||0)+1});let r=0;return o.forEach(p=>{const b=a[p]||0;if(b>0){const u=Math.log(2),v=b*(Ha+1)/(b+Ha*(1-Ga+Ga*l/n));r+=u*v}}),r},kf=e=>{const o=(Date.now()-e)/(1e3*60*60*24);return o<=dl?1:Math.exp(-.1*(o-dl))},_f=(e,s,n)=>{const o=k.conversations.find(l=>l.id===e);if(!o)return!1;if(o.type==="group"||o.isGroup){const l=o.members||[];return n.some(a=>l.includes(a))}else return n.includes(e)||s===e},qa=e=>{if(e.length<=1)return e;const s=new Map;return e.forEach(n=>{const i=(n.action||n.what||"").toLowerCase().trim().substring(0,50);(!s.has(i)||n.timestamp>(s.get(i).timestamp||0))&&s.set(i,n)}),Array.from(s.values())},Ya=async(e,s)=>{const n={recentFacts:[],rankedFacts:[],noteMemory:null,coreMemories:[],upcomingAppointments:[],overdueAppointments:[]};try{const o=k.conversations.find(L=>L.id===e);if(!o)return n;const i=o.localSettings?.mountedMemorySources||[],a=o.type==="group"||o.isGroup?o.members||[]:[o.id],r=[e,...i];let p=[],b=[];const u=Date.now(),v=u-dl*24*60*60*1e3,g=u-yf*24*60*60*1e3;for(const L of r){if(L!==e&&!_f(L,e,a))continue;const S=await gi(L);if(S?.summary){const E=k.conversations.find(A=>A.id===L),O=E?.title||E?.handle||(E?.type==="group"?"":k.contacts.find(A=>A.id===L)?.name||"");n.coreMemories.push({source:O,summary:S.summary})}const T=await Cc(L);T&&T.length>0&&T.forEach(E=>{const O={...E,sourceConversationId:L,sourceType:k.conversations.find(A=>A.id===L)?.type==="group"?"group":"dm"};E.timestamp>=v?n.recentFacts.push(O):(p.push(O),E.timestamp<g&&b.push(O))})}if(n.recentFacts=qa(n.recentFacts),p.length>0&&s){const L=p.reduce((T,E)=>T+ul(E.action||E.what||"").length,0)/p.length;p=p.map(T=>({...T,score:wf(s,T.action||T.what||"",L)*kf(T.timestamp||0)})),p.sort((T,E)=>E.score-T.score),p=qa(p);const S=gf-n.recentFacts.length;n.rankedFacts=p.slice(0,Math.max(0,S))}if(b.length>0&&Math.random()<hf){const L=Math.floor(Math.random()*b.length);n.noteMemory=b[L],console.log("[Memory] Note triggered: surfacing old memory")}const j=10800*1e3,N=[...n.recentFacts,...p].filter(L=>L.factType==="appointment"&&L.appointmentTime&&!L.appointmentMentioned);n.upcomingAppointments=N.filter(L=>L.appointmentTime>u&&L.appointmentTime<=u+j),n.overdueAppointments=N.filter(L=>L.appointmentTime<=u&&L.appointmentTime>u-j),(n.upcomingAppointments.length>0||n.overdueAppointments.length>0)&&console.log("[Appointment] Found active appointments:",{upcoming:n.upcomingAppointments.length,overdue:n.overdueAppointments.length})}catch(o){console.error("[Memory] Failed to load mounted memories:",o)}return n},Ja=async(e,s)=>{const n={id:crypto.randomUUID(),name:e,scope:s,timestamp:Date.now()};return k.regexCategories.push(n),await Je(Se.REGEX_CATEGORIES,n),n},zf=async(e,s)=>{const n=k.regexCategories.findIndex(o=>o.id===e);if(n!==-1){const o={...k.regexCategories[n],...s};k.regexCategories[n]=o,await Je(Se.REGEX_CATEGORIES,o)}},Xa=async e=>{const s=k.regexCategories.findIndex(n=>n.id===e);if(s!==-1){k.regexCategories.splice(s,1),await os(Se.REGEX_CATEGORIES,e);const n=k.regexEntries.filter(o=>o.categoryId===e);for(const o of n)await Ic(o.id)}},Qa=async e=>{const s={id:crypto.randomUUID(),...e,timestamp:Date.now()};return k.regexEntries.push(s),await Je(Se.REGEX_ENTRIES,s),s},Za=async(e,s)=>{const n=k.regexEntries.findIndex(o=>o.id===e);if(n!==-1){const o={...k.regexEntries[n],...s};k.regexEntries[n]=o,await Je(Se.REGEX_ENTRIES,o)}},Ic=async e=>{const s=k.regexEntries.findIndex(n=>n.id===e);s!==-1&&(k.regexEntries.splice(s,1),await os(Se.REGEX_ENTRIES,e))},Ki=e=>k.regexEntries.filter(s=>s.categoryId===e).sort((s,n)=>(s.order||0)-(n.order||0)),rt=(e,s)=>{const n=e.__vccOpts||e;for(const[o,i]of s)n[o]=i;return n},$f={class:"h-full flex flex-col bg-background-light text-black"},Cf={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-50"},Sf={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},If={class:"flex-1"},Mf={class:"flex-1 flex justify-end"},Ef={class:"flex-1 overflow-y-auto w-full pb-[calc(6rem+env(safe-area-inset-bottom))]"},Tf={class:"relative px-6 py-8 border-b border-gray-50"},jf={class:"ml-14 mt-6 flex items-center gap-6 text-black"},Af={__name:"Feed",emits:["close","navigate"],setup(e,{emit:s}){return(n,o)=>(c(),f("div",$f,[t("header",Cf,[t("div",Sf,[t("div",If,[t("button",{onClick:o[0]||(o[0]=i=>n.$emit("close")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...o[4]||(o[4]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),o[6]||(o[6]=t("div",{class:"flex justify-center"},[t("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir")],-1)),t("div",Mf,[t("button",{onClick:o[1]||(o[1]=i=>n.$emit("navigate","following")),class:"size-10 rounded-full bg-white border border-gray-100 flex items-center justify-center overflow-hidden hover:bg-gray-50 transition-colors -mr-2"},[...o[5]||(o[5]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-black"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)])])])])]),t("main",Ef,[t("article",Tf,[o[10]||(o[10]=wt('<div class="thread-line" data-v-72b05aaa></div><div class="flex items-start gap-4 mb-4 relative z-10" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-900 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="w-1/2 h-[1px] bg-white rotate-45" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><div class="flex items-center gap-1" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>studio_noir</span><span class="material-symbols-outlined text-[14px] active-icon" data-v-72b05aaa>verified</span></div><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>4m</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> Symmetry in stone. A study of concrete textures and morning shadows. Winter editorial. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div>',2)),t("div",{onClick:o[2]||(o[2]=i=>n.$emit("navigate","post",{id:"p1"})),class:"cursor-pointer ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-[4/5] editorial-image",style:{"background-image":"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E')","background-size":"cover","background-position":"center"}}),t("div",jf,[o[8]||(o[8]=t("button",{class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[t("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),t("span",{class:"text-[12px] font-medium"},"2.8k")],-1)),t("button",{onClick:o[3]||(o[3]=i=>n.$emit("navigate","post",{id:"p1"})),class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[...o[7]||(o[7]=[t("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),t("span",{class:"text-[12px] font-medium"},"56",-1)])]),o[9]||(o[9]=wt('<button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>112</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button>',2))])]),o[11]||(o[11]=wt('<article class="relative px-6 py-8 border-b border-gray-50" data-v-72b05aaa><div class="flex items-start gap-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-50 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-4 rounded-sm border border-black rotate-12" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>elena_di_rossi</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>2h</span></div><p class="text-[15px] leading-relaxed mt-1 font-serif italic text-zinc-900" data-v-72b05aaa> In design, if you are not taking a risk, you are not doing anything new. Perfection is the enemy. </p><div class="mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>892</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>4</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div></article><article class="relative px-6 py-8" data-v-72b05aaa><div class="flex items-start gap-4 mb-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-5 border-2 border-white/40 rounded-full" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>arc_digest</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>5h</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> High desert sanctuary. Minimalism meets nature. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div><div class="ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-video editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0&#39;);background-size:cover;background-position:center;" data-v-72b05aaa></div><div class="ml-14 mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>2.1k</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>14</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></article>',2))])]))}},Of=rt(Af,[["__scopeId","data-v-72b05aaa"]]),Pf={class:"fixed inset-x-0 bottom-0 h-[92%] z-[60] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},Rf={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},Nf={class:"text-[16px] font-bold tracking-tight"},Lf={class:"flex-1 overflow-y-auto"},Df={key:0,class:"pb-[100px]"},Vf={class:"px-4 py-2 mt-2"},Bf={class:"flex items-center gap-2 bg-neutral-100 px-3 py-2 rounded-xl"},Uf=["onClick"],Ff={class:"flex items-center gap-3"},Wf={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Kf={class:"flex flex-col"},Hf={class:"text-[14px] font-bold leading-tight"},Gf={class:"text-[13px] text-neutral-500 leading-tight"},qf={key:1,class:"pb-[100px] px-4 pt-2"},Yf={class:"flex flex-col gap-4"},Jf=["onClick"],Xf={class:"flex-1"},Qf={class:"text-[15px] font-bold tracking-tight"},Zf={class:"text-[12px] text-zinc-500"},e0={__name:"NewMessage",emits:["close","create-group","navigate"],setup(e,{emit:s}){const n=s,o=C(""),i=be(()=>{if(!o.value)return k.contacts;const u=o.value.toLowerCase();return k.contacts.filter(v=>v.handle.toLowerCase().includes(u)||v.name&&v.name.toLowerCase().includes(u))}),l=C("contacts"),a=C(null),r=u=>{a.value=u,l.value="persona"},p=u=>{bi(u),n("navigate","chat",{id:a.value}),n("close")},b=()=>{l.value==="persona"?l.value="contacts":n("close")};return(u,v)=>(c(),f("div",Pf,[t("header",Rf,[t("button",{onClick:b,class:"text-[16px] text-black hover:opacity-70 transition-opacity"},w(l.value==="persona"?"Back":"Cancel"),1),t("h2",Nf,w(l.value==="persona"?"Select Persona":"New message"),1),v[2]||(v[2]=t("div",{class:"w-[50px]"},null,-1))]),t("div",Lf,[l.value==="contacts"?(c(),f("div",Df,[t("div",Vf,[t("div",Bf,[v[3]||(v[3]=t("span",{class:"material-symbols-outlined text-neutral-400 text-[20px]"},"search",-1)),le(t("input",{"onUpdate:modelValue":v[0]||(v[0]=g=>o.value=g),type:"text",placeholder:"Search",class:"bg-transparent border-none text-[15px] placeholder:text-neutral-400 focus:ring-0 w-full p-0"},null,512),[[pe,o.value]])])]),t("div",{onClick:v[1]||(v[1]=g=>u.$emit("create-group")),class:"flex items-center gap-4 px-4 py-4 hover:bg-neutral-50 transition-colors cursor-pointer"},[...v[4]||(v[4]=[t("div",{class:"size-12 rounded-full border border-neutral-200 flex items-center justify-center bg-transparent shrink-0"},[t("span",{class:"material-symbols-outlined text-[24px] text-black"},"group_add")],-1),t("span",{class:"text-[15px] font-medium tracking-tight"},"Create a New Group",-1)])]),v[6]||(v[6]=t("div",{class:"px-4 py-2 mt-2"},[t("span",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase"},"Suggested")],-1)),(c(!0),f(oe,null,ye(i.value,g=>(c(),f("div",{key:g.id,onClick:j=>r(g.id),class:"flex items-center justify-between px-4 py-3 hover:bg-neutral-50 transition-colors cursor-pointer"},[t("div",Ff,[t("div",{class:"size-10 rounded-full bg-neutral-900 overflow-hidden shrink-0 border border-neutral-100",style:Ve({backgroundImage:g.avatar?`url(${g.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[g.avatar?M("",!0):(c(),f("div",Wf))],4),t("div",Kf,[t("span",Hf,w(g.handle),1),t("span",Gf,w(g.name||"No Name"),1)])]),v[5]||(v[5]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"chevron_right",-1))],8,Uf))),128))])):l.value==="persona"?(c(),f("div",qf,[t("div",Yf,[(c(!0),f(oe,null,ye(at(k).personas,g=>(c(),f("div",{key:g.id,onClick:j=>p(g.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[t("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Ve({backgroundImage:`url(${g.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("div",Xf,[t("h3",Qf,w(g.handle),1),t("p",Zf,w(g.name),1)])],8,Jf))),128))])])):M("",!0)])]))}},t0=rt(e0,[["__scopeId","data-v-a35529b4"]]),s0={class:"fixed inset-x-0 bottom-0 h-[92%] z-[70] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},n0={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},o0={class:"text-[16px] font-bold tracking-tight"},i0=["disabled"],l0={key:1,class:"w-[30px]"},a0={class:"flex-1 overflow-y-auto px-6 pt-8 pb-[calc(6rem+env(safe-area-inset-bottom))]"},r0={key:0},c0={class:"flex flex-col items-center gap-6 mb-10"},d0={key:1,class:"material-symbols-outlined text-[24px]"},u0={class:"w-full"},p0={class:"mt-8"},f0={key:0,class:"text-center py-4 text-neutral-400 text-sm"},v0={class:"flex flex-col gap-1"},x0=["onClick"],b0={class:"flex items-center gap-3"},m0={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},g0={class:"text-[14px] font-bold"},h0={key:0,class:"material-symbols-outlined text-white text-[16px]"},y0={key:1,class:"mt-6 pt-6 border-t border-gray-100"},w0={class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},k0={class:"flex flex-wrap gap-4"},_0=["onClick"],z0={class:"text-[10px] text-neutral-600 text-center truncate w-full leading-tight"},$0={key:1},C0={class:"flex flex-col gap-4"},S0=["onClick"],I0={class:"flex-1"},M0={class:"text-[15px] font-bold tracking-tight"},E0={class:"text-[12px] text-zinc-500"},T0={__name:"CreateGroup",emits:["back","create"],setup(e,{emit:s}){const n=s,o=C(""),i=C(new Set),l=be(()=>k.contacts),a=be(()=>k.contacts.filter(N=>i.value.has(N.id))),r=N=>{i.value.has(N)?i.value.delete(N):i.value.add(N)},p=N=>{i.value.delete(N)},b=C("details"),u=C(""),v=()=>{const N=prompt("Enter image URL for group photo:");N&&(u.value=N)},g=()=>{b.value==="details"&&o.value&&(b.value="persona")},j=N=>{bi(N),n("create",{name:o.value,avatar:u.value,members:Array.from(i.value)})},B=()=>{b.value==="persona"?b.value="details":n("back")};return(N,L)=>(c(),f("div",s0,[t("header",n0,[t("button",{onClick:B,class:"text-[16px] text-black hover:opacity-70 transition-opacity flex items-center -ml-1"},[L[1]||(L[1]=t("span",{class:"material-symbols-outlined text-[24px]"},"chevron_left",-1)),ns(" "+w((b.value==="persona","Back")),1)]),t("h2",o0,w(b.value==="persona"?"Select Persona":"Create group"),1),b.value==="details"?(c(),f("button",{key:0,onClick:g,class:"text-[16px] font-bold text-black hover:opacity-70 transition-opacity disabled:opacity-30",disabled:!o.value||a.value.length<2}," Next ",8,i0)):(c(),f("div",l0))]),t("main",a0,[b.value==="details"?(c(),f("div",r0,[t("div",c0,[t("button",{onClick:v,class:"size-24 rounded-full border border-dashed border-neutral-300 flex items-center justify-center flex-col gap-1 text-neutral-400 hover:bg-neutral-50 transition-colors overflow-hidden relative"},[u.value?(c(),f("div",{key:0,class:"absolute inset-0 bg-cover bg-center",style:Ve({backgroundImage:`url(${u.value})`})},null,4)):(c(),f("span",d0,"add_a_photo"))]),L[2]||(L[2]=t("span",{class:"text-[10px] font-bold uppercase tracking-widest text-neutral-400"},"Add Group Photo",-1)),t("div",u0,[le(t("input",{"onUpdate:modelValue":L[0]||(L[0]=S=>o.value=S),type:"text",placeholder:"Group name",class:"w-full bg-transparent border-0 border-b border-neutral-200 px-0 py-3 text-lg placeholder:text-neutral-300 focus:ring-0 focus:border-black transition-colors"},null,512),[[pe,o.value]])])]),t("div",p0,[L[4]||(L[4]=t("h3",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},"Select Members (Min 2)",-1)),l.value.length===0?(c(),f("div",f0," No contacts found in Following. ")):M("",!0),t("div",v0,[(c(!0),f(oe,null,ye(l.value,S=>(c(),f("div",{key:S.id,onClick:T=>r(S.id),class:"flex items-center justify-between py-3 px-2 -mx-2 hover:bg-neutral-50 rounded-xl cursor-pointer transition-colors"},[t("div",b0,[t("div",{class:"size-10 rounded-full bg-neutral-900 border border-neutral-100 overflow-hidden",style:Ve({backgroundImage:S.avatar?`url(${S.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[S.avatar?M("",!0):(c(),f("div",m0))],4),t("span",g0,w(S.handle),1)]),t("div",{class:W(["size-6 rounded-full border flex items-center justify-center transition-all",i.value.has(S.id)?"bg-black border-black":"border-neutral-300 bg-white"])},[i.value.has(S.id)?(c(),f("span",h0,"check")):M("",!0)],2)],8,x0))),128))]),a.value.length>0?(c(),f("div",y0,[t("h3",w0,"Selected ("+w(a.value.length)+")",1),t("div",k0,[(c(!0),f(oe,null,ye(a.value,S=>(c(),f("div",{key:S.id,class:"flex flex-col items-center gap-2 group relative w-[60px]"},[t("div",{class:"size-12 rounded-full bg-neutral-900 border border-white/20 shadow-sm relative overflow-hidden",style:Ve({backgroundImage:S.avatar?`url(${S.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[t("button",{onClick:je(T=>p(S.id),["stop"]),class:"absolute top-0 right-0 size-4 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-100 hover:bg-neutral-100"},[...L[3]||(L[3]=[t("span",{class:"material-symbols-outlined text-[10px] text-black"},"close",-1)])],8,_0)],4),t("span",z0,w(S.handle),1)]))),128))])])):M("",!0)])])):b.value==="persona"?(c(),f("div",$0,[t("div",C0,[(c(!0),f(oe,null,ye(at(k).personas,S=>(c(),f("div",{key:S.id,onClick:T=>j(S.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[t("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Ve({backgroundImage:`url(${S.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("div",I0,[t("h3",M0,w(S.handle),1),t("p",E0,w(S.name),1)])],8,S0))),128))])])):M("",!0)])]))}},j0={class:"h-full flex flex-col bg-background-light text-black relative"},A0={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100/50"},O0={class:"px-6 pb-4 pt-[calc(10px_+_env(safe-area-inset-top))] w-full"},P0={class:"flex items-center justify-between mb-6"},R0={class:"flex items-center gap-2"},N0={class:"flex-1 overflow-y-auto w-full pb-24"},L0=["onClick"],D0={key:0,class:"size-14 shrink-0 rounded-full avatar-abstract flex items-center justify-center"},V0={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},B0={class:"flex-1 min-w-0"},U0={class:"flex items-center justify-between mb-0.5"},F0={class:"font-bold text-[15px] tracking-tight"},W0={class:"flex items-center gap-2"},K0={key:0,class:"size-2 bg-black rounded-full"},H0={__name:"Inbox",emits:["navigate","close"],setup(e,{emit:s}){const n=s,o=C(!1),i=C(!1),l=u=>{n("navigate","chat",{id:u})},a=()=>{i.value=!0},r=u=>{i.value=!1,o.value=!1;const v={id:"group_"+Date.now(),type:"group",name:u.name,handle:u.name.toLowerCase().replace(/\s+/g,"_"),avatar:u.avatar||"",members:u.members||[],lastMessage:"Group created",time:"Just now",unread:!1};Fa(v),n("navigate","chat",{id:v.id})},p=(u,v)=>{if(u==="chat"&&v.id){const g=k.contacts.find(B=>B.id===v.id);!k.conversations.find(B=>B.id===v.id)&&g&&Fa({id:g.id,type:"direct",name:g.name,handle:g.handle,avatar:g.avatar,lastMessage:"Draft",time:"Now",unread:!1})}o.value=!1,n("navigate",u,v),o.value=!1,n("navigate",u,v)},b=u=>{const v=u.localSettings||{};if(u.type==="group"||u.isAbstract)return{avatar:v.groupAvatarOverride||u.avatar,handle:v.groupNameOverride||u.title||u.handle||"Group",isAbstract:u.isAbstract};const g=k.contacts.find(j=>j.id===u.id);return g?{avatar:v.theirAvatarOverride||g.avatar,handle:v.theirNicknameOverride||g.handle,isAbstract:!1}:{avatar:v.theirAvatarOverride||u.avatar,handle:v.theirNicknameOverride||u.handle,isAbstract:!1}};return Gt(()=>{}),(u,v)=>(c(),f("div",j0,[t("header",A0,[t("div",O0,[t("div",P0,[t("div",R0,[t("button",{onClick:v[0]||(v[0]=g=>u.$emit("close")),class:"flex items-center justify-center size-8 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...v[4]||(v[4]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),v[5]||(v[5]=t("h1",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Messages",-1))]),t("button",{onClick:v[1]||(v[1]=g=>o.value=!0),class:"hover:opacity-50 transition-opacity"},[...v[6]||(v[6]=[t("span",{class:"material-symbols-outlined text-[24px]"},"edit_square",-1)])])]),v[7]||(v[7]=t("div",{class:"relative"},[t("input",{class:"w-full bg-neutral-100 border-none rounded-full py-2 px-5 text-sm placeholder:text-neutral-400 focus:ring-1 focus:ring-black transition-all",placeholder:"Search",type:"text"})],-1))])]),t("main",N0,[(c(!0),f(oe,null,ye(at(k).conversations,g=>(c(),f("div",{key:g.id,onClick:j=>l(g.id),class:"flex items-center gap-4 px-6 py-5 hover:bg-neutral-50 transition-colors cursor-pointer group border-b border-gray-50"},[g.isAbstract?(c(),f("div",D0,[...v[8]||(v[8]=[t("div",{class:"absolute inset-0 bg-zinc-900"},null,-1),t("div",{class:"relative size-6 border-[0.5px] border-white/30 rotate-45"},null,-1)])])):(c(),f("div",{key:1,class:"size-14 shrink-0 rounded-full bg-neutral-900 flex items-center justify-center overflow-hidden border border-neutral-100",style:Ve({backgroundImage:b(g).avatar?`url(${b(g).avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[b(g).avatar?M("",!0):(c(),f("div",V0))],4)),t("div",B0,[t("div",U0,[t("span",F0,w(b(g).handle),1),t("div",W0,[t("span",{class:W(["text-[11px] font-medium",g.unread?"text-black":"text-neutral-400"])},w(g.time),3),g.unread?(c(),f("div",K0)):M("",!0)])]),t("p",{class:W(["text-[14px] font-semibold truncate leading-snug",g.unread?"text-black":"text-neutral-500"])},w(g.lastMessage),3)])],8,L0))),128))]),Ze(nn,{name:"slide-up"},{default:Cs(()=>[o.value?(c(),Ee(t0,{key:0,onClose:v[2]||(v[2]=g=>o.value=!1),onCreateGroup:a,onNavigate:p})):M("",!0)]),_:1}),Ze(nn,{name:"slide-right"},{default:Cs(()=>[i.value?(c(),Ee(T0,{key:0,onBack:v[3]||(v[3]=g=>i.value=!1),onCreate:r})):M("",!0)]),_:1})]))}},G0=rt(H0,[["__scopeId","data-v-8dd3129f"]]),Ht=Ks({id:"current",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.7,stream:!1,modelsList:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"]}),ts=Ks({list:[],currentPresetId:"custom"}),q0=async()=>{const e=await hc();e?(Object.assign(Ht,e),Ht.stream===void 0&&(Ht.stream=!1)):await Tl(Ne(Ht));const s=await bo();if(ts.list=s,ts.currentPresetId=Ht.activePresetId||"custom",s.length===0){const n=[{id:"editorial",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.3,stream:!1},{id:"creative",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.9,stream:!1},{id:"drafting",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,stream:!1}];for(const o of n)await jl(o);ts.list=await bo()}},Ol=async e=>{Object.assign(Ht,e),e.currentPresetId&&(ts.currentPresetId=e.currentPresetId);const s={...Ne(Ht),activePresetId:ts.currentPresetId};await Tl(s)},Y0=()=>{if(!Ht.apiKey)return"";const e=Ht.apiKey.split(",").map(n=>n.trim()).filter(n=>n);if(e.length===0)return"";const s=Math.floor(Math.random()*e.length);return e[s]},J0=async e=>{try{const s=e?.apiKey!==void 0?e.apiKey:Ht.apiKey,n=e?.endpoint!==void 0?e.endpoint:Ht.endpoint;let o="";if(s){const p=s.split(",").map(b=>b.trim()).filter(b=>b);p.length>0&&(o=p[Math.floor(Math.random()*p.length)])}if(!o)throw new Error("No API Key provided");let l=`${n.replace(/\/+$/,"")}/models`;const a=await fetch(l,{headers:{Authorization:`Bearer ${o}`}});if(!a.ok)throw new Error(`Fetch failed: ${a.statusText}`);const r=await a.json();return r.data&&Array.isArray(r.data)&&(Ht.modelsList=r.data.map(p=>p.id)),!0}catch(s){return console.error("Failed to fetch models",s),!1}},X0=e=>ts.list.find(s=>s.id===e),Q0=async(e,s)=>{const n={id:Date.now().toString(),name:e,provider:s.provider,endpoint:s.endpoint,apiKey:s.apiKey,model:s.model,temperature:s.temperature,stream:s.stream};await jl(n),ts.list=await bo(),ts.currentPresetId=n.id,Ht.activePresetId=n.id,await Ol({...s,activePresetId:n.id})},Z0=async()=>{if(ts.currentPresetId&&ts.currentPresetId!=="custom"){const e=ts.currentPresetId;await il(()=>Promise.resolve().then(()=>ll),void 0,import.meta.url).then(s=>s.deleteItem("presets",e)),ts.list=await bo(),ts.currentPresetId="custom",Ht.activePresetId="custom",await Ol({activePresetId:"custom"})}},Mc=()=>({...qd(Ht),presetState:ts,init:q0,getActiveKey:Y0,fetchModels:J0,getPresetById:X0,commitSettings:Ol,saveCurrentAsPreset:Q0,deleteCurrentPreset:Z0}),er="worldbook_db",st=Ks({categories:[],entries:[]}),ev=async()=>{try{await Is();const e=localStorage.getItem(er);if(e){console.log("Migrating WorldBook data from localStorage to IndexedDB...");try{const o=JSON.parse(e),i=o.categories||[],l=o.entries||[];for(const a of i)await Je(Se.WORLDBOOK_CATEGORIES,a);for(const a of l)a.scope||(a.scope="global"),await Je(Se.WORLDBOOK_ENTRIES,a);localStorage.removeItem(er),console.log("Migration complete.")}catch(o){console.error("Migration failed:",o)}}const s=await ss(Se.WORLDBOOK_CATEGORIES),n=await ss(Se.WORLDBOOK_ENTRIES);s.length===0&&n.length===0?await tv():(st.categories.splice(0,st.categories.length,...s),st.entries.splice(0,st.entries.length,...n))}catch(e){console.error("Failed to load WorldBook store:",e)}},tv=async()=>{const e=[{id:"cat_myth",name:""},{id:"cat_history",name:""},{id:"cat_chars",name:""},{id:"cat_locs",name:""}];st.categories.splice(0,st.categories.length,...e),st.entries.splice(0,st.entries.length);for(const s of e)await Je(Se.WORLDBOOK_CATEGORIES,s)},yo=()=>(st.categories.length===0&&ev(),{state:st,getCategories:()=>st.categories,getEntriesByCategory:(u,v="global")=>st.entries.filter(g=>g.categoryId===u&&g.scope===v),getEntry:u=>st.entries.find(v=>v.id===u),addCategory:async u=>{const v=`cat_${Date.now()}`,g={id:v,name:u};return st.categories.push(g),await Je(Se.WORLDBOOK_CATEGORIES,g),v},updateCategory:async(u,v)=>{const g=st.categories.find(j=>j.id===u);if(g){g.name=v;const j=Ne(g);await Je(Se.WORLDBOOK_CATEGORIES,{...j})}},deleteCategory:async u=>{const v=st.entries.filter(j=>j.categoryId===u);st.entries=st.entries.filter(j=>j.categoryId!==u);const g=st.categories.findIndex(j=>j.id===u);g!==-1&&st.categories.splice(g,1),await os(Se.WORLDBOOK_CATEGORIES,u);for(const j of v)await os(Se.WORLDBOOK_ENTRIES,j.id)},addEntry:async u=>{const v={...u,id:`entry_${Date.now()}`,createdAt:Date.now(),updatedAt:Date.now()};return st.entries.push(v),await Je(Se.WORLDBOOK_ENTRIES,v),v.id},updateEntry:async(u,v)=>{const g=st.entries.findIndex(j=>j.id===u);if(g!==-1){const j={...st.entries[g],...v,updatedAt:Date.now()};st.entries[g]=j;const B=Ne(j);await Je(Se.WORLDBOOK_ENTRIES,B)}},deleteEntry:async u=>{const v=st.entries.findIndex(g=>g.id===u);v!==-1&&(st.entries.splice(v,1),await os(Se.WORLDBOOK_ENTRIES,u))},searchEntries:u=>{const v=u.toLowerCase();return st.entries.filter(g=>g.title.toLowerCase().includes(v)||g.content.toLowerCase().includes(v)||g.keywords?.some(j=>j.toLowerCase().includes(v)))}}),sv={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},nv=e=>sv[e]||"Unknown",ov=async e=>{if(!e||e.length<2)return[];try{const s=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=5&language=en&format=json`,o=await(await fetch(s)).json();return!o.results||!Array.isArray(o.results)?[]:o.results.map(i=>({id:i.id,name:i.name,latitude:i.latitude,longitude:i.longitude,country:i.country,admin1:i.admin1}))}catch(s){return console.error("City Search Failed",s),[]}},iv=async(e,s)=>{try{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${s}&current=temperature_2m,weather_code,is_day&timezone=auto`,i=await(await fetch(n)).json();return i.current?{temperature:i.current.temperature_2m,conditionCode:i.current.weather_code,isDay:i.current.is_day,time:i.current.time}:null}catch(n){return console.error("Weather Fetch Failed",n),null}},Hi=new Map,lv=async(e,s)=>{const n=`${e.toFixed(2)},${s.toFixed(2)}`,o=Date.now();if(Hi.has(n)){const l=Hi.get(n);if(o-l.ts<36e5)return console.log("[Environment] Using Cached Weather for",n),l.data}const i=await iv(e,s);return i&&(console.log("[Environment] Fetched New Weather for",n),Hi.set(n,{data:i,ts:o})),i},av=["innerHTML"],rv={__name:"HtmlCard",props:["content","isMe"],setup(e){const s=C(null),n=C(1),o=()=>{if(!s.value)return;n.value=1,s.value.scrollWidth>210?n.value=.7:n.value=1};return Gt(()=>{o(),setTimeout(o,100),setTimeout(o,500)}),(i,l)=>(c(),f("div",{class:W(["html-card-wrapper relative",e.isMe?"origin-top-right":"origin-top-left"]),style:Ve({transform:`scale(${n.value})`})},[t("div",{ref_key:"containerRef",ref:s,class:"html-content inline-block text-left",innerHTML:e.content},null,8,av)],6))}},cv=rt(rv,[["__scopeId","data-v-0bfcbd29"]]),dv={class:"bg-white w-full max-w-lg rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all h-[60vh]"},uv={class:"text-center shrink-0"},pv={class:"font-serif text-xl font-bold tracking-tight text-black"},fv={key:0,class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},vv=["placeholder"],xv={__name:"EditModal",props:{isOpen:Boolean,modelValue:String,title:String,subtitle:String,placeholder:String},emits:["update:isOpen","update:modelValue","save","cancel"],setup(e,{emit:s}){const n=e,o=s,i=C("");ds(()=>n.isOpen,r=>{r&&(i.value=n.modelValue||"")});const l=()=>{o("update:isOpen",!1),o("cancel")},a=()=>{o("update:modelValue",i.value),o("save",i.value),o("update:isOpen",!1)};return(r,p)=>(c(),Ee(ft,{to:"body"},[e.isOpen?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(l,["self"])},[t("div",dv,[t("div",uv,[t("h3",pv,w(e.title||"Edit"),1),e.subtitle?(c(),f("p",fv,w(e.subtitle),1)):M("",!0)]),le(t("textarea",{"onUpdate:modelValue":p[0]||(p[0]=b=>i.value=b),class:"w-full flex-1 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none font-mono leading-relaxed",placeholder:e.placeholder||"Enter text...",autofocus:""},null,8,vv),[[pe,i.value]]),t("div",{class:"flex items-center gap-3 w-full shrink-0"},[t("button",{onClick:l,class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),t("button",{onClick:a,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Save ")])])])):M("",!0)]))}},bv={class:"h-[100dvh] flex flex-col bg-background-light text-black"},mv={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},gv={class:"flex items-center px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},hv={class:"flex items-center gap-3 ml-1 cursor-pointer"},yv={key:0,class:"absolute inset-0 bg-zinc-900"},wv={key:1,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},kv={class:"flex flex-col"},_v={class:"font-serif text-[17px] font-semibold tracking-tight"},zv={class:"flex-1 flex justify-end"},$v={class:"flex justify-center my-4"},Cv={class:"text-[10px] text-zinc-400 uppercase tracking-[0.2em] font-semibold"},Sv={key:0,class:"flex flex-col gap-4"},Iv=["id"],Mv={key:0,class:"w-full flex items-center my-1 animate-in fade-in zoom-in-95 duration-300"},Ev=["onClick"],Tv={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},jv={class:"flex-1 flex justify-center"},Av=["onClick","onContextmenu"],Ov={class:"text-[11px] text-zinc-400 px-3 py-1 rounded-full transition-colors"},Pv={class:"text-[9px] opacity-50 ml-1"},Rv={key:0,class:"mt-1 max-w-[280px] p-3 rounded-[16px] bg-zinc-50 border border-zinc-100 text-zinc-500 text-[13px] relative animate-in fade-in zoom-in-95 duration-200"},Nv=["src"],Lv=["src"],Dv={key:2,class:"italic opacity-70"},Vv=["innerHTML"],Bv={key:1,class:"w-full flex items-start transition-all duration-300"},Uv=["onClick"],Fv={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Wv=["onContextmenu"],Kv={key:0,class:"text-[10px] text-zinc-500 font-bold mb-1 ml-1"},Hv=["onClick"],Gv={class:"flex flex-col"},qv=["onClick"],Yv={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},Jv={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},Xv=["src"],Qv=["onClick"],Zv={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center animate-in fade-in duration-300"},ex={key:1,class:"absolute inset-0 z-20 p-6 flex items-center justify-center animate-in fade-in zoom-in-95 duration-500"},tx=["innerHTML"],sx=["onClick"],nx={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},ox={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},ix=["onClick"],lx=["src"],ax=["onClick"],rx={class:"h-32 bg-[#F4F4F5] relative overflow-hidden group"},cx={class:"p-3 bg-white relative z-10 flex flex-col gap-0.5 border-t border-zinc-100"},dx={class:"flex items-start justify-between gap-2"},ux={class:"text-[14px] font-bold text-black leading-snug line-clamp-1"},px={class:"text-[11px] text-zinc-500 line-clamp-1"},fx={class:"flex items-center gap-2 mt-2 pt-2 border-t border-zinc-50"},vx={class:"text-[9px] font-mono text-zinc-300 ml-auto tracking-tight"},xx=["onClick"],bx={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},mx={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},gx=["onClick"],hx={class:"flex items-center gap-3 px-3 py-2"},yx={class:"flex items-center gap-0.5 h-4"},wx={class:"text-[11px] font-medium opacity-60 ml-1"},kx=["innerHTML"],_x=["onClick"],zx={class:"flex items-center justify-between mb-4 relative z-0"},$x={class:"flex items-center gap-2"},Cx={class:"material-symbols-outlined text-[16px]"},Sx={class:"text-[10px] font-bold opacity-40"},Ix={class:"mb-1 relative z-0"},Mx={class:"text-2xl font-serif font-bold tracking-tight"},Ex={class:"text-[11px] opacity-50 relative z-0 flex justify-between items-center"},Tx={key:0,class:"flex items-center gap-1 text-[9px] uppercase tracking-wider font-bold opacity-60"},jx=["onClick"],Ax={class:"flex items-center justify-between mb-4 relative z-0"},Ox={class:"flex items-center gap-2"},Px={class:"material-symbols-outlined text-[16px]"},Rx={class:"text-[10px] font-bold opacity-40"},Nx={class:"mb-1 relative z-0"},Lx={class:"text-2xl font-serif font-bold tracking-tight"},Dx={class:"text-[11px] opacity-50 relative z-0"},Vx=["onClick"],Bx={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-10"},Ux={class:"flex items-center justify-between mb-4 relative z-0"},Fx={class:"flex items-center gap-2"},Wx={class:"text-[10px] font-bold opacity-40"},Kx={class:"mb-1 relative z-0"},Hx={class:"flex flex-col relative z-0 gap-0.5"},Gx={class:"text-[11px] opacity-60 font-medium lowercase"},qx={key:0,class:"text-[11px] opacity-50 italic truncate max-w-[180px]"},Yx={key:0,class:"relative",style:{zoom:"0.7"}},Jx={class:"entry-preview w-full max-w-full overflow-hidden"},Xx=["innerHTML"],Qx=["onClick"],Zx=["innerHTML"],eb={class:"text-[9px] text-zinc-400 mt-1 mx-1 tracking-wider uppercase"},tb={key:1,class:"flex flex-col items-start gap-1"},sb={class:"flex items-end gap-2 px-1"},nb={key:2,class:"flex flex-col items-center justify-center h-full text-neutral-400"},ob={key:1,class:"absolute inset-x-0 bottom-0 top-auto h-auto bg-white rounded-t-[32px] shadow-[0_-8px_40px_rgba(0,0,0,0.1)] z-[60] flex flex-col animate-in slide-in-from-bottom-10 duration-300 overflow-hidden text-black border-t border-zinc-100/50"},ib={class:"h-10 flex items-center justify-between px-6 shrink-0 bg-white"},lb={class:"flex items-center gap-3"},ab={class:"h-[255px] overflow-y-auto custom-scrollbar px-6 py-2 bg-white"},rb={key:0,class:"grid grid-cols-4 gap-4"},cb=["onClick"],db={class:"aspect-square w-full bg-white border border-zinc-50 rounded-[22px] overflow-hidden group-hover:border-zinc-200 group-hover:shadow-[0_4px_12px_rgba(0,0,0,0.03)] transition-all relative"},ub=["src"],pb={class:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.15em] truncate w-full text-center group-hover:text-black transition-colors font-sans"},fb={key:1,class:"flex flex-col items-center justify-center h-full text-zinc-300 gap-3"},vb={class:"flex flex-col items-center gap-1"},xb={class:"flex items-center justify-between px-5 bg-white border-t border-zinc-50 gap-4 shrink-0 pt-2 pb-safe"},bb={class:"flex-1 overflow-x-auto custom-scrollbar flex items-center gap-4 px-2 hide-scrollbar"},mb=["onClick"],gb={class:"w-6 h-6 flex items-center justify-center"},hb={key:0,class:"absolute -bottom-2 w-1 h-1 bg-black rounded-full"},yb={key:1,class:"material-symbols-outlined text-[20px]"},wb={key:2,class:"text-[10px] font-black uppercase font-serif"},kb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},_b={class:"flex flex-col gap-2 max-h-[50vh] overflow-y-auto custom-scrollbar px-1"},zb={key:0,class:"text-center py-10 text-zinc-300 flex flex-col items-center gap-3"},$b=["onClick"],Cb={class:"flex items-center gap-4"},Sb={class:"w-10 h-10 rounded-xl bg-white border border-zinc-100 flex items-center justify-center text-xs font-serif font-bold text-zinc-700 shadow-sm"},Ib={class:"font-semibold text-zinc-900 text-[15px]"},Mb={class:"material-symbols-outlined text-[14px] font-bold"},Eb={class:"grid grid-cols-1 mt-4"},Tb={class:"bg-white w-full sm:max-w-sm rounded-t-[32px] sm:rounded-[32px] shadow-2xl flex flex-col h-[80vh] sm:h-[600px] animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300 transform transition-all"},jb={class:"p-6 pb-2 shrink-0"},Ab={class:"flex items-center justify-between mb-6"},Ob={class:"relative group flex items-center gap-2"},Pb={class:"relative flex-1"},Rb={class:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-6 flex flex-col gap-2"},Nb=["onClick"],Lb={class:"min-w-0"},Db={class:"text-sm font-bold text-zinc-900 truncate"},Vb={class:"text-xs text-zinc-500 truncate"},Bb={key:2,class:"absolute left-4 right-4 bottom-[80px] bg-white/90 backdrop-blur-2xl rounded-[32px] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.12)] border border-zinc-100 p-6 z-[80] animate-in slide-in-from-bottom-6 fade-in duration-300 ring-1 ring-black/5"},Ub={class:"grid grid-cols-4 gap-x-2 gap-y-6"},Fb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Wb={class:"flex items-center gap-3 w-full"},Kb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Hb={class:"flex items-center gap-3 w-full"},Gb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},qb={key:0,class:"font-serif italic text-2xl mb-1 text-center"},Yb={key:1,class:"font-serif italic text-2xl mb-1 text-center"},Jb={key:2},Xb={key:0,class:"mb-6"},Qb={class:"relative"},Zb=["value"],e1={key:1,class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},t1={class:"flex flex-col gap-4"},s1={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},n1={class:"grid grid-cols-2 gap-3"},o1={key:3,class:"animate-in slide-in-from-right-8 duration-300"},i1={class:"flex justify-center mb-8"},l1={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},a1={class:"grid grid-cols-2 gap-3"},r1={class:"bg-white w-full max-w-xs rounded-[32px] shadow-2xl p-0 animate-in zoom-in-95 duration-300 overflow-hidden relative"},c1={class:"p-8 text-center -mt-10"},d1={class:"font-serif text-3xl font-bold mb-1"},u1={class:"text-xs text-zinc-400 uppercase tracking-widest mb-6"},p1={class:"space-y-3 text-sm border-t border-zinc-100 pt-6"},f1={class:"flex justify-between"},v1={class:"font-medium"},x1={class:"flex justify-between"},b1={class:"text-zinc-400"},m1={class:"font-medium"},g1={key:0,class:"flex justify-between"},h1={class:"font-medium text-zinc-800"},y1={key:0,class:"mt-8 grid grid-cols-2 gap-3"},w1=["src"],k1={key:1,class:"fixed inset-x-0 bottom-0 z-[10000] animate-in slide-in-from-bottom-full duration-300"},_1={class:"bg-white/95 backdrop-blur-xl rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.1)] overflow-hidden"},z1={class:"flex flex-col"},$1={class:"border-t border-zinc-100 py-3 pb-safe"},C1={key:4,class:"fixed bottom-10 left-0 right-0 z-[100] flex justify-center pointer-events-none animate-in slide-in-from-bottom-20 duration-300"},S1={class:"bg-black text-white h-[64px] rounded-full shadow-[0_8px_40px_rgba(0,0,0,0.3)] flex items-center px-8 gap-8 pointer-events-auto min-w-[280px] justify-between ring-1 ring-white/10 mx-6"},I1={class:"font-bold text-xs tracking-[0.2em] font-sans whitespace-nowrap"},M1={class:"flex items-center gap-6"},E1=["disabled"],T1={class:"bg-white w-[90%] max-w-sm rounded-3xl p-5 animate-in zoom-in-95 duration-200 max-h-[60vh] overflow-hidden shadow-2xl"},j1={class:"flex items-center justify-between mb-4"},A1={class:"space-y-2 overflow-y-auto max-h-[40vh] pb-safe"},O1=["onClick"],P1={class:"font-medium text-[15px]"},R1={class:"flex items-center gap-2 z-[110] mb-6"},N1=["title"],L1={class:"material-symbols-outlined text-zinc-600 text-[20px]"},D1={key:0,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 shadow-2xl mx-auto"},V1={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},B1={class:"flex-1"},U1={class:"font-bold text-lg"},F1={key:0,class:"relative inner-voice-card max-h-[80vh] overflow-y-auto scrollbar-hide"},W1=["onClick"],K1=["fill"],H1=["innerHTML"],G1={key:1,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 shadow-2xl mx-auto"},q1={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},Y1={class:"flex-1"},J1={class:"font-bold text-lg"},X1=["onClick"],Q1=["fill"],Z1={class:"text-[14px] text-zinc-700 leading-relaxed"},em={class:"text-[10px] text-zinc-400 mt-3 font-mono"},tm={key:1,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 max-h-[70vh] overflow-hidden flex flex-col shadow-2xl"},sm={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},nm={class:"flex-1"},om={class:"font-bold text-lg"},im={class:"flex-1 overflow-y-auto space-y-3 scrollbar-hide"},lm={key:0,class:"text-center py-12 text-zinc-400"},am=["onClick"],rm={class:"text-[10px] text-zinc-400 mb-2 font-mono"},cm=["innerHTML"],dm={key:7,class:"sticky bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md pb-safe border-t border-gray-100 z-50"},um={key:0,class:"px-4 py-2 bg-zinc-50 border-b border-zinc-100 flex items-center justify-between"},pm={class:"flex items-center gap-3 overflow-hidden"},fm={class:"flex flex-col"},vm={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-500"},xm={class:"text-xs text-zinc-600 line-clamp-1 truncate"},bm={class:"px-4 py-3 flex items-center gap-2"},mm={class:"flex-1 relative"},gm={class:"bg-white w-full max-w-sm max-h-[70vh] rounded-[32px] shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300"},hm={class:"bg-zinc-50 border-b border-zinc-100 p-5 flex items-center justify-between shrink-0"},ym={class:"text-xs text-zinc-400 mt-0.5 font-mono"},wm={class:"flex-1 overflow-y-auto p-5 space-y-4 bg-white custom-scrollbar"},km={key:0,class:"text-center my-2 px-4"},_m={class:"text-[11px] text-zinc-400 italic bg-zinc-50 px-3 py-1.5 rounded-full border border-zinc-100 inline-block leading-relaxed"},zm={key:0,class:"text-[10px] text-zinc-500 mb-1 ml-2 font-bold select-none"},$m={key:0,class:"text-[13px] leading-relaxed"},Cm={key:0,class:"text-zinc-400 italic block mb-1"},Sm={key:1,class:"p-3 bg-zinc-50 rounded-xl text-zinc-800 border border-zinc-100"},Im={key:2,class:"text-zinc-500"},Mm={key:1,class:"relative z-10 flex-1 flex flex-col items-center justify-center p-6 text-center bg-white"},Em={class:"w-36 h-36 rounded-full ring-4 ring-zinc-100 mb-8 relative overflow-hidden shadow-xl"},Tm=["src"],jm={class:"text-zinc-900 text-2xl font-bold mb-2"},Am={key:2,class:"relative z-10 flex-1 flex flex-col items-center justify-center p-6 text-center bg-white"},Om={class:"w-40 h-40 rounded-full ring-4 ring-zinc-200 mb-8 relative overflow-hidden shadow-2xl animate-bounce-slow"},Pm=["src"],Rm={class:"text-zinc-900 text-3xl font-bold mb-2"},Nm={key:3,class:"relative z-10 flex flex-col h-full"},Lm={class:"pt-safe pt-6 px-4 py-2 flex items-center justify-between z-10 shrink-0 relative"},Dm={class:"absolute inset-x-0 top-6 pt-safe flex justify-center pointer-events-none"},Vm={class:"px-3 py-1.5 rounded-full bg-black/30 backdrop-blur-md border border-white/10 flex items-center gap-2 pointer-events-auto"},Bm={class:"text-xs text-white/90 font-mono"},Um={class:"flex items-center justify-center gap-1.5 overflow-x-auto py-2 shrink-0 z-10"},Fm={class:"relative w-10 h-10 bg-zinc-800 rounded-lg overflow-hidden ring-1 ring-white/20 shadow-md shrink-0"},Wm=["src"],Km=["src"],Hm={key:1,class:"pt-safe pt-6 px-4 py-3 flex justify-between items-start shrink-0 z-10"},Gm={class:"flex flex-col items-center mt-1"},qm={class:"font-bold text-sm text-white shadow-sm"},Ym={class:"mt-2 px-3 py-1.5 rounded-full flex items-center gap-2 bg-black/40 backdrop-blur-md border border-white/5"},Jm={class:"text-xs text-white/90 font-mono tracking-widest"},Xm={class:"w-20 h-28 rounded-xl overflow-hidden shadow-2xl ring-2 ring-white/30"},Qm=["src"],Zm={id:"video-messages-container",class:"flex-1 overflow-y-auto px-4 py-2 space-y-4 custom-scrollbar scroll-smooth z-10"},eg={class:"flex flex-col justify-end min-h-full pb-4"},tg={key:0,class:"self-center max-w-[90%] my-2 text-center"},sg={class:"text-[11px] italic text-white/50 leading-relaxed"},ng=["onContextmenu"],og={class:"shrink-0 pb-safe pt-4 px-6 z-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent"},ig={class:"flex items-center gap-3 mb-6"},lg={class:"flex-1 relative group"},ag=["onKeydown"],rg={class:"flex items-center justify-center gap-8 mb-4"},cg=["src"],dg={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-black/30 flex flex-col justify-between p-2"},ug={class:"flex flex-col items-center mb-1"},pg={class:"text-[10px] text-white/90 font-mono tracking-wider font-bold"},fg={key:5,class:"relative z-10 flex-1 flex flex-col items-center justify-center animate-in zoom-in-95 duration-300"},vg={class:"relative z-10 flex flex-col items-center"},xg={class:"text-white/50 text-sm font-mono"},bg={key:1,class:"fixed inset-0 z-[10000] flex items-end justify-center pointer-events-auto"},mg={class:"bg-zinc-900 w-full max-w-sm m-4 mb-safe rounded-2xl overflow-hidden border border-white/10 shadow-2xl relative z-10 animate-in slide-in-from-bottom-10 duration-200"},gg={class:"p-4 border-b border-white/5 bg-white/5"},hg={class:"text-xs text-white/50 line-clamp-1 italic text-center"},yg={class:"bg-black py-2"},wg={__name:"Chat",props:["chatId"],emits:["back","navigate"],setup(e,{emit:s}){const n=e,o=s,i=be(()=>mi(n.chatId)),l=be(()=>{if(!k.regexCategories||!k.regexEntries)return[];const m=k.regexCategories.filter(Z=>Z.scope==="global").map(Z=>Z.id),d=i.value?.localSettings?.mountedRegexCategories||[],x=k.regexCategories.filter(Z=>Z.scope==="local"&&d.includes(Z.id)).map(Z=>Z.id),U=new Set([...m,...x]);return k.regexEntries.filter(Z=>!!(U.has(Z.categoryId)||d.includes(Z.id)))}),a=m=>{if(!m)return"";let d=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return l.value.forEach(x=>{if(!(!x.regex||!x.html))try{const U=new RegExp(x.regex,"gms");d=d.bind?d.replace(U,x.html):String(d).replace(U,x.html)}catch{}}),d},r=m=>m?l.value.some(d=>{if(!d.regex)return!1;try{return new RegExp(d.regex,"gms").test(m)}catch{return!1}}):!1,p=be(()=>{const m=i.value;if(!m)return{};const d=m.localSettings||{};if(m.type==="group"||m.isAbstract)return{avatar:d.groupAvatarOverride||m.avatar,handle:d.groupNameOverride||m.handle||m.title||"Group",isAbstract:m.isAbstract,id:m.id};const x=k.contacts.find(U=>U.id===m.id);return{avatar:d.theirAvatarOverride||x?.avatar||m.avatar,handle:d.theirNicknameOverride||x?.handle||m.handle,realName:x?.name||m.handle,isAbstract:!1,id:m.id}}),b=be(()=>He.value?He.value.filter(m=>m.type!=="innerVoice"):[]),u=()=>{o("back")},v=C(""),g=C(!1),j=C(!1),B=C(!1),N=C(!1),L=C(!1),S=C(""),T=C(""),E=C(""),O=C(null),A=C("input"),R=C(""),Y=C(""),we=C([]),ce=C(!1),ze=C(!1),Te=C(""),se=C(!1),K=C(new Set),I=C(!1),y=C(null),z=C(null),D=m=>{const d=document.getElementById(`msg-${m}`);d?(d.scrollIntoView({behavior:"smooth",block:"center"}),d.classList.add("bg-zinc-100/50"),setTimeout(()=>d.classList.remove("bg-zinc-100/50"),1e3)):console.log("Message target not found in DOM")},ae=C(!1),ue=C(""),F=C(""),ve=C(""),xe=C(null),We=C("single"),ot=m=>{We.value="single",xe.value=m.id,ue.value="Edit Message",F.value="Modify this message content locally",ve.value=m.text,I.value=!1,y.value=null,ae.value=!0},Mt=()=>{const m=He.value;if(m.length===0)return;const d=[];let x=m.length-1;if(m[x].isMe)return;for(;x>=0&&!m[x].isMe;)d.unshift(m[x]),x--;if(d.length===0)return;let U=d.map(Z=>{let fe="[]",_e=Z.text,dt=Z.senderName||Et(Z);if(Z.type==="sticker")fe="[]",_e=Z.keyword;else if(Z.type==="spoiler")fe="[]",_e=Z.text;else if(Z.type==="voice")fe="[]",_e=Z.text;else if(Z.type==="html")fe="[html]",_e=Z.content||Z.text;else if(Z.type==="location"){fe="[]";try{_e=JSON.parse(Z.content).name}catch{_e=Z.text}}else{if(Z.type==="video_call_notice")return`[] ${Z.text}`;Z.replyTo?(fe="[]",_e=`{${Z.replyTo.senderName}${Z.replyTo.text}} ${Z.text}`):Z.type==="action"?(fe="[]",_e=Z.text):Z.isAction}return`${fe} ${dt}${_e}`}).join(`
`);We.value="last_round",xe.value=null,ue.value="Edit Last Round",F.value="Edit the full AI response context",ve.value=U,I.value=!1,ae.value=!0},ct=async m=>{if(We.value==="single"){const d=He.value.find(x=>x.id===xe.value);d&&await Xs(n.chatId,{...d,text:m})}else if(We.value==="last_round"){const d=He.value,x=[];let U=d.length-1;for(;U>=0&&!d[U].isMe;)x.push(d[U].id),U--;await Wi(n.chatId,x);const Z=m.split(/(?=\[(?:|||||||||html||||)])/);for(const fe of Z)fe.trim()&&await So(fe)}},Et=m=>{if(m.isMe)return De.value.handle||De.value.name;const d=fs(m.senderId);return d&&(d.handle||d.name)||"Unknown"},At=()=>{y.value&&(z.value=y.value,I.value=!1,y.value=null,j.value=!1,_s(()=>{const m=document.querySelector("textarea");m&&m.focus()}))},kt=m=>{if(se.value){qt(m);return}y.value=m,I.value=!0},Ot=be(()=>He.value.length===0?!1:!He.value[He.value.length-1].isMe),qt=m=>{K.value.has(m.id)?K.value.delete(m.id):K.value.add(m.id)},_=()=>{se.value=!0,I.value=!1,y.value&&K.value.add(y.value.id),y.value=null},$=()=>{se.value=!1,K.value.clear()},V=async m=>{const d=He.value.find(x=>x.id===m);d&&await Xs(n.chatId,{...d,isRecalled:!0,isRecallRevealed:!1})},X=()=>{y.value&&(V(y.value.id),I.value=!1,y.value=null)},q=async m=>{if(m){try{await navigator.clipboard.writeText(m.text||m.content||"")}catch(d){console.error("Failed to copy",d)}I.value=!1,y.value=null}},J=async()=>{y.value&&(confirm("Delete this message?")&&await rf(n.chatId,y.value.id),I.value=!1,y.value=null)},re=async()=>{const m=Array.from(K.value);m.length!==0&&confirm(`Delete ${m.length} messages?`)&&(await Wi(n.chatId,m),$())},ne=be(()=>{const m=i.value;return m?m.type==="group"||m.isAbstract?{name:m.handle||"Group",isGroup:!0}:k.contacts.find(x=>x.id===m.id)||{name:m.handle||"Unknown",isGroup:!1}:{name:"Unknown"}}),ee=C(null),G=C(!1),ke=C(!1),ie=C(null),ge=C("current"),Me=be(()=>He.value?He.value.filter(m=>m.type==="innerVoice"):[]),Le=m=>m?Me.value.filter(d=>d.senderId===m):Me.value,Xe=be(()=>{let d=(i.value?.type==="group"||i.value?.isGroup)&&ie.value?Le(ie.value):Me.value;const U=[...He.value].reverse().find(Z=>Z.isMe&&Z.type!=="innerVoice")?.timestamp||0;return d.filter(Z=>Z.timestamp>U)}),Fe=be(()=>((i.value?.type==="group"||i.value?.isGroup)&&ie.value?Le(ie.value):Me.value).filter(x=>x.isFavorited)),qe=be(()=>ge.value==="current"?Xe.value:Fe.value),yt=async m=>{const d=He.value.find(x=>x.id===m);d&&await Xs(n.chatId,{...d,isFavorited:!d.isFavorited})},Dt=()=>{ge.value="current",i.value?.type==="group"||i.value?.isGroup?ke.value=!0:G.value=!0},Pt=m=>{ie.value=m,ke.value=!1,G.value=!0},ps=()=>{G.value=!1,ie.value=null},Yt=m=>m?k.contacts.find(x=>x.id===m)||{name:"Unknown",avatar:null}:k.contacts.find(U=>U.id===n.chatId)||{name:"Unknown",avatar:null},gt=m=>{if(!m)return"";let d=m;return l.value.forEach(x=>{if(!(!x.regex||!x.html))try{const U=new RegExp(x.regex,"gms");d=d.replace(U,x.html)}catch{}}),d},Jt=m=>m?l.value.some(d=>{if(!d.regex||!d.html)return!1;try{return new RegExp(d.regex,"gms").test(m)}catch{return!1}}):!1,H=C(!1),h=C(""),P=()=>{j.value=!1,H.value=!0,h.value=""},me=async()=>{if(!h.value.trim())return;const m={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:h.value,type:"spoiler",senderId:"me",timestamp:Date.now(),isMe:!0,isRevealed:!1};await jt(n.chatId,m),H.value=!1,Qt(!0)},Ms=()=>{j.value=!1,ze.value=!0,Te.value=""},Bn=async()=>{if(!Te.value.trim())return;const m={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:Te.value,type:"voice",senderId:"me",timestamp:Date.now(),isMe:!0};await jt(n.chatId,m),ze.value=!1,Qt(!0)},wn=C(!1),wo=C(""),Pl=C(null),Ec=m=>{wo.value=m,wn.value=!0},Tc=async m=>{const d=m.target.files[0];if(d){if(d.type.startsWith("image/")){const x=new FileReader;x.onload=async U=>{const Z=U.target.result,fe={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:"[Image Upload]",content:Z,type:"image",senderId:"me",timestamp:Date.now(),isMe:!0};await jt(n.chatId,fe),j.value=!1,Qt(!0)},x.readAsDataURL(d)}m.target.value=""}},Un=be(()=>k.stickerCategories),qs=be(()=>{if(!i.value)return[];const m=i.value.localSettings?.mountedStickerPacks;return m==null?Un.value:Un.value.filter(d=>m.includes(d.id))}),Rl=be(()=>{if(qs.value.length===0)return null;if(ee.value){const m=qs.value.find(d=>d.id===ee.value);if(m)return m}return qs.value[0]});ds(qs,m=>{m.length>0?(!ee.value||!m.find(d=>d.id===ee.value))&&(ee.value=m[0].id):ee.value=null},{immediate:!0});const jc=async()=>{j.value=!1;const m=He.value;if(m.length===0)return;const d=[];for(let x=m.length-1;x>=0;x--){const U=m[x];if(U.isMe||["system","transfer","payment_notice","video_call_notice"].includes(U.type))break;d.push(U.id)}d.length>0&&await Wi(n.chatId,d),Co()},Ac=()=>{j.value=!j.value,j.value&&(B.value=!1)},Nl=()=>{j.value=!1,B.value=!1},Oc=()=>{z.value=null},Pc=()=>{j.value=!1,B.value=!0},Fn=C(!1),Wn=C(""),Rc=()=>{j.value=!1,Wn.value="",Fn.value=!0},ko=async m=>{Fn.value=!1;const d={id:crypto.randomUUID(),conversationId:n.chatId,senderId:"user",text:m.name,content:JSON.stringify(m),type:"location",timestamp:Date.now(),isMe:!0};await jt(n.chatId,d),Qt(!0)},hi=C(!1),Ys=C(null),yi=m=>{if(!m)return"";const d=Math.floor(m/1e3),x=Math.floor(d/60),U=d%60;return x>0?`${x}m ${U}s`:`${U}s`},Ll=m=>{m.callResult!=="missed"&&(Ys.value=m,hi.value=!0)},Dl=()=>{hi.value=!1,Ys.value=null},Vl=be(()=>k.videoCallState.isActive&&(k.videoCallState.chatId===n.chatId||!k.videoCallState.chatId)),kn=be(()=>k.videoCallState.isMinimized),Es=C({x:window.innerWidth-130,y:100}),wi=C(!1),ki=C({x:0,y:0}),_i=()=>{if(!kn.value){const m=window.innerWidth-120;Es.value.x>m&&(Es.value.x=Math.max(10,m-10)),Es.value.y>window.innerHeight-180&&(Es.value.y=Math.max(50,window.innerHeight-180))}Xp(!kn.value)},Bl=m=>{wi.value=!1;const d=m.touches?m.touches[0].clientX:m.clientX,x=m.touches?m.touches[0].clientY:m.clientY;ki.value={x:d-Es.value.x,y:x-Es.value.y},document.addEventListener("mousemove",_o),document.addEventListener("mouseup",zo),document.addEventListener("touchmove",_o,{passive:!1}),document.addEventListener("touchend",zo)},_o=m=>{m.preventDefault(),wi.value=!0;const d=m.touches?m.touches[0].clientX:m.clientX,x=m.touches?m.touches[0].clientY:m.clientY;let U=d-ki.value.x,Z=x-ki.value.y;const fe=window.innerWidth-112,_e=window.innerHeight-160;Es.value={x:Math.max(10,Math.min(U,fe-10)),y:Math.max(50,Math.min(Z,_e-80))}},zo=()=>{document.removeEventListener("mousemove",_o),document.removeEventListener("mouseup",zo),document.removeEventListener("touchmove",_o),document.removeEventListener("touchend",zo)},Nc=()=>{wi.value||_i()},Xt=C("idle"),cn=C(null),_t=C([]),Kn=C(""),$o=C(0),_n=C("00:00");let Hn=null;const zn=C(!1),Ts=C(null),Lc=m=>{Ts.value=m,zn.value=!0},Dc=()=>{Ts.value&&(_t.value=_t.value.filter(m=>m.id!==Ts.value.id),zn.value=!1,Ts.value=null)},Vc=()=>{if(!Ts.value)return;const m=prompt("Videoscript Edit",Ts.value.text);if(m!==null&&m.trim()!==""){const d=_t.value.findIndex(x=>x.id===Ts.value.id);d!==-1&&(_t.value[d].text=m)}zn.value=!1,Ts.value=null};ds(()=>k.videoCallState.isActive,m=>{m&&Xt.value},{immediate:!0});const Bc=m=>{if(Vl.value){console.log("[Video] Call already active, ignoring new incoming call from:",m);return}let d=null;i.value?.type==="group"||i.value?.isGroup?d=k.contacts.find(U=>U.name===m||U.handle===m):d=k.contacts.find(U=>U.id===n.chatId),d||(d={name:m,handle:m,avatar:i.value?.avatar||"https://via.placeholder.com/100"}),cn.value=d,Fi(!0,n.chatId),Xt.value="incoming"},Uc=()=>{Xt.value="active",$o.value=Date.now(),_t.value=[],Ul(),_t.value.push({id:"sys_start",text:"Video call connected",isAction:!0,isMe:!1})},Fc=async()=>{await jt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"video_call_notice",text:"[] ",callResult:"rejected",senderId:De.value.id,timestamp:Date.now(),isMe:!0}),Gn(!1)},Wc=()=>{j.value=!1,Fi(!0,n.chatId),Xt.value="dialing",_t.value=[];const m=2e3+Math.random()*2e3;setTimeout(()=>{Math.random()>.3?(Xt.value="active",$o.value=Date.now(),Ul(),zi(!0)):(Xt.value="ended",jt(n.chatId,{id:"msg_vc_"+Date.now(),conversationId:n.chatId,text:"[] ",type:"video_call_notice",callResult:"missed",timestamp:Date.now(),isMe:!0}),setTimeout(()=>{Gn(!0)},1500))},m)},Gn=async(m=!1)=>{if(Hn&&clearInterval(Hn),cn.value=null,!m&&Xt.value==="active"){const d=Date.now()-$o.value;Xt.value="ended",await Hc(d)}setTimeout(()=>{Fi(!1),Xt.value="idle",_t.value=[],_n.value="00:00"},m?0:800)},Ul=()=>{Hn&&clearInterval(Hn),Hn=setInterval(()=>{const m=Date.now()-$o.value,d=Math.floor(m/6e4),x=Math.floor(m%6e4/1e3);_n.value=`${String(d).padStart(2,"0")}:${String(x).padStart(2,"0")}`},1e3)},Fl=async()=>{if(!Kn.value.trim())return;const m={id:"vcm_"+Date.now(),text:Kn.value.trim(),isMe:!0,timestamp:Date.now()};_t.value.push(m),_s(()=>{const d=document.getElementById("video-messages-container");d&&(d.scrollTop=d.scrollHeight)}),Kn.value="",await zi(!1)},Kc=async()=>{const m=_t.value;if(m.length===0)return;const d=[];for(let x=m.length-1;x>=0;x--){const U=m[x];if(U.isMe||U.id.startsWith("sys_"))break;d.push(U.id)}d.length>0&&(_t.value=_t.value.filter(x=>!d.includes(x.id))),await zi(!1)},zi=async(m=!1)=>{const d=i.value?.type==="group"||i.value?.isGroup,x=i.value?.localSettings||{},U=x.shortTermMemoryLimit||50,fe=He.value.slice(-U).map(he=>he.text).join(`
`)+`
`+_t.value.map(he=>he.text).join(`
`),{front:_e,mid:dt,back:Ye}=Kl(fe,"");let Ae="";if(x.longTermMemoryEnabled===!0)try{const he=await Ya(n.chatId,fe.slice(-1e3));if(he.coreMemories.length>0&&(Ae+=`/
`,he.coreMemories.forEach($e=>Ae+=`: ${$e.source}
${$e.summary}

`)),he.recentFacts.length>0&&(Ae+=`
`,he.recentFacts.forEach($e=>{const Ge=Array.isArray($e.who)?$e.who.join(""):$e.who,ut=$e.sourceType==="group"?"[]":"[]";Ae+=`${ut} ${Ge}: ${$e.action||$e.what}${$e.when?` (${$e.when})`:""}
`}),Ae+=`
`),he.rankedFacts.length>0&&(Ae+=`
`,he.rankedFacts.forEach($e=>{const Ge=Array.isArray($e.who)?$e.who.join(""):$e.who,ut=$e.sourceType==="group"?"[]":"[]";Ae+=`${ut} ${Ge}: ${$e.action||$e.what}${$e.when?` (${$e.when})`:""}
`}),Ae+=`
`),he.noteMemory){const $e=he.noteMemory,Ge=Array.isArray($e.who)?$e.who.join(""):$e.who;Ae+=`/
${Ge}: ${$e.action||$e.what}

`}}catch(he){console.warn("[Video] Memory load failed",he)}let Ke="";if(d){const he=(i.value.members||[]).map(Ct=>{const vt=k.contacts.find(xt=>xt.id===Ct);if(!vt)return null;const pt=vt.persona||vt.bio||"";return`${vt.name}
${pt||""}`}).filter(Boolean).join(`

`),$e=(i.value.members||[]).map(Ct=>k.contacts.find(vt=>vt.id===Ct)?.name||"Unknown").join(", "),Ge=De.value?.name||De.value?.handle||"User",ut=De.value?.persona||De.value?.bio||"";Ke=`


${Ge}
${ut?`${ut}`:""}


${$e}


${he}



 - 
1. 
2. [] 
3. 
4. [] 
5. 


[] Alice
[] Alice
[] Bob
[] Bob

${m?"":""}`}else{const he=k.contacts.find(vt=>vt.id===n.chatId),$e=he?.name||p.value.handle,Ge=he?.persona||he?.bio||"",ut=De.value?.name||De.value?.handle||"User",Ct=De.value?.persona||De.value?.bio||"";Ke=`


${ut}
${Ct?`${Ct}`:""}


${$e}
${Ge}

 - 
1. 
2. [] ${$e}
3. 
4. [] ${$e}
5. 
6.  []+[] 
7. 


[] ${$e}
[] ${$e}~
[] ${$e}
[] ${$e}

${m?"":""}`}const $t=[..._e,Ke,dt,Ae,...Ye].filter(he=>he&&he.trim()).join(`

`),Os=_t.value.map(he=>({role:he.isMe?"user":"assistant",content:he.text})),Be=Rt.getActiveKey();if(!Rt.endpoint?.value){console.warn("[Video] No API Endpoint configured"),_t.value.push({id:"err_cfg_"+Date.now(),text:"[]  API ",isAction:!0,isMe:!0});return}const Ue=Rt.endpoint.value.replace(/\/+$/,"")+"/chat/completions";try{const ut=((await(await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Be}`},body:JSON.stringify({model:Rt.model.value||"gpt-3.5-turbo",messages:[{role:"system",content:$t},...Os],temperature:Rt.temperature.value!==void 0?Rt.temperature.value:.7})})).json()).choices?.[0]?.message?.content||"").split(`
`).filter(Ct=>Ct.trim());for(const Ct of ut){const vt=Ct.startsWith("[]"),pt=Ct.startsWith("[]");if(vt||pt){const xt=Ct.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];let as=null;if(xt&&i.value?.type==="group"){const hs=k.contacts.find(un=>un.name===xt||un.handle===xt);hs&&(as=hs.id)}_t.value.push({id:"vcm_ai_"+Date.now()+Math.random(),text:Ct,isMe:!1,senderId:as,timestamp:Date.now(),isAction:vt}),await _s();const gs=document.getElementById("video-messages-container");gs&&(gs.scrollTop=gs.scrollHeight),await new Promise(hs=>setTimeout(hs,800+Math.random()*1e3))}}}catch(he){console.error("Video AI Error",he),_t.value.push({id:"err_"+Date.now(),text:`[] AI : ${he.message||""}`,isAction:!0,isMe:!0})}},Wl=m=>{if(!m)return null;try{const d=JSON.parse(m);return Array.isArray(d)?d:null}catch{return null}},Hc=async m=>{const d=_e=>{const dt=Math.floor(_e/1e3),Ye=Math.floor(dt/60),Ae=dt%60;return Ye>0?`${Ye}${Ae}`:`${Ae}`},x=_t.value.map(_e=>({id:_e.id,text:_e.text,isMe:_e.isMe,isAction:_e.isAction,senderId:_e.senderId,timestamp:_e.timestamp})),U=JSON.stringify(x),Z=i.value?.type==="group",fe=d(m);await jt(n.chatId,{id:"msg_vc_"+Date.now(),conversationId:n.chatId,text:Z?`[]  ${fe}`:`[]  ${fe}`,type:"video_call_notice",callResult:"completed",duration:m,callTranscript:U,timestamp:Date.now(),isMe:!0})},Gc=m=>{let d=0;const x=m||"Location";for(let fe=0;fe<x.length;fe++)d=x.charCodeAt(fe)+((d<<5)-d);d=Math.abs(d);const U=[],Z=12+d%8;for(let fe=0;fe<Z;fe++){const _e=d*(fe+131)*37+fe*101;U.push({left:_e%100+"%",top:_e/100%100+"%",width:20+_e%30+"px",height:20+(_e>>4)%30+"px",opacity:.03+_e%10/100})}return U},$i=()=>{B.value=!1,ce.value=!0},Ci=m=>{const d=i.value?.localSettings?.mountedStickerPacks;return d==null?!0:d.includes(m)},qc=async m=>{if(!i.value)return;let d=i.value.localSettings?.mountedStickerPacks;d==null?d=Un.value.map(U=>U.id):d=[...d];const x=d.indexOf(m);x>-1?d.splice(x,1):d.push(m),await Dn({id:n.chatId,localSettings:{...i.value.localSettings,mountedStickerPacks:d}})},Yc=async m=>{const d={id:"msg_"+Date.now(),conversationId:n.chatId,text:m.url,content:m.url,type:"sticker",keyword:m.keyword,senderId:"me",timestamp:Date.now(),isMe:!0};await jt(n.chatId,d)},He=be(()=>k.messages[n.chatId]||[]),De=be(()=>{const m=i.value?.localSettings?.myActivePersonaId,d=k.activePersonaId,x=m||d;return k.personas.find(U=>U.id===x)||k.personas[0]}),Si=C(null),dn=C(null),js=C(!0),Qt=async(m=!1)=>{if(await _s(),!dn.value&&Si.value){Si.value.scrollIntoView({behavior:m?"auto":"smooth"});return}dn.value&&(m?dn.value.scrollTop=dn.value.scrollHeight:dn.value.scrollTo({top:dn.value.scrollHeight,behavior:"smooth"}))};ds(()=>He.value.length,m=>{m!==0&&(js.value?(Qt(!0),js.value=!1):Qt(!1))},{flush:"post"}),Gt(async()=>{if(await Rt.init(),n.chatId){if(js.value=!0,await Ko(n.chatId),He.value.length>0&&js.value)Qt(!0),js.value=!1;else if(n.chatId==="noir"&&He.value.length===0){const m=[{id:"demo_1",conversationId:"noir",text:"The composition in your latest editorial is remarkable. The use of negative space creates a profound tension.",senderId:"noir_official",timestamp:new Date().setHours(14,22,0,0),isMe:!1,type:"text"},{id:"demo_2",conversationId:"noir",text:"Thank you. I was exploring the intersection of brutalist architecture and morning light.",senderId:"me",timestamp:new Date().setHours(14,25,0,0),isMe:!0,type:"text"},{id:"demo_3",conversationId:"noir",text:'"Silent Forms". Focusing on textures of concrete and silk.',senderId:"noir_official",timestamp:new Date().setHours(14,28,0,0),isMe:!1,type:"text"}];for(const d of m)await jt("noir",d);await Ko("noir"),Qt(!0),js.value=!1}}}),ds(()=>n.chatId,async m=>{m&&(js.value=!0,await Ko(m),He.value.length>0&&js.value&&(Qt(!0),js.value=!1))});const Jc=yo(),Kl=(m,d)=>{const x=(m+`
`+d).toLowerCase(),U=Jc.state.entries;let Z=U.filter(Ke=>Ke.scope==="global");const fe=i.value?.localSettings?.mountedWorldbooks||[];if(fe.length>0){const Ke=U.filter($t=>$t.scope==="local"&&(fe.includes($t.categoryId)||fe.includes($t.id)));Z=[...Z,...Ke]}const _e=Z.filter(Ke=>Ke.isConstant?!0:!Ke.keywords||Ke.keywords.length===0?!1:Ke.keywords.some($t=>x.includes($t.toLowerCase()))),dt=[],Ye=[],Ae=[],zt=[];return _e.forEach(Ke=>{Ke.depth&&Ke.depth>0?zt.push({content:Ke.content,depth:Ke.depth}):Ke.position==="front"?dt.push(Ke.content):Ke.position==="back"?Ae.push(Ke.content):Ye.push(Ke.content)}),console.log("[WorldBook] Active Entries:",_e.length),console.log("[WorldBook] Front:",dt),console.log("[WorldBook] Mid:",Ye),console.log("[WorldBook] Back:",Ae),console.log("[WorldBook] HistoryInjections:",zt),{front:dt,mid:Ye.join(`

`),back:Ae,historyInjections:zt}},Xc=()=>{S.value="",T.value="",E.value="",R.value="",A.value="input",N.value=!0,j.value=!1;const m=i.value;m.type==="group"||m.isGroup?(we.value=(m.members||[]).map(d=>k.contacts.find(x=>x.id===d)).filter(d=>d&&d.id!==De.value.id),Y.value=""):(Y.value=ne.value.id||m.id,we.value=[])},Qc=()=>{const m=parseFloat(S.value);if(!m||m<=0){R.value="Invalid amount";return}if(!Y.value){R.value="Please select a recipient";return}R.value="",A.value="password"},Zc=async()=>{if(!k.wallet.hasPassword){R.value="Please set payment password in Wallet first";return}if(!kc(E.value)){R.value="Incorrect password";return}const m=parseFloat(S.value);let d=ne.value.name;if(we.value.length>0){const Z=we.value.find(fe=>fe.id===Y.value);d=Z?Z.name:"Unknown"}if(!al("transfer",m,`Transfer to ${d}`)){R.value="Insufficient balance";return}const U={id:"msg_"+Date.now(),conversationId:n.chatId,text:`Transfer: ${m.toFixed(2)}`,senderId:De.value.id,recipientId:Y.value,timestamp:Date.now(),isMe:!0,type:"transfer",amount:m,note:T.value,type:"transfer",amount:m,note:T.value,status:"pending"};await jt(n.chatId,U),N.value=!1,Qt()},ed=m=>{O.value=m,L.value=!0},td=m=>{O.value={...m,status:m.action==="collect"?"collected":"rejected",note:m.action==="collect"?"Payment Accepted":"Payment Returned",isMe:!m.isMe},L.value=!0},sd=m=>{if(m.type==="payment_notice")return m.isMe?m.senderName:m.targetName;if(m.isMe){if(m.recipientId){const d=k.contacts.find(x=>x.id===m.recipientId);if(d)return d.name}return ne.value.name||"User"}else{const d=fs(m.senderId);return d?d.name:ne.value.name||"User"}},nd=async()=>{if(!O.value)return;const m=O.value;await Xs(n.chatId,{...m,status:"collected"});const d=k.contacts.find(U=>U.id===m.senderId),x=d?d.name:"Unknown";Ua(m.amount,`Transfer from ${x}`),await jt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"collect",amount:m.amount,senderName:De.value.name,targetName:x,timestamp:Date.now(),isMe:!0,text:"Accepted transfer"}),L.value=!1},od=async()=>{if(!O.value)return;const m=O.value;await Xs(n.chatId,{...m,status:"rejected"});const d=k.contacts.find(U=>U.id===m.senderId),x=d?d.name:"Unknown";await jt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"reject",amount:m.amount,senderName:De.value.name,targetName:x,timestamp:Date.now(),isMe:!0,text:"Rejected transfer"}),L.value=!1},Hl=async(m=!1)=>{if(!v.value.trim())return;if(m&&!Rt.apiKey.value){alert(" API Setup  API Key  Model");return}const d=v.value;v.value="";let x="text",U=d;const Z=d.trim();/^<[a-z][\s\S]*>$/i.test(Z)&&(x="html",U=Z);const _e=d.match(/^\[html\]\s*(.+?)[:](.+)$/s);_e&&(x="html",U=_e[2].trim());const dt={id:"msg_"+Date.now(),conversationId:n.chatId,text:d,senderId:"me",timestamp:Date.now(),isMe:!0,replyTo:z.value?{id:z.value.id,text:z.value.text||(z.value.type==="image"?"[Image]":"[Content]"),senderName:Et(z.value),type:z.value.type}:null,type:x,content:U};z.value=null,await jt(n.chatId,dt),m&&(i.value?.isGroup,Co())},id=async()=>{if(v.value.trim())await Hl(!0);else{if(!Rt.apiKey.value){alert(" API Setup  API Key  Model");return}Co()}},Rt=Mc(),Co=async()=>{if(!Rt.apiKey.value)return;g.value=!0;const m=De.value.name,d=De.value.persona||"Unknown",x=i.value?.localSettings?.shortTermMemoryLimit||15,U=He.value.slice(-x),Z=U.map(Q=>Q.text).join(`
`),{front:fe,mid:_e,back:dt,historyInjections:Ye}=Kl(Z,""),Ae=i.value?.localSettings||{},zt=Ae.timeAwareness!==!1,Ke=Ae.envSensing===!0,$t=Ae.innerVoiceEnabled===!0,Os=Ae.innerVoiceUseCustom===!0,Be=Ae.innerVoiceTemplate||"";let Ue="",he="",$e=[];if(Ae.longTermMemoryEnabled===!0)try{const Q=He.value.slice(-5).map(de=>de.text||"").join(" "),te=await Ya(n.chatId,Q);if(te.coreMemories.length>0&&(he+=`/
`,te.coreMemories.forEach(de=>{he+=`: ${de.source}
${de.summary}

`})),te.recentFacts.length>0&&(he+=`
`,te.recentFacts.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=de.sourceType==="group"?"[]":"[]";he+=`${Ce} ${Oe}: ${de.action||de.what}${de.when?` (${de.when})`:""}
`}),he+=`
`),te.rankedFacts.length>0&&(he+=`
`,te.rankedFacts.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=de.sourceType==="group"?"[]":"[]";he+=`${Ce} ${Oe}: ${de.action||de.what}${de.when?` (${de.when})`:""}
`}),he+=`
`),te.noteMemory){const de=te.noteMemory,Oe=Array.isArray(de.who)?de.who.join(""):de.who;he+=`/
`,he+=`"${Oe}: ${de.action||de.what}"
`,he+=`......

`}zt&&(te.upcomingAppointments?.length>0&&(he+=`
`,te.upcomingAppointments.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=new Date(de.appointmentTime).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});he+=`- ${Oe}: ${de.action} (${Ce})
`}),he+=`
`),te.overdueAppointments?.length>0&&(he+=`
`,te.overdueAppointments.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=new Date(de.appointmentTime).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});he+=`- ${Oe}: ${de.action} ( ${Ce})
`}),he+=`
`)),he&&console.log("[Memory] Prepared smart memory context:",{cores:te.coreMemories.length,recent:te.recentFacts.length,ranked:te.rankedFacts.length,hasNote:!!te.noteMemory}),$e=[...te.upcomingAppointments||[],...te.overdueAppointments||[]]}catch(Q){console.warn("[Memory] Failed to load memories for injection:",Q),he=""}const ut=(_e?_e+`
`:"")+Ue,Ct=he?`

${he}`:"";let vt="";const pt=[],xt=[];for(let Q=1;Q<U.length;Q++){const te=U[Q],de=U[Q-1],Oe=te.timestamp-de.timestamp,Ce=Math.floor(Oe/6e4);Ce>15&&xt.push({index:Q,diffMins:Ce,currTimestamp:te.timestamp})}xt.length>4&&xt.splice(0,xt.length-4);const as=Q=>{if(Q<60)return`${Q} `;const te=Math.floor(Q/60),de=Q%60;return te<24?`${te} ${de>0?" "+de+" ":""}`:`${Math.floor(te/24)}  ${te%24} `},gs=Q=>{const te=new Date(Q),de=te.getFullYear(),Oe=String(te.getMonth()+1).padStart(2,"0"),Ce=String(te.getDate()).padStart(2,"0"),it=te.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return`${de}-${Oe}-${Ce} ${it}`},hs=(Q,te)=>{let de=Intl.DateTimeFormat().resolvedOptions().timeZone;Q&&Q.trim()&&(de=Q.trim());try{const Oe=te?new Date(te):new Date,Ce=Oe.getFullYear(),it=String(Oe.getMonth()+1).padStart(2,"0"),bt=String(Oe.getDate()).padStart(2,"0"),St=["","","","","","",""][Oe.getDay()],Zt=Oe.toLocaleTimeString("en-US",{timeZone:de,hour:"2-digit",minute:"2-digit",hour12:!1});return`${Ce}-${it}-${bt} ${St} ${Zt}`}catch{return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}};let un=!1,Mi=0;const Io=[];if(U.forEach((Q,te)=>{if(Q.type==="innerVoice")return;const de=xt.find(Ce=>Ce.index===te);if(de){if(zt){const Ce=as(de.diffMins),bt=`[(${gs(de.currTimestamp)})  ${Ce}]`;pt.push({role:"system",content:bt})}un=!0,Mi=de.currTimestamp}let Oe="Unknown";if(Q.isMe)Oe=De.value.name;else{const Ce=fs(Q.senderId);Oe=Ce?Ce.name:"Unknown"}if(Q.isRecalled)pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe}${Q.text||"[]"}`});else if(Q.type==="image")Q.isAnalyzed?pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe}[]`}):(pt.push({role:Q.isMe?"user":"assistant",content:[{type:"text",text:`[] ${Oe} sent an image.`},{type:"image_url",image_url:{url:Q.content}}]}),Io.push(Q.id));else if(Q.type==="transfer")pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe}@${Gl(Q)} ${Q.amount?Q.amount.toFixed(2):"0.00"} ${Q.note||""}`.trim()});else if(Q.type==="payment_notice")Q.action==="collect"?pt.push({role:"assistant",content:`[] ${Q.senderName}${Q.targetName} ${Q.amount}`}):pt.push({role:"assistant",content:`[] ${Q.senderName}${Q.targetName} ${Q.amount}`});else if(Q.type==="video_call_notice"){if(Q.callResult==="missed")pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe} `});else if(Q.callResult==="completed"&&Q.callTranscript){let Ce="";try{const it=typeof Q.callTranscript=="string"?JSON.parse(Q.callTranscript):Q.callTranscript;Array.isArray(it)&&(Ce=it.map(bt=>bt.text).join(`
`))}catch{}Ce&&pt.push({role:"system",content:`[] ${Oe} ${Math.floor((Q.duration||0)/1e3)}
${Ce}`})}}else{let Ce="[]",it=Q.text;if(Q.type==="sticker"?(Ce="[]",it=Q.keyword):Q.type==="spoiler"?(Ce="[]",it=Q.text):Q.type==="voice"?(Ce="[]",it=Q.text):Q.type==="action"?(Ce="[]",it=Q.text):Q.type==="html"?(Ce="[html]",it=Q.content||Q.text):Q.type==="location"&&(Ce="[]",it=Q.text),Q.replyTo){Ce="[]";let bt=Q.replyTo.senderName;if(Q.replyTo.id){const St=He.value.find(Zt=>Zt.id===Q.replyTo.id);if(St)if(St.isMe)bt=De.value.name;else{const Zt=fs(St.senderId);Zt&&Zt.name&&(bt=Zt.name)}}const qn=`{${bt}${Q.replyTo.text}}`;pt.push({role:Q.isMe?"user":"assistant",content:`${Ce} ${Oe}${qn} ${it}`})}else pt.push({role:Q.isMe?"user":"assistant",content:`${Ce} ${Oe}${it}`})}}),U.length>0){const Q=U[U.length-1],te=Date.now(),de=te-Q.timestamp,Oe=Math.floor(de/6e4);if(Oe>15){if(zt){const Ce=as(Oe),bt=`[(${gs(te)})  ${Ce}]`;pt.push({role:"system",content:bt})}un=!0,Mi=te}}if(un&&(zt||Ke)||!un&&Ke){const Q=i.value?.localSettings?.myLocationOverride,te=De.value.name,de=Mi||Date.now(),Oe=i.value?.localSettings?.myWeatherConfig,Ce=async(et,ht)=>{let Vt=[];if(zt&&Vt.push(hs(et,de)),Ke&&ht&&ht.lat){const Cn=await lv(ht.lat,ht.long);Cn&&Vt.push(`${nv(Cn.conditionCode)} ${Cn.temperature}C`)}return Vt.join(" ")},it=await Ce(Q,Oe),bt=[];it&&bt.push(`${te}: ${it}`);const qn=i.value?.localSettings?.theirLocationOverride,St=i.value?.localSettings?.memberOverrides||{},Zt=i.value?.localSettings?.theirWeatherConfig,$n=i.value?.localSettings?.groupWeatherConfigs||{};if((i.value?.type==="group"||i.value?.isGroup)&&Array.isArray(i.value.members))for(const et of i.value.members){const ht=k.contacts.find(Vt=>Vt.id===et);if(ht){const Vt=St[et]?.location||ht.location,Cn=$n[et],Mo=await Ce(Vt,Cn);Mo&&bt.push(`${ht.name}: ${Mo}`)}}else{const et=k.contacts.find(ht=>ht.id===n.chatId);if(et){const ht=qn||et.location,Vt=await Ce(ht,Zt);Vt&&bt.push(`${et.name}: ${Vt}`)}}if(bt.length>0){let et="",ht="Current Context";zt&&!Ke&&(et="",ht="Current Time"),!zt&&Ke&&(et="",ht="Current Weather");const Vt=bt.join(", ");console.log("[ContextAwareness] Injected:",Vt),pt.push({role:"system",content:`[${et} (${ht})${Vt}]`})}}const Ei=[];qs.value.length>0&&qs.value.forEach(Q=>{On(Q.id).forEach(de=>Ei.push(de.keyword))});const ql=Ei.length>0?`
[]: ${Ei.join(", ")}`:`
[]: `;if(i.value?.type==="group"||i.value?.isGroup){const te=(i.value.members||[]).map(de=>{const Oe=typeof de=="object"?de.id:de,Ce=k.contacts.find(it=>it.id===Oe);return Ce?`${Ce.name||"Unknown"} (${Ce.handle||Ce.name}): ${Ce.persona||Ce.bio||"No persona"}`:""}).filter(Boolean).join(`
`);vt=`
 "${i.value.title||"Group"}"
"${m}" (${d})
${ut?`
`+ut+`
`:""}

${te||""}${Ct}
${ql}

 - 
 [] 
- " X //"""""""""
- 
- 
- 

 - 
- A  B  Alice Bob  []  Alice
- 
-  Alice  Bob  Alice Bob Alice  Charlie 
-  [] 
- 
- 

 - 
- "..."""
- "...""..."
- 
- 

 - 
 []  []  [] 
- 
- /


HTML - 
HTML/
1.  [html]  [] 
2. [html] 
3. HTML[html]

 - 
1.  [] "[] "  "[] "
2. "[] "



[] Alice
[html] Alice<div>HTML</div>   


[] 
[] {} 
[] 
[] 
[] @  
[]  [] AliceMagic 100.00
[]  [] BobMagic 50.00
[] 
[html] <HTML>
[] 
[] 
[] ${$t?`
[] 

 - 
1[]${Os&&Be?`

 - 

[] ${Be}`:`

[] Alice...
[] Alice~`}`:""}

1${$t?`
[] Alice~`:""}
[] Alice~
[] Bob{Alice~} 
[] Alice
[] Charlie{Bob} 


2-4${$t?"1[]":""}`}else{const Q=k.contacts.find(Oe=>Oe.id===n.chatId),te=Q?.name||p.value.handle,de=Q?.persona||Q?.bio||"A helpful assistant.";vt=`
"${te}"
Persona${de}${Ct}
"${m}"
${d}
${ut?`
`+ut+`
`:""}
${ql}

 - 
 [] 
- " X //"""""""""
- 
- 
- 

 - 
- "..."""
- "...""..."
- 
- 

 - 
 [] "[] @ 100.00" []  [] 
- 
- /

HTML - 
HTML/
1.  [html]  [] 
2. [html] 
3. HTML[html]

 - 
1.  [] "[] ${te}"  "[] ${te}"
2. "[] ${te}"


[] ${te}
[html] ${te}<div>HTML</div>   HTML


[] ${te}
[] ${te}{} 
[] ${te}
[] ${te}
[] ${te}@  
[] ${te} [] ${te}${m} 100.00
[] ${te} [] ${te}${m} 50.00
[] ${te}
[html] ${te}<HTML>
[] ${te}
[] ${te}
[] ${te}${$t?`
[] ${te}

 - 
1[]${Os&&Be?`

 - 

[] ${te}${Be}`:`

[] ${te}...
[] ${te}...
[] ${te}...`}`:""}

1${$t?`
[] ${te}...`:""}
[] ${te}
[] ${te}


2-7${$t?"1[]":""}1`}Ye&&Ye.length>0&&Ye.forEach(Q=>{const te=Math.max(0,pt.length-Q.depth);pt.splice(te,0,{role:"system",content:`[] ${Q.content}`})});try{const Q=[...fe.map(St=>({role:"system",content:`[/] ${St}`})),{role:"system",content:vt},...pt,...dt.map(St=>({role:"system",content:`[/] ${St}`}))],te=Rt.stream.value===!0;console.log("[TimeAwareness] Settings Stream Value:",Rt.stream.value),console.log("[TimeAwareness] Effective useStream:",te);const de={model:Rt.model.value||"gpt-3.5-turbo",messages:Q,temperature:Rt.temperature.value||.7,stream:te},Oe=Rt.getActiveKey(),Ce=Rt.endpoint.value.replace(/\/+$/,"")+"/chat/completions",it=async()=>{const St=1500+Math.random()*1500;console.log(`[TimeAwareness] Simulating Delay: ${Math.floor(St)}ms`),await new Promise(Zt=>setTimeout(Zt,St))},bt=await fetch(Ce,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify(de)});if(!bt.ok){const St=await bt.text();throw new Error(`API Error: ${bt.status} - ${St}`)}let qn="";if(te){const St=bt.body.getReader(),Zt=new TextDecoder("utf-8");let $n=!1,et="";for(;!$n;){const{value:ht,done:Vt}=await St.read();if($n=Vt,ht){const Mo=Zt.decode(ht,{stream:!0}).split(`
`);for(const Yl of Mo)if(Yl.trim().startsWith("data: ")){const Jl=Yl.trim().slice(6);if(Jl==="[DONE]")continue;try{const cd=JSON.parse(Jl).choices?.[0]?.delta?.content||"";et+=cd;const Eo=/\[(?:|||||||||html||||)]/;let Ps=et.search(Eo),Sn=-1;if(Ps!==-1){const Ti=et.substring(Ps+1).search(Eo);Ti!==-1&&(Sn=Ps+1+Ti)}for(;Ps!==-1&&Sn!==-1;){const Xl=et.slice(Ps,Sn).trim();if(await So(Xl),await it(),et=et.slice(Sn),Ps=et.search(Eo),Sn=-1,Ps!==-1){const Ql=et.substring(Ps+1).search(Eo);Ql!==-1&&(Sn=Ps+1+Ql)}}}catch{}}}}if(et.search(/\[(?:|||||||||html||||)]/)!==-1){const ht=et.substring(et.search(/\[(?:|||||||||html||||)]/)).trim();await So(ht)}}else{const $n=((await bt.json()).choices?.[0]?.message?.content||"").split(/(?=\[(?:|||||||||html||||)])/);for(const et of $n)et.trim()&&(await So(et),await it())}}catch(Q){console.error("AI Reply failed",Q),g.value=!1}finally{if(g.value=!1,Io&&Io.length>0)for(const Q of Io){const te=He.value.find(de=>de.id===Q);te&&await Xs(n.chatId,{...te,isAnalyzed:!0})}if($e&&$e.length>0){const Q=He.value.filter(te=>!te.isMe&&te.timestamp>Date.now()-6e4).map(te=>(te.text||"").toLowerCase()).join(" ");for(const te of $e)(te.action||"").toLowerCase().split(/[\s]+/).filter(Ce=>Ce.length>1).some(Ce=>Q.includes(Ce))&&te.id&&await xf(te.id)}await _s(),Qt()}},Ii=new Set,ld=async(m,d,x,U)=>{const Z=He.value.filter(_e=>_e.type==="transfer"&&_e.status==="pending"&&_e.isMe===!0&&Math.abs(_e.amount-U)<.1&&!Ii.has(_e.id)),fe=Z[Z.length-1];if(fe){Ii.add(fe.id),m==="collect"?await Xs(n.chatId,{...fe,status:"collected"}):m==="reject"&&(await Xs(n.chatId,{...fe,status:"rejected"}),Ua(fe.amount,`Refund from ${d}`));let _e=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){const Ye=k.contacts.find(Ae=>Ae.name===d);Ye&&(_e=Ye.id)}await jt(n.chatId,{id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"payment_notice",action:m,amount:U,senderId:_e,senderName:d,targetName:x,timestamp:Date.now(),isMe:!1,text:m==="collect"?"Accepted transfer":"Rejected transfer"}),setTimeout(()=>Ii.delete(fe.id),5e3)}},So=async m=>{const d=m.match(/^\[(|)]\s*(.+?)[:]\s*(.+?)\s+(\d+(\.\d+)?)/);if(d){const Be=d[1]===""?"collect":"reject",Ue=d[2].trim(),he=d[3].trim(),$e=parseFloat(d[4]);await ld(Be,Ue,he,$e);return}const x=m.match(/^\[\]\s*(.+?)[:]\s*\{(.+?)[:](.+?)\}\s*(.+)$/s);if(x&&x[4]){const Be=x[1].trim(),Ue=x[2].trim(),he=x[3].trim(),$e=x[4].trim(),Ge=He.value.slice().reverse().find(xt=>{const as=xt.text&&xt.text.includes(he);let gs=!1;if(xt.isMe)gs=Ue===De.value.name||Ue===De.value.handle;else{const hs=fs(xt.senderId);hs&&(gs=Ue===hs.name||Ue===hs.handle)}return as&&gs});let ut=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){let xt=k.contacts.find(as=>as.name===Be||as.handle===Be);xt&&(ut=xt.id)}let vt=Ue;if(Ge)vt=Et(Ge);else if(Ue===De.value.name)vt=De.value.handle||De.value.name;else{const xt=k.contacts.find(as=>as.name===Ue);xt&&(vt=xt.handle||xt.name)}const pt={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:$e,content:$e,type:"text",senderId:ut,timestamp:Date.now(),isMe:!1,replyTo:{id:Ge?Ge.id:"unknown_quote",text:he,senderName:vt,type:Ge?Ge.type:"text"}};await jt(n.chatId,pt),await _s(),Qt();return}const U=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(U&&U[2]){const Be=U[1].trim(),Ue=U[2].trim();await As(Be,Ue,"text");return}const Z=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(Z&&Z[2]){const Be=Z[1].trim(),Ue=Z[2].trim();await As(Be,Ue,"spoiler");return}const fe=m.match(/^\[]\s*(.+?)[:]\s*@(.+?)\s+(\d+(\.\d+)?)\s*(.*)$/);if(fe){fe[1].trim();const Be=fe[2].trim(),Ue=parseFloat(fe[3]),he=fe[5]?fe[5].trim():"";let $e=n.chatId;i.value?.type==="group"||i.value?.isGroup;const Ge=De.value.name.toLowerCase();let ut=null;if(Be.toLowerCase()===Ge||Be===""||Be==="")ut=De.value.id;else{const vt=k.contacts.find(pt=>pt.name===Be);vt&&(ut=vt.id)}const Ct={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"transfer",amount:Ue,note:he,senderId:$e,recipientId:ut,recipientName:Be,timestamp:Date.now(),isMe:!1,status:"pending"};await jt(n.chatId,Ct);return}const _e=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(_e&&_e[2]){const Be=_e[1].trim(),Ue=_e[2].trim();await As(Be,JSON.stringify({name:Ue,address:"Shared Location"}),"location");return}const dt=m.match(/^\[\]\s*(.+?)[:](.+)$/s);if(dt&&dt[2]){const Be=dt[1].trim(),Ue=dt[2].trim();await As(Be,Ue,"action");return}const Ye=m.match(/^\[\]\s*(.+)$/s);if(Ye){const Be=Ye[1].trim();Bc(Be);return}const Ae=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(Ae&&Ae[2]){const Be=Ae[1].trim(),Ue=Ae[2].trim(),he=qs.value.flatMap($e=>On($e.id)).find($e=>$e.keyword===Ue);he&&await As(Be,he.url,"sticker",Ue);return}const zt=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(zt&&zt[2]){const Be=zt[1].trim(),Ue=zt[2].trim();await As(Be,Ue,"voice");return}const Ke=m.match(/^\[html\]\s*(.+?)[:](.+)$/s);if(Ke&&Ke[2]){const Be=Ke[1].trim(),Ue=Ke[2].trim();await As(Be,Ue,"html");return}const $t=m.match(/^\[\]\s*(.+?)[:](.+)$/s);if($t&&$t[2]){const Be=$t[1].trim(),Ue=$t[2].trim();await As(Be,Ue,"innerVoice");return}const Os=m.match(/\[\]\s*(.+?)[:](.+)$/s);if(Os&&Os[2]){const Be=Os[1].trim(),Ue=Os[2].trim(),$e=He.value.slice(-20).reverse().find(Ge=>!Ge.isRecalled&&Ge.text&&(Ge.text.includes(Ue)||Ue.includes(Ge.text))&&Ge.senderId!==n.chatId);if($e)await new Promise(Ge=>setTimeout(Ge,2e3)),V($e.id);else{await As(Be,Ue,"text"),await _s(),Qt(),await new Promise(ut=>setTimeout(ut,2500));const Ge=He.value[He.value.length-1];Ge&&!Ge.isRecalled&&V(Ge.id)}return}},As=async(m,d,x="text",U="")=>{let Z=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){const dt=m.toLowerCase();let Ye=k.contacts.find(Ae=>Ae.name===m||Ae.handle===m||Ae.id===m||Ae.name&&Ae.name.toLowerCase()===dt||Ae.handle&&Ae.handle.toLowerCase()===dt);if(!Ye&&i.value.members.includes(m)&&(Ye=k.contacts.find(Ae=>Ae.id===m)),!Ye&&i.value.members&&i.value.members.length>0){const Ae=i.value.members[0];Ye=k.contacts.find(zt=>zt.id===Ae)}Ye&&(Z=Ye.id)}const _e={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:d,content:d,type:x,keyword:U,senderId:Z,senderName:m,timestamp:Date.now(),isMe:!1};await jt(n.chatId,_e),await _s(),Qt()},Gl=m=>{if(m.recipientName)return m.recipientName;if(m.recipientId){if(m.recipientId===De.value.id)return De.value.name;const d=k.contacts.find(x=>x.id===m.recipientId);if(d)return d.name}return m.isMe?ne.value.name||"User":De.value.name},ad=m=>m.isMe?!1:!!(!m.recipientId&&!m.recipientName||m.recipientId===De.value.id||m.recipientName&&(m.recipientName===De.value.name||m.recipientName===""||m.recipientName.includes(De.value.name))),fs=m=>{if(m==="me")return null;const d=i.value?.localSettings?.memberOverrides?.[m],x=k.contacts.find(U=>U.id===m);return d?{...x,handle:d.nickname||x?.handle||"Unknown",avatar:d.avatar||x?.avatar,id:m}:x};return(m,d)=>(c(),f(oe,null,[t("div",bv,[t("header",mv,[t("div",gv,[t("button",{onClick:u,class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...d[44]||(d[44]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t("div",hv,[t("div",{class:"size-9 rounded-full bg-black overflow-hidden flex items-center justify-center relative border border-gray-100",style:Ve({backgroundImage:p.value.avatar?`url(${p.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[!p.value.avatar&&p.value.isAbstract?(c(),f("div",yv,[...d[45]||(d[45]=[t("div",{class:"w-[0.5px] h-full bg-white/30 rotate-45 absolute left-1/2"},null,-1),t("div",{class:"w-[0.5px] h-full bg-white/30 -rotate-45 absolute left-1/2"},null,-1)])])):p.value.avatar?M("",!0):(c(),f("div",wv))],4),t("div",kv,[t("h1",_v,w(p.value.handle||"Unknown"),1),d[46]||(d[46]=t("span",{class:"text-[9px] text-zinc-400 uppercase tracking-[0.15em] font-medium"},"Online",-1))])]),t("div",zv,[t("button",{onClick:d[0]||(d[0]=x=>m.$emit("navigate","chat-settings",{id:n.chatId})),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"more_horiz")])])]),t("main",{ref_key:"messagesContainer",ref:dn,class:"flex-1 overflow-y-auto px-5 pt-4 pb-2 flex flex-col gap-4 w-full"},[t("div",$v,[t("span",Cv,w(i.value?.time||"Today"),1)]),b.value.length>0?(c(),f("div",Sv,[(c(!0),f(oe,null,ye(b.value,x=>(c(),f("div",{key:x.id,id:"msg-"+x.id,class:W(["flex flex-col relative select-none",x.isMe?"items-end":"items-start"])},[x.isRecalled?(c(),f("div",Mv,[t("div",{class:W(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0",se.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[t("div",{class:W(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",K.value.has(x.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:U=>qt(x)},[K.value.has(x.id)?(c(),f("span",Tv,"check")):M("",!0)],10,Ev)],2),t("div",jv,[t("div",{class:"flex flex-col items-center gap-1 cursor-pointer group p-2",onClick:je(U=>x.isRecallRevealed=!x.isRecallRevealed,["stop"]),onContextmenu:je(U=>kt(x),["prevent"])},[t("span",Ov,[ns(w(x.isMe?"":`${fs(x.senderId)?.handle||fs(x.senderId)?.name||"Someone"} `)+" ",1),t("span",Pv,w(x.isRecallRevealed?"()":"()"),1)]),x.isRecallRevealed?(c(),f("div",Rv,[x.type==="image"?(c(),f("img",{key:0,src:x.content||x.text,class:"max-w-[120px] rounded-lg opacity-80 grayscale"},null,8,Nv)):x.type==="sticker"?(c(),f("img",{key:1,src:x.content||x.text,class:"max-w-[80px] opacity-80 grayscale"},null,8,Lv)):x.type==="transfer"||x.type==="payment_notice"?(c(),f("span",Dv,"["+w(x.type)+"]",1)):(c(),f("p",{key:3,class:"break-words leading-relaxed whitespace-pre-wrap",innerHTML:a(x.text||"[Empty Message]")},null,8,Vv))])):M("",!0)],40,Av)])])):(c(),f("div",Bv,[t("div",{class:W(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0 pt-[5px]",se.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[t("div",{class:W(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",K.value.has(x.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:U=>qt(x)},[K.value.has(x.id)?(c(),f("span",Fv,"check")):M("",!0)],10,Uv)],2),t("div",{class:W(["flex-1 min-w-0 flex flex-col relative transition-all duration-300",[x.isMe?"items-end":"items-start",y.value&&y.value.id===x.id?"z-[60]":"z-auto",x.isRecalled?"opacity-90":""]])},[t("div",{class:W(["flex items-start gap-2 mb-2 w-full transition-all duration-300",x.isMe?"flex-row-reverse":"flex-row"]),onContextmenu:je(U=>kt(x),["prevent"])},[x.isMe&&i.value?.localSettings?.showSelfAvatar!==!1||!x.isMe&&i.value?.localSettings?.showOtherAvatar!==!1?(c(),f("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Ve({backgroundImage:`url(${x.isMe?i.value?.localSettings?.myAvatarOverride||De.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E":i.value?.localSettings?.theirAvatarOverride||fs(x.senderId)?.avatar||i.value?.avatar})`,backgroundSize:"cover"})},null,4)):M("",!0),t("div",{class:W(["flex flex-col max-w-[88%] text-[15px]",x.isMe?"items-end":"items-start"])},[i.value?.type==="group"&&!x.isMe?(c(),f("div",Kv,w(fs(x.senderId)?.handle||"Unknown"),1)):M("",!0),x.type==="video_call_notice"?(c(),f("div",{key:1,onClick:U=>Ll(x),class:W(["px-4 py-3 rounded-2xl cursor-pointer transition-all flex items-center gap-3 select-none shadow-sm group border active:scale-[98%]",x.isMe?"bg-black text-white border-zinc-800 hover:bg-zinc-900 rounded-br-sm":"bg-white border-zinc-100 hover:bg-zinc-50 rounded-bl-sm"])},[t("div",{class:W(["w-9 h-9 rounded-full flex items-center justify-center transition-colors",x.isMe?"bg-white/10 group-hover:bg-white/20":"bg-zinc-100 group-hover:bg-zinc-200"])},[t("span",{class:W(["material-symbols-outlined text-xl",x.callResult==="missed"?"text-red-400":x.isMe?"text-white":"text-zinc-800"])},w(x.callResult==="missed"?"call_missed":"videocam"),3)],2),t("div",Gv,[t("span",{class:W(["text-[13px] font-bold leading-tight tracking-wide",x.isMe?"text-white":"text-zinc-800"])},w(x.callResult==="missed"?"Missed Call":"Video Chat"),3),t("span",{class:W(["text-[10px] font-mono mt-0.5 transition-colors",x.isMe?"text-white/60":"text-zinc-500"])},w(x.duration?yi(x.duration):x.callResult==="missed"?"No Answer":"Ended"),3)]),x.callResult==="completed"?(c(),f("span",{key:0,class:W(["material-symbols-outlined text-lg ml-1 group-hover:translate-x-0.5 transition-all",x.isMe?"text-white/30 group-hover:text-white/60":"text-zinc-300 group-hover:text-zinc-500"])},"chevron_right",2)):M("",!0)],10,Hv)):x.type==="sticker"?(c(),f("div",{key:2,class:W(["flex flex-col",x.isMe?"items-end":"items-start"])},[x.replyTo?(c(),f("div",{key:0,class:W(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",x.isMe?"items-end":"items-start"]),onClick:je(U=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(x.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[t("span",Yv,w(x.replyTo.senderName),1),t("span",Jv,w(x.replyTo.text),1)],2)],10,qv)):M("",!0),t("div",{class:W(["rounded-2xl overflow-hidden mb-1",x.isMe?"rounded-tr-sm":"rounded-tl-sm"])},[t("img",{src:x.content||x.text,class:"max-w-[110px] max-h-[110px] object-contain block bg-white/50 backdrop-blur-sm"},null,8,Xv)],2)],2)):x.type==="spoiler"?(c(),f("div",{key:3,class:"relative overflow-hidden rounded-[24px] cursor-pointer group w-[240px] h-[320px] shadow-sm transition-all duration-300 hover:shadow-md",onClick:U=>x.isRevealed=!x.isRevealed},[d[48]||(d[48]=t("div",{class:"absolute inset-0 bokeh-effect"},null,-1)),x.isRevealed?(c(),f("div",ex,[t("p",{class:"font-serif text-[20px] leading-relaxed text-center text-black/90 break-words drop-shadow-sm italic",innerHTML:a(x.text)},null,8,tx)])):(c(),f("div",Zv,[...d[47]||(d[47]=[wt('<div class="absolute inset-0 z-0 opacity-80" data-v-aab90ae4><div class="absolute w-14 h-16 top-6 left-6 -rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-translate-y-1" data-v-aab90ae4><div class="w-full h-[80%] bg-zinc-800 flex items-center justify-center" data-v-aab90ae4><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-aab90ae4>filter_hdr</span></div></div><div class="absolute w-12 h-16 top-10 right-4 rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:translate-x-1" data-v-aab90ae4><div class="w-full h-[80%] bg-zinc-300 flex items-center justify-center" data-v-aab90ae4><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-aab90ae4>photo_camera</span></div></div><div class="absolute w-14 h-16 bottom-12 left-8 rotate-6 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-rotate-3" data-v-aab90ae4><div class="w-full h-[80%] bg-zinc-600 flex items-center justify-center" data-v-aab90ae4><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-aab90ae4>auto_awesome_motion</span></div></div></div><div class="relative z-10 flex flex-col items-center transform translate-y-2" data-v-aab90ae4><span class="font-serif italic text-black text-[18px] tracking-tight drop-shadow-sm" data-v-aab90ae4>Click to reveal</span><span class="text-[9px] text-black/50 uppercase tracking-[0.2em] font-medium mt-1" data-v-aab90ae4>Tap/Click</span></div>',2)])]))],8,Qv)):x.type==="image"?(c(),f("div",{key:4,class:W(["flex flex-col",x.isMe?"items-end":"items-start"])},[x.replyTo?(c(),f("div",{key:0,class:W(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[200px]",x.isMe?"items-end":"items-start"]),onClick:je(U=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(x.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[t("span",nx,w(x.replyTo.senderName),1),t("span",ox,w(x.replyTo.text),1)],2)],10,sx)):M("",!0),t("div",{class:"rounded-2xl overflow-hidden mb-1 cursor-zoom-in",onClick:U=>Ec(x.content)},[t("img",{src:x.content,class:"max-w-[200px] max-h-[300px] object-cover block bg-zinc-50 border border-black/5"},null,8,lx)],8,ix)],2)):x.type==="location"?(c(),f("div",{key:5,class:W(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl rounded-[24px]",[x.isMe?"bg-white rounded-br-md border border-zinc-100":"bg-white rounded-bl-md border border-zinc-100",K.value.has(x.id)?"ring-2 ring-indigo-500":""]]),onClick:()=>{try{m.window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(JSON.parse(x.content).name||x.text)}`,"_blank")}catch{}},style:{width:"260px"}},[t("div",rx,[d[49]||(d[49]=t("div",{class:"absolute inset-0",style:{"background-image":"linear-gradient(#e4e4e7 1px, transparent 1px), linear-gradient(to right, #e4e4e7 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),(c(!0),f(oe,null,ye(Gc(x.text),(U,Z)=>(c(),f("div",{key:Z,class:"absolute bg-black transition-all duration-700 hover:scale-105",style:Ve({left:U.left,top:U.top,width:U.width,height:U.height,opacity:U.opacity,borderRadius:"2px"})},null,4))),128)),d[50]||(d[50]=wt('<div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 translate-y-full group-hover:-translate-y-full transform" data-v-aab90ae4></div><div class="absolute inset-0 flex items-center justify-center pt-4" data-v-aab90ae4><div class="relative flex flex-col items-center" data-v-aab90ae4><div class="w-12 h-12 bg-black/5 rounded-full animate-ping absolute top-0 -translate-y-1.5 opacity-0 group-hover:opacity-100 transition-opacity" data-v-aab90ae4></div><div class="w-8 h-8 rounded-full bg-black shadow-lg flex items-center justify-center relative z-10 transform transition-transform group-hover:-translate-y-2 ring-2 ring-white" data-v-aab90ae4><div class="w-2.5 h-2.5 rounded-full bg-white" data-v-aab90ae4></div></div><div class="w-1 h-3 bg-black rounded-b-sm -mt-0.5 z-0 shadow-sm" data-v-aab90ae4></div><div class="w-3 h-1.5 bg-black/10 rounded-full blur-[1px] mt-0.5 group-hover:scale-75 group-hover:opacity-50 transition-all" data-v-aab90ae4></div></div></div>',2))]),t("div",cx,[t("div",dx,[t("h4",ux,w((()=>{try{return JSON.parse(x.content).name}catch{return x.text}})()),1),d[51]||(d[51]=t("div",{class:"w-5 h-5 rounded-full bg-zinc-50 flex items-center justify-center shrink-0 group-hover:bg-zinc-100 transition-colors"},[t("span",{class:"material-symbols-outlined text-zinc-400 text-[12px]"},"open_in_new")],-1))]),t("p",px,w((()=>{try{return JSON.parse(x.content).address}catch{return"Unknown Location"}})()),1),t("div",fx,[d[52]||(d[52]=t("div",{class:"flex items-center gap-1.5"},[t("div",{class:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),t("span",{class:"text-[9px] font-bold text-zinc-400 tracking-wide"},"LIVE")],-1)),t("span",vx,w((()=>{const U=(x.text||"Location")+(x.id||"")+"salt";let Z=3735928559,fe=1103547991;for(let Ye=0;Ye<U.length;Ye++){const Ae=U.charCodeAt(Ye);Z=Math.imul(Z^Ae,2654435761),fe=Math.imul(fe^Ae,1597334677)}Z=Math.imul(Z^Z>>>16,2246822507)^Math.imul(fe^fe>>>13,3266489909);const _e=(Math.abs(Z)%18e5/1e4-90).toFixed(4),dt=(Math.abs(fe)%36e5/1e4-180).toFixed(4);return`${_e}, ${dt}`})()),1)])])],10,ax)):x.type==="voice"?(c(),f(oe,{key:6},[x.replyTo?(c(),f("div",{key:0,class:W(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",x.isMe?"items-end":"items-start"]),onClick:je(U=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(x.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[t("span",bx,w(x.replyTo.senderName),1),t("span",mx,w(x.replyTo.text),1)],2)],10,xx)):M("",!0),t("div",{class:W(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-sm hover:shadow-md",[x.isMe?"bg-black text-white rounded-[18px] rounded-br-sm":"bg-white text-black rounded-[18px] rounded-bl-sm",K.value.has(x.id)?"ring-2 ring-indigo-500":""]]),onClick:U=>x.isExpanded=!x.isExpanded},[t("div",hx,[t("div",yx,[t("div",{class:W(["w-1 h-2 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.8s"}},null,2),t("div",{class:W(["w-1 h-3 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.1s"}},null,2),t("div",{class:W(["w-1 h-2 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.9s"}},null,2),t("div",{class:W(["w-1 h-4 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.3s"}},null,2),t("div",{class:W(["w-1 h-2 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.7s"}},null,2)]),t("span",wx,w(Math.min(60,Math.ceil(x.text.length/3)))+"'",1)]),x.isExpanded?(c(),f("div",{key:0,class:W(["px-3 pb-3 pt-1 animate-in slide-in-from-top-1 duration-200 border-t",x.isMe?"border-white/10":"border-black/5"])},[t("p",{class:"text-[15px] leading-relaxed break-words",innerHTML:a(x.text)},null,8,kx)],2)):M("",!0)],10,gx)],64)):x.type==="html"?(c(),Ee(cv,{key:7,content:x.content,"is-me":x.isMe},null,8,["content","is-me"])):x.type==="video_call_notice"||x.type==="text"&&x.text==="[] "?(c(),f("div",{key:8,onClick:U=>Ll(x),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[t("div",zx,[t("div",$x,[t("div",{class:W(["w-8 h-8 rounded-full flex items-center justify-center shrink-0",(x.callResult||"rejected")==="missed"||(x.callResult||"rejected")==="rejected"?"bg-zinc-100 text-zinc-500":"bg-black text-white"])},[t("span",Cx,w((x.callResult||"rejected")==="missed"?"call_missed":(x.callResult||"rejected")==="rejected"?"call_end":"videocam"),1)],2),d[53]||(d[53]=t("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Video Call",-1))]),t("span",Sx,w((x.callResult||"rejected")==="missed"?"Missed":(x.callResult||"rejected")==="rejected"?"Declined":"Ended"),1)]),t("div",Ix,[t("span",Mx,w(x.duration?yi(x.duration):(x.callResult||"rejected")==="rejected"?"Declined":"No Answer"),1)]),t("div",Ex,[t("span",null,w(new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1),x.callTranscript?(c(),f("span",Tx,[...d[54]||(d[54]=[t("span",{class:"material-symbols-outlined text-[10px]"},"description",-1),ns(" Transcript ",-1)])])):M("",!0)])],8,_x)):x.type==="payment_notice"?(c(),f("div",{key:9,onClick:U=>td(x),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[t("div",Ax,[t("div",Ox,[t("div",{class:W(["w-8 h-8 rounded-full flex items-center justify-center shrink-0",x.action==="collect"?"bg-black text-white":"bg-zinc-100 text-zinc-900"])},[t("span",Px,w(x.action==="collect"?"check":"close"),1)],2),d[55]||(d[55]=t("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Payment",-1))]),t("span",Rx,w(x.action==="collect"?"Success":"Returned"),1)]),t("div",Nx,[d[56]||(d[56]=t("span",{class:"text-xs opacity-60 mr-1"},"",-1)),t("span",Lx,w(x.amount?x.amount.toFixed(2):"0.00"),1)]),t("div",Dx,w(x.action==="collect"?`${x.senderName} accepted`:`${x.senderName} rejected transfer`),1)],8,jx)):x.type==="transfer"?(c(),f("div",{key:10,onClick:U=>ed(x),class:W(["rounded-2xl p-4 min-w-[220px] cursor-pointer transition-transform active:scale-95 border mb-1 relative overflow-hidden",[x.isMe?"bg-black text-white border-black":"bg-white text-black border-zinc-200",x.status==="rejected"?"opacity-60 grayscale":""]])},[x.status==="rejected"?(c(),f("div",Bx,[...d[57]||(d[57]=[t("div",{class:"w-full h-[1px] bg-current opacity-50 rotate-[-12deg]"},null,-1)])])):M("",!0),t("div",Ux,[t("div",Fx,[t("div",{class:W(["w-8 h-8 rounded-full flex items-center justify-center",x.isMe?"bg-zinc-800":"bg-zinc-100"])},[...d[58]||(d[58]=[t("span",{class:"material-symbols-outlined text-[18px]"},"currency_yen",-1)])],2),d[59]||(d[59]=t("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Transfer",-1))]),t("span",Wx,w(x.status==="collected"?"Accepted":x.status==="rejected"?"Returned":x.status==="pending"?"Unclaimed":"Success"),1)]),t("div",Kx,[d[60]||(d[60]=t("span",{class:"text-xs opacity-60 mr-1"},"",-1)),t("span",{class:W(["text-2xl font-serif font-bold tracking-tight",x.status==="rejected"?"line-through decoration-2":""])},w(x.amount.toFixed(2)),3)]),t("div",Hx,[t("span",Gx,w(`to ${Gl(x)}`),1),x.note?(c(),f("span",qx,' "'+w(x.note)+'" ',1)):M("",!0)])],10,Vx)):(c(),f(oe,{key:11},[r(x.text)?(c(),f("div",Yx,[t("div",Jx,[t("div",{innerHTML:a(x.text)},null,8,Xx)])])):(c(),f("div",{key:1,class:W([x.isMe?"bubble-sent bg-bubble-sent text-white":"bubble-received bg-bubble-received text-black","px-3 py-[7px] shadow-sm min-h-[34px] w-fit max-w-full"])},[x.replyTo?(c(),f("div",{key:0,class:"mb-2 mt-0.5 cursor-pointer select-none group",onClick:je(U=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",x.isMe?"border-white/50 group-hover:border-white/70":"border-zinc-300 group-hover:border-zinc-400"])},[t("span",{class:W(["text-[9px] font-bold uppercase tracking-wider opacity-60",x.isMe?"text-white":"text-zinc-500"])},w(x.replyTo.senderName),3),t("span",{class:W(["text-[12px] line-clamp-1 leading-snug opacity-90",x.isMe?"text-white":"text-zinc-700"])},w(x.replyTo.text),3)],2)],8,Qx)):M("",!0),t("p",{class:"message-text leading-snug break-words whitespace-pre-wrap",innerHTML:a(x.text)},null,8,Zx)],2))],64)),t("span",eb,w(new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)],2)],42,Wv)],2)]))],10,Iv))),128))])):M("",!0),g.value?(c(),f("div",tb,[t("div",sb,[i.value?.localSettings?.showOtherAvatar!==!1?(c(),f("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Ve({backgroundImage:`url(${i.value?.localSettings?.theirAvatarOverride||p.value.avatar||i.value?.avatar})`,backgroundSize:"cover"})},null,4)):M("",!0),d[61]||(d[61]=wt('<div class="bubble-received bg-bubble-received px-3 py-[7px] text-black w-fit" data-v-aab90ae4><div class="flex gap-1 h-[21px] items-center" data-v-aab90ae4><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-aab90ae4></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-aab90ae4></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-aab90ae4></div></div></div>',1))]),d[62]||(d[62]=t("span",{class:"text-[9px] text-zinc-300 ml-[50px] tracking-wider uppercase"},"Typing...",-1))])):M("",!0),(!i.value?.id||i.value.id!=="noir")&&He.value.length===0?(c(),f("div",nb,[...d[63]||(d[63]=[t("span",{class:"text-[12px] opacity-70"},"No messages yet",-1)])])):M("",!0),t("div",{ref_key:"messagesEndRef",ref:Si,class:"h-px w-full"},null,512)],512),B.value||j.value?(c(),f("div",{key:0,class:"absolute inset-0 z-50",onClick:Nl})):M("",!0),B.value?(c(),f("div",ob,[t("div",{class:"w-full flex justify-center pt-3 pb-1 shrink-0 bg-white",onClick:d[1]||(d[1]=x=>B.value=!1)},[...d[64]||(d[64]=[t("div",{class:"w-8 h-1 rounded-full bg-zinc-200/80"},null,-1)])]),t("div",ib,[d[67]||(d[67]=t("span",{class:"text-[10px] font-bold tracking-[0.2em] text-zinc-400 uppercase font-sans"},"Sticker Meanings",-1)),t("div",lb,[d[66]||(d[66]=t("button",{class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[t("span",{class:"material-symbols-outlined text-[18px]"},"search")],-1)),t("button",{onClick:je($i,["stop"]),class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[...d[65]||(d[65]=[t("span",{class:"material-symbols-outlined text-[18px]"},"settings",-1)])])])]),t("div",ab,[Rl.value?(c(),f("div",rb,[(c(!0),f(oe,null,ye(at(On)(Rl.value.id),x=>(c(),f("div",{key:x.id,class:"flex flex-col items-center gap-2 cursor-pointer group w-full",onClick:U=>Yc(x)},[t("div",db,[t("img",{src:x.url,class:"w-full h-full object-cover drop-shadow-sm group-hover:scale-110 transition-transform duration-300"},null,8,ub)]),t("span",pb,w(x.keyword),1)],8,cb))),128))])):(c(),f("div",fb,[d[69]||(d[69]=t("div",{class:"w-12 h-12 rounded-full bg-zinc-50 flex items-center justify-center mb-1"},[t("span",{class:"material-symbols-outlined text-2xl opacity-40"},"dashboard_customize")],-1)),t("div",vb,[d[68]||(d[68]=t("span",{class:"text-[10px] uppercase font-bold tracking-widest text-zinc-400"},"Library Empty",-1)),t("button",{onClick:je($i,["stop"]),class:"text-[10px] text-zinc-500 hover:text-black border-b border-zinc-300 hover:border-black transition-colors pb-0.5"}," Mount your packs ")])]))]),t("div",xb,[d[71]||(d[71]=t("button",{class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-50 transition-colors text-zinc-400 hover:text-black"},[t("span",{class:"material-symbols-outlined text-[20px]"},"history")],-1)),d[72]||(d[72]=t("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),t("div",bb,[(c(!0),f(oe,null,ye(qs.value,x=>(c(),f("button",{key:x.id,onClick:U=>ee.value=x.id,class:W(["shrink-0 transition-all flex items-center justify-center relative",ee.value===x.id?"opacity-100":"opacity-30 hover:opacity-100"])},[t("div",gb,[ee.value===x.id?(c(),f("span",hb)):M("",!0),x.name.toLowerCase().includes("shape")?(c(),f("span",yb,"category")):(c(),f("span",wb,w(x.name.substring(0,2)),1))])],10,mb))),128))]),d[73]||(d[73]=t("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),t("button",{onClick:je($i,["stop"]),class:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-black transition-colors rounded-lg hover:bg-zinc-50"},[...d[70]||(d[70]=[t("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])])])])):M("",!0),(c(),Ee(ft,{to:"body"},[ce.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:d[3]||(d[3]=je(x=>ce.value=!1,["self"]))},[t("div",kb,[d[75]||(d[75]=t("div",{class:"text-center space-y-2"},[t("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Pack Selection"),t("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium"},"Choose what you see in this chat")],-1)),t("div",_b,[Un.value.length===0?(c(),f("div",zb,[...d[74]||(d[74]=[t("span",{class:"material-symbols-outlined text-3xl"},"folder_off",-1),t("span",{class:"text-[10px] uppercase tracking-widest font-bold"},"Library is empty",-1)])])):M("",!0),(c(!0),f(oe,null,ye(Un.value,x=>(c(),f("button",{key:x.id,onClick:U=>qc(x.id),class:W(["w-full flex items-center justify-between p-4 rounded-2xl transition-all group border",Ci(x.id)?"bg-zinc-50 border-zinc-200":"bg-transparent border-transparent hover:bg-zinc-50"])},[t("div",Cb,[t("div",Sb,w(x.name.charAt(0)),1),t("span",Ib,w(x.name),1)]),t("div",{class:W(["w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300 border",Ci(x.id)?"bg-black border-black text-white scale-110":"bg-transparent border-zinc-300 group-hover:border-zinc-400"])},[le(t("span",Mb,"check",512),[[El,Ci(x.id)]])],2)],10,$b))),128))]),t("div",Eb,[t("button",{onClick:d[2]||(d[2]=x=>ce.value=!1),class:"py-4 rounded-full font-bold text-[11px] uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5"},"Done")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[Fn.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-6 animate-in fade-in duration-200",onClick:d[9]||(d[9]=je(x=>Fn.value=!1,["self"]))},[t("div",Tb,[t("div",jb,[t("div",Ab,[d[77]||(d[77]=t("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Location",-1)),t("button",{onClick:d[4]||(d[4]=x=>Fn.value=!1),class:"w-8 h-8 rounded-full bg-zinc-100 flex items-center justify-center hover:bg-zinc-200 transition-colors"},[...d[76]||(d[76]=[t("span",{class:"material-symbols-outlined text-[18px]"},"close",-1)])])]),t("div",Ob,[t("div",Pb,[d[78]||(d[78]=t("span",{class:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-black transition-colors"},"search",-1)),le(t("input",{"onUpdate:modelValue":d[5]||(d[5]=x=>Wn.value=x),type:"text",placeholder:"Search places (e.g. Eiffel Tower)...",class:"w-full bg-zinc-50 border border-zinc-100 rounded-xl py-3 pl-10 pr-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-black/5 focus:border-black/10 transition-all placeholder:text-zinc-400",onKeydown:d[6]||(d[6]=xs(x=>ko({name:Wn.value,address:"Custom Location",lat:0,lng:0}),["enter"]))},null,544),[[pe,Wn.value]])]),t("button",{onClick:d[7]||(d[7]=x=>ko({name:Wn.value||"My Location",address:"Custom Location",lat:0,lng:0})),class:"h-[46px] px-4 bg-black text-white rounded-xl font-bold text-xs uppercase tracking-wider hover:scale-105 active:scale-95 transition-all shadow-md"}," Send ")])]),t("div",{class:"h-24 mx-6 mt-4 rounded-2xl relative overflow-hidden shrink-0 group cursor-pointer border border-zinc-100 shadow-sm hover:shadow-md transition-all",onClick:d[8]||(d[8]=x=>ko({name:"Current Location",address:"Near coordinates",lat:0,lng:0}))},[...d[79]||(d[79]=[t("div",{class:"absolute inset-0 bg-gradient-to-r from-zinc-100 to-zinc-50 opacity-100"},null,-1),t("div",{class:"absolute inset-0 flex items-center justify-between px-5"},[t("div",{class:"flex items-center gap-4"},[t("div",{class:"w-10 h-10 rounded-full bg-black flex items-center justify-center text-white group-hover:scale-110 transition-transform shadow-lg ring-4 ring-zinc-50"},[t("span",{class:"material-symbols-outlined text-[20px]"},"my_location")]),t("div",{class:"flex flex-col relative z-10"},[t("span",{class:"text-sm font-bold text-black"},"Current Location"),t("span",{class:"text-[10px] text-zinc-500 font-medium uppercase tracking-wider"},"Tap to share")])]),t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:translate-x-1 transition-transform"},"chevron_right")],-1)])]),t("div",Rb,[d[81]||(d[81]=t("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 font-bold mb-2"},"Nearby Places",-1)),(c(),f(oe,null,ye([{name:"Central Park",address:"New York, NY",lat:40.785091,lng:-73.968285},{name:"Starbucks Reserve",address:"61 9th Ave, New York",lat:40.741895,lng:-74.004745},{name:"Empire State Building",address:"20 W 34th St",lat:40.748817,lng:-73.985428},{name:"Brooklyn Bridge",address:"New York, NY 10038",lat:40.7061,lng:-73.9969},{name:"The High Line",address:"New York, NY 10011",lat:40.748,lng:-74.0048}],x=>t("button",{key:x.name,onClick:U=>ko(x),class:"flex items-center gap-4 p-3 hover:bg-zinc-50 rounded-xl transition-colors text-left group border border-transparent hover:border-zinc-100"},[d[80]||(d[80]=t("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-400 group-hover:bg-black group-hover:text-white transition-all shrink-0"},[t("span",{class:"material-symbols-outlined text-[20px]"},"location_on")],-1)),t("div",Lb,[t("div",Db,w(x.name),1),t("div",Vb,w(x.address),1)])],8,Nb)),64))])])])):M("",!0)])),j.value?(c(),f("div",Bb,[t("div",Ub,[t("button",{onClick:Pc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[82]||(d[82]=[wt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z" data-v-aab90ae4></path><path d="M14 3v4a2 2 0 0 0 2 2h4" data-v-aab90ae4></path><path d="M8 13h0" data-v-aab90ae4></path><path d="M16 13h0" data-v-aab90ae4></path><path d="M10 16s.5 1 2 1 2-1 2-1" data-v-aab90ae4></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Sticker</span>',2)])]),t("button",{onClick:d[10]||(d[10]=x=>Pl.value.click()),class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[83]||(d[83]=[wt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><rect width="18" height="18" x="3" y="3" rx="2" ry="2" data-v-aab90ae4></rect><circle cx="9" cy="9" r="2" data-v-aab90ae4></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" data-v-aab90ae4></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Gallery</span>',2)])]),t("button",{onClick:P,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[84]||(d[84]=[wt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" data-v-aab90ae4></path><circle cx="12" cy="13" r="3" data-v-aab90ae4></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Camera</span>',2)])]),t("button",{onClick:Ms,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[85]||(d[85]=[t("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[t("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"mic")],-1),t("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Voice",-1)])]),t("button",{onClick:Rc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[86]||(d[86]=[wt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" data-v-aab90ae4></path><circle cx="12" cy="10" r="3" data-v-aab90ae4></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Location</span>',2)])]),t("button",{onClick:Wc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[87]||(d[87]=[t("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[t("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"videocam")],-1),t("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Video",-1)])]),t("button",{onClick:Xc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[88]||(d[88]=[wt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M8 3 4 7l4 4" data-v-aab90ae4></path><path d="M4 7h16" data-v-aab90ae4></path><path d="m16 21 4-4-4-4" data-v-aab90ae4></path><path d="M20 17H4" data-v-aab90ae4></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Transfer</span>',2)])]),t("button",{onClick:jc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...d[89]||(d[89]=[t("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[t("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"refresh")],-1),t("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Reroll",-1)])])])])):M("",!0),t("input",{type:"file",ref_key:"fileInput",ref:Pl,accept:"image/*",class:"hidden",onChange:Tc},null,544),(c(),Ee(ft,{to:"body"},[H.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:d[13]||(d[13]=je(x=>H.value=!1,["self"]))},[t("div",Fb,[d[90]||(d[90]=t("div",{class:"text-center"},[t("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"New Spoiler"),t("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap to reveal functionality")],-1)),le(t("textarea",{"onUpdate:modelValue":d[11]||(d[11]=x=>h.value=x),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Enter content to hide..."},null,512),[[pe,h.value]]),t("div",Wb,[t("button",{onClick:d[12]||(d[12]=x=>H.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),t("button",{onClick:me,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[ze.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:d[16]||(d[16]=je(x=>ze.value=!1,["self"]))},[t("div",Kb,[d[91]||(d[91]=t("div",{class:"text-center"},[t("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"Voice Message"),t("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap microphone to stop")],-1)),le(t("textarea",{"onUpdate:modelValue":d[14]||(d[14]=x=>Te.value=x),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Listening...",autofocus:""},null,512),[[pe,Te.value]]),t("div",Hb,[t("button",{onClick:d[15]||(d[15]=x=>ze.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),t("button",{onClick:Bn,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[N.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:d[23]||(d[23]=je(x=>N.value=!1,["self"]))},[t("div",Gb,[A.value==="input"?(c(),f("h3",qb,"Transfer")):(c(),f("h3",Yb,"Verify")),A.value==="input"?(c(),f("div",Jb,[we.value.length>0?(c(),f("div",Xb,[d[94]||(d[94]=t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-2"},"Recipient",-1)),t("div",Qb,[le(t("select",{"onUpdate:modelValue":d[17]||(d[17]=x=>Y.value=x),class:"w-full bg-zinc-50 border-none rounded-xl px-4 py-3 text-sm appearance-none focus:ring-1 focus:ring-black outline-none font-medium text-center"},[d[92]||(d[92]=t("option",{value:"",disabled:""},"Select Member",-1)),(c(!0),f(oe,null,ye(we.value,x=>(c(),f("option",{key:x.id,value:x.id},w(x.name),9,Zb))),128))],512),[[Nn,Y.value]]),d[93]||(d[93]=t("span",{class:"material-symbols-outlined absolute right-3 top-3 text-zinc-400 pointer-events-none"},"expand_more",-1))])])):(c(),f("p",e1,"To "+w(ne.value.name),1)),t("div",t1,[le(t("input",{"onUpdate:modelValue":d[18]||(d[18]=x=>S.value=x),type:"number",placeholder:" 0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors bg-transparent"},null,512),[[pe,S.value]]),le(t("input",{"onUpdate:modelValue":d[19]||(d[19]=x=>T.value=x),type:"text",placeholder:"Add a note...",class:"w-full text-center text-sm bg-zinc-50 rounded-xl py-3 focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[pe,T.value]])]),t("div",s1,w(R.value),1),t("div",n1,[t("button",{onClick:d[20]||(d[20]=x=>N.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:Qc,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Next")])])):(c(),f("div",o1,[d[95]||(d[95]=t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-6"},"Enter Payment Password",-1)),t("div",i1,[le(t("input",{"onUpdate:modelValue":d[21]||(d[21]=x=>E.value=x),type:"password",maxlength:"6",autofocus:"",class:"w-full bg-zinc-50 rounded-xl px-4 py-4 text-center text-2xl tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[pe,E.value]])]),t("div",l1,w(R.value),1),t("div",a1,[t("button",{onClick:d[22]||(d[22]=x=>A.value="input"),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Back"),t("button",{onClick:Zc,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])]))])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[L.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:d[25]||(d[25]=je(x=>L.value=!1,["self"]))},[t("div",r1,[t("div",{class:W(["h-32 flex items-center justify-center",O.value?.status==="rejected"?"bg-zinc-100":"bg-black"])},[t("span",{class:W(["material-symbols-outlined text-6xl",O.value?.status==="rejected"?"text-zinc-400":"text-white/20"])},w(O.value?.status==="rejected"?"remove_circle_outline":"check_circle"),3)],2),t("div",c1,[d[98]||(d[98]=t("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg mb-4"},[t("span",{class:"material-symbols-outlined text-4xl text-black"},"currency_yen")],-1)),t("h3",d1," "+w(O.value?.amount.toFixed(2)),1),t("p",u1,w(O.value?.status==="pending"?"Waiting for collection":O.value?.status==="collected"?"Transfer Successful":O.value?.status==="rejected"?"Transfer Returned":"Transfer"),1),t("div",p1,[t("div",f1,[d[96]||(d[96]=t("span",{class:"text-zinc-400"},"Time",-1)),t("span",v1,w(new Date(O.value?.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),t("div",x1,[t("span",b1,w(O.value?.isMe?"To":"From"),1),t("span",m1,w(sd(O.value)),1)]),O.value?.note?(c(),f("div",g1,[d[97]||(d[97]=t("span",{class:"text-zinc-400"},"Note",-1)),t("span",h1,w(O.value?.note),1)])):M("",!0)]),!O.value?.isMe&&O.value?.status==="pending"&&ad(O.value)?(c(),f("div",y1,[t("button",{onClick:od,class:"w-full py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Reject "),t("button",{onClick:nd,class:"w-full py-3.5 rounded-full bg-black text-white font-bold text-xs uppercase tracking-widest hover:scale-105 transition-transform shadow-lg"}," Collect ")])):(c(),f("button",{key:1,onClick:d[24]||(d[24]=x=>L.value=!1),class:"mt-8 w-full py-3 rounded-full bg-zinc-100 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Close "))])])])):M("",!0)])),wn.value?(c(),f("div",{key:3,class:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center cursor-zoom-out animate-in fade-in duration-200",onClick:d[26]||(d[26]=x=>wn.value=!1)},[t("img",{src:wo.value,class:"max-w-full max-h-full object-contain shadow-2xl transition-transform duration-300 scale-100"},null,8,w1)])):M("",!0),Ze(xv,{isOpen:ae.value,"onUpdate:isOpen":d[27]||(d[27]=x=>ae.value=x),modelValue:ve.value,"onUpdate:modelValue":d[28]||(d[28]=x=>ve.value=x),title:ue.value,subtitle:F.value,onSave:ct},null,8,["isOpen","modelValue","title","subtitle"]),(c(),Ee(ft,{to:"body"},[I.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[50] bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:d[29]||(d[29]=x=>{I.value=!1,y.value=null})})):M("",!0),I.value?(c(),f("div",k1,[t("div",_1,[d[106]||(d[106]=t("div",{class:"w-full flex justify-center pt-3 pb-2"},[t("div",{class:"w-10 h-1 rounded-full bg-zinc-200"})],-1)),t("div",z1,[y.value?.type==="text"||y.value?.text?(c(),f("button",{key:0,onClick:d[30]||(d[30]=x=>q(y.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...d[99]||(d[99]=[t("span",{class:"text-[15px] font-medium text-black"},"Copy",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"content_copy",-1)])])):M("",!0),t("button",{onClick:d[31]||(d[31]=x=>ot(y.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...d[100]||(d[100]=[t("span",{class:"text-[15px] font-medium text-black"},"Edit",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"edit",-1)])]),Ot.value&&!y.value?.isMe&&y.value===He.value[He.value.length-1]?(c(),f("button",{key:1,onClick:Mt,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...d[101]||(d[101]=[t("span",{class:"text-[15px] font-medium text-black"},"Edit Full Response",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"history_edu",-1)])])):M("",!0),y.value?.isMe&&!y.value?.isRecalled&&Date.now()-y.value.timestamp<12e4?(c(),f("button",{key:2,onClick:X,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...d[102]||(d[102]=[t("span",{class:"text-[15px] font-medium text-black"},"Recall",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete_sweep",-1)])])):M("",!0),t("button",{onClick:At,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...d[103]||(d[103]=[t("span",{class:"text-[15px] font-medium text-black"},"Reply",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"reply",-1)])]),t("button",{onClick:_,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...d[104]||(d[104]=[t("span",{class:"text-[15px] font-medium text-black"},"Select",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"check_circle",-1)])]),t("button",{onClick:J,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors"},[...d[105]||(d[105]=[t("span",{class:"text-[15px] font-medium text-black"},"Delete",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete",-1)])])]),t("div",$1,[t("button",{onClick:d[32]||(d[32]=x=>{I.value=!1,y.value=null}),class:"w-full py-2 text-center text-[13px] font-bold uppercase tracking-widest text-zinc-400 hover:text-black transition-colors"}," Cancel ")])])])):M("",!0)])),se.value?(c(),f("div",C1,[t("div",S1,[t("span",I1,w(K.value.size)+" SELECTED ",1),t("div",M1,[t("button",{onClick:re,class:"flex items-center gap-2 text-white hover:text-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed group",disabled:K.value.size===0},[...d[107]||(d[107]=[t("span",{class:"material-symbols-outlined text-[20px] group-hover:scale-110 transition-transform"},"delete",-1),t("span",{class:"font-bold text-xs uppercase tracking-widest hidden sm:block"},"Delete",-1)])],8,E1),d[109]||(d[109]=t("div",{class:"w-px h-4 bg-white/20"},null,-1)),t("button",{onClick:$,class:"flex items-center justify-center text-white/50 hover:text-white transition-colors"},[...d[108]||(d[108]=[t("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):M("",!0),ke.value?(c(),f("div",{key:5,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex items-center justify-center animate-in fade-in duration-200",onClick:d[34]||(d[34]=je(x=>ke.value=!1,["self"]))},[t("div",T1,[t("div",j1,[d[111]||(d[111]=t("h3",{class:"text-lg font-bold"},"",-1)),t("button",{onClick:d[33]||(d[33]=x=>ke.value=!1),class:"p-1 rounded-full hover:bg-zinc-100"},[...d[110]||(d[110]=[t("span",{class:"material-symbols-outlined text-zinc-400"},"close",-1)])])]),t("div",A1,[(c(!0),f(oe,null,ye(i.value?.members||[],x=>(c(),f("button",{key:x,onClick:U=>Pt(x),class:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-50 transition-colors"},[t("div",{class:"w-10 h-10 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${at(k).contacts.find(U=>U.id===x)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("span",P1,w(at(k).contacts.find(U=>U.id===x)?.handle||at(k).contacts.find(U=>U.id===x)?.name||"Unknown"),1)],8,O1))),128))])])])):M("",!0),G.value?(c(),f("div",{key:6,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex flex-col items-center justify-center animate-in fade-in duration-200",onClick:je(ps,["self"])},[t("div",R1,[t("button",{onClick:d[35]||(d[35]=x=>ge.value=ge.value==="current"?"favorites":"current"),class:"p-2.5 rounded-full bg-white/90 backdrop-blur shadow-lg transition-all hover:bg-white",title:ge.value==="current"?"":""},[t("span",L1,w(ge.value==="current"?"bookmark":"schedule"),1)],8,N1),t("button",{onClick:ps,class:"p-2.5 rounded-full bg-white/90 backdrop-blur shadow-lg transition-all hover:bg-white"},[...d[112]||(d[112]=[t("span",{class:"material-symbols-outlined text-zinc-600 text-[20px]"},"close",-1)])])]),ge.value==="current"?(c(),f(oe,{key:0},[qe.value.length===0?(c(),f("div",D1,[t("div",V1,[t("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${Yt(ie.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("div",B1,[t("h3",U1,w(Yt(ie.value)?.handle||Yt(ie.value)?.name||"Unknown"),1),d[113]||(d[113]=t("p",{class:"text-xs text-zinc-400"},"",-1))])]),d[114]||(d[114]=t("div",{class:"text-center py-8 text-zinc-400"},[t("svg",{class:"w-10 h-10 mx-auto mb-2 text-zinc-300",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})]),t("p",null,"")],-1))])):M("",!0),(c(!0),f(oe,null,ye([...qe.value].reverse(),(x,U)=>(c(),f(oe,{key:x.id},[Jt(x.text||x.content)?(c(),f("div",F1,[t("button",{onClick:Z=>yt(x.id),class:W(["absolute top-2 right-2 p-1.5 rounded-full transition-all z-10 bg-black/20 backdrop-blur-sm",x.isFavorited?"text-zinc-400":"text-white/50 hover:text-white/80"])},[(c(),f("svg",{class:"w-4 h-4",fill:x.isFavorited?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...d[115]||(d[115]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1)])],8,K1))],10,W1),t("div",{innerHTML:gt(x.text||x.content)},null,8,H1)])):(c(),f("div",G1,[t("div",q1,[t("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${Yt(ie.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("div",Y1,[t("h3",J1,w(Yt(ie.value)?.handle||Yt(ie.value)?.name||"Unknown"),1),d[116]||(d[116]=t("p",{class:"text-xs text-zinc-400"},"",-1))]),t("button",{onClick:Z=>yt(x.id),class:W(["p-2 rounded-full transition-all",x.isFavorited?"text-zinc-500":"text-zinc-300 hover:text-zinc-500"])},[(c(),f("svg",{class:"w-5 h-5",fill:x.isFavorited?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...d[117]||(d[117]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1)])],8,Q1))],10,X1)]),t("div",Z1,w(x.text||x.content),1),t("div",em,w(new Date(x.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]))],64))),128))],64)):(c(),f("div",tm,[t("div",sm,[t("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${Yt(ie.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("div",nm,[t("h3",om,w(Yt(ie.value)?.handle||Yt(ie.value)?.name||"Unknown"),1),d[118]||(d[118]=t("p",{class:"text-xs text-zinc-400"},"",-1))])]),t("div",im,[qe.value.length===0?(c(),f("div",lm,[...d[119]||(d[119]=[t("svg",{class:"w-10 h-10 mx-auto mb-2 text-zinc-300",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1),t("p",null,"",-1)])])):M("",!0),(c(!0),f(oe,null,ye([...qe.value].reverse(),(x,U)=>(c(),f("div",{key:x.id,class:"p-4 bg-gradient-to-r from-zinc-50 to-zinc-100/50 rounded-2xl relative"},[t("button",{onClick:Z=>yt(x.id),class:"absolute top-3 right-3 p-1.5 rounded-full transition-all text-zinc-400 hover:text-zinc-600"},[...d[120]||(d[120]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],8,am),t("div",rm,w(new Date(x.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1),t("div",{class:"text-[14px] text-zinc-700 leading-relaxed pr-8",innerHTML:gt(x.text||x.content)},null,8,cm)]))),128))])]))])):(c(),f("footer",dm,[z.value?(c(),f("div",um,[t("div",pm,[d[121]||(d[121]=t("span",{class:"material-symbols-outlined text-zinc-400 text-lg"},"reply",-1)),t("div",fm,[t("span",vm,"Replying to "+w(Et(z.value)),1),t("span",xm,w(z.value.text||(z.value.type==="image"?"[Image]":"[Content]")),1)])]),t("button",{onClick:Oc,class:"p-1 rounded-full hover:bg-zinc-200 text-zinc-400 hover:text-black transition-colors"},[...d[122]||(d[122]=[t("span",{class:"material-symbols-outlined text-base"},"close",-1)])])])):M("",!0),t("div",bm,[t("button",{onClick:je(Ac,["stop"]),class:W(["flex items-center justify-center size-10 rounded-full transition-all duration-200 hover:bg-zinc-50 text-zinc-400 hover:text-black",j.value?"bg-zinc-100 text-black":""])},[...d[123]||(d[123]=[t("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])],2),t("div",mm,[le(t("textarea",{"onUpdate:modelValue":d[36]||(d[36]=x=>v.value=x),onKeydown:d[37]||(d[37]=xs(je(x=>Hl(!1),["exact","prevent"]),["enter"])),onFocus:Nl,class:"w-full border-none bg-zinc-100/60 rounded-[26px] px-5 py-3 pr-12 text-[15px] placeholder-zinc-400 focus:ring-0 focus:bg-zinc-100 transition-colors resize-none h-[44px] leading-snug",placeholder:"Message..."},null,544),[[pe,v.value]]),t("button",{onClick:Dt,class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center justify-center size-7 rounded-full transition-all duration-200 hover:bg-zinc-200/50 text-zinc-300 hover:text-zinc-500",title:""},[...d[124]||(d[124]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])])]),t("button",{onClick:id},[...d[125]||(d[125]=[t("svg",{class:"w-6 h-6 text-black relative right-0.5 bottom-0.5",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})],-1)])])])]))]),(c(),Ee(ft,{to:"body"},[hi.value&&Ys.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(Dl,["self"])},[t("div",gm,[t("div",hm,[t("div",null,[d[126]||(d[126]=t("h3",{class:"font-bold text-lg text-black"},"Call Transcript",-1)),t("p",ym,w(new Date(Ys.value.timestamp).toLocaleString("zh-CN",{hour:"2-digit",minute:"2-digit"}))+"  "+w(yi(Ys.value.duration)),1)]),t("button",{onClick:Dl,class:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center hover:bg-zinc-300 transition-colors"},[...d[127]||(d[127]=[t("span",{class:"material-symbols-outlined text-black text-sm"},"close",-1)])])]),t("div",wm,[Wl(Ys.value.callTranscript)?(c(!0),f(oe,{key:0},ye(Wl(Ys.value.callTranscript),(x,U)=>(c(),f("div",{key:U},[x.isAction?(c(),f("div",km,[t("span",_m,w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),1)])):(c(),f("div",{key:1,class:W(["flex w-full flex-col",x.isMe?"items-end":"items-start"])},[x.isMe?M("",!0):(c(),f("div",zm,w((()=>{if(x.senderId&&x.senderId!=="ai"){const fe=fs(x.senderId);if(fe?.handle)return fe.handle;if(fe?.name)return fe.name}const Z=x.text.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];if(Z){const fe=at(k).contacts.find(_e=>_e.name===Z||_e.handle===Z);if(fe?.handle)return fe.handle}return Z||"AI"})()),1)),t("div",{class:W(["px-4 py-2.5 max-w-[85%] text-[14px] leading-snug shadow-sm border relative",x.isMe?"bg-black text-white rounded-[18px] rounded-br-sm border-transparent":"bg-zinc-100 text-zinc-800 rounded-[18px] rounded-bl-sm border-zinc-100"])},w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),3)],2))]))),128)):(c(!0),f(oe,{key:1},ye((Ys.value.callTranscript||"").split(`
`),(x,U)=>(c(),f(oe,{key:U},[x.trim()?(c(),f("div",$m,[x.startsWith("[]")?(c(),f("span",Cm,w(x.replace(/^\[\]/,"").trim()),1)):x.startsWith("[]")?(c(),f("div",Sm,w(x.replace(/^\[\]/,"").trim()),1)):(c(),f("span",Im,w(x),1))])):M("",!0)],64))),128))])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[Vl.value?(c(),f("div",{key:0,class:W(["fixed inset-0 z-[9999] flex flex-col animate-in fade-in duration-500",kn.value?"bg-transparent pointer-events-none":"bg-black pointer-events-auto"])},[kn.value?M("",!0):(c(),f("div",{key:0,class:W(["absolute inset-0 overflow-hidden pointer-events-none",(i.value?.type==="group","bg-zinc-900")])},[i.value?.type==="group"?(c(),f("div",{key:0,class:"absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-110",style:Ve({backgroundImage:`url(${De.value?.avatar||"https://via.placeholder.com/400"})`})},[...d[128]||(d[128]=[t("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-3xl"},null,-1)])],4)):(c(),f("div",{key:1,class:"absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-105",style:Ve({backgroundImage:`url(${Xt.value==="incoming"?cn.value?.avatar||i.value?.avatar:i.value?.localSettings?.videoCallUseImage&&i.value?.localSettings?.videoCallCharImage||i.value?.avatar||p.value.avatar})`})},[...d[129]||(d[129]=[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-3xl"},null,-1)])],4))],2)),Xt.value==="dialing"?(c(),f("div",Mm,[t("div",Em,[d[130]||(d[130]=t("div",{class:"absolute inset-0 border-4 border-zinc-200 rounded-full animate-[ping_2s_infinite] opacity-50"},null,-1)),t("img",{src:p.value.avatar,class:"w-full h-full rounded-full object-cover relative z-10"},null,8,Tm)]),t("h2",jm,w(p.value.handle),1),d[132]||(d[132]=t("p",{class:"text-zinc-400 text-xs uppercase tracking-[0.2em] animate-pulse"},"Calling...",-1)),t("button",{onClick:d[38]||(d[38]=x=>Gn(!1)),class:"mt-16 w-16 h-16 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg hover:scale-105 active:scale-95"},[...d[131]||(d[131]=[t("span",{class:"material-symbols-outlined text-3xl"},"call_end",-1)])])])):Xt.value==="incoming"?(c(),f("div",Am,[t("div",Om,[d[133]||(d[133]=t("div",{class:"absolute inset-0 border-4 border-green-400 rounded-full animate-ping opacity-30"},null,-1)),t("img",{src:cn.value?.avatar||i.value?.avatar,class:"w-full h-full rounded-full object-cover relative z-10"},null,8,Pm)]),t("h2",Rm,w(cn.value?.handle||cn.value?.name||"Incoming Call"),1),d[136]||(d[136]=t("p",{class:"text-zinc-500 text-sm uppercase tracking-[0.2em] animate-pulse"},"Inviting to Video Call...",-1)),t("div",{class:"flex items-center gap-16 mt-20"},[t("button",{onClick:Fc,class:"flex flex-col items-center gap-3 group"},[...d[134]||(d[134]=[t("div",{class:"w-20 h-20 rounded-full bg-red-500/90 flex items-center justify-center transition-all group-hover:bg-red-600 group-hover:scale-110 shadow-xl shadow-red-500/30"},[t("span",{class:"material-symbols-outlined text-4xl text-white"},"call_end")],-1),t("span",{class:"text-xs text-zinc-400 tracking-widest uppercase group-hover:text-zinc-600 transition-colors"},"Decline",-1)])]),t("button",{onClick:Uc,class:"flex flex-col items-center gap-3 group"},[...d[135]||(d[135]=[t("div",{class:"w-20 h-20 rounded-full bg-green-500/90 flex items-center justify-center transition-all group-hover:bg-green-500 group-hover:scale-110 shadow-xl shadow-green-500/30 animate-pulse-fast"},[t("span",{class:"material-symbols-outlined text-4xl text-white"},"videocam")],-1),t("span",{class:"text-xs text-zinc-400 tracking-widest uppercase group-hover:text-zinc-600 transition-colors"},"Accept",-1)])])])])):Xt.value==="active"&&!kn.value?(c(),f("div",Nm,[i.value?.type==="group"||i.value?.isGroup?(c(),f(oe,{key:0},[t("div",Lm,[t("button",{onClick:_i,class:"w-12 h-12 rounded-full flex items-center justify-center bg-black/20 text-white backdrop-blur-md hover:bg-black/30 transition-colors shrink-0 z-20 active:scale-95"},[...d[137]||(d[137]=[t("span",{class:"material-symbols-outlined text-2xl"},"expand_more",-1)])]),t("div",Dm,[t("div",Vm,[d[138]||(d[138]=t("div",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1)),t("span",Bm,w(_n.value),1)])]),d[139]||(d[139]=t("div",{class:"w-12"},null,-1))]),t("div",Um,[t("div",Fm,[t("img",{src:i.value?.localSettings?.videoCallUseImage&&i.value?.localSettings?.videoCallUserImage||De.value?.avatar||"https://via.placeholder.com/150",class:"w-full h-full object-cover"},null,8,Wm)]),(c(!0),f(oe,null,ye(i.value.members||[],x=>(c(),f("div",{key:x,class:"relative w-10 h-10 bg-zinc-800 rounded-lg overflow-hidden ring-1 ring-white/20 shadow-md shrink-0"},[t("img",{src:at(k).contacts.find(U=>U.id===x)?.avatar||"https://via.placeholder.com/150",class:"w-full h-full object-cover"},null,8,Km)]))),128))])],64)):(c(),f("div",Hm,[t("button",{onClick:_i,class:"w-12 h-12 rounded-full flex items-center justify-center transition-all bg-white/10 text-white hover:bg-white/20 active:scale-95 backdrop-blur-md"},[...d[140]||(d[140]=[t("span",{class:"material-symbols-outlined text-2xl"},"expand_more",-1)])]),t("div",Gm,[t("h3",qm,w(p.value.handle),1),t("div",Ym,[d[141]||(d[141]=t("div",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1)),t("span",Jm,w(_n.value),1)])]),t("div",Xm,[t("img",{src:i.value?.localSettings?.videoCallUseImage&&i.value?.localSettings?.videoCallUserImage||De.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover"},null,8,Qm)])])),t("div",Zm,[t("div",eg,[Ze(Mp,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0"},{default:Cs(()=>[(c(!0),f(oe,null,ye(_t.value,x=>(c(),f("div",{key:x.id,class:"flex flex-col gap-1 mb-2"},[x.isAction?(c(),f("div",tg,[t("span",sg,w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),1)])):(c(),f("div",{key:1,class:W(["flex flex-col max-w-[85%] text-[15px] leading-snug",x.isMe?"self-end items-end":"self-start items-start"])},[!x.isMe&&(i.value?.type==="group"||i.value?.isGroup)?(c(),f("div",{key:0,class:W(["text-[10px] mb-1 ml-3 font-bold",i.value?.type==="group"||i.value?.isGroup?"text-white/80":"text-white/60 drop-shadow-md"])},w((()=>{if(x.senderId&&x.senderId!=="ai"){const Z=fs(x.senderId);if(Z?.handle)return Z.handle;if(Z?.name)return Z.name}return x.text.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2]||p.value.handle})()),3)):M("",!0),t("div",{class:W(["px-4 py-2.5 shadow-sm border relative backdrop-blur-md cursor-pointer",x.isMe?"bg-white/10 text-white rounded-[18px] rounded-br-sm border-white/10":"bg-black/40 text-white rounded-[18px] rounded-bl-sm border-white/5"]),onContextmenu:je(U=>Lc(x),["prevent"])},w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),43,ng)],2))]))),128))]),_:1})])]),t("div",og,[t("div",ig,[t("div",lg,[le(t("input",{"onUpdate:modelValue":d[39]||(d[39]=x=>Kn.value=x),onKeydown:xs(je(Fl,["prevent"]),["enter"]),type:"text",placeholder:"Type designed to speak...",class:"relative w-full rounded-full h-12 px-6 focus:outline-none transition-all text-sm bg-black/40 border border-white/20 text-white placeholder:text-white/30 focus:border-white/50 backdrop-blur-md"},null,40,ag),[[pe,Kn.value]])]),t("button",{onClick:Kc,class:"w-12 h-12 rounded-full flex items-center justify-center hover:scale-105 active:scale-95 transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-md"},[...d[142]||(d[142]=[t("span",{class:"material-symbols-outlined"},"refresh",-1)])]),t("button",{onClick:Fl,class:"w-12 h-12 rounded-full flex items-center justify-center hover:scale-105 active:scale-95 transition-all bg-white text-black shadow-[0_0_20px_rgba(255,255,255,0.3)]"},[...d[143]||(d[143]=[t("span",{class:"material-symbols-outlined"},"arrow_upward",-1)])])]),t("div",rg,[d[145]||(d[145]=t("button",{class:"flex flex-col items-center gap-1 group"},[t("div",{class:"w-14 h-14 rounded-full flex items-center justify-center transition-all bg-white/10 backdrop-blur-md group-hover:bg-white/20"},[t("span",{class:"material-symbols-outlined text-2xl text-white"},"mic")]),t("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"Mute")],-1)),t("button",{onClick:d[40]||(d[40]=x=>Gn(!1)),class:"flex flex-col items-center gap-1 group"},[...d[144]||(d[144]=[t("div",{class:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center group-hover:bg-red-600 group-hover:scale-105 transition-all shadow-xl shadow-red-500/20"},[t("span",{class:"material-symbols-outlined text-white text-3xl"},"call_end")],-1),t("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"End",-1)])]),d[146]||(d[146]=t("button",{class:"flex flex-col items-center gap-1 group"},[t("div",{class:"w-14 h-14 rounded-full flex items-center justify-center transition-all bg-white/10 backdrop-blur-md group-hover:bg-white/20"},[t("span",{class:"material-symbols-outlined text-2xl text-white"},"videocam")]),t("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"Cam")],-1))])])])):kn.value?(c(),f("div",{key:4,onMousedown:Bl,onTouchstart:Bl,onClick:Nc,class:"fixed z-[9999] w-28 h-40 bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden border border-white/20 cursor-move transition-shadow hover:scale-105 active:scale-95 animate-in zoom-in duration-300 ring-2 ring-black/50 pointer-events-auto",style:Ve({left:Es.value.x+"px",top:Es.value.y+"px"})},[t("img",{src:i.value?.type==="group"?De.value?.avatar:cn.value?.avatar||i.value?.avatar||p.value.avatar,class:"w-full h-full object-cover opacity-80"},null,8,cg),t("div",dg,[d[147]||(d[147]=t("div",{class:"flex justify-end"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.8)]"})],-1)),t("div",ug,[t("span",pg,w(_n.value),1)])])],36)):Xt.value==="ended"?(c(),f("div",fg,[d[150]||(d[150]=t("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-xl"},null,-1)),t("div",vg,[d[148]||(d[148]=t("div",{class:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 backdrop-blur-md shadow-2xl ring-4 ring-white/5"},[t("span",{class:"material-symbols-outlined text-white/70 text-5xl"},"call_end")],-1)),d[149]||(d[149]=t("h2",{class:"text-white text-2xl font-bold tracking-wide mb-2"},"Call Ended",-1)),t("p",xg,w(_n.value),1),t("button",{onClick:d[41]||(d[41]=x=>Gn(!0)),class:"mt-12 px-8 py-3 bg-white text-black rounded-full font-bold text-sm uppercase tracking-widest hover:bg-zinc-100 transition-all hover:scale-105 active:scale-95 shadow-xl"}," Return ")])])):M("",!0)],2)):M("",!0),zn.value?(c(),f("div",bg,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:d[42]||(d[42]=x=>zn.value=!1)}),t("div",mg,[t("div",gg,[t("p",hg,w(Ts.value?.text),1)]),t("button",{onClick:Vc,class:"w-full py-4 bg-transparent hover:bg-white/5 flex items-center justify-center gap-2 border-b border-white/5 transition-colors"},[...d[151]||(d[151]=[t("span",{class:"material-symbols-outlined text-white/80"},"edit",-1),t("span",{class:"text-sm font-bold text-white uppercase tracking-widest"},"Edit",-1)])]),t("button",{onClick:Dc,class:"w-full py-4 bg-transparent hover:bg-red-500/10 flex items-center justify-center gap-2 transition-colors"},[...d[152]||(d[152]=[t("span",{class:"material-symbols-outlined text-red-400"},"delete",-1),t("span",{class:"text-sm font-bold text-red-400 uppercase tracking-widest"},"Delete",-1)])]),t("div",yg,[t("button",{onClick:d[43]||(d[43]=x=>zn.value=!1),class:"w-full py-3 text-xs text-white/30 uppercase tracking-widest"},"Cancel")])])])):M("",!0)]))],64))}},kg=rt(wg,[["__scopeId","data-v-aab90ae4"]]),_g={class:"h-full flex flex-col bg-white text-black font-sans"},zg={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl"},$g={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Cg={class:"flex-1"},Sg={class:"flex items-center gap-2"},Ig={class:"flex-1 overflow-y-auto w-full pb-[calc(2rem+env(safe-area-inset-bottom))]"},Mg={class:"px-5 pt-2 pb-6"},Eg={class:"flex justify-between items-start"},Tg={class:"flex-1 pr-4 min-w-0"},jg={class:"text-[24px] font-bold leading-tight truncate"},Ag={class:"mt-4 text-[14px] leading-relaxed whitespace-pre-wrap"},Og={class:"mt-3 text-[14px] text-zinc-400 font-normal"},Pg={class:"shrink-0"},Rg={key:0,class:"flex items-center justify-center h-full w-full material-symbols-outlined text-zinc-300 text-[32px]"},Ng={class:"flex gap-2 mt-6"},Lg={class:"flex border-b border-zinc-100 sticky top-0 bg-white z-10"},Dg={key:0,class:"space-y-0"},Vg={class:"relative px-5 py-6 border-b border-gray-50"},Bg={class:"flex items-start gap-4 mb-3 relative z-10"},Ug={class:"flex flex-col flex-1 min-w-0"},Fg={class:"flex items-center justify-between"},Wg={class:"text-[14px] font-bold text-black truncate"},Kg={class:"relative px-5 py-6 border-b border-gray-50"},Hg={class:"flex items-start gap-4 mb-3 relative z-10"},Gg={class:"flex flex-col flex-1 min-w-0"},qg={class:"flex items-center justify-between"},Yg={class:"text-[14px] font-bold text-black truncate"},Jg={key:1,class:"p-12 text-center text-zinc-400 text-sm font-light"},Xg={key:0,class:"fixed top-0 right-0 h-full w-[300px] z-[100] bg-white shadow-2xl flex flex-col border-l border-gray-50"},Qg={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 border-b border-gray-100"},Zg={class:"flex-1 overflow-y-auto"},eh={__name:"Profile",props:{contactId:{type:String,default:null}},emits:["back","navigate"],setup(e,{emit:s}){const n=e,o=s,i=C(!1),l=C("threads"),a=be(()=>{if(n.contactId&&n.contactId!==k.activePersonaId){const u=k.contacts.find(g=>g.id===n.contactId);if(u)return u;const v=k.personas.find(g=>g.id===n.contactId);if(v)return v}return rl.value}),r=be(()=>!(n.contactId&&n.contactId!==k.activePersonaId&&!k.personas.find(u=>u.id===n.contactId))),p=u=>{i.value=!1,o("navigate",u)},b=be(()=>a.value.stats?.followers||"100");return(u,v)=>(c(),f("div",_g,[t("header",zg,[t("div",$g,[t("div",Cg,[t("button",{onClick:v[0]||(v[0]=g=>u.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...v[14]||(v[14]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),t("div",Sg,[v[17]||(v[17]=wt('<button class="header-btn" data-v-3e48d63d><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3e48d63d><rect x="2" y="2" width="20" height="20" rx="5" ry="5" data-v-3e48d63d></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" data-v-3e48d63d></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5" data-v-3e48d63d></line></svg></button>',1)),r.value?M("",!0):(c(),f("button",{key:0,onClick:v[1]||(v[1]=g=>u.$emit("navigate","char-memory",{id:e.contactId||a.value.id})),class:"header-btn"},[...v[15]||(v[15]=[t("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),t("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)])])),t("button",{onClick:v[2]||(v[2]=g=>i.value=!0),class:"header-btn"},[...v[16]||(v[16]=[t("span",{class:"material-symbols-outlined text-[26px]"},"more_horiz",-1)])])])])]),t("main",Ig,[t("section",Mg,[t("div",Eg,[t("div",Tg,[t("h1",jg,w(a.value.handle),1),t("div",Ag,w(a.value.bio||""),1),t("div",Og,w(b.value)+" ",1)]),t("div",Pg,[t("div",{class:"size-[80px] rounded-full overflow-hidden border border-gray-100 bg-zinc-50 editorial-image",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[a.value.avatar?M("",!0):(c(),f("span",Rg,"person"))],4)])]),t("div",Ng,[r.value?(c(),f(oe,{key:1},[v[20]||(v[20]=t("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1)),v[21]||(v[21]=t("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64)):(c(),f(oe,{key:0},[v[18]||(v[18]=t("button",{class:"flex-1 py-1.5 bg-black text-white text-[14px] font-bold rounded-[8px] border border-black transition-opacity hover:opacity-90"},"  ",-1)),v[19]||(v[19]=t("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64))])]),t("nav",Lg,[t("button",{onClick:v[3]||(v[3]=g=>l.value="threads"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",l.value==="threads"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),t("button",{onClick:v[4]||(v[4]=g=>l.value="replies"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",l.value==="replies"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),t("button",{onClick:v[5]||(v[5]=g=>l.value="media"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",l.value==="media"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),t("button",{onClick:v[6]||(v[6]=g=>l.value="reposts"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",l.value==="reposts"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2)]),l.value==="threads"?(c(),f("div",Dg,[t("article",Vg,[v[24]||(v[24]=t("div",{class:"absolute left-[36px] top-[60px] bottom-[-10px] w-[1px] bg-zinc-100"},null,-1)),t("div",Bg,[t("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover"})},null,4),t("div",Ug,[t("div",Fg,[t("span",Wg,w(a.value.handle),1),v[22]||(v[22]=t("div",{class:"flex items-center gap-3"},[t("span",{class:"text-[13px] text-zinc-400 font-light"},"4h"),t("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),v[23]||(v[23]=t("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Just deployed the new changes. Feeling nervous but excited. code-life ",-1))])]),v[25]||(v[25]=wt('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-3e48d63d><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>42</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>5</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><polyline points="17 1 21 5 17 9" data-v-3e48d63d></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-3e48d63d></path><polyline points="7 23 3 19 7 15" data-v-3e48d63d></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>2</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-3e48d63d></path></svg></button></div>',1))]),t("article",Kg,[t("div",Hg,[t("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover"})},null,4),t("div",Gg,[t("div",qg,[t("span",Yg,w(a.value.handle),1),v[26]||(v[26]=t("div",{class:"flex items-center gap-3"},[t("span",{class:"text-[13px] text-zinc-400 font-light"},"1d"),t("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),v[27]||(v[27]=t("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Weather is getting colder. Time for coffee and hoodies. ",-1))])]),v[28]||(v[28]=wt('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-3e48d63d><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>108</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>14</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><polyline points="17 1 21 5 17 9" data-v-3e48d63d></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-3e48d63d></path><polyline points="7 23 3 19 7 15" data-v-3e48d63d></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>8</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-3e48d63d></path></svg></button></div>',1))])])):(c(),f("div",Jg," Nothing here yet... "))]),i.value?(c(),f("div",{key:0,onClick:v[7]||(v[7]=g=>i.value=!1),class:"fixed inset-0 z-[99]"})):M("",!0),Ze(nn,{name:"slide"},{default:Cs(()=>[i.value?(c(),f("div",Xg,[t("div",Qg,[v[30]||(v[30]=t("span",{class:"text-[13px] font-bold tracking-[0.2em] text-zinc-400 uppercase"},"Menu",-1)),t("button",{onClick:v[8]||(v[8]=g=>i.value=!1),class:"p-2 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...v[29]||(v[29]=[t("span",{class:"material-symbols-outlined text-[24px]"},"close",-1)])])]),t("div",Zg,[r.value?(c(),f(oe,{key:0},[t("div",{onClick:v[9]||(v[9]=g=>p("persona-archive")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[31]||(v[31]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"tune"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Persona Archive"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),t("div",{onClick:v[10]||(v[10]=g=>p("sticker-library")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[32]||(v[32]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"sentiment_satisfied"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Stickers"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),t("div",{onClick:v[11]||(v[11]=g=>p("wallet")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[33]||(v[33]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"credit_card"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Wallet"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])],64)):M("",!0),t("div",{onClick:v[12]||(v[12]=g=>p("relationship-network")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[34]||(v[34]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"hub"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Network"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),t("div",{onClick:v[13]||(v[13]=g=>p("regex-manager")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[35]||(v[35]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"style"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Regex Cards"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])])])):M("",!0)]),_:1})]))}},th=rt(eh,[["__scopeId","data-v-3e48d63d"]]),sh={class:"fixed inset-x-0 bottom-0 h-[92%] z-[100] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},nh={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},oh={class:"flex-1 overflow-y-auto px-4 pt-4 pb-32 w-full"},ih={class:"flex gap-4"},lh={class:"flex flex-col items-center"},ah={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},rh={class:"flex-1 flex flex-col gap-1 min-h-[120px]"},ch={class:"font-bold text-[15px] pt-1 leading-none"},dh={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-50 pb-safe z-20 px-6 py-4 flex items-center justify-between"},uh=["disabled"],ph={__name:"Compose",emits:["close"],setup(e,{emit:s}){const n=s,o=C(""),i=be(()=>k.activePersonaId?k.personas.find(a=>a.id===k.activePersonaId):k.personas[0]||{}),l=()=>{console.log("Posting:",o.value),n("close")};return(a,r)=>(c(),f("div",sh,[t("header",nh,[t("button",{onClick:r[0]||(r[0]=p=>a.$emit("close")),class:"text-[16px] text-black hover:opacity-70 transition-opacity"}," Cancel "),r[2]||(r[2]=t("h2",{class:"text-[16px] font-bold tracking-tight"}," New thread ",-1)),r[3]||(r[3]=t("button",{class:"w-[50px] flex justify-end"},[t("span",{class:"material-symbols-outlined text-black"},"more_horiz")],-1))]),t("main",oh,[t("div",ih,[t("div",lh,[t("div",{class:"size-10 shrink-0 rounded-full bg-zinc-200 overflow-hidden border border-gray-100",style:Ve({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[i.value.avatar?M("",!0):(c(),f("div",ah))],4),r[4]||(r[4]=t("div",{class:"w-0.5 flex-1 bg-gray-200 my-2 rounded-full min-h-[40px]"},null,-1)),t("div",{class:"size-5 shrink-0 rounded-full bg-zinc-200 overflow-hidden opacity-50",style:Ve({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4)]),t("div",rh,[t("div",ch,w(i.value.handle||"user"),1),le(t("textarea",{"onUpdate:modelValue":r[1]||(r[1]=p=>o.value=p),autofocus:"",class:"w-full border-0 p-0 focus:ring-0 text-[15px] leading-relaxed resize-none bg-transparent placeholder:text-neutral-400 mt-1 min-h-[60px]",placeholder:"What's new?"},null,512),[[pe,o.value]]),r[5]||(r[5]=wt('<div class="flex items-center gap-5 mt-2" data-v-2e69b1af><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>imagesmode</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>gif_box</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>mic</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>tag</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>poll</span></button></div>',1))])]),r[6]||(r[6]=t("div",{class:"flex gap-4 mt-4"},[t("div",{class:"w-10 flex justify-center opacity-0"}),t("div",{class:"flex-1"},[t("button",{class:"text-[14px] text-neutral-400 hover:text-black transition-colors"},"Add to thread")])],-1))]),t("div",dh,[r[7]||(r[7]=t("button",{class:"text-[14px] text-neutral-400 font-medium hover:text-black transition-colors"}," Anyone can reply ",-1)),t("button",{onClick:l,disabled:!o.value.trim(),class:"bg-black text-white px-5 py-2 rounded-full text-[15px] font-bold tracking-wide hover:opacity-80 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed"}," Post ",8,uh)])]))}},fh=rt(ph,[["__scopeId","data-v-2e69b1af"]]),vh={class:"h-full flex flex-col bg-background-light text-black"},xh={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-zinc-100"},bh={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},mh={__name:"PostDetail",props:["postId"],emits:["back"],setup(e,{emit:s}){return(n,o)=>(c(),f("div",vh,[t("header",xh,[t("div",bh,[t("button",{onClick:o[0]||(o[0]=i=>n.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...o[1]||(o[1]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),o[2]||(o[2]=t("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir",-1)),o[3]||(o[3]=t("div",{class:"w-10"},null,-1))])]),o[4]||(o[4]=wt('<main class="flex-1 overflow-y-auto pb-32 w-full" data-v-eae84c1c><article class="pt-6" data-v-eae84c1c><div class="px-6 mb-6" data-v-eae84c1c><div class="flex items-center gap-3" data-v-eae84c1c><div class="size-10 rounded-full bg-black flex items-center justify-center overflow-hidden border border-zinc-200" data-v-eae84c1c><div class="w-full h-[0.5px] bg-white/30 rotate-45" data-v-eae84c1c></div><div class="absolute w-full h-[0.5px] bg-white/30 -rotate-45" data-v-eae84c1c></div></div><div class="flex flex-col" data-v-eae84c1c><span class="text-sm font-semibold tracking-tight" data-v-eae84c1c>studio_noir</span><span class="text-[9px] text-zinc-400 uppercase tracking-widest" data-v-eae84c1c>Paris, FR</span></div></div></div><div class="px-6 mb-6" data-v-eae84c1c><p class="text-[17px] leading-relaxed font-light text-zinc-900" data-v-eae84c1c> The silence of structure. Exploring the intersection of Brutalist architecture and morning light. Every angle is a dialogue with the sky. </p></div><div class="mx-6 aspect-[4/5] bg-zinc-100 overflow-hidden mb-6" data-v-eae84c1c><img alt="Editorial Architecture" class="w-full h-full object-cover editorial-image" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E" data-v-eae84c1c></div><div class="px-6 pb-8" data-v-eae84c1c><div class="flex items-center gap-7 pb-8 border-b border-zinc-50" data-v-eae84c1c><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>1,240</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48L4.32 21l4.287-1.022c1.026.177 2.104.272 3.393.272z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>48</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>12</span></button><button class="flex items-center group ml-auto" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg></button></div></div></article><section class="px-6 space-y-8" data-v-eae84c1c><h3 class="text-[10px] uppercase tracking-[0.25em] text-zinc-400 font-semibold mb-8" data-v-eae84c1c>Responses</h3><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-zinc-50 flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="size-3 border border-black/20 rounded-sm rotate-45" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>elena_di_rossi</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>2h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The high contrast captures the starkness perfectly. Exceptional work.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-black flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="w-4 h-[1px] bg-white/20" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>arc_digest</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>4h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The brutalist aesthetic is making a serious comeback this season.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-white flex items-center justify-center border border-zinc-200" data-v-eae84c1c><div class="size-2 bg-black rounded-full" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>minimal_vibe</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>5h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>Pure sophistication.</p></div></div></section></main><footer class="fixed bottom-0 left-0 right-0 bottom-input-bar border-t border-zinc-100 safe-area-bottom bg-white/90 backdrop-blur-md" data-v-eae84c1c><div class="flex items-center gap-4 px-6 pt-4 pb-[calc(1rem+env(safe-area-inset-bottom))] w-full" data-v-eae84c1c><div class="size-8 shrink-0 rounded-full bg-zinc-50 border border-zinc-200 flex items-center justify-center overflow-hidden" data-v-eae84c1c><div class="w-3 h-3 border-t border-l border-zinc-400 rotate-45 translate-y-0.5" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><input class="w-full bg-transparent border-none focus:ring-0 text-[14px] py-2 placeholder:text-zinc-400 font-light tracking-tight" placeholder="Write a comment..." type="text" data-v-eae84c1c></div><button class="text-[11px] font-bold tracking-[0.15em] uppercase hover:opacity-40 transition-opacity" data-v-eae84c1c> Post </button></div></footer>',2))]))}},gh=rt(mh,[["__scopeId","data-v-eae84c1c"]]),hh={class:"h-full flex flex-col bg-white text-black font-sans"},yh={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},wh={class:"flex-1 overflow-y-auto px-6 py-4 w-full"},kh={class:"grid gap-4"},_h=["onClick"],zh={key:0,class:"absolute top-4 right-4 text-black"},$h={class:"flex-1 min-w-0 pr-6"},Ch={class:"text-[16px] font-bold tracking-tight truncate"},Sh={class:"text-[12px] text-zinc-500 font-light truncate mt-0.5"},Ih=["onClick"],Mh={__name:"PersonaArchive",emits:["back","add","edit","select"],setup(e,{emit:s}){const n=s,o=l=>{bi(l),n("select")},i=(l,a)=>{a.stopPropagation(),n("edit",l)};return(l,a)=>(c(),f("div",hh,[t("header",yh,[t("button",{onClick:a[0]||(a[0]=r=>l.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...a[3]||(a[3]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),a[5]||(a[5]=t("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Persona Archive",-1)),t("button",{onClick:a[1]||(a[1]=r=>l.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...a[4]||(a[4]=[t("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])]),t("main",wh,[t("div",kh,[(c(!0),f(oe,null,ye(at(k).personas,r=>(c(),f("div",{key:r.id,class:W(["group relative flex items-center gap-5 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer hover:shadow-sm hover:translate-y-[-1px]",{"bg-zinc-50 border-black/5":at(k).activePersonaId===r.id,"bg-white":at(k).activePersonaId!==r.id}]),onClick:p=>o(r.id)},[at(k).activePersonaId===r.id?(c(),f("div",zh,[...a[6]||(a[6]=[t("span",{class:"material-symbols-outlined text-[18px]"},"check_circle",-1)])])):M("",!0),t("div",{class:"size-16 shrink-0 rounded-full overflow-hidden border border-gray-100 editorial-image",style:Ve({backgroundImage:`url(${r.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("div",$h,[t("h3",Ch,w(r.handle),1),t("p",Sh,w(r.name||r.handle),1)]),t("div",{onClick:a[2]||(a[2]=je(()=>{},["stop"])),class:"relative z-20"},[t("button",{onClick:p=>i(r.id,p),class:"p-3 text-zinc-400 hover:text-black hover:bg-gray-100/50 rounded-full transition-all"},[...a[7]||(a[7]=[t("span",{class:"material-symbols-outlined text-[20px]"},"edit",-1)])],8,Ih)])],10,_h))),128))])])]))}},Eh=rt(Mh,[["__scopeId","data-v-09dd5376"]]),Th={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},jh={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Ah={class:"flex items-center gap-3"},Oh={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},Ph={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},Rh={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},Nh={class:"bg-zinc-50 rounded-2xl p-5"},Lh={class:"bg-zinc-50 rounded-2xl p-5"},Dh={class:"bg-zinc-50 rounded-2xl p-5"},Vh={class:"bg-zinc-50 rounded-2xl p-5"},Bh={class:"bg-zinc-50 rounded-2xl p-5"},Uh={key:0,class:"pt-4"},Fh={__name:"PersonaEdit",props:["personaId"],emits:["back","save"],setup(e,{emit:s}){const n=e,o=s,i=C({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),l=C(!1);Gt(()=>{if(n.personaId){const b=k.personas.find(u=>u.id===n.personaId);b&&(l.value=!0,i.value={...b})}else i.value.id="p_"+Date.now(),i.value.avatar="https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0"});const a=async()=>{const b={...i.value,stats:i.value.stats||{followers:"0",following:"0"}};l.value?await sf(b):await tf(b),o("save")},r=()=>{const b=prompt("Enter image URL for avatar:",i.value.avatar);b&&(i.value.avatar=b)},p=async()=>{i.value.id&&confirm("Delete this persona? This cannot be undone.")&&(await nf(i.value.id),o("save"))};return(b,u)=>(c(),f("div",Th,[t("header",jh,[t("div",Ah,[t("button",{onClick:u[0]||(u[0]=v=>b.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...u[6]||(u[6]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("span",Oh,w(l.value?"":""),1)]),t("button",{onClick:a,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),t("main",Ph,[t("div",Rh,[t("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200",style:Ve({backgroundImage:`url(${i.value.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("button",{onClick:r,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),t("div",Nh,[u[7]||(u[7]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),le(t("input",{"onUpdate:modelValue":u[1]||(u[1]=v=>i.value.handle=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"your_handle"},null,512),[[pe,i.value.handle]])]),t("div",Lh,[u[8]||(u[8]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("input",{"onUpdate:modelValue":u[2]||(u[2]=v=>i.value.name=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Official Name"},null,512),[[pe,i.value.name]]),u[9]||(u[9]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),t("div",Dh,[u[10]||(u[10]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("textarea",{"onUpdate:modelValue":u[3]||(u[3]=v=>i.value.persona=v),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Describe the inner persona..."},null,512),[[pe,i.value.persona]]),u[11]||(u[11]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),t("div",Vh,[u[12]||(u[12]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("textarea",{"onUpdate:modelValue":u[4]||(u[4]=v=>i.value.bio=v),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Write a brief description..."},null,512),[[pe,i.value.bio]])]),t("div",Bh,[u[13]||(u[13]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("input",{"onUpdate:modelValue":u[5]||(u[5]=v=>i.value.link=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[pe,i.value.link]])]),l.value?(c(),f("div",Uh,[t("button",{onClick:p,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):M("",!0)])]))}},Wh=rt(Fh,[["__scopeId","data-v-e15adcb5"]]),Kh={class:"h-full flex flex-col bg-white text-black font-sans"},Hh={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Gh={class:"flex-1 overflow-y-auto w-full"},qh={class:"px-6 py-4"},Yh={class:"relative"},Jh={class:"px-6 pb-20"},Xh=["onClick"],Qh={key:0,class:"material-symbols-outlined text-zinc-300 text-[24px]"},Zh={class:"flex flex-col min-w-0"},ey={class:"text-[14px] font-bold tracking-tight truncate"},ty={class:"text-[11px] text-zinc-500 font-light truncate mt-0.5"},sy={class:"flex items-center gap-2 ml-4"},ny=["onClick"],oy={__name:"Following",emits:["back","add","edit","navigate"],setup(e,{emit:s}){const n=s,o=C(""),i=be(()=>{if(!o.value)return k.contacts;const a=o.value.toLowerCase();return k.contacts.filter(r=>r.handle.toLowerCase().includes(a)||r.name&&r.name.toLowerCase().includes(a)||r.bio&&r.bio.toLowerCase().includes(a))}),l=a=>{n("edit",a)};return(a,r)=>(c(),f("div",Kh,[t("header",Hh,[t("button",{onClick:r[0]||(r[0]=p=>a.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[3]||(r[3]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),r[5]||(r[5]=t("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Following",-1)),t("button",{onClick:r[1]||(r[1]=p=>a.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[4]||(r[4]=[t("span",{class:"material-symbols-outlined text-[24px]"},"person_add",-1)])])]),t("main",Gh,[t("div",qh,[t("div",Yh,[r[6]||(r[6]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-zinc-400 text-[20px]"},"search",-1)),le(t("input",{"onUpdate:modelValue":r[2]||(r[2]=p=>o.value=p),type:"text",class:"w-full bg-zinc-50 border border-gray-100 rounded-lg py-2.5 pl-10 pr-4 text-sm font-light placeholder-zinc-400 focus:outline-none focus:border-black/10 transition-colors",placeholder:"Search connections..."},null,512),[[pe,o.value]])])]),t("div",Jh,[(c(!0),f(oe,null,ye(i.value,p=>(c(),f("div",{key:p.id,class:"flex items-center justify-between py-5 border-b border-gray-50 group hover:bg-zinc-50/50 -mx-6 px-6 transition-colors"},[t("div",{onClick:b=>a.$emit("navigate","profile",{id:p.id}),class:"flex items-center gap-4 min-w-0 flex-1 cursor-pointer"},[t("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100 bg-zinc-100 flex items-center justify-center editorial-image",style:Ve({backgroundImage:p.avatar?`url(${p.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[p.avatar?M("",!0):(c(),f("span",Qh,"person"))],4),t("div",Zh,[t("h3",ey,w(p.handle),1),t("p",ty,w(p.bio||p.name||"No bio"),1)])],8,Xh),t("div",sy,[t("button",{onClick:b=>l(p.id),class:"px-4 py-1.5 border border-zinc-200 text-black rounded-full text-[11px] font-medium hover:bg-zinc-50 transition-colors"}," Edit ",8,ny),r[7]||(r[7]=t("div",{class:"px-5 py-1.5 bg-black text-white rounded-full text-[11px] font-medium tracking-wide"}," Following ",-1))])]))),128))])])]))}},iy=rt(oy,[["__scopeId","data-v-c8641243"]]),ly={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},ay={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},ry={class:"flex items-center gap-3"},cy={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},dy={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},uy={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},py={key:0,class:"material-symbols-outlined text-zinc-400 text-[40px]"},fy={class:"bg-zinc-50 rounded-2xl p-5"},vy={class:"bg-zinc-50 rounded-2xl p-5"},xy={class:"bg-zinc-50 rounded-2xl p-5"},by={class:"bg-zinc-50 rounded-2xl p-5"},my={class:"bg-zinc-50 rounded-2xl p-5"},gy={key:0,class:"pt-4"},hy={__name:"ContactEdit",props:["contactId"],emits:["back","save"],setup(e,{emit:s}){const n=e,o=s,i=C({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),l=C(!1);Gt(()=>{if(n.contactId){const b=k.contacts.find(u=>u.id===n.contactId);b&&(l.value=!0,i.value={...b})}else i.value.id="c_"+Date.now(),i.value.avatar=""});const a=()=>{const b={...i.value};l.value?lf(b):of(b),o("save")},r=()=>{const b=prompt("Enter image URL for avatar:",i.value.avatar);b&&(i.value.avatar=b)},p=async()=>{i.value.id&&confirm("Remove this contact?")&&(await af(i.value.id),o("save"))};return(b,u)=>(c(),f("div",ly,[t("header",ay,[t("div",ry,[t("button",{onClick:u[0]||(u[0]=v=>b.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...u[6]||(u[6]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("span",cy,w(l.value?"":""),1)]),t("button",{onClick:a,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),t("main",dy,[t("div",uy,[t("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200 flex items-center justify-center",style:Ve({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[i.value.avatar?M("",!0):(c(),f("span",py,"person"))],4),t("button",{onClick:r,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),t("div",fy,[u[7]||(u[7]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),le(t("input",{"onUpdate:modelValue":u[1]||(u[1]=v=>i.value.handle=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"handle"},null,512),[[pe,i.value.handle]])]),t("div",vy,[u[8]||(u[8]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("input",{"onUpdate:modelValue":u[2]||(u[2]=v=>i.value.name=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Real Name"},null,512),[[pe,i.value.name]]),u[9]||(u[9]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),t("div",xy,[u[10]||(u[10]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("textarea",{"onUpdate:modelValue":u[3]||(u[3]=v=>i.value.persona=v),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Internal notes about this contact..."},null,512),[[pe,i.value.persona]]),u[11]||(u[11]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),t("div",by,[u[12]||(u[12]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("textarea",{"onUpdate:modelValue":u[4]||(u[4]=v=>i.value.bio=v),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Public bio..."},null,512),[[pe,i.value.bio]])]),t("div",my,[u[13]||(u[13]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),le(t("input",{"onUpdate:modelValue":u[5]||(u[5]=v=>i.value.link=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[pe,i.value.link]])]),l.value?(c(),f("div",gy,[t("button",{onClick:p,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):M("",!0)])]))}},yy=rt(hy,[["__scopeId","data-v-3b23ee71"]]),wy={class:"h-full flex flex-col bg-white text-black font-sans relative"},ky={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl border-b border-zinc-100"},_y={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},zy={class:"flex-1"},$y={class:"flex-1 text-center flex flex-col items-center"},Cy={key:0,class:"text-[10px] text-zinc-400 bg-zinc-50 px-2 py-0.5 rounded-full mt-0.5 max-w-[120px] truncate"},Sy={class:"flex-1 flex justify-end"},Iy={class:"flex-1 overflow-y-auto w-full"},My={key:0,class:"p-12 text-center text-zinc-400"},Ey={key:1,class:"pb-12"},Ty={class:"p-5 border-b-8 border-zinc-50"},jy={class:"flex items-center justify-between mb-3"},Ay={key:0,class:"bg-zinc-50 p-4 rounded-xl border border-zinc-100"},Oy={key:0,class:"text-[15px] leading-relaxed text-black/80 font-serif italic"},Py={key:1,class:"text-zinc-400 text-sm italic"},Ry={key:2,class:"mt-2 text-right text-[11px] text-zinc-400"},Ny={class:"p-5"},Ly={class:"flex items-center justify-between mb-4"},Dy={class:"relative"},Vy={class:"space-y-3"},By=["onClick"],Uy={class:"flex flex-col gap-1.5"},Fy={class:"flex items-center gap-2 text-[11px] font-bold text-zinc-400 uppercase tracking-wider"},Wy={class:"pr-6"},Ky={class:"text-[14px] text-black font-medium"},Hy={class:"text-[14px] text-zinc-600"},Gy={key:0,class:"mt-1 flex items-start"},qy={class:"bg-zinc-100 text-zinc-500 text-[11px] px-2 py-0.5 rounded text-left"},Yy={key:0,class:"absolute inset-0 z-[100] flex justify-end"},Jy={class:"relative w-[280px] h-full bg-white shadow-2xl flex flex-col animate-slide-in"},Xy={class:"p-5 border-b border-zinc-100 flex items-center justify-between"},Qy={class:"flex-1 overflow-y-auto p-2"},Zy=["onClick"],e2={class:"size-10 rounded-full bg-zinc-200 flex items-center justify-center text-zinc-500 shrink-0"},t2={class:"material-symbols-outlined"},s2={class:"flex flex-col overflow-hidden"},n2={class:"text-sm font-bold truncate"},o2={class:"text-xs text-zinc-400 uppercase"},i2={key:0,class:"text-center p-8 text-zinc-400 text-sm"},l2={__name:"CharMemory",props:{contactId:{type:String,required:!0}},emits:["back"],setup(e,{emit:s}){const n=e,o=C(!0),i=C(null),l=C([]),a=C(""),r=C(!1),p=C(""),b=C(!1),u=C(null),v=be(()=>{const A=k.conversations.filter(R=>!!((R.type==="dm"||R.type==="direct")&&R.id===n.contactId||(R.type==="group"||R.isGroup)&&R.members&&R.members.includes(n.contactId))).map(R=>{const Y=k.contacts.find(ce=>ce.id===n.contactId),we=Y?.handle&&Y.handle.trim()||Y?.name||"Unknown";return{id:R.id,name:R.title||(R.type==="group"||R.isGroup?"":we),type:R.type==="group"||R.isGroup?"group":"dm",avatar:R.avatar||null}});if(A.length===0){const R=k.contacts.find(we=>we.id===n.contactId);return[{id:"no_conv",name:` ${R?.handle&&R.handle.trim()||R?.name||"Unknown"} `,type:"placeholder",avatar:null}]}return A}),g=be(()=>{if(!a.value)return l.value.slice(0,50);const A=a.value.toLowerCase();return l.value.filter(R=>{const Y=Array.isArray(R.who)?R.who.join(" "):R.who||"";return(R.action||R.what||"").toLowerCase().includes(A)||Y.toLowerCase().includes(A)||R.why&&R.why.toLowerCase().includes(A)||R.when&&R.when.toLowerCase().includes(A)})}),j=async A=>{if(o.value=!0,!A||A==="no_conv"){i.value=null,p.value="",l.value=[],o.value=!1;return}const[R,Y]=await Promise.all([gi(A),Cc(A)]);R?(i.value=R,p.value=R.summary||""):(i.value=null,p.value=""),l.value=Y||[],o.value=!1},B=async()=>{v.value.length>0&&!u.value&&(u.value=v.value[0].id),await j(u.value)},N=A=>{u.value=A,b.value=!1,j(A)},L=async()=>{if(!u.value||u.value.startsWith("mock_")){i.value={...i.value,summary:p.value,lastUpdatedAt:Date.now()},r.value=!1;return}await $c(u.value,p.value),i.value={...i.value,summary:p.value,lastUpdatedAt:Date.now()},r.value=!1},S=async A=>{confirm("")&&(u.value&&!u.value.startsWith("mock_")&&await ff(A),l.value=l.value.filter(R=>R.id!==A))},T=A=>A?(Array.isArray(A)?A:[A]).map(Y=>Y==="User"?"":Y).join(""):"",E=A=>A.action||A.what||"",O=A=>new Date(A).toLocaleDateString()+" "+new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return Gt(B),(A,R)=>(c(),f("div",wy,[t("header",ky,[t("div",_y,[t("div",zy,[t("button",{onClick:R[0]||(R[0]=Y=>A.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...R[7]||(R[7]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),t("div",$y,[R[8]||(R[8]=t("span",{class:"text-[16px] font-bold"},"Memory",-1)),u.value?(c(),f("span",Cy,w(v.value.find(Y=>Y.id===u.value)?.name||""),1)):M("",!0)]),t("div",Sy,[t("button",{onClick:R[1]||(R[1]=Y=>b.value=!0),class:"size-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors"},[...R[9]||(R[9]=[t("span",{class:"material-symbols-outlined text-[24px]"},"more_horiz",-1)])])])])]),t("main",Iy,[o.value?(c(),f("div",My," ... ")):(c(),f("div",Ey,[t("section",Ty,[t("div",jy,[R[10]||(R[10]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"material-symbols-outlined text-[20px] text-zinc-900"},"psychology"),t("h2",{class:"text-[16px] font-bold uppercase tracking-wide"},"CORE COGNITION")],-1)),r.value?(c(),f("button",{key:1,onClick:L,class:"text-[13px] font-bold text-black border border-black px-3 py-0.5 rounded-full hover:bg-black hover:text-white transition-colors"}," SAVE ")):(c(),f("button",{key:0,onClick:R[2]||(R[2]=Y=>r.value=!0),class:"text-[13px] font-bold text-zinc-400 hover:text-black transition-colors"}," EDIT "))]),r.value?le((c(),f("textarea",{key:1,"onUpdate:modelValue":R[3]||(R[3]=Y=>p.value=Y),class:"w-full h-[120px] bg-white border border-black p-3 rounded-lg text-[15px] font-serif focus:outline-none"},null,512)),[[pe,p.value]]):(c(),f("div",Ay,[i.value?(c(),f("p",Oy,' "'+w(i.value.summary)+'" ',1)):(c(),f("p",Py,"  "))])),i.value?(c(),f("div",Ry," : "+w(O(i.value.lastUpdatedAt)),1)):M("",!0)]),t("section",Ny,[t("div",Ly,[R[12]||(R[12]=t("h2",{class:"text-[16px] font-bold uppercase tracking-wide"},"MEMORY STREAM",-1)),t("div",Dy,[le(t("input",{"onUpdate:modelValue":R[4]||(R[4]=Y=>a.value=Y),type:"text",placeholder:"...",class:"bg-zinc-50 border border-zinc-200 rounded-full py-1.5 pl-9 pr-4 text-[13px] w-[140px] focus:w-[180px] focus:border-black transition-all focus:outline-none"},null,512),[[pe,a.value]]),R[11]||(R[11]=t("span",{class:"material-symbols-outlined absolute left-2.5 top-1.5 text-[16px] text-zinc-400"},"search",-1))])]),t("div",Vy,[(c(!0),f(oe,null,ye(g.value,Y=>(c(),f("div",{key:Y.id,class:"group relative bg-white border border-zinc-100 rounded-xl p-4 transition-shadow hover:shadow-sm hover:border-zinc-200"},[t("button",{onClick:we=>S(Y.id),class:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-zinc-100 rounded-md"},[...R[13]||(R[13]=[t("span",{class:"material-symbols-outlined text-[16px] text-zinc-400"},"delete",-1)])],8,By),t("div",Uy,[t("div",Fy,[t("span",null,w(Y.when||""),1),R[14]||(R[14]=t("span",{class:"w-1 h-1 rounded-full bg-zinc-300"},null,-1)),t("span",null,w(Y.where||""),1)]),t("div",Wy,[t("span",Ky,w(T(Y.who)),1),t("span",Hy,w(E(Y)),1)]),Y.why?(c(),f("div",Gy,[t("span",qy," : "+w(Y.why),1)])):M("",!0)])]))),128))])])]))]),b.value?(c(),f("div",Yy,[t("div",{class:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:R[5]||(R[5]=Y=>b.value=!1)}),t("div",Jy,[t("div",Xy,[R[16]||(R[16]=t("span",{class:"font-bold text-lg"},"",-1)),t("button",{onClick:R[6]||(R[6]=Y=>b.value=!1),class:"text-zinc-400 hover:text-black"},[...R[15]||(R[15]=[t("span",{class:"material-symbols-outlined"},"close",-1)])])]),t("div",Qy,[(c(!0),f(oe,null,ye(v.value,Y=>(c(),f("div",{key:Y.id,onClick:we=>N(Y.id),class:W(["p-3 rounded-lg cursor-pointer flex items-center gap-3 transition-colors hover:bg-zinc-50",u.value===Y.id?"bg-zinc-100 ring-1 ring-zinc-200":""])},[t("div",e2,[t("span",t2,w(Y.type==="group"?"group":"person"),1)]),t("div",s2,[t("span",n2,w(Y.name),1),t("span",o2,w(Y.type==="dm"?"":""),1)])],10,Zy))),128)),v.value.length===0?(c(),f("div",i2,"  ")):M("",!0)])])])):M("",!0)]))}},a2=rt(l2,[["__scopeId","data-v-882b9b31"]]),r2={class:"h-full flex flex-col bg-white text-black font-sans relative overflow-hidden"},c2={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},d2={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},u2={class:"w-full pb-32 flex-1 overflow-y-auto scrollbar-hide"},p2={class:"flex flex-col items-center pt-8 pb-8 border-b border-gray-50"},f2={class:"relative w-[86px] h-[86px] rounded-full p-[2px] border border-gray-100 mb-4 bg-white shadow-sm"},v2={class:"font-serif text-2xl font-medium tracking-tight mb-1"},x2={class:"text-[10px] tracking-[0.2em] font-bold uppercase text-zinc-400"},b2={class:"text-[11px] font-medium text-zinc-600 group-hover:text-black"},m2={class:"px-6 py-6 space-y-8"},g2={class:"bg-transparent flex flex-col gap-0"},h2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},y2={class:"flex flex-col gap-1"},w2={key:0,class:"text-[11px] text-zinc-400 font-light"},k2={class:"flex items-center gap-3"},_2={class:"relative inline-flex items-center cursor-pointer"},z2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},$2={class:"flex flex-col gap-1"},C2={key:0,class:"text-[11px] text-zinc-400 font-light"},S2={class:"flex items-center gap-3"},I2={class:"relative inline-flex items-center cursor-pointer"},M2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},E2={class:"flex items-center gap-2"},T2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},j2={class:"relative inline-flex items-center cursor-pointer"},A2={key:0,class:"space-y-3 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},O2={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},P2={class:"relative inline-flex items-center cursor-pointer"},R2={key:0,class:"pl-4 border-l-2 border-zinc-100"},N2={key:1,class:"group flex items-center justify-between py-3 border-b border-gray-50"},L2={class:"relative inline-flex items-center cursor-pointer"},D2={key:2,class:"space-y-4 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},V2={class:"flex items-start gap-3 py-2 pl-4 border-l-2 border-zinc-100"},B2={class:"flex flex-col gap-2 flex-1"},U2={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-zinc-100 ring-1 ring-zinc-200 shrink-0"},F2=["src"],W2={class:"flex items-start gap-3 py-2 pl-4 border-l-2 border-zinc-100"},K2={class:"flex flex-col gap-2 flex-1"},H2={class:"text-[12px] text-zinc-500 font-medium"},G2={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-zinc-100 ring-1 ring-zinc-200 shrink-0"},q2=["src"],Y2={class:"flex items-center gap-2"},J2={class:"text-[12px] text-zinc-400"},X2={class:"flex items-center gap-2"},Q2={class:"text-[12px] text-zinc-400"},Z2={class:"mt-4 pt-4 border-t border-gray-100"},ew={class:"flex items-center justify-between py-3"},tw={class:"relative inline-flex items-center cursor-pointer"},sw={key:0,class:"space-y-3 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},nw={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},ow={class:"flex items-center gap-2"},iw={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},lw={class:"flex items-center gap-2"},aw=["disabled"],rw={class:"flex items-center gap-2"},cw={key:0,class:"text-[11px] text-zinc-400"},dw={key:1,class:"text-[11px] text-zinc-300"},uw={class:"material-symbols-outlined text-zinc-300 text-[16px] group-hover:text-black"},pw={class:"flex items-center gap-2"},fw={key:0,class:"text-[12px] text-zinc-400"},vw={key:1,class:"text-[12px] text-zinc-400"},xw={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},bw={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},mw={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},gw={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-6"},hw={id:"timezone-list"},yw=["value"],ww={class:"flex flex-col gap-2"},kw={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},_w={key:0,class:"flex flex-col gap-2"},zw={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},$w={key:1,class:"flex flex-col gap-4"},Cw={class:"text-[10px] text-zinc-500 font-medium ml-1"},Sw=["onUpdate:modelValue","placeholder"],Iw={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Mw={key:1,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Ew={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Tw={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},jw={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-8"},Aw={class:"flex flex-col gap-3"},Ow={class:"flex gap-2"},Pw={key:0,class:"material-symbols-outlined text-sm animate-spin"},Rw={key:1,class:"material-symbols-outlined text-sm"},Nw={key:0,class:"flex flex-col gap-1 mt-1"},Lw=["onClick"],Dw={key:0,class:"material-symbols-outlined text-xs"},Vw={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},Bw={class:"text-[12px] font-medium"},Uw={class:"text-[10px] text-zinc-400 font-mono ml-auto"},Fw={class:"flex flex-col gap-4"},Ww={class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},Kw={key:0,class:"flex flex-col gap-3"},Hw={class:"flex gap-2"},Gw={key:0,class:"material-symbols-outlined text-sm animate-spin"},qw={key:1,class:"material-symbols-outlined text-sm"},Yw={key:0,class:"flex flex-col gap-1 mt-1"},Jw=["onClick"],Xw={key:0,class:"material-symbols-outlined text-xs"},Qw={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},Zw={class:"text-[12px] font-medium"},ek={class:"text-[10px] text-zinc-400 font-mono ml-auto"},tk={key:1,class:"flex flex-col gap-6"},sk={class:"text-[11px] font-bold block mb-2"},nk={class:"flex gap-2"},ok=["onUpdate:modelValue","onKeyup"],ik=["onClick"],lk={key:0,class:"material-symbols-outlined text-sm animate-spin"},ak={key:1,class:"material-symbols-outlined text-sm"},rk={key:0,class:"flex flex-col gap-1 mt-2 bg-white rounded-md border border-gray-100 p-1"},ck=["onClick"],dk={class:"truncate"},uk={key:0,class:"material-symbols-outlined text-[10px]"},pk={key:1,class:"flex items-center gap-2 mt-2 px-2"},fk={class:"text-[11px] font-bold text-zinc-600"},vk={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end gap-3"},xk={key:2,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},bk={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},mk={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},gk={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},hk={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},yk={class:"text-[13px] text-zinc-600"},wk={class:"font-bold text-black"},kk={class:"flex flex-col gap-2"},_k=["onClick"],zk={class:"flex items-center gap-3"},$k={class:"font-medium text-[14px] text-zinc-900"},Ck={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},Sk=["checked","onChange"],Ik={key:0,class:"border-t border-zinc-100 px-4 pb-4"},Mk={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},Ek={class:"flex flex-col"},Tk={class:"text-[13px] font-medium text-zinc-700"},jk={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},Ak=["checked","disabled","onChange"],Ok={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Pk={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Rk={key:3,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Nk={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Lk={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Dk={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},Vk={key:0,class:"py-8 text-center"},Bk={key:1,class:"flex flex-col gap-2"},Uk=["onClick"],Fk={class:"flex items-center gap-3"},Wk={key:0,class:"material-symbols-outlined text-zinc-400 flex items-center justify-center h-full"},Kk={class:"flex flex-col items-start"},Hk={class:"text-[14px] font-medium"},Gk={key:0,class:"material-symbols-outlined text-black text-[16px] font-bold"},qk={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Yk={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Jk={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Xk={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Qk={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},Zk={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},e4={class:"text-[13px] text-zinc-600"},t4={class:"font-bold text-black"},s4={key:0,class:"py-8 text-center bg-zinc-50 rounded-2xl border border-zinc-100"},n4={key:1,class:"flex flex-col gap-2"},o4=["onClick"],i4={class:"flex items-center gap-3"},l4={class:"font-medium text-[14px] text-zinc-900"},a4={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},r4=["checked","onChange"],c4={key:0,class:"border-t border-zinc-100 px-4 pb-4"},d4={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},u4={class:"flex flex-col"},p4={class:"text-[13px] font-medium text-zinc-700"},f4={class:"text-[10px] text-zinc-400 font-mono truncate max-w-[200px]"},v4=["checked","disabled","onChange"],x4={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},b4={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},m4={__name:"ChatSettings",props:["chatId"],emits:["back","navigate"],setup(e,{emit:s}){const n=e,o=be(()=>mi(n.chatId)),i=C(!1),l=C(!1),a=C(""),r=C(""),p=C(15),b=C(!1),u=C(100),v=C(500),g=C(!1),j=C([]),B=C(!1),N=C(!1),L=C(""),S=C(""),T=C(""),E=C([]),O=C([]),A=C({}),R=C({}),Y=C(null),we=C(null),ce=C({}),ze=yo(),Te=C(!1),se=C([]),K=C(new Set),I=C(!1),y=C([]),z=C(new Set),D=be(()=>k.regexCategories.filter(H=>H.scope==="local")),ae=C(!1),ue=C(!1),F=C(""),ve=C(!1),xe=C(""),We=C(""),ot=be(()=>{const H=o.value?.localSettings?.myActivePersonaId;if(H){const h=k.personas.find(P=>P.id===H);return h?h.name:"My"}return rl.value?rl.value.name:"My"}),Mt=be(()=>{if(!o.value)return"https://via.placeholder.com/150";const H=o.value.localSettings||{},h=o.value.type==="group"||o.value.isGroup?H.groupAvatarOverride:H.theirAvatarOverride;if(h)return h;if(!o.value.isGroup&&o.value.type!=="group"){const P=k.contacts.find(me=>me.id===o.value.id);if(P?.avatar)return P.avatar}return o.value.avatar||"https://via.placeholder.com/150"}),ct=be(()=>{if(!o.value)return"Their";const H=o.value.localSettings||{};if(o.value.isGroup||o.value.type==="group")return H.groupNameOverride||o.value.title||"Group";const h=k.contacts.find(P=>P.id===o.value.id);return H.theirNicknameOverride||h?.handle||h?.name||o.value.handle||o.value.name||"Their"}),Et=C([]);try{Et.value=Intl.supportedValuesOf("timeZone")}catch{Et.value=["UTC","Asia/Shanghai","Asia/Tokyo","Europe/London","Europe/Paris","America/New_York","America/Los_Angeles"]}const At=C({}),kt=be(()=>o.value?.type==="group"||o.value?.isGroup===!0),Ot=C(!1),qt=be(()=>kt.value?(o.value.members||[]).map(H=>k.contacts.find(h=>h.id===H)||{id:H,name:"Unknown"}):[]),_=()=>{if(o.value){const H=o.value.localSettings||{};i.value=H.timeAwareness!==!1,l.value=H.envSensing===!0,a.value=H.myLocationOverride||"",r.value=H.theirLocationOverride||"",p.value=H.shortTermMemoryLimit||15,Y.value=H.myWeatherConfig||null,we.value=H.theirWeatherConfig||null,ce.value=H.groupWeatherConfigs||{};const h=H.memberOverrides||{};kt.value&&qt.value.forEach(P=>{At.value[P.id]=h[P.id]?.location||""}),se.value=[...H.mountedWorldbooks||[]],y.value=[...H.mountedRegexCategories||[]],b.value=H.longTermMemoryEnabled===!0,u.value=H.ltmSummarizeTrigger||15,v.value=H.ltmCoreMaxChars||500,j.value=[...H.mountedMemorySources||[]],ae.value=H.innerVoiceEnabled===!0,ue.value=H.innerVoiceUseCustom===!0,F.value=H.innerVoiceTemplate||"",ve.value=H.videoCallUseImage===!0,xe.value=H.videoCallUserImage||"",We.value=H.videoCallCharImage||""}},$=async()=>{if(o.value){const H={};for(const[h,P]of Object.entries(At.value))P&&(H[h]={location:P});await Dn({id:n.chatId,localSettings:{...o.value.localSettings||{},timeAwareness:i.value,envSensing:l.value,myLocationOverride:a.value,theirLocationOverride:r.value,shortTermMemoryLimit:p.value,memberOverrides:H,myWeatherConfig:Y.value,theirWeatherConfig:we.value,groupWeatherConfigs:ce.value,longTermMemoryEnabled:b.value,ltmSummarizeTrigger:u.value,ltmCoreMaxChars:v.value,mountedMemorySources:j.value,mountedRegexCategories:y.value,innerVoiceEnabled:ae.value,innerVoiceUseCustom:ue.value,innerVoiceTemplate:F.value,videoCallUseImage:ve.value,videoCallUserImage:xe.value,videoCallCharImage:We.value}})}},V=async H=>{T.value=H;let h="";if(H==="me"?h=L.value:H==="their"?h=S.value:h=A.value[H]||"",!h){T.value="";return}const P=await ov(h);H==="me"?E.value=P:H==="their"?O.value=P:R.value={...R.value,[H]:P},T.value=""},X=(H,h)=>{const P={city:h.name,lat:h.latitude,long:h.longitude};if(H==="me")Y.value=P,E.value=[],L.value="";else if(H==="their")we.value=P,O.value=[],S.value="";else{ce.value={...ce.value,[H]:P};const me={...R.value};delete me[H],R.value=me,A.value[H]=""}},q=H=>ce.value[H],J=be(()=>ze.state.categories),re=be(()=>ze.state.entries),ne=H=>re.value.filter(h=>h.categoryId===H&&h.scope==="local"),ee=H=>{const h=se.value.indexOf(H);h===-1?se.value.push(H):se.value.splice(h,1),Le()},G=H=>se.value.includes(H),ke=H=>{K.value.has(H)?K.value.delete(H):K.value.add(H),K.value=new Set(K.value)},ie=H=>K.value.has(H),ge=H=>{ee(H)},Me=()=>{Te.value=!0},Le=async()=>{if(o.value){const H=o.value.localSettings||{};await Dn({id:n.chatId,localSettings:{...H,mountedWorldbooks:se.value}})}},Xe=be(()=>re.value.filter(H=>H.scope==="global").length),Fe=H=>{const h=y.value.indexOf(H);h===-1?y.value.push(H):y.value.splice(h,1),$()},qe=H=>y.value.includes(H),yt=H=>{z.value.has(H)?z.value.delete(H):z.value.add(H),z.value=new Set(z.value)},Dt=H=>z.value.has(H),Pt=H=>k.regexEntries.filter(h=>h.categoryId===H),ps=be(()=>{const H=o.value;if(!H)return[];const h=H.type==="group"||H.isGroup?null:H.id,P=H.members||[];return k.conversations.filter(me=>{if(me.id===H.id)return!1;if(h){if((me.type==="dm"||me.type==="direct")&&me.id===h||(me.type==="group"||me.isGroup)&&me.members?.includes(h))return!0}else if((me.type==="dm"||me.type==="direct")&&P.includes(me.id)||(me.type==="group"||me.isGroup)&&me.members?.some(Ms=>P.includes(Ms)))return!0;return!1}).map(me=>{const Ms=me.type==="group"||me.isGroup;let Bn="";if(Ms)Bn=me.title||me.handle||"";else{const wn=k.contacts.find(wo=>wo.id===me.id);Bn=wn?.name||wn?.handle||""}return{id:me.id,name:Bn,type:Ms?"group":"dm",avatar:me.avatar||null}})}),Yt=H=>{const h=j.value.indexOf(H);h===-1?j.value.push(H):j.value.splice(h,1),$()},gt=H=>j.value.includes(H),Jt=async()=>{if(!B.value)try{B.value=!0,await Ko(n.chatId);const H=k.messages[n.chatId]||[];if(H.length===0){alert("");return}await Sc(n.chatId,H.slice(-50)),alert("")}catch(H){console.error("[Memory] Manual summarization failed:",H),alert(": "+H.message)}finally{B.value=!1}};return Gt(()=>{_()}),(H,h)=>(c(),f("div",r2,[t("header",c2,[t("div",d2,[t("button",{onClick:h[0]||(h[0]=P=>H.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors active:scale-95"},[...h[43]||(h[43]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),h[44]||(h[44]=t("h1",{class:"font-serif text-[16px] font-semibold tracking-wide uppercase text-center flex-1 pr-8 opacity-80"},"",-1)),h[45]||(h[45]=t("div",{class:"w-8 hidden"},null,-1))])]),t("main",u2,[t("section",p2,[t("div",f2,[t("div",{class:"w-full h-full rounded-full bg-neutral-100 bg-cover bg-center",style:Ve({backgroundImage:`url(${Mt.value})`})},null,4)]),t("h2",v2,w(ct.value),1),t("span",x2,w(kt.value?"":""),1),t("button",{onClick:h[1]||(h[1]=P=>H.$emit("navigate","chat-settings-identity",{id:n.chatId})),class:"mt-6 flex items-center gap-2 pl-3 pr-4 py-1.5 rounded-full bg-zinc-50 border border-zinc-100 hover:bg-zinc-100 transition-colors group"},[t("div",{class:"w-5 h-5 rounded-full bg-cover bg-center",style:Ve({backgroundImage:`url(${at(k).personas.find(P=>P.name===ot.value)?.avatar})`})},null,4),t("span",b2,": "+w(ot.value),1),h[46]||(h[46]=t("span",{class:"material-symbols-outlined text-[14px] text-zinc-300 group-hover:text-black"},"arrow_forward_ios",-1))])]),t("section",m2,[t("div",null,[h[62]||(h[62]=t("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-500 mb-4 ml-1"},"",-1)),t("div",g2,[t("div",h2,[t("div",y2,[h[47]||(h[47]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),i.value?(c(),f("span",w2,w(a.value||"")+"  "+w(r.value||""),1)):M("",!0)]),t("div",k2,[i.value?(c(),f("button",{key:0,onClick:h[2]||(h[2]=P=>Ot.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...h[48]||(h[48]=[t("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):M("",!0),t("label",_2,[le(t("input",{type:"checkbox","onUpdate:modelValue":h[3]||(h[3]=P=>i.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,i.value]]),h[49]||(h[49]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),t("div",z2,[t("div",$2,[h[50]||(h[50]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),l.value?(c(),f("span",C2,w(L.value||"")+"  "+w(S.value||""),1)):M("",!0)]),t("div",S2,[l.value?(c(),f("button",{key:0,onClick:h[4]||(h[4]=P=>N.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...h[51]||(h[51]=[t("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):M("",!0),t("label",I2,[le(t("input",{type:"checkbox","onUpdate:modelValue":h[5]||(h[5]=P=>l.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,l.value]]),h[52]||(h[52]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),t("div",M2,[h[54]||(h[54]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),t("div",E2,[le(t("input",{type:"number","onUpdate:modelValue":h[6]||(h[6]=P=>p.value=P),onChange:$,class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[pe,p.value]]),h[53]||(h[53]=t("span",{class:"text-[11px] text-zinc-400 uppercase tracking-widest"},"",-1))])]),t("div",T2,[h[56]||(h[56]=t("div",{class:"flex flex-col gap-1"},[t("span",{class:"text-[15px] font-medium text-zinc-900"},""),t("span",{class:"text-[11px] text-zinc-400 font-light"},"AI ")],-1)),t("label",j2,[le(t("input",{type:"checkbox","onUpdate:modelValue":h[7]||(h[7]=P=>ae.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,ae.value]]),h[55]||(h[55]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),ae.value?(c(),f("div",A2,[t("div",O2,[h[58]||(h[58]=t("span",{class:"text-[13px] text-zinc-600"},"",-1)),t("label",P2,[le(t("input",{type:"checkbox","onUpdate:modelValue":h[8]||(h[8]=P=>ue.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,ue.value]]),h[57]||(h[57]=t("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),ue.value?(c(),f("div",R2,[le(t("textarea",{"onUpdate:modelValue":h[9]||(h[9]=P=>F.value=P),onChange:$,placeholder:` {{content}} 
<div class='thought'> {{content}}</div>`,class:"w-full h-20 bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20 resize-none"},null,544),[[pe,F.value]])])):M("",!0)])):M("",!0),kt.value?M("",!0):(c(),f("div",N2,[h[60]||(h[60]=t("div",{class:"flex flex-col gap-1"},[t("span",{class:"text-[15px] font-medium text-zinc-900"},""),t("span",{class:"text-[11px] text-zinc-400 font-light"},"")],-1)),t("label",L2,[le(t("input",{type:"checkbox","onUpdate:modelValue":h[10]||(h[10]=P=>ve.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,ve.value]]),h[59]||(h[59]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])),ve.value&&!kt.value?(c(),f("div",D2,[t("div",V2,[t("div",B2,[h[61]||(h[61]=t("span",{class:"text-[12px] text-zinc-500 font-medium"},"",-1)),le(t("input",{"onUpdate:modelValue":h[11]||(h[11]=P=>xe.value=P),onChange:$,placeholder:"URL ()",class:"w-full bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20"},null,544),[[pe,xe.value]])]),xe.value?(c(),f("div",U2,[t("img",{src:xe.value,class:"w-full h-full object-cover",onError:h[12]||(h[12]=P=>xe.value="")},null,40,F2)])):M("",!0)]),t("div",W2,[t("div",K2,[t("span",H2,w(ct.value)+" ",1),le(t("input",{"onUpdate:modelValue":h[13]||(h[13]=P=>We.value=P),onChange:$,placeholder:"URL ()",class:"w-full bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20"},null,544),[[pe,We.value]])]),We.value?(c(),f("div",G2,[t("img",{src:We.value,class:"w-full h-full object-cover",onError:h[14]||(h[14]=P=>We.value="")},null,40,q2)])):M("",!0)])])):M("",!0)])]),t("div",null,[h[76]||(h[76]=t("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-500 mb-4 ml-1"},"",-1)),t("button",{onClick:Me,class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors"},[h[64]||(h[64]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),t("div",Y2,[t("span",J2,w(se.value.length)+" ",1),h[63]||(h[63]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),t("button",{onClick:h[15]||(h[15]=P=>I.value=!0),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors mt-0"},[h[66]||(h[66]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"Regex ",-1)),t("div",X2,[t("span",Q2,w(y.value.length)+" ",1),h[65]||(h[65]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),t("div",Z2,[t("div",ew,[h[68]||(h[68]=t("div",{class:"flex flex-col gap-1"},[t("span",{class:"text-[15px] font-medium text-zinc-900"},""),t("span",{class:"text-[11px] text-zinc-400 font-light"},"")],-1)),t("label",tw,[le(t("input",{type:"checkbox","onUpdate:modelValue":h[16]||(h[16]=P=>b.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,b.value]]),h[67]||(h[67]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),b.value?(c(),f("div",sw,[t("div",nw,[h[70]||(h[70]=t("span",{class:"text-[13px] text-zinc-600"},"",-1)),t("div",ow,[le(t("input",{type:"number","onUpdate:modelValue":h[17]||(h[17]=P=>u.value=P),onChange:$,min:"10",max:"200",class:"w-14 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[pe,u.value]]),h[69]||(h[69]=t("span",{class:"text-[11px] text-zinc-400"},"",-1))])]),t("div",iw,[h[72]||(h[72]=t("span",{class:"text-[13px] text-zinc-600"},"",-1)),t("div",lw,[le(t("input",{type:"number","onUpdate:modelValue":h[18]||(h[18]=P=>v.value=P),onChange:$,min:"100",max:"2000",step:"50",class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[pe,v.value]]),h[71]||(h[71]=t("span",{class:"text-[11px] text-zinc-400"},"",-1))])]),t("button",{onClick:Jt,disabled:B.value,class:"w-full flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100 group hover:bg-zinc-50 rounded-r-lg transition-colors disabled:opacity-50"},[h[73]||(h[73]=t("span",{class:"text-[13px] text-zinc-600 group-hover:text-black"},"",-1)),t("div",rw,[B.value?(c(),f("span",cw,"...")):(c(),f("span",dw,"")),t("span",uw,w(B.value?"sync":"play_arrow"),1)])],8,aw)])):M("",!0)]),t("button",{onClick:h[19]||(h[19]=P=>g.value=!0),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[h[75]||(h[75]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),t("div",pw,[j.value.length>0?(c(),f("span",fw,w(j.value.length)+" ",1)):(c(),f("span",vw,"")),h[74]||(h[74]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),h[77]||(h[77]=t("button",{class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[t("span",{class:"text-[15px] font-medium text-zinc-500 group-hover:text-zinc-900 transition-colors"},""),t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-zinc-900 transition-colors"},"delete_outline")],-1))])]),h[78]||(h[78]=t("div",{class:"flex flex-col items-center opacity-10 py-12 select-none pointer-events-none"},[t("span",{class:"font-serif italic text-2xl"},"NOIR")],-1))]),(c(),Ee(ft,{to:"body"},[Ot.value?(c(),f("div",xw,[t("div",bw,[t("div",mw,[h[79]||(h[79]=t("span",{class:"font-serif italic text-lg"},"",-1)),t("button",{onClick:h[20]||(h[20]=P=>Ot.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",gw,[t("datalist",hw,[(c(!0),f(oe,null,ye(Et.value,P=>(c(),f("option",{key:P,value:P},w(P),9,yw))),128))]),t("div",ww,[t("label",kw,w(ot.value)+" () ",1),le(t("input",{type:"text",list:"timezone-list","onUpdate:modelValue":h[21]||(h[21]=P=>a.value=P),onChange:$,placeholder:" Asia/Shanghai",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[pe,a.value]])]),kt.value?(c(),f("div",$w,[h[80]||(h[80]=t("div",{class:"w-full h-px bg-black/[0.03]"},null,-1)),h[81]||(h[81]=t("span",{class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},"",-1)),(c(!0),f(oe,null,ye(qt.value,P=>(c(),f("div",{key:P.id,class:"flex flex-col gap-2"},[t("label",Cw,w(P.name),1),le(t("input",{type:"text",list:"timezone-list","onUpdate:modelValue":me=>At.value[P.id]=me,onChange:$,placeholder:`${P.name} `,class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,40,Sw),[[pe,At.value[P.id]]])]))),128))])):(c(),f("div",_w,[t("label",zw,w(ct.value)+" () ",1),le(t("input",{type:"text",list:"timezone-list","onUpdate:modelValue":h[22]||(h[22]=P=>r.value=P),onChange:$,placeholder:" Europe/Paris",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[pe,r.value]])]))]),t("div",Iw,[t("button",{onClick:h[23]||(h[23]=P=>Ot.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0),N.value?(c(),f("div",Mw,[t("div",Ew,[t("div",Tw,[h[82]||(h[82]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},""),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Environment Simulation")],-1)),t("button",{onClick:h[24]||(h[24]=P=>N.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",jw,[h[87]||(h[87]=t("div",{class:"bg-gray-50 p-4 rounded-lg flex gap-3"},[t("span",{class:"material-symbols-outlined text-zinc-400 text-sm mt-0.5"},"info"),t("p",{class:"text-[11px] text-zinc-500 leading-relaxed"}," Noir  Prompt  ")],-1)),t("div",Aw,[h[84]||(h[84]=t("span",{class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},"",-1)),t("div",Ow,[le(t("input",{"onUpdate:modelValue":h[25]||(h[25]=P=>L.value=P),onKeyup:h[26]||(h[26]=xs(P=>V("me"),["enter"])),placeholder:" ( )",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[pe,L.value]]),t("button",{onClick:h[27]||(h[27]=P=>V("me")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[T.value==="me"?(c(),f("span",Pw,"sync")):(c(),f("span",Rw,"search"))])]),E.value.length>0?(c(),f("div",Nw,[(c(!0),f(oe,null,ye(E.value,P=>(c(),f("button",{key:P.id,onClick:me=>X("me",P),class:W(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",Y.value?.city===P.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[t("span",null,w(P.name)+", "+w(P.admin1||P.country),1),Y.value?.city===P.name?(c(),f("span",Dw,"check")):M("",!0)],10,Lw))),128))])):Y.value?.city?(c(),f("div",Vw,[h[83]||(h[83]=t("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),t("span",Bw,w(Y.value.city),1),t("span",Uw,w(Y.value.lat.toFixed(2))+", "+w(Y.value.long.toFixed(2)),1)])):M("",!0)]),h[88]||(h[88]=t("div",{class:"w-full h-px bg-gray-100"},null,-1)),t("div",Fw,[t("span",Ww,w(kt.value?"":""),1),kt.value?(c(),f("div",tk,[(c(!0),f(oe,null,ye(qt.value,P=>(c(),f("div",{key:P.id,class:"p-3 border border-gray-100 rounded-lg bg-gray-50/50"},[t("span",sk,w(P.name),1),t("div",nk,[le(t("input",{"onUpdate:modelValue":me=>A.value[P.id]=me,onKeyup:xs(me=>V(P.id),["enter"]),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-1.5 text-[12px] focus:border-black focus:outline-none transition-colors"},null,40,ok),[[pe,A.value[P.id]]]),t("button",{onClick:me=>V(P.id),class:"bg-white border border-gray-200 text-black rounded-lg px-3 flex items-center justify-center hover:border-black transition-colors"},[T.value===P.id?(c(),f("span",lk,"sync")):(c(),f("span",ak,"search"))],8,ik)]),R.value[P.id]&&R.value[P.id].length>0?(c(),f("div",rk,[(c(!0),f(oe,null,ye(R.value[P.id],me=>(c(),f("button",{key:me.id,onClick:Ms=>X(P.id,me),class:W(["text-left px-2 py-1.5 rounded hover:bg-gray-50 text-[11px] flex items-center justify-between group transition-colors",q(P.id)?.city===me.name?"font-bold text-black":"text-zinc-500"])},[t("span",dk,w(me.name)+", "+w(me.country),1),q(P.id)?.city===me.name?(c(),f("span",uk,"check")):M("",!0)],10,ck))),128))])):q(P.id)?.city?(c(),f("div",pk,[h[86]||(h[86]=t("span",{class:"material-symbols-outlined text-[10px] text-green-600"},"check_circle",-1)),t("span",fk,w(q(P.id).city),1)])):M("",!0)]))),128))])):(c(),f("div",Kw,[t("div",Hw,[le(t("input",{"onUpdate:modelValue":h[28]||(h[28]=P=>S.value=P),onKeyup:h[29]||(h[29]=xs(P=>V("their"),["enter"])),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[pe,S.value]]),t("button",{onClick:h[30]||(h[30]=P=>V("their")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[T.value==="their"?(c(),f("span",Gw,"sync")):(c(),f("span",qw,"search"))])]),O.value.length>0?(c(),f("div",Yw,[(c(!0),f(oe,null,ye(O.value,P=>(c(),f("button",{key:P.id,onClick:me=>X("their",P),class:W(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",we.value?.city===P.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[t("span",null,w(P.name)+", "+w(P.admin1||P.country),1),we.value?.city===P.name?(c(),f("span",Xw,"check")):M("",!0)],10,Jw))),128))])):we.value?.city?(c(),f("div",Qw,[h[85]||(h[85]=t("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),t("span",Zw,w(we.value.city),1),t("span",ek,w(we.value.lat.toFixed(2))+", "+w(we.value.long.toFixed(2)),1)])):M("",!0)]))])]),t("div",vk,[t("button",{onClick:h[31]||(h[31]=P=>N.value=!1),class:"px-6 py-2 border border-gray-200 bg-white text-black text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-gray-50 transition-colors"},"  "),t("button",{onClick:h[32]||(h[32]=P=>{$(),N.value=!1}),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0),Te.value?(c(),f("div",xk,[t("div",bk,[t("div",mk,[h[89]||(h[89]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},""),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"WorldBook Mount")],-1)),t("button",{onClick:h[33]||(h[33]=P=>Te.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",gk,[t("div",hk,[h[91]||(h[91]=t("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),t("p",yk,[t("span",wk,w(Xe.value),1),h[90]||(h[90]=ns("  ",-1))])]),t("div",kk,[(c(!0),f(oe,null,ye(J.value,P=>(c(),f("div",{key:P.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[t("button",{onClick:me=>ke(P.id),class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[t("div",zk,[t("span",{class:W(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",ie(P.id)?"rotate-90":""])},"chevron_right",2),t("span",$k,w(P.name),1),t("span",Ck,w(ne(P.id).length)+" local",1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[34]||(h[34]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:G(P.id),onChange:me=>ge(P.id)},null,40,Sk),t("div",{class:W(["w-[36px] h-[20px] rounded-full transition-colors duration-200",G(P.id)?"bg-black":"bg-zinc-200"])},[t("div",{class:W(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",G(P.id)?"translate-x-4":""])},null,2)],2)])],8,_k),ie(P.id)?(c(),f("div",Ik,[ne(P.id).length===0?(c(),f("div",Mk," No local entries ")):M("",!0),(c(!0),f(oe,null,ye(ne(P.id),me=>(c(),f("div",{key:me.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[t("div",Ek,[t("span",Tk,w(me.title),1),t("span",jk,w(me.isConstant?"Constant":"Trigger")+"  "+w(me.position),1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[35]||(h[35]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:G(P.id)||G(me.id),disabled:G(P.id),onChange:Ms=>!G(P.id)&&ee(me.id)},null,40,Ak),t("div",{class:W(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",G(P.id)||G(me.id)?"bg-black border-black":"bg-transparent"])},[G(P.id)||G(me.id)?(c(),f("span",Ok,"check")):M("",!0)],2)])]))),128))])):M("",!0)]))),128))])]),t("div",Pk,[t("button",{onClick:h[36]||(h[36]=P=>Te.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0),g.value?(c(),f("div",Rk,[t("div",Nk,[t("div",Lk,[h[92]||(h[92]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},""),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Memory Mount")],-1)),t("button",{onClick:h[37]||(h[37]=P=>g.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",Dk,[h[94]||(h[94]=t("div",{class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200"},[t("p",{class:"text-[12px] text-zinc-500 leading-relaxed"},"  ")],-1)),ps.value.length===0?(c(),f("div",Vk,[...h[93]||(h[93]=[t("span",{class:"material-symbols-outlined text-[48px] text-zinc-200 mb-2"},"memory",-1),t("p",{class:"text-[13px] text-zinc-400"},"",-1),t("p",{class:"text-[11px] text-zinc-300 mt-1"},"",-1)])])):(c(),f("div",Bk,[(c(!0),f(oe,null,ye(ps.value,P=>(c(),f("button",{key:P.id,onClick:me=>Yt(P.id),class:W(["flex items-center justify-between p-4 rounded-xl border transition-all",gt(P.id)?"bg-black text-white border-black":"bg-white text-black border-zinc-200 hover:border-zinc-400"])},[t("div",Fk,[t("div",{class:"w-10 h-10 rounded-full bg-zinc-200 bg-cover bg-center shrink-0",style:Ve(P.avatar?{backgroundImage:`url(${P.avatar})`}:{})},[P.avatar?M("",!0):(c(),f("span",Wk,w(P.type==="group"?"groups":"person"),1))],4),t("div",Kk,[t("span",Hk,w(P.name),1),t("span",{class:W(["text-[10px] uppercase tracking-wider",(gt(P.id),"text-zinc-400")])},w(P.type==="group"?"":""),3)])]),t("div",{class:W(["w-5 h-5 rounded flex items-center justify-center transition-colors",gt(P.id)?"bg-white":"border border-zinc-300"])},[gt(P.id)?(c(),f("span",Gk,"check")):M("",!0)],2)],10,Uk))),128))]))]),t("div",qk,[t("button",{onClick:h[38]||(h[38]=P=>g.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[I.value?(c(),f("div",Yk,[t("div",Jk,[t("div",Xk,[h[95]||(h[95]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},"Regex "),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Regex Mount")],-1)),t("button",{onClick:h[39]||(h[39]=P=>I.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",Qk,[t("div",Zk,[h[97]||(h[97]=t("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),t("p",e4,[t("span",t4,w(at(k).regexCategories.filter(P=>P.scope==="global").length),1),h[96]||(h[96]=ns("  ",-1))])]),D.value.length===0?(c(),f("div",s4,[...h[98]||(h[98]=[t("span",{class:"material-symbols-outlined text-[32px] text-zinc-200 mb-2"},"style",-1),t("p",{class:"text-[13px] text-zinc-400"}," Local ",-1),t("p",{class:"text-[11px] text-zinc-300 mt-1"}," Regex Manager  Scope  Local ",-1)])])):(c(),f("div",n4,[(c(!0),f(oe,null,ye(D.value,P=>(c(),f("div",{key:P.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[t("button",{onClick:me=>yt(P.id),class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[t("div",i4,[t("span",{class:W(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",Dt(P.id)?"rotate-90":""])},"chevron_right",2),t("span",l4,w(P.name),1),t("span",a4,w(Pt(P.id).length)+" local",1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[40]||(h[40]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:qe(P.id),onChange:me=>Fe(P.id)},null,40,r4),t("div",{class:W(["w-[36px] h-[20px] rounded-full transition-colors duration-200",qe(P.id)?"bg-black":"bg-zinc-200"])},[t("div",{class:W(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",qe(P.id)?"translate-x-4":""])},null,2)],2)])],8,o4),Dt(P.id)?(c(),f("div",c4,[Pt(P.id).length===0?(c(),f("div",d4," No entries in this pack ")):M("",!0),(c(!0),f(oe,null,ye(Pt(P.id),me=>(c(),f("div",{key:me.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[t("div",u4,[t("span",p4,w(me.name),1),t("code",f4,w(me.regex),1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[41]||(h[41]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:qe(P.id)||qe(me.id),disabled:qe(P.id),onChange:Ms=>!qe(P.id)&&Fe(me.id)},null,40,v4),t("div",{class:W(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",qe(P.id)||qe(me.id)?"bg-black border-black":"bg-transparent"])},[qe(P.id)||qe(me.id)?(c(),f("span",x4,"check")):M("",!0)],2)])]))),128))])):M("",!0)]))),128))]))]),t("div",b4,[t("button",{onClick:h[42]||(h[42]=P=>I.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0)]))]))}},g4=rt(m4,[["__scopeId","data-v-1543b7a6"]]),h4={class:"h-full flex flex-col bg-zinc-50 text-black font-sans"},y4={class:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50"},w4={class:"flex items-center justify-between px-4 pt-[calc(12px_+_env(safe-area-inset-top))] pb-3 max-w-lg mx-auto w-full"},k4={key:0,class:"w-full max-w-lg mx-auto px-4 pb-32 flex-1 overflow-y-auto scrollbar-hide pt-6"},_4={class:"space-y-6"},z4={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},$4={class:"px-5 py-3 border-b border-gray-50 flex items-center justify-between bg-white"},C4={class:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 border border-zinc-100"},S4={class:"text-[10px] font-medium text-zinc-600"},I4={class:"p-5 flex flex-col gap-6"},M4={class:"relative"},E4=["value"],T4={class:"flex items-start gap-4"},j4={class:"relative group shrink-0"},A4={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},O4=["src"],P4={class:"flex-1 space-y-3 pt-1"},R4={class:"relative"},N4=["placeholder"],L4={class:"relative"},D4={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},V4={class:"px-5 py-3 border-b border-gray-50 bg-white"},B4={class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},U4={class:"p-5 flex items-start gap-4"},F4={class:"relative group shrink-0"},W4={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},K4=["src"],H4={class:"flex-1 space-y-3 pt-1"},G4={class:"relative"},q4=["placeholder"],Y4={class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},J4={class:"relative"},X4={key:0,class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Q4={class:"divide-y divide-gray-50"},Z4={class:"relative size-10 rounded-full bg-zinc-100 shrink-0 border border-gray-100 overflow-hidden cursor-pointer group-hover:border-zinc-300 transition-colors"},e5=["src"],t5=["onChange"],s5={class:"flex-1 flex flex-col gap-2"},n5=["onUpdate:modelValue","placeholder"],o5=["onUpdate:modelValue"],i5={class:"shrink-0 flex flex-col items-end"},l5={class:"text-[9px] font-mono text-zinc-300 bg-zinc-100 px-1.5 py-0.5 rounded"},a5={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},r5={class:"divide-y divide-gray-50"},c5={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},d5={class:"relative inline-flex items-center cursor-pointer"},u5={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},p5={class:"relative inline-flex items-center cursor-pointer"},f5={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},v5={class:"flex bg-zinc-100 rounded-lg p-1 gap-1"},x5={__name:"ChatSettingsIdentity",props:["chatId"],emits:["back"],setup(e,{emit:s}){const n=e,o=C(null),i=C(""),l=be(()=>k.personas),a=C({showSelfAvatar:!0,showOtherAvatar:!0,avatarShape:"circle",myActivePersonaId:"",myNicknameOverride:"",myAvatarOverride:"",theirNicknameOverride:"",theirAvatarOverride:"",groupNameOverride:"",groupAvatarOverride:""});Gt(async()=>{const T=mi(n.chatId);if(T){o.value=T;const E=k.contacts.find(O=>O.id===T.id);i.value=E?.avatar||T.avatar||"",T.localSettings?(T.localSettings.showAvatars===!1&&(a.value.showSelfAvatar=!1,a.value.showOtherAvatar=!1),a.value={...a.value,...T.localSettings}):a.value.myActivePersonaId=k.activePersonaId}});const r=(T,E)=>{const O=T.target.files[0];if(!O)return;const A=new FileReader;A.onload=R=>{const Y=R.target.result;E==="myAvatarOverride"?a.value.myAvatarOverride=Y:E==="remote"&&(o.value.type==="group"||o.value.isGroup?a.value.groupAvatarOverride=Y:a.value.theirAvatarOverride=Y)},A.readAsDataURL(O)};let p=null;const b=async()=>{if(!o.value)return;let T;try{const O=Ne(o.value);T=JSON.parse(JSON.stringify(O))}catch(O){console.error("Failed to clone conversation for save",O);return}const E={...T,localSettings:{...Ne(a.value)}};(o.value.type==="group"||o.value.isGroup)&&(a.value.groupNameOverride&&(E.title=a.value.groupNameOverride),a.value.groupAvatarOverride&&(E.avatar=a.value.groupAvatarOverride)),await Dn(E),Object.assign(o.value,E)};ds(a,()=>{p&&clearTimeout(p),p=setTimeout(b,500)},{deep:!0});const u=be(()=>o.value?k.contacts.find(T=>T.id===o.value.id):null),v=be(()=>{if(!o.value)return"https://via.placeholder.com/150";const T=o.value.type==="group"||o.value.isGroup?a.value.groupAvatarOverride:a.value.theirAvatarOverride;return T||u.value?.avatar||o.value.avatar||"https://via.placeholder.com/150"}),g=be(()=>{const T=a.value.myActivePersonaId||k.activePersonaId;return k.personas.find(E=>E.id===T)||k.personas[0]||{}}),j=be({get(){return o.value?o.value.type==="group"||o.value.isGroup?a.value.groupNameOverride:a.value.theirNicknameOverride:""},set(T){o.value&&(o.value.type==="group"||o.value.isGroup?a.value.groupNameOverride=T:a.value.theirNicknameOverride=T)}}),B=be(()=>o.value?.members?o.value.members.map(T=>k.contacts.find(E=>E.id===T)).filter(Boolean):[]),N=T=>(a.value.memberOverrides||(a.value.memberOverrides={}),a.value.memberOverrides[T]||(a.value.memberOverrides[T]={nickname:"",avatar:""}),a.value.memberOverrides[T]),L=(T,E)=>{const O=T.target.files[0];if(!O)return;const A=new FileReader;A.onload=R=>{const Y=R.target.result,we=N(E);we.avatar=Y},A.readAsDataURL(O)},S=T=>T==="square"?"rounded-none":"rounded-full";return(T,E)=>(c(),f("div",h4,[t("header",y4,[t("div",w4,[t("button",{onClick:E[0]||(E[0]=O=>T.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 text-zinc-600 hover:text-black hover:bg-zinc-100 rounded-full transition-all active:scale-95"},[...E[13]||(E[13]=[t("span",{class:"material-symbols-outlined text-[20px]"},"arrow_back",-1)])]),E[14]||(E[14]=t("h1",{class:"font-serif text-[15px] font-semibold tracking-wider uppercase text-center text-zinc-800"},"",-1)),E[15]||(E[15]=t("div",{class:"w-8"},null,-1))])]),o.value?(c(),f("main",k4,[t("div",_4,[t("section",z4,[t("div",$4,[E[17]||(E[17]=t("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"",-1)),t("div",C4,[E[16]||(E[16]=t("div",{class:"size-1.5 rounded-full bg-emerald-500"},null,-1)),t("span",S4,w(at(k).personas.find(O=>O.id===a.value.myActivePersonaId)?.name||""),1)])]),t("div",I4,[t("div",M4,[le(t("select",{"onUpdate:modelValue":E[1]||(E[1]=O=>a.value.myActivePersonaId=O),class:"w-full appearance-none bg-zinc-50 border border-gray-200 rounded-xl px-4 py-3 text-[13px] font-medium text-zinc-700 outline-none focus:border-zinc-400 focus:bg-white transition-all"},[(c(!0),f(oe,null,ye(l.value,O=>(c(),f("option",{key:O.id,value:O.id},w(O.name)+" ("+w(O.handle)+") ",9,E4))),128))],512),[[Nn,a.value.myActivePersonaId]]),E[18]||(E[18]=t("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-[18px] pointer-events-none"},"unfold_more",-1))]),t("div",T4,[t("div",j4,[t("div",A4,[t("img",{src:a.value.myAvatarOverride||g.value?.avatar,class:W(["w-full h-full object-cover",S(a.value.avatarShape)])},null,10,O4),E[19]||(E[19]=t("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[t("span",{class:"material-symbols-outlined text-white text-[20px]"},"photo_camera")],-1))]),t("input",{type:"file",accept:"image/*",onChange:E[2]||(E[2]=O=>r(O,"myAvatarOverride")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),t("div",P4,[t("div",R4,[le(t("input",{type:"text","onUpdate:modelValue":E[3]||(E[3]=O=>a.value.myNicknameOverride=O),placeholder:g.value?.handle||g.value?.name,class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,N4),[[pe,a.value.myNicknameOverride]]),E[20]||(E[20]=t("label",{class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},"Display Name",-1))]),t("div",L4,[le(t("input",{type:"text","onUpdate:modelValue":E[4]||(E[4]=O=>a.value.myAvatarOverride=O),placeholder:"Paste Image URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512),[[pe,a.value.myAvatarOverride]])])])])])]),t("section",D4,[t("div",V4,[t("span",B4,w(o.value.type==="group"||o.value.isGroup?"":""),1)]),t("div",U4,[t("div",F4,[t("div",W4,[t("img",{src:v.value,class:W(["w-full h-full object-cover",S(a.value.avatarShape)])},null,10,K4),E[21]||(E[21]=t("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[t("span",{class:"material-symbols-outlined text-white text-[20px]"},"edit")],-1))]),t("input",{type:"file",accept:"image/*",onChange:E[5]||(E[5]=O=>r(O,"remote")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),t("div",H4,[t("div",G4,[le(t("input",{type:"text","onUpdate:modelValue":E[6]||(E[6]=O=>j.value=O),placeholder:u.value?.handle||u.value?.name||o.value.handle||o.value.title||o.value.name||"",class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,q4),[[pe,j.value]]),t("label",Y4,w(o.value.type==="group"||o.value.isGroup?"Group Name":"Alias (Local)"),1)]),t("div",J4,[o.value.type==="group"||o.value.isGroup?le((c(),f("input",{key:0,type:"text","onUpdate:modelValue":E[7]||(E[7]=O=>a.value.groupAvatarOverride=O),placeholder:"Group Icon URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[pe,a.value.groupAvatarOverride]]):le((c(),f("input",{key:1,type:"text","onUpdate:modelValue":E[8]||(E[8]=O=>a.value.theirAvatarOverride=O),placeholder:"Avatar URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[pe,a.value.theirAvatarOverride]])])])])]),(o.value.type==="group"||o.value.isGroup)&&o.value.members?.length?(c(),f("section",X4,[E[23]||(E[23]=t("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[t("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),t("div",Q4,[(c(!0),f(oe,null,ye(B.value,O=>(c(),f("div",{key:O.id,class:"p-4 flex items-start gap-3 hover:bg-zinc-50/50 transition-colors group"},[t("div",Z4,[t("img",{src:a.value.memberOverrides?.[O.id]?.avatar||O.avatar,class:W(["w-full h-full object-cover",S(a.value.avatarShape)])},null,10,e5),E[22]||(E[22]=t("div",{class:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[t("span",{class:"material-symbols-outlined text-white text-[14px]"},"edit")],-1)),t("input",{type:"file",accept:"image/*",onChange:A=>L(A,O.id),class:"absolute inset-0 opacity-0 cursor-pointer z-10",title:""},null,40,t5)]),t("div",s5,[le(t("input",{type:"text","onUpdate:modelValue":A=>N(O.id).nickname=A,placeholder:O.handle||O.name,class:"w-full bg-transparent text-[14px] font-medium text-zinc-800 placeholder:text-zinc-300 focus:outline-none focus:border-b focus:border-zinc-300 transition-colors py-0.5"},null,8,n5),[[pe,N(O.id).nickname]]),le(t("input",{type:"text","onUpdate:modelValue":A=>N(O.id).avatar=A,placeholder:"Avatar URL...",class:"w-full bg-zinc-50/50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded px-2 py-1 text-[10px] text-zinc-500 max-w-[90%] outline-none transition-all placeholder:text-zinc-300"},null,8,o5),[[pe,N(O.id).avatar]])]),t("div",i5,[t("span",l5,w(O.handle),1)])]))),128))])])):M("",!0),t("section",a5,[E[31]||(E[31]=t("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[t("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),t("div",r5,[t("div",c5,[E[25]||(E[25]=t("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),t("label",d5,[le(t("input",{"onUpdate:modelValue":E[9]||(E[9]=O=>a.value.showSelfAvatar=O),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[Ds,a.value.showSelfAvatar]]),E[24]||(E[24]=t("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),t("div",u5,[E[27]||(E[27]=t("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),t("label",p5,[le(t("input",{"onUpdate:modelValue":E[10]||(E[10]=O=>a.value.showOtherAvatar=O),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[Ds,a.value.showOtherAvatar]]),E[26]||(E[26]=t("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),t("div",f5,[E[30]||(E[30]=t("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),t("div",v5,[t("button",{onClick:E[11]||(E[11]=O=>a.value.avatarShape="circle"),class:W(["size-7 rounded-md flex items-center justify-center transition-all",a.value.avatarShape==="circle"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...E[28]||(E[28]=[t("div",{class:"w-3 h-3 rounded-full border-[1.5px] border-current"},null,-1)])],2),t("button",{onClick:E[12]||(E[12]=O=>a.value.avatarShape="square"),class:W(["size-7 rounded-md flex items-center justify-center transition-all",a.value.avatarShape==="square"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...E[29]||(E[29]=[t("div",{class:"w-3 h-3 border-[1.5px] border-current rounded-[1px]"},null,-1)])],2)])])])])])])):M("",!0)]))}},b5=rt(x5,[["__scopeId","data-v-9a42c415"]]),m5={class:"h-full flex flex-col bg-white text-black font-sans"},g5={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},h5={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},y5={class:"w-full px-8 pb-32 flex-1 overflow-y-auto"},w5={class:"mt-8 mb-10 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},k5={class:"text-[14px] text-zinc-600"},_5={class:"font-bold text-black"},z5={class:"flex flex-col gap-10"},$5={class:"flex items-center justify-between py-2 border-b-2 border-black mb-4"},C5={class:"font-serif text-[18px] tracking-tight font-bold"},S5={class:"relative inline-flex items-center cursor-pointer"},I5=["checked","onChange"],M5={class:"noir-toggle-bg w-8 h-4 bg-zinc-200 rounded-full transition-colors duration-300"},E5={class:"flex flex-col gap-1"},T5={class:"flex flex-col"},j5={class:"text-[14px] font-medium group-hover:text-black text-zinc-700 transition-colors"},A5={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},O5={class:"relative inline-flex items-center cursor-pointer"},P5=["checked","disabled","onChange"],R5={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},N5={key:0,class:"py-2 text-center text-zinc-300 text-[12px] italic"},L5={__name:"WorldBookSelector",props:["chatId"],emits:["back"],setup(e,{emit:s}){const n=e,o=yo(),i=be(()=>mi(n.chatId)),l=C([]);Gt(()=>{i.value?.localSettings?.mountedWorldbooks&&(l.value=[...i.value.localSettings.mountedWorldbooks])});const a=be(()=>o.state.categories),r=be(()=>o.state.entries),p=B=>r.value.filter(N=>N.categoryId===B),b=B=>{const N=l.value.indexOf(B);N===-1?l.value.push(B):l.value.splice(N,1),g()},u=B=>l.value.includes(B),v=B=>{b(B)},g=async()=>{if(i.value){const B=i.value.localSettings||{};await Dn({id:n.chatId,localSettings:{...B,mountedWorldbooks:l.value}})}},j=be(()=>r.value.filter(B=>B.scope==="global").length);return(B,N)=>(c(),f("div",m5,[t("header",g5,[t("div",h5,[t("button",{onClick:N[0]||(N[0]=L=>B.$emit("back")),class:"flex items-center justify-center -ml-2 w-10 h-10 hover:bg-gray-100 rounded-full transition-colors"},[...N[1]||(N[1]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),N[2]||(N[2]=t("h1",{class:"font-serif text-[18px] font-light tracking-[0.15em] uppercase text-center flex-1 pr-8"},"",-1)),N[3]||(N[3]=t("div",{class:"w-8 hidden"},null,-1))])]),t("main",y5,[t("div",w5,[N[5]||(N[5]=t("span",{class:"block text-[12px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),t("p",k5,[t("span",_5,w(j.value),1),N[4]||(N[4]=ns("  ",-1))])]),t("div",z5,[(c(!0),f(oe,null,ye(a.value,L=>(c(),f("div",{key:L.id,class:"flex flex-col"},[t("div",$5,[t("span",C5,w(L.name),1),t("label",S5,[t("input",{type:"checkbox",class:"sr-only noir-toggle",checked:u(L.id),onChange:S=>v(L.id)},null,40,I5),t("div",M5,[t("div",{class:W(["noir-toggle-bg-thumb absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform duration-300 shadow-sm",u(L.id)?"translate-x-4":""])},null,2)])])]),t("div",E5,[(c(!0),f(oe,null,ye(p(L.id).filter(S=>S.scope==="local"),S=>(c(),f("div",{key:S.id,class:"flex items-center justify-between py-3 px-2 hover:bg-gray-50 rounded-lg transition-colors group"},[t("div",T5,[t("span",j5,w(S.title),1),t("span",A5,w(S.isConstant?"Constant":"Trigger")+"  "+w(S.position),1)]),t("label",O5,[t("input",{type:"checkbox",class:"sr-only",checked:u(L.id)||u(S.id),disabled:u(L.id),onChange:T=>!u(L.id)&&b(S.id)},null,40,P5),t("div",{class:W(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",u(L.id)||u(S.id)?"bg-black border-black":"bg-transparent"])},[u(L.id)||u(S.id)?(c(),f("span",R5,"check")):M("",!0)],2)])]))),128)),p(L.id).filter(S=>S.scope==="local").length===0?(c(),f("div",N5," No local entries ")):M("",!0)])]))),128))]),N[6]||(N[6]=t("div",{class:"h-20"},null,-1))])]))}},D5=rt(L5,[["__scopeId","data-v-623fc9e7"]]),V5={class:"relationship-network w-full h-full flex flex-col bg-white relative overflow-hidden"},B5={class:"h-[calc(3.5rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 z-30 bg-white/80 backdrop-blur sticky top-0"},U5={class:"flex items-center w-full justify-between"},F5={class:"material-symbols-outlined text-zinc-600 text-[20px]"},W5=["viewBox"],K5=["onClick"],H5=["x1","y1","x2","y2"],G5=["x1","y1","x2","y2","stroke-dasharray"],q5=["x","y"],Y5={class:"flex justify-center"},J5={class:"bg-white border border-zinc-200 px-2 py-0.5 rounded-full text-[10px] text-center font-bold text-zinc-500 group-hover:text-black group-hover:border-black transition-colors shadow-sm whitespace-nowrap"},X5={class:"absolute inset-0 w-full h-full pointer-events-none z-20"},Q5=["title"],Z5=["src"],e_={class:"absolute -bottom-6 bg-black text-white text-[10px] px-3 py-1 rounded-full uppercase font-bold tracking-widest whitespace-nowrap shadow-lg z-30"},t_=["title","onClick"],s_=["src"],n_={class:"absolute top-full mt-3 left-1/2 -translate-x-1/2 text-[11px] text-zinc-700 font-bold whitespace-nowrap bg-white/90 backdrop-blur px-2 py-0.5 rounded border border-zinc-100 shadow-sm z-30 pointer-events-none"},o_={class:"bg-white p-8 shadow-2xl rounded-2xl w-96 max-w-full flex flex-col gap-6 animate-in fade-in zoom-in duration-200"},i_={class:"bg-zinc-50 px-4 py-3 rounded-xl border border-zinc-100 focus-within:border-black focus-within:ring-1 focus-within:ring-black transition-all"},l_={class:"bg-white p-6 shadow-2xl rounded-2xl w-[400px] max-w-full flex flex-col gap-4 max-h-[80vh] animate-in fade-in slide-in-from-bottom-4 duration-300"},a_={class:"flex-1 overflow-y-auto custom-scrollbar px-1 space-y-5"},r_={class:"space-y-2"},c_=["onClick"],d_=["src"],u_={class:"flex flex-col flex-1"},p_={class:"text-sm font-bold text-zinc-900"},f_={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},v_={key:1,class:"ml-2"},x_={key:0,class:"text-[9px] bg-zinc-900 text-white px-2 py-0.5 rounded-full font-bold"},b_={key:0},m_={class:"space-y-2"},g_=["onClick"],h_=["src"],y_={class:"flex flex-col flex-1"},w_={class:"text-sm font-bold text-zinc-900"},k_={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},__={key:1,class:"ml-2"},z_={key:0,class:"text-[9px] bg-zinc-200 text-zinc-600 px-2 py-0.5 rounded-full font-bold"},$_={class:"flex gap-3 mt-2 shrink-0 pt-4 border-t border-zinc-50"},C_={key:1,class:"flex-1 py-3 bg-zinc-100 text-zinc-400 font-bold text-sm cursor-default rounded-xl"},S_={class:"flex flex-col h-full overflow-hidden"},I_={class:"p-5 border-b border-zinc-50 flex justify-between items-center sm:hidden"},M_={class:"flex-1 p-5 flex flex-col overflow-hidden"},E_={class:"font-serif text-xs font-bold tracking-widest text-zinc-400 uppercase mb-6 flex justify-between items-center"},T_={class:"bg-zinc-100 text-zinc-500 px-2 py-0.5 rounded-full text-[10px] font-bold"},j_={class:"space-y-4 overflow-y-auto flex-1 pr-1 custom-scrollbar pb-10"},A_=["onClick"],O_=["src"],P_={class:"text-sm font-bold text-zinc-700 truncate group-hover:text-black transition-colors"},R_=["onClick"],Zn=2e3,N_={__name:"RelationshipNetwork",emits:["back"],setup(e,{emit:s}){const n=C(!1),o=C(null),i=C(""),l=C(!1),a=C(!1),r=C(null),p=C(null),b=C(0),u=C(0),v=C(!1),g=C(0),j=C(0),B=C(1),N=Zn/2,L=K=>{K.target.tagName!=="svg"&&K.target.tagName!=="DIV"&&!K.target.classList.contains("canvas-area")||(v.value=!0,K.type==="touchstart"?(g.value=K.touches[0].clientX,j.value=K.touches[0].clientY):(g.value=K.clientX,j.value=K.clientY))},S=K=>{if(!v.value)return;let I,y;K.type==="touchmove"?(I=K.touches[0].clientX,y=K.touches[0].clientY):(I=K.clientX,y=K.clientY);const z=I-g.value,D=y-j.value;b.value+=z,u.value+=D,g.value=I,j.value=y},T=()=>{v.value=!1};Gt(()=>{b.value=-N+window.innerWidth/2,u.value=-N+window.innerHeight/2,window.addEventListener("mousemove",S),window.addEventListener("mouseup",T),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",T)}),zl(()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",T),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",T)});const E=be(()=>{const K=k.personas,I=k.relationships,y=k.contacts,z=K.map((xe,We)=>{const ot=K.length||1,Mt=150,ct=We/ot*2*Math.PI-Math.PI/2;return{...xe,nodeType:"persona",x:N+Mt*Math.cos(ct),y:N+Mt*Math.sin(ct)}}),D=new Set;I.forEach(xe=>{D.add(xe.sourceId),D.add(xe.targetId)});const ue=y.filter(xe=>D.has(xe.id)).map(xe=>{const We=I.filter(ct=>ct.sourceId===xe.id||ct.targetId===xe.id);let ot=0,Mt=350;if(We.length>0){let ct=0,Et=0,At=0;We.forEach(kt=>{const Ot=kt.sourceId===xe.id?kt.targetId:kt.sourceId,qt=z.find(_=>_.id===Ot);qt&&(ct+=qt.x-N,Et+=qt.y-N,At++)}),At>0?(ot=Math.atan2(Et,ct),At>1&&(Mt=250)):ot=xe.id.split("").reduce((Ot,qt)=>Ot+qt.charCodeAt(0),0)%360*(Math.PI/180)}else ot=xe.id.split("").reduce((Et,At)=>Et+At.charCodeAt(0),0)%360*(Math.PI/180);return{...xe,displayName:xe.handle||xe.nickname||xe.name,nodeType:"contact",idealAngle:ot,radius:Mt,x:0,y:0}});ue.sort((xe,We)=>xe.idealAngle-We.idealAngle);for(let xe=0;xe<ue.length;xe++){const We=ue[xe];if(xe>0){const ot=ue[xe-1],Mt=80/We.radius;let ct=We.idealAngle-ot.idealAngle;for(;ct<0;)ct+=Math.PI*2;ct<Mt&&(We.idealAngle=ot.idealAngle+Mt)}}ue.forEach(xe=>{xe.x=N+xe.radius*Math.cos(xe.idealAngle),xe.y=N+xe.radius*Math.sin(xe.idealAngle)});const F=[...z,...ue],ve=I.map(xe=>{const We=F.find(Mt=>Mt.id===xe.sourceId),ot=F.find(Mt=>Mt.id===xe.targetId);return We&&ot?{...xe,x1:We.x,y1:We.y,x2:ot.x,y2:ot.y,isCharChar:We.nodeType==="contact"&&ot.nodeType==="contact"}:null}).filter(Boolean);return{personaNodes:z,contactNodes:ue,links:ve}}),O=K=>{o.value=K,i.value=K.type,l.value=!0},A=async()=>{o.value&&i.value.trim()&&(await zc(o.value.id,i.value.trim()),l.value=!1,o.value=null)},R=async()=>{o.value&&confirm("")&&(await cf(o.value.id),l.value=!1,o.value=null)},Y=K=>{r.value=K,p.value=null,a.value=!0},we=async()=>{if(r.value&&p.value){if(k.relationships.find(y=>y.sourceId===p.value&&y.targetId===r.value||y.sourceId===r.value&&y.targetId===p.value)){alert("");return}const I="";await _c(p.value,r.value,I),a.value=!1,setTimeout(()=>{const y=k.relationships.find(z=>z.sourceId===p.value&&z.targetId===r.value&&z.type===I);y&&(o.value=y,i.value="",l.value=!0)},100),r.value=null}},ce=(K,I)=>{const y=k.relationships.find(z=>z.sourceId===K&&z.targetId===I||z.sourceId===I&&z.targetId===K);return y?y.type:null},ze=be(()=>k.contacts),Te=be(()=>r.value?k.contacts.filter(K=>K.id!==r.value):[]),se=K=>K.handle||K.nickname||K.name;return(K,I)=>(c(),f("div",V5,[t("header",B5,[t("div",U5,[t("button",{onClick:I[0]||(I[0]=y=>K.$emit("back")),class:"w-10 h-10 -ml-2 flex items-center justify-center hover:bg-zinc-100/50 rounded-full transition-colors"},[...I[7]||(I[7]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),I[8]||(I[8]=t("span",{class:"font-bold tracking-[0.2em] text-[13px] uppercase text-zinc-900 absolute left-1/2 -translate-x-1/2"}," (NETWORK)",-1)),t("button",{onClick:I[1]||(I[1]=y=>n.value=!n.value),class:"sm:hidden p-2 -mr-2 rounded-full hover:bg-zinc-100"},[t("span",F5,w(n.value?"close":"group_add"),1)]),I[9]||(I[9]=t("div",{class:"w-10 h-10 hidden sm:block"},null,-1))])]),t("div",{class:"flex-1 overflow-hidden relative bg-zinc-50 cursor-move",onMousedown:L,onTouchstart:L},[t("div",{class:"absolute top-0 left-0 w-full h-full canvas-area",style:Ve({transform:`translate(${b.value}px, ${u.value}px) scale(${B.value})`,transformOrigin:"0 0"})},[t("div",{class:"relative",style:Ve({width:`${Zn}px`,height:`${Zn}px`})},[I[10]||(I[10]=t("div",{class:"absolute inset-0 opacity-10 pointer-events-none",style:{"background-image":"radial-gradient(#000 1px, transparent 1px)","background-size":"20px 20px"}},null,-1)),(c(),f("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",viewBox:`0 0 ${Zn} ${Zn}`},[(c(!0),f(oe,null,ye(E.value.links,y=>(c(),f("g",{key:y.id,class:"pointer-events-auto cursor-pointer group",onClick:je(z=>O(y),["stop"])},[t("line",{x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,stroke:"transparent","stroke-width":"40"},null,8,H5),t("line",{x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,class:"stroke-zinc-300 stroke-1 group-hover:stroke-black transition-colors","stroke-dasharray":y.isCharChar?"8 4":"0"},null,8,G5),(c(),f("foreignObject",{x:(y.x1+y.x2)/2-50,y:(y.y1+y.y2)/2-12,width:"100",height:"24",class:"overflow-visible pointer-events-none"},[t("div",Y5,[t("span",J5,w(y.type),1)])],8,q5))],8,K5))),128))],8,W5)),t("div",X5,[(c(!0),f(oe,null,ye(E.value.personaNodes,y=>(c(),f("div",{key:y.id,class:"absolute w-20 h-20 -ml-10 -mt-10 rounded-full border-4 border-white ring-1 ring-zinc-200 bg-white flex items-center justify-center shadow-xl pointer-events-auto transition-transform hover:scale-110",style:Ve({left:`${y.x}px`,top:`${y.y}px`}),title:y.name},[t("img",{src:y.avatar,class:"w-full h-full rounded-full object-cover"},null,8,Z5),t("div",e_,"  ("+w(y.handle)+") ",1)],12,Q5))),128)),(c(!0),f(oe,null,ye(E.value.contactNodes,y=>(c(),f("div",{key:y.id,class:"absolute w-14 h-14 -ml-7 -mt-7 rounded-full border-2 border-white ring-1 ring-zinc-200 bg-white p-0.5 pointer-events-auto cursor-pointer hover:ring-black hover:shadow-xl transition-all flex items-center justify-center group",style:Ve({left:`${y.x}px`,top:`${y.y}px`}),title:y.displayName,onClick:je(z=>Y(y.id),["stop"])},[t("img",{src:y.avatar,class:"w-full h-full rounded-full object-cover"},null,8,s_),t("span",n_,w(y.displayName),1)],12,t_))),128))])],4)],4),I[11]||(I[11]=t("div",{class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] right-6 text-zinc-300 text-xs font-serif tracking-widest pointer-events-none select-none z-20"}," UNIFIED NETWORK   ",-1))],32),l.value?(c(),f("div",{key:0,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:I[3]||(I[3]=je(y=>l.value=!1,["self"]))},[t("div",o_,[I[12]||(I[12]=t("div",{class:"text-center"},[t("h3",{class:"font-bold text-lg text-zinc-900"}," (Define Link)"),t("p",{class:"text-zinc-500 text-xs mt-1"},"")],-1)),t("div",i_,[le(t("input",{"onUpdate:modelValue":I[2]||(I[2]=y=>i.value=y),ref:"typeInput",placeholder:"...",class:"bg-transparent border-none w-full text-center font-bold text-xl focus:ring-0 p-0 text-zinc-900 placeholder:text-zinc-300",onKeyup:xs(A,["enter"]),autofocus:""},null,544),[[pe,i.value]])]),t("div",{class:"grid grid-cols-2 gap-3"},[t("button",{onClick:R,class:"py-3 bg-white text-red-500 border border-zinc-200 hover:border-red-200 hover:bg-red-50 font-bold text-sm rounded-xl transition-all shadow-sm"},"  "),t("button",{onClick:A,class:"py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg shadow-zinc-200"},"  ")])])])):M("",!0),a.value?(c(),f("div",{key:1,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:I[5]||(I[5]=je(y=>a.value=!1,["self"]))},[t("div",l_,[I[17]||(I[17]=t("div",{class:"shrink-0 text-center pb-2 border-b border-zinc-50"},[t("h3",{class:"font-bold text-base text-zinc-900"}," (Connect)")],-1)),t("div",a_,[t("div",null,[I[14]||(I[14]=t("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (ME)",-1)),t("div",r_,[(c(!0),f(oe,null,ye(at(k).personas,y=>(c(),f("div",{key:y.id,onClick:z=>p.value=y.id,class:W(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",p.value===y.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[t("img",{src:y.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,d_),t("div",u_,[t("span",p_,w(y.handle),1)]),p.value===y.id?(c(),f("div",f_,[...I[13]||(I[13]=[t("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(c(),f("div",v_,[ce(r.value,y.id)?(c(),f("span",x_,w(ce(r.value,y.id)),1)):M("",!0)]))],10,c_))),128))])]),Te.value.length>0?(c(),f("div",b_,[I[16]||(I[16]=t("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (OTHERS)",-1)),t("div",m_,[(c(!0),f(oe,null,ye(Te.value,y=>(c(),f("div",{key:y.id,onClick:z=>p.value=y.id,class:W(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",p.value===y.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[t("img",{src:y.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,h_),t("div",y_,[t("span",w_,w(se(y)),1)]),p.value===y.id?(c(),f("div",k_,[...I[15]||(I[15]=[t("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(c(),f("div",__,[ce(r.value,y.id)?(c(),f("span",z_,w(ce(r.value,y.id)),1)):M("",!0)]))],10,g_))),128))])])):M("",!0)]),t("div",$_,[t("button",{onClick:I[4]||(I[4]=y=>a.value=!1),class:"flex-1 py-3 text-zinc-500 bg-white hover:bg-zinc-50 border border-zinc-200 font-bold text-sm rounded-xl transition-colors"},"  "),p.value&&!ce(r.value,p.value)?(c(),f("button",{key:0,onClick:we,class:"flex-1 py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg hover:shadow-xl"},"  ")):p.value?(c(),f("button",C_,"  ")):M("",!0)])])])):M("",!0),t("div",{class:W(["absolute right-0 top-0 bottom-0 pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)] bg-white border-l border-zinc-100 shadow-2xl transition-transform duration-300 transform w-80 z-40 flex flex-col",n.value?"translate-x-0":"translate-x-full sm:translate-x-0"])},[t("div",S_,[t("div",I_,[I[19]||(I[19]=t("span",{class:"font-bold text-xs text-zinc-500 uppercase tracking-widest"},"Directory",-1)),t("button",{onClick:I[6]||(I[6]=y=>n.value=!1),class:"p-2 rounded-full hover:bg-zinc-100"},[...I[18]||(I[18]=[t("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),t("div",M_,[t("h3",E_,[I[20]||(I[20]=t("span",null," (ALL)",-1)),t("span",T_,w(ze.value.length),1)]),t("div",j_,[(c(!0),f(oe,null,ye(ze.value,y=>(c(),f("div",{key:y.id,class:"flex items-center justify-between group"},[t("div",{class:"flex items-center gap-3 overflow-hidden cursor-pointer",onClick:z=>Y(y.id)},[t("img",{src:y.avatar,class:"w-10 h-10 rounded-full border border-zinc-100 object-cover shadow-sm transition-transform group-hover:scale-105"},null,8,O_),t("span",P_,w(se(y)),1)],8,A_),t("button",{onClick:z=>Y(y.id),class:"w-8 h-8 shrink-0 rounded-full border border-zinc-200 hover:border-black hover:bg-black hover:text-white flex items-center justify-center transition-all shadow-sm active:scale-90 opacity-0 group-hover:opacity-100",title:""},[...I[21]||(I[21]=[t("span",{class:"material-symbols-outlined text-[16px]"},"all_inclusive",-1)])],8,R_)]))),128))])]),I[22]||(I[22]=t("div",{class:"p-4 border-t border-zinc-50 bg-zinc-50/50"},[t("p",{class:"text-[10px] text-zinc-400 leading-relaxed text-center font-medium"},[ns(" "),t("br"),ns("   ")])],-1))])],2)]))}},L_=rt(N_,[["__scopeId","data-v-0cda6011"]]),D_={class:"h-full flex flex-col bg-white overflow-hidden relative"},V_={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},B_={class:"flex items-center gap-3"},U_={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},F_={class:"flex items-center gap-2"},W_={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},K_={key:0},H_={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},G_=["onClick"],q_={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-110 transition-transform mb-2"},Y_={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},J_={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},X_={key:0,class:"w-3 h-3 bg-black rounded-full"},Q_={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},Z_={class:"mb-8 flex items-end justify-between border-b border-zinc-50 pb-4"},e3={class:"flex-1 mr-8"},t3=["value"],s3={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-3 gap-y-8"},n3=["onClick"],o3=["src"],i3={key:0,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},l3={key:0,class:"w-3 h-3 bg-black rounded-full"},a3={key:1,class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},r3={class:"text-center px-1"},c3={class:"text-[11px] font-medium text-zinc-600 truncate leading-tight"},d3={key:0,class:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40 animate-in slide-in-from-bottom-4 duration-200"},u3={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},p3={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},f3={class:"grid grid-cols-2 gap-3"},v3={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},x3={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-2xl p-2"},b3=["onClick"],m3={key:0,class:"material-symbols-outlined text-sm"},g3={key:0,class:"text-center py-4 text-zinc-400 text-xs"},h3={class:"grid grid-cols-2 gap-3"},y3=["disabled"],w3={class:"bg-white w-[420px] max-w-full rounded-[32px] shadow-2xl flex flex-col gap-6 p-8 max-h-[85vh] animate-in zoom-in-95 duration-300 transform transition-all"},k3={class:"text-center mb-8"},_3={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},z3={class:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-6"},$3={class:"flex items-center justify-center w-full h-32 border border-dashed border-zinc-200 rounded-2xl cursor-pointer hover:border-black hover:bg-zinc-50 transition-all group"},C3={class:"mt-8 grid grid-cols-2 gap-3"},S3=["disabled"],I3={__name:"StickerLibrary",emits:["back"],setup(e,{emit:s}){const n=C(null),o=C(!1),i=C(""),l=C(!1),a=C(""),r=C(!1),p=C(!1),b=C(new Set),u=C(!1),v=C(""),g=C(null),j=be(()=>k.stickerCategories),B=async()=>{i.value.trim()&&(await Wa(i.value.trim(),""),i.value="",o.value=!1)},N=K=>{if(p.value){A(K.id);return}n.value=K,p.value=!1,b.value=new Set},L=async()=>{confirm("")&&(await Ka(n.value.id),n.value=null)},S=async K=>{const I=K.target.value.trim();I&&I!==n.value.name&&await uf(n.value.id,{name:I})},T=be(()=>n.value?On(n.value.id):[]),E=async()=>{if(!a.value.trim())return;r.value=!0;const K=a.value.split(`
`);for(const I of K){const y=I.split(/:(.+)/);let z="sticker",D=I.trim();y.length>1&&(z=y[0].trim(),D=y[1].trim()),D&&await No(n.value.id,D,z)}r.value=!1,a.value="",l.value=!1},O=async K=>{const I=K.target.files;if(!(!I||I.length===0)){r.value=!0;for(const y of I)if(y.type.startsWith("image/")){const z=new FileReader;await new Promise(D=>{z.onload=async ae=>{const ue=ae.target.result,F=y.name.replace(/\.[^/.]+$/,"");await No(n.value.id,ue,F),D()},z.readAsDataURL(y)})}r.value=!1,l.value=!1}},A=K=>{b.value.has(K)?b.value.delete(K):b.value.add(K)},R=()=>{const K=n.value?T.value:j.value;b.value.size===K.length?b.value.clear():K.forEach(I=>b.value.add(I.id))},Y=async()=>{if(b.value.size===0)return;const K=b.value.size,I=n.value?"":"";if(confirm(` ${K} ${I}`)){for(const y of b.value)n.value?await cl(y):await Ka(y);b.value.clear(),n.value||(p.value=!1)}},we=()=>{b.value.size!==0&&(u.value=!0,v.value="")},ce=async()=>{if(v.value){for(const K of b.value){const I=k.stickers.find(y=>y.id===K);I&&(await cl(K),await No(v.value,I.url,I.keyword))}b.value.clear(),p.value=!1,u.value=!1,n.value=null}},ze=()=>{if(b.value.size===0)return;const K={version:1,packs:[]};for(const D of b.value){const ae=j.value.find(ue=>ue.id===D);if(ae){const ue=On(D);K.packs.push({name:ae.name,stickers:ue.map(F=>({keyword:F.keyword,url:F.url}))})}}const I=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),y=URL.createObjectURL(I),z=document.createElement("a");z.href=y,z.download=`Roche_stickers_export_${Date.now()}.json`,z.click(),URL.revokeObjectURL(y),b.value.clear(),p.value=!1},Te=()=>{g.value.click()},se=async K=>{const I=K.target.files[0];if(!I)return;const y=new FileReader;y.onload=async z=>{try{const D=JSON.parse(z.target.result),ae=D.packs||(D.name?[D]:[]);if(ae.length>0){let ue=0;for(const F of ae)if(F.name&&Array.isArray(F.stickers)){const ve=await Wa(F.name+" (Import)","");for(const xe of F.stickers)await No(ve.id,xe.url,xe.keyword);ue++}alert(`Successfully imported ${ue} packs.`)}else alert("Invalid sticker pack format.")}catch(D){console.error(D),alert("Failed to parse sticker pack.")}K.target.value=""},y.readAsText(I)};return(K,I)=>(c(),f("div",D_,[t("div",V_,[t("div",B_,[t("button",{onClick:I[0]||(I[0]=y=>n.value?n.value=null:K.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...I[14]||(I[14]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("span",U_,w(n.value?n.value.name:"Sticker Packs"),1)]),t("div",F_,[!n.value&&!p.value?(c(),f(oe,{key:0},[t("button",{onClick:Te,class:"text-[10px] font-bold uppercase tracking-widest px-4 py-2 hover:bg-zinc-50 rounded-full border border-zinc-100 transition-colors flex items-center gap-2"},[...I[15]||(I[15]=[t("span",{class:"material-symbols-outlined text-[16px]"},"download",-1),t("span",null,"Import",-1)])]),t("input",{ref_key:"fileInputRef",ref:g,type:"file",accept:".json",class:"hidden",onChange:se},null,544),t("button",{onClick:I[1]||(I[1]=y=>p.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Packs"},[...I[16]||(I[16]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64)):p.value?(c(),f(oe,{key:1},[t("button",{onClick:R,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),t("button",{onClick:I[2]||(I[2]=y=>{p.value=!1,b.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-red-500"},"Cancel")],64)):(c(),f("button",{key:2,onClick:I[3]||(I[3]=y=>p.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Stickers"},[...I[17]||(I[17]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])]))])]),t("div",W_,[n.value?(c(),f("div",Q_,[t("div",Z_,[t("div",e3,[t("input",{value:n.value.name,onChange:S,class:"text-3xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0",placeholder:"Pack Name"},null,40,t3)]),t("button",{onClick:L,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors",title:"Delete Pack"},[...I[19]||(I[19]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),t("div",s3,[(c(!0),f(oe,null,ye(T.value,y=>(c(),f("div",{key:y.id,class:"relative group flex flex-col gap-2",onClick:z=>p.value?A(y.id):null},[t("div",{class:W(["aspect-square bg-zinc-50 rounded-2xl overflow-hidden border transition-all cursor-pointer relative",b.value.has(y.id)?"border-black ring-2 ring-black ring-offset-2":"border-zinc-50 hover:border-zinc-200"])},[t("img",{src:y.url,class:"w-full h-full object-cover"},null,8,o3),p.value?(c(),f("div",i3,[b.value.has(y.id)?(c(),f("div",l3)):M("",!0)])):(c(),f("div",a3,[...I[20]||(I[20]=[t("span",{class:"material-symbols-outlined text-white"},"visibility",-1)])]))],2),t("div",r3,[t("p",c3,w(y.keyword),1)])],8,n3))),128)),p.value?M("",!0):(c(),f("button",{key:0,onClick:I[5]||(I[5]=y=>l.value=!0),class:"aspect-square rounded-2xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-1"},[...I[21]||(I[21]=[t("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"add",-1),t("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"Add",-1)])]))])])):(c(),f("div",K_,[t("div",H_,[(c(!0),f(oe,null,ye(j.value,y=>(c(),f("div",{key:y.id,class:W(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border-2",b.value.has(y.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:z=>N(y)},[t("span",q_,w(y.name),1),t("div",Y_,w(at(On)(y.id).length)+" stickers",1),p.value?(c(),f("div",J_,[b.value.has(y.id)?(c(),f("div",X_)):M("",!0)])):M("",!0)],10,G_))),128)),p.value?M("",!0):(c(),f("button",{key:0,onClick:I[4]||(I[4]=y=>o.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...I[18]||(I[18]=[t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2"},"add",-1),t("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))])]))]),p.value&&b.value.size>0?(c(),f("div",d3,[t("span",u3,w(b.value.size)+" Selected",1),I[25]||(I[25]=t("div",{class:"h-4 w-px bg-white/20"},null,-1)),n.value?(c(),f("button",{key:1,onClick:we,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...I[23]||(I[23]=[t("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),t("span",{class:"text-[11px] font-bold"},"Move",-1)])])):(c(),f("button",{key:0,onClick:ze,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...I[22]||(I[22]=[t("span",{class:"material-symbols-outlined text-[18px]"},"ios_share",-1),t("span",{class:"text-[11px] font-bold"},"Export Items",-1)])])),I[26]||(I[26]=t("div",{class:"h-4 w-px bg-white/20"},null,-1)),t("button",{onClick:Y,class:"flex items-center gap-2 hover:text-red-300 transition-colors"},[...I[24]||(I[24]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1),t("span",{class:"text-[11px] font-bold"},"Delete",-1)])])])):M("",!0),(c(),Ee(ft,{to:"body"},[o.value?(c(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:I[8]||(I[8]=je(y=>o.value=!1,["self"]))},[t("div",p3,[I[27]||(I[27]=t("div",{class:"text-center"},[t("h3",{class:"font-serif italic text-2xl mb-1"},"New Sticker Pack"),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new collection")],-1)),le(t("input",{"onUpdate:modelValue":I[6]||(I[6]=y=>i.value=y),placeholder:"Name your pack...",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:xs(B,["enter"])},null,544),[[pe,i.value]]),t("div",f3,[t("button",{onClick:I[7]||(I[7]=y=>o.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:B,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[u.value?(c(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:I[10]||(I[10]=je(y=>u.value=!1,["self"]))},[t("div",v3,[I[28]||(I[28]=t("div",{class:"text-center"},[t("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),t("div",x3,[(c(!0),f(oe,null,ye(j.value.filter(y=>y.id!==n.value.id),y=>(c(),f("button",{key:y.id,onClick:z=>v.value=y.id,class:W(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",v.value===y.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[t("span",null,w(y.name),1),v.value===y.id?(c(),f("span",m3,"check")):M("",!0)],10,b3))),128)),j.value.length<=1?(c(),f("div",g3,"No other packs available")):M("",!0)]),t("div",h3,[t("button",{onClick:I[9]||(I[9]=y=>u.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:ce,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!v.value}," Move ",8,y3)])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[l.value?(c(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:I[13]||(I[13]=je(y=>l.value=!1,["self"]))},[t("div",w3,[t("div",k3,[I[29]||(I[29]=t("h3",{class:"font-serif italic text-2xl mb-1"},"Add Stickers",-1)),t("p",_3,w(n.value.name),1)]),t("div",z3,[t("div",null,[t("label",$3,[I[30]||(I[30]=t("div",{class:"flex flex-col items-center gap-2"},[t("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-white group-hover:shadow-md transition-all"},[t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black"},"cloud_upload")]),t("span",{class:"text-[10px] font-bold text-zinc-400 group-hover:text-black uppercase tracking-widest"},"Upload Images")],-1)),t("input",{type:"file",class:"hidden",multiple:"",accept:"image/*",onChange:O},null,32)])]),I[32]||(I[32]=t("div",{class:"flex items-center gap-4"},[t("div",{class:"h-px bg-zinc-100 flex-1"}),t("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"OR"),t("div",{class:"h-px bg-zinc-100 flex-1"})],-1)),t("div",null,[I[31]||(I[31]=t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 block"},"Batch Import URLs",-1)),le(t("textarea",{"onUpdate:modelValue":I[11]||(I[11]=y=>a.value=y),rows:"4",class:"w-full bg-zinc-50 rounded-2xl p-4 text-xs font-mono border-none focus:ring-1 focus:ring-black resize-none placeholder:text-zinc-300 outline-none",placeholder:`happy:http://example.com/happy.jpg
sad:http://example.com/sad.jpg`},null,512),[[pe,a.value]])])]),t("div",C3,[t("button",{onClick:I[12]||(I[12]=y=>l.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:E,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:r.value},w(r.value?"Processing...":"Confirm"),9,S3)])])])):M("",!0)]))]))}},M3={class:"h-full flex flex-col bg-white overflow-hidden relative"},E3={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center px-6 shrink-0 bg-white/95 backdrop-blur z-20"},T3={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},j3={class:"w-full aspect-[1.586] bg-black rounded-[24px] p-8 text-white flex flex-col justify-between shadow-2xl relative overflow-hidden mb-8 group"},A3={class:"relative z-10"},O3={class:"font-serif text-4xl font-bold tracking-tight"},P3={class:"grid grid-cols-2 gap-4 mb-8"},R3={class:"flex flex-col"},N3={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},L3={class:"text-xs text-red-500 text-center h-4 mb-6"},D3={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},V3={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},B3={key:0},U3={key:1,class:"text-center text-red-500 text-xs mb-4"},F3={class:"text-xs text-red-500 text-center h-4 mb-6"},W3={class:"grid grid-cols-2 gap-3"},K3=["disabled"],H3={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},G3={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},q3={class:"space-y-4 mb-6"},Y3={class:"text-xs text-red-500 text-center h-4 mb-6"},J3={class:"bg-white w-full max-w-md rounded-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-300"},X3={class:"px-6 py-4 border-b border-zinc-50 flex items-center gap-4 bg-zinc-50/50"},Q3={class:"relative group"},Z3={class:"flex-1 flex bg-zinc-100 p-1 rounded-lg"},ez={class:"flex-1 overflow-y-auto custom-scrollbar p-0"},tz={key:0,class:"flex flex-col items-center justify-center h-64 text-zinc-300 gap-2"},sz={key:1,class:"divide-y divide-zinc-50"},nz={class:"flex flex-col"},oz={class:"font-bold text-sm"},iz={class:"text-[10px] text-zinc-400 mt-1"},lz={__name:"Wallet",emits:["back"],setup(e,{emit:s}){const n=C(null),o=C(""),i=C(""),l=C(""),a=C(""),r=be(()=>k.wallet.balance.toFixed(2)),p=be(()=>k.wallet.hasPassword),b=be(()=>k.wallet.transactions),u=new Date,v=C(`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`),g=C("all"),j=be(()=>b.value.filter(O=>{const A=new Date(O.timestamp),Y=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}`===v.value;let we=!0;return g.value==="deposit"&&(we=O.type==="deposit"),g.value==="withdraw"&&(we=O.type==="withdraw"),Y&&we})),B=O=>{n.value=O,o.value="",i.value="",l.value="",a.value=""},N=()=>{n.value=null},L=()=>{const O=parseFloat(o.value);if(!O||O<=0){a.value="Please enter a valid amount";return}al("deposit",O,"Account Deposit"),N()},S=()=>{const O=parseFloat(o.value);if(!O||O<=0){a.value="Please enter a valid amount";return}if(O>k.wallet.balance){a.value="Insufficient balance";return}if(!p.value){a.value="Please set a payment password first";return}if(!kc(i.value)){a.value="Incorrect password";return}al("withdraw",O,"Withdrawal"),N()},T=()=>{if(i.value.length!==6||isNaN(i.value)){a.value="Password must be 6 digits";return}if(i.value!==l.value){a.value="Passwords do not match";return}Qp(i.value),N()},E=O=>new Date(O).toLocaleString();return(O,A)=>(c(),f("div",M3,[t("div",E3,[t("button",{onClick:A[0]||(A[0]=R=>O.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2 mr-2"},[...A[14]||(A[14]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),A[15]||(A[15]=t("span",{class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},"My Wallet",-1))]),t("div",T3,[t("div",j3,[A[17]||(A[17]=t("div",{class:"absolute -right-20 -top-20 w-64 h-64 bg-zinc-800/30 rounded-full blur-3xl group-hover:bg-zinc-700/30 transition-colors duration-500"},null,-1)),A[18]||(A[18]=t("div",{class:"flex items-center justify-between relative z-10"},[t("span",{class:"font-serif italic text-lg opacity-80"},"Noir Card"),t("span",{class:"material-symbols-outlined opacity-50"},"contactless")],-1)),t("div",A3,[A[16]||(A[16]=t("div",{class:"text-[11px] uppercase tracking-[0.2em] opacity-60 mb-1"},"Total Balance",-1)),t("div",O3," "+w(r.value),1)]),A[19]||(A[19]=t("div",{class:"flex items-center justify-between text-[10px] uppercase tracking-widest opacity-60 relative z-10"},[t("span",null,"**** 8848"),t("span",null,"Noir Inc.")],-1))]),t("div",P3,[t("button",{onClick:A[1]||(A[1]=R=>B("recharge")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...A[20]||(A[20]=[t("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"add_card",-1),t("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Top Up",-1)])]),t("button",{onClick:A[2]||(A[2]=R=>B("withdraw")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...A[21]||(A[21]=[t("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"payments",-1),t("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Withdraw",-1)])])]),t("div",R3,[t("button",{onClick:A[3]||(A[3]=R=>B("history")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...A[22]||(A[22]=[t("div",{class:"flex items-center gap-4"},[t("span",{class:"material-symbols-outlined text-zinc-400"},"receipt_long"),t("span",{class:"text-[15px] font-medium"},"Transaction History")],-1),t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])]),t("button",{onClick:A[4]||(A[4]=R=>B("password")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...A[23]||(A[23]=[t("div",{class:"flex items-center gap-4"},[t("span",{class:"material-symbols-outlined text-zinc-400"},"lock"),t("span",{class:"text-[15px] font-medium"},"Payment Security")],-1),t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])])])]),(c(),Ee(ft,{to:"body"},[n.value==="recharge"?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",N3,[A[24]||(A[24]=t("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Top Up",-1)),A[25]||(A[25]=t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},"Add funds to wallet",-1)),le(t("input",{"onUpdate:modelValue":A[5]||(A[5]=R=>o.value=R),type:"number",placeholder:"0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-2 bg-transparent",autofocus:""},null,512),[[pe,o.value]]),t("div",L3,w(a.value),1),t("div",{class:"grid grid-cols-2 gap-3"},[t("button",{onClick:N,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:L,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[n.value==="withdraw"?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",D3,[A[27]||(A[27]=t("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Withdraw",-1)),t("p",V3,"Available: "+w(r.value),1),le(t("input",{"onUpdate:modelValue":A[6]||(A[6]=R=>o.value=R),type:"number",placeholder:"Amount",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-6 bg-transparent"},null,512),[[pe,o.value]]),p.value?(c(),f("div",B3,[A[26]||(A[26]=t("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 mb-2"},"Payment Password",-1)),le(t("input",{"onUpdate:modelValue":A[7]||(A[7]=R=>i.value=R),type:"password",maxlength:"6",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black mb-2"},null,512),[[pe,i.value]])])):(c(),f("div",U3,"Please set password first")),t("div",F3,w(a.value),1),t("div",W3,[t("button",{onClick:N,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:S,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg",disabled:!p.value},"Confirm",8,K3)])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[n.value==="password"?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",H3,[A[28]||(A[28]=t("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Security",-1)),t("p",G3,w(p.value?"Change Password":"Set Payment Password"),1),t("div",q3,[t("div",null,[le(t("input",{"onUpdate:modelValue":A[8]||(A[8]=R=>i.value=R),type:"password",maxlength:"6",placeholder:"New Password (6 digits)",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[pe,i.value]])]),t("div",null,[le(t("input",{"onUpdate:modelValue":A[9]||(A[9]=R=>l.value=R),type:"password",maxlength:"6",placeholder:"Confirm Password",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[pe,l.value]])])]),t("div",Y3,w(a.value),1),t("div",{class:"grid grid-cols-2 gap-3"},[t("button",{onClick:N,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Save")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[n.value==="history"?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",J3,[t("div",{class:"p-6 border-b border-zinc-50 flex items-center justify-between shrink-0"},[A[30]||(A[30]=t("h3",{class:"font-serif italic text-2xl"},"Transactions",-1)),t("button",{onClick:N,class:"w-8 h-8 flex items-center justify-center bg-zinc-50 rounded-full hover:bg-zinc-100"},[...A[29]||(A[29]=[t("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),t("div",X3,[t("div",Q3,[le(t("input",{"onUpdate:modelValue":A[10]||(A[10]=R=>v.value=R),type:"month",class:"pl-8 pr-3 py-1.5 rounded-lg bg-white border border-zinc-200 text-xs font-bold uppercase tracking-wider focus:outline-none focus:border-black cursor-pointer w-32"},null,512),[[pe,v.value]]),A[31]||(A[31]=t("span",{class:"material-symbols-outlined text-[16px] absolute left-2 top-1.5 text-zinc-400 pointer-events-none"},"calendar_month",-1))]),t("div",Z3,[t("button",{onClick:A[11]||(A[11]=R=>g.value="all"),class:W(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",g.value==="all"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-black"])},"All",2),t("button",{onClick:A[12]||(A[12]=R=>g.value="deposit"),class:W(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",g.value==="deposit"?"bg-white shadow-sm text-green-600":"text-zinc-400 hover:text-black"])},"Income",2),t("button",{onClick:A[13]||(A[13]=R=>g.value="withdraw"),class:W(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",g.value==="withdraw"?"bg-white shadow-sm text-red-600":"text-zinc-400 hover:text-black"])},"Expense",2)])]),t("div",ez,[j.value.length===0?(c(),f("div",tz,[...A[32]||(A[32]=[t("span",{class:"material-symbols-outlined text-4xl"},"event_busy",-1),t("span",{class:"text-[10px] uppercase tracking-widest"},"No matching records",-1)])])):(c(),f("div",sz,[(c(!0),f(oe,null,ye(j.value,R=>(c(),f("div",{key:R.id,class:"flex items-center justify-between p-6 hover:bg-zinc-50 transition-colors"},[t("div",nz,[t("span",oz,w(R.title),1),t("span",iz,w(E(R.timestamp)),1)]),t("span",{class:W(["font-mono font-bold",R.type==="deposit"?"text-green-600":"text-black"])},w(R.type==="deposit"?"+":"-")+" "+w(R.amount.toFixed(2)),3)]))),128))]))])])])):M("",!0)]))]))}},az={class:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100 pb-6 z-[60]"},rz={class:"max-w-7xl mx-auto flex items-center justify-around h-16 px-4 w-full"},cz=["onClick"],dz={key:0,class:"w-10 h-10 bg-zinc-50 rounded-lg text-black hover:bg-zinc-100 flex items-center justify-center"},uz={__name:"Navigation",props:["activeTab"],emits:["change"],setup(e,{emit:s}){const n=s,o=[{id:"feed",icon:"home",customSvg:!0},{id:"inbox",icon:"mail"},{id:"compose",icon:"add",isAction:!0},{id:"activity",icon:"favorite"},{id:"profile",icon:"person"}],i=l=>{n("change",l)};return(l,a)=>(c(),f("nav",az,[t("div",rz,[(c(),f(oe,null,ye(o,r=>t("button",{key:r.id,onClick:p=>i(r.id),class:W(["flex items-center justify-center w-12 transition-colors",[r.isAction?"":e.activeTab===r.id?"text-black":"text-zinc-400 hover:text-black"]])},[r.isAction?(c(),f("div",dz,[...a[0]||(a[0]=[t("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])):r.customSvg?(c(),f("svg",{key:1,width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:W({"nav-icon-active":e.activeTab===r.id})},[...a[1]||(a[1]=[t("path",{d:"M3 10.5L12 3L21 10.5"},null,-1),t("path",{d:"M5 9.5V19C5 19.5523 5.44772 20 6 20H18C18.5523 20 19 19.5523 19 19V9.5"},null,-1)])],2)):(c(),f("span",{key:2,class:W(["material-symbols-outlined text-[26px]",{"active-icon":e.activeTab===r.id}])},w(r.icon),3))],10,cz)),64))])]))}},pz=rt(uz,[["__scopeId","data-v-0d87dcee"]]),fz={class:"h-full flex flex-col bg-white overflow-hidden relative font-sans text-black"},vz={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},xz={class:"flex items-center gap-3"},bz={class:"flex flex-col"},mz={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900 max-w-[200px] truncate"},gz={class:"flex items-center gap-2"},hz={key:0,class:"px-6 pt-2 pb-0 bg-white z-10"},yz={class:"flex items-center p-1.5 bg-zinc-100 rounded-full border border-zinc-200/50"},wz={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},kz={key:0},_z={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},zz=["onClick"],$z={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-105 transition-transform mb-2"},Cz={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},Sz={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center shadow-sm"},Iz={key:0,class:"w-2.5 h-2.5 bg-black rounded-full"},Mz={key:0,class:"mt-20 text-center text-zinc-300"},Ez={class:"text-xs uppercase tracking-widest"},Tz={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},jz={class:"mb-6 flex items-end justify-between border-b border-zinc-100 pb-4 pt-2 -mt-2"},Az={class:"flex-1 mr-8"},Oz=["value"],Pz={class:"text-[10px] text-zinc-400 uppercase tracking-widest block mt-1"},Rz={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Nz=["onClick"],Lz={class:"h-[100px] bg-zinc-100 flex items-center justify-center border-b border-zinc-100 relative p-3 overflow-hidden"},Dz=["innerHTML"],Vz={key:0,class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},Bz=["onClick"],Uz={key:1,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center shadow-sm z-10"},Fz={key:0,class:"w-2.5 h-2.5 bg-black rounded-full"},Wz={class:"p-3"},Kz={class:"font-bold text-[13px] truncate text-zinc-800"},Hz={class:"text-[10px] text-zinc-400 font-mono mt-0.5 block truncate opacity-70"},Gz={key:1,class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 bg-zinc-900 text-white pl-3 pr-3 py-1.5 rounded-full shadow-2xl flex items-center gap-3 z-40 animate-in slide-in-from-bottom-4 duration-200"},qz={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-400"},Yz={class:"bg-white w-full max-w-sm rounded-[24px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all border border-zinc-100"},Jz={class:"text-center"},Xz={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},Qz={class:"text-black font-bold"},Zz={class:"grid grid-cols-2 gap-3"},e$={class:"bg-white w-[420px] max-w-full rounded-[28px] shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 transform transition-all border border-zinc-100 overflow-hidden relative"},t$={class:"overflow-y-auto custom-scrollbar p-6 flex flex-col gap-5"},s$={class:"text-center mb-1"},n$={class:"font-sans font-bold text-xl mb-1 text-black tracking-tight"},o$={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},i$={class:"space-y-4"},l$={class:"space-y-1"},a$={class:"space-y-1"},r$={class:"space-y-1"},c$={class:"bg-zinc-50 rounded-xl p-6 flex items-center justify-center min-h-[100px] border border-dashed border-zinc-200 relative overflow-hidden"},d$=["innerHTML"],u$={key:1,class:"text-zinc-300 text-[10px] font-bold uppercase tracking-widest"},p$={class:"grid grid-cols-2 gap-3 mt-4"},f$={class:"bg-white w-full max-w-sm rounded-[24px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},v$={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-xl p-2"},x$=["onClick"],b$={key:0,class:"material-symbols-outlined text-sm"},m$={key:0,class:"text-center py-4 text-zinc-400 text-xs"},g$={class:"grid grid-cols-2 gap-3"},h$=["disabled"],y$={__name:"RegexManager",emits:["back"],setup(e,{emit:s}){const n=C("global"),o=C(null),i=C(!1),l=C(""),a=C(!1),r=C(null),p=C({name:"",regex:"",html:""}),b=C(!1),u=C(new Set),v=C(!1),g=C(""),j=C(null),B=be(()=>k.regexCategories.filter(y=>y.scope===n.value||!y.scope&&n.value==="local")),N=be(()=>o.value?Ki(o.value.id):[]),L=y=>{n.value=y,o.value=null,b.value=!1,u.value.clear()},S=y=>{if(b.value){Y(y.id);return}o.value=y,b.value=!1,u.value=new Set},T=async()=>{l.value.trim()&&(await Ja(l.value.trim(),n.value),l.value="",i.value=!1)},E=async y=>{const z=y.target.value.trim();z&&z!==o.value.name&&await zf(o.value.id,{name:z})},O=async()=>{confirm("Delete this category and all its cards?")&&(await Xa(o.value.id),o.value=null)},A=(y=null)=>{y?(r.value=y,p.value={...y}):(r.value=null,p.value={name:"",regex:"",html:""}),a.value=!0},R=async()=>{if(!p.value.name)return;const y={categoryId:o.value.id,name:p.value.name,regex:p.value.regex,html:p.value.html};r.value?await Za(r.value.id,y):await Qa(y),a.value=!1},Y=y=>{u.value.has(y)?u.value.delete(y):u.value.add(y)},we=()=>{const y=o.value?N.value:B.value;u.value.size===y.length?u.value.clear():y.forEach(z=>u.value.add(z.id))},ce=async()=>{if(u.value.size===0)return;const y=u.value.size;if(confirm(`Delete ${y} selected items?`)){for(const z of u.value)o.value?await Ic(z):await Xa(z);u.value.clear(),o.value||(b.value=!1)}},ze=()=>{u.value.size!==0&&(v.value=!0,g.value="")},Te=async()=>{if(g.value){for(const y of u.value)k.regexEntries.find(D=>D.id===y)&&await Za(y,{categoryId:g.value});u.value.clear(),b.value=!1,v.value=!1}},se=()=>{if(u.value.size===0)return;const y={version:1,categories:[]};if(o.value){const ue=N.value.filter(F=>u.value.has(F.id));y.categories.push({name:o.value.name,scope:o.value.scope,entries:ue})}else for(const ue of u.value){const F=B.value.find(ve=>ve.id===ue);if(F){const ve=Ki(ue);y.categories.push({name:F.name,scope:F.scope,entries:ve})}}const z=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),D=URL.createObjectURL(z),ae=document.createElement("a");ae.href=D,ae.download=`noir_regex_export_${Date.now()}.json`,ae.click(),URL.revokeObjectURL(D),u.value.clear(),b.value=!1},K=()=>{j.value.click()},I=async y=>{const z=y.target.files[0];if(!z)return;const D=new FileReader;D.onload=async ae=>{try{const ue=JSON.parse(ae.target.result),F=ue.categories||(ue.category?[ue]:[]);if(F.length>0){let ve=0;for(const xe of F){const We=await Ja(xe.name+" (Import)",n.value);if(xe.entries&&Array.isArray(xe.entries))for(const ot of xe.entries)await Qa({categoryId:We.id,name:ot.name,regex:ot.regex,html:ot.html});ve++}alert(`Successfully imported ${ve} categories.`)}else alert("Invalid regex format.")}catch(ue){console.error(ue),alert("Failed to parse file.")}y.target.value=""},D.readAsText(z)};return(y,z)=>(c(),f("div",fz,[t("div",vz,[t("div",xz,[t("button",{onClick:z[0]||(z[0]=D=>o.value?o.value=null:y.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...z[18]||(z[18]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("div",bz,[t("span",mz,w(o.value?o.value.name:"Regex Manager"),1)])]),t("div",gz,[!o.value&&!b.value?(c(),f(oe,{key:0},[t("button",{onClick:K,class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Import"},[...z[19]||(z[19]=[t("span",{class:"material-symbols-outlined text-[20px]"},"download",-1)])]),t("input",{ref_key:"fileInputRef",ref:j,type:"file",accept:".json",class:"hidden",onChange:I},null,544),t("button",{onClick:z[1]||(z[1]=D=>b.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select"},[...z[20]||(z[20]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64)):b.value?(c(),f(oe,{key:1},[t("button",{onClick:we,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),t("button",{onClick:z[2]||(z[2]=D=>{b.value=!1,u.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-zinc-400 hover:text-zinc-600"},"Cancel")],64)):(c(),f("button",{key:2,onClick:z[3]||(z[3]=D=>b.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select"},[...z[21]||(z[21]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])]))])]),o.value?M("",!0):(c(),f("div",hz,[t("div",yz,[t("button",{onClick:z[4]||(z[4]=D=>L("global")),class:W(["flex-1 flex flex-col items-center justify-center py-2.5 rounded-full transition-all duration-200",n.value==="global"?"bg-white shadow-sm text-black ring-1 ring-black/5":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-200/50"])},[...z[22]||(z[22]=[t("div",{class:"flex flex-col leading-none gap-0.5"},[t("span",{class:"text-[12px] font-bold uppercase tracking-wider"},"Global"),t("span",{class:"text-[9px] opacity-40 font-normal scale-90"},"Apply Everywhere")],-1)])],2),t("button",{onClick:z[5]||(z[5]=D=>L("local")),class:W(["flex-1 flex flex-col items-center justify-center py-2.5 rounded-full transition-all duration-200",n.value==="local"?"bg-white shadow-sm text-black ring-1 ring-black/5":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-200/50"])},[...z[23]||(z[23]=[t("div",{class:"flex flex-col leading-none gap-0.5"},[t("span",{class:"text-[12px] font-bold uppercase tracking-wider"},"Local"),t("span",{class:"text-[9px] opacity-40 font-normal scale-90"},"Mount per Chat")],-1)])],2)]),z[24]||(z[24]=t("div",{class:"h-px w-full bg-zinc-100 mt-4"},null,-1))])),t("div",wz,[o.value?(c(),f("div",Tz,[t("div",jz,[t("div",Az,[t("input",{value:o.value.name,onChange:E,class:"text-2xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0 text-zinc-900",placeholder:"Pack Name"},null,40,Oz),t("span",Pz,w(n.value)+" Pack  "+w(N.value.length)+" Cards",1)]),t("button",{onClick:O,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-300 hover:text-black transition-colors"},[...z[27]||(z[27]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),t("div",Rz,[(c(!0),f(oe,null,ye(N.value,D=>(c(),f("div",{key:D.id,class:W(["relative group rounded-xl bg-white border border-zinc-100 shadow-sm hover:shadow-md transition-all overflow-hidden",u.value.has(D.id)?"ring-1 ring-black":""]),onClick:ae=>b.value?Y(D.id):null},[t("div",Lz,[t("div",{class:"w-full h-full flex items-center justify-center pointer-events-none select-none origin-center scale-[0.7] entry-preview",innerHTML:D.html},null,8,Dz),b.value?M("",!0):(c(),f("div",Vz,[t("button",{onClick:je(ae=>A(D),["stop"]),class:"p-1.5 bg-white rounded-full shadow-sm hover:bg-zinc-100 text-zinc-600"},[...z[28]||(z[28]=[t("span",{class:"material-symbols-outlined text-[14px]"},"edit",-1)])],8,Bz)])),b.value?(c(),f("div",Uz,[u.value.has(D.id)?(c(),f("div",Fz)):M("",!0)])):M("",!0)]),t("div",Wz,[t("h4",Kz,w(D.name),1),t("code",Hz,w(D.regex),1)])],10,Nz))),128)),b.value?M("",!0):(c(),f("button",{key:0,onClick:z[7]||(z[7]=D=>A()),class:"min-h-[180px] rounded-xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-2 group"},[...z[29]||(z[29]=[t("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"add",-1),t("span",{class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black transition-colors"},"Add Card",-1)])]))])])):(c(),f("div",kz,[t("div",_z,[(c(!0),f(oe,null,ye(B.value,D=>(c(),f("div",{key:D.id,class:W(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border",u.value.has(D.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:ae=>S(D)},[t("span",$z,w(D.name),1),t("div",Cz,w(at(Ki)(D.id).length)+" cards",1),b.value?(c(),f("div",Sz,[u.value.has(D.id)?(c(),f("div",Iz)):M("",!0)])):M("",!0)],10,zz))),128)),b.value?M("",!0):(c(),f("button",{key:0,onClick:z[6]||(z[6]=D=>i.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...z[25]||(z[25]=[t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2 text-[32px]"},"add",-1),t("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))]),B.value.length===0&&!b.value?(c(),f("div",Mz,[z[26]||(z[26]=t("span",{class:"material-symbols-outlined text-[48px] mb-2 opacity-20"},"style",-1)),t("p",Ez,"No categories in "+w(n.value),1)])):M("",!0)]))]),b.value&&u.value.size>0?(c(),f("div",Gz,[t("span",qz,w(u.value.size),1),z[33]||(z[33]=t("div",{class:"h-3 w-px bg-zinc-700"},null,-1)),t("button",{onClick:se,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Export"},[...z[30]||(z[30]=[t("span",{class:"material-symbols-outlined text-[16px]"},"ios_share",-1)])]),o.value?(c(),f("button",{key:0,onClick:ze,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Move"},[...z[31]||(z[31]=[t("span",{class:"material-symbols-outlined text-[16px]"},"drive_file_move",-1)])])):M("",!0),t("button",{onClick:ce,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Delete"},[...z[32]||(z[32]=[t("span",{class:"material-symbols-outlined text-[16px]"},"delete",-1)])])])):M("",!0),(c(),Ee(ft,{to:"body"},[i.value?(c(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:z[10]||(z[10]=je(D=>i.value=!1,["self"]))},[t("div",Yz,[t("div",Jz,[z[35]||(z[35]=t("h3",{class:"font-serif italic text-2xl mb-1"},"New Pack",-1)),t("p",Xz,[z[34]||(z[34]=ns("Create a regex collection in ",-1)),t("span",Qz,w(n.value),1)])]),le(t("input",{"onUpdate:modelValue":z[8]||(z[8]=D=>l.value=D),placeholder:"Pack Name...",class:"w-full bg-zinc-50 border-none rounded-xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:xs(T,["enter"])},null,544),[[pe,l.value]]),t("div",Zz,[t("button",{onClick:z[9]||(z[9]=D=>i.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[a.value?(c(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:z[15]||(z[15]=je(D=>a.value=!1,["self"]))},[t("div",e$,[t("div",t$,[t("div",s$,[t("h3",n$,w(r.value?"Edit Card":"New Card"),1),t("p",o$,w(o.value.name),1)]),t("div",i$,[t("div",l$,[z[36]||(z[36]=t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest ml-1"},"Name",-1)),le(t("input",{"onUpdate:modelValue":z[11]||(z[11]=D=>p.value.name=D),type:"text",placeholder:"e.g. Bold Text",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 focus:ring-1 focus:ring-black transition-all outline-none text-sm"},null,512),[[pe,p.value.name]])]),t("div",a$,[z[37]||(z[37]=t("div",{class:"flex justify-between px-1"},[t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest"},"Regex"),t("a",{href:"https://regex101.com/",target:"_blank",class:"text-[9px] font-bold text-zinc-400 hover:text-black hover:underline transition-colors"},"Open Regex101 ")],-1)),le(t("input",{"onUpdate:modelValue":z[12]||(z[12]=D=>p.value.regex=D),type:"text",placeholder:"^\\d+$",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 font-mono text-sm focus:ring-1 focus:ring-black transition-all outline-none"},null,512),[[pe,p.value.regex]])]),t("div",r$,[z[38]||(z[38]=t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest ml-1"},"HTML Template",-1)),le(t("textarea",{"onUpdate:modelValue":z[13]||(z[13]=D=>p.value.html=D),rows:"4",placeholder:"<div>Content</div>",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 font-mono text-sm focus:ring-1 focus:ring-black transition-all resize-none outline-none"},null,512),[[pe,p.value.html]])]),t("div",c$,[p.value.html?(c(),f("div",{key:0,innerHTML:p.value.html},null,8,d$)):(c(),f("span",u$,"Preview Output"))])]),t("div",p$,[t("button",{onClick:z[14]||(z[14]=D=>a.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:R,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},w(r.value?"Save":"Create"),1)])])])])):M("",!0)])),(c(),Ee(ft,{to:"body"},[v.value?(c(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:z[17]||(z[17]=je(D=>v.value=!1,["self"]))},[t("div",f$,[z[39]||(z[39]=t("div",{class:"text-center"},[t("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),t("div",v$,[(c(!0),f(oe,null,ye(B.value.filter(D=>D.id!==o.value.id),D=>(c(),f("button",{key:D.id,onClick:ae=>g.value=D.id,class:W(["w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between",g.value===D.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[t("span",null,w(D.name),1),g.value===D.id?(c(),f("span",b$,"check")):M("",!0)],10,x$))),128)),B.value.length<=1?(c(),f("div",m$,"No other packs available")):M("",!0)]),t("div",g$,[t("button",{onClick:z[16]||(z[16]=D=>v.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:Te,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!g.value}," Move ",8,h$)])])])):M("",!0)]))]))}},w$=rt(y$,[["__scopeId","data-v-1a2505a7"]]),k$={class:"noir-app-container w-full h-full bg-white relative font-sans text-black overflow-hidden flex flex-col"},_$={key:3,class:"w-full h-full"},z$={key:10,class:"flex-1 flex items-center justify-center h-full"},$$={__name:"NoirApp",emits:["close"],setup(e,{emit:s}){const n=C("feed"),o=C(!1),i=C(null),l=C(!1),a=be(()=>k.videoCallState.isActive&&k.videoCallState.chatId?k.videoCallState.chatId:i.value?.id);Gt(()=>{ef()}),ds([()=>n.value,()=>k.videoCallState.isActive],([u,v])=>{(u==="chat"||v)&&(l.value=!0)});const r=(u,v=null)=>{i.value=v,n.value=u},p=u=>{if(u==="compose"){o.value=!0;return}n.value=u},b=be(()=>{const u=n.value;return u==="profile"&&i.value?.id||u==="following"?"feed":u});return(u,v)=>(c(),f("div",k$,[n.value==="feed"?(c(),Ee(Of,{key:0,onClose:v[0]||(v[0]=g=>u.$emit("close")),onNavigate:r})):M("",!0),n.value==="post"?(c(),Ee(gh,{key:1,postId:i.value?.id,onBack:v[1]||(v[1]=g=>r("feed"))},null,8,["postId"])):M("",!0),n.value==="inbox"?(c(),Ee(G0,{key:2,onNavigate:r,onClose:v[2]||(v[2]=g=>u.$emit("close"))})):M("",!0),l.value?le((c(),f("div",_$,[Ze(kg,{chatId:a.value,onBack:v[3]||(v[3]=g=>r("inbox")),onNavigate:r},null,8,["chatId"])],512)),[[El,n.value==="chat"]]):M("",!0),n.value==="chat-settings"?(c(),Ee(g4,{key:4,chatId:i.value?.id,onBack:v[4]||(v[4]=g=>r("chat",{id:i.value?.id})),onNavigate:r},null,8,["chatId"])):M("",!0),n.value==="chat-settings-identity"?(c(),Ee(b5,{key:5,chatId:i.value?.id,onBack:v[5]||(v[5]=g=>r("chat-settings",{id:i.value?.id}))},null,8,["chatId"])):M("",!0),n.value==="worldbook-selector"?(c(),Ee(D5,{key:6,chatId:i.value?.id,onBack:v[6]||(v[6]=g=>r("chat-settings",{id:i.value?.id}))},null,8,["chatId"])):M("",!0),n.value==="wallet"?(c(),Ee(lz,{key:7,onBack:v[7]||(v[7]=g=>r("profile"))})):M("",!0),n.value==="profile"?(c(),Ee(th,{key:8,contactId:i.value?.id,onBack:v[8]||(v[8]=g=>i.value?.id?r("following"):u.$emit("close")),onNavigate:r},null,8,["contactId"])):M("",!0),n.value==="char-memory"?(c(),Ee(a2,{key:9,contactId:i.value?.id,onBack:v[9]||(v[9]=g=>r("profile",{id:i.value?.id}))},null,8,["contactId"])):M("",!0),Ze(nn,{name:"slide-up"},{default:Cs(()=>[o.value?(c(),Ee(fh,{key:0,onClose:v[10]||(v[10]=g=>o.value=!1)})):M("",!0)]),_:1}),n.value==="activity"?(c(),f("div",z$,[...v[25]||(v[25]=[t("span",{class:"text-zinc-400 font-serif italic text-xl"},"Coming soon...",-1)])])):M("",!0),n.value==="persona-archive"?(c(),Ee(Eh,{key:11,onBack:v[11]||(v[11]=g=>r("profile")),onAdd:v[12]||(v[12]=g=>r("persona-edit")),onEdit:v[13]||(v[13]=g=>r("persona-edit",{id:g})),onSelect:v[14]||(v[14]=g=>r("profile"))})):M("",!0),n.value==="persona-edit"?(c(),Ee(Wh,{key:12,personaId:i.value?.id,onBack:v[15]||(v[15]=g=>r("persona-archive")),onSave:v[16]||(v[16]=g=>r("persona-archive"))},null,8,["personaId"])):M("",!0),n.value==="following"?(c(),Ee(iy,{key:13,onBack:v[17]||(v[17]=g=>r("feed")),onAdd:v[18]||(v[18]=g=>r("contact-edit")),onEdit:v[19]||(v[19]=g=>r("contact-edit",{id:g})),onNavigate:r})):M("",!0),n.value==="contact-edit"?(c(),Ee(yy,{key:14,contactId:i.value?.id,onBack:v[20]||(v[20]=g=>r("following")),onSave:v[21]||(v[21]=g=>r("following"))},null,8,["contactId"])):M("",!0),n.value==="relationship-network"?(c(),Ee(L_,{key:15,myPersonaId:i.value?.id,onBack:v[22]||(v[22]=g=>r("profile"))},null,8,["myPersonaId"])):M("",!0),n.value==="sticker-library"?(c(),Ee(I3,{key:16,onBack:v[23]||(v[23]=g=>r("profile"))})):M("",!0),n.value==="regex-manager"?(c(),Ee(w$,{key:17,onBack:v[24]||(v[24]=g=>r("profile"))})):M("",!0),["feed","inbox","profile","activity","following"].includes(n.value)||n.value==="profile"&&i.value?.id?(c(),Ee(pz,{key:18,activeTab:b.value,onChange:p},null,8,["activeTab"])):M("",!0)]))}},C$=rt($$,[["__scopeId","data-v-c14519fb"]]),S$={class:"h-full flex flex-col bg-white overflow-hidden"},I$={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},M$={class:"flex items-center gap-3"},E$={class:"flex-1 overflow-y-auto p-6 space-y-3 pb-12"},T$={class:"space-y-3"},j$={__name:"SettingsHome",emits:["close","navigate"],setup(e,{emit:s}){return(n,o)=>(c(),f("div",S$,[t("div",I$,[t("div",M$,[t("button",{onClick:o[0]||(o[0]=i=>n.$emit("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...o[2]||(o[2]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),o[3]||(o[3]=t("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"Settings",-1))])]),t("main",E$,[t("div",T$,[t("button",{onClick:o[1]||(o[1]=i=>n.$emit("navigate","api-setup")),class:"w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all"},[...o[4]||(o[4]=[wt('<div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>api</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501>API </span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Configure AI providers</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span>',2)])]),o[5]||(o[5]=wt('<button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>palette</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501></span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>person</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Manage personas</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>lock</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Privacy settings</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>notifications</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Notification preferences</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button>',4))]),o[6]||(o[6]=wt('<div class="mt-8" data-v-b01f0501><div class="text-[10px] text-zinc-400 uppercase tracking-widest mb-4 px-1 font-bold" data-v-b01f0501></div><div class="bg-zinc-50 rounded-2xl overflow-hidden" data-v-b01f0501><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors border-b border-zinc-100" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button></div><div class="text-center py-8" data-v-b01f0501><p class="text-[9px] font-mono uppercase tracking-[0.3em] text-zinc-300 italic" data-v-b01f0501>Settings  v2.4.0 (Build 992)</p></div></div><button class="w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors" data-v-b01f0501>  </button>',2))])]))}},A$=rt(j$,[["__scopeId","data-v-b01f0501"]]),O$={class:"h-full flex flex-col bg-white w-full relative overflow-hidden"},P$={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},R$={class:"flex items-center gap-3"},N$={class:"flex-1 overflow-y-auto p-6 pb-40 space-y-6"},L$={class:"flex gap-2 overflow-x-auto no-scrollbar pb-2"},D$=["onClick"],V$={class:"bg-zinc-50 rounded-2xl p-5"},B$={class:"flex gap-2"},U$={class:"bg-zinc-50 rounded-2xl p-5"},F$={class:"flex justify-between items-center mb-4"},W$={class:"mt-3 relative"},K$=["value"],H$={class:"bg-zinc-50 rounded-2xl p-5 space-y-4"},G$={class:"relative"},q$=["type"],Y$={class:"material-symbols-outlined text-[18px]"},J$={class:"bg-zinc-50 rounded-2xl p-5"},X$={class:"flex justify-between items-center mb-6"},Q$={class:"text-2xl font-semibold text-zinc-900"},Z$={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},e8={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},t8={class:"flex items-center gap-3"},s8={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},n8={class:"grid grid-cols-2 gap-3"},o8={key:1,class:"fixed inset-0 z-[9999] flex justify-end"},i8={class:"relative w-[300px] h-full bg-white shadow-2xl flex flex-col animate-slide-in-right"},l8={class:"p-5 border-b border-zinc-100 flex items-center justify-between shrink-0"},a8={class:"flex-1 overflow-y-auto p-5 space-y-6"},r8={class:"bg-zinc-50 rounded-xl p-4"},c8={class:"relative"},d8=["value"],u8={key:0,class:"mt-3 flex items-center gap-2 text-[11px] text-green-600"},p8={__name:"ApiSetup",emits:["back"],setup(e,{emit:s}){const n=s,{provider:o,endpoint:i,apiKey:l,model:a,temperature:r,stream:p,modelsList:b,presetState:u,init:v,getPresetById:g,saveCurrentAsPreset:j,deleteCurrentPreset:B,fetchModels:N,commitSettings:L}=Mc(),S=Ks({provider:"openai",endpoint:"",apiKey:"",model:"",temperature:.7,stream:!1,currentPresetId:"custom"}),T=C(!1),E=C(!1),O=C(""),A=C(!1),R=C(!1),Y=Ks({memorySummarization:null}),we=()=>{try{const ue=localStorage.getItem("noir_mounted_apis");if(ue){const F=JSON.parse(ue);F.memorySummarization&&(Y.memorySummarization=F.memorySummarization)}}catch(ue){console.warn("Failed to load mounted APIs:",ue)}};ds(Y,()=>{localStorage.setItem("noir_mounted_apis",JSON.stringify(Y))},{deep:!0}),Gt(async()=>{await v(),ze(),we()});const ze=()=>{S.provider=o.value,S.endpoint=i.value,S.apiKey=l.value,S.model=a.value,S.temperature=r.value,S.stream=p.value!==void 0?p.value:!1,S.currentPresetId=u.currentPresetId},Te=async()=>{await L({provider:S.provider,endpoint:S.endpoint,apiKey:S.apiKey,model:S.model,temperature:S.temperature,stream:S.stream,currentPresetId:S.currentPresetId}),n("back")},se=async()=>{T.value=!0,await N({endpoint:S.endpoint,apiKey:S.apiKey}),T.value=!1},K=async()=>{if(O.value)try{await j(O.value,S),E.value=!1,O.value="",ze()}catch(ue){console.error(ue),alert(": "+ue)}},I=async()=>{confirm("")&&(await B(),ze())},y=ue=>{if(ue==="custom"){S.currentPresetId="custom";return}const F=g(ue);F&&(S.provider=F.provider,S.endpoint=F.endpoint,F.apiKey&&(S.apiKey=F.apiKey),S.model=F.model,S.temperature=F.temperature,S.stream=F.stream!==void 0?F.stream:!1,S.currentPresetId=ue)},z=ue=>{S.provider=ue,ue==="gemini"?(S.endpoint="https://generativelanguage.googleapis.com/v1beta/openai/",S.model.includes("gpt")&&(S.model="gemini-1.5-flash")):S.endpoint="https://api.openai.com/v1",S.currentPresetId!=="custom"&&(S.currentPresetId="custom")},D=()=>{A.value=!A.value},ae=ue=>ue?ue==="custom"?"Custom":g(ue)?.name||ue:"";return(ue,F)=>(c(),f("div",O$,[t("div",P$,[t("div",R$,[t("button",{onClick:F[0]||(F[0]=ve=>ue.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...F[18]||(F[18]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),F[19]||(F[19]=t("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"API Setup",-1))]),t("button",{onClick:F[1]||(F[1]=ve=>R.value=!0),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 transition-colors"},[...F[20]||(F[20]=[t("span",{class:"material-symbols-outlined text-zinc-400 text-[20px]"},"tune",-1)])])]),t("main",N$,[t("div",L$,[(c(!0),f(oe,null,ye(at(u).list,ve=>(c(),f("button",{key:ve.id,onClick:xe=>y(ve.id),class:W(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",S.currentPresetId===ve.id?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])},w(ve.name),11,D$))),128)),t("button",{onClick:F[2]||(F[2]=ve=>y("custom")),class:W(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",S.currentPresetId==="custom"?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])}," Custom ",2)]),t("div",V$,[F[21]||(F[21]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold"}," / Provider",-1)),t("div",B$,[t("button",{onClick:F[3]||(F[3]=ve=>z("openai")),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",S.provider==="openai"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"OpenAI",2),t("button",{onClick:F[4]||(F[4]=ve=>z("gemini")),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",S.provider==="gemini"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"Gemini",2)])]),t("div",U$,[t("div",F$,[F[23]||(F[23]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Model",-1)),t("button",{onClick:se,class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-all flex items-center gap-2"},[F[22]||(F[22]=ns("  ",-1)),t("span",{class:W(["material-symbols-outlined text-[14px]",{"animate-spin":T.value}])},"sync",2)])]),le(t("input",{"onUpdate:modelValue":F[5]||(F[5]=ve=>S.model=ve),class:"w-full bg-white rounded-2xl py-4 px-5 text-[15px] focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none border-none",placeholder:""},null,512),[[pe,S.model]]),t("div",W$,[le(t("select",{id:"modelSelect","onUpdate:modelValue":F[6]||(F[6]=ve=>S.model=ve),class:"w-full bg-white rounded-2xl py-3 px-5 text-[13px] font-medium text-zinc-600 appearance-none focus:ring-1 focus:ring-black outline-none cursor-pointer"},[(c(!0),f(oe,null,ye(at(b),ve=>(c(),f("option",{key:ve,value:ve},w(ve),9,K$))),128))],512),[[Nn,S.model]]),F[24]||(F[24]=t("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),t("div",H$,[t("div",null,[F[25]||(F[25]=t("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest block mb-2 font-bold"}," / Endpoint",-1)),le(t("input",{"onUpdate:modelValue":F[7]||(F[7]=ve=>S.endpoint=ve),class:"w-full bg-white rounded-2xl py-3 px-5 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",type:"text",placeholder:"https://api.openai.com/v1"},null,512),[[pe,S.endpoint]])]),t("div",null,[F[26]||(F[26]=t("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest block mb-2 font-bold"},"API  ( Key  , )",-1)),t("div",G$,[le(t("input",{"onUpdate:modelValue":F[8]||(F[8]=ve=>S.apiKey=ve),type:A.value?"text":"password",class:"w-full bg-white rounded-2xl py-3 px-5 pr-12 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",placeholder:"sk-..., sk-..."},null,8,q$),[[Rp,S.apiKey]]),t("button",{onClick:D,class:"absolute right-3 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-400 hover:text-black transition-colors"},[t("span",Y$,w(A.value?"visibility_off":"visibility"),1)])])])]),t("div",J$,[t("div",X$,[F[27]||(F[27]=t("span",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Temperature",-1)),t("span",Q$,w(S.temperature),1)]),le(t("input",{"onUpdate:modelValue":F[9]||(F[9]=ve=>S.temperature=ve),class:"w-full",max:"2",min:"0",step:"0.1",type:"range"},null,512),[[pe,S.temperature,void 0,{number:!0}]]),F[28]||(F[28]=t("div",{class:"mt-3 flex justify-between text-[9px] font-mono uppercase text-zinc-300 tracking-widest"},[t("span",null," (0.0)"),t("span",null," (2.0)")],-1))]),t("div",Z$,[F[29]||(F[29]=t("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Streaming",-1)),t("button",{onClick:F[10]||(F[10]=ve=>S.stream=!S.stream),class:W(["w-14 h-8 rounded-full relative transition-colors duration-200",S.stream?"bg-black":"bg-zinc-200"])},[t("div",{class:W(["absolute top-1 left-1 w-6 h-6 rounded-full bg-white transition-transform duration-200 shadow-sm",S.stream?"translate-x-6":"translate-x-0"])},null,2)],2)]),t("div",e8,[F[30]||(F[30]=t("span",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"},"Preset Management",-1)),t("div",t8,[S.currentPresetId!=="custom"?(c(),f("button",{key:0,onClick:I,class:"px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-colors"},"  ")):M("",!0),t("button",{onClick:F[11]||(F[11]=ve=>E.value=!0),class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-600 hover:bg-zinc-100 transition-colors"},"")])]),(c(),Ee(ft,{to:"body"},[E.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-8 animate-in fade-in duration-200",onClick:F[14]||(F[14]=je(ve=>E.value=!1,["self"]))},[t("div",s8,[F[31]||(F[31]=t("div",{class:"text-center"},[t("h3",{class:"text-xl font-semibold mb-1"},"Save Preset"),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new configuration")],-1)),le(t("input",{"onUpdate:modelValue":F[12]||(F[12]=ve=>O.value=ve),placeholder:"Preset Name (e.g. Coding)",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:xs(K,["enter"])},null,544),[[pe,O.value]]),t("div",n8,[t("button",{onClick:F[13]||(F[13]=ve=>E.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),t("button",{onClick:K,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Save")])])])):M("",!0),R.value?(c(),f("div",o8,[t("div",{class:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:F[15]||(F[15]=ve=>R.value=!1)}),t("div",i8,[t("div",l8,[F[33]||(F[33]=t("div",null,[t("span",{class:"font-bold text-lg block"},"API "),t("span",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Function Bindings")],-1)),t("button",{onClick:F[16]||(F[16]=ve=>R.value=!1),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black"},[...F[32]||(F[32]=[t("span",{class:"material-symbols-outlined"},"close",-1)])])]),t("div",a8,[F[39]||(F[39]=t("div",{class:"bg-zinc-50 rounded-xl p-4 text-[12px] text-zinc-500 leading-relaxed"},[t("span",{class:"material-symbols-outlined text-[14px] mr-1 align-middle"},"info"),ns("  ")],-1)),t("div",r8,[F[37]||(F[37]=t("div",{class:"flex items-center gap-2 mb-3"},[t("span",{class:"material-symbols-outlined text-[18px] text-zinc-600"},"psychology"),t("span",{class:"text-[13px] font-bold"},"")],-1)),F[38]||(F[38]=t("p",{class:"text-[11px] text-zinc-400 mb-4"}," API ",-1)),t("div",c8,[le(t("select",{"onUpdate:modelValue":F[17]||(F[17]=ve=>Y.memorySummarization=ve),class:"w-full bg-white border border-zinc-200 rounded-lg py-2.5 px-4 text-[13px] appearance-none focus:border-black focus:outline-none cursor-pointer"},[F[34]||(F[34]=t("option",{value:null},"",-1)),(c(!0),f(oe,null,ye(at(u).list,ve=>(c(),f("option",{key:ve.id,value:ve.id},w(ve.name),9,d8))),128))],512),[[Nn,Y.memorySummarization]]),F[35]||(F[35]=t("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400 text-[18px]"},"expand_more",-1))]),Y.memorySummarization?(c(),f("div",u8,[F[36]||(F[36]=t("span",{class:"material-symbols-outlined text-[14px]"},"check_circle",-1)),ns(" : "+w(ae(Y.memorySummarization)),1)])):M("",!0)]),F[40]||(F[40]=t("div",{class:"text-center py-8 text-zinc-300 text-[11px] uppercase tracking-widest"},"  ",-1))])])])):M("",!0)])),t("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 w-[calc(100%-3rem)] max-w-sm"},[t("button",{onClick:Te,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl"},[...F[41]||(F[41]=[t("span",{class:"text-[11px] uppercase tracking-[0.2em] font-bold"},"",-1),t("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])])]))}},f8=rt(p8,[["__scopeId","data-v-c8052ce6"]]),v8={class:"h-full w-full bg-background-light dark:bg-background-dark text-black dark:text-white font-sans overflow-hidden relative"},x8={__name:"SettingsApp",emits:["close"],setup(e,{emit:s}){const n=s,o=C("home"),i=a=>{o.value=a},l=()=>{o.value==="home"?n("close"):o.value="home"};return(a,r)=>(c(),f("div",v8,[Ze(nn,{name:"slide"},{default:Cs(()=>[o.value==="home"?(c(),Ee(A$,{onClose:r[0]||(r[0]=p=>a.$emit("close")),onNavigate:i,key:"home"})):o.value==="api-setup"?(c(),Ee(f8,{onBack:l,key:"api-setup"})):M("",!0)]),_:1})]))}},b8=rt(x8,[["__scopeId","data-v-49131ef6"]]),m8={class:"h-full w-full bg-white flex flex-col"},g8={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},h8={class:"flex gap-2"},y8={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6 space-y-6"},w8={class:"bg-zinc-50 rounded-2xl p-5"},k8={class:"relative"},_8=["value"],z8={class:"bg-zinc-50 rounded-2xl p-5"},$8={class:"bg-zinc-50 rounded-2xl p-5"},C8={class:"flex gap-3"},S8={key:0,class:"bg-zinc-50 rounded-2xl p-5 animate-fade-in"},I8={class:"bg-zinc-50 rounded-2xl p-5"},M8={class:"flex gap-2"},E8={class:"bg-zinc-50 rounded-2xl p-5"},T8={class:"flex items-center justify-between mb-3"},j8={class:"text-[10px] text-zinc-400"},A8={class:"flex items-center gap-3"},O8={class:"text-2xl font-semibold w-12 text-center"},P8={__name:"EntryEdit",props:{entryId:{type:String,default:null},initialCategoryId:{type:String,required:!0},initialScope:{type:String,default:"global"}},emits:["back","save"],setup(e,{emit:s}){const n=e,o=s,i=yo(),l=C(""),a=C(""),r=C(n.initialCategoryId),p=C(n.initialScope),b=C(!1),u=C(""),v=C("front"),g=C(0),j=i.getCategories(),B=!n.entryId;Gt(()=>{if(!B&&n.entryId){const S=i.getEntry(n.entryId);S&&(l.value=S.title,a.value=S.content,r.value=S.categoryId,p.value=S.scope||"global",b.value=S.isConstant,u.value=S.keywords.join(", "),v.value=S.position,g.value=S.depth)}});const N=()=>{if(!l.value.trim()||!a.value.trim())return;const S={title:l.value,content:a.value,categoryId:r.value,scope:p.value,isConstant:b.value,keywords:b.value?[]:u.value.split(",").map(T=>T.trim()).filter(Boolean),position:v.value,depth:Number(g.value)};B?i.addEntry(S):n.entryId&&i.updateEntry(n.entryId,S),o("save")},L=()=>{!B&&n.entryId&&(i.deleteEntry(n.entryId),o("back"))};return(S,T)=>(c(),f("div",m8,[t("div",g8,[t("button",{onClick:T[0]||(T[0]=E=>o("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...T[12]||(T[12]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("div",h8,[B?M("",!0):(c(),f("button",{key:0,onClick:L,class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-400 hover:text-red-500 transition-colors"},[...T[13]||(T[13]=[t("span",{class:"material-symbols-outlined text-[20px]"},"delete",-1)])])),T[14]||(T[14]=t("button",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 transition-colors"},[t("span",{class:"material-symbols-outlined text-[20px]"},"more_horiz")],-1))])]),t("div",y8,[t("div",w8,[T[16]||(T[16]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-bold"}," / Category",-1)),t("div",k8,[le(t("select",{"onUpdate:modelValue":T[1]||(T[1]=E=>r.value=E),class:"w-full text-[15px] font-medium bg-white rounded-2xl py-3 px-5 outline-none appearance-none cursor-pointer focus:ring-1 focus:ring-black border-none"},[(c(!0),f(oe,null,ye(at(j),E=>(c(),f("option",{key:E.id,value:E.id},w(E.name),9,_8))),128))],512),[[Nn,r.value]]),T[15]||(T[15]=t("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),t("div",null,[T[17]||(T[17]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold px-1"}," / Title",-1)),le(t("input",{"onUpdate:modelValue":T[2]||(T[2]=E=>l.value=E),type:"text",placeholder:"Enter Title",class:"w-full text-2xl font-semibold bg-transparent focus:outline-none placeholder:text-zinc-300 border-none p-0"},null,512),[[pe,l.value]])]),t("div",z8,[T[18]||(T[18]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold"}," / Content",-1)),le(t("textarea",{"onUpdate:modelValue":T[3]||(T[3]=E=>a.value=E),placeholder:"Enter lore content...",class:"w-full min-h-[150px] text-[14px] leading-relaxed font-normal text-zinc-800 bg-white rounded-2xl p-4 outline-none resize-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[pe,a.value]])]),t("div",$8,[T[19]||(T[19]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-4 font-bold"}," / Mode",-1)),t("div",C8,[t("button",{onClick:T[4]||(T[4]=E=>b.value=!1),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",b.value?"bg-white text-zinc-500 hover:bg-zinc-100":"bg-black text-white"])},"  (Trigger) ",2),t("button",{onClick:T[5]||(T[5]=E=>b.value=!0),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",b.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Global) ",2)])]),b.value?M("",!0):(c(),f("div",S8,[T[20]||(T[20]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-bold"}," / Keywords",-1)),le(t("input",{"onUpdate:modelValue":T[6]||(T[6]=E=>u.value=E),type:"text",placeholder:"tag1, tag2...",class:"w-full text-lg font-medium bg-white rounded-2xl py-3 px-5 outline-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[pe,u.value]])])),t("div",I8,[T[21]||(T[21]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-4 font-bold"}," / Injection Position",-1)),t("div",M8,[t("button",{onClick:T[7]||(T[7]=E=>v.value="front"),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",v.value==="front"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Front) ",2),t("button",{onClick:T[8]||(T[8]=E=>v.value="mid"),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",v.value==="mid"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Mid) ",2),t("button",{onClick:T[9]||(T[9]=E=>v.value="back"),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",v.value==="back"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Back) ",2)])]),t("div",E8,[t("div",T8,[t("div",null,[T[22]||(T[22]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-1 font-bold"}," / Logic Depth",-1)),t("div",j8,w(g.value===0?"":`${g.value}`),1)]),t("div",A8,[t("button",{onClick:T[10]||(T[10]=E=>g.value=Math.max(0,g.value-1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...T[23]||(T[23]=[t("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"remove",-1)])]),t("span",O8,w(g.value),1),t("button",{onClick:T[11]||(T[11]=E=>g.value=Math.min(10,g.value+1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...T[24]||(T[24]=[t("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"add",-1)])])])]),T[25]||(T[25]=t("div",{class:"text-[10px] text-zinc-300 italic"},"0 = , 1-10 = ",-1))]),t("button",{onClick:N,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl mt-4"},[...T[26]||(T[26]=[t("span",{class:"text-[11px] font-bold uppercase tracking-[0.2em]"},"Save & Sync",-1),t("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])]))}},R8=rt(P8,[["__scopeId","data-v-560b7b8d"]]),N8={class:"h-full w-full bg-white flex flex-col relative overflow-hidden"},L8={key:0,class:"absolute inset-0 z-20 bg-white"},D8={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},V8={class:"max-h-60 overflow-y-auto bg-zinc-50 rounded-2xl p-2"},B8=["onClick"],U8={key:0,class:"material-symbols-outlined text-sm"},F8={class:"grid grid-cols-2 gap-3"},W8={key:1,class:"flex flex-col h-full"},K8={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},H8={class:"flex items-center gap-3"},G8={class:"flex bg-zinc-100 rounded-full p-1"},q8={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6"},Y8={key:0,class:"space-y-4"},J8={key:0,class:"animate-fade-in space-y-6"},X8={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40"},Q8={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},Z8={class:"space-y-4"},eC={class:"flex items-center justify-between mb-3"},tC=["onUpdate:modelValue","onChange"],sC=["onClick"],nC={class:"space-y-2"},oC=["onClick"],iC={class:"w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center"},lC={key:0,class:"w-3 h-3 bg-black rounded-full"},aC={class:"flex items-center gap-3"},rC=["disabled"],cC={key:1,class:"space-y-3"},dC=["onClick"],uC={class:"flex items-center gap-3"},pC={class:"text-[15px] font-medium text-zinc-900"},fC={class:"text-[9px] text-zinc-300 uppercase tracking-widest font-bold"},vC={key:0,class:"px-5 pb-5 pt-0 space-y-2 border-t border-zinc-100"},xC=["onClick"],bC={class:"font-medium text-[13px] text-zinc-800 group-hover/entry:text-black"},mC={class:"text-[11px] text-zinc-400 line-clamp-1 mt-0.5"},gC=["onClick"],hC={class:"text-[10px] font-bold text-zinc-300 group-hover/add:text-black uppercase tracking-wider"},yC={key:1,class:"mt-2"},wC={class:"relative mb-6"},kC={class:"space-y-3"},_C=["onClick"],zC={class:"flex items-center gap-2 mb-2"},$C={class:"text-[9px] font-bold px-2 py-1 bg-white rounded-full text-zinc-500 uppercase"},CC={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},SC={class:"text-[14px] font-medium text-zinc-900 mb-1"},IC={class:"text-[12px] text-zinc-500 line-clamp-2"},MC={class:"fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur pb-[env(safe-area-inset-bottom)] pt-3 flex justify-around items-center z-10 border-t border-zinc-50"},EC={__name:"WorldBookApp",emits:["close"],setup(e,{emit:s}){const n=s,o=yo(),i=C("home"),l=C("global"),a=C("main"),r=C(!1),p=C(""),b=C(new Set),u=C(!1),v=C(""),g=C(new Set),j=C(null),B=C(""),N=be(()=>o.getCategories()),L=C(""),S=be(()=>L.value?o.searchEntries(L.value):[]),T=y=>{if(r.value){ce(y);return}j.value=y,B.value="",a.value="edit"},E=y=>{j.value=null,B.value=y||N.value[0]?.id,a.value="edit"},O=()=>{a.value="main",j.value=null},A=()=>{a.value="main",j.value=null},R=()=>{p.value.trim()&&(o.addCategory(p.value.trim()),p.value="")},Y=y=>{confirm("Are you sure? This will delete all entries in this category.")&&o.deleteCategory(y)},we=()=>{r.value=!r.value,r.value&&(i.value="home"),b.value.clear()},ce=y=>{b.value.has(y)?b.value.delete(y):b.value.add(y),b.value=new Set(b.value)},ze=()=>{b.value.size!==0&&(v.value=N.value[0]?.id,u.value=!0)},Te=()=>{v.value&&(b.value.forEach(y=>{o.updateEntry(y,{categoryId:v.value})}),b.value.clear(),u.value=!1,r.value=!1)},se=y=>o.getEntriesByCategory(y,l.value),K=y=>{g.value.has(y)?g.value.delete(y):g.value.add(y),g.value=new Set(g.value)},I=y=>g.value.has(y);return(y,z)=>(c(),f("div",N8,[a.value==="edit"?(c(),f("div",L8,[Ze(R8,{"entry-id":j.value,"initial-category-id":B.value,"initial-scope":l.value,onBack:O,onSave:A},null,8,["entry-id","initial-category-id","initial-scope"])])):M("",!0),(c(),Ee(ft,{to:"body"},[u.value?(c(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:z[1]||(z[1]=je(D=>u.value=!1,["self"]))},[t("div",D8,[z[9]||(z[9]=t("div",{class:"text-center"},[t("h3",{class:"text-xl font-semibold mb-1"},"Move Entries"),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination category")],-1)),t("div",V8,[(c(!0),f(oe,null,ye(N.value,D=>(c(),f("button",{key:D.id,onClick:ae=>v.value=D.id,class:W(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",v.value===D.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[t("span",null,w(D.name),1),v.value===D.id?(c(),f("span",U8,"check")):M("",!0)],10,B8))),128))]),t("div",F8,[t("button",{onClick:z[0]||(z[0]=D=>u.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),t("button",{onClick:Te,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Confirm")])])])):M("",!0)])),a.value!=="edit"?(c(),f("div",W8,[t("div",K8,[t("div",H8,[t("button",{onClick:z[2]||(z[2]=D=>n("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...z[10]||(z[10]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),z[11]||(z[11]=t("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"World Book",-1))]),t("div",G8,[t("button",{onClick:z[3]||(z[3]=D=>l.value="global"),class:W(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all",l.value==="global"?"bg-black text-white":"text-zinc-500"])},"Global",2),t("button",{onClick:z[4]||(z[4]=D=>l.value="local"),class:W(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all",l.value==="local"?"bg-black text-white":"text-zinc-500"])},"Local",2)])]),t("div",q8,[i.value==="home"?(c(),f("div",Y8,[r.value?(c(),f("div",J8,[b.value.size>0?(c(),f("div",X8,[t("span",Q8,w(b.value.size)+" Selected",1),z[13]||(z[13]=t("div",{class:"h-4 w-px bg-white/20"},null,-1)),t("button",{onClick:ze,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...z[12]||(z[12]=[t("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),t("span",{class:"text-[11px] font-bold"},"Move",-1)])])])):M("",!0),z[16]||(z[16]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold flex items-center gap-2"},[t("span",{class:"material-symbols-outlined text-[14px]"},"edit"),ns(" Manage Categories ")],-1)),t("div",Z8,[(c(!0),f(oe,null,ye(N.value,D=>(c(),f("div",{key:D.id,class:"bg-zinc-50 rounded-2xl p-4"},[t("div",eC,[le(t("input",{"onUpdate:modelValue":ae=>D.name=ae,onChange:ae=>at(o).updateCategory(D.id,D.name),class:"flex-grow text-[15px] font-medium bg-transparent outline-none focus:ring-0 border-none p-0"},null,40,tC),[[pe,D.name]]),t("button",{onClick:ae=>Y(D.id),class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors"},[...z[14]||(z[14]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])],8,sC)]),t("div",nC,[(c(!0),f(oe,null,ye(se(D.id),ae=>(c(),f("div",{key:ae.id,onClick:ue=>ce(ae.id),class:W(["py-3 px-4 bg-white rounded-xl flex items-center gap-3 cursor-pointer transition-all",b.value.has(ae.id)?"ring-2 ring-black":"hover:bg-zinc-50"])},[t("div",iC,[b.value.has(ae.id)?(c(),f("div",lC)):M("",!0)]),t("div",{class:W(["font-medium text-[13px]",b.value.has(ae.id)?"text-black":"text-zinc-600"])},w(ae.title),3)],10,oC))),128))])]))),128)),t("div",aC,[le(t("input",{"onUpdate:modelValue":z[5]||(z[5]=D=>p.value=D),onKeyup:xs(R,["enter"]),placeholder:"New Category...",class:"flex-grow bg-zinc-50 rounded-2xl py-3 px-5 text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none"},null,544),[[pe,p.value]]),t("button",{onClick:R,class:"w-12 h-12 flex items-center justify-center bg-black text-white rounded-full hover:bg-zinc-800 transition-colors shadow-lg",disabled:!p.value.trim()},[...z[15]||(z[15]=[t("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])],8,rC)])])])):(c(),f("div",cC,[(c(!0),f(oe,null,ye(N.value,D=>(c(),f("div",{key:D.id,class:"bg-zinc-50 rounded-2xl overflow-hidden group"},[t("button",{onClick:ae=>K(D.id),class:"w-full flex items-center justify-between p-5 hover:bg-zinc-100 transition-colors"},[t("div",uC,[t("span",{class:W(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",I(D.id)?"rotate-90":""])},"chevron_right",2),t("h2",pC,w(D.name),1)]),t("span",fC,w(se(D.id).length)+" entries",1)],8,dC),I(D.id)?(c(),f("div",vC,[(c(!0),f(oe,null,ye(se(D.id),ae=>(c(),f("div",{key:ae.id,onClick:ue=>T(ae.id),class:"py-3 px-4 bg-white rounded-xl cursor-pointer hover:bg-zinc-100 transition-all group/entry"},[t("div",bC,w(ae.title),1),t("div",mC,w(ae.content),1)],8,xC))),128)),t("button",{onClick:ae=>E(D.id),class:"w-full py-3 border border-dashed border-zinc-200 rounded-xl flex items-center justify-center gap-2 hover:border-zinc-400 hover:bg-zinc-50 transition-all group/add"},[z[17]||(z[17]=t("span",{class:"material-symbols-outlined text-zinc-300 group-hover/add:text-black text-[16px]"},"add",-1)),t("span",hC,"Add "+w(l.value)+" Entry",1)],8,gC)])):M("",!0)]))),128))]))])):M("",!0),i.value==="search"?(c(),f("div",yC,[t("div",wC,[z[18]||(z[18]=t("span",{class:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400"},"search",-1)),le(t("input",{"onUpdate:modelValue":z[6]||(z[6]=D=>L.value=D),type:"text",placeholder:"Search entries...",class:"w-full pl-12 pr-4 py-4 bg-zinc-50 rounded-2xl text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none",autofocus:""},null,512),[[pe,L.value]])]),t("div",kC,[(c(!0),f(oe,null,ye(S.value,D=>(c(),f("div",{key:D.id,onClick:ae=>T(D.id),class:"bg-zinc-50 rounded-2xl p-4 cursor-pointer hover:bg-zinc-100 transition-all"},[t("div",zC,[t("span",$C,w(D.scope),1),t("span",CC,w(N.value.find(ae=>ae.id===D.categoryId)?.name),1)]),t("div",SC,w(D.title),1),t("div",IC,w(D.content),1)],8,_C))),128))])])):M("",!0)]),t("div",MC,[t("button",{onClick:we,class:W(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",r.value?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[t("span",{class:W(["material-symbols-outlined text-[24px]",r.value?"font-variation-fill":""])},"grid_view",2)],2),t("button",{onClick:z[7]||(z[7]=D=>E()),class:"w-14 h-14 bg-black rounded-full shadow-2xl active:scale-95 transition-transform flex items-center justify-center -mt-6"},[...z[19]||(z[19]=[t("span",{class:"material-symbols-outlined text-white text-[24px]"},"add",-1)])]),t("button",{onClick:z[8]||(z[8]=D=>i.value=i.value==="search"?"home":"search"),class:W(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",i.value==="search"?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[...z[20]||(z[20]=[t("span",{class:"material-symbols-outlined text-[24px]"},"search",-1)])],2)])])):M("",!0)]))}},TC=rt(EC,[["__scopeId","data-v-3d94a1bb"]]),jC={class:"relative h-screen w-full flex flex-col overflow-hidden bg-[#F2F2F7] font-sans text-black"},AC={class:"relative z-10 flex-grow px-5 pt-[calc(40px_+_env(safe-area-inset-top))] pb-32 overflow-y-auto no-scrollbar flex flex-col items-center gap-8"},OC={class:"w-full max-w-sm flex justify-between items-center mt-4"},PC={class:"flex flex-col gap-4"},RC={class:"flex flex-col gap-4"},NC={__name:"Desktop",emits:["open-app"],setup(e,{emit:s}){const n=s,o=()=>{n("open-app","noir")},i=()=>{n("open-app","worldbook")},l=()=>{n("open-app","settings")},a=r=>{console.log("Clicked",r)};return(r,p)=>(c(),f("div",jC,[t("div",AC,[t("div",OC,[t("div",PC,[t("button",{class:"app-pill",onClick:p[0]||(p[0]=b=>a("Music"))},[...p[4]||(p[4]=[t("span",{class:"material-symbols-outlined icon"},"headphones",-1),t("span",{class:"label"},"Music::",-1)])]),t("button",{class:"app-pill",onClick:p[1]||(p[1]=b=>a("Status"))},[...p[5]||(p[5]=[t("span",{class:"material-symbols-outlined icon fill-current"},"favorite",-1),t("span",{class:"label"},"Status",-1)])])]),p[8]||(p[8]=t("div",{class:"flex flex-col items-center gap-2 mx-2"},[t("div",{class:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-200"},[t("img",{src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover",alt:"Avatar"})]),t("div",{class:"text-[10px] text-gray-400 tracking-widest font-serif italic text-center leading-tight"}," **. ")],-1)),t("div",RC,[t("button",{class:"app-pill",onClick:p[2]||(p[2]=b=>a("Gallery"))},[...p[6]||(p[6]=[t("span",{class:"material-symbols-outlined icon"},"movie",-1),t("span",{class:"label"},"Gallery",-1)])]),t("button",{class:"app-pill",onClick:p[3]||(p[3]=b=>a("Weather"))},[...p[7]||(p[7]=[t("span",{class:"material-symbols-outlined icon"},"cloud",-1),t("span",{class:"label"},"Cloud",-1)])])])]),p[9]||(p[9]=wt('<div class="w-full max-w-sm grid grid-cols-[1.4fr_1fr] gap-4" data-v-6dbe5bb1><div class="bg-white rounded-[2rem] p-5 shadow-sm relative flex flex-col justify-between h-48 w-full" data-v-6dbe5bb1><div class="flex items-center gap-2 mb-1" data-v-6dbe5bb1><div class="w-1 h-3 bg-gray-300 rounded-full" data-v-6dbe5bb1></div><span class="text-xs text-gray-400 font-medium" data-v-6dbe5bb1>s.coups</span></div><div class="flex flex-col gap-2" data-v-6dbe5bb1><div class="flex flex-col gap-1 items-start" data-v-6dbe5bb1><span class="text-[10px] text-gray-400 ml-1" data-v-6dbe5bb1>    22:50</span></div><div class="self-end bg-[#333] text-white rounded-2xl rounded-tr-sm py-2.5 px-3 max-w-[90%] shadow-md" data-v-6dbe5bb1><span class="text-sm font-medium" data-v-6dbe5bb1></span><div class="flex justify-end items-center gap-1 mt-0.5" data-v-6dbe5bb1><span class="text-[8px] opacity-60" data-v-6dbe5bb1>jeonghan</span><span class="material-symbols-outlined text-[9px]" data-v-6dbe5bb1>done_all</span></div></div><div class="bg-gray-100/50 rounded-xl p-2 self-start max-w-[80%]" data-v-6dbe5bb1><span class="text-[9px] text-gray-500 leading-tight block" data-v-6dbe5bb1><br data-v-6dbe5bb1>  22:55</span></div></div></div><div class="grid grid-cols-2 gap-3 h-48 content-between" data-v-6dbe5bb1><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>calendar_month</span></div><span class="app-label" data-v-6dbe5bb1>Calendar</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>menu_book</span></div><span class="app-label" data-v-6dbe5bb1>WorldBook</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>pets</span></div><span class="app-label" data-v-6dbe5bb1>Pet</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>person</span></div><span class="app-label" data-v-6dbe5bb1>Me</span></button></div></div><div class="w-full max-w-sm flex justify-center gap-2 mt-4 relative h-40" data-v-6dbe5bb1><div class="polaroid rotate-[-6deg] translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/88/2c/83/882c83c21389c836dc22874136696b99.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[2deg] -translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/cf/17/dc/cf17dc13023cf8527a26f03027788484.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[8deg] translate-y-4 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/be/ab/e1/beabe17c5a08579932066d5b004278df.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption text-[8px] text-right pr-1 pt-1 opacity-50 font-serif" data-v-6dbe5bb1>~~</div></div></div>',2))]),t("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[85%] max-w-[280px] z-50"},[t("div",{class:"bg-white/80 backdrop-blur-xl border border-white/40 px-6 py-4 flex justify-between items-center shadow-lg rounded-[2.5rem]"},[t("button",{onClick:l,class:"dock-icon-btn"},[...p[10]||(p[10]=[t("span",{class:"material-symbols-outlined"},"settings",-1)])]),t("button",{onClick:i,class:"dock-icon-btn"},[...p[11]||(p[11]=[t("span",{class:"material-symbols-outlined"},"menu_book",-1)])]),t("button",{onClick:o,class:"dock-icon-btn"},[...p[12]||(p[12]=[t("span",{class:"material-symbols-outlined"},"chat_bubble",-1)])])])])]))}},LC=rt(NC,[["__scopeId","data-v-6dbe5bb1"]]),DC={id:"phone-screen",class:"w-full h-[100vh] relative overflow-hidden flex flex-col bg-white"},VC={key:0,class:"absolute inset-0 w-full h-full z-50 bg-white"},BC={key:0,class:"absolute inset-0 w-full h-full z-50 bg-white"},UC={key:0,class:"absolute inset-0 w-full h-full z-50 bg-white"},FC={__name:"App",setup(e){const s=C(!1),n=C(!1),o=C(!1),i=be(()=>s.value||k.videoCallState.isActive);ds(()=>k.videoCallState.isMinimized,b=>{!b&&k.videoCallState.isActive&&(s.value=!0)});const l=b=>{b==="noir"?s.value=!0:b==="settings"?n.value=!0:b==="worldbook"&&(o.value=!0)},a=()=>{s.value=!1},r=()=>{n.value=!1},p=()=>{o.value=!1};return(b,u)=>(c(),f("div",DC,[!s.value&&!n.value&&!o.value?(c(),Ee(LC,{key:0,onOpenApp:l})):M("",!0),Ze(nn,{name:"app-launch"},{default:Cs(()=>[i.value?le((c(),f("div",VC,[Ze(C$,{onClose:a})],512)),[[El,s.value]]):M("",!0)]),_:1}),Ze(nn,{name:"app-launch"},{default:Cs(()=>[n.value?(c(),f("div",BC,[Ze(b8,{onClose:r})])):M("",!0)]),_:1}),Ze(nn,{name:"app-launch"},{default:Cs(()=>[o.value?(c(),f("div",UC,[Ze(TC,{onClose:p})])):M("",!0)]),_:1})]))}};Fp(FC).mount("#app");
