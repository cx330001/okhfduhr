(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function ra(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Pe={},Qs=[],es=()=>{},Si=()=>!1,co=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),la=e=>e.startsWith("onUpdate:"),it=Object.assign,ca=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Jr=Object.prototype.hasOwnProperty,Ae=(e,t)=>Jr.call(e,t),le=Array.isArray,Js=e=>Tn(e)==="[object Map]",sn=e=>Tn(e)==="[object Set]",ja=e=>Tn(e)==="[object Date]",ge=e=>typeof e=="function",He=e=>typeof e=="string",ts=e=>typeof e=="symbol",Ee=e=>e!==null&&typeof e=="object",Ii=e=>(Ee(e)||ge(e))&&ge(e.then)&&ge(e.catch),Ai=Object.prototype.toString,Tn=e=>Ai.call(e),Yr=e=>Tn(e).slice(8,-1),Mi=e=>Tn(e)==="[object Object]",uo=e=>He(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,vn=ra(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fo=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Xr=/-\w/g,ws=fo(e=>e.replace(Xr,t=>t.slice(1).toUpperCase())),Zr=/\B([A-Z])/g,Cs=fo(e=>e.replace(Zr,"-$1").toLowerCase()),Ti=fo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Eo=fo(e=>e?`on${Ti(e)}`:""),hs=(e,t)=>!Object.is(e,t),Gn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ji=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},po=e=>{const t=parseFloat(e);return isNaN(t)?e:t},el=e=>{const t=He(e)?Number(e):NaN;return isNaN(t)?e:t};let Ea;const vo=()=>Ea||(Ea=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fe(e){if(le(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=He(o)?ol(o):Fe(o);if(a)for(const i in a)t[i]=a[i]}return t}else if(He(e)||Ee(e))return e}const tl=/;(?![^(]*\))/g,sl=/:([^]+)/,nl=/\/\*[^]*?\*\//g;function ol(e){const t={};return e.replace(nl,"").split(tl).forEach(n=>{if(n){const o=n.split(sl);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function J(e){let t="";if(He(e))t=e;else if(le(e))for(let n=0;n<e.length;n++){const o=J(e[n]);o&&(t+=o+" ")}else if(Ee(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const al="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",il=ra(al);function Ei(e){return!!e||e===""}function rl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Ks(e[o],t[o]);return n}function Ks(e,t){if(e===t)return!0;let n=ja(e),o=ja(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=ts(e),o=ts(t),n||o)return e===t;if(n=le(e),o=le(t),n||o)return n&&o?rl(e,t):!1;if(n=Ee(e),o=Ee(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,i=Object.keys(t).length;if(a!==i)return!1;for(const r in e){const l=e.hasOwnProperty(r),c=t.hasOwnProperty(r);if(l&&!c||!l&&c||!Ks(e[r],t[r]))return!1}}return String(e)===String(t)}function da(e,t){return e.findIndex(n=>Ks(n,t))}const Oi=e=>!!(e&&e.__v_isRef===!0),M=e=>He(e)?e:e==null?"":le(e)||Ee(e)&&(e.toString===Ai||!ge(e.toString))?Oi(e)?M(e.value):JSON.stringify(e,Pi,2):String(e),Pi=(e,t)=>Oi(t)?Pi(e,t.value):Js(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],i)=>(n[Oo(o,i)+" =>"]=a,n),{})}:sn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Oo(n))}:ts(t)?Oo(t):Ee(t)&&!le(t)&&!Mi(t)?String(t):t,Oo=(e,t="")=>{var n;return ts(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let _t;class ll{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_t,!t&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=_t;try{return _t=this,t()}finally{_t=n}}}on(){++this._on===1&&(this.prevScope=_t,_t=this)}off(){this._on>0&&--this._on===0&&(_t=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function cl(){return _t}let Re;const Po=new WeakSet;class Ni{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_t&&_t.active&&_t.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Po.has(this)&&(Po.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Li(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Oa(this),Di(this);const t=Re,n=Kt;Re=this,Kt=!0;try{return this.fn()}finally{Bi(this),Re=t,Kt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)pa(t);this.deps=this.depsTail=void 0,Oa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Po.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ho(this)&&this.run()}get dirty(){return Ho(this)}}let Ri=0,bn,xn;function Li(e,t=!1){if(e.flags|=8,t){e.next=xn,xn=e;return}e.next=bn,bn=e}function ua(){Ri++}function fa(){if(--Ri>0)return;if(xn){let t=xn;for(xn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;bn;){let t=bn;for(bn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Di(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bi(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),pa(o),dl(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Ho(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===kn)||(e.globalVersion=kn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ho(e))))return;e.flags|=2;const t=e.dep,n=Re,o=Kt;Re=e,Kt=!0;try{Di(e);const a=e.fn(e._value);(t.version===0||hs(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Re=n,Kt=o,Bi(e),e.flags&=-3}}function pa(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)pa(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function dl(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Kt=!0;const Vi=[];function us(){Vi.push(Kt),Kt=!1}function fs(){const e=Vi.pop();Kt=e===void 0?!0:e}function Oa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Re;Re=void 0;try{t()}finally{Re=n}}}let kn=0;class ul{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class va{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Re||!Kt||Re===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Re)n=this.activeLink=new ul(Re,this),Re.deps?(n.prevDep=Re.depsTail,Re.depsTail.nextDep=n,Re.depsTail=n):Re.deps=Re.depsTail=n,Ui(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Re.depsTail,n.nextDep=void 0,Re.depsTail.nextDep=n,Re.depsTail=n,Re.deps===n&&(Re.deps=o)}return n}trigger(t){this.version++,kn++,this.notify(t)}notify(t){ua();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{fa()}}}function Ui(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ui(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Zn=new WeakMap,Ds=Symbol(""),Go=Symbol(""),_n=Symbol("");function vt(e,t,n){if(Kt&&Re){let o=Zn.get(e);o||Zn.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new va),a.map=o,a.key=n),a.track()}}function ls(e,t,n,o,a,i){const r=Zn.get(e);if(!r){kn++;return}const l=c=>{c&&c.trigger()};if(ua(),t==="clear")r.forEach(l);else{const c=le(e),f=c&&uo(n);if(c&&n==="length"){const d=Number(o);r.forEach((p,h)=>{(h==="length"||h===_n||!ts(h)&&h>=d)&&l(p)})}else switch((n!==void 0||r.has(void 0))&&l(r.get(n)),f&&l(r.get(_n)),t){case"add":c?f&&l(r.get("length")):(l(r.get(Ds)),Js(e)&&l(r.get(Go)));break;case"delete":c||(l(r.get(Ds)),Js(e)&&l(r.get(Go)));break;case"set":Js(e)&&l(r.get(Ds));break}}fa()}function fl(e,t){const n=Zn.get(e);return n&&n.get(t)}function Gs(e){const t=we(e);return t===e?t:(vt(t,"iterate",_n),Tt(e)?t:t.map(Ht))}function bo(e){return vt(e=we(e),"iterate",_n),e}function xs(e,t){return ps(e)?en(Bs(e)?Ht(t):t):Ht(t)}const pl={__proto__:null,[Symbol.iterator](){return No(this,Symbol.iterator,e=>xs(this,e))},concat(...e){return Gs(this).concat(...e.map(t=>le(t)?Gs(t):t))},entries(){return No(this,"entries",e=>(e[1]=xs(this,e[1]),e))},every(e,t){return os(this,"every",e,t,void 0,arguments)},filter(e,t){return os(this,"filter",e,t,n=>n.map(o=>xs(this,o)),arguments)},find(e,t){return os(this,"find",e,t,n=>xs(this,n),arguments)},findIndex(e,t){return os(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return os(this,"findLast",e,t,n=>xs(this,n),arguments)},findLastIndex(e,t){return os(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return os(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ro(this,"includes",e)},indexOf(...e){return Ro(this,"indexOf",e)},join(e){return Gs(this).join(e)},lastIndexOf(...e){return Ro(this,"lastIndexOf",e)},map(e,t){return os(this,"map",e,t,void 0,arguments)},pop(){return rn(this,"pop")},push(...e){return rn(this,"push",e)},reduce(e,...t){return Pa(this,"reduce",e,t)},reduceRight(e,...t){return Pa(this,"reduceRight",e,t)},shift(){return rn(this,"shift")},some(e,t){return os(this,"some",e,t,void 0,arguments)},splice(...e){return rn(this,"splice",e)},toReversed(){return Gs(this).toReversed()},toSorted(e){return Gs(this).toSorted(e)},toSpliced(...e){return Gs(this).toSpliced(...e)},unshift(...e){return rn(this,"unshift",e)},values(){return No(this,"values",e=>xs(this,e))}};function No(e,t,n){const o=bo(e),a=o[t]();return o!==e&&!Tt(e)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.done||(i.value=n(i.value)),i}),a}const vl=Array.prototype;function os(e,t,n,o,a,i){const r=bo(e),l=r!==e&&!Tt(e),c=r[t];if(c!==vl[t]){const p=c.apply(e,i);return l?Ht(p):p}let f=n;r!==e&&(l?f=function(p,h){return n.call(this,xs(e,p),h,e)}:n.length>2&&(f=function(p,h){return n.call(this,p,h,e)}));const d=c.call(r,f,o);return l&&a?a(d):d}function Pa(e,t,n,o){const a=bo(e);let i=n;return a!==e&&(Tt(e)?n.length>3&&(i=function(r,l,c){return n.call(this,r,l,c,e)}):i=function(r,l,c){return n.call(this,r,xs(e,l),c,e)}),a[t](i,...o)}function Ro(e,t,n){const o=we(e);vt(o,"iterate",_n);const a=o[t](...n);return(a===-1||a===!1)&&xo(n[0])?(n[0]=we(n[0]),o[t](...n)):a}function rn(e,t,n=[]){us(),ua();const o=we(e)[t].apply(e,n);return fa(),fs(),o}const bl=ra("__proto__,__v_isRef,__isVue"),Ki=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ts));function xl(e){ts(e)||(e=String(e));const t=we(this);return vt(t,"has",e),t.hasOwnProperty(e)}class Wi{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return i;if(n==="__v_raw")return o===(a?i?zl:Qi:i?qi:Gi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const r=le(t);if(!a){let c;if(r&&(c=pl[n]))return c;if(n==="hasOwnProperty")return xl}const l=Reflect.get(t,n,at(t)?t:o);if((ts(n)?Ki.has(n):bl(n))||(a||vt(t,"get",n),i))return l;if(at(l)){const c=r&&uo(n)?l:l.value;return a&&Ee(c)?Qo(c):c}return Ee(l)?a?Qo(l):zs(l):l}}class Hi extends Wi{constructor(t=!1){super(!1,t)}set(t,n,o,a){let i=t[n];const r=le(t)&&uo(n);if(!this._isShallow){const f=ps(i);if(!Tt(o)&&!ps(o)&&(i=we(i),o=we(o)),!r&&at(i)&&!at(o))return f||(i.value=o),!0}const l=r?Number(n)<t.length:Ae(t,n),c=Reflect.set(t,n,o,at(t)?t:a);return t===we(a)&&(l?hs(o,i)&&ls(t,"set",n,o):ls(t,"add",n,o)),c}deleteProperty(t,n){const o=Ae(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&ls(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!ts(n)||!Ki.has(n))&&vt(t,"has",n),o}ownKeys(t){return vt(t,"iterate",le(t)?"length":Ds),Reflect.ownKeys(t)}}class gl extends Wi{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ml=new Hi,hl=new gl,yl=new Hi(!0);const qo=e=>e,Bn=e=>Reflect.getPrototypeOf(e);function wl(e,t,n){return function(...o){const a=this.__v_raw,i=we(a),r=Js(i),l=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,f=a[e](...o),d=n?qo:t?en:Ht;return!t&&vt(i,"iterate",c?Go:Ds),it(Object.create(f),{next(){const{value:p,done:h}=f.next();return h?{value:p,done:h}:{value:l?[d(p[0]),d(p[1])]:d(p),done:h}}})}}function Fn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function kl(e,t){const n={get(a){const i=this.__v_raw,r=we(i),l=we(a);e||(hs(a,l)&&vt(r,"get",a),vt(r,"get",l));const{has:c}=Bn(r),f=t?qo:e?en:Ht;if(c.call(r,a))return f(i.get(a));if(c.call(r,l))return f(i.get(l));i!==r&&i.get(a)},get size(){const a=this.__v_raw;return!e&&vt(we(a),"iterate",Ds),a.size},has(a){const i=this.__v_raw,r=we(i),l=we(a);return e||(hs(a,l)&&vt(r,"has",a),vt(r,"has",l)),a===l?i.has(a):i.has(a)||i.has(l)},forEach(a,i){const r=this,l=r.__v_raw,c=we(l),f=t?qo:e?en:Ht;return!e&&vt(c,"iterate",Ds),l.forEach((d,p)=>a.call(i,f(d),f(p),r))}};return it(n,e?{add:Fn("add"),set:Fn("set"),delete:Fn("delete"),clear:Fn("clear")}:{add(a){!t&&!Tt(a)&&!ps(a)&&(a=we(a));const i=we(this);return Bn(i).has.call(i,a)||(i.add(a),ls(i,"add",a,a)),this},set(a,i){!t&&!Tt(i)&&!ps(i)&&(i=we(i));const r=we(this),{has:l,get:c}=Bn(r);let f=l.call(r,a);f||(a=we(a),f=l.call(r,a));const d=c.call(r,a);return r.set(a,i),f?hs(i,d)&&ls(r,"set",a,i):ls(r,"add",a,i),this},delete(a){const i=we(this),{has:r,get:l}=Bn(i);let c=r.call(i,a);c||(a=we(a),c=r.call(i,a)),l&&l.call(i,a);const f=i.delete(a);return c&&ls(i,"delete",a,void 0),f},clear(){const a=we(this),i=a.size!==0,r=a.clear();return i&&ls(a,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=wl(a,e,t)}),n}function ba(e,t){const n=kl(e,t);return(o,a,i)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(Ae(n,a)&&a in o?n:o,a,i)}const _l={get:ba(!1,!1)},$l={get:ba(!1,!0)},Cl={get:ba(!0,!1)};const Gi=new WeakMap,qi=new WeakMap,Qi=new WeakMap,zl=new WeakMap;function Sl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Il(e){return e.__v_skip||!Object.isExtensible(e)?0:Sl(Yr(e))}function zs(e){return ps(e)?e:xa(e,!1,ml,_l,Gi)}function Al(e){return xa(e,!1,yl,$l,qi)}function Qo(e){return xa(e,!0,hl,Cl,Qi)}function xa(e,t,n,o,a){if(!Ee(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Il(e);if(i===0)return e;const r=a.get(e);if(r)return r;const l=new Proxy(e,i===2?o:n);return a.set(e,l),l}function Bs(e){return ps(e)?Bs(e.__v_raw):!!(e&&e.__v_isReactive)}function ps(e){return!!(e&&e.__v_isReadonly)}function Tt(e){return!!(e&&e.__v_isShallow)}function xo(e){return e?!!e.__v_raw:!1}function we(e){const t=e&&e.__v_raw;return t?we(t):e}function Ml(e){return!Ae(e,"__v_skip")&&Object.isExtensible(e)&&ji(e,"__v_skip",!0),e}const Ht=e=>Ee(e)?zs(e):e,en=e=>Ee(e)?Qo(e):e;function at(e){return e?e.__v_isRef===!0:!1}function N(e){return Tl(e,!1)}function Tl(e,t){return at(e)?e:new jl(e,t)}class jl{constructor(t,n){this.dep=new va,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:we(t),this._value=n?t:Ht(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Tt(t)||ps(t);t=o?t:we(t),hs(t,n)&&(this._rawValue=t,this._value=o?t:Ht(t),this.dep.trigger())}}function Ne(e){return at(e)?e.value:e}const El={get:(e,t,n)=>t==="__v_raw"?e:Ne(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return at(a)&&!at(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Ji(e){return Bs(e)?e:new Proxy(e,El)}function Ol(e){const t=le(e)?new Array(e.length):{};for(const n in e)t[n]=Nl(e,n);return t}class Pl{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=we(t);let a=!0,i=t;if(!le(t)||!uo(String(n)))do a=!xo(i)||Tt(i);while(a&&(i=i.__v_raw));this._shallow=a}get value(){let t=this._object[this._key];return this._shallow&&(t=Ne(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&at(this._raw[this._key])){const n=this._object[this._key];if(at(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return fl(this._raw,this._key)}}function Nl(e,t,n){return new Pl(e,t,n)}class Rl{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new va(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=kn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Re!==this)return Li(this,!0),!0}get value(){const t=this.dep.track();return Fi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ll(e,t,n=!1){let o,a;return ge(e)?o=e:(o=e.get,a=e.set),new Rl(o,a,n)}const Vn={},eo=new WeakMap;let Ns;function Dl(e,t=!1,n=Ns){if(n){let o=eo.get(n);o||eo.set(n,o=[]),o.push(e)}}function Bl(e,t,n=Pe){const{immediate:o,deep:a,once:i,scheduler:r,augmentJob:l,call:c}=n,f=A=>a?A:Tt(A)||a===!1||a===0?cs(A,1):cs(A);let d,p,h,I,R=!1,T=!1;if(at(e)?(p=()=>e.value,R=Tt(e)):Bs(e)?(p=()=>f(e),R=!0):le(e)?(T=!0,R=e.some(A=>Bs(A)||Tt(A)),p=()=>e.map(A=>{if(at(A))return A.value;if(Bs(A))return f(A);if(ge(A))return c?c(A,2):A()})):ge(e)?t?p=c?()=>c(e,2):e:p=()=>{if(h){us();try{h()}finally{fs()}}const A=Ns;Ns=d;try{return c?c(e,3,[I]):e(I)}finally{Ns=A}}:p=es,t&&a){const A=p,E=a===!0?1/0:a;p=()=>cs(A(),E)}const B=cl(),w=()=>{d.stop(),B&&B.active&&ca(B.effects,d)};if(i&&t){const A=t;t=(...E)=>{A(...E),w()}}let C=T?new Array(e.length).fill(Vn):Vn;const z=A=>{if(!(!(d.flags&1)||!d.dirty&&!A))if(t){const E=d.run();if(a||R||(T?E.some((G,ne)=>hs(G,C[ne])):hs(E,C))){h&&h();const G=Ns;Ns=d;try{const ne=[E,C===Vn?void 0:T&&C[0]===Vn?[]:C,I];C=E,c?c(t,3,ne):t(...ne)}finally{Ns=G}}}else d.run()};return l&&l(z),d=new Ni(p),d.scheduler=r?()=>r(z,!1):z,I=A=>Dl(A,!1,d),h=d.onStop=()=>{const A=eo.get(d);if(A){if(c)c(A,4);else for(const E of A)E();eo.delete(d)}},t?o?z(!0):C=d.run():r?r(z.bind(null,!0),!0):d.run(),w.pause=d.pause.bind(d),w.resume=d.resume.bind(d),w.stop=w,w}function cs(e,t=1/0,n){if(t<=0||!Ee(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,at(e))cs(e.value,t,n);else if(le(e))for(let o=0;o<e.length;o++)cs(e[o],t,n);else if(sn(e)||Js(e))e.forEach(o=>{cs(o,t,n)});else if(Mi(e)){for(const o in e)cs(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&cs(e[o],t,n)}return e}function jn(e,t,n,o){try{return o?e(...o):e()}catch(a){go(a,t,n)}}function Gt(e,t,n,o){if(ge(e)){const a=jn(e,t,n,o);return a&&Ii(a)&&a.catch(i=>{go(i,t,n)}),a}if(le(e)){const a=[];for(let i=0;i<e.length;i++)a.push(Gt(e[i],t,n,o));return a}}function go(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Pe;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,f)===!1)return}l=l.parent}if(i){us(),jn(i,null,10,[e,c,f]),fs();return}}Fl(e,n,a,o,r)}function Fl(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const mt=[];let Yt=-1;const Ys=[];let gs=null,qs=0;const Yi=Promise.resolve();let to=null;function Rs(e){const t=to||Yi;return e?t.then(this?e.bind(this):e):t}function Vl(e){let t=Yt+1,n=mt.length;for(;t<n;){const o=t+n>>>1,a=mt[o],i=$n(a);i<e||i===e&&a.flags&2?t=o+1:n=o}return t}function ga(e){if(!(e.flags&1)){const t=$n(e),n=mt[mt.length-1];!n||!(e.flags&2)&&t>=$n(n)?mt.push(e):mt.splice(Vl(t),0,e),e.flags|=1,Xi()}}function Xi(){to||(to=Yi.then(er))}function Ul(e){le(e)?Ys.push(...e):gs&&e.id===-1?gs.splice(qs+1,0,e):e.flags&1||(Ys.push(e),e.flags|=1),Xi()}function Na(e,t,n=Yt+1){for(;n<mt.length;n++){const o=mt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;mt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Zi(e){if(Ys.length){const t=[...new Set(Ys)].sort((n,o)=>$n(n)-$n(o));if(Ys.length=0,gs){gs.push(...t);return}for(gs=t,qs=0;qs<gs.length;qs++){const n=gs[qs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gs=null,qs=0}}const $n=e=>e.id==null?e.flags&2?-1:1/0:e.id;function er(e){try{for(Yt=0;Yt<mt.length;Yt++){const t=mt[Yt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),jn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Yt<mt.length;Yt++){const t=mt[Yt];t&&(t.flags&=-2)}Yt=-1,mt.length=0,Zi(),to=null,(mt.length||Ys.length)&&er()}}let Dt=null,tr=null;function so(e){const t=Dt;return Dt=e,tr=e&&e.type.__scopeId||null,t}function ys(e,t=Dt,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&ao(-1);const i=so(t);let r;try{r=e(...a)}finally{so(i),o._d&&ao(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function se(e,t){if(Dt===null)return e;const n=ko(Dt),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[i,r,l,c=Pe]=t[a];i&&(ge(i)&&(i={mounted:i,updated:i}),i.deep&&cs(r),o.push({dir:i,instance:n,value:r,oldValue:void 0,arg:l,modifiers:c}))}return e}function js(e,t,n,o){const a=e.dirs,i=t&&t.dirs;for(let r=0;r<a.length;r++){const l=a[r];i&&(l.oldValue=i[r].value);let c=l.dir[o];c&&(us(),Gt(c,n,8,[e.el,l,e,t]),fs())}}function Kl(e,t){if(yt){let n=yt.provides;const o=yt.parent&&yt.parent.provides;o===n&&(n=yt.provides=Object.create(o)),n[e]=t}}function qn(e,t,n=!1){const o=Er();if(o||Xs){let a=Xs?Xs._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&ge(t)?t.call(o&&o.proxy):t}}const Wl=Symbol.for("v-scx"),Hl=()=>qn(Wl);function Fs(e,t,n){return sr(e,t,n)}function sr(e,t,n=Pe){const{immediate:o,deep:a,flush:i,once:r}=n,l=it({},n),c=t&&o||!t&&i!=="post";let f;if(Sn){if(i==="sync"){const I=Hl();f=I.__watcherHandles||(I.__watcherHandles=[])}else if(!c){const I=()=>{};return I.stop=es,I.resume=es,I.pause=es,I}}const d=yt;l.call=(I,R,T)=>Gt(I,d,R,T);let p=!1;i==="post"?l.scheduler=I=>{gt(I,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(I,R)=>{R?I():ga(I)}),l.augmentJob=I=>{t&&(I.flags|=4),p&&(I.flags|=2,d&&(I.id=d.uid,I.i=d))};const h=Bl(e,t,l);return Sn&&(f?f.push(h):c&&h()),h}function Gl(e,t,n){const o=this.proxy,a=He(e)?e.includes(".")?nr(o,e):()=>o[e]:e.bind(o,o);let i;ge(t)?i=t:(i=t.handler,n=t);const r=En(this),l=sr(a,i.bind(o),n);return r(),l}function nr(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}const or=Symbol("_vte"),ar=e=>e.__isTeleport,gn=e=>e&&(e.disabled||e.disabled===""),Ra=e=>e&&(e.defer||e.defer===""),La=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Da=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Jo=(e,t)=>{const n=e&&e.to;return He(n)?t?t(n):null:n},ir={name:"Teleport",__isTeleport:!0,process(e,t,n,o,a,i,r,l,c,f){const{mc:d,pc:p,pbc:h,o:{insert:I,querySelector:R,createText:T,createComment:B}}=f,w=gn(t.props);let{shapeFlag:C,children:z,dynamicChildren:A}=t;if(e==null){const E=t.el=T(""),G=t.anchor=T("");I(E,n,o),I(G,n,o);const ne=(ee,de)=>{C&16&&d(z,ee,de,a,i,r,l,c)},pe=()=>{const ee=t.target=Jo(t.props,R),de=rr(ee,t,T,I);ee&&(r!=="svg"&&La(ee)?r="svg":r!=="mathml"&&Da(ee)&&(r="mathml"),a&&a.isCE&&(a.ce._teleportTargets||(a.ce._teleportTargets=new Set)).add(ee),w||(ne(ee,de),Qn(t,!1)))};w&&(ne(n,G),Qn(t,!0)),Ra(t.props)?(t.el.__isMounted=!1,gt(()=>{pe(),delete t.el.__isMounted},i)):pe()}else{if(Ra(t.props)&&e.el.__isMounted===!1){gt(()=>{ir.process(e,t,n,o,a,i,r,l,c,f)},i);return}t.el=e.el,t.targetStart=e.targetStart;const E=t.anchor=e.anchor,G=t.target=e.target,ne=t.targetAnchor=e.targetAnchor,pe=gn(e.props),ee=pe?n:G,de=pe?E:ne;if(r==="svg"||La(G)?r="svg":(r==="mathml"||Da(G))&&(r="mathml"),A?(h(e.dynamicChildren,A,ee,a,i,r,l),wa(e,t,!0)):c||p(e,t,ee,de,a,i,r,l,!1),w)pe?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Un(t,n,E,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ve=t.target=Jo(t.props,R);ve&&Un(t,ve,null,f,0)}else pe&&Un(t,G,ne,f,1);Qn(t,w)}},remove(e,t,n,{um:o,o:{remove:a}},i){const{shapeFlag:r,children:l,anchor:c,targetStart:f,targetAnchor:d,target:p,props:h}=e;if(p&&(a(f),a(d)),i&&a(c),r&16){const I=i||!gn(h);for(let R=0;R<l.length;R++){const T=l[R];o(T,t,n,I,!!T.dynamicChildren)}}},move:Un,hydrate:ql};function Un(e,t,n,{o:{insert:o},m:a},i=2){i===0&&o(e.targetAnchor,t,n);const{el:r,anchor:l,shapeFlag:c,children:f,props:d}=e,p=i===2;if(p&&o(r,t,n),(!p||gn(d))&&c&16)for(let h=0;h<f.length;h++)a(f[h],t,n,2);p&&o(l,t,n)}function ql(e,t,n,o,a,i,{o:{nextSibling:r,parentNode:l,querySelector:c,insert:f,createText:d}},p){function h(T,B,w,C){B.anchor=p(r(T),B,l(T),n,o,a,i),B.targetStart=w,B.targetAnchor=C}const I=t.target=Jo(t.props,c),R=gn(t.props);if(I){const T=I._lpa||I.firstChild;if(t.shapeFlag&16)if(R)h(e,t,T,T&&r(T));else{t.anchor=r(e);let B=T;for(;B;){if(B&&B.nodeType===8){if(B.data==="teleport start anchor")t.targetStart=B;else if(B.data==="teleport anchor"){t.targetAnchor=B,I._lpa=t.targetAnchor&&r(t.targetAnchor);break}}B=r(B)}t.targetAnchor||rr(I,t,d,f),p(T&&r(T),t,I,n,o,a,i)}Qn(t,R)}else R&&t.shapeFlag&16&&h(e,t,e,r(e));return t.anchor&&r(t.anchor)}const At=ir;function Qn(e,t){const n=e.ctx;if(n&&n.ut){let o,a;for(t?(o=e.el,a=e.anchor):(o=e.targetStart,a=e.targetAnchor);o&&o!==a;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function rr(e,t,n,o){const a=t.targetStart=n(""),i=t.targetAnchor=n("");return a[or]=i,e&&(o(a,e),o(i,e)),i}const rs=Symbol("_leaveCb"),Kn=Symbol("_enterCb");function Ql(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jt(()=>{e.isMounted=!0}),br(()=>{e.isUnmounting=!0}),e}const Rt=[Function,Array],lr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rt,onEnter:Rt,onAfterEnter:Rt,onEnterCancelled:Rt,onBeforeLeave:Rt,onLeave:Rt,onAfterLeave:Rt,onLeaveCancelled:Rt,onBeforeAppear:Rt,onAppear:Rt,onAfterAppear:Rt,onAppearCancelled:Rt},cr=e=>{const t=e.subTree;return t.component?cr(t.component):t},Jl={name:"BaseTransition",props:lr,setup(e,{slots:t}){const n=Er(),o=Ql();return()=>{const a=t.default&&fr(t.default(),!0);if(!a||!a.length)return;const i=dr(a),r=we(e),{mode:l}=r;if(o.isLeaving)return Lo(i);const c=Ba(i);if(!c)return Lo(i);let f=Yo(c,r,o,n,p=>f=p);c.type!==ht&&Cn(c,f);let d=n.subTree&&Ba(n.subTree);if(d&&d.type!==ht&&!Ls(d,c)&&cr(n).type!==ht){let p=Yo(d,r,o,n);if(Cn(d,p),l==="out-in"&&c.type!==ht)return o.isLeaving=!0,p.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},Lo(i);l==="in-out"&&c.type!==ht?p.delayLeave=(h,I,R)=>{const T=ur(o,d);T[String(d.key)]=d,h[rs]=()=>{I(),h[rs]=void 0,delete f.delayedLeave,d=void 0},f.delayedLeave=()=>{R(),delete f.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return i}}};function dr(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==ht){t=n;break}}return t}const Yl=Jl;function ur(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Yo(e,t,n,o,a){const{appear:i,mode:r,persisted:l=!1,onBeforeEnter:c,onEnter:f,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:h,onLeave:I,onAfterLeave:R,onLeaveCancelled:T,onBeforeAppear:B,onAppear:w,onAfterAppear:C,onAppearCancelled:z}=t,A=String(e.key),E=ur(n,e),G=(ee,de)=>{ee&&Gt(ee,o,9,de)},ne=(ee,de)=>{const ve=de[1];G(ee,de),le(ee)?ee.every(q=>q.length<=1)&&ve():ee.length<=1&&ve()},pe={mode:r,persisted:l,beforeEnter(ee){let de=c;if(!n.isMounted)if(i)de=B||c;else return;ee[rs]&&ee[rs](!0);const ve=E[A];ve&&Ls(e,ve)&&ve.el[rs]&&ve.el[rs](),G(de,[ee])},enter(ee){let de=f,ve=d,q=p;if(!n.isMounted)if(i)de=w||f,ve=C||d,q=z||p;else return;let j=!1;const g=ee[Kn]=x=>{j||(j=!0,x?G(q,[ee]):G(ve,[ee]),pe.delayedLeave&&pe.delayedLeave(),ee[Kn]=void 0)};de?ne(de,[ee,g]):g()},leave(ee,de){const ve=String(e.key);if(ee[Kn]&&ee[Kn](!0),n.isUnmounting)return de();G(h,[ee]);let q=!1;const j=ee[rs]=g=>{q||(q=!0,de(),g?G(T,[ee]):G(R,[ee]),ee[rs]=void 0,E[ve]===e&&delete E[ve])};E[ve]=e,I?ne(I,[ee,j]):j()},clone(ee){const de=Yo(ee,t,n,o,a);return a&&a(de),de}};return pe}function Lo(e){if(mo(e))return e=ks(e),e.children=null,e}function Ba(e){if(!mo(e))return ar(e.type)&&e.children?dr(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&ge(n.default))return n.default()}}function Cn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Cn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fr(e,t=!1,n){let o=[],a=0;for(let i=0;i<e.length;i++){let r=e[i];const l=n==null?r.key:String(n)+String(r.key!=null?r.key:i);r.type===ae?(r.patchFlag&128&&a++,o=o.concat(fr(r.children,t,l))):(t||r.type!==ht)&&o.push(l!=null?ks(r,{key:l}):r)}if(a>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function pr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const no=new WeakMap;function mn(e,t,n,o,a=!1){if(le(e)){e.forEach((R,T)=>mn(R,t&&(le(t)?t[T]:t),n,o,a));return}if(hn(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&mn(e,t,n,o.component.subTree);return}const i=o.shapeFlag&4?ko(o.component):o.el,r=a?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===Pe?l.refs={}:l.refs,p=l.setupState,h=we(p),I=p===Pe?Si:R=>Ae(h,R);if(f!=null&&f!==c){if(Fa(t),He(f))d[f]=null,I(f)&&(p[f]=null);else if(at(f)){f.value=null;const R=t;R.k&&(d[R.k]=null)}}if(ge(c))jn(c,l,12,[r,d]);else{const R=He(c),T=at(c);if(R||T){const B=()=>{if(e.f){const w=R?I(c)?p[c]:d[c]:c.value;if(a)le(w)&&ca(w,i);else if(le(w))w.includes(i)||w.push(i);else if(R)d[c]=[i],I(c)&&(p[c]=d[c]);else{const C=[i];c.value=C,e.k&&(d[e.k]=C)}}else R?(d[c]=r,I(c)&&(p[c]=r)):T&&(c.value=r,e.k&&(d[e.k]=r))};if(r){const w=()=>{B(),no.delete(e)};w.id=-1,no.set(e,w),gt(w,n)}else Fa(e),B()}}}function Fa(e){const t=no.get(e);t&&(t.flags|=8,no.delete(e))}vo().requestIdleCallback;vo().cancelIdleCallback;const hn=e=>!!e.type.__asyncLoader,mo=e=>e.type.__isKeepAlive;function Xl(e,t){vr(e,"a",t)}function Zl(e,t){vr(e,"da",t)}function vr(e,t,n=yt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(ho(t,o,n),n){let a=n.parent;for(;a&&a.parent;)mo(a.parent.vnode)&&ec(o,t,n,a),a=a.parent}}function ec(e,t,n,o){const a=ho(t,e,o,!0);ma(()=>{ca(o[t],a)},n)}function ho(e,t,n=yt,o=!1){if(n){const a=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{us();const l=En(n),c=Gt(t,n,e,r);return l(),fs(),c});return o?a.unshift(i):a.push(i),i}}const vs=e=>(t,n=yt)=>{(!Sn||e==="sp")&&ho(e,(...o)=>t(...o),n)},tc=vs("bm"),jt=vs("m"),sc=vs("bu"),nc=vs("u"),br=vs("bum"),ma=vs("um"),oc=vs("sp"),ac=vs("rtg"),ic=vs("rtc");function rc(e,t=yt){ho("ec",e,t)}const lc=Symbol.for("v-ndc");function xe(e,t,n,o){let a;const i=n,r=le(e);if(r||He(e)){const l=r&&Bs(e);let c=!1,f=!1;l&&(c=!Tt(e),f=ps(e),e=bo(e)),a=new Array(e.length);for(let d=0,p=e.length;d<p;d++)a[d]=t(c?f?en(Ht(e[d])):Ht(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){a=new Array(e);for(let l=0;l<e;l++)a[l]=t(l+1,l,void 0,i)}else if(Ee(e))if(e[Symbol.iterator])a=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);a=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];a[c]=t(e[d],d,c,i)}}else a=[];return a}const Xo=e=>e?Or(e)?ko(e):Xo(e.parent):null,yn=it(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xo(e.parent),$root:e=>Xo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>gr(e),$forceUpdate:e=>e.f||(e.f=()=>{ga(e.update)}),$nextTick:e=>e.n||(e.n=Rs.bind(e.proxy)),$watch:e=>Gl.bind(e)}),Do=(e,t)=>e!==Pe&&!e.__isScriptSetup&&Ae(e,t),cc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:i,accessCache:r,type:l,appContext:c}=e;if(t[0]!=="$"){const h=r[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return i[t]}else{if(Do(o,t))return r[t]=1,o[t];if(a!==Pe&&Ae(a,t))return r[t]=2,a[t];if(Ae(i,t))return r[t]=3,i[t];if(n!==Pe&&Ae(n,t))return r[t]=4,n[t];Zo&&(r[t]=0)}}const f=yn[t];let d,p;if(f)return t==="$attrs"&&vt(e.attrs,"get",""),f(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==Pe&&Ae(n,t))return r[t]=4,n[t];if(p=c.config.globalProperties,Ae(p,t))return p[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:i}=e;return Do(a,t)?(a[t]=n,!0):o!==Pe&&Ae(o,t)?(o[t]=n,!0):Ae(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,props:i,type:r}},l){let c;return!!(n[l]||e!==Pe&&l[0]!=="$"&&Ae(e,l)||Do(t,l)||Ae(i,l)||Ae(o,l)||Ae(yn,l)||Ae(a.config.globalProperties,l)||(c=r.__cssModules)&&c[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ae(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Va(e){return le(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zo=!0;function dc(e){const t=gr(e),n=e.proxy,o=e.ctx;Zo=!1,t.beforeCreate&&Ua(t.beforeCreate,e,"bc");const{data:a,computed:i,methods:r,watch:l,provide:c,inject:f,created:d,beforeMount:p,mounted:h,beforeUpdate:I,updated:R,activated:T,deactivated:B,beforeDestroy:w,beforeUnmount:C,destroyed:z,unmounted:A,render:E,renderTracked:G,renderTriggered:ne,errorCaptured:pe,serverPrefetch:ee,expose:de,inheritAttrs:ve,components:q,directives:j,filters:g}=t;if(f&&uc(f,o,null),r)for(const W in r){const $=r[W];ge($)&&(o[W]=$.bind(n))}if(a){const W=a.call(n,n);Ee(W)&&(e.data=zs(W))}if(Zo=!0,i)for(const W in i){const $=i[W],O=ge($)?$.bind(n,n):ge($.get)?$.get.bind(n,n):es,be=!ge($)&&ge($.set)?$.set.bind(n):es,et=me({get:O,set:be});Object.defineProperty(o,W,{enumerable:!0,configurable:!0,get:()=>et.value,set:ce=>et.value=ce})}if(l)for(const W in l)xr(l[W],o,n,W);if(c){const W=ge(c)?c.call(n):c;Reflect.ownKeys(W).forEach($=>{Kl($,W[$])})}d&&Ua(d,e,"c");function H(W,$){le($)?$.forEach(O=>W(O.bind(n))):$&&W($.bind(n))}if(H(tc,p),H(jt,h),H(sc,I),H(nc,R),H(Xl,T),H(Zl,B),H(rc,pe),H(ic,G),H(ac,ne),H(br,C),H(ma,A),H(oc,ee),le(de))if(de.length){const W=e.exposed||(e.exposed={});de.forEach($=>{Object.defineProperty(W,$,{get:()=>n[$],set:O=>n[$]=O,enumerable:!0})})}else e.exposed||(e.exposed={});E&&e.render===es&&(e.render=E),ve!=null&&(e.inheritAttrs=ve),q&&(e.components=q),j&&(e.directives=j),ee&&pr(e)}function uc(e,t,n=es){le(e)&&(e=ea(e));for(const o in e){const a=e[o];let i;Ee(a)?"default"in a?i=qn(a.from||o,a.default,!0):i=qn(a.from||o):i=qn(a),at(i)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[o]=i}}function Ua(e,t,n){Gt(le(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function xr(e,t,n,o){let a=o.includes(".")?nr(n,o):()=>n[o];if(He(e)){const i=t[e];ge(i)&&Fs(a,i)}else if(ge(e))Fs(a,e.bind(n));else if(Ee(e))if(le(e))e.forEach(i=>xr(i,t,n,o));else{const i=ge(e.handler)?e.handler.bind(n):t[e.handler];ge(i)&&Fs(a,i,e)}}function gr(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,l=i.get(t);let c;return l?c=l:!a.length&&!n&&!o?c=t:(c={},a.length&&a.forEach(f=>oo(c,f,r,!0)),oo(c,t,r)),Ee(t)&&i.set(t,c),c}function oo(e,t,n,o=!1){const{mixins:a,extends:i}=t;i&&oo(e,i,n,!0),a&&a.forEach(r=>oo(e,r,n,!0));for(const r in t)if(!(o&&r==="expose")){const l=fc[r]||n&&n[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const fc={data:Ka,props:Wa,emits:Wa,methods:pn,computed:pn,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:pn,directives:pn,watch:vc,provide:Ka,inject:pc};function Ka(e,t){return t?e?function(){return it(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function pc(e,t){return pn(ea(e),ea(t))}function ea(e){if(le(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xt(e,t){return e?[...new Set([].concat(e,t))]:t}function pn(e,t){return e?it(Object.create(null),e,t):t}function Wa(e,t){return e?le(e)&&le(t)?[...new Set([...e,...t])]:it(Object.create(null),Va(e),Va(t??{})):t}function vc(e,t){if(!e)return t;if(!t)return e;const n=it(Object.create(null),e);for(const o in t)n[o]=xt(e[o],t[o]);return n}function mr(){return{app:null,config:{isNativeTag:Si,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bc=0;function xc(e,t){return function(o,a=null){ge(o)||(o=it({},o)),a!=null&&!Ee(a)&&(a=null);const i=mr(),r=new WeakSet,l=[];let c=!1;const f=i.app={_uid:bc++,_component:o,_props:a,_container:null,_context:i,_instance:null,version:qc,get config(){return i.config},set config(d){},use(d,...p){return r.has(d)||(d&&ge(d.install)?(r.add(d),d.install(f,...p)):ge(d)&&(r.add(d),d(f,...p))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,p){return p?(i.components[d]=p,f):i.components[d]},directive(d,p){return p?(i.directives[d]=p,f):i.directives[d]},mount(d,p,h){if(!c){const I=f._ceVNode||De(o,a);return I.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),e(I,d,h),c=!0,f._container=d,d.__vue_app__=f,ko(I.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Gt(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,p){return i.provides[d]=p,f},runWithContext(d){const p=Xs;Xs=f;try{return d()}finally{Xs=p}}};return f}}let Xs=null;const gc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ws(t)}Modifiers`]||e[`${Cs(t)}Modifiers`];function mc(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Pe;let a=n;const i=t.startsWith("update:"),r=i&&gc(o,t.slice(7));r&&(r.trim&&(a=n.map(d=>He(d)?d.trim():d)),r.number&&(a=n.map(po)));let l,c=o[l=Eo(t)]||o[l=Eo(ws(t))];!c&&i&&(c=o[l=Eo(Cs(t))]),c&&Gt(c,e,6,a);const f=o[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Gt(f,e,6,a)}}const hc=new WeakMap;function hr(e,t,n=!1){const o=n?hc:t.emitsCache,a=o.get(e);if(a!==void 0)return a;const i=e.emits;let r={},l=!1;if(!ge(e)){const c=f=>{const d=hr(f,t,!0);d&&(l=!0,it(r,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Ee(e)&&o.set(e,null),null):(le(i)?i.forEach(c=>r[c]=null):it(r,i),Ee(e)&&o.set(e,r),r)}function yo(e,t){return!e||!co(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ae(e,t[0].toLowerCase()+t.slice(1))||Ae(e,Cs(t))||Ae(e,t))}function Ha(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[i],slots:r,attrs:l,emit:c,render:f,renderCache:d,props:p,data:h,setupState:I,ctx:R,inheritAttrs:T}=e,B=so(e);let w,C;try{if(n.shapeFlag&4){const A=a||o,E=A;w=Xt(f.call(E,A,d,p,I,h,R)),C=l}else{const A=t;w=Xt(A.length>1?A(p,{attrs:l,slots:r,emit:c}):A(p,null)),C=t.props?l:yc(l)}}catch(A){wn.length=0,go(A,e,1),w=De(ht)}let z=w;if(C&&T!==!1){const A=Object.keys(C),{shapeFlag:E}=z;A.length&&E&7&&(i&&A.some(la)&&(C=wc(C,i)),z=ks(z,C,!1,!0))}return n.dirs&&(z=ks(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Cn(z,n.transition),w=z,so(B),w}const yc=e=>{let t;for(const n in e)(n==="class"||n==="style"||co(n))&&((t||(t={}))[n]=e[n]);return t},wc=(e,t)=>{const n={};for(const o in e)(!la(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function kc(e,t,n){const{props:o,children:a,component:i}=e,{props:r,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return o?Ga(o,r,f):!!r;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const h=d[p];if(r[h]!==o[h]&&!yo(f,h))return!0}}}else return(a||l)&&(!l||!l.$stable)?!0:o===r?!1:o?r?Ga(o,r,f):!0:!!r;return!1}function Ga(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const i=o[a];if(t[i]!==e[i]&&!yo(n,i))return!0}return!1}function _c({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const yr={},wr=()=>Object.create(yr),kr=e=>Object.getPrototypeOf(e)===yr;function $c(e,t,n,o=!1){const a={},i=wr();e.propsDefaults=Object.create(null),_r(e,t,a,i);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);n?e.props=o?a:Al(a):e.type.props?e.props=a:e.props=i,e.attrs=i}function Cc(e,t,n,o){const{props:a,attrs:i,vnode:{patchFlag:r}}=e,l=we(a),[c]=e.propsOptions;let f=!1;if((o||r>0)&&!(r&16)){if(r&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let h=d[p];if(yo(e.emitsOptions,h))continue;const I=t[h];if(c)if(Ae(i,h))I!==i[h]&&(i[h]=I,f=!0);else{const R=ws(h);a[R]=ta(c,l,R,I,e,!1)}else I!==i[h]&&(i[h]=I,f=!0)}}}else{_r(e,t,a,i)&&(f=!0);let d;for(const p in l)(!t||!Ae(t,p)&&((d=Cs(p))===p||!Ae(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(a[p]=ta(c,l,p,void 0,e,!0)):delete a[p]);if(i!==l)for(const p in i)(!t||!Ae(t,p))&&(delete i[p],f=!0)}f&&ls(e.attrs,"set","")}function _r(e,t,n,o){const[a,i]=e.propsOptions;let r=!1,l;if(t)for(let c in t){if(vn(c))continue;const f=t[c];let d;a&&Ae(a,d=ws(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:yo(e.emitsOptions,c)||(!(c in o)||f!==o[c])&&(o[c]=f,r=!0)}if(i){const c=we(n),f=l||Pe;for(let d=0;d<i.length;d++){const p=i[d];n[p]=ta(a,c,p,f[p],e,!Ae(f,p))}}return r}function ta(e,t,n,o,a,i){const r=e[n];if(r!=null){const l=Ae(r,"default");if(l&&o===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&ge(c)){const{propsDefaults:f}=a;if(n in f)o=f[n];else{const d=En(a);o=f[n]=c.call(null,t),d()}}else o=c;a.ce&&a.ce._setProp(n,o)}r[0]&&(i&&!l?o=!1:r[1]&&(o===""||o===Cs(n))&&(o=!0))}return o}const zc=new WeakMap;function $r(e,t,n=!1){const o=n?zc:t.propsCache,a=o.get(e);if(a)return a;const i=e.props,r={},l=[];let c=!1;if(!ge(e)){const d=p=>{c=!0;const[h,I]=$r(p,t,!0);it(r,h),I&&l.push(...I)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Ee(e)&&o.set(e,Qs),Qs;if(le(i))for(let d=0;d<i.length;d++){const p=ws(i[d]);qa(p)&&(r[p]=Pe)}else if(i)for(const d in i){const p=ws(d);if(qa(p)){const h=i[d],I=r[p]=le(h)||ge(h)?{type:h}:it({},h),R=I.type;let T=!1,B=!0;if(le(R))for(let w=0;w<R.length;++w){const C=R[w],z=ge(C)&&C.name;if(z==="Boolean"){T=!0;break}else z==="String"&&(B=!1)}else T=ge(R)&&R.name==="Boolean";I[0]=T,I[1]=B,(T||Ae(I,"default"))&&l.push(p)}}const f=[r,l];return Ee(e)&&o.set(e,f),f}function qa(e){return e[0]!=="$"&&!vn(e)}const ha=e=>e==="_"||e==="_ctx"||e==="$stable",ya=e=>le(e)?e.map(Xt):[Xt(e)],Sc=(e,t,n)=>{if(t._n)return t;const o=ys((...a)=>ya(t(...a)),n);return o._c=!1,o},Cr=(e,t,n)=>{const o=e._ctx;for(const a in e){if(ha(a))continue;const i=e[a];if(ge(i))t[a]=Sc(a,i,o);else if(i!=null){const r=ya(i);t[a]=()=>r}}},zr=(e,t)=>{const n=ya(t);e.slots.default=()=>n},Sr=(e,t,n)=>{for(const o in t)(n||!ha(o))&&(e[o]=t[o])},Ic=(e,t,n)=>{const o=e.slots=wr();if(e.vnode.shapeFlag&32){const a=t._;a?(Sr(o,t,n),n&&ji(o,"_",a,!0)):Cr(t,o)}else t&&zr(e,t)},Ac=(e,t,n)=>{const{vnode:o,slots:a}=e;let i=!0,r=Pe;if(o.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Sr(a,t,n):(i=!t.$stable,Cr(t,a)),r=t}else t&&(zr(e,t),r={default:1});if(i)for(const l in a)!ha(l)&&r[l]==null&&delete a[l]},gt=Oc;function Mc(e){return Tc(e)}function Tc(e,t){const n=vo();n.__VUE__=!0;const{insert:o,remove:a,patchProp:i,createElement:r,createText:l,createComment:c,setText:f,setElementText:d,parentNode:p,nextSibling:h,setScopeId:I=es,insertStaticContent:R}=e,T=(m,y,P,U=null,F=null,V=null,X=void 0,Q=null,K=!!y.dynamicChildren)=>{if(m===y)return;m&&!Ls(m,y)&&(U=Vt(m),ce(m,F,V,!0),m=null),y.patchFlag===-2&&(K=!1,y.dynamicChildren=null);const{type:L,ref:ie,shapeFlag:Y}=y;switch(L){case wo:B(m,y,P,U);break;case ht:w(m,y,P,U);break;case Jn:m==null&&C(y,P,U,X);break;case ae:q(m,y,P,U,F,V,X,Q,K);break;default:Y&1?E(m,y,P,U,F,V,X,Q,K):Y&6?j(m,y,P,U,F,V,X,Q,K):(Y&64||Y&128)&&L.process(m,y,P,U,F,V,X,Q,K,tt)}ie!=null&&F?mn(ie,m&&m.ref,V,y||m,!y):ie==null&&m&&m.ref!=null&&mn(m.ref,null,V,m,!0)},B=(m,y,P,U)=>{if(m==null)o(y.el=l(y.children),P,U);else{const F=y.el=m.el;y.children!==m.children&&f(F,y.children)}},w=(m,y,P,U)=>{m==null?o(y.el=c(y.children||""),P,U):y.el=m.el},C=(m,y,P,U)=>{[m.el,m.anchor]=R(m.children,y,P,U,m.el,m.anchor)},z=({el:m,anchor:y},P,U)=>{let F;for(;m&&m!==y;)F=h(m),o(m,P,U),m=F;o(y,P,U)},A=({el:m,anchor:y})=>{let P;for(;m&&m!==y;)P=h(m),a(m),m=P;a(y)},E=(m,y,P,U,F,V,X,Q,K)=>{if(y.type==="svg"?X="svg":y.type==="math"&&(X="mathml"),m==null)G(y,P,U,F,V,X,Q,K);else{const L=m.el&&m.el._isVueCE?m.el:null;try{L&&L._beginPatch(),ee(m,y,F,V,X,Q,K)}finally{L&&L._endPatch()}}},G=(m,y,P,U,F,V,X,Q)=>{let K,L;const{props:ie,shapeFlag:Y,transition:te,dirs:oe}=m;if(K=m.el=r(m.type,V,ie&&ie.is,ie),Y&8?d(K,m.children):Y&16&&pe(m.children,K,null,U,F,Bo(m,V),X,Q),oe&&js(m,null,U,"created"),ne(K,m,m.scopeId,X,U),ie){for(const Te in ie)Te!=="value"&&!vn(Te)&&i(K,Te,null,ie[Te],V,U);"value"in ie&&i(K,"value",null,ie.value,V),(L=ie.onVnodeBeforeMount)&&Jt(L,U,m)}oe&&js(m,null,U,"beforeMount");const _e=jc(F,te);_e&&te.beforeEnter(K),o(K,y,P),((L=ie&&ie.onVnodeMounted)||_e||oe)&&gt(()=>{L&&Jt(L,U,m),_e&&te.enter(K),oe&&js(m,null,U,"mounted")},F)},ne=(m,y,P,U,F)=>{if(P&&I(m,P),U)for(let V=0;V<U.length;V++)I(m,U[V]);if(F){let V=F.subTree;if(y===V||Mr(V.type)&&(V.ssContent===y||V.ssFallback===y)){const X=F.vnode;ne(m,X,X.scopeId,X.slotScopeIds,F.parent)}}},pe=(m,y,P,U,F,V,X,Q,K=0)=>{for(let L=K;L<m.length;L++){const ie=m[L]=Q?ms(m[L]):Xt(m[L]);T(null,ie,y,P,U,F,V,X,Q)}},ee=(m,y,P,U,F,V,X)=>{const Q=y.el=m.el;let{patchFlag:K,dynamicChildren:L,dirs:ie}=y;K|=m.patchFlag&16;const Y=m.props||Pe,te=y.props||Pe;let oe;if(P&&Es(P,!1),(oe=te.onVnodeBeforeUpdate)&&Jt(oe,P,y,m),ie&&js(y,m,P,"beforeUpdate"),P&&Es(P,!0),(Y.innerHTML&&te.innerHTML==null||Y.textContent&&te.textContent==null)&&d(Q,""),L?de(m.dynamicChildren,L,Q,P,U,Bo(y,F),V):X||$(m,y,Q,null,P,U,Bo(y,F),V,!1),K>0){if(K&16)ve(Q,Y,te,P,F);else if(K&2&&Y.class!==te.class&&i(Q,"class",null,te.class,F),K&4&&i(Q,"style",Y.style,te.style,F),K&8){const _e=y.dynamicProps;for(let Te=0;Te<_e.length;Te++){const ze=_e[Te],ut=Y[ze],ft=te[ze];(ft!==ut||ze==="value")&&i(Q,ze,ut,ft,F,P)}}K&1&&m.children!==y.children&&d(Q,y.children)}else!X&&L==null&&ve(Q,Y,te,P,F);((oe=te.onVnodeUpdated)||ie)&&gt(()=>{oe&&Jt(oe,P,y,m),ie&&js(y,m,P,"updated")},U)},de=(m,y,P,U,F,V,X)=>{for(let Q=0;Q<y.length;Q++){const K=m[Q],L=y[Q],ie=K.el&&(K.type===ae||!Ls(K,L)||K.shapeFlag&198)?p(K.el):P;T(K,L,ie,null,U,F,V,X,!0)}},ve=(m,y,P,U,F)=>{if(y!==P){if(y!==Pe)for(const V in y)!vn(V)&&!(V in P)&&i(m,V,y[V],null,F,U);for(const V in P){if(vn(V))continue;const X=P[V],Q=y[V];X!==Q&&V!=="value"&&i(m,V,Q,X,F,U)}"value"in P&&i(m,"value",y.value,P.value,F)}},q=(m,y,P,U,F,V,X,Q,K)=>{const L=y.el=m?m.el:l(""),ie=y.anchor=m?m.anchor:l("");let{patchFlag:Y,dynamicChildren:te,slotScopeIds:oe}=y;oe&&(Q=Q?Q.concat(oe):oe),m==null?(o(L,P,U),o(ie,P,U),pe(y.children||[],P,ie,F,V,X,Q,K)):Y>0&&Y&64&&te&&m.dynamicChildren&&m.dynamicChildren.length===te.length?(de(m.dynamicChildren,te,P,F,V,X,Q),(y.key!=null||F&&y===F.subTree)&&wa(m,y,!0)):$(m,y,P,ie,F,V,X,Q,K)},j=(m,y,P,U,F,V,X,Q,K)=>{y.slotScopeIds=Q,m==null?y.shapeFlag&512?F.ctx.activate(y,P,U,X,K):g(y,P,U,F,V,X,K):x(m,y,K)},g=(m,y,P,U,F,V,X)=>{const Q=m.component=Fc(m,U,F);if(mo(m)&&(Q.ctx.renderer=tt),Vc(Q,!1,X),Q.asyncDep){if(F&&F.registerDep(Q,H,X),!m.el){const K=Q.subTree=De(ht);w(null,K,y,P),m.placeholder=K.el}}else H(Q,m,y,P,F,V,X)},x=(m,y,P)=>{const U=y.component=m.component;if(kc(m,y,P))if(U.asyncDep&&!U.asyncResolved){W(U,y,P);return}else U.next=y,U.update();else y.el=m.el,U.vnode=y},H=(m,y,P,U,F,V,X)=>{const Q=()=>{if(m.isMounted){let{next:Y,bu:te,u:oe,parent:_e,vnode:Te}=m;{const Ot=Ir(m);if(Ot){Y&&(Y.el=Te.el,W(m,Y,X)),Ot.asyncDep.then(()=>{m.isUnmounted||Q()});return}}let ze=Y,ut;Es(m,!1),Y?(Y.el=Te.el,W(m,Y,X)):Y=Te,te&&Gn(te),(ut=Y.props&&Y.props.onVnodeBeforeUpdate)&&Jt(ut,_e,Y,Te),Es(m,!0);const ft=Ha(m),Et=m.subTree;m.subTree=ft,T(Et,ft,p(Et.el),Vt(Et),m,F,V),Y.el=ft.el,ze===null&&_c(m,ft.el),oe&&gt(oe,F),(ut=Y.props&&Y.props.onVnodeUpdated)&&gt(()=>Jt(ut,_e,Y,Te),F)}else{let Y;const{el:te,props:oe}=y,{bm:_e,m:Te,parent:ze,root:ut,type:ft}=m,Et=hn(y);Es(m,!1),_e&&Gn(_e),!Et&&(Y=oe&&oe.onVnodeBeforeMount)&&Jt(Y,ze,y),Es(m,!0);{ut.ce&&ut.ce._def.shadowRoot!==!1&&ut.ce._injectChildStyle(ft);const Ot=m.subTree=Ha(m);T(null,Ot,P,U,m,F,V),y.el=Ot.el}if(Te&&gt(Te,F),!Et&&(Y=oe&&oe.onVnodeMounted)){const Ot=y;gt(()=>Jt(Y,ze,Ot),F)}(y.shapeFlag&256||ze&&hn(ze.vnode)&&ze.vnode.shapeFlag&256)&&m.a&&gt(m.a,F),m.isMounted=!0,y=P=U=null}};m.scope.on();const K=m.effect=new Ni(Q);m.scope.off();const L=m.update=K.run.bind(K),ie=m.job=K.runIfDirty.bind(K);ie.i=m,ie.id=m.uid,K.scheduler=()=>ga(ie),Es(m,!0),L()},W=(m,y,P)=>{y.component=m;const U=m.vnode.props;m.vnode=y,m.next=null,Cc(m,y.props,U,P),Ac(m,y.children,P),us(),Na(m),fs()},$=(m,y,P,U,F,V,X,Q,K=!1)=>{const L=m&&m.children,ie=m?m.shapeFlag:0,Y=y.children,{patchFlag:te,shapeFlag:oe}=y;if(te>0){if(te&128){be(L,Y,P,U,F,V,X,Q,K);return}else if(te&256){O(L,Y,P,U,F,V,X,Q,K);return}}oe&8?(ie&16&&Ge(L,F,V),Y!==L&&d(P,Y)):ie&16?oe&16?be(L,Y,P,U,F,V,X,Q,K):Ge(L,F,V,!0):(ie&8&&d(P,""),oe&16&&pe(Y,P,U,F,V,X,Q,K))},O=(m,y,P,U,F,V,X,Q,K)=>{m=m||Qs,y=y||Qs;const L=m.length,ie=y.length,Y=Math.min(L,ie);let te;for(te=0;te<Y;te++){const oe=y[te]=K?ms(y[te]):Xt(y[te]);T(m[te],oe,P,null,F,V,X,Q,K)}L>ie?Ge(m,F,V,!0,!1,Y):pe(y,P,U,F,V,X,Q,K,Y)},be=(m,y,P,U,F,V,X,Q,K)=>{let L=0;const ie=y.length;let Y=m.length-1,te=ie-1;for(;L<=Y&&L<=te;){const oe=m[L],_e=y[L]=K?ms(y[L]):Xt(y[L]);if(Ls(oe,_e))T(oe,_e,P,null,F,V,X,Q,K);else break;L++}for(;L<=Y&&L<=te;){const oe=m[Y],_e=y[te]=K?ms(y[te]):Xt(y[te]);if(Ls(oe,_e))T(oe,_e,P,null,F,V,X,Q,K);else break;Y--,te--}if(L>Y){if(L<=te){const oe=te+1,_e=oe<ie?y[oe].el:U;for(;L<=te;)T(null,y[L]=K?ms(y[L]):Xt(y[L]),P,_e,F,V,X,Q,K),L++}}else if(L>te)for(;L<=Y;)ce(m[L],F,V,!0),L++;else{const oe=L,_e=L,Te=new Map;for(L=_e;L<=te;L++){const bt=y[L]=K?ms(y[L]):Xt(y[L]);bt.key!=null&&Te.set(bt.key,L)}let ze,ut=0;const ft=te-_e+1;let Et=!1,Ot=0;const Is=new Array(ft);for(L=0;L<ft;L++)Is[L]=0;for(L=oe;L<=Y;L++){const bt=m[L];if(ut>=ft){ce(bt,F,V,!0);continue}let zt;if(bt.key!=null)zt=Te.get(bt.key);else for(ze=_e;ze<=te;ze++)if(Is[ze-_e]===0&&Ls(bt,y[ze])){zt=ze;break}zt===void 0?ce(bt,F,V,!0):(Is[zt-_e]=L+1,zt>=Ot?Ot=zt:Et=!0,T(bt,y[zt],P,null,F,V,X,Q,K),ut++)}const Pn=Et?Ec(Is):Qs;for(ze=Pn.length-1,L=ft-1;L>=0;L--){const bt=_e+L,zt=y[bt],Nn=y[bt+1],St=bt+1<ie?Nn.el||Ar(Nn):U;Is[L]===0?T(null,zt,P,St,F,V,X,Q,K):Et&&(ze<0||L!==Pn[ze]?et(zt,P,St,2):ze--)}}},et=(m,y,P,U,F=null)=>{const{el:V,type:X,transition:Q,children:K,shapeFlag:L}=m;if(L&6){et(m.component.subTree,y,P,U);return}if(L&128){m.suspense.move(y,P,U);return}if(L&64){X.move(m,y,P,tt);return}if(X===ae){o(V,y,P);for(let Y=0;Y<K.length;Y++)et(K[Y],y,P,U);o(m.anchor,y,P);return}if(X===Jn){z(m,y,P);return}if(U!==2&&L&1&&Q)if(U===0)Q.beforeEnter(V),o(V,y,P),gt(()=>Q.enter(V),F);else{const{leave:Y,delayLeave:te,afterLeave:oe}=Q,_e=()=>{m.ctx.isUnmounted?a(V):o(V,y,P)},Te=()=>{V._isLeaving&&V[rs](!0),Y(V,()=>{_e(),oe&&oe()})};te?te(V,_e,Te):Te()}else o(V,y,P)},ce=(m,y,P,U=!1,F=!1)=>{const{type:V,props:X,ref:Q,children:K,dynamicChildren:L,shapeFlag:ie,patchFlag:Y,dirs:te,cacheIndex:oe}=m;if(Y===-2&&(F=!1),Q!=null&&(us(),mn(Q,null,P,m,!0),fs()),oe!=null&&(y.renderCache[oe]=void 0),ie&256){y.ctx.deactivate(m);return}const _e=ie&1&&te,Te=!hn(m);let ze;if(Te&&(ze=X&&X.onVnodeBeforeUnmount)&&Jt(ze,y,m),ie&6)rt(m.component,P,U);else{if(ie&128){m.suspense.unmount(P,U);return}_e&&js(m,null,y,"beforeUnmount"),ie&64?m.type.remove(m,y,P,tt,U):L&&!L.hasOnce&&(V!==ae||Y>0&&Y&64)?Ge(L,y,P,!1,!0):(V===ae&&Y&384||!F&&ie&16)&&Ge(K,y,P),U&&Ye(m)}(Te&&(ze=X&&X.onVnodeUnmounted)||_e)&&gt(()=>{ze&&Jt(ze,y,m),_e&&js(m,null,y,"unmounted")},P)},Ye=m=>{const{type:y,el:P,anchor:U,transition:F}=m;if(y===ae){Xe(P,U);return}if(y===Jn){A(m);return}const V=()=>{a(P),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(m.shapeFlag&1&&F&&!F.persisted){const{leave:X,delayLeave:Q}=F,K=()=>X(P,V);Q?Q(m.el,V,K):K()}else V()},Xe=(m,y)=>{let P;for(;m!==y;)P=h(m),a(m),m=P;a(y)},rt=(m,y,P)=>{const{bum:U,scope:F,job:V,subTree:X,um:Q,m:K,a:L}=m;Qa(K),Qa(L),U&&Gn(U),F.stop(),V&&(V.flags|=8,ce(X,m,y,P)),Q&&gt(Q,y),gt(()=>{m.isUnmounted=!0},y)},Ge=(m,y,P,U=!1,F=!1,V=0)=>{for(let X=V;X<m.length;X++)ce(m[X],y,P,U,F)},Vt=m=>{if(m.shapeFlag&6)return Vt(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const y=h(m.anchor||m.el),P=y&&y[or];return P?h(P):y};let Ut=!1;const Ct=(m,y,P)=>{let U;m==null?y._vnode&&(ce(y._vnode,null,null,!0),U=y._vnode.component):T(y._vnode||null,m,y,null,null,null,P),y._vnode=m,Ut||(Ut=!0,Na(U),Zi(),Ut=!1)},tt={p:T,um:ce,m:et,r:Ye,mt:g,mc:pe,pc:$,pbc:de,n:Vt,o:e};return{render:Ct,hydrate:void 0,createApp:xc(Ct)}}function Bo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Es({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function jc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function wa(e,t,n=!1){const o=e.children,a=t.children;if(le(o)&&le(a))for(let i=0;i<o.length;i++){const r=o[i];let l=a[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=a[i]=ms(a[i]),l.el=r.el),!n&&l.patchFlag!==-2&&wa(r,l)),l.type===wo&&(l.patchFlag!==-1?l.el=r.el:l.__elIndex=i+(e.type===ae?1:0)),l.type===ht&&!l.el&&(l.el=r.el)}}function Ec(e){const t=e.slice(),n=[0];let o,a,i,r,l;const c=e.length;for(o=0;o<c;o++){const f=e[o];if(f!==0){if(a=n[n.length-1],e[a]<f){t[o]=a,n.push(o);continue}for(i=0,r=n.length-1;i<r;)l=i+r>>1,e[n[l]]<f?i=l+1:r=l;f<e[n[i]]&&(i>0&&(t[o]=n[i-1]),n[i]=o)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}function Ir(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ir(t)}function Qa(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Ar(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Ar(t.subTree):null}const Mr=e=>e.__isSuspense;function Oc(e,t){t&&t.pendingBranch?le(e)?t.effects.push(...e):t.effects.push(e):Ul(e)}const ae=Symbol.for("v-fgt"),wo=Symbol.for("v-txt"),ht=Symbol.for("v-cmt"),Jn=Symbol.for("v-stc"),wn=[];let Mt=null;function u(e=!1){wn.push(Mt=e?null:[])}function Pc(){wn.pop(),Mt=wn[wn.length-1]||null}let zn=1;function ao(e,t=!1){zn+=e,e<0&&Mt&&t&&(Mt.hasOnce=!0)}function Tr(e){return e.dynamicChildren=zn>0?Mt||Qs:null,Pc(),zn>0&&Mt&&Mt.push(e),e}function v(e,t,n,o,a,i){return Tr(s(e,t,n,o,a,i,!0))}function ke(e,t,n,o,a){return Tr(De(e,t,n,o,a,!0))}function io(e){return e?e.__v_isVNode===!0:!1}function Ls(e,t){return e.type===t.type&&e.key===t.key}const jr=({key:e})=>e??null,Yn=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?He(e)||at(e)||ge(e)?{i:Dt,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,a=null,i=e===ae?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&jr(t),ref:t&&Yn(t),scopeId:tr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Dt};return l?(ka(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=He(n)?8:16),zn>0&&!r&&Mt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Mt.push(c),c}const De=Nc;function Nc(e,t=null,n=null,o=0,a=null,i=!1){if((!e||e===lc)&&(e=ht),io(e)){const l=ks(e,t,!0);return n&&ka(l,n),zn>0&&!i&&Mt&&(l.shapeFlag&6?Mt[Mt.indexOf(e)]=l:Mt.push(l)),l.patchFlag=-2,l}if(Hc(e)&&(e=e.__vccOpts),t){t=Rc(t);let{class:l,style:c}=t;l&&!He(l)&&(t.class=J(l)),Ee(c)&&(xo(c)&&!le(c)&&(c=it({},c)),t.style=Fe(c))}const r=He(e)?1:Mr(e)?128:ar(e)?64:Ee(e)?4:ge(e)?2:0;return s(e,t,n,o,a,r,i,!0)}function Rc(e){return e?xo(e)||kr(e)?it({},e):e:null}function ks(e,t,n=!1,o=!1){const{props:a,ref:i,patchFlag:r,children:l,transition:c}=e,f=t?Lc(a||{},t):a,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&jr(f),ref:t&&t.ref?n&&i?le(i)?i.concat(Yn(t)):[i,Yn(t)]:Yn(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ae?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ks(e.ssContent),ssFallback:e.ssFallback&&ks(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&o&&Cn(d,c.clone(d)),d}function _s(e=" ",t=0){return De(wo,null,e,t)}function dt(e,t){const n=De(Jn,null,e);return n.staticCount=t,n}function D(e="",t=!1){return t?(u(),ke(ht,null,e)):De(ht,null,e)}function Xt(e){return e==null||typeof e=="boolean"?De(ht):le(e)?De(ae,null,e.slice()):io(e)?ms(e):De(wo,null,String(e))}function ms(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ks(e)}function ka(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(le(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),ka(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!kr(t)?t._ctx=Dt:a===3&&Dt&&(Dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:Dt},n=32):(t=String(t),o&64?(n=16,t=[_s(t)]):n=8);e.children=t,e.shapeFlag|=n}function Lc(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=J([t.class,o.class]));else if(a==="style")t.style=Fe([t.style,o.style]);else if(co(a)){const i=t[a],r=o[a];r&&i!==r&&!(le(i)&&i.includes(r))&&(t[a]=i?[].concat(i,r):r)}else a!==""&&(t[a]=o[a])}return t}function Jt(e,t,n,o=null){Gt(e,t,7,[n,o])}const Dc=mr();let Bc=0;function Fc(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||Dc,i={uid:Bc++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ll(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$r(o,a),emitsOptions:hr(o,a),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:o.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=mc.bind(null,i),e.ce&&e.ce(i),i}let yt=null;const Er=()=>yt||Dt;let ro,sa;{const e=vo(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),i=>{a.length>1?a.forEach(r=>r(i)):a[0](i)}};ro=t("__VUE_INSTANCE_SETTERS__",n=>yt=n),sa=t("__VUE_SSR_SETTERS__",n=>Sn=n)}const En=e=>{const t=yt;return ro(e),e.scope.on(),()=>{e.scope.off(),ro(t)}},Ja=()=>{yt&&yt.scope.off(),ro(null)};function Or(e){return e.vnode.shapeFlag&4}let Sn=!1;function Vc(e,t=!1,n=!1){t&&sa(t);const{props:o,children:a}=e.vnode,i=Or(e);$c(e,o,i,t),Ic(e,a,n||t);const r=i?Uc(e,t):void 0;return t&&sa(!1),r}function Uc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,cc);const{setup:o}=n;if(o){us();const a=e.setupContext=o.length>1?Wc(e):null,i=En(e),r=jn(o,e,0,[e.props,a]),l=Ii(r);if(fs(),i(),(l||e.sp)&&!hn(e)&&pr(e),l){if(r.then(Ja,Ja),t)return r.then(c=>{Ya(e,c)}).catch(c=>{go(c,e,0)});e.asyncDep=r}else Ya(e,r)}else Pr(e)}function Ya(e,t,n){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ee(t)&&(e.setupState=Ji(t)),Pr(e)}function Pr(e,t,n){const o=e.type;e.render||(e.render=o.render||es);{const a=En(e);us();try{dc(e)}finally{fs(),a()}}}const Kc={get(e,t){return vt(e,"get",""),e[t]}};function Wc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Kc),slots:e.slots,emit:e.emit,expose:t}}function ko(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ji(Ml(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in yn)return yn[n](e)},has(t,n){return n in t||n in yn}})):e.proxy}function Hc(e){return ge(e)&&"__vccOpts"in e}const me=(e,t)=>Ll(e,t,Sn);function Gc(e,t,n){try{ao(-1);const o=arguments.length;return o===2?Ee(t)&&!le(t)?io(t)?De(e,null,[t]):De(e,t):De(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&io(n)&&(n=[n]),De(e,t,n))}finally{ao(1)}}const qc="3.5.27";let na;const Xa=typeof window<"u"&&window.trustedTypes;if(Xa)try{na=Xa.createPolicy("vue",{createHTML:e=>e})}catch{}const Nr=na?e=>na.createHTML(e):e=>e,Qc="http://www.w3.org/2000/svg",Jc="http://www.w3.org/1998/Math/MathML",is=typeof document<"u"?document:null,Za=is&&is.createElement("template"),Yc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?is.createElementNS(Qc,e):t==="mathml"?is.createElementNS(Jc,e):n?is.createElement(e,{is:n}):is.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>is.createTextNode(e),createComment:e=>is.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>is.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,i){const r=n?n.previousSibling:t.lastChild;if(a&&(a===i||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===i||!(a=a.nextSibling)););else{Za.innerHTML=Nr(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=Za.content;if(o==="svg"||o==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},bs="transition",ln="animation",In=Symbol("_vtc"),Rr={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Xc=it({},lr,Rr),Zc=e=>(e.displayName="Transition",e.props=Xc,e),Vs=Zc((e,{slots:t})=>Gc(Yl,ed(e),t)),Os=(e,t=[])=>{le(e)?e.forEach(n=>n(...t)):e&&e(...t)},ei=e=>e?le(e)?e.some(t=>t.length>1):e.length>1:!1;function ed(e){const t={};for(const q in e)q in Rr||(t[q]=e[q]);if(e.css===!1)return t;const{name:n="v",type:o,duration:a,enterFromClass:i=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:f=r,appearToClass:d=l,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:I=`${n}-leave-to`}=e,R=td(a),T=R&&R[0],B=R&&R[1],{onBeforeEnter:w,onEnter:C,onEnterCancelled:z,onLeave:A,onLeaveCancelled:E,onBeforeAppear:G=w,onAppear:ne=C,onAppearCancelled:pe=z}=t,ee=(q,j,g,x)=>{q._enterCancelled=x,Ps(q,j?d:l),Ps(q,j?f:r),g&&g()},de=(q,j)=>{q._isLeaving=!1,Ps(q,p),Ps(q,I),Ps(q,h),j&&j()},ve=q=>(j,g)=>{const x=q?ne:C,H=()=>ee(j,q,g);Os(x,[j,H]),ti(()=>{Ps(j,q?c:i),as(j,q?d:l),ei(x)||si(j,o,T,H)})};return it(t,{onBeforeEnter(q){Os(w,[q]),as(q,i),as(q,r)},onBeforeAppear(q){Os(G,[q]),as(q,c),as(q,f)},onEnter:ve(!1),onAppear:ve(!0),onLeave(q,j){q._isLeaving=!0;const g=()=>de(q,j);as(q,p),q._enterCancelled?(as(q,h),ai(q)):(ai(q),as(q,h)),ti(()=>{q._isLeaving&&(Ps(q,p),as(q,I),ei(A)||si(q,o,B,g))}),Os(A,[q,g])},onEnterCancelled(q){ee(q,!1,void 0,!0),Os(z,[q])},onAppearCancelled(q){ee(q,!0,void 0,!0),Os(pe,[q])},onLeaveCancelled(q){de(q),Os(E,[q])}})}function td(e){if(e==null)return null;if(Ee(e))return[Fo(e.enter),Fo(e.leave)];{const t=Fo(e);return[t,t]}}function Fo(e){return el(e)}function as(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[In]||(e[In]=new Set)).add(t)}function Ps(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[In];n&&(n.delete(t),n.size||(e[In]=void 0))}function ti(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let sd=0;function si(e,t,n,o){const a=e._endId=++sd,i=()=>{a===e._endId&&o()};if(n!=null)return setTimeout(i,n);const{type:r,timeout:l,propCount:c}=nd(e,t);if(!r)return o();const f=r+"end";let d=0;const p=()=>{e.removeEventListener(f,h),i()},h=I=>{I.target===e&&++d>=c&&p()};setTimeout(()=>{d<c&&p()},l+1),e.addEventListener(f,h)}function nd(e,t){const n=window.getComputedStyle(e),o=R=>(n[R]||"").split(", "),a=o(`${bs}Delay`),i=o(`${bs}Duration`),r=ni(a,i),l=o(`${ln}Delay`),c=o(`${ln}Duration`),f=ni(l,c);let d=null,p=0,h=0;t===bs?r>0&&(d=bs,p=r,h=i.length):t===ln?f>0&&(d=ln,p=f,h=c.length):(p=Math.max(r,f),d=p>0?r>f?bs:ln:null,h=d?d===bs?i.length:c.length:0);const I=d===bs&&/\b(?:transform|all)(?:,|$)/.test(o(`${bs}Property`).toString());return{type:d,timeout:p,propCount:h,hasTransform:I}}function ni(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>oi(n)+oi(e[o])))}function oi(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ai(e){return(e?e.ownerDocument:document).body.offsetHeight}function od(e,t,n){const o=e[In];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const lo=Symbol("_vod"),Lr=Symbol("_vsh"),ad={name:"show",beforeMount(e,{value:t},{transition:n}){e[lo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):cn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),cn(e,!0),o.enter(e)):o.leave(e,()=>{cn(e,!1)}):cn(e,t))},beforeUnmount(e,{value:t}){cn(e,t)}};function cn(e,t){e.style.display=t?e[lo]:"none",e[Lr]=!t}const id=Symbol(""),rd=/(?:^|;)\s*display\s*:/;function ld(e,t,n){const o=e.style,a=He(n);let i=!1;if(n&&!a){if(t)if(He(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();n[l]==null&&Xn(o,l,"")}else for(const r in t)n[r]==null&&Xn(o,r,"");for(const r in n)r==="display"&&(i=!0),Xn(o,r,n[r])}else if(a){if(t!==n){const r=o[id];r&&(n+=";"+r),o.cssText=n,i=rd.test(n)}}else t&&e.removeAttribute("style");lo in e&&(e[lo]=i?o.display:"",e[Lr]&&(o.display="none"))}const ii=/\s*!important$/;function Xn(e,t,n){if(le(n))n.forEach(o=>Xn(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=cd(e,t);ii.test(n)?e.setProperty(Cs(o),n.replace(ii,""),"important"):e[o]=n}}const ri=["Webkit","Moz","ms"],Vo={};function cd(e,t){const n=Vo[t];if(n)return n;let o=ws(t);if(o!=="filter"&&o in e)return Vo[t]=o;o=Ti(o);for(let a=0;a<ri.length;a++){const i=ri[a]+o;if(i in e)return Vo[t]=i}return t}const li="http://www.w3.org/1999/xlink";function ci(e,t,n,o,a,i=il(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(li,t.slice(6,t.length)):e.setAttributeNS(li,t,n):n==null||i&&!Ei(n)?e.removeAttribute(t):e.setAttribute(t,i?"":ts(n)?String(n):n)}function di(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Nr(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Ei(n):n==null&&l==="string"?(n="",r=!0):l==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(a||t)}function ds(e,t,n,o){e.addEventListener(t,n,o)}function dd(e,t,n,o){e.removeEventListener(t,n,o)}const ui=Symbol("_vei");function ud(e,t,n,o,a=null){const i=e[ui]||(e[ui]={}),r=i[t];if(o&&r)r.value=o;else{const[l,c]=fd(t);if(o){const f=i[t]=bd(o,a);ds(e,l,f,c)}else r&&(dd(e,l,r,c),i[t]=void 0)}}const fi=/(?:Once|Passive|Capture)$/;function fd(e){let t;if(fi.test(e)){t={};let o;for(;o=e.match(fi);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cs(e.slice(2)),t]}let Uo=0;const pd=Promise.resolve(),vd=()=>Uo||(pd.then(()=>Uo=0),Uo=Date.now());function bd(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Gt(xd(o,n.value),t,5,[o])};return n.value=e,n.attached=vd(),n}function xd(e,t){if(le(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const pi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gd=(e,t,n,o,a,i)=>{const r=a==="svg";t==="class"?od(e,o,r):t==="style"?ld(e,n,o):co(t)?la(t)||ud(e,t,n,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):md(e,t,o,r))?(di(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ci(e,t,o,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!He(o))?di(e,ws(t),o,i,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),ci(e,t,o,r))};function md(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&pi(t)&&ge(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return pi(t)&&He(n)?!1:t in e}const $s=e=>{const t=e.props["onUpdate:modelValue"]||!1;return le(t)?n=>Gn(t,n):t};function hd(e){e.target.composing=!0}function vi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Bt=Symbol("_assign");function bi(e,t,n){return t&&(e=e.trim()),n&&(e=po(e)),e}const re={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[Bt]=$s(a);const i=o||a.props&&a.props.type==="number";ds(e,t?"change":"input",r=>{r.target.composing||e[Bt](bi(e.value,n,i))}),(n||i)&&ds(e,"change",()=>{e.value=bi(e.value,n,i)}),t||(ds(e,"compositionstart",hd),ds(e,"compositionend",vi),ds(e,"change",vi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:i}},r){if(e[Bt]=$s(r),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?po(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===c)||(e.value=c))}},An={deep:!0,created(e,t,n){e[Bt]=$s(n),ds(e,"change",()=>{const o=e._modelValue,a=tn(e),i=e.checked,r=e[Bt];if(le(o)){const l=da(o,a),c=l!==-1;if(i&&!c)r(o.concat(a));else if(!i&&c){const f=[...o];f.splice(l,1),r(f)}}else if(sn(o)){const l=new Set(o);i?l.add(a):l.delete(a),r(l)}else r(Dr(e,i))})},mounted:xi,beforeUpdate(e,t,n){e[Bt]=$s(n),xi(e,t,n)}};function xi(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(le(t))a=da(t,o.props.value)>-1;else if(sn(t))a=t.has(o.props.value);else{if(t===n)return;a=Ks(t,Dr(e,!0))}e.checked!==a&&(e.checked=a)}const yd={created(e,{value:t},n){e.checked=Ks(t,n.props.value),e[Bt]=$s(n),ds(e,"change",()=>{e[Bt](tn(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[Bt]=$s(o),t!==n&&(e.checked=Ks(t,o.props.value))}},nn={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=sn(t);ds(e,"change",()=>{const i=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>n?po(tn(r)):tn(r));e[Bt](e.multiple?a?new Set(i):i:i[0]),e._assigning=!0,Rs(()=>{e._assigning=!1})}),e[Bt]=$s(o)},mounted(e,{value:t}){gi(e,t)},beforeUpdate(e,t,n){e[Bt]=$s(n)},updated(e,{value:t}){e._assigning||gi(e,t)}};function gi(e,t){const n=e.multiple,o=le(t);if(!(n&&!o&&!sn(t))){for(let a=0,i=e.options.length;a<i;a++){const r=e.options[a],l=tn(r);if(n)if(o){const c=typeof l;c==="string"||c==="number"?r.selected=t.some(f=>String(f)===String(l)):r.selected=da(t,l)>-1}else r.selected=t.has(l);else if(Ks(tn(r),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function tn(e){return"_value"in e?e._value:e.value}function Dr(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const wd={created(e,t,n){Wn(e,t,n,null,"created")},mounted(e,t,n){Wn(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){Wn(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){Wn(e,t,n,o,"updated")}};function kd(e,t){switch(e){case"SELECT":return nn;case"TEXTAREA":return re;default:switch(t){case"checkbox":return An;case"radio":return yd;default:return re}}}function Wn(e,t,n,o,a){const r=kd(e.tagName,n.props&&n.props.type)[a];r&&r(e,t,n,o)}const _d=["ctrl","shift","alt","meta"],$d={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>_d.some(n=>e[`${n}Key`]&&!t.includes(n))},Le=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((a,...i)=>{for(let r=0;r<t.length;r++){const l=$d[t[r]];if(l&&l(a,t))return}return e(a,...i)}))},Cd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Us=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(a=>{if(!("key"in a))return;const i=Cs(a.key);if(t.some(r=>r===i||Cd[r]===i))return e(a)}))},zd=it({patchProp:gd},Yc);let mi;function Sd(){return mi||(mi=Mc(zd))}const Id=((...e)=>{const t=Sd().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=Md(o);if(!a)return;const i=t._component;!ge(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const r=n(a,!1,Ad(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),r},t});function Ad(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Md(e){return He(e)?document.querySelector(e):e}const Td="Roche_db",jd=9,Ie={PERSONAS:"personas",CONTACTS:"contacts",SETTINGS:"settings",PRESETS:"presets",CONVERSATIONS:"conversations",MESSAGES:"messages",WORLDBOOK_CATEGORIES:"worldbook_categories",WORLDBOOK_ENTRIES:"worldbook_entries",RELATIONSHIPS:"relationships",STICKER_CATEGORIES:"sticker_categories",STICKERS:"stickers"};let Ft=null,dn=null;const Ss=()=>Ft?Promise.resolve():dn||(dn=new Promise((e,t)=>{const n=indexedDB.open(Td,jd);n.onerror=o=>{const a=o.target.error;console.error("IndexedDB error:",a),dn=null,t(a||"Error opening database")},n.onsuccess=o=>{Ft=o.target.result,e()},n.onupgradeneeded=o=>{const a=o.target.result;if(a.objectStoreNames.contains(Ie.PERSONAS)||a.createObjectStore(Ie.PERSONAS,{keyPath:"id"}),a.objectStoreNames.contains(Ie.CONTACTS)||a.createObjectStore(Ie.CONTACTS,{keyPath:"id"}),a.objectStoreNames.contains(Ie.SETTINGS)||a.createObjectStore(Ie.SETTINGS,{keyPath:"id"}),a.objectStoreNames.contains(Ie.PRESETS)||a.createObjectStore(Ie.PRESETS,{keyPath:"id"}),a.objectStoreNames.contains(Ie.CONVERSATIONS)||a.createObjectStore(Ie.CONVERSATIONS,{keyPath:"id"}),!a.objectStoreNames.contains(Ie.MESSAGES)){const i=a.createObjectStore(Ie.MESSAGES,{keyPath:"id"});i.createIndex("conversationId","conversationId",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1})}if(a.objectStoreNames.contains(Ie.WORLDBOOK_CATEGORIES)||a.createObjectStore(Ie.WORLDBOOK_CATEGORIES,{keyPath:"id"}),a.objectStoreNames.contains(Ie.WORLDBOOK_ENTRIES)||a.createObjectStore(Ie.WORLDBOOK_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),!a.objectStoreNames.contains(Ie.RELATIONSHIPS)){const i=a.createObjectStore(Ie.RELATIONSHIPS,{keyPath:"id"});i.createIndex("sourceId","sourceId",{unique:!1}),i.createIndex("targetId","targetId",{unique:!1}),i.createIndex("type","type",{unique:!1})}a.objectStoreNames.contains(Ie.STICKER_CATEGORIES)||a.createObjectStore(Ie.STICKER_CATEGORIES,{keyPath:"id"}),a.objectStoreNames.contains(Ie.STICKERS)||a.createObjectStore(Ie.STICKERS,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),a.objectStoreNames.contains("chats")&&a.deleteObjectStore("chats")}}),dn),Zt=async e=>(Ft||await Ss(),new Promise((t,n)=>{const i=Ft.transaction([e],"readonly").objectStore(e).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})),Ve=async(e,t)=>(Ft||await Ss(),new Promise((n,o)=>{const r=Ft.transaction([e],"readwrite").objectStore(e).put(t);r.onsuccess=()=>n(),r.onerror=()=>o(r.error)})),Wt=async(e,t)=>(Ft||await Ss(),new Promise((n,o)=>{const r=Ft.transaction([e],"readwrite").objectStore(e).delete(t);r.onsuccess=()=>n(),r.onerror=()=>o(r.error)})),Br=async()=>{Ft||await Ss();const n=Ft.transaction([Ie.SETTINGS],"readonly").objectStore(Ie.SETTINGS).get("current");return new Promise((o,a)=>{n.onsuccess=()=>o(n.result),n.onerror=()=>a(n.error)})},_a=async e=>Ve(Ie.SETTINGS,{...e,id:"current"}),Mn=async()=>Zt(Ie.PRESETS),$a=async e=>Ve(Ie.PRESETS,e),he=Ie,Fr=async e=>(Ft||await Ss(),new Promise((t,n)=>{const r=Ft.transaction([Ie.MESSAGES],"readonly").objectStore(Ie.MESSAGES).index("conversationId").getAll(IDBKeyRange.only(e));r.onsuccess=()=>{const l=r.result;l.sort((c,f)=>c.timestamp-f.timestamp),t(l)},r.onerror=()=>n(r.error)})),Ed=Object.freeze(Object.defineProperty({__proto__:null,DB_STORES:he,deleteItem:Wt,getAll:Zt,getMessagesByConversationId:Fr,getPresets:Mn,getSettings:Br,initDB:Ss,put:Ve,savePreset:$a,saveSettings:_a},Symbol.toStringTag,{value:"Module"})),hi=[{id:"p1",handle:"studio_noir",name:"Noir Official",persona:"A mysterious, high-end design studio director obsessed with brutalism and silence.",avatar:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",bio:"Curating architectural silence and high-contrast fashion. Based in Paris.",link:"noir.studio/archive",location:"Paris, FR",stats:{followers:"18.4k",following:"942"}}],S=zs({activePersonaId:localStorage.getItem("noir_active_persona_id")||"p1",personas:[],contacts:[],conversations:[],messages:{},relationships:[],stickerCategories:[],stickers:[],isInitialized:!1,wallet:JSON.parse(localStorage.getItem("noir_wallet_data")||JSON.stringify({balance:0,hasPassword:!1,password:"",transactions:[]}))}),Ca=()=>{localStorage.setItem("noir_wallet_data",JSON.stringify(S.wallet))},oa=(e,t,n)=>{const o=Date.now(),a={id:crypto.randomUUID(),type:e,amount:t,title:n,timestamp:o,status:"completed"};if(e==="deposit")S.wallet.balance+=t;else if(e==="withdraw"||e==="transfer"){if(S.wallet.balance<t)return!1;S.wallet.balance-=t}return S.wallet.transactions.unshift(a),Ca(),!0},yi=(e,t)=>{S.wallet.balance+=e;const n={id:crypto.randomUUID(),type:"deposit",amount:e,title:"Refund: "+t,timestamp:Date.now(),status:"completed"};S.wallet.transactions.unshift(n),Ca()},Od=e=>{S.wallet.password=e,S.wallet.hasPassword=!0,Ca()},Vr=e=>S.wallet.password===e,Pd=async()=>{try{await Ss();const e=await Zt(he.PERSONAS);if(e.length>0){const r=e.filter(l=>l&&l.id);S.personas.splice(0,S.personas.length,...r)}else{S.personas.splice(0,S.personas.length,...hi);for(const r of hi)await Ve(he.PERSONAS,r)}const n=(await Zt(he.CONTACTS)).filter(r=>r&&r.id);S.contacts.splice(0,S.contacts.length,...n);const o=await Zt(he.CONVERSATIONS);S.conversations.splice(0,S.conversations.length,...o.reverse());const a=await Zt(he.RELATIONSHIPS);S.relationships.splice(0,S.relationships.length,...a),await Wd();const i=localStorage.getItem("noir_active_persona_id");i&&(S.activePersonaId=i),S.isInitialized=!0,console.log("Store initialized. Actve:",S.activePersonaId,"Personas:",S.personas.length)}catch(e){console.error("Failed to initialize store:",e)}},aa=me(()=>S.personas.find(e=>e.id===S.activePersonaId)||S.personas[0]),Nd=async e=>{S.personas.push(e),await Ve(he.PERSONAS,JSON.parse(JSON.stringify(e)))},Rd=async e=>{const t=S.personas.findIndex(n=>n.id===e.id);t!==-1&&(S.personas[t]=e,await Ve(he.PERSONAS,JSON.parse(JSON.stringify(e))))},Ld=async e=>{const t=S.personas.findIndex(n=>n.id===e);if(t!==-1&&(S.personas.splice(t,1),await Wt(he.PERSONAS,e),S.activePersonaId===e)){const n=S.personas[0];n&&_o(n.id)}},_o=e=>{console.log("Setting active persona:",e),S.activePersonaId=e,localStorage.setItem("noir_active_persona_id",e)},Dd=async e=>{S.contacts.push(e),await Ve(he.CONTACTS,e)},Bd=async e=>{const t=S.contacts.findIndex(n=>n.id===e.id);t!==-1&&(S.contacts[t]=e,await Ve(he.CONTACTS,e))},Fd=async e=>{const t=S.contacts.findIndex(n=>n.id===e);t!==-1&&(S.contacts.splice(t,1),await Wt(he.CONTACTS,e))},wi=async e=>{if(!S.conversations.find(n=>n.id===e.id)){S.conversations.unshift(e);const n=JSON.parse(JSON.stringify(e));await Ve(he.CONVERSATIONS,n);const o=e.myActivePersonaId||S.activePersonaId,a=e.participants?.find(i=>i!==o&&i!=="user"&&i!==e.myActivePersonaId)||e.contactId;o&&a&&(S.relationships.find(r=>r.sourceId===o&&r.targetId===a)||await Ur(o,a,"new"))}},On=async e=>{const t=S.conversations.findIndex(n=>n.id===e.id);if(t!==-1){const n={...S.conversations[t],...e};S.conversations[t]=n;try{const a=JSON.parse(JSON.stringify(we(n)));await Ve(he.CONVERSATIONS,a)}catch(o){console.error("Failed to serialize conversation for DB:",o)}}},Ko=async e=>{S.messages[e]||(S.messages[e]=[]);const t=await Fr(e);S.messages[e]=t},Lt=async(e,t)=>{S.messages[e]||(S.messages[e]=[]),S.messages[e].push(t),await Ve(he.MESSAGES,t);const n=S.conversations.find(o=>o.id===e);n&&On({...n,lastMessage:t.text,time:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),updatedAt:t.timestamp})},un=async(e,t)=>{if(!S.messages[e])return;const n=S.messages[e].findIndex(o=>o.id===t.id);n!==-1&&(S.messages[e][n]=t,await Ve(he.MESSAGES,t))},Vd=async(e,t)=>{if(!S.messages[e])return;const n=S.messages[e].findIndex(o=>o.id===t);n!==-1&&(S.messages[e].splice(n,1),await Wt(he.MESSAGES,t))},Ud=async(e,t)=>{if(S.messages[e]){S.messages[e]=S.messages[e].filter(n=>!t.includes(n.id));for(const n of t)await Wt(he.MESSAGES,n)}},$o=e=>S.conversations.find(t=>t.id===e),Ur=async(e,t,n)=>{const o=S.relationships.find(i=>i.sourceId===e&&i.targetId===t);if(o){o.type!==n&&await Kr(o.id,n);return}const a={id:crypto.randomUUID(),sourceId:e,targetId:t,type:n,createdAt:Date.now()};S.relationships.push(a),await Ve(he.RELATIONSHIPS,a)},Kr=async(e,t)=>{const n=S.relationships.findIndex(o=>o.id===e);if(n!==-1){const o={...S.relationships[n],type:t};S.relationships[n]=o,await Ve(he.RELATIONSHIPS,o)}},Kd=async e=>{const t=S.relationships.findIndex(n=>n.id===e);t!==-1&&(S.relationships.splice(t,1),await Wt(he.RELATIONSHIPS,e))},Wd=async()=>{const e=await Zt(he.STICKER_CATEGORIES);S.stickerCategories=e||[];const t=await Zt(he.STICKERS);S.stickers=t||[]},ki=async(e,t)=>{const n={id:crypto.randomUUID(),name:e,coverUrl:t||"",createdAt:Date.now()};return S.stickerCategories.push(n),await Ve(he.STICKER_CATEGORIES,n),n},Hd=async(e,t)=>{const n=S.stickerCategories.findIndex(o=>o.id===e);if(n!==-1){const o={...S.stickerCategories[n],...t};S.stickerCategories[n]=o,await Ve(he.STICKER_CATEGORIES,o)}},_i=async e=>{const t=S.stickerCategories.findIndex(n=>n.id===e);if(t!==-1){S.stickerCategories.splice(t,1),await Wt(he.STICKER_CATEGORIES,e);const n=S.stickers.filter(o=>o.categoryId===e);for(const o of n)await ia(o.id)}},Hn=async(e,t,n)=>{const o={id:crypto.randomUUID(),categoryId:e,url:t,keyword:n||"sticker",createdAt:Date.now()};return S.stickers.push(o),await Ve(he.STICKERS,o),o},ia=async e=>{const t=S.stickers.findIndex(n=>n.id===e);t!==-1&&(S.stickers.splice(t,1),await Wt(he.STICKERS,e))},Zs=e=>S.stickers.filter(t=>t.categoryId===e),Ke=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},Gd={class:"h-full flex flex-col bg-background-light text-black"},qd={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-50"},Qd={class:"flex items-center justify-between px-6 pt-[env(safe-area-inset-top)] pb-3 w-full"},Jd={class:"flex-1"},Yd={class:"flex-1 flex justify-end"},Xd={class:"flex-1 overflow-y-auto w-full pb-[calc(5rem+env(safe-area-inset-bottom))]"},Zd={class:"relative px-6 py-8 border-b border-gray-50"},eu={class:"ml-14 mt-6 flex items-center gap-6 text-black"},tu={__name:"Feed",emits:["close","navigate"],setup(e,{emit:t}){return(n,o)=>(u(),v("div",Gd,[s("header",qd,[s("div",Qd,[s("div",Jd,[s("button",{onClick:o[0]||(o[0]=a=>n.$emit("close")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...o[4]||(o[4]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),o[6]||(o[6]=s("div",{class:"flex justify-center"},[s("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir")],-1)),s("div",Yd,[s("button",{onClick:o[1]||(o[1]=a=>n.$emit("navigate","following")),class:"size-10 rounded-full bg-white border border-gray-100 flex items-center justify-center overflow-hidden hover:bg-gray-50 transition-colors -mr-2"},[...o[5]||(o[5]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-black"},[s("circle",{cx:"11",cy:"11",r:"8"}),s("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)])])])])]),s("main",Xd,[s("article",Zd,[o[10]||(o[10]=dt('<div class="thread-line" data-v-76bdade7></div><div class="flex items-start gap-4 mb-4 relative z-10" data-v-76bdade7><div class="size-10 shrink-0 rounded-full bg-zinc-900 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-76bdade7><div class="w-1/2 h-[1px] bg-white rotate-45" data-v-76bdade7></div></div><div class="flex flex-col flex-1" data-v-76bdade7><div class="flex items-center justify-between" data-v-76bdade7><div class="flex items-center gap-1" data-v-76bdade7><span class="font-bold text-[14px] tracking-tight" data-v-76bdade7>studio_noir</span><span class="material-symbols-outlined text-[14px] active-icon" data-v-76bdade7>verified</span></div><span class="text-xs font-light tracking-tight text-neutral-400" data-v-76bdade7>4m</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-76bdade7> Symmetry in stone. A study of concrete textures and morning shadows. Winter editorial. </p></div><button class="text-zinc-300" data-v-76bdade7><span class="material-symbols-outlined" data-v-76bdade7>more_horiz</span></button></div>',2)),s("div",{onClick:o[2]||(o[2]=a=>n.$emit("navigate","post",{id:"p1"})),class:"cursor-pointer ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-[4/5] editorial-image",style:{"background-image":"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E')","background-size":"cover","background-position":"center"}}),s("div",eu,[o[8]||(o[8]=s("button",{class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[s("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[s("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),s("span",{class:"text-[12px] font-medium"},"2.8k")],-1)),s("button",{onClick:o[3]||(o[3]=a=>n.$emit("navigate","post",{id:"p1"})),class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[...o[7]||(o[7]=[s("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[s("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),s("span",{class:"text-[12px] font-medium"},"56",-1)])]),o[9]||(o[9]=dt('<button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><polyline points="17 1 21 5 17 9" data-v-76bdade7></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-76bdade7></path><polyline points="7 23 3 19 7 15" data-v-76bdade7></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>112</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-76bdade7></path></svg></button>',2))])]),o[11]||(o[11]=dt('<article class="relative px-6 py-8 border-b border-gray-50" data-v-76bdade7><div class="flex items-start gap-4" data-v-76bdade7><div class="size-10 shrink-0 rounded-full bg-zinc-50 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-76bdade7><div class="size-4 rounded-sm border border-black rotate-12" data-v-76bdade7></div></div><div class="flex flex-col flex-1" data-v-76bdade7><div class="flex items-center justify-between" data-v-76bdade7><span class="font-bold text-[14px] tracking-tight" data-v-76bdade7>elena_di_rossi</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-76bdade7>2h</span></div><p class="text-[15px] leading-relaxed mt-1 font-serif italic text-zinc-900" data-v-76bdade7> In design, if you are not taking a risk, you are not doing anything new. Perfection is the enemy. </p><div class="mt-6 flex items-center gap-6 text-black" data-v-76bdade7><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>892</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><polyline points="17 1 21 5 17 9" data-v-76bdade7></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-76bdade7></path><polyline points="7 23 3 19 7 15" data-v-76bdade7></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>4</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-76bdade7></path></svg></button></div></div><button class="text-zinc-300" data-v-76bdade7><span class="material-symbols-outlined" data-v-76bdade7>more_horiz</span></button></div></article><article class="relative px-6 py-8" data-v-76bdade7><div class="flex items-start gap-4 mb-4" data-v-76bdade7><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-76bdade7><div class="size-5 border-2 border-white/40 rounded-full" data-v-76bdade7></div></div><div class="flex flex-col flex-1" data-v-76bdade7><div class="flex items-center justify-between" data-v-76bdade7><span class="font-bold text-[14px] tracking-tight" data-v-76bdade7>arc_digest</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-76bdade7>5h</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-76bdade7> High desert sanctuary. Minimalism meets nature. </p></div><button class="text-zinc-300" data-v-76bdade7><span class="material-symbols-outlined" data-v-76bdade7>more_horiz</span></button></div><div class="ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-video editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0&#39;);background-size:cover;background-position:center;" data-v-76bdade7></div><div class="ml-14 mt-6 flex items-center gap-6 text-black" data-v-76bdade7><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>2.1k</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><polyline points="17 1 21 5 17 9" data-v-76bdade7></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-76bdade7></path><polyline points="7 23 3 19 7 15" data-v-76bdade7></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-76bdade7></path></svg><span class="text-[12px] font-medium" data-v-76bdade7>14</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-76bdade7><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-76bdade7><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-76bdade7></path></svg></button></div></article>',2))])]))}},su=Ke(tu,[["__scopeId","data-v-76bdade7"]]),nu={class:"fixed inset-x-0 bottom-0 h-[92%] z-[60] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},ou={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},au={class:"text-[16px] font-bold tracking-tight"},iu={class:"flex-1 overflow-y-auto"},ru={key:0,class:"pb-[100px]"},lu={class:"px-4 py-2 mt-2"},cu={class:"flex items-center gap-2 bg-neutral-100 px-3 py-2 rounded-xl"},du=["onClick"],uu={class:"flex items-center gap-3"},fu={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},pu={class:"flex flex-col"},vu={class:"text-[14px] font-bold leading-tight"},bu={class:"text-[13px] text-neutral-500 leading-tight"},xu={key:1,class:"pb-[100px] px-4 pt-2"},gu={class:"flex flex-col gap-4"},mu=["onClick"],hu={class:"flex-1"},yu={class:"text-[15px] font-bold tracking-tight"},wu={class:"text-[12px] text-zinc-500"},ku={__name:"NewMessage",emits:["close","create-group","navigate"],setup(e,{emit:t}){const n=t,o=N(""),a=me(()=>{if(!o.value)return S.contacts;const d=o.value.toLowerCase();return S.contacts.filter(p=>p.handle.toLowerCase().includes(d)||p.name&&p.name.toLowerCase().includes(d))}),i=N("contacts"),r=N(null),l=d=>{r.value=d,i.value="persona"},c=d=>{_o(d),n("navigate","chat",{id:r.value}),n("close")},f=()=>{i.value==="persona"?i.value="contacts":n("close")};return(d,p)=>(u(),v("div",nu,[s("header",ou,[s("button",{onClick:f,class:"text-[16px] text-black hover:opacity-70 transition-opacity"},M(i.value==="persona"?"Back":"Cancel"),1),s("h2",au,M(i.value==="persona"?"Select Persona":"New message"),1),p[2]||(p[2]=s("div",{class:"w-[50px]"},null,-1))]),s("div",iu,[i.value==="contacts"?(u(),v("div",ru,[s("div",lu,[s("div",cu,[p[3]||(p[3]=s("span",{class:"material-symbols-outlined text-neutral-400 text-[20px]"},"search",-1)),se(s("input",{"onUpdate:modelValue":p[0]||(p[0]=h=>o.value=h),type:"text",placeholder:"Search",class:"bg-transparent border-none text-[15px] placeholder:text-neutral-400 focus:ring-0 w-full p-0"},null,512),[[re,o.value]])])]),s("div",{onClick:p[1]||(p[1]=h=>d.$emit("create-group")),class:"flex items-center gap-4 px-4 py-4 hover:bg-neutral-50 transition-colors cursor-pointer"},[...p[4]||(p[4]=[s("div",{class:"size-12 rounded-full border border-neutral-200 flex items-center justify-center bg-transparent shrink-0"},[s("span",{class:"material-symbols-outlined text-[24px] text-black"},"group_add")],-1),s("span",{class:"text-[15px] font-medium tracking-tight"},"Create a New Group",-1)])]),p[6]||(p[6]=s("div",{class:"px-4 py-2 mt-2"},[s("span",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase"},"Suggested")],-1)),(u(!0),v(ae,null,xe(a.value,h=>(u(),v("div",{key:h.id,onClick:I=>l(h.id),class:"flex items-center justify-between px-4 py-3 hover:bg-neutral-50 transition-colors cursor-pointer"},[s("div",uu,[s("div",{class:"size-10 rounded-full bg-neutral-900 overflow-hidden shrink-0 border border-neutral-100",style:Fe({backgroundImage:h.avatar?`url(${h.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[h.avatar?D("",!0):(u(),v("div",fu))],4),s("div",pu,[s("span",vu,M(h.handle),1),s("span",bu,M(h.name||"No Name"),1)])]),p[5]||(p[5]=s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"chevron_right",-1))],8,du))),128))])):i.value==="persona"?(u(),v("div",xu,[s("div",gu,[(u(!0),v(ae,null,xe(Ne(S).personas,h=>(u(),v("div",{key:h.id,onClick:I=>c(h.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[s("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Fe({backgroundImage:`url(${h.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",hu,[s("h3",yu,M(h.handle),1),s("p",wu,M(h.name),1)])],8,mu))),128))])])):D("",!0)])]))}},_u=Ke(ku,[["__scopeId","data-v-a35529b4"]]),$u={class:"fixed inset-x-0 bottom-0 h-[92%] z-[70] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},Cu={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},zu={class:"text-[16px] font-bold tracking-tight"},Su=["disabled"],Iu={key:1,class:"w-[30px]"},Au={class:"flex-1 overflow-y-auto px-6 pt-8 pb-[calc(6rem+env(safe-area-inset-bottom))]"},Mu={key:0},Tu={class:"flex flex-col items-center gap-6 mb-10"},ju={key:1,class:"material-symbols-outlined text-[24px]"},Eu={class:"w-full"},Ou={class:"mt-8"},Pu={key:0,class:"text-center py-4 text-neutral-400 text-sm"},Nu={class:"flex flex-col gap-1"},Ru=["onClick"],Lu={class:"flex items-center gap-3"},Du={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Bu={class:"text-[14px] font-bold"},Fu={key:0,class:"material-symbols-outlined text-white text-[16px]"},Vu={key:1,class:"mt-6 pt-6 border-t border-gray-100"},Uu={class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},Ku={class:"flex flex-wrap gap-4"},Wu=["onClick"],Hu={class:"text-[10px] text-neutral-600 text-center truncate w-full leading-tight"},Gu={key:1},qu={class:"flex flex-col gap-4"},Qu=["onClick"],Ju={class:"flex-1"},Yu={class:"text-[15px] font-bold tracking-tight"},Xu={class:"text-[12px] text-zinc-500"},Zu={__name:"CreateGroup",emits:["back","create"],setup(e,{emit:t}){const n=t,o=N(""),a=N(new Set),i=me(()=>S.contacts),r=me(()=>S.contacts.filter(T=>a.value.has(T.id))),l=T=>{a.value.has(T)?a.value.delete(T):a.value.add(T)},c=T=>{a.value.delete(T)},f=N("details"),d=N(""),p=()=>{const T=prompt("Enter image URL for group photo:");T&&(d.value=T)},h=()=>{f.value==="details"&&o.value&&(f.value="persona")},I=T=>{_o(T),n("create",{name:o.value,avatar:d.value,members:Array.from(a.value)})},R=()=>{f.value==="persona"?f.value="details":n("back")};return(T,B)=>(u(),v("div",$u,[s("header",Cu,[s("button",{onClick:R,class:"text-[16px] text-black hover:opacity-70 transition-opacity flex items-center -ml-1"},[B[1]||(B[1]=s("span",{class:"material-symbols-outlined text-[24px]"},"chevron_left",-1)),_s(" "+M((f.value==="persona","Back")),1)]),s("h2",zu,M(f.value==="persona"?"Select Persona":"Create group"),1),f.value==="details"?(u(),v("button",{key:0,onClick:h,class:"text-[16px] font-bold text-black hover:opacity-70 transition-opacity disabled:opacity-30",disabled:!o.value||r.value.length<2}," Next ",8,Su)):(u(),v("div",Iu))]),s("main",Au,[f.value==="details"?(u(),v("div",Mu,[s("div",Tu,[s("button",{onClick:p,class:"size-24 rounded-full border border-dashed border-neutral-300 flex items-center justify-center flex-col gap-1 text-neutral-400 hover:bg-neutral-50 transition-colors overflow-hidden relative"},[d.value?(u(),v("div",{key:0,class:"absolute inset-0 bg-cover bg-center",style:Fe({backgroundImage:`url(${d.value})`})},null,4)):(u(),v("span",ju,"add_a_photo"))]),B[2]||(B[2]=s("span",{class:"text-[10px] font-bold uppercase tracking-widest text-neutral-400"},"Add Group Photo",-1)),s("div",Eu,[se(s("input",{"onUpdate:modelValue":B[0]||(B[0]=w=>o.value=w),type:"text",placeholder:"Group name",class:"w-full bg-transparent border-0 border-b border-neutral-200 px-0 py-3 text-lg placeholder:text-neutral-300 focus:ring-0 focus:border-black transition-colors"},null,512),[[re,o.value]])])]),s("div",Ou,[B[4]||(B[4]=s("h3",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},"Select Members (Min 2)",-1)),i.value.length===0?(u(),v("div",Pu," No contacts found in Following. ")):D("",!0),s("div",Nu,[(u(!0),v(ae,null,xe(i.value,w=>(u(),v("div",{key:w.id,onClick:C=>l(w.id),class:"flex items-center justify-between py-3 px-2 -mx-2 hover:bg-neutral-50 rounded-xl cursor-pointer transition-colors"},[s("div",Lu,[s("div",{class:"size-10 rounded-full bg-neutral-900 border border-neutral-100 overflow-hidden",style:Fe({backgroundImage:w.avatar?`url(${w.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[w.avatar?D("",!0):(u(),v("div",Du))],4),s("span",Bu,M(w.handle),1)]),s("div",{class:J(["size-6 rounded-full border flex items-center justify-center transition-all",a.value.has(w.id)?"bg-black border-black":"border-neutral-300 bg-white"])},[a.value.has(w.id)?(u(),v("span",Fu,"check")):D("",!0)],2)],8,Ru))),128))]),r.value.length>0?(u(),v("div",Vu,[s("h3",Uu,"Selected ("+M(r.value.length)+")",1),s("div",Ku,[(u(!0),v(ae,null,xe(r.value,w=>(u(),v("div",{key:w.id,class:"flex flex-col items-center gap-2 group relative w-[60px]"},[s("div",{class:"size-12 rounded-full bg-neutral-900 border border-white/20 shadow-sm relative overflow-hidden",style:Fe({backgroundImage:w.avatar?`url(${w.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[s("button",{onClick:Le(C=>c(w.id),["stop"]),class:"absolute top-0 right-0 size-4 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-100 hover:bg-neutral-100"},[...B[3]||(B[3]=[s("span",{class:"material-symbols-outlined text-[10px] text-black"},"close",-1)])],8,Wu)],4),s("span",Hu,M(w.handle),1)]))),128))])])):D("",!0)])])):f.value==="persona"?(u(),v("div",Gu,[s("div",qu,[(u(!0),v(ae,null,xe(Ne(S).personas,w=>(u(),v("div",{key:w.id,onClick:C=>I(w.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[s("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Fe({backgroundImage:`url(${w.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",Ju,[s("h3",Yu,M(w.handle),1),s("p",Xu,M(w.name),1)])],8,Qu))),128))])])):D("",!0)])]))}},ef={class:"h-full flex flex-col bg-background-light text-black relative"},tf={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100/50"},sf={class:"px-6 pb-4 pt-[env(safe-area-inset-top)] w-full"},nf={class:"flex items-center justify-between mb-6"},of={class:"flex items-center gap-2"},af={class:"flex-1 overflow-y-auto w-full pb-24"},rf=["onClick"],lf={key:0,class:"size-14 shrink-0 rounded-full avatar-abstract flex items-center justify-center"},cf={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},df={class:"flex-1 min-w-0"},uf={class:"flex items-center justify-between mb-0.5"},ff={class:"font-bold text-[15px] tracking-tight"},pf={class:"flex items-center gap-2"},vf={key:0,class:"size-2 bg-black rounded-full"},bf={__name:"Inbox",emits:["navigate","close"],setup(e,{emit:t}){const n=t,o=N(!1),a=N(!1),i=d=>{n("navigate","chat",{id:d})},r=()=>{a.value=!0},l=d=>{a.value=!1,o.value=!1;const p={id:"group_"+Date.now(),type:"group",name:d.name,handle:d.name.toLowerCase().replace(/\s+/g,"_"),avatar:d.avatar||"",members:d.members||[],lastMessage:"Group created",time:"Just now",unread:!1};wi(p),n("navigate","chat",{id:p.id})},c=(d,p)=>{if(d==="chat"&&p.id){const h=S.contacts.find(R=>R.id===p.id);!S.conversations.find(R=>R.id===p.id)&&h&&wi({id:h.id,type:"direct",name:h.name,handle:h.handle,avatar:h.avatar,lastMessage:"Draft",time:"Now",unread:!1})}o.value=!1,n("navigate",d,p),o.value=!1,n("navigate",d,p)},f=d=>{const p=d.localSettings||{};if(d.type==="group"||d.isAbstract)return{avatar:p.groupAvatarOverride||d.avatar,handle:p.groupNameOverride||d.title||d.handle||"Group",isAbstract:d.isAbstract};const h=S.contacts.find(I=>I.id===d.id);return h?{avatar:p.theirAvatarOverride||h.avatar,handle:p.theirNicknameOverride||h.handle,isAbstract:!1}:{avatar:p.theirAvatarOverride||d.avatar,handle:p.theirNicknameOverride||d.handle,isAbstract:!1}};return jt(()=>{}),(d,p)=>(u(),v("div",ef,[s("header",tf,[s("div",sf,[s("div",nf,[s("div",of,[s("button",{onClick:p[0]||(p[0]=h=>d.$emit("close")),class:"flex items-center justify-center size-8 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...p[4]||(p[4]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),p[5]||(p[5]=s("h1",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Messages",-1))]),s("button",{onClick:p[1]||(p[1]=h=>o.value=!0),class:"hover:opacity-50 transition-opacity"},[...p[6]||(p[6]=[s("span",{class:"material-symbols-outlined text-[24px]"},"edit_square",-1)])])]),p[7]||(p[7]=s("div",{class:"relative"},[s("input",{class:"w-full bg-neutral-100 border-none rounded-full py-2 px-5 text-sm placeholder:text-neutral-400 focus:ring-1 focus:ring-black transition-all",placeholder:"Search",type:"text"})],-1))])]),s("main",af,[(u(!0),v(ae,null,xe(Ne(S).conversations,h=>(u(),v("div",{key:h.id,onClick:I=>i(h.id),class:"flex items-center gap-4 px-6 py-5 hover:bg-neutral-50 transition-colors cursor-pointer group border-b border-gray-50"},[h.isAbstract?(u(),v("div",lf,[...p[8]||(p[8]=[s("div",{class:"absolute inset-0 bg-zinc-900"},null,-1),s("div",{class:"relative size-6 border-[0.5px] border-white/30 rotate-45"},null,-1)])])):(u(),v("div",{key:1,class:"size-14 shrink-0 rounded-full bg-neutral-900 flex items-center justify-center overflow-hidden border border-neutral-100",style:Fe({backgroundImage:f(h).avatar?`url(${f(h).avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[f(h).avatar?D("",!0):(u(),v("div",cf))],4)),s("div",df,[s("div",uf,[s("span",ff,M(f(h).handle),1),s("div",pf,[s("span",{class:J(["text-[11px] font-medium",h.unread?"text-black":"text-neutral-400"])},M(h.time),3),h.unread?(u(),v("div",vf)):D("",!0)])]),s("p",{class:J(["text-[14px] font-semibold truncate leading-snug",h.unread?"text-black":"text-neutral-500"])},M(h.lastMessage),3)])],8,rf))),128))]),De(Vs,{name:"slide-up"},{default:ys(()=>[o.value?(u(),ke(_u,{key:0,onClose:p[2]||(p[2]=h=>o.value=!1),onCreateGroup:r,onNavigate:c})):D("",!0)]),_:1}),De(Vs,{name:"slide-right"},{default:ys(()=>[a.value?(u(),ke(Zu,{key:0,onBack:p[3]||(p[3]=h=>a.value=!1),onCreate:l})):D("",!0)]),_:1})]))}},xf=Ke(bf,[["__scopeId","data-v-7e3f85fe"]]),gf="modulepreload",mf=function(e,t){return new URL(e,t).href},$i={},hf=function(t,n,o){let a=Promise.resolve();if(n&&n.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};const r=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=f(n.map(d=>{if(d=mf(d,o),d in $i)return;$i[d]=!0;const p=d.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(o)for(let R=r.length-1;R>=0;R--){const T=r[R];if(T.href===d&&(!p||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const I=document.createElement("link");if(I.rel=p?"stylesheet":gf,p||(I.as="script"),I.crossOrigin="",I.href=d,c&&I.setAttribute("nonce",c),document.head.appendChild(I),p)return new Promise((R,T)=>{I.addEventListener("load",R),I.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return a.then(r=>{for(const l of r||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},wt=zs({id:"current",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.7,stream:!1,modelsList:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"]}),$t=zs({list:[],currentPresetId:"custom"}),yf=async()=>{const e=await Br();e?(Object.assign(wt,e),wt.stream===void 0&&(wt.stream=!1)):await _a(we(wt));const t=await Mn();if($t.list=t,$t.currentPresetId=wt.activePresetId||"custom",t.length===0){const n=[{id:"editorial",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.3,stream:!1},{id:"creative",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.9,stream:!1},{id:"drafting",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,stream:!1}];for(const o of n)await $a(o);$t.list=await Mn()}},za=async e=>{Object.assign(wt,e),e.currentPresetId&&($t.currentPresetId=e.currentPresetId);const t={...we(wt),activePresetId:$t.currentPresetId};await _a(t)},wf=()=>{if(!wt.apiKey)return"";const e=wt.apiKey.split(",").map(n=>n.trim()).filter(n=>n);if(e.length===0)return"";const t=Math.floor(Math.random()*e.length);return e[t]},kf=async e=>{try{const t=e?.apiKey!==void 0?e.apiKey:wt.apiKey,n=e?.endpoint!==void 0?e.endpoint:wt.endpoint;let o="";if(t){const c=t.split(",").map(f=>f.trim()).filter(f=>f);c.length>0&&(o=c[Math.floor(Math.random()*c.length)])}if(!o)throw new Error("No API Key provided");let i=`${n.replace(/\/+$/,"")}/models`;const r=await fetch(i,{headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error(`Fetch failed: ${r.statusText}`);const l=await r.json();return l.data&&Array.isArray(l.data)&&(wt.modelsList=l.data.map(c=>c.id)),!0}catch(t){return console.error("Failed to fetch models",t),!1}},_f=e=>$t.list.find(t=>t.id===e),$f=async(e,t)=>{const n={id:Date.now().toString(),name:e,provider:t.provider,endpoint:t.endpoint,apiKey:t.apiKey,model:t.model,temperature:t.temperature,stream:t.stream};await $a(n),$t.list=await Mn(),$t.currentPresetId=n.id,wt.activePresetId=n.id,await za({...t,activePresetId:n.id})},Cf=async()=>{if($t.currentPresetId&&$t.currentPresetId!=="custom"){const e=$t.currentPresetId;await hf(()=>Promise.resolve().then(()=>Ed),void 0,import.meta.url).then(t=>t.deleteItem("presets",e)),$t.list=await Mn(),$t.currentPresetId="custom",wt.activePresetId="custom",await za({activePresetId:"custom"})}},Wr=()=>({...Ol(wt),presetState:$t,init:yf,getActiveKey:wf,fetchModels:kf,getPresetById:_f,commitSettings:za,saveCurrentAsPreset:$f,deleteCurrentPreset:Cf}),Ci="worldbook_db",Oe=zs({categories:[],entries:[]}),zf=async()=>{try{await Ss();const e=localStorage.getItem(Ci);if(e){console.log("Migrating WorldBook data from localStorage to IndexedDB...");try{const o=JSON.parse(e),a=o.categories||[],i=o.entries||[];for(const r of a)await Ve(he.WORLDBOOK_CATEGORIES,r);for(const r of i)r.scope||(r.scope="global"),await Ve(he.WORLDBOOK_ENTRIES,r);localStorage.removeItem(Ci),console.log("Migration complete.")}catch(o){console.error("Migration failed:",o)}}const t=await Zt(he.WORLDBOOK_CATEGORIES),n=await Zt(he.WORLDBOOK_ENTRIES);t.length===0&&n.length===0?await Sf():(Oe.categories.splice(0,Oe.categories.length,...t),Oe.entries.splice(0,Oe.entries.length,...n))}catch(e){console.error("Failed to load WorldBook store:",e)}},Sf=async()=>{const e=[{id:"cat_myth",name:""},{id:"cat_history",name:""},{id:"cat_chars",name:""},{id:"cat_locs",name:""}];Oe.categories.splice(0,Oe.categories.length,...e),Oe.entries.splice(0,Oe.entries.length);for(const t of e)await Ve(he.WORLDBOOK_CATEGORIES,t)},Co=()=>(Oe.categories.length===0&&zf(),{state:Oe,getCategories:()=>Oe.categories,getEntriesByCategory:(d,p="global")=>Oe.entries.filter(h=>h.categoryId===d&&h.scope===p),getEntry:d=>Oe.entries.find(p=>p.id===d),addCategory:async d=>{const p=`cat_${Date.now()}`,h={id:p,name:d};return Oe.categories.push(h),await Ve(he.WORLDBOOK_CATEGORIES,h),p},updateCategory:async(d,p)=>{const h=Oe.categories.find(I=>I.id===d);if(h){h.name=p;const I=we(h);await Ve(he.WORLDBOOK_CATEGORIES,{...I})}},deleteCategory:async d=>{const p=Oe.entries.filter(I=>I.categoryId===d);Oe.entries=Oe.entries.filter(I=>I.categoryId!==d);const h=Oe.categories.findIndex(I=>I.id===d);h!==-1&&Oe.categories.splice(h,1),await Wt(he.WORLDBOOK_CATEGORIES,d);for(const I of p)await Wt(he.WORLDBOOK_ENTRIES,I.id)},addEntry:async d=>{const p={...d,id:`entry_${Date.now()}`,createdAt:Date.now(),updatedAt:Date.now()};return Oe.entries.push(p),await Ve(he.WORLDBOOK_ENTRIES,p),p.id},updateEntry:async(d,p)=>{const h=Oe.entries.findIndex(I=>I.id===d);if(h!==-1){const I={...Oe.entries[h],...p,updatedAt:Date.now()};Oe.entries[h]=I;const R=we(I);await Ve(he.WORLDBOOK_ENTRIES,R)}},deleteEntry:async d=>{const p=Oe.entries.findIndex(h=>h.id===d);p!==-1&&(Oe.entries.splice(p,1),await Wt(he.WORLDBOOK_ENTRIES,d))},searchEntries:d=>{const p=d.toLowerCase();return Oe.entries.filter(h=>h.title.toLowerCase().includes(p)||h.content.toLowerCase().includes(p)||h.keywords?.some(I=>I.toLowerCase().includes(p)))}}),If={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},Af=e=>If[e]||"Unknown",Mf=async e=>{if(!e||e.length<2)return[];try{const t=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=5&language=en&format=json`,o=await(await fetch(t)).json();return!o.results||!Array.isArray(o.results)?[]:o.results.map(a=>({id:a.id,name:a.name,latitude:a.latitude,longitude:a.longitude,country:a.country,admin1:a.admin1}))}catch(t){return console.error("City Search Failed",t),[]}},Tf=async(e,t)=>{try{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,weather_code,is_day&timezone=auto`,a=await(await fetch(n)).json();return a.current?{temperature:a.current.temperature_2m,conditionCode:a.current.weather_code,isDay:a.current.is_day,time:a.current.time}:null}catch(n){return console.error("Weather Fetch Failed",n),null}},Wo=new Map,jf=async(e,t)=>{const n=`${e.toFixed(2)},${t.toFixed(2)}`,o=Date.now();if(Wo.has(n)){const i=Wo.get(n);if(o-i.ts<36e5)return console.log("[Environment] Using Cached Weather for",n),i.data}const a=await Tf(e,t);return a&&(console.log("[Environment] Fetched New Weather for",n),Wo.set(n,{data:a,ts:o})),a},Ef={class:"h-[100dvh] flex flex-col bg-background-light text-black"},Of={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},Pf={class:"flex items-center px-4 pt-[env(safe-area-inset-top)] pb-3 w-full"},Nf={class:"flex items-center gap-3 ml-1 cursor-pointer"},Rf={key:0,class:"absolute inset-0 bg-zinc-900"},Lf={key:1,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Df={class:"flex flex-col"},Bf={class:"font-serif text-[17px] font-semibold tracking-tight"},Ff={class:"flex-1 flex justify-end"},Vf={class:"flex justify-center my-4"},Uf={class:"text-[10px] text-zinc-400 uppercase tracking-[0.2em] font-semibold"},Kf={key:0,class:"flex flex-col gap-4"},Wf=["id"],Hf={class:"w-full flex items-start transition-all duration-300"},Gf=["onClick"],qf={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Qf=["onContextmenu"],Jf={key:0,class:"text-[10px] text-zinc-500 font-bold mb-1 ml-1"},Yf=["onClick"],Xf={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},Zf={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},ep=["src"],tp=["onClick"],sp={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center animate-in fade-in duration-300"},np={key:1,class:"absolute inset-0 z-20 p-6 flex items-center justify-center animate-in fade-in zoom-in-95 duration-500"},op={class:"font-serif text-[20px] leading-relaxed text-center text-black/90 break-words drop-shadow-sm italic"},ap=["onClick"],ip={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},rp={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},lp=["onClick"],cp=["src"],dp=["onClick"],up={class:"flex items-center justify-between mb-4 relative z-0"},fp={class:"flex items-center gap-2"},pp={class:"material-symbols-outlined text-[16px]"},vp={class:"text-[10px] font-bold opacity-40"},bp={class:"mb-1 relative z-0"},xp={class:"text-2xl font-serif font-bold tracking-tight"},gp={class:"text-[11px] opacity-50 relative z-0"},mp=["onClick"],hp={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-10"},yp={class:"flex items-center justify-between mb-4 relative z-0"},wp={class:"flex items-center gap-2"},kp={class:"text-[10px] font-bold opacity-40"},_p={class:"mb-1 relative z-0"},$p={class:"flex flex-col relative z-0 gap-0.5"},Cp={class:"text-[11px] opacity-60 font-medium lowercase"},zp={key:0,class:"text-[11px] opacity-50 italic truncate max-w-[180px]"},Sp=["onClick"],Ip={class:"message-text leading-snug break-words whitespace-pre-wrap"},Ap={class:"text-[9px] text-zinc-400 mt-1 mx-1 tracking-wider uppercase"},Mp={key:1,class:"flex flex-col items-start gap-1"},Tp={class:"flex items-end gap-2 px-1"},jp={key:2,class:"flex flex-col items-center justify-center h-full text-neutral-400"},Ep={key:1,class:"absolute inset-x-0 bottom-0 top-auto h-auto bg-white rounded-t-[32px] shadow-[0_-8px_40px_rgba(0,0,0,0.1)] z-[60] flex flex-col animate-in slide-in-from-bottom-10 duration-300 overflow-hidden text-black border-t border-zinc-100/50"},Op={class:"h-10 flex items-center justify-between px-6 shrink-0 bg-white"},Pp={class:"flex items-center gap-3"},Np={class:"h-[255px] overflow-y-auto custom-scrollbar px-6 py-2 bg-white"},Rp={key:0,class:"grid grid-cols-4 gap-4"},Lp=["onClick"],Dp={class:"aspect-square w-full bg-white border border-zinc-50 rounded-[22px] overflow-hidden group-hover:border-zinc-200 group-hover:shadow-[0_4px_12px_rgba(0,0,0,0.03)] transition-all relative"},Bp=["src"],Fp={class:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.15em] truncate w-full text-center group-hover:text-black transition-colors font-sans"},Vp={key:1,class:"flex flex-col items-center justify-center h-full text-zinc-300 gap-3"},Up={class:"flex flex-col items-center gap-1"},Kp={class:"flex items-center justify-between px-5 bg-white border-t border-zinc-50 gap-4 shrink-0 pt-2 pb-safe"},Wp={class:"flex-1 overflow-x-auto custom-scrollbar flex items-center gap-4 px-2 hide-scrollbar"},Hp=["onClick"],Gp={class:"w-6 h-6 flex items-center justify-center"},qp={key:0,class:"absolute -bottom-2 w-1 h-1 bg-black rounded-full"},Qp={key:1,class:"material-symbols-outlined text-[20px]"},Jp={key:2,class:"text-[10px] font-black uppercase font-serif"},Yp={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Xp={class:"flex flex-col gap-2 max-h-[50vh] overflow-y-auto custom-scrollbar px-1"},Zp={key:0,class:"text-center py-10 text-zinc-300 flex flex-col items-center gap-3"},ev=["onClick"],tv={class:"flex items-center gap-4"},sv={class:"w-10 h-10 rounded-xl bg-white border border-zinc-100 flex items-center justify-center text-xs font-serif font-bold text-zinc-700 shadow-sm"},nv={class:"font-semibold text-zinc-900 text-[15px]"},ov={class:"material-symbols-outlined text-[14px] font-bold"},av={class:"grid grid-cols-1 mt-4"},iv={key:2,class:"absolute left-4 right-4 bottom-[80px] bg-white/90 backdrop-blur-2xl rounded-[32px] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.12)] border border-zinc-100 p-6 z-40 animate-in slide-in-from-bottom-6 fade-in duration-300 ring-1 ring-black/5"},rv={class:"grid grid-cols-4 gap-x-2 gap-y-6"},lv={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},cv={class:"flex items-center gap-3 w-full"},dv={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},uv={key:0,class:"font-serif italic text-2xl mb-1 text-center"},fv={key:1,class:"font-serif italic text-2xl mb-1 text-center"},pv={key:2},vv={key:0,class:"mb-6"},bv={class:"relative"},xv=["value"],gv={key:1,class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},mv={class:"flex flex-col gap-4"},hv={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},yv={class:"grid grid-cols-2 gap-3"},wv={key:3,class:"animate-in slide-in-from-right-8 duration-300"},kv={class:"flex justify-center mb-8"},_v={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},$v={class:"grid grid-cols-2 gap-3"},Cv={class:"bg-white w-full max-w-xs rounded-[32px] shadow-2xl p-0 animate-in zoom-in-95 duration-300 overflow-hidden relative"},zv={class:"p-8 text-center -mt-10"},Sv={class:"font-serif text-3xl font-bold mb-1"},Iv={class:"text-xs text-zinc-400 uppercase tracking-widest mb-6"},Av={class:"space-y-3 text-sm border-t border-zinc-100 pt-6"},Mv={class:"flex justify-between"},Tv={class:"font-medium"},jv={class:"flex justify-between"},Ev={class:"text-zinc-400"},Ov={class:"font-medium"},Pv={key:0,class:"flex justify-between"},Nv={class:"font-medium text-zinc-800"},Rv={key:0,class:"mt-8 grid grid-cols-2 gap-3"},Lv=["src"],Dv={key:1,class:"fixed inset-x-0 bottom-0 z-[10000] animate-in slide-in-from-bottom-full duration-300"},Bv={class:"bg-white/95 backdrop-blur-xl rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.1)] overflow-hidden"},Fv={class:"flex flex-col"},Vv={class:"border-t border-zinc-100 py-3 pb-safe"},Uv={key:4,class:"fixed bottom-10 left-0 right-0 z-[100] flex justify-center pointer-events-none animate-in slide-in-from-bottom-20 duration-300"},Kv={class:"bg-black text-white h-[64px] rounded-full shadow-[0_8px_40px_rgba(0,0,0,0.3)] flex items-center px-8 gap-8 pointer-events-auto min-w-[280px] justify-between ring-1 ring-white/10 mx-6"},Wv={class:"font-bold text-xs tracking-[0.2em] font-sans whitespace-nowrap"},Hv={class:"flex items-center gap-6"},Gv=["disabled"],qv={key:5,class:"sticky bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md pb-safe border-t border-gray-100 z-50"},Qv={key:0,class:"px-4 py-2 bg-zinc-50 border-b border-zinc-100 flex items-center justify-between"},Jv={class:"flex items-center gap-3 overflow-hidden"},Yv={class:"flex flex-col"},Xv={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-500"},Zv={class:"text-xs text-zinc-600 line-clamp-1 truncate"},e0={class:"px-4 py-3 flex items-center gap-2"},t0={class:"flex-1 relative"},s0={__name:"Chat",props:["chatId"],emits:["back","navigate"],setup(e,{emit:t}){const n=e,o=t,a=me(()=>$o(n.chatId)),i=me(()=>{const k=a.value;if(!k)return{};const b=k.localSettings||{};if(k.type==="group"||k.isAbstract)return{avatar:b.groupAvatarOverride||k.avatar,handle:b.groupNameOverride||k.handle||k.title||"Group",isAbstract:k.isAbstract,id:k.id};const _=S.contacts.find(fe=>fe.id===k.id);return{avatar:b.theirAvatarOverride||_?.avatar||k.avatar,handle:b.theirNicknameOverride||_?.handle||k.handle,realName:_?.name||k.handle,isAbstract:!1,id:k.id}}),r=()=>{o("back")},l=N(""),c=N(!1),f=N(!1),d=N(!1),p=N(!1),h=N(!1),I=N(""),R=N(""),T=N(""),B=N(null),w=N("input"),C=N(!1),z=N(!1),A=N(new Set),E=N(!1),G=N(null),ne=N(null),pe=k=>{const b=document.getElementById(`msg-${k}`);b?(b.scrollIntoView({behavior:"smooth",block:"center"}),b.classList.add("bg-zinc-100/50"),setTimeout(()=>b.classList.remove("bg-zinc-100/50"),1e3)):console.log("Message target not found in DOM")},ee=k=>{if(k.isMe)return L.value.handle||L.value.name;const b=As(k.senderId);return b&&(b.handle||b.name)||"Unknown"},de=()=>{G.value&&(ne.value=G.value,E.value=!1,G.value=null,f.value=!1,Rs(()=>{const k=document.querySelector("textarea");k&&k.focus()}))},ve=k=>{if(z.value){q(k);return}G.value=k,E.value=!0,f.value=!1},q=k=>{A.value.has(k.id)?A.value.delete(k.id):A.value.add(k.id)},j=()=>{z.value=!0,E.value=!1,G.value&&A.value.add(G.value.id),G.value=null},g=()=>{z.value=!1,A.value.clear()},x=async k=>{if(k){try{await navigator.clipboard.writeText(k.text||k.content||"")}catch(b){console.error("Failed to copy",b)}E.value=!1,G.value=null}},H=async()=>{G.value&&(confirm("Delete this message?")&&await Vd(n.chatId,G.value.id),E.value=!1,G.value=null)},W=async()=>{const k=Array.from(A.value);k.length!==0&&confirm(`Delete ${k.length} messages?`)&&(await Ud(n.chatId,k),g())},$=me(()=>{const k=a.value;return k?k.type==="group"||k.isAbstract?{name:k.handle||"Group",isGroup:!0}:S.contacts.find(_=>_.id===k.id)||{name:k.handle||"Unknown",isGroup:!1}:{name:"Unknown"}}),O=N(null),be=N(!1),et=N(""),ce=()=>{f.value=!1,be.value=!0,et.value=""},Ye=async()=>{if(!et.value.trim())return;const k={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:et.value,type:"spoiler",senderId:"me",timestamp:Date.now(),isMe:!0,isRevealed:!1};await Lt(n.chatId,k),be.value=!1,oe(!0)},Xe=N(!1),rt=N(""),Ge=N(null),Vt=k=>{rt.value=k,Xe.value=!0},Ut=async k=>{const b=k.target.files[0];if(b){if(b.type.startsWith("image/")){const _=new FileReader;_.onload=async fe=>{const qe=fe.target.result,Be={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:"[Image Upload]",content:qe,type:"image",senderId:"me",timestamp:Date.now(),isMe:!0};await Lt(n.chatId,Be),f.value=!1,oe(!0)},_.readAsDataURL(b)}k.target.value=""}},Ct=me(()=>S.stickerCategories),tt=me(()=>{if(!a.value)return[];const k=a.value.localSettings?.mountedStickerPacks;return k==null?Ct.value:Ct.value.filter(b=>k.includes(b.id))}),ss=me(()=>{if(tt.value.length===0)return null;if(O.value){const k=tt.value.find(b=>b.id===O.value);if(k)return k}return tt.value[0]});Fs(tt,k=>{k.length>0?(!O.value||!k.find(b=>b.id===O.value))&&(O.value=k[0].id):O.value=null},{immediate:!0});const m=()=>{f.value=!f.value,f.value&&(d.value=!1)},y=()=>{f.value=!1,d.value=!1},P=()=>{ne.value=null},U=()=>{f.value=!1,d.value=!0},F=()=>{d.value=!1,C.value=!0},V=k=>{const b=a.value?.localSettings?.mountedStickerPacks;return b==null?!0:b.includes(k)},X=async k=>{if(!a.value)return;let b=a.value.localSettings?.mountedStickerPacks;b==null?b=Ct.value.map(fe=>fe.id):b=[...b];const _=b.indexOf(k);_>-1?b.splice(_,1):b.push(k),await On({id:n.chatId,localSettings:{...a.value.localSettings,mountedStickerPacks:b}})},Q=async k=>{const b={id:"msg_"+Date.now(),conversationId:n.chatId,text:k.url,content:k.url,type:"sticker",keyword:k.keyword,senderId:"me",timestamp:Date.now(),isMe:!0};await Lt(n.chatId,b)},K=me(()=>S.messages[n.chatId]||[]),L=me(()=>{const k=a.value?.localSettings?.myActivePersonaId,b=S.activePersonaId,_=k||b;return S.personas.find(fe=>fe.id===_)||S.personas[0]}),ie=N(null),Y=N(null),te=N(!0),oe=async(k=!1)=>{if(await Rs(),!Y.value&&ie.value){ie.value.scrollIntoView({behavior:k?"auto":"smooth"});return}Y.value&&(k?Y.value.scrollTop=Y.value.scrollHeight:Y.value.scrollTo({top:Y.value.scrollHeight,behavior:"smooth"}))};Fs(()=>K.value.length,k=>{k!==0&&(te.value?(oe(!0),te.value=!1):oe(!1))},{flush:"post"}),jt(async()=>{if(await St.init(),n.chatId){if(te.value=!0,await Ko(n.chatId),K.value.length>0&&te.value)oe(!0),te.value=!1;else if(n.chatId==="noir"&&K.value.length===0){const k=[{id:"demo_1",conversationId:"noir",text:"The composition in your latest editorial is remarkable. The use of negative space creates a profound tension.",senderId:"noir_official",timestamp:new Date().setHours(14,22,0,0),isMe:!1,type:"text"},{id:"demo_2",conversationId:"noir",text:"Thank you. I was exploring the intersection of brutalist architecture and morning light.",senderId:"me",timestamp:new Date().setHours(14,25,0,0),isMe:!0,type:"text"},{id:"demo_3",conversationId:"noir",text:'"Silent Forms". Focusing on textures of concrete and silk.',senderId:"noir_official",timestamp:new Date().setHours(14,28,0,0),isMe:!1,type:"text"}];for(const b of k)await Lt("noir",b);await Ko("noir"),oe(!0),te.value=!1}}}),Fs(()=>n.chatId,async k=>{k&&(te.value=!0,await Ko(k),K.value.length>0&&te.value&&(oe(!0),te.value=!1))});const _e=Co(),Te=(k,b)=>{const _=(k+`
`+b).toLowerCase(),fe=_e.state.entries;let qe=fe.filter($e=>$e.scope==="global");const Be=a.value?.localSettings?.mountedWorldbooks||[];if(Be.length>0){const $e=fe.filter(qt=>qt.scope==="local"&&(Be.includes(qt.categoryId)||Be.includes(qt.id)));qe=[...qe,...$e]}const Ze=qe.filter($e=>$e.isConstant?!0:!$e.keywords||$e.keywords.length===0?!1:$e.keywords.some(qt=>_.includes(qt.toLowerCase()))),Qe=[],ye=[],Me=[],We=[];return Ze.forEach($e=>{$e.position==="front"?Qe.push($e.content):$e.position==="back"?Me.push($e.content):$e.depth&&$e.depth>0?We.push({content:$e.content,depth:$e.depth}):ye.push($e.content)}),{front:Qe,mid:ye.join(`

`),back:Me,historyInjections:We}},ze=()=>{I.value="",R.value="",T.value="",transferError.value="",w.value="input",p.value=!0,f.value=!1;const k=a.value;k.type==="group"||k.isGroup?(groupMembers.value=(k.members||[]).map(b=>S.contacts.find(_=>_.id===b)).filter(b=>b&&b.id!==L.value.id),transferTarget.value=""):(transferTarget.value=$.value.id||k.id,groupMembers.value=[])},ut=()=>{const k=parseFloat(I.value);if(!k||k<=0){transferError.value="Invalid amount";return}if(!transferTarget.value){transferError.value="Please select a recipient";return}transferError.value="",w.value="password"},ft=async()=>{if(!S.wallet.hasPassword){transferError.value="Please set payment password in Wallet first";return}if(!Vr(T.value)){transferError.value="Incorrect password";return}const k=parseFloat(I.value);let b=$.value.name;if(groupMembers.value.length>0){const qe=groupMembers.value.find(Be=>Be.id===transferTarget.value);b=qe?qe.name:"Unknown"}if(!oa("transfer",k,`Transfer to ${b}`)){transferError.value="Insufficient balance";return}const fe={id:"msg_"+Date.now(),conversationId:n.chatId,text:`Transfer: ${k.toFixed(2)}`,senderId:L.value.id,recipientId:transferTarget.value,timestamp:Date.now(),isMe:!0,type:"transfer",amount:k,note:R.value,type:"transfer",amount:k,note:R.value,status:"pending"};await Lt(n.chatId,fe),p.value=!1,oe()},Et=k=>{B.value=k,h.value=!0},Ot=k=>{B.value={...k,status:k.action==="collect"?"collected":"rejected",note:k.action==="collect"?"Payment Accepted":"Payment Returned",isMe:!k.isMe},h.value=!0},Is=k=>{if(k.type==="payment_notice")return k.isMe?k.senderName:k.targetName;if(k.isMe){if(k.recipientId){const b=S.contacts.find(_=>_.id===k.recipientId);if(b)return b.name}return $.value.name||"User"}else{const b=As(k.senderId);return b?b.name:$.value.name||"User"}},Pn=async()=>{if(!B.value)return;const k=B.value;await un(n.chatId,{...k,status:"collected"});const b=S.contacts.find(fe=>fe.id===k.senderId),_=b?b.name:"Unknown";yi(k.amount,`Transfer from ${_}`),await Lt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"collect",amount:k.amount,senderName:L.value.name,targetName:_,timestamp:Date.now(),isMe:!0,text:"Accepted transfer"}),h.value=!1},bt=async()=>{if(!B.value)return;const k=B.value;await un(n.chatId,{...k,status:"rejected"});const b=S.contacts.find(fe=>fe.id===k.senderId),_=b?b.name:"Unknown";await Lt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"reject",amount:k.amount,senderName:L.value.name,targetName:_,timestamp:Date.now(),isMe:!0,text:"Rejected transfer"}),h.value=!1},zt=async(k=!1)=>{if(!l.value.trim())return;if(k&&!St.apiKey.value){alert(" API Setup  API Key  Model");return}const b=l.value;l.value="";const _={id:"msg_"+Date.now(),conversationId:n.chatId,text:b,senderId:"me",timestamp:Date.now(),isMe:!0,replyTo:ne.value?{id:ne.value.id,text:ne.value.text||(ne.value.type==="image"?"[Image]":"[Content]"),senderName:ee(ne.value),type:ne.value.type}:null};ne.value=null,await Lt(n.chatId,_),k&&(a.value?.isGroup,zo())},Nn=async()=>{if(l.value.trim())await zt(!0);else{if(!St.apiKey.value){alert(" API Setup  API Key  Model");return}zo()}},St=Wr(),zo=async()=>{if(!St.apiKey.value)return;c.value=!0;const k=L.value.name,b=L.value.persona||"Unknown",_=a.value?.localSettings?.shortTermMemoryLimit||15,fe=K.value.slice(-_),qe=fe.map(Z=>Z.text).join(`
`),{front:Be,mid:Ze,back:Qe,historyInjections:ye}=Te(qe,""),Me=a.value?.localSettings||{},We=Me.timeAwareness!==!1,$e=Me.envSensing===!0,Ms=(Ze?Ze+`
`:"")+"";let Pt="";const lt=[],Ue=[];for(let Z=1;Z<fe.length;Z++){const ue=fe[Z],Se=fe[Z-1],je=ue.timestamp-Se.timestamp,Ce=Math.floor(je/6e4);Ce>15&&Ue.push({index:Z,diffMins:Ce,currTimestamp:ue.timestamp})}Ue.length>4&&Ue.splice(0,Ue.length-4);const It=Z=>{if(Z<60)return`${Z} `;const ue=Math.floor(Z/60),Se=Z%60;return ue<24?`${ue} ${Se>0?" "+Se+" ":""}`:`${Math.floor(ue/24)}  ${ue%24} `},Ws=Z=>{const ue=new Date(Z),Se=ue.getFullYear(),je=String(ue.getMonth()+1).padStart(2,"0"),Ce=String(ue.getDate()).padStart(2,"0"),st=ue.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return`${Se}-${je}-${Ce} ${st}`},on=(Z,ue)=>{let Se=Intl.DateTimeFormat().resolvedOptions().timeZone;Z&&Z.trim()&&(Se=Z.trim());try{const je=ue?new Date(ue):new Date,Ce=je.getFullYear(),st=String(je.getMonth()+1).padStart(2,"0"),Je=String(je.getDate()).padStart(2,"0"),ct=je.toLocaleTimeString("en-US",{timeZone:Se,hour:"2-digit",minute:"2-digit",hour12:!1});return`${Ce}-${st}-${Je} ${ct}`}catch{return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}};let Rn=!1,Mo=0;const Ln=[];if(fe.forEach((Z,ue)=>{const Se=Ue.find(Ce=>Ce.index===ue);if(Se){if(We){const Ce=It(Se.diffMins),Je=`[(${Ws(Se.currTimestamp)})  ${Ce}]`;lt.push({role:"system",content:Je})}Rn=!0,Mo=Se.currTimestamp}let je="Unknown";if(Z.isMe)je=L.value.name;else{const Ce=As(Z.senderId);je=Ce?Ce.name:"Unknown"}if(Z.type==="image")Z.isAnalyzed?lt.push({role:Z.isMe?"user":"assistant",content:`[] ${je}[]`}):(lt.push({role:Z.isMe?"user":"assistant",content:[{type:"text",text:`[] ${je} sent an image.`},{type:"image_url",image_url:{url:Z.content}}]}),Ln.push(Z.id));else if(Z.type==="transfer")lt.push({role:Z.isMe?"user":"assistant",content:`[] ${je}@${Sa(Z)} ${Z.amount?Z.amount.toFixed(2):"0.00"} ${Z.note||""}`.trim()});else if(Z.type==="payment_notice")Z.action==="collect"?lt.push({role:"assistant",content:`[] ${Z.senderName}${Z.targetName} ${Z.amount}`}):lt.push({role:"assistant",content:`[] ${Z.senderName}${Z.targetName} ${Z.amount}`});else{let Ce="[]",st=Z.text;if(Z.type==="sticker"?(Ce="[]",st=Z.keyword):Z.type==="spoiler"&&(Ce="[]",st=Z.text),Z.replyTo){Ce="[]";let Je=Z.replyTo.senderName;if(Z.replyTo.id){const Qt=K.value.find(Nt=>Nt.id===Z.replyTo.id);if(Qt)if(Qt.isMe)Je=L.value.name;else{const Nt=As(Qt.senderId);Nt&&Nt.name&&(Je=Nt.name)}}const ct=`{${Je}${Z.replyTo.text}}`;lt.push({role:Z.isMe?"user":"assistant",content:`${Ce} ${je}${ct} ${st}`})}else lt.push({role:Z.isMe?"user":"assistant",content:`${Ce} ${je}${st}`})}}),fe.length>0){const Z=fe[fe.length-1],ue=Date.now(),Se=ue-Z.timestamp,je=Math.floor(Se/6e4);if(je>15){if(We){const Ce=It(je),Je=`[(${Ws(ue)})  ${Ce}]`;lt.push({role:"system",content:Je})}Rn=!0,Mo=ue}}if(Rn&&(We||$e)||!Rn&&$e){const Z=a.value?.localSettings?.myLocationOverride,ue=L.value.name,Se=Mo||Date.now(),je=a.value?.localSettings?.myWeatherConfig,Ce=async(nt,ot)=>{let kt=[];if(We&&kt.push(on(nt,Se)),$e&&ot&&ot.lat){const Ts=await jf(ot.lat,ot.long);Ts&&kt.push(`${Af(Ts.conditionCode)} ${Ts.temperature}C`)}return kt.join(" ")},st=await Ce(Z,je),Je=[];st&&Je.push(`${ue}: ${st}`);const ct=a.value?.localSettings?.theirLocationOverride,Qt=a.value?.localSettings?.memberOverrides||{},Nt=a.value?.localSettings?.theirWeatherConfig,pt=a.value?.localSettings?.groupWeatherConfigs||{};if((a.value?.type==="group"||a.value?.isGroup)&&Array.isArray(a.value.members))for(const nt of a.value.members){const ot=S.contacts.find(kt=>kt.id===nt);if(ot){const kt=Qt[nt]?.location||ot.location,Ts=pt[nt],an=await Ce(kt,Ts);an&&Je.push(`${ot.name}: ${an}`)}}else{const nt=S.contacts.find(ot=>ot.id===n.chatId);if(nt){const ot=ct||nt.location,kt=await Ce(ot,Nt);kt&&Je.push(`${nt.name}: ${kt}`)}}if(Je.length>0){let nt="",ot="Current Context";We&&!$e&&(nt="",ot="Current Time"),!We&&$e&&(nt="",ot="Current Weather");const kt=Je.join(", ");console.log("[ContextAwareness] Injected:",kt),lt.push({role:"system",content:`[${nt} (${ot})${kt}]`})}}const To=[];tt.value.length>0&&tt.value.forEach(Z=>{Zs(Z.id).forEach(Se=>To.push(Se.keyword))});const Ia=To.length>0?`
[]: ${To.join(", ")}`:`
[]: `;if(a.value?.type==="group"||a.value?.isGroup){const ue=(a.value.members||[]).map(Se=>{const je=typeof Se=="object"?Se.id:Se,Ce=S.contacts.find(st=>st.id===je);return Ce?`${Ce.name||"Unknown"} (${Ce.handle||Ce.name}): ${Ce.persona||Ce.bio||"No persona"}`:""}).filter(Boolean).join(`
`);Pt=`
 ${a.value.title||"Group"}
${k} (${b})
${Ms?`
`+Ms+`
`:""}

${ue||""}
${Ia}


1. 
2. 
3. ** 2  7 **


[] 
[] {}  {}
[] 
[] 
[] @  
[]  []
[]  []


[] Noir Official
[] Noir Official{Magic} 
[] Noir Official
[] Noir Official
[] Noir Official@Magic 50.00 
[] Noir OfficialMagic 50.00

 Noir `}else{const Z=S.contacts.find(je=>je.id===n.chatId),ue=Z?.name||i.value.handle,Se=Z?.persona||Z?.bio||"A helpful assistant.";Pt=`

${ue}
Persona${Se}
${k}
${b}
${Ms?`
`+Ms+`
`:""}
${Ia}


1. 
2. ** 2  7 **


[] ${ue}
[] ${ue}{}  {}
[] ${ue}
[] ${ue}
[] ${ue}@  
[] ${ue} []
[] ${ue} []


[] ${ue}
[] ${ue}{Magic} 
[] ${ue}
[] ${ue}
[] ${ue}@Magic 100.00
[] ${ue}Magic 100.00

`}ye&&ye.length>0&&ye.forEach(Z=>{const ue=Math.max(0,lt.length-Z.depth);lt.splice(ue,0,{role:"system",content:`[] ${Z.content}`})});try{const Z=[...Be.map(ct=>({role:"system",content:`[/] ${ct}`})),{role:"system",content:Pt},...lt,...Qe.map(ct=>({role:"system",content:`[/] ${ct}`}))],ue=St.stream.value===!0;console.log("[TimeAwareness] Settings Stream Value:",St.stream.value),console.log("[TimeAwareness] Effective useStream:",ue);const Se={model:St.model.value||"gpt-3.5-turbo",messages:Z,temperature:St.temperature.value||.7,stream:ue},je=St.getActiveKey(),Ce=St.endpoint.value.replace(/\/+$/,"")+"/chat/completions",st=async()=>{const ct=1500+Math.random()*1500;console.log(`[TimeAwareness] Simulating Delay: ${Math.floor(ct)}ms`),await new Promise(Qt=>setTimeout(Qt,ct))},Je=await fetch(Ce,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je}`},body:JSON.stringify(Se)});if(!Je.ok){const ct=await Je.text();throw new Error(`API Error: ${Je.status} - ${ct}`)}if(ue){const ct=Je.body.getReader(),Qt=new TextDecoder("utf-8");let Nt=!1,pt="";for(;!Nt;){const{value:nt,done:ot}=await ct.read();if(Nt=ot,nt){const Ts=Qt.decode(nt,{stream:!0}).split(`
`);for(const an of Ts)if(an.trim().startsWith("data: ")){const Aa=an.trim().slice(6);if(Aa==="[DONE]")continue;try{const Qr=JSON.parse(Aa).choices?.[0]?.delta?.content||"";pt+=Qr;const Dn=/\[(?:||||||)]/;let ns=pt.search(Dn),Hs=-1;if(ns!==-1){const jo=pt.substring(ns+1).search(Dn);jo!==-1&&(Hs=ns+1+jo)}for(;ns!==-1&&Hs!==-1;){const Ma=pt.slice(ns,Hs).trim();if(await Io(Ma),await st(),pt=pt.slice(Hs),ns=pt.search(Dn),Hs=-1,ns!==-1){const Ta=pt.substring(ns+1).search(Dn);Ta!==-1&&(Hs=ns+1+Ta)}}}catch{}}}}if(pt.search(/\[(?:||||||)]/)!==-1){const nt=pt.substring(pt.search(/\[(?:||||||)]/)).trim();await Io(nt)}}else{const Nt=((await Je.json()).choices?.[0]?.message?.content||"").split(/(?=\[(?:||||||)])/);for(const pt of Nt)pt.trim()&&(await Io(pt),await st())}}catch(Z){console.error("AI Reply failed",Z),c.value=!1}finally{if(c.value=!1,Ln&&Ln.length>0)for(const Z of Ln){const ue=K.value.find(Se=>Se.id===Z);ue&&await un(n.chatId,{...ue,isAnalyzed:!0})}await Rs(),oe()}},So=new Set,Hr=async(k,b,_,fe)=>{const qe=K.value.filter(Ze=>Ze.type==="transfer"&&Ze.status==="pending"&&Ze.isMe===!0&&Math.abs(Ze.amount-fe)<.1&&!So.has(Ze.id)),Be=qe[qe.length-1];if(Be){So.add(Be.id),k==="collect"?await un(n.chatId,{...Be,status:"collected"}):k==="reject"&&(await un(n.chatId,{...Be,status:"rejected"}),yi(Be.amount,`Refund from ${b}`));let Ze=n.chatId;if(a.value?.type==="group"||a.value?.isGroup){const ye=S.contacts.find(Me=>Me.name===b);ye&&(Ze=ye.id)}await Lt(n.chatId,{id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"payment_notice",action:k,amount:fe,senderId:Ze,senderName:b,targetName:_,timestamp:Date.now(),isMe:!1,text:k==="collect"?"Accepted transfer":"Rejected transfer"}),setTimeout(()=>So.delete(Be.id),5e3)}},Io=async k=>{const b=k.match(/^\[(|)]\s*(.+?)[:]\s*(.+?)\s+(\d+(\.\d+)?)/);if(b){const Qe=b[1]===""?"collect":"reject",ye=b[2].trim(),Me=b[3].trim(),We=parseFloat(b[4]);await Hr(Qe,ye,Me,We);return}const _=k.match(/^\[\]\s*(.+?)[:]\s*\{(.+?)[:](.+?)\}\s*(.+)$/s);if(_&&_[4]){const Qe=_[1].trim(),ye=_[2].trim(),Me=_[3].trim(),We=_[4].trim(),$e=K.value.slice().reverse().find(Ue=>{const It=Ue.text&&Ue.text.includes(Me);let Ws=!1;if(Ue.isMe)Ws=ye===L.value.name||ye===L.value.handle;else{const on=As(Ue.senderId);on&&(Ws=ye===on.name||ye===on.handle)}return It&&Ws});let qt=n.chatId;if(a.value?.type==="group"||a.value?.isGroup){let Ue=S.contacts.find(It=>It.name===Qe||It.handle===Qe);Ue&&(qt=Ue.id)}let Pt=ye;if($e)Pt=ee($e);else if(ye===L.value.name)Pt=L.value.handle||L.value.name;else{const Ue=S.contacts.find(It=>It.name===ye);Ue&&(Pt=Ue.handle||Ue.name)}const lt={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:We,content:We,type:"text",senderId:qt,timestamp:Date.now(),isMe:!1,replyTo:{id:$e?$e.id:"unknown_quote",text:Me,senderName:Pt,type:$e?$e.type:"text"}};await Lt(n.chatId,lt),await Rs(),oe();return}const fe=k.match(/^\[]\s*(.+?)[:](.+)$/s);if(fe&&fe[2]){const Qe=fe[1].trim(),ye=fe[2].trim();await Ao(Qe,ye,"text");return}const qe=k.match(/^\[]\s*(.+?)[:](.+)$/s);if(qe&&qe[2]){const Qe=qe[1].trim(),ye=qe[2].trim();await Ao(Qe,ye,"spoiler");return}const Be=k.match(/^\[]\s*(.+?)[:]\s*@(.+?)\s+(\d+(\.\d+)?)\s*(.*)$/);if(Be){const Qe=Be[1].trim(),ye=Be[2].trim(),Me=parseFloat(Be[3]),We=Be[5]?Be[5].trim():"";let $e=n.chatId;if(a.value?.type==="group"||a.value?.isGroup){const Ue=S.contacts.find(It=>It.name===Qe);Ue&&($e=Ue.id)}const Ms=L.value.name.toLowerCase();let Pt=null;if(ye.toLowerCase()===Ms||ye===""||ye==="")Pt=L.value.id;else{const Ue=S.contacts.find(It=>It.name===ye);Ue&&(Pt=Ue.id)}const lt={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"transfer",amount:Me,note:We,senderId:$e,recipientId:Pt,recipientName:ye,timestamp:Date.now(),isMe:!1,status:"pending"};await Lt(n.chatId,lt);return}const Ze=k.match(/^\[]\s*(.+?)[:](.+)$/s);if(Ze&&Ze[2]){const Qe=Ze[1].trim(),ye=Ze[2].trim(),Me=tt.value.flatMap(We=>Zs(We.id)).find(We=>We.keyword===ye);Me&&await Ao(Qe,Me.url,"sticker",ye);return}},Ao=async(k,b,_="text",fe="")=>{let qe=n.chatId;if(a.value?.type==="group"||a.value?.isGroup){const Qe=k.toLowerCase();let ye=S.contacts.find(Me=>Me.name===k||Me.handle===k||Me.id===k||Me.name&&Me.name.toLowerCase()===Qe||Me.handle&&Me.handle.toLowerCase()===Qe);if(!ye&&a.value.members.includes(k)&&(ye=S.contacts.find(Me=>Me.id===k)),!ye&&a.value.members&&a.value.members.length>0){const Me=a.value.members[0];ye=S.contacts.find(We=>We.id===Me)}ye&&(qe=ye.id)}const Ze={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:b,content:b,type:_,keyword:fe,senderId:qe,timestamp:Date.now(),isMe:!1};await Lt(n.chatId,Ze),await Rs(),oe()},Sa=k=>{if(k.recipientName)return k.recipientName;if(k.recipientId){if(k.recipientId===L.value.id)return L.value.name;const b=S.contacts.find(_=>_.id===k.recipientId);if(b)return b.name}return k.isMe?$.value.name||"User":L.value.name},Gr=k=>k.isMe?!1:!!(!k.recipientId&&!k.recipientName||k.recipientId===L.value.id||k.recipientName&&(k.recipientName===L.value.name||k.recipientName===""||k.recipientName.includes(L.value.name))),As=k=>{if(k==="me")return null;const b=a.value?.localSettings?.memberOverrides?.[k],_=S.contacts.find(fe=>fe.id===k);return b?{..._,handle:b.nickname||_?.handle||"Unknown",avatar:b.avatar||_?.avatar,id:k}:_};return(k,b)=>(u(),v("div",Ef,[s("header",Of,[s("div",Pf,[s("button",{onClick:r,class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...b[23]||(b[23]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),s("div",Nf,[s("div",{class:"size-9 rounded-full bg-black overflow-hidden flex items-center justify-center relative border border-gray-100",style:Fe({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[!i.value.avatar&&i.value.isAbstract?(u(),v("div",Rf,[...b[24]||(b[24]=[s("div",{class:"w-[0.5px] h-full bg-white/30 rotate-45 absolute left-1/2"},null,-1),s("div",{class:"w-[0.5px] h-full bg-white/30 -rotate-45 absolute left-1/2"},null,-1)])])):i.value.avatar?D("",!0):(u(),v("div",Lf))],4),s("div",Df,[s("h1",Bf,M(i.value.handle||"Unknown"),1),b[25]||(b[25]=s("span",{class:"text-[9px] text-zinc-400 uppercase tracking-[0.15em] font-medium"},"Online",-1))])]),s("div",Ff,[s("button",{onClick:b[0]||(b[0]=_=>k.$emit("navigate","chat-settings",{id:n.chatId})),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"more_horiz")])])]),s("main",{ref_key:"messagesContainer",ref:Y,class:"flex-1 overflow-y-auto px-5 pt-4 pb-2 flex flex-col gap-4 w-full"},[s("div",Vf,[s("span",Uf,M(a.value?.time||"Today"),1)]),K.value.length>0?(u(),v("div",Kf,[(u(!0),v(ae,null,xe(K.value,_=>(u(),v("div",{key:_.id,id:"msg-"+_.id,class:J(["flex flex-col relative select-none",_.isMe?"items-end":"items-start"])},[s("div",Hf,[s("div",{class:J(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0 pt-[5px]",z.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[s("div",{class:J(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",A.value.has(_.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:fe=>q(_)},[A.value.has(_.id)?(u(),v("span",qf,"check")):D("",!0)],10,Gf)],2),s("div",{class:J(["flex-1 min-w-0 flex flex-col relative transition-all duration-300",[_.isMe?"items-end":"items-start",G.value&&G.value.id===_.id?"z-[60]":"z-auto"]])},[s("div",{class:J(["flex items-start gap-2 mb-2 w-full transition-all duration-300",_.isMe?"flex-row-reverse":"flex-row"]),onContextmenu:Le(fe=>ve(_),["prevent"])},[_.isMe&&a.value?.localSettings?.showSelfAvatar!==!1||!_.isMe&&a.value?.localSettings?.showOtherAvatar!==!1?(u(),v("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Fe({backgroundImage:`url(${_.isMe?a.value?.localSettings?.myAvatarOverride||L.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E":a.value?.localSettings?.theirAvatarOverride||As(_.senderId)?.avatar||a.value?.avatar})`,backgroundSize:"cover"})},null,4)):D("",!0),s("div",{class:J(["flex flex-col max-w-[88%] text-[15px]",_.isMe?"items-end":"items-start"])},[a.value?.type==="group"&&!_.isMe?(u(),v("div",Jf,M(As(_.senderId)?.handle||"Unknown"),1)):D("",!0),_.type==="sticker"?(u(),v("div",{key:1,class:J(["flex flex-col",_.isMe?"items-end":"items-start"])},[_.replyTo?(u(),v("div",{key:0,class:J(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",_.isMe?"items-end":"items-start"]),onClick:Le(fe=>pe(_.replyTo.id),["stop"])},[s("div",{class:J(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(_.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[s("span",Xf,M(_.replyTo.senderName),1),s("span",Zf,M(_.replyTo.text),1)],2)],10,Yf)):D("",!0),s("div",{class:J(["rounded-2xl overflow-hidden mb-1",_.isMe?"rounded-tr-sm":"rounded-tl-sm"])},[s("img",{src:_.content||_.text,class:"max-w-[110px] max-h-[110px] object-contain block bg-white/50 backdrop-blur-sm"},null,8,ep)],2)],2)):_.type==="spoiler"?(u(),v("div",{key:2,class:"relative overflow-hidden rounded-[24px] cursor-pointer group w-[240px] h-[320px] shadow-sm transition-all duration-300 hover:shadow-md",onClick:fe=>_.isRevealed=!_.isRevealed},[b[27]||(b[27]=s("div",{class:"absolute inset-0 bokeh-effect"},null,-1)),_.isRevealed?(u(),v("div",np,[s("p",op,M(_.text),1)])):(u(),v("div",sp,[...b[26]||(b[26]=[dt('<div class="absolute inset-0 z-0 opacity-80" data-v-baae4c2a><div class="absolute w-14 h-16 top-6 left-6 -rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-translate-y-1" data-v-baae4c2a><div class="w-full h-[80%] bg-zinc-800 flex items-center justify-center" data-v-baae4c2a><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-baae4c2a>filter_hdr</span></div></div><div class="absolute w-12 h-16 top-10 right-4 rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:translate-x-1" data-v-baae4c2a><div class="w-full h-[80%] bg-zinc-300 flex items-center justify-center" data-v-baae4c2a><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-baae4c2a>photo_camera</span></div></div><div class="absolute w-14 h-16 bottom-12 left-8 rotate-6 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-rotate-3" data-v-baae4c2a><div class="w-full h-[80%] bg-zinc-600 flex items-center justify-center" data-v-baae4c2a><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-baae4c2a>auto_awesome_motion</span></div></div></div><div class="relative z-10 flex flex-col items-center transform translate-y-2" data-v-baae4c2a><span class="font-serif italic text-black text-[18px] tracking-tight drop-shadow-sm" data-v-baae4c2a>Click to reveal</span><span class="text-[9px] text-black/50 uppercase tracking-[0.2em] font-medium mt-1" data-v-baae4c2a>Tap/Click</span></div>',2)])]))],8,tp)):_.type==="image"?(u(),v("div",{key:3,class:J(["flex flex-col",_.isMe?"items-end":"items-start"])},[_.replyTo?(u(),v("div",{key:0,class:J(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[200px]",_.isMe?"items-end":"items-start"]),onClick:Le(fe=>pe(_.replyTo.id),["stop"])},[s("div",{class:J(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(_.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[s("span",ip,M(_.replyTo.senderName),1),s("span",rp,M(_.replyTo.text),1)],2)],10,ap)):D("",!0),s("div",{class:"rounded-2xl overflow-hidden mb-1 cursor-zoom-in",onClick:fe=>Vt(_.content)},[s("img",{src:_.content,class:"max-w-[200px] max-h-[300px] object-cover block bg-zinc-50 border border-black/5"},null,8,cp)],8,lp)],2)):_.type==="payment_notice"?(u(),v("div",{key:4,onClick:fe=>Ot(_),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[s("div",up,[s("div",fp,[s("div",{class:J(["w-8 h-8 rounded-full flex items-center justify-center shrink-0",_.action==="collect"?"bg-black text-white":"bg-zinc-100 text-zinc-900"])},[s("span",pp,M(_.action==="collect"?"check":"close"),1)],2),b[28]||(b[28]=s("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Payment",-1))]),s("span",vp,M(_.action==="collect"?"Success":"Returned"),1)]),s("div",bp,[b[29]||(b[29]=s("span",{class:"text-xs opacity-60 mr-1"},"",-1)),s("span",xp,M(_.amount?_.amount.toFixed(2):"0.00"),1)]),s("div",gp,M(_.action==="collect"?`${_.senderName} accepted`:`${_.senderName} rejected transfer`),1)],8,dp)):_.type==="transfer"?(u(),v("div",{key:5,onClick:fe=>Et(_),class:J(["rounded-2xl p-4 min-w-[220px] cursor-pointer transition-transform active:scale-95 border mb-1 relative overflow-hidden",[_.isMe?"bg-black text-white border-black":"bg-white text-black border-zinc-200",_.status==="rejected"?"opacity-60 grayscale":""]])},[_.status==="rejected"?(u(),v("div",hp,[...b[30]||(b[30]=[s("div",{class:"w-full h-[1px] bg-current opacity-50 rotate-[-12deg]"},null,-1)])])):D("",!0),s("div",yp,[s("div",wp,[s("div",{class:J(["w-8 h-8 rounded-full flex items-center justify-center",_.isMe?"bg-zinc-800":"bg-zinc-100"])},[...b[31]||(b[31]=[s("span",{class:"material-symbols-outlined text-[18px]"},"currency_yen",-1)])],2),b[32]||(b[32]=s("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Transfer",-1))]),s("span",kp,M(_.status==="collected"?"Accepted":_.status==="rejected"?"Returned":_.status==="pending"?"Unclaimed":"Success"),1)]),s("div",_p,[b[33]||(b[33]=s("span",{class:"text-xs opacity-60 mr-1"},"",-1)),s("span",{class:J(["text-2xl font-serif font-bold tracking-tight",_.status==="rejected"?"line-through decoration-2":""])},M(_.amount.toFixed(2)),3)]),s("div",$p,[s("span",Cp,M(`to ${Sa(_)}`),1),_.note?(u(),v("span",zp,' "'+M(_.note)+'" ',1)):D("",!0)])],10,mp)):(u(),v("div",{key:6,class:J([_.isMe?"bubble-sent bg-bubble-sent text-white":"bubble-received bg-bubble-received text-black","px-3 py-[7px] shadow-sm min-h-[34px] w-fit max-w-full"])},[_.replyTo?(u(),v("div",{key:0,class:"mb-2 mt-0.5 cursor-pointer select-none group",onClick:Le(fe=>pe(_.replyTo.id),["stop"])},[s("div",{class:J(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",_.isMe?"border-white/50 group-hover:border-white/70":"border-zinc-300 group-hover:border-zinc-400"])},[s("span",{class:J(["text-[9px] font-bold uppercase tracking-wider opacity-60",_.isMe?"text-white":"text-zinc-500"])},M(_.replyTo.senderName),3),s("span",{class:J(["text-[12px] line-clamp-1 leading-snug opacity-90",_.isMe?"text-white":"text-zinc-700"])},M(_.replyTo.text),3)],2)],8,Sp)):D("",!0),s("p",Ip,M(_.text),1)],2)),s("span",Ap,M(new Date(_.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)],2)],42,Qf)],2)])],10,Wf))),128))])):D("",!0),c.value?(u(),v("div",Mp,[s("div",Tp,[a.value?.localSettings?.showOtherAvatar!==!1?(u(),v("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Fe({backgroundImage:`url(${a.value?.localSettings?.theirAvatarOverride||i.value.avatar||a.value?.avatar})`,backgroundSize:"cover"})},null,4)):D("",!0),b[34]||(b[34]=dt('<div class="bubble-received bg-bubble-received px-3 py-[7px] text-black w-fit" data-v-baae4c2a><div class="flex gap-1 h-[21px] items-center" data-v-baae4c2a><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-baae4c2a></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-baae4c2a></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-baae4c2a></div></div></div>',1))]),b[35]||(b[35]=s("span",{class:"text-[9px] text-zinc-300 ml-[50px] tracking-wider uppercase"},"Typing...",-1))])):D("",!0),(!a.value?.id||a.value.id!=="noir")&&K.value.length===0?(u(),v("div",jp,[...b[36]||(b[36]=[s("span",{class:"text-[12px] opacity-70"},"No messages yet",-1)])])):D("",!0),s("div",{ref_key:"messagesEndRef",ref:ie,class:"h-px w-full"},null,512)],512),d.value||f.value?(u(),v("div",{key:0,class:"absolute inset-0 z-30",onClick:y})):D("",!0),d.value?(u(),v("div",Ep,[s("div",{class:"w-full flex justify-center pt-3 pb-1 shrink-0 bg-white",onClick:b[1]||(b[1]=_=>d.value=!1)},[...b[37]||(b[37]=[s("div",{class:"w-8 h-1 rounded-full bg-zinc-200/80"},null,-1)])]),s("div",Op,[b[40]||(b[40]=s("span",{class:"text-[10px] font-bold tracking-[0.2em] text-zinc-400 uppercase font-sans"},"Sticker Meanings",-1)),s("div",Pp,[b[39]||(b[39]=s("button",{class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[s("span",{class:"material-symbols-outlined text-[18px]"},"search")],-1)),s("button",{onClick:Le(F,["stop"]),class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[...b[38]||(b[38]=[s("span",{class:"material-symbols-outlined text-[18px]"},"settings",-1)])])])]),s("div",Np,[ss.value?(u(),v("div",Rp,[(u(!0),v(ae,null,xe(Ne(Zs)(ss.value.id),_=>(u(),v("div",{key:_.id,class:"flex flex-col items-center gap-2 cursor-pointer group w-full",onClick:fe=>Q(_)},[s("div",Dp,[s("img",{src:_.url,class:"w-full h-full object-cover drop-shadow-sm group-hover:scale-110 transition-transform duration-300"},null,8,Bp)]),s("span",Fp,M(_.keyword),1)],8,Lp))),128))])):(u(),v("div",Vp,[b[42]||(b[42]=s("div",{class:"w-12 h-12 rounded-full bg-zinc-50 flex items-center justify-center mb-1"},[s("span",{class:"material-symbols-outlined text-2xl opacity-40"},"dashboard_customize")],-1)),s("div",Up,[b[41]||(b[41]=s("span",{class:"text-[10px] uppercase font-bold tracking-widest text-zinc-400"},"Library Empty",-1)),s("button",{onClick:Le(F,["stop"]),class:"text-[10px] text-zinc-500 hover:text-black border-b border-zinc-300 hover:border-black transition-colors pb-0.5"}," Mount your packs ")])]))]),s("div",Kp,[b[44]||(b[44]=s("button",{class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-50 transition-colors text-zinc-400 hover:text-black"},[s("span",{class:"material-symbols-outlined text-[20px]"},"history")],-1)),b[45]||(b[45]=s("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),s("div",Wp,[(u(!0),v(ae,null,xe(tt.value,_=>(u(),v("button",{key:_.id,onClick:fe=>O.value=_.id,class:J(["shrink-0 transition-all flex items-center justify-center relative",O.value===_.id?"opacity-100":"opacity-30 hover:opacity-100"])},[s("div",Gp,[O.value===_.id?(u(),v("span",qp)):D("",!0),_.name.toLowerCase().includes("shape")?(u(),v("span",Qp,"category")):(u(),v("span",Jp,M(_.name.substring(0,2)),1))])],10,Hp))),128))]),b[46]||(b[46]=s("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),s("button",{onClick:Le(F,["stop"]),class:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-black transition-colors rounded-lg hover:bg-zinc-50"},[...b[43]||(b[43]=[s("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])])])])):D("",!0),(u(),ke(At,{to:"body"},[C.value?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:b[3]||(b[3]=Le(_=>C.value=!1,["self"]))},[s("div",Yp,[b[48]||(b[48]=s("div",{class:"text-center space-y-2"},[s("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Pack Selection"),s("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium"},"Choose what you see in this chat")],-1)),s("div",Xp,[Ct.value.length===0?(u(),v("div",Zp,[...b[47]||(b[47]=[s("span",{class:"material-symbols-outlined text-3xl"},"folder_off",-1),s("span",{class:"text-[10px] uppercase tracking-widest font-bold"},"Library is empty",-1)])])):D("",!0),(u(!0),v(ae,null,xe(Ct.value,_=>(u(),v("button",{key:_.id,onClick:fe=>X(_.id),class:J(["w-full flex items-center justify-between p-4 rounded-2xl transition-all group border",V(_.id)?"bg-zinc-50 border-zinc-200":"bg-transparent border-transparent hover:bg-zinc-50"])},[s("div",tv,[s("div",sv,M(_.name.charAt(0)),1),s("span",nv,M(_.name),1)]),s("div",{class:J(["w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300 border",V(_.id)?"bg-black border-black text-white scale-110":"bg-transparent border-zinc-300 group-hover:border-zinc-400"])},[se(s("span",ov,"check",512),[[ad,V(_.id)]])],2)],10,ev))),128))]),s("div",av,[s("button",{onClick:b[2]||(b[2]=_=>C.value=!1),class:"py-4 rounded-full font-bold text-[11px] uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5"},"Done")])])])):D("",!0)])),f.value?(u(),v("div",iv,[s("div",rv,[s("button",{onClick:U,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...b[49]||(b[49]=[dt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><path d="M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z" data-v-baae4c2a></path><path d="M14 3v4a2 2 0 0 0 2 2h4" data-v-baae4c2a></path><path d="M8 13h0" data-v-baae4c2a></path><path d="M16 13h0" data-v-baae4c2a></path><path d="M10 16s.5 1 2 1 2-1 2-1" data-v-baae4c2a></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>Sticker</span>',2)])]),s("button",{onClick:b[4]||(b[4]=_=>k.$refs.fileInput.click()),class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...b[50]||(b[50]=[dt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><rect width="18" height="18" x="3" y="3" rx="2" ry="2" data-v-baae4c2a></rect><circle cx="9" cy="9" r="2" data-v-baae4c2a></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" data-v-baae4c2a></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>Gallery</span>',2)])]),s("button",{onClick:ce,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...b[51]||(b[51]=[dt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" data-v-baae4c2a></path><circle cx="12" cy="13" r="3" data-v-baae4c2a></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>Camera</span>',2)])]),b[53]||(b[53]=dt('<button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-baae4c2a><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z" data-v-baae4c2a></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>File</span></button><button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-baae4c2a><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" data-v-baae4c2a></path><circle cx="12" cy="10" r="3" data-v-baae4c2a></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>Location</span></button><button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-baae4c2a><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" data-v-baae4c2a></path><circle cx="12" cy="7" r="4" data-v-baae4c2a></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>Contact</span></button>',3)),s("button",{onClick:ze,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...b[52]||(b[52]=[dt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><path d="M8 3 4 7l4 4" data-v-baae4c2a></path><path d="M4 7h16" data-v-baae4c2a></path><path d="m16 21 4-4-4-4" data-v-baae4c2a></path><path d="M20 17H4" data-v-baae4c2a></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>Transfer</span>',2)])]),b[54]||(b[54]=dt('<button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-baae4c2a><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-baae4c2a><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-baae4c2a><circle cx="12" cy="12" r="1" data-v-baae4c2a></circle><circle cx="19" cy="12" r="1" data-v-baae4c2a></circle><circle cx="5" cy="12" r="1" data-v-baae4c2a></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-baae4c2a>More</span></button>',1))])])):D("",!0),s("input",{type:"file",ref_key:"fileInput",ref:Ge,accept:"image/*",class:"hidden",onChange:Ut},null,544),(u(),ke(At,{to:"body"},[be.value?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:b[7]||(b[7]=Le(_=>be.value=!1,["self"]))},[s("div",lv,[b[55]||(b[55]=s("div",{class:"text-center"},[s("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"New Spoiler"),s("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap to reveal functionality")],-1)),se(s("textarea",{"onUpdate:modelValue":b[5]||(b[5]=_=>et.value=_),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Enter content to hide..."},null,512),[[re,et.value]]),s("div",cv,[s("button",{onClick:b[6]||(b[6]=_=>be.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),s("button",{onClick:Ye,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):D("",!0)])),(u(),ke(At,{to:"body"},[p.value?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:b[14]||(b[14]=Le(_=>p.value=!1,["self"]))},[s("div",dv,[w.value==="input"?(u(),v("h3",uv,"Transfer")):(u(),v("h3",fv,"Verify")),w.value==="input"?(u(),v("div",pv,[k.groupMembers.length>0?(u(),v("div",vv,[b[58]||(b[58]=s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-2"},"Recipient",-1)),s("div",bv,[se(s("select",{"onUpdate:modelValue":b[8]||(b[8]=_=>k.transferTarget=_),class:"w-full bg-zinc-50 border-none rounded-xl px-4 py-3 text-sm appearance-none focus:ring-1 focus:ring-black outline-none font-medium text-center"},[b[56]||(b[56]=s("option",{value:"",disabled:""},"Select Member",-1)),(u(!0),v(ae,null,xe(k.groupMembers,_=>(u(),v("option",{key:_.id,value:_.id},M(_.name),9,xv))),128))],512),[[nn,k.transferTarget]]),b[57]||(b[57]=s("span",{class:"material-symbols-outlined absolute right-3 top-3 text-zinc-400 pointer-events-none"},"expand_more",-1))])])):(u(),v("p",gv,"To "+M($.value.name),1)),s("div",mv,[se(s("input",{"onUpdate:modelValue":b[9]||(b[9]=_=>I.value=_),type:"number",placeholder:" 0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors bg-transparent"},null,512),[[re,I.value]]),se(s("input",{"onUpdate:modelValue":b[10]||(b[10]=_=>R.value=_),type:"text",placeholder:"Add a note...",class:"w-full text-center text-sm bg-zinc-50 rounded-xl py-3 focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[re,R.value]])]),s("div",hv,M(k.transferError),1),s("div",yv,[s("button",{onClick:b[11]||(b[11]=_=>p.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:ut,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Next")])])):(u(),v("div",wv,[b[59]||(b[59]=s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-6"},"Enter Payment Password",-1)),s("div",kv,[se(s("input",{"onUpdate:modelValue":b[12]||(b[12]=_=>T.value=_),type:"password",maxlength:"6",autofocus:"",class:"w-full bg-zinc-50 rounded-xl px-4 py-4 text-center text-2xl tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[re,T.value]])]),s("div",_v,M(k.transferError),1),s("div",$v,[s("button",{onClick:b[13]||(b[13]=_=>w.value="input"),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Back"),s("button",{onClick:ft,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])]))])])):D("",!0)])),(u(),ke(At,{to:"body"},[h.value?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:b[16]||(b[16]=Le(_=>h.value=!1,["self"]))},[s("div",Cv,[s("div",{class:J(["h-32 flex items-center justify-center",B.value?.status==="rejected"?"bg-zinc-100":"bg-black"])},[s("span",{class:J(["material-symbols-outlined text-6xl",B.value?.status==="rejected"?"text-zinc-400":"text-white/20"])},M(B.value?.status==="rejected"?"remove_circle_outline":"check_circle"),3)],2),s("div",zv,[b[62]||(b[62]=s("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg mb-4"},[s("span",{class:"material-symbols-outlined text-4xl text-black"},"currency_yen")],-1)),s("h3",Sv," "+M(B.value?.amount.toFixed(2)),1),s("p",Iv,M(B.value?.status==="pending"?"Waiting for collection":B.value?.status==="collected"?"Transfer Successful":B.value?.status==="rejected"?"Transfer Returned":"Transfer"),1),s("div",Av,[s("div",Mv,[b[60]||(b[60]=s("span",{class:"text-zinc-400"},"Time",-1)),s("span",Tv,M(new Date(B.value?.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),s("div",jv,[s("span",Ev,M(B.value?.isMe?"To":"From"),1),s("span",Ov,M(Is(B.value)),1)]),B.value?.note?(u(),v("div",Pv,[b[61]||(b[61]=s("span",{class:"text-zinc-400"},"Note",-1)),s("span",Nv,M(B.value?.note),1)])):D("",!0)]),!B.value?.isMe&&B.value?.status==="pending"&&Gr(B.value)?(u(),v("div",Rv,[s("button",{onClick:bt,class:"w-full py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Reject "),s("button",{onClick:Pn,class:"w-full py-3.5 rounded-full bg-black text-white font-bold text-xs uppercase tracking-widest hover:scale-105 transition-transform shadow-lg"}," Collect ")])):(u(),v("button",{key:1,onClick:b[15]||(b[15]=_=>h.value=!1),class:"mt-8 w-full py-3 rounded-full bg-zinc-100 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Close "))])])])):D("",!0)])),Xe.value?(u(),v("div",{key:3,class:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center cursor-zoom-out animate-in fade-in duration-200",onClick:b[17]||(b[17]=_=>Xe.value=!1)},[s("img",{src:rt.value,class:"max-w-full max-h-full object-contain shadow-2xl transition-transform duration-300 scale-100"},null,8,Lv)])):D("",!0),(u(),ke(At,{to:"body"},[E.value?(u(),v("div",{key:0,class:"fixed inset-0 z-[50] bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:b[18]||(b[18]=_=>{E.value=!1,G.value=null})})):D("",!0),E.value?(u(),v("div",Dv,[s("div",Bv,[b[67]||(b[67]=s("div",{class:"w-full flex justify-center pt-3 pb-2"},[s("div",{class:"w-10 h-1 rounded-full bg-zinc-200"})],-1)),s("div",Fv,[G.value?.type==="text"||G.value?.text?(u(),v("button",{key:0,onClick:b[19]||(b[19]=_=>x(G.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...b[63]||(b[63]=[s("span",{class:"text-[15px] font-medium text-black"},"Copy",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"content_copy",-1)])])):D("",!0),s("button",{onClick:de,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...b[64]||(b[64]=[s("span",{class:"text-[15px] font-medium text-black"},"Reply",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"reply",-1)])]),s("button",{onClick:j,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...b[65]||(b[65]=[s("span",{class:"text-[15px] font-medium text-black"},"Select",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"check_circle",-1)])]),s("button",{onClick:H,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors"},[...b[66]||(b[66]=[s("span",{class:"text-[15px] font-medium text-black"},"Delete",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete",-1)])])]),s("div",Vv,[s("button",{onClick:b[20]||(b[20]=_=>{E.value=!1,G.value=null}),class:"w-full py-2 text-center text-[13px] font-bold uppercase tracking-widest text-zinc-400 hover:text-black transition-colors"}," Cancel ")])])])):D("",!0)])),z.value?(u(),v("div",Uv,[s("div",Kv,[s("span",Wv,M(A.value.size)+" SELECTED ",1),s("div",Hv,[s("button",{onClick:W,class:"flex items-center gap-2 text-white hover:text-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed group",disabled:A.value.size===0},[...b[68]||(b[68]=[s("span",{class:"material-symbols-outlined text-[20px] group-hover:scale-110 transition-transform"},"delete",-1),s("span",{class:"font-bold text-xs uppercase tracking-widest hidden sm:block"},"Delete",-1)])],8,Gv),b[70]||(b[70]=s("div",{class:"w-px h-4 bg-white/20"},null,-1)),s("button",{onClick:g,class:"flex items-center justify-center text-white/50 hover:text-white transition-colors"},[...b[69]||(b[69]=[s("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):(u(),v("footer",qv,[ne.value?(u(),v("div",Qv,[s("div",Jv,[b[71]||(b[71]=s("span",{class:"material-symbols-outlined text-zinc-400 text-lg"},"reply",-1)),s("div",Yv,[s("span",Xv,"Replying to "+M(ee(ne.value)),1),s("span",Zv,M(ne.value.text||(ne.value.type==="image"?"[Image]":"[Content]")),1)])]),s("button",{onClick:P,class:"p-1 rounded-full hover:bg-zinc-200 text-zinc-400 hover:text-black transition-colors"},[...b[72]||(b[72]=[s("span",{class:"material-symbols-outlined text-base"},"close",-1)])])])):D("",!0),s("div",e0,[s("button",{onClick:Le(m,["stop"]),class:J(["flex items-center justify-center size-10 rounded-full transition-all duration-200 hover:bg-zinc-50 text-zinc-400 hover:text-black",f.value?"bg-zinc-100 text-black":""])},[...b[73]||(b[73]=[s("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])],2),s("div",t0,[se(s("textarea",{"onUpdate:modelValue":b[21]||(b[21]=_=>l.value=_),onKeydown:b[22]||(b[22]=Us(Le(_=>zt(!1),["exact","prevent"]),["enter"])),onFocus:y,class:"w-full border-none bg-zinc-100/60 rounded-[26px] px-5 py-3 text-[15px] placeholder-zinc-400 focus:ring-0 focus:bg-zinc-100 transition-colors resize-none h-[44px] leading-snug",placeholder:"Message..."},null,544),[[re,l.value]])]),s("button",{onClick:Nn},[...b[74]||(b[74]=[s("svg",{class:"w-6 h-6 text-black relative right-0.5 bottom-0.5",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[s("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})],-1)])])])]))]))}},n0=Ke(s0,[["__scopeId","data-v-baae4c2a"]]),o0={class:"h-full flex flex-col bg-background-light text-black"},a0={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl border-b border-gray-50"},i0={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},r0={class:"flex-1"},l0={class:"flex-1 flex justify-end"},c0={class:"flex-1 overflow-y-auto w-full pb-[calc(6rem+env(safe-area-inset-bottom))]"},d0={class:"px-6 pt-0 pb-6"},u0={class:"flex flex-col items-start gap-6"},f0={class:"space-y-2"},p0={class:"flex items-center gap-2"},v0={class:"text-2xl font-bold tracking-tight"},b0={class:"text-[15px] leading-relaxed text-zinc-600 font-light max-w-[280px]"},x0=["href"],g0={class:"flex gap-8 mt-4"},m0={class:"flex flex-col"},h0={class:"serif-numbers text-xl font-medium tracking-tight"},y0={class:"flex flex-col"},w0={class:"serif-numbers text-xl font-medium tracking-tight"},k0={key:0,class:"fixed top-0 right-0 h-full w-[300px] z-[100] bg-white shadow-2xl flex flex-col border-l border-gray-50"},_0={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 border-b border-gray-100"},$0={class:"flex-1 overflow-y-auto"},C0={__name:"Profile",emits:["back","navigate"],setup(e,{emit:t}){const n=t,o=N(!1),a=aa,i=r=>{o.value=!1,n("navigate",r)};return(r,l)=>(u(),v("div",o0,[s("header",a0,[s("div",i0,[s("div",r0,[s("button",{onClick:l[0]||(l[0]=c=>r.$emit("back")),class:"flex items-center justify-center hover:bg-gray-100 rounded-full size-10 transition-colors -ml-2"},[...l[8]||(l[8]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),l[10]||(l[10]=s("div",{class:"flex justify-center"},[s("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir")],-1)),s("div",l0,[s("button",{onClick:l[1]||(l[1]=c=>o.value=!0),class:"flex items-center justify-center hover:bg-gray-100 rounded-full size-10 transition-colors -mr-2"},[...l[9]||(l[9]=[s("span",{class:"material-symbols-outlined text-[24px]"},"more_horiz",-1)])])])])]),s("main",c0,[s("section",d0,[s("div",u0,[s("div",{class:"w-24 h-24 rounded-full overflow-hidden border border-black/5 bg-zinc-50 editorial-image",style:Fe({backgroundImage:`url(${Ne(a).avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",f0,[s("div",p0,[s("h2",v0,M(Ne(a).handle),1),l[11]||(l[11]=s("span",{class:"material-symbols-outlined text-[18px] active-icon"},"verified",-1))]),s("p",b0,M(Ne(a).bio||"No bio yet."),1),Ne(a).link?(u(),v("a",{key:0,class:"text-sm font-medium border-b border-black inline-block mt-2",href:"https://"+Ne(a).link.replace(/^https?:\/\//,""),target:"_blank"},M(Ne(a).link),9,x0)):D("",!0)]),s("div",g0,[s("div",m0,[s("span",h0,M(Ne(a).stats?.followers||"0"),1),l[12]||(l[12]=s("span",{class:"text-[11px] uppercase tracking-[0.15em] text-zinc-400 mt-0.5"},"Followers",-1))]),s("div",y0,[s("span",w0,M(Ne(a).stats?.following||"0"),1),l[13]||(l[13]=s("span",{class:"text-[11px] uppercase tracking-[0.15em] text-zinc-400 mt-0.5"},"Following",-1))])]),l[14]||(l[14]=s("div",{class:"flex gap-3 w-full mt-4"},[s("button",{class:"flex-1 py-2 border border-black text-[12px] font-semibold uppercase tracking-widest hover:bg-black hover:text-white transition-all"}," Edit Profile "),s("button",{class:"flex-1 py-2 border border-black text-[12px] font-semibold uppercase tracking-widest hover:bg-black hover:text-white transition-all"}," Share Profile ")],-1))])]),l[15]||(l[15]=dt('<nav class="flex border-b border-gray-100 mb-0" data-v-c85ffcc1><button class="flex-1 py-4 text-sm font-semibold tracking-tight text-center border-b-2 border-black" data-v-c85ffcc1> Threads </button><button class="flex-1 py-4 text-sm font-medium tracking-tight text-center text-zinc-400" data-v-c85ffcc1> Replies </button></nav><div class="space-y-0" data-v-c85ffcc1><article class="px-6 py-8 border-b border-gray-50" data-v-c85ffcc1><div class="flex items-start gap-4 mb-4" data-v-c85ffcc1><div class="size-8 shrink-0 rounded-full bg-zinc-900 overflow-hidden flex items-center justify-center" data-v-c85ffcc1><div class="w-full h-full editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E&#39;);background-size:cover;" data-v-c85ffcc1></div></div><div class="flex flex-col flex-1" data-v-c85ffcc1><div class="flex items-center justify-between" data-v-c85ffcc1><span class="font-bold text-[14px]" data-v-c85ffcc1>studio_noir</span><span class="text-xs font-light text-zinc-400" data-v-c85ffcc1>2d</span></div></div></div><div class="rounded-xl overflow-hidden bg-zinc-100 aspect-[4/5] editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E&#39;);background-size:cover;background-position:center;" data-v-c85ffcc1></div><div class="mt-4 flex items-center gap-6 text-black" data-v-c85ffcc1><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-c85ffcc1></path></svg></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-c85ffcc1></path></svg></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><polyline points="17 1 21 5 17 9" data-v-c85ffcc1></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-c85ffcc1></path><polyline points="7 23 3 19 7 15" data-v-c85ffcc1></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-c85ffcc1></path></svg></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-c85ffcc1></path></svg></button></div></article><article class="px-6 py-8 border-b border-gray-50" data-v-c85ffcc1><div class="flex items-start gap-4 mb-4" data-v-c85ffcc1><div class="size-8 shrink-0 rounded-full bg-zinc-900 overflow-hidden flex items-center justify-center" data-v-c85ffcc1><div class="w-full h-full editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E&#39;);background-size:cover;" data-v-c85ffcc1></div></div><div class="flex flex-col flex-1" data-v-c85ffcc1><div class="flex items-center justify-between" data-v-c85ffcc1><span class="font-bold text-[14px]" data-v-c85ffcc1>studio_noir</span><span class="text-xs font-light text-zinc-400" data-v-c85ffcc1>4d</span></div></div></div><div class="rounded-xl overflow-hidden bg-zinc-100 aspect-square editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0&#39;);background-size:cover;background-position:center;" data-v-c85ffcc1></div><div class="mt-4 flex items-center gap-6 text-black" data-v-c85ffcc1><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-c85ffcc1></path></svg></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-c85ffcc1></path></svg></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><polyline points="17 1 21 5 17 9" data-v-c85ffcc1></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-c85ffcc1></path><polyline points="7 23 3 19 7 15" data-v-c85ffcc1></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-c85ffcc1></path></svg></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-c85ffcc1><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-c85ffcc1><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-c85ffcc1></path></svg></button></div></article></div>',2))]),o.value?(u(),v("div",{key:0,onClick:l[2]||(l[2]=c=>o.value=!1),class:"fixed inset-0 z-[99]"})):D("",!0),De(Vs,{name:"slide"},{default:ys(()=>[o.value?(u(),v("div",k0,[s("div",_0,[l[17]||(l[17]=s("span",{class:"text-[13px] font-bold tracking-[0.2em] text-zinc-400 uppercase"},"Menu",-1)),s("button",{onClick:l[3]||(l[3]=c=>o.value=!1),class:"p-2 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...l[16]||(l[16]=[s("span",{class:"material-symbols-outlined text-[24px]"},"close",-1)])])]),s("div",$0,[s("div",{onClick:l[4]||(l[4]=c=>i("persona-archive")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...l[18]||(l[18]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"tune"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Persona Archive"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1),s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"chevron_right",-1)])]),s("div",{onClick:l[5]||(l[5]=c=>i("sticker-library")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...l[19]||(l[19]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"sentiment_satisfied"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Stickers"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1),s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"chevron_right",-1)])]),s("div",{onClick:l[6]||(l[6]=c=>i("wallet")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...l[20]||(l[20]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"credit_card"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Wallet"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1),s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"chevron_right",-1)])]),s("div",{onClick:l[7]||(l[7]=c=>i("relationship-network")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...l[21]||(l[21]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"hub"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Network"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1),s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"chevron_right",-1)])])])])):D("",!0)]),_:1})]))}},z0=Ke(C0,[["__scopeId","data-v-c85ffcc1"]]),S0={class:"h-full flex flex-col bg-background-light text-black"},I0={class:"sticky top-0 z-50 bg-white border-b border-gray-50"},A0={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},M0={class:"flex-1"},T0={__name:"Compose",emits:["close"],setup(e,{emit:t}){return(n,o)=>(u(),v("div",S0,[s("header",I0,[s("div",A0,[s("div",M0,[s("button",{onClick:o[0]||(o[0]=a=>n.$emit("close")),class:"text-[15px] font-medium tracking-tight text-neutral-400 hover:text-black transition-colors"}," Cancel ")]),o[1]||(o[1]=s("div",{class:"flex justify-center"},[s("div",{class:"text-xl font-serif font-black tracking-[0.25em] uppercase italic"},"Noir")],-1)),o[2]||(o[2]=s("div",{class:"flex-1 flex justify-end"},[s("button",{class:"bg-black text-white px-5 py-1.5 rounded-lg text-[13px] font-semibold tracking-wide hover:bg-zinc-800 transition-colors"}," Post ")],-1))])]),o[3]||(o[3]=dt('<main class="flex-1 px-6 pt-8 pb-32 w-full" data-v-5df22c3c><div class="flex gap-4" data-v-5df22c3c><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-5df22c3c><div class="size-5 border border-white/40 rounded-full" data-v-5df22c3c></div></div><div class="flex-1 flex flex-col gap-6" data-v-5df22c3c><div class="pt-2" data-v-5df22c3c><textarea autofocus class="w-full border-0 p-0 focus:ring-0 text-[17px] leading-relaxed resize-none bg-transparent min-h-[120px]" placeholder="Start a thread..." data-v-5df22c3c></textarea></div><div class="relative w-full aspect-[4/5] rounded-sm border border-dashed border-neutral-200 bg-neutral-50/50 flex flex-col items-center justify-center group cursor-pointer hover:bg-neutral-50 transition-colors" data-v-5df22c3c><div class="size-12 rounded-full border border-neutral-200 flex items-center justify-center mb-3" data-v-5df22c3c><span class="material-symbols-outlined text-neutral-300" data-v-5df22c3c>add_photo_alternate</span></div><span class="text-[11px] uppercase tracking-[0.15em] text-neutral-400 font-medium" data-v-5df22c3c>Add Editorial Media</span></div></div></div></main><div class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-50 pb-safe" data-v-5df22c3c><div class="flex items-center justify-between px-8 h-16 w-full" data-v-5df22c3c><div class="flex items-center gap-8" data-v-5df22c3c><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>image</span><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>gif_box</span><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>mic</span><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>tag</span></div><div class="flex items-center gap-2" data-v-5df22c3c><span class="text-[12px] text-neutral-300 font-medium tracking-tight" data-v-5df22c3c>Anyone can reply</span></div></div><div class="h-6" data-v-5df22c3c></div></div>',2))]))}},j0=Ke(T0,[["__scopeId","data-v-5df22c3c"]]),E0={class:"h-full flex flex-col bg-background-light text-black"},O0={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-zinc-100"},P0={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},N0={__name:"PostDetail",props:["postId"],emits:["back"],setup(e,{emit:t}){return(n,o)=>(u(),v("div",E0,[s("header",O0,[s("div",P0,[s("button",{onClick:o[0]||(o[0]=a=>n.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...o[1]||(o[1]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),o[2]||(o[2]=s("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir",-1)),o[3]||(o[3]=s("div",{class:"w-10"},null,-1))])]),o[4]||(o[4]=dt('<main class="flex-1 overflow-y-auto pb-32 w-full" data-v-eae84c1c><article class="pt-6" data-v-eae84c1c><div class="px-6 mb-6" data-v-eae84c1c><div class="flex items-center gap-3" data-v-eae84c1c><div class="size-10 rounded-full bg-black flex items-center justify-center overflow-hidden border border-zinc-200" data-v-eae84c1c><div class="w-full h-[0.5px] bg-white/30 rotate-45" data-v-eae84c1c></div><div class="absolute w-full h-[0.5px] bg-white/30 -rotate-45" data-v-eae84c1c></div></div><div class="flex flex-col" data-v-eae84c1c><span class="text-sm font-semibold tracking-tight" data-v-eae84c1c>studio_noir</span><span class="text-[9px] text-zinc-400 uppercase tracking-widest" data-v-eae84c1c>Paris, FR</span></div></div></div><div class="px-6 mb-6" data-v-eae84c1c><p class="text-[17px] leading-relaxed font-light text-zinc-900" data-v-eae84c1c> The silence of structure. Exploring the intersection of Brutalist architecture and morning light. Every angle is a dialogue with the sky. </p></div><div class="mx-6 aspect-[4/5] bg-zinc-100 overflow-hidden mb-6" data-v-eae84c1c><img alt="Editorial Architecture" class="w-full h-full object-cover editorial-image" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E" data-v-eae84c1c></div><div class="px-6 pb-8" data-v-eae84c1c><div class="flex items-center gap-7 pb-8 border-b border-zinc-50" data-v-eae84c1c><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>1,240</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48L4.32 21l4.287-1.022c1.026.177 2.104.272 3.393.272z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>48</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>12</span></button><button class="flex items-center group ml-auto" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg></button></div></div></article><section class="px-6 space-y-8" data-v-eae84c1c><h3 class="text-[10px] uppercase tracking-[0.25em] text-zinc-400 font-semibold mb-8" data-v-eae84c1c>Responses</h3><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-zinc-50 flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="size-3 border border-black/20 rounded-sm rotate-45" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>elena_di_rossi</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>2h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The high contrast captures the starkness perfectly. Exceptional work.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-black flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="w-4 h-[1px] bg-white/20" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>arc_digest</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>4h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The brutalist aesthetic is making a serious comeback this season.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-white flex items-center justify-center border border-zinc-200" data-v-eae84c1c><div class="size-2 bg-black rounded-full" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>minimal_vibe</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>5h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>Pure sophistication.</p></div></div></section></main><footer class="fixed bottom-0 left-0 right-0 bottom-input-bar border-t border-zinc-100 safe-area-bottom bg-white/90 backdrop-blur-md" data-v-eae84c1c><div class="flex items-center gap-4 px-6 pt-4 pb-[calc(1rem+env(safe-area-inset-bottom))] w-full" data-v-eae84c1c><div class="size-8 shrink-0 rounded-full bg-zinc-50 border border-zinc-200 flex items-center justify-center overflow-hidden" data-v-eae84c1c><div class="w-3 h-3 border-t border-l border-zinc-400 rotate-45 translate-y-0.5" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><input class="w-full bg-transparent border-none focus:ring-0 text-[14px] py-2 placeholder:text-zinc-400 font-light tracking-tight" placeholder="Write a comment..." type="text" data-v-eae84c1c></div><button class="text-[11px] font-bold tracking-[0.15em] uppercase hover:opacity-40 transition-opacity" data-v-eae84c1c> Post </button></div></footer>',2))]))}},R0=Ke(N0,[["__scopeId","data-v-eae84c1c"]]),L0={class:"h-full flex flex-col bg-white text-black font-sans"},D0={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},B0={class:"flex-1 overflow-y-auto px-6 py-4 w-full"},F0={class:"grid gap-4"},V0=["onClick"],U0={key:0,class:"absolute top-4 right-4 text-black"},K0={class:"flex-1 min-w-0 pr-6"},W0={class:"text-[16px] font-bold tracking-tight truncate"},H0={class:"text-[12px] text-zinc-500 font-light truncate mt-0.5"},G0=["onClick"],q0={__name:"PersonaArchive",emits:["back","add","edit","select"],setup(e,{emit:t}){const n=t,o=i=>{_o(i),n("select")},a=(i,r)=>{r.stopPropagation(),n("edit",i)};return(i,r)=>(u(),v("div",L0,[s("header",D0,[s("button",{onClick:r[0]||(r[0]=l=>i.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[3]||(r[3]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),r[5]||(r[5]=s("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Persona Archive",-1)),s("button",{onClick:r[1]||(r[1]=l=>i.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[4]||(r[4]=[s("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])]),s("main",B0,[s("div",F0,[(u(!0),v(ae,null,xe(Ne(S).personas,l=>(u(),v("div",{key:l.id,class:J(["group relative flex items-center gap-5 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer hover:shadow-sm hover:translate-y-[-1px]",{"bg-zinc-50 border-black/5":Ne(S).activePersonaId===l.id,"bg-white":Ne(S).activePersonaId!==l.id}]),onClick:c=>o(l.id)},[Ne(S).activePersonaId===l.id?(u(),v("div",U0,[...r[6]||(r[6]=[s("span",{class:"material-symbols-outlined text-[18px]"},"check_circle",-1)])])):D("",!0),s("div",{class:"size-16 shrink-0 rounded-full overflow-hidden border border-gray-100 editorial-image",style:Fe({backgroundImage:`url(${l.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",K0,[s("h3",W0,M(l.handle),1),s("p",H0,M(l.name||l.handle),1)]),s("div",{onClick:r[2]||(r[2]=Le(()=>{},["stop"])),class:"relative z-20"},[s("button",{onClick:c=>a(l.id,c),class:"p-3 text-zinc-400 hover:text-black hover:bg-gray-100/50 rounded-full transition-all"},[...r[7]||(r[7]=[s("span",{class:"material-symbols-outlined text-[20px]"},"edit",-1)])],8,G0)])],10,V0))),128))])])]))}},Q0=Ke(q0,[["__scopeId","data-v-09dd5376"]]),J0={class:"h-full flex flex-col bg-white text-black font-sans"},Y0={class:"flex items-center justify-between px-6 pt-[calc(20px_+_env(safe-area-inset-top))] pb-5 sticky top-0 bg-white z-10 border-b border-gray-50"},X0={class:"flex-1 overflow-y-auto px-8 py-8 w-full pb-[calc(2rem+env(safe-area-inset-bottom))]"},Z0={class:"flex flex-col items-center mb-12"},eb={class:"space-y-10 max-w-md mx-auto"},tb={class:"group"},sb={class:"group"},nb={class:"group"},ob={class:"group"},ab={class:"group"},ib={key:0,class:"pt-8 flex justify-center border-t border-gray-50 mt-12"},rb={__name:"PersonaEdit",props:["personaId"],emits:["back","save"],setup(e,{emit:t}){const n=e,o=t,a=N({id:"",id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),i=N(!1);jt(()=>{if(n.personaId){const f=S.personas.find(d=>d.id===n.personaId);f&&(i.value=!0,a.value={...f})}else a.value.id="p_"+Date.now(),a.value.avatar="https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0"});const r=async()=>{const f={...a.value,stats:a.value.stats||{followers:"0",following:"0"}};i.value?await Rd(f):await Nd(f),o("save")},l=()=>{const f=prompt("Enter image URL for avatar:",a.value.avatar);f&&(a.value.avatar=f)},c=async()=>{a.value.id&&confirm("Delete this persona? This cannot be undone.")&&(await Ld(a.value.id),o("save"))};return(f,d)=>(u(),v("div",J0,[s("header",Y0,[s("button",{onClick:d[0]||(d[0]=p=>f.$emit("back")),class:"text-[17px] font-normal text-black font-serif italic tracking-wide"}," Cancel "),d[6]||(d[6]=s("div",{class:"text-[11px] font-bold uppercase tracking-[0.25em]"},"Edit Persona",-1)),s("button",{onClick:r,class:"bg-black text-white rounded-full px-6 py-2 text-[13px] font-medium tracking-wide hover:opacity-80 transition-opacity"}," Save ")]),s("main",X0,[s("div",Z0,[s("div",{class:"size-32 rounded-full overflow-hidden mb-4 border border-gray-100 shadow-sm editorial-image",style:Fe({backgroundImage:`url(${a.value.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("button",{onClick:l,class:"text-[10px] text-zinc-400 uppercase tracking-[0.15em] font-medium hover:text-black transition-colors"},"")]),s("div",eb,[s("div",tb,[d[7]||(d[7]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"ID / ",-1)),se(s("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>a.value.handle=p),type:"text",class:"w-full border-b border-gray-200 py-2 text-[22px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent",placeholder:"your_handle"},null,512),[[re,a.value.handle]])]),s("div",sb,[d[8]||(d[8]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("input",{"onUpdate:modelValue":d[2]||(d[2]=p=>a.value.name=p),type:"text",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent",placeholder:"Official Name"},null,512),[[re,a.value.name]]),d[9]||(d[9]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),s("div",nb,[d[10]||(d[10]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("textarea",{"onUpdate:modelValue":d[3]||(d[3]=p=>a.value.persona=p),rows:"4",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent resize-none leading-relaxed",placeholder:"Describe the inner persona..."},null,512),[[re,a.value.persona]]),d[11]||(d[11]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),s("div",ob,[d[12]||(d[12]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("textarea",{"onUpdate:modelValue":d[4]||(d[4]=p=>a.value.bio=p),rows:"3",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent resize-none leading-relaxed",placeholder:"Write a brief description..."},null,512),[[re,a.value.bio]])]),s("div",ab,[d[13]||(d[13]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("input",{"onUpdate:modelValue":d[5]||(d[5]=p=>a.value.link=p),type:"text",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent",placeholder:"website.com"},null,512),[[re,a.value.link]])]),i.value?(u(),v("div",ib,[s("button",{onClick:c,class:"text-[12px] font-bold text-red-500 uppercase tracking-[0.2em] hover:opacity-60 transition-opacity"}," Delete Persona ")])):D("",!0)])])]))}},lb=Ke(rb,[["__scopeId","data-v-0cfa7f13"]]),cb={class:"h-full flex flex-col bg-white text-black font-sans"},db={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},ub={class:"flex-1 overflow-y-auto w-full"},fb={class:"px-6 py-4"},pb={class:"relative"},vb={class:"px-6 pb-20"},bb={class:"flex items-center gap-4 min-w-0 flex-1"},xb={key:0,class:"material-symbols-outlined text-zinc-300 text-[24px]"},gb={class:"flex flex-col min-w-0"},mb={class:"text-[14px] font-bold tracking-tight truncate"},hb={class:"text-[11px] text-zinc-500 font-light truncate mt-0.5"},yb=["onClick"],wb={__name:"Following",emits:["back","add","edit"],setup(e,{emit:t}){const n=t,o=N(""),a=me(()=>{if(!o.value)return S.contacts;const r=o.value.toLowerCase();return S.contacts.filter(l=>l.handle.toLowerCase().includes(r)||l.name&&l.name.toLowerCase().includes(r)||l.bio&&l.bio.toLowerCase().includes(r))}),i=r=>{n("edit",r)};return(r,l)=>(u(),v("div",cb,[s("header",db,[s("button",{onClick:l[0]||(l[0]=c=>r.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...l[3]||(l[3]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),l[5]||(l[5]=s("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Following",-1)),s("button",{onClick:l[1]||(l[1]=c=>r.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...l[4]||(l[4]=[s("span",{class:"material-symbols-outlined text-[24px]"},"person_add",-1)])])]),s("main",ub,[s("div",fb,[s("div",pb,[l[6]||(l[6]=s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-zinc-400 text-[20px]"},"search",-1)),se(s("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>o.value=c),type:"text",class:"w-full bg-zinc-50 border border-gray-100 rounded-lg py-2.5 pl-10 pr-4 text-sm font-light placeholder-zinc-400 focus:outline-none focus:border-black/10 transition-colors",placeholder:"Search connections..."},null,512),[[re,o.value]])])]),s("div",vb,[(u(!0),v(ae,null,xe(a.value,c=>(u(),v("div",{key:c.id,class:"flex items-center justify-between py-5 border-b border-gray-50 group hover:bg-zinc-50/50 -mx-6 px-6 transition-colors"},[s("div",bb,[s("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100 bg-zinc-100 flex items-center justify-center editorial-image",style:Fe({backgroundImage:c.avatar?`url(${c.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[c.avatar?D("",!0):(u(),v("span",xb,"person"))],4),s("div",gb,[s("h3",mb,M(c.handle),1),s("p",hb,M(c.bio||c.name||"No bio"),1)])]),s("button",{onClick:f=>i(c.id),class:"ml-4 px-5 py-1.5 bg-black text-white rounded-full text-[11px] font-medium tracking-wide hover:opacity-80 transition-opacity"}," Following ",8,yb)]))),128))])])]))}},kb=Ke(wb,[["__scopeId","data-v-ed8e3c0e"]]),_b={class:"h-full flex flex-col bg-white text-black font-sans"},$b={class:"flex items-center justify-between px-6 pt-[calc(1.25rem+env(safe-area-inset-top))] pb-5 sticky top-0 bg-white z-10"},Cb={class:"text-[11px] font-bold uppercase tracking-[0.25em]"},zb={class:"flex-1 overflow-y-auto px-8 py-8 w-full pb-[calc(2rem+env(safe-area-inset-bottom))]"},Sb={class:"flex flex-col items-center mb-12"},Ib={key:0,class:"w-full h-full flex items-center justify-center text-zinc-300"},Ab={class:"space-y-10 max-w-md mx-auto"},Mb={class:"group"},Tb={class:"group"},jb={class:"group"},Eb={class:"group"},Ob={class:"group"},Pb={key:0,class:"pt-8 flex justify-center border-t border-gray-50 mt-12"},Nb={__name:"ContactEdit",props:["contactId"],emits:["back","save"],setup(e,{emit:t}){const n=e,o=t,a=N({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),i=N(!1);jt(()=>{if(n.contactId){const f=S.contacts.find(d=>d.id===n.contactId);f&&(i.value=!0,a.value={...f})}else a.value.id="c_"+Date.now(),a.value.avatar=""});const r=()=>{const f={...a.value};i.value?Bd(f):Dd(f),o("save")},l=()=>{const f=prompt("Enter image URL for avatar:",a.value.avatar);f&&(a.value.avatar=f)},c=async()=>{a.value.id&&confirm("Remove this contact?")&&(await Fd(a.value.id),o("save"))};return(f,d)=>(u(),v("div",_b,[s("header",$b,[s("button",{onClick:d[0]||(d[0]=p=>f.$emit("back")),class:"text-[17px] font-normal text-black font-serif italic tracking-wide"}," Cancel "),s("div",Cb,M(i.value?"Edit Contact":"Add Contact"),1),s("button",{onClick:r,class:"bg-black text-white rounded-full px-6 py-2 text-[13px] font-medium tracking-wide hover:opacity-80 transition-opacity"}," Save ")]),s("main",zb,[s("div",Sb,[s("div",{class:"size-32 rounded-full overflow-hidden mb-4 border border-gray-100 shadow-sm editorial-image bg-zinc-50",style:Fe({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[a.value.avatar?D("",!0):(u(),v("div",Ib,[...d[6]||(d[6]=[s("span",{class:"material-symbols-outlined text-[40px]"},"person",-1)])]))],4),s("button",{onClick:l,class:"text-[10px] text-zinc-400 uppercase tracking-[0.15em] font-medium hover:text-black transition-colors"},"")]),s("div",Ab,[s("div",Mb,[d[7]||(d[7]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"ID / ",-1)),se(s("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>a.value.handle=p),type:"text",class:"w-full border-b border-gray-200 py-2 text-[22px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent",placeholder:"handle"},null,512),[[re,a.value.handle]])]),s("div",Tb,[d[8]||(d[8]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("input",{"onUpdate:modelValue":d[2]||(d[2]=p=>a.value.name=p),type:"text",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent",placeholder:"Real Name"},null,512),[[re,a.value.name]]),d[9]||(d[9]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),s("div",jb,[d[10]||(d[10]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("textarea",{"onUpdate:modelValue":d[3]||(d[3]=p=>a.value.persona=p),rows:"4",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent resize-none leading-relaxed",placeholder:"Internal notes about this contact..."},null,512),[[re,a.value.persona]]),d[11]||(d[11]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),s("div",Eb,[d[12]||(d[12]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("textarea",{"onUpdate:modelValue":d[4]||(d[4]=p=>a.value.bio=p),rows:"3",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent resize-none leading-relaxed",placeholder:"Public bio..."},null,512),[[re,a.value.bio]])]),s("div",Ob,[d[13]||(d[13]=s("label",{class:"block text-[10px] text-zinc-400 font-bold uppercase tracking-[0.2em] mb-3"},"",-1)),se(s("input",{"onUpdate:modelValue":d[5]||(d[5]=p=>a.value.link=p),type:"text",class:"w-full border-b border-gray-200 py-2 text-[18px] font-serif italic text-black placeholder-gray-300 focus:outline-none focus:border-black transition-colors bg-transparent",placeholder:"website.com"},null,512),[[re,a.value.link]])]),i.value?(u(),v("div",Pb,[s("button",{onClick:c,class:"text-[12px] font-bold text-red-500 uppercase tracking-[0.2em] hover:opacity-60 transition-opacity"}," Delete Contact ")])):D("",!0)])])]))}},zi=Ke(Nb,[["__scopeId","data-v-03c28d4d"]]),Rb={class:"h-full flex flex-col bg-white text-black font-sans relative overflow-hidden"},Lb={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},Db={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Bb={class:"w-full pb-32 flex-1 overflow-y-auto scrollbar-hide"},Fb={class:"flex flex-col items-center pt-8 pb-8 border-b border-gray-50"},Vb={class:"relative w-[86px] h-[86px] rounded-full p-[2px] border border-gray-100 mb-4 bg-white shadow-sm"},Ub={class:"font-serif text-2xl font-medium tracking-tight mb-1"},Kb={class:"text-[10px] tracking-[0.2em] font-bold uppercase text-zinc-400"},Wb={class:"text-[11px] font-medium text-zinc-600 group-hover:text-black"},Hb={class:"px-6 py-6 space-y-8"},Gb={class:"bg-transparent flex flex-col gap-0"},qb={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Qb={class:"flex flex-col gap-1"},Jb={key:0,class:"text-[11px] text-zinc-400 font-light"},Yb={class:"flex items-center gap-3"},Xb={class:"relative inline-flex items-center cursor-pointer"},Zb={class:"group flex items-center justify-between py-3 border-b border-gray-50"},ex={class:"flex flex-col gap-1"},tx={key:0,class:"text-[11px] text-zinc-400 font-light"},sx={class:"flex items-center gap-3"},nx={class:"relative inline-flex items-center cursor-pointer"},ox={class:"group flex items-center justify-between py-3 border-b border-gray-50"},ax={class:"flex items-center gap-2"},ix={class:"flex items-center gap-2"},rx={class:"text-[12px] text-zinc-400"},lx={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},cx={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},dx={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},ux={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-6"},fx={id:"timezone-list"},px=["value"],vx={class:"flex flex-col gap-2"},bx={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},xx={key:0,class:"flex flex-col gap-2"},gx={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},mx={key:1,class:"flex flex-col gap-4"},hx={class:"text-[10px] text-zinc-500 font-medium ml-1"},yx=["onUpdate:modelValue","placeholder"],wx={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},kx={key:1,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},_x={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},$x={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Cx={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-8"},zx={class:"flex flex-col gap-3"},Sx={class:"flex gap-2"},Ix={key:0,class:"material-symbols-outlined text-sm animate-spin"},Ax={key:1,class:"material-symbols-outlined text-sm"},Mx={key:0,class:"flex flex-col gap-1 mt-1"},Tx=["onClick"],jx={key:0,class:"material-symbols-outlined text-xs"},Ex={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},Ox={class:"text-[12px] font-medium"},Px={class:"text-[10px] text-zinc-400 font-mono ml-auto"},Nx={class:"flex flex-col gap-4"},Rx={class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},Lx={key:0,class:"flex flex-col gap-3"},Dx={class:"flex gap-2"},Bx={key:0,class:"material-symbols-outlined text-sm animate-spin"},Fx={key:1,class:"material-symbols-outlined text-sm"},Vx={key:0,class:"flex flex-col gap-1 mt-1"},Ux=["onClick"],Kx={key:0,class:"material-symbols-outlined text-xs"},Wx={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},Hx={class:"text-[12px] font-medium"},Gx={class:"text-[10px] text-zinc-400 font-mono ml-auto"},qx={key:1,class:"flex flex-col gap-6"},Qx={class:"text-[11px] font-bold block mb-2"},Jx={class:"flex gap-2"},Yx=["onUpdate:modelValue","onKeyup"],Xx=["onClick"],Zx={key:0,class:"material-symbols-outlined text-sm animate-spin"},eg={key:1,class:"material-symbols-outlined text-sm"},tg={key:0,class:"flex flex-col gap-1 mt-2 bg-white rounded-md border border-gray-100 p-1"},sg=["onClick"],ng={class:"truncate"},og={key:0,class:"material-symbols-outlined text-[10px]"},ag={key:1,class:"flex items-center gap-2 mt-2 px-2"},ig={class:"text-[11px] font-bold text-zinc-600"},rg={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end gap-3"},lg={__name:"ChatSettings",props:["chatId"],emits:["back","navigate"],setup(e,{emit:t}){const n=e,o=me(()=>$o(n.chatId)),a=N(!1),i=N(!1),r=N(""),l=N(""),c=N(15),f=N(!1),d=N(""),p=N(""),h=N(""),I=N([]),R=N([]),T=N({}),B=N({}),w=N(null),C=N(null),z=N({}),A=me(()=>{const W=o.value?.localSettings?.myActivePersonaId;if(W){const $=S.personas.find(O=>O.id===W);return $?$.name:"My"}return aa.value?aa.value.name:"My"}),E=me(()=>{if(!o.value)return"https://via.placeholder.com/150";const W=o.value.localSettings||{},$=o.value.type==="group"||o.value.isGroup?W.groupAvatarOverride:W.theirAvatarOverride;if($)return $;if(!o.value.isGroup&&o.value.type!=="group"){const O=S.contacts.find(be=>be.id===o.value.id);if(O?.avatar)return O.avatar}return o.value.avatar||"https://via.placeholder.com/150"}),G=me(()=>{if(!o.value)return"Their";const W=o.value.localSettings||{};if(o.value.isGroup||o.value.type==="group")return W.groupNameOverride||o.value.title||"Group";const $=S.contacts.find(O=>O.id===o.value.id);return W.theirNicknameOverride||$?.handle||$?.name||o.value.handle||o.value.name||"Their"}),ne=N([]);try{ne.value=Intl.supportedValuesOf("timeZone")}catch{ne.value=["UTC","Asia/Shanghai","Asia/Tokyo","Europe/London","Europe/Paris","America/New_York","America/Los_Angeles"]}const pe=N({}),ee=me(()=>o.value?.type==="group"||o.value?.isGroup===!0),de=N(!1),ve=me(()=>ee.value?(o.value.members||[]).map(W=>S.contacts.find($=>$.id===W)||{id:W,name:"Unknown"}):[]),q=()=>{if(o.value){const W=o.value.localSettings||{};a.value=W.timeAwareness!==!1,i.value=W.envSensing===!0,r.value=W.myLocationOverride||"",l.value=W.theirLocationOverride||"",c.value=W.shortTermMemoryLimit||15,w.value=W.myWeatherConfig||null,C.value=W.theirWeatherConfig||null,z.value=W.groupWeatherConfigs||{};const $=W.memberOverrides||{};ee.value&&ve.value.forEach(O=>{pe.value[O.id]=$[O.id]?.location||""})}},j=async()=>{if(o.value){const W={};for(const[$,O]of Object.entries(pe.value))O&&(W[$]={location:O});await On({id:n.chatId,localSettings:{...o.value.localSettings||{},timeAwareness:a.value,envSensing:i.value,myLocationOverride:r.value,theirLocationOverride:l.value,shortTermMemoryLimit:c.value,memberOverrides:W,myWeatherConfig:w.value,theirWeatherConfig:C.value,groupWeatherConfigs:z.value}})}},g=async W=>{h.value=W;let $="";if(W==="me"?$=d.value:W==="their"?$=p.value:$=T.value[W]||"",!$){h.value="";return}const O=await Mf($);W==="me"?I.value=O:W==="their"?R.value=O:B.value={...B.value,[W]:O},h.value=""},x=(W,$)=>{const O={city:$.name,lat:$.latitude,long:$.longitude};if(W==="me")w.value=O,I.value=[],d.value="";else if(W==="their")C.value=O,R.value=[],p.value="";else{z.value={...z.value,[W]:O};const be={...B.value};delete be[W],B.value=be,T.value[W]=""}},H=W=>z.value[W];return jt(()=>{q()}),(W,$)=>(u(),v("div",Rb,[s("header",Lb,[s("div",Db,[s("button",{onClick:$[0]||($[0]=O=>W.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors active:scale-95"},[...$[21]||($[21]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),$[22]||($[22]=s("h1",{class:"font-serif text-[16px] font-semibold tracking-wide uppercase text-center flex-1 pr-8 opacity-80"},"",-1)),$[23]||($[23]=s("div",{class:"w-8 hidden"},null,-1))])]),s("main",Bb,[s("section",Fb,[s("div",Vb,[s("div",{class:"w-full h-full rounded-full bg-neutral-100 bg-cover bg-center",style:Fe({backgroundImage:`url(${E.value})`})},null,4)]),s("h2",Ub,M(G.value),1),s("span",Kb,M(ee.value?"":""),1),s("button",{onClick:$[1]||($[1]=O=>W.$emit("navigate","chat-settings-identity",{id:n.chatId})),class:"mt-6 flex items-center gap-2 pl-3 pr-4 py-1.5 rounded-full bg-zinc-50 border border-zinc-100 hover:bg-zinc-100 transition-colors group"},[s("div",{class:"w-5 h-5 rounded-full bg-cover bg-center",style:Fe({backgroundImage:`url(${Ne(S).personas.find(O=>O.name===A.value)?.avatar})`})},null,4),s("span",Wb,": "+M(A.value),1),$[24]||($[24]=s("span",{class:"material-symbols-outlined text-[14px] text-zinc-300 group-hover:text-black"},"arrow_forward_ios",-1))])]),s("section",Hb,[s("div",null,[$[33]||($[33]=s("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-300 mb-4 ml-1"},"",-1)),s("div",Gb,[s("div",qb,[s("div",Qb,[$[25]||($[25]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),a.value?(u(),v("span",Jb,M(r.value||"")+"  "+M(l.value||""),1)):D("",!0)]),s("div",Yb,[a.value?(u(),v("button",{key:0,onClick:$[2]||($[2]=O=>de.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...$[26]||($[26]=[s("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):D("",!0),s("label",Xb,[se(s("input",{type:"checkbox","onUpdate:modelValue":$[3]||($[3]=O=>a.value=O),class:"sr-only noir-toggle",onChange:j},null,544),[[An,a.value]]),$[27]||($[27]=s("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),s("div",Zb,[s("div",ex,[$[28]||($[28]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),i.value?(u(),v("span",tx,M(d.value||"")+"  "+M(p.value||""),1)):D("",!0)]),s("div",sx,[i.value?(u(),v("button",{key:0,onClick:$[4]||($[4]=O=>f.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...$[29]||($[29]=[s("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):D("",!0),s("label",nx,[se(s("input",{type:"checkbox","onUpdate:modelValue":$[5]||($[5]=O=>i.value=O),class:"sr-only noir-toggle",onChange:j},null,544),[[An,i.value]]),$[30]||($[30]=s("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),s("div",ox,[$[32]||($[32]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),s("div",ax,[se(s("input",{type:"number","onUpdate:modelValue":$[6]||($[6]=O=>c.value=O),onChange:j,class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[re,c.value]]),$[31]||($[31]=s("span",{class:"text-[11px] text-zinc-400 uppercase tracking-widest"},"",-1))])])])]),s("div",null,[$[36]||($[36]=s("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-300 mb-4 ml-1"},"",-1)),s("button",{onClick:$[7]||($[7]=O=>W.$emit("navigate","worldbook-selector",{id:n.chatId})),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors"},[$[35]||($[35]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),s("div",ix,[s("span",rx,M(o.value?.localSettings?.mountedWorldbooks?.length||0)+" ",1),$[34]||($[34]=s("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),$[37]||($[37]=s("button",{class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[s("span",{class:"text-[15px] font-medium text-zinc-500 group-hover:text-zinc-900 transition-colors"},""),s("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-zinc-900 transition-colors"},"delete_outline")],-1))])]),$[38]||($[38]=s("div",{class:"flex flex-col items-center opacity-10 py-12 select-none pointer-events-none"},[s("span",{class:"font-serif italic text-2xl"},"NOIR")],-1))]),(u(),ke(At,{to:"body"},[de.value?(u(),v("div",lx,[s("div",cx,[s("div",dx,[$[39]||($[39]=s("span",{class:"font-serif italic text-lg"},"",-1)),s("button",{onClick:$[8]||($[8]=O=>de.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),s("div",ux,[s("datalist",fx,[(u(!0),v(ae,null,xe(ne.value,O=>(u(),v("option",{key:O,value:O},M(O),9,px))),128))]),s("div",vx,[s("label",bx,M(A.value)+" () ",1),se(s("input",{type:"text",list:"timezone-list","onUpdate:modelValue":$[9]||($[9]=O=>r.value=O),onChange:j,placeholder:" Asia/Shanghai",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[re,r.value]])]),ee.value?(u(),v("div",mx,[$[40]||($[40]=s("div",{class:"w-full h-px bg-black/[0.03]"},null,-1)),$[41]||($[41]=s("span",{class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},"",-1)),(u(!0),v(ae,null,xe(ve.value,O=>(u(),v("div",{key:O.id,class:"flex flex-col gap-2"},[s("label",hx,M(O.name),1),se(s("input",{type:"text",list:"timezone-list","onUpdate:modelValue":be=>pe.value[O.id]=be,onChange:j,placeholder:`${O.name} `,class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,40,yx),[[re,pe.value[O.id]]])]))),128))])):(u(),v("div",xx,[s("label",gx,M(G.value)+" () ",1),se(s("input",{type:"text",list:"timezone-list","onUpdate:modelValue":$[10]||($[10]=O=>l.value=O),onChange:j,placeholder:" Europe/Paris",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[re,l.value]])]))]),s("div",wx,[s("button",{onClick:$[11]||($[11]=O=>de.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):D("",!0),f.value?(u(),v("div",kx,[s("div",_x,[s("div",$x,[$[42]||($[42]=s("div",{class:"flex flex-col"},[s("span",{class:"font-serif italic text-lg"},""),s("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Environment Simulation")],-1)),s("button",{onClick:$[12]||($[12]=O=>f.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),s("div",Cx,[$[47]||($[47]=s("div",{class:"bg-gray-50 p-4 rounded-lg flex gap-3"},[s("span",{class:"material-symbols-outlined text-zinc-400 text-sm mt-0.5"},"info"),s("p",{class:"text-[11px] text-zinc-500 leading-relaxed"}," Noir  Prompt  ")],-1)),s("div",zx,[$[44]||($[44]=s("span",{class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},"",-1)),s("div",Sx,[se(s("input",{"onUpdate:modelValue":$[13]||($[13]=O=>d.value=O),onKeyup:$[14]||($[14]=Us(O=>g("me"),["enter"])),placeholder:" ( )",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[re,d.value]]),s("button",{onClick:$[15]||($[15]=O=>g("me")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[h.value==="me"?(u(),v("span",Ix,"sync")):(u(),v("span",Ax,"search"))])]),I.value.length>0?(u(),v("div",Mx,[(u(!0),v(ae,null,xe(I.value,O=>(u(),v("button",{key:O.id,onClick:be=>x("me",O),class:J(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",w.value?.city===O.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[s("span",null,M(O.name)+", "+M(O.admin1||O.country),1),w.value?.city===O.name?(u(),v("span",jx,"check")):D("",!0)],10,Tx))),128))])):w.value?.city?(u(),v("div",Ex,[$[43]||($[43]=s("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),s("span",Ox,M(w.value.city),1),s("span",Px,M(w.value.lat.toFixed(2))+", "+M(w.value.long.toFixed(2)),1)])):D("",!0)]),$[48]||($[48]=s("div",{class:"w-full h-px bg-gray-100"},null,-1)),s("div",Nx,[s("span",Rx,M(ee.value?"":""),1),ee.value?(u(),v("div",qx,[(u(!0),v(ae,null,xe(ve.value,O=>(u(),v("div",{key:O.id,class:"p-3 border border-gray-100 rounded-lg bg-gray-50/50"},[s("span",Qx,M(O.name),1),s("div",Jx,[se(s("input",{"onUpdate:modelValue":be=>T.value[O.id]=be,onKeyup:Us(be=>g(O.id),["enter"]),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-1.5 text-[12px] focus:border-black focus:outline-none transition-colors"},null,40,Yx),[[re,T.value[O.id]]]),s("button",{onClick:be=>g(O.id),class:"bg-white border border-gray-200 text-black rounded-lg px-3 flex items-center justify-center hover:border-black transition-colors"},[h.value===O.id?(u(),v("span",Zx,"sync")):(u(),v("span",eg,"search"))],8,Xx)]),B.value[O.id]&&B.value[O.id].length>0?(u(),v("div",tg,[(u(!0),v(ae,null,xe(B.value[O.id],be=>(u(),v("button",{key:be.id,onClick:et=>x(O.id,be),class:J(["text-left px-2 py-1.5 rounded hover:bg-gray-50 text-[11px] flex items-center justify-between group transition-colors",H(O.id)?.city===be.name?"font-bold text-black":"text-zinc-500"])},[s("span",ng,M(be.name)+", "+M(be.country),1),H(O.id)?.city===be.name?(u(),v("span",og,"check")):D("",!0)],10,sg))),128))])):H(O.id)?.city?(u(),v("div",ag,[$[46]||($[46]=s("span",{class:"material-symbols-outlined text-[10px] text-green-600"},"check_circle",-1)),s("span",ig,M(H(O.id).city),1)])):D("",!0)]))),128))])):(u(),v("div",Lx,[s("div",Dx,[se(s("input",{"onUpdate:modelValue":$[16]||($[16]=O=>p.value=O),onKeyup:$[17]||($[17]=Us(O=>g("their"),["enter"])),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[re,p.value]]),s("button",{onClick:$[18]||($[18]=O=>g("their")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[h.value==="their"?(u(),v("span",Bx,"sync")):(u(),v("span",Fx,"search"))])]),R.value.length>0?(u(),v("div",Vx,[(u(!0),v(ae,null,xe(R.value,O=>(u(),v("button",{key:O.id,onClick:be=>x("their",O),class:J(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",C.value?.city===O.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[s("span",null,M(O.name)+", "+M(O.admin1||O.country),1),C.value?.city===O.name?(u(),v("span",Kx,"check")):D("",!0)],10,Ux))),128))])):C.value?.city?(u(),v("div",Wx,[$[45]||($[45]=s("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),s("span",Hx,M(C.value.city),1),s("span",Gx,M(C.value.lat.toFixed(2))+", "+M(C.value.long.toFixed(2)),1)])):D("",!0)]))])]),s("div",rg,[s("button",{onClick:$[19]||($[19]=O=>f.value=!1),class:"px-6 py-2 border border-gray-200 bg-white text-black text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-gray-50 transition-colors"},"  "),s("button",{onClick:$[20]||($[20]=O=>{j(),f.value=!1}),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):D("",!0)]))]))}},cg=Ke(lg,[["__scopeId","data-v-2dbcf0d3"]]),dg={class:"h-full flex flex-col bg-zinc-50 text-black font-sans"},ug={class:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50"},fg={class:"flex items-center justify-between px-4 pt-[calc(12px_+_env(safe-area-inset-top))] pb-3 max-w-lg mx-auto w-full"},pg={key:0,class:"w-full max-w-lg mx-auto px-4 pb-32 flex-1 overflow-y-auto scrollbar-hide pt-6"},vg={class:"space-y-6"},bg={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},xg={class:"px-5 py-3 border-b border-gray-50 flex items-center justify-between bg-white"},gg={class:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 border border-zinc-100"},mg={class:"text-[10px] font-medium text-zinc-600"},hg={class:"p-5 flex flex-col gap-6"},yg={class:"relative"},wg=["value"],kg={class:"flex items-start gap-4"},_g={class:"relative group shrink-0"},$g={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},Cg=["src"],zg={class:"flex-1 space-y-3 pt-1"},Sg={class:"relative"},Ig=["placeholder"],Ag={class:"relative"},Mg={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Tg={class:"px-5 py-3 border-b border-gray-50 bg-white"},jg={class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},Eg={class:"p-5 flex items-start gap-4"},Og={class:"relative group shrink-0"},Pg={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},Ng=["src"],Rg={class:"flex-1 space-y-3 pt-1"},Lg={class:"relative"},Dg=["placeholder"],Bg={class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},Fg={class:"relative"},Vg={key:0,class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Ug={class:"divide-y divide-gray-50"},Kg={class:"relative size-10 rounded-full bg-zinc-100 shrink-0 border border-gray-100 overflow-hidden cursor-pointer group-hover:border-zinc-300 transition-colors"},Wg=["src"],Hg=["onChange"],Gg={class:"flex-1 flex flex-col gap-2"},qg=["onUpdate:modelValue","placeholder"],Qg=["onUpdate:modelValue"],Jg={class:"shrink-0 flex flex-col items-end"},Yg={class:"text-[9px] font-mono text-zinc-300 bg-zinc-100 px-1.5 py-0.5 rounded"},Xg={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Zg={class:"divide-y divide-gray-50"},em={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},tm={class:"relative inline-flex items-center cursor-pointer"},sm={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},nm={class:"relative inline-flex items-center cursor-pointer"},om={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},am={class:"flex bg-zinc-100 rounded-lg p-1 gap-1"},im={__name:"ChatSettingsIdentity",props:["chatId"],emits:["back"],setup(e,{emit:t}){const n=e,o=N(null),a=N(""),i=me(()=>S.personas),r=N({showSelfAvatar:!0,showOtherAvatar:!0,avatarShape:"circle",myActivePersonaId:"",myNicknameOverride:"",myAvatarOverride:"",theirNicknameOverride:"",theirAvatarOverride:"",groupNameOverride:"",groupAvatarOverride:""});jt(async()=>{const C=$o(n.chatId);if(C){o.value=C;const z=S.contacts.find(A=>A.id===C.id);a.value=z?.avatar||C.avatar||"",C.localSettings?(C.localSettings.showAvatars===!1&&(r.value.showSelfAvatar=!1,r.value.showOtherAvatar=!1),r.value={...r.value,...C.localSettings}):r.value.myActivePersonaId=S.activePersonaId}});const l=(C,z)=>{const A=C.target.files[0];if(!A)return;const E=new FileReader;E.onload=G=>{const ne=G.target.result;z==="myAvatarOverride"?r.value.myAvatarOverride=ne:z==="remote"&&(o.value.type==="group"||o.value.isGroup?r.value.groupAvatarOverride=ne:r.value.theirAvatarOverride=ne)},E.readAsDataURL(A)};let c=null;const f=async()=>{if(!o.value)return;let C;try{const A=we(o.value);C=JSON.parse(JSON.stringify(A))}catch(A){console.error("Failed to clone conversation for save",A);return}const z={...C,localSettings:{...we(r.value)}};(o.value.type==="group"||o.value.isGroup)&&(r.value.groupNameOverride&&(z.title=r.value.groupNameOverride),r.value.groupAvatarOverride&&(z.avatar=r.value.groupAvatarOverride)),await On(z),Object.assign(o.value,z)};Fs(r,()=>{c&&clearTimeout(c),c=setTimeout(f,500)},{deep:!0});const d=me(()=>o.value?S.contacts.find(C=>C.id===o.value.id):null),p=me(()=>{if(!o.value)return"https://via.placeholder.com/150";const C=o.value.type==="group"||o.value.isGroup?r.value.groupAvatarOverride:r.value.theirAvatarOverride;return C||d.value?.avatar||o.value.avatar||"https://via.placeholder.com/150"}),h=me(()=>{const C=r.value.myActivePersonaId||S.activePersonaId;return S.personas.find(z=>z.id===C)||S.personas[0]||{}}),I=me({get(){return o.value?o.value.type==="group"||o.value.isGroup?r.value.groupNameOverride:r.value.theirNicknameOverride:""},set(C){o.value&&(o.value.type==="group"||o.value.isGroup?r.value.groupNameOverride=C:r.value.theirNicknameOverride=C)}}),R=me(()=>o.value?.members?o.value.members.map(C=>S.contacts.find(z=>z.id===C)).filter(Boolean):[]),T=C=>(r.value.memberOverrides||(r.value.memberOverrides={}),r.value.memberOverrides[C]||(r.value.memberOverrides[C]={nickname:"",avatar:""}),r.value.memberOverrides[C]),B=(C,z)=>{const A=C.target.files[0];if(!A)return;const E=new FileReader;E.onload=G=>{const ne=G.target.result,pe=T(z);pe.avatar=ne},E.readAsDataURL(A)},w=C=>C==="square"?"rounded-none":"rounded-full";return(C,z)=>(u(),v("div",dg,[s("header",ug,[s("div",fg,[s("button",{onClick:z[0]||(z[0]=A=>C.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 text-zinc-600 hover:text-black hover:bg-zinc-100 rounded-full transition-all active:scale-95"},[...z[13]||(z[13]=[s("span",{class:"material-symbols-outlined text-[20px]"},"arrow_back",-1)])]),z[14]||(z[14]=s("h1",{class:"font-serif text-[15px] font-semibold tracking-wider uppercase text-center text-zinc-800"},"",-1)),z[15]||(z[15]=s("div",{class:"w-8"},null,-1))])]),o.value?(u(),v("main",pg,[s("div",vg,[s("section",bg,[s("div",xg,[z[17]||(z[17]=s("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"",-1)),s("div",gg,[z[16]||(z[16]=s("div",{class:"size-1.5 rounded-full bg-emerald-500"},null,-1)),s("span",mg,M(Ne(S).personas.find(A=>A.id===r.value.myActivePersonaId)?.name||""),1)])]),s("div",hg,[s("div",yg,[se(s("select",{"onUpdate:modelValue":z[1]||(z[1]=A=>r.value.myActivePersonaId=A),class:"w-full appearance-none bg-zinc-50 border border-gray-200 rounded-xl px-4 py-3 text-[13px] font-medium text-zinc-700 outline-none focus:border-zinc-400 focus:bg-white transition-all"},[(u(!0),v(ae,null,xe(i.value,A=>(u(),v("option",{key:A.id,value:A.id},M(A.name)+" ("+M(A.handle)+") ",9,wg))),128))],512),[[nn,r.value.myActivePersonaId]]),z[18]||(z[18]=s("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-[18px] pointer-events-none"},"unfold_more",-1))]),s("div",kg,[s("div",_g,[s("div",$g,[s("img",{src:r.value.myAvatarOverride||h.value?.avatar,class:J(["w-full h-full object-cover",w(r.value.avatarShape)])},null,10,Cg),z[19]||(z[19]=s("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[s("span",{class:"material-symbols-outlined text-white text-[20px]"},"photo_camera")],-1))]),s("input",{type:"file",accept:"image/*",onChange:z[2]||(z[2]=A=>l(A,"myAvatarOverride")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),s("div",zg,[s("div",Sg,[se(s("input",{type:"text","onUpdate:modelValue":z[3]||(z[3]=A=>r.value.myNicknameOverride=A),placeholder:h.value?.handle||h.value?.name,class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,Ig),[[re,r.value.myNicknameOverride]]),z[20]||(z[20]=s("label",{class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},"Display Name",-1))]),s("div",Ag,[se(s("input",{type:"text","onUpdate:modelValue":z[4]||(z[4]=A=>r.value.myAvatarOverride=A),placeholder:"Paste Image URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512),[[re,r.value.myAvatarOverride]])])])])])]),s("section",Mg,[s("div",Tg,[s("span",jg,M(o.value.type==="group"||o.value.isGroup?"":""),1)]),s("div",Eg,[s("div",Og,[s("div",Pg,[s("img",{src:p.value,class:J(["w-full h-full object-cover",w(r.value.avatarShape)])},null,10,Ng),z[21]||(z[21]=s("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[s("span",{class:"material-symbols-outlined text-white text-[20px]"},"edit")],-1))]),s("input",{type:"file",accept:"image/*",onChange:z[5]||(z[5]=A=>l(A,"remote")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),s("div",Rg,[s("div",Lg,[se(s("input",{type:"text","onUpdate:modelValue":z[6]||(z[6]=A=>I.value=A),placeholder:d.value?.handle||d.value?.name||o.value.handle||o.value.title||o.value.name||"",class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,Dg),[[re,I.value]]),s("label",Bg,M(o.value.type==="group"||o.value.isGroup?"Group Name":"Alias (Local)"),1)]),s("div",Fg,[o.value.type==="group"||o.value.isGroup?se((u(),v("input",{key:0,type:"text","onUpdate:modelValue":z[7]||(z[7]=A=>r.value.groupAvatarOverride=A),placeholder:"Group Icon URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[re,r.value.groupAvatarOverride]]):se((u(),v("input",{key:1,type:"text","onUpdate:modelValue":z[8]||(z[8]=A=>r.value.theirAvatarOverride=A),placeholder:"Avatar URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[re,r.value.theirAvatarOverride]])])])])]),(o.value.type==="group"||o.value.isGroup)&&o.value.members?.length?(u(),v("section",Vg,[z[23]||(z[23]=s("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[s("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),s("div",Ug,[(u(!0),v(ae,null,xe(R.value,A=>(u(),v("div",{key:A.id,class:"p-4 flex items-start gap-3 hover:bg-zinc-50/50 transition-colors group"},[s("div",Kg,[s("img",{src:r.value.memberOverrides?.[A.id]?.avatar||A.avatar,class:J(["w-full h-full object-cover",w(r.value.avatarShape)])},null,10,Wg),z[22]||(z[22]=s("div",{class:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[s("span",{class:"material-symbols-outlined text-white text-[14px]"},"edit")],-1)),s("input",{type:"file",accept:"image/*",onChange:E=>B(E,A.id),class:"absolute inset-0 opacity-0 cursor-pointer z-10",title:""},null,40,Hg)]),s("div",Gg,[se(s("input",{type:"text","onUpdate:modelValue":E=>T(A.id).nickname=E,placeholder:A.handle||A.name,class:"w-full bg-transparent text-[14px] font-medium text-zinc-800 placeholder:text-zinc-300 focus:outline-none focus:border-b focus:border-zinc-300 transition-colors py-0.5"},null,8,qg),[[re,T(A.id).nickname]]),se(s("input",{type:"text","onUpdate:modelValue":E=>T(A.id).avatar=E,placeholder:"Avatar URL...",class:"w-full bg-zinc-50/50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded px-2 py-1 text-[10px] text-zinc-500 max-w-[90%] outline-none transition-all placeholder:text-zinc-300"},null,8,Qg),[[re,T(A.id).avatar]])]),s("div",Jg,[s("span",Yg,M(A.handle),1)])]))),128))])])):D("",!0),s("section",Xg,[z[31]||(z[31]=s("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[s("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),s("div",Zg,[s("div",em,[z[25]||(z[25]=s("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),s("label",tm,[se(s("input",{"onUpdate:modelValue":z[9]||(z[9]=A=>r.value.showSelfAvatar=A),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[An,r.value.showSelfAvatar]]),z[24]||(z[24]=s("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),s("div",sm,[z[27]||(z[27]=s("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),s("label",nm,[se(s("input",{"onUpdate:modelValue":z[10]||(z[10]=A=>r.value.showOtherAvatar=A),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[An,r.value.showOtherAvatar]]),z[26]||(z[26]=s("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),s("div",om,[z[30]||(z[30]=s("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),s("div",am,[s("button",{onClick:z[11]||(z[11]=A=>r.value.avatarShape="circle"),class:J(["size-7 rounded-md flex items-center justify-center transition-all",r.value.avatarShape==="circle"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...z[28]||(z[28]=[s("div",{class:"w-3 h-3 rounded-full border-[1.5px] border-current"},null,-1)])],2),s("button",{onClick:z[12]||(z[12]=A=>r.value.avatarShape="square"),class:J(["size-7 rounded-md flex items-center justify-center transition-all",r.value.avatarShape==="square"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...z[29]||(z[29]=[s("div",{class:"w-3 h-3 border-[1.5px] border-current rounded-[1px]"},null,-1)])],2)])])])])])])):D("",!0)]))}},rm=Ke(im,[["__scopeId","data-v-9a42c415"]]),lm={class:"h-full flex flex-col bg-white text-black font-sans"},cm={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},dm={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},um={class:"w-full px-8 pb-32 flex-1 overflow-y-auto"},fm={class:"mt-8 mb-10 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},pm={class:"text-[14px] text-zinc-600"},vm={class:"font-bold text-black"},bm={class:"flex flex-col gap-10"},xm={class:"flex items-center justify-between py-2 border-b-2 border-black mb-4"},gm={class:"font-serif text-[18px] tracking-tight font-bold"},mm={class:"relative inline-flex items-center cursor-pointer"},hm=["checked","onChange"],ym={class:"noir-toggle-bg w-8 h-4 bg-zinc-200 rounded-full transition-colors duration-300"},wm={class:"flex flex-col gap-1"},km={class:"flex flex-col"},_m={class:"text-[14px] font-medium group-hover:text-black text-zinc-700 transition-colors"},$m={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},Cm={class:"relative inline-flex items-center cursor-pointer"},zm=["checked","disabled","onChange"],Sm={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Im={key:0,class:"py-2 text-center text-zinc-300 text-[12px] italic"},Am={__name:"WorldBookSelector",props:["chatId"],emits:["back"],setup(e,{emit:t}){const n=e,o=Co(),a=me(()=>$o(n.chatId)),i=N([]);jt(()=>{a.value?.localSettings?.mountedWorldbooks&&(i.value=[...a.value.localSettings.mountedWorldbooks])});const r=me(()=>o.state.categories),l=me(()=>o.state.entries),c=R=>l.value.filter(T=>T.categoryId===R),f=R=>{const T=i.value.indexOf(R);T===-1?i.value.push(R):i.value.splice(T,1),h()},d=R=>i.value.includes(R),p=R=>{f(R)},h=async()=>{if(a.value){const R=a.value.localSettings||{};await On({id:n.chatId,localSettings:{...R,mountedWorldbooks:i.value}})}},I=me(()=>l.value.filter(R=>R.scope==="global").length);return(R,T)=>(u(),v("div",lm,[s("header",cm,[s("div",dm,[s("button",{onClick:T[0]||(T[0]=B=>R.$emit("back")),class:"flex items-center justify-center -ml-2 w-10 h-10 hover:bg-gray-100 rounded-full transition-colors"},[...T[1]||(T[1]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),T[2]||(T[2]=s("h1",{class:"font-serif text-[18px] font-light tracking-[0.15em] uppercase text-center flex-1 pr-8"},"",-1)),T[3]||(T[3]=s("div",{class:"w-8 hidden"},null,-1))])]),s("main",um,[s("div",fm,[T[5]||(T[5]=s("span",{class:"block text-[12px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),s("p",pm,[s("span",vm,M(I.value),1),T[4]||(T[4]=_s("  ",-1))])]),s("div",bm,[(u(!0),v(ae,null,xe(r.value,B=>(u(),v("div",{key:B.id,class:"flex flex-col"},[s("div",xm,[s("span",gm,M(B.name),1),s("label",mm,[s("input",{type:"checkbox",class:"sr-only noir-toggle",checked:d(B.id),onChange:w=>p(B.id)},null,40,hm),s("div",ym,[s("div",{class:J(["noir-toggle-bg-thumb absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform duration-300 shadow-sm",d(B.id)?"translate-x-4":""])},null,2)])])]),s("div",wm,[(u(!0),v(ae,null,xe(c(B.id).filter(w=>w.scope==="local"),w=>(u(),v("div",{key:w.id,class:"flex items-center justify-between py-3 px-2 hover:bg-gray-50 rounded-lg transition-colors group"},[s("div",km,[s("span",_m,M(w.title),1),s("span",$m,M(w.isConstant?"Constant":"Trigger")+"  "+M(w.position),1)]),s("label",Cm,[s("input",{type:"checkbox",class:"sr-only",checked:d(B.id)||d(w.id),disabled:d(B.id),onChange:C=>!d(B.id)&&f(w.id)},null,40,zm),s("div",{class:J(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",d(B.id)||d(w.id)?"bg-black border-black":"bg-transparent"])},[d(B.id)||d(w.id)?(u(),v("span",Sm,"check")):D("",!0)],2)])]))),128)),c(B.id).filter(w=>w.scope==="local").length===0?(u(),v("div",Im," No local entries ")):D("",!0)])]))),128))]),T[6]||(T[6]=s("div",{class:"h-20"},null,-1))])]))}},Mm=Ke(Am,[["__scopeId","data-v-623fc9e7"]]),Tm={class:"relationship-network w-full h-full flex flex-col bg-white relative overflow-hidden"},jm={class:"h-[calc(3.5rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 z-30 bg-white/80 backdrop-blur sticky top-0"},Em={class:"flex items-center w-full justify-between"},Om={class:"material-symbols-outlined text-zinc-600 text-[20px]"},Pm=["viewBox"],Nm=["onClick"],Rm=["x1","y1","x2","y2"],Lm=["x1","y1","x2","y2","stroke-dasharray"],Dm=["x","y"],Bm={class:"flex justify-center"},Fm={class:"bg-white border border-zinc-200 px-2 py-0.5 rounded-full text-[10px] text-center font-bold text-zinc-500 group-hover:text-black group-hover:border-black transition-colors shadow-sm whitespace-nowrap"},Vm={class:"absolute inset-0 w-full h-full pointer-events-none z-20"},Um=["title"],Km=["src"],Wm={class:"absolute -bottom-6 bg-black text-white text-[10px] px-3 py-1 rounded-full uppercase font-bold tracking-widest whitespace-nowrap shadow-lg z-30"},Hm=["title","onClick"],Gm=["src"],qm={class:"absolute top-full mt-3 left-1/2 -translate-x-1/2 text-[11px] text-zinc-700 font-bold whitespace-nowrap bg-white/90 backdrop-blur px-2 py-0.5 rounded border border-zinc-100 shadow-sm z-30 pointer-events-none"},Qm={class:"bg-white p-8 shadow-2xl rounded-2xl w-96 max-w-full flex flex-col gap-6 animate-in fade-in zoom-in duration-200"},Jm={class:"bg-zinc-50 px-4 py-3 rounded-xl border border-zinc-100 focus-within:border-black focus-within:ring-1 focus-within:ring-black transition-all"},Ym={class:"bg-white p-6 shadow-2xl rounded-2xl w-[400px] max-w-full flex flex-col gap-4 max-h-[80vh] animate-in fade-in slide-in-from-bottom-4 duration-300"},Xm={class:"flex-1 overflow-y-auto custom-scrollbar px-1 space-y-5"},Zm={class:"space-y-2"},e1=["onClick"],t1=["src"],s1={class:"flex flex-col flex-1"},n1={class:"text-sm font-bold text-zinc-900"},o1={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},a1={key:1,class:"ml-2"},i1={key:0,class:"text-[9px] bg-zinc-900 text-white px-2 py-0.5 rounded-full font-bold"},r1={key:0},l1={class:"space-y-2"},c1=["onClick"],d1=["src"],u1={class:"flex flex-col flex-1"},f1={class:"text-sm font-bold text-zinc-900"},p1={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},v1={key:1,class:"ml-2"},b1={key:0,class:"text-[9px] bg-zinc-200 text-zinc-600 px-2 py-0.5 rounded-full font-bold"},x1={class:"flex gap-3 mt-2 shrink-0 pt-4 border-t border-zinc-50"},g1={key:1,class:"flex-1 py-3 bg-zinc-100 text-zinc-400 font-bold text-sm cursor-default rounded-xl"},m1={class:"flex flex-col h-full overflow-hidden"},h1={class:"p-5 border-b border-zinc-50 flex justify-between items-center sm:hidden"},y1={class:"flex-1 p-5 flex flex-col overflow-hidden"},w1={class:"font-serif text-xs font-bold tracking-widest text-zinc-400 uppercase mb-6 flex justify-between items-center"},k1={class:"bg-zinc-100 text-zinc-500 px-2 py-0.5 rounded-full text-[10px] font-bold"},_1={class:"space-y-4 overflow-y-auto flex-1 pr-1 custom-scrollbar pb-10"},$1=["onClick"],C1=["src"],z1={class:"text-sm font-bold text-zinc-700 truncate group-hover:text-black transition-colors"},S1=["onClick"],fn=2e3,I1={__name:"RelationshipNetwork",emits:["back"],setup(e,{emit:t}){const n=N(!1),o=N(null),a=N(""),i=N(!1),r=N(!1),l=N(null),c=N(null),f=N(0),d=N(0),p=N(!1),h=N(0),I=N(0),R=N(1),T=fn/2,B=j=>{j.target.tagName!=="svg"&&j.target.tagName!=="DIV"&&!j.target.classList.contains("canvas-area")||(p.value=!0,j.type==="touchstart"?(h.value=j.touches[0].clientX,I.value=j.touches[0].clientY):(h.value=j.clientX,I.value=j.clientY))},w=j=>{if(!p.value)return;let g,x;j.type==="touchmove"?(g=j.touches[0].clientX,x=j.touches[0].clientY):(g=j.clientX,x=j.clientY);const H=g-h.value,W=x-I.value;f.value+=H,d.value+=W,h.value=g,I.value=x},C=()=>{p.value=!1};jt(()=>{f.value=-T+window.innerWidth/2,d.value=-T+window.innerHeight/2,window.addEventListener("mousemove",w),window.addEventListener("mouseup",C),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",C)}),ma(()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",C),window.removeEventListener("touchmove",w),window.removeEventListener("touchend",C)});const z=me(()=>{const j=S.personas,g=S.relationships,x=S.contacts,H=j.map((ce,Ye)=>{const Xe=j.length||1,rt=150,Ge=Ye/Xe*2*Math.PI-Math.PI/2;return{...ce,nodeType:"persona",x:T+rt*Math.cos(Ge),y:T+rt*Math.sin(Ge)}}),W=new Set;g.forEach(ce=>{W.add(ce.sourceId),W.add(ce.targetId)});const O=x.filter(ce=>W.has(ce.id)).map(ce=>{const Ye=g.filter(Ge=>Ge.sourceId===ce.id||Ge.targetId===ce.id);let Xe=0,rt=350;if(Ye.length>0){let Ge=0,Vt=0,Ut=0;Ye.forEach(Ct=>{const tt=Ct.sourceId===ce.id?Ct.targetId:Ct.sourceId,ss=H.find(m=>m.id===tt);ss&&(Ge+=ss.x-T,Vt+=ss.y-T,Ut++)}),Ut>0?(Xe=Math.atan2(Vt,Ge),Ut>1&&(rt=250)):Xe=ce.id.split("").reduce((tt,ss)=>tt+ss.charCodeAt(0),0)%360*(Math.PI/180)}else Xe=ce.id.split("").reduce((Vt,Ut)=>Vt+Ut.charCodeAt(0),0)%360*(Math.PI/180);return{...ce,displayName:ce.handle||ce.nickname||ce.name,nodeType:"contact",idealAngle:Xe,radius:rt,x:0,y:0}});O.sort((ce,Ye)=>ce.idealAngle-Ye.idealAngle);for(let ce=0;ce<O.length;ce++){const Ye=O[ce];if(ce>0){const Xe=O[ce-1],rt=80/Ye.radius;let Ge=Ye.idealAngle-Xe.idealAngle;for(;Ge<0;)Ge+=Math.PI*2;Ge<rt&&(Ye.idealAngle=Xe.idealAngle+rt)}}O.forEach(ce=>{ce.x=T+ce.radius*Math.cos(ce.idealAngle),ce.y=T+ce.radius*Math.sin(ce.idealAngle)});const be=[...H,...O],et=g.map(ce=>{const Ye=be.find(rt=>rt.id===ce.sourceId),Xe=be.find(rt=>rt.id===ce.targetId);return Ye&&Xe?{...ce,x1:Ye.x,y1:Ye.y,x2:Xe.x,y2:Xe.y,isCharChar:Ye.nodeType==="contact"&&Xe.nodeType==="contact"}:null}).filter(Boolean);return{personaNodes:H,contactNodes:O,links:et}}),A=j=>{o.value=j,a.value=j.type,i.value=!0},E=async()=>{o.value&&a.value.trim()&&(await Kr(o.value.id,a.value.trim()),i.value=!1,o.value=null)},G=async()=>{o.value&&confirm("")&&(await Kd(o.value.id),i.value=!1,o.value=null)},ne=j=>{l.value=j,c.value=null,r.value=!0},pe=async()=>{if(l.value&&c.value){if(S.relationships.find(x=>x.sourceId===c.value&&x.targetId===l.value||x.sourceId===l.value&&x.targetId===c.value)){alert("");return}const g="";await Ur(c.value,l.value,g),r.value=!1,setTimeout(()=>{const x=S.relationships.find(H=>H.sourceId===c.value&&H.targetId===l.value&&H.type===g);x&&(o.value=x,a.value="",i.value=!0)},100),l.value=null}},ee=(j,g)=>{const x=S.relationships.find(H=>H.sourceId===j&&H.targetId===g||H.sourceId===g&&H.targetId===j);return x?x.type:null},de=me(()=>S.contacts),ve=me(()=>l.value?S.contacts.filter(j=>j.id!==l.value):[]),q=j=>j.handle||j.nickname||j.name;return(j,g)=>(u(),v("div",Tm,[s("header",jm,[s("div",Em,[s("button",{onClick:g[0]||(g[0]=x=>j.$emit("back")),class:"w-10 h-10 -ml-2 flex items-center justify-center hover:bg-zinc-100/50 rounded-full transition-colors"},[...g[7]||(g[7]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),g[8]||(g[8]=s("span",{class:"font-bold tracking-[0.2em] text-[13px] uppercase text-zinc-900 absolute left-1/2 -translate-x-1/2"}," (NETWORK)",-1)),s("button",{onClick:g[1]||(g[1]=x=>n.value=!n.value),class:"sm:hidden p-2 -mr-2 rounded-full hover:bg-zinc-100"},[s("span",Om,M(n.value?"close":"group_add"),1)]),g[9]||(g[9]=s("div",{class:"w-10 h-10 hidden sm:block"},null,-1))])]),s("div",{class:"flex-1 overflow-hidden relative bg-zinc-50 cursor-move",onMousedown:B,onTouchstart:B},[s("div",{class:"absolute top-0 left-0 w-full h-full canvas-area",style:Fe({transform:`translate(${f.value}px, ${d.value}px) scale(${R.value})`,transformOrigin:"0 0"})},[s("div",{class:"relative",style:Fe({width:`${fn}px`,height:`${fn}px`})},[g[10]||(g[10]=s("div",{class:"absolute inset-0 opacity-10 pointer-events-none",style:{"background-image":"radial-gradient(#000 1px, transparent 1px)","background-size":"20px 20px"}},null,-1)),(u(),v("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",viewBox:`0 0 ${fn} ${fn}`},[(u(!0),v(ae,null,xe(z.value.links,x=>(u(),v("g",{key:x.id,class:"pointer-events-auto cursor-pointer group",onClick:Le(H=>A(x),["stop"])},[s("line",{x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,stroke:"transparent","stroke-width":"40"},null,8,Rm),s("line",{x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,class:"stroke-zinc-300 stroke-1 group-hover:stroke-black transition-colors","stroke-dasharray":x.isCharChar?"8 4":"0"},null,8,Lm),(u(),v("foreignObject",{x:(x.x1+x.x2)/2-50,y:(x.y1+x.y2)/2-12,width:"100",height:"24",class:"overflow-visible pointer-events-none"},[s("div",Bm,[s("span",Fm,M(x.type),1)])],8,Dm))],8,Nm))),128))],8,Pm)),s("div",Vm,[(u(!0),v(ae,null,xe(z.value.personaNodes,x=>(u(),v("div",{key:x.id,class:"absolute w-20 h-20 -ml-10 -mt-10 rounded-full border-4 border-white ring-1 ring-zinc-200 bg-white flex items-center justify-center shadow-xl pointer-events-auto transition-transform hover:scale-110",style:Fe({left:`${x.x}px`,top:`${x.y}px`}),title:x.name},[s("img",{src:x.avatar,class:"w-full h-full rounded-full object-cover"},null,8,Km),s("div",Wm,"  ("+M(x.handle)+") ",1)],12,Um))),128)),(u(!0),v(ae,null,xe(z.value.contactNodes,x=>(u(),v("div",{key:x.id,class:"absolute w-14 h-14 -ml-7 -mt-7 rounded-full border-2 border-white ring-1 ring-zinc-200 bg-white p-0.5 pointer-events-auto cursor-pointer hover:ring-black hover:shadow-xl transition-all flex items-center justify-center group",style:Fe({left:`${x.x}px`,top:`${x.y}px`}),title:x.displayName,onClick:Le(H=>ne(x.id),["stop"])},[s("img",{src:x.avatar,class:"w-full h-full rounded-full object-cover"},null,8,Gm),s("span",qm,M(x.displayName),1)],12,Hm))),128))])],4)],4),g[11]||(g[11]=s("div",{class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] right-6 text-zinc-300 text-xs font-serif tracking-widest pointer-events-none select-none z-20"}," UNIFIED NETWORK   ",-1))],32),i.value?(u(),v("div",{key:0,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:g[3]||(g[3]=Le(x=>i.value=!1,["self"]))},[s("div",Qm,[g[12]||(g[12]=s("div",{class:"text-center"},[s("h3",{class:"font-bold text-lg text-zinc-900"}," (Define Link)"),s("p",{class:"text-zinc-500 text-xs mt-1"},"")],-1)),s("div",Jm,[se(s("input",{"onUpdate:modelValue":g[2]||(g[2]=x=>a.value=x),ref:"typeInput",placeholder:"...",class:"bg-transparent border-none w-full text-center font-bold text-xl focus:ring-0 p-0 text-zinc-900 placeholder:text-zinc-300",onKeyup:Us(E,["enter"]),autofocus:""},null,544),[[re,a.value]])]),s("div",{class:"grid grid-cols-2 gap-3"},[s("button",{onClick:G,class:"py-3 bg-white text-red-500 border border-zinc-200 hover:border-red-200 hover:bg-red-50 font-bold text-sm rounded-xl transition-all shadow-sm"},"  "),s("button",{onClick:E,class:"py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg shadow-zinc-200"},"  ")])])])):D("",!0),r.value?(u(),v("div",{key:1,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:g[5]||(g[5]=Le(x=>r.value=!1,["self"]))},[s("div",Ym,[g[17]||(g[17]=s("div",{class:"shrink-0 text-center pb-2 border-b border-zinc-50"},[s("h3",{class:"font-bold text-base text-zinc-900"}," (Connect)")],-1)),s("div",Xm,[s("div",null,[g[14]||(g[14]=s("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (ME)",-1)),s("div",Zm,[(u(!0),v(ae,null,xe(Ne(S).personas,x=>(u(),v("div",{key:x.id,onClick:H=>c.value=x.id,class:J(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",c.value===x.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[s("img",{src:x.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,t1),s("div",s1,[s("span",n1,M(x.handle),1)]),c.value===x.id?(u(),v("div",o1,[...g[13]||(g[13]=[s("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(u(),v("div",a1,[ee(l.value,x.id)?(u(),v("span",i1,M(ee(l.value,x.id)),1)):D("",!0)]))],10,e1))),128))])]),ve.value.length>0?(u(),v("div",r1,[g[16]||(g[16]=s("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (OTHERS)",-1)),s("div",l1,[(u(!0),v(ae,null,xe(ve.value,x=>(u(),v("div",{key:x.id,onClick:H=>c.value=x.id,class:J(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",c.value===x.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[s("img",{src:x.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,d1),s("div",u1,[s("span",f1,M(q(x)),1)]),c.value===x.id?(u(),v("div",p1,[...g[15]||(g[15]=[s("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(u(),v("div",v1,[ee(l.value,x.id)?(u(),v("span",b1,M(ee(l.value,x.id)),1)):D("",!0)]))],10,c1))),128))])])):D("",!0)]),s("div",x1,[s("button",{onClick:g[4]||(g[4]=x=>r.value=!1),class:"flex-1 py-3 text-zinc-500 bg-white hover:bg-zinc-50 border border-zinc-200 font-bold text-sm rounded-xl transition-colors"},"  "),c.value&&!ee(l.value,c.value)?(u(),v("button",{key:0,onClick:pe,class:"flex-1 py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg hover:shadow-xl"},"  ")):c.value?(u(),v("button",g1,"  ")):D("",!0)])])])):D("",!0),s("div",{class:J(["absolute right-0 top-0 bottom-0 pb-[env(safe-area-inset-bottom)] bg-white border-l border-zinc-100 shadow-2xl transition-transform duration-300 transform w-80 z-40 flex flex-col",n.value?"translate-x-0":"translate-x-full sm:translate-x-0"])},[s("div",m1,[s("div",h1,[g[19]||(g[19]=s("span",{class:"font-bold text-xs text-zinc-500 uppercase tracking-widest"},"Directory",-1)),s("button",{onClick:g[6]||(g[6]=x=>n.value=!1),class:"p-2 rounded-full hover:bg-zinc-100"},[...g[18]||(g[18]=[s("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),s("div",y1,[s("h3",w1,[g[20]||(g[20]=s("span",null," (ALL)",-1)),s("span",k1,M(de.value.length),1)]),s("div",_1,[(u(!0),v(ae,null,xe(de.value,x=>(u(),v("div",{key:x.id,class:"flex items-center justify-between group"},[s("div",{class:"flex items-center gap-3 overflow-hidden cursor-pointer",onClick:H=>ne(x.id)},[s("img",{src:x.avatar,class:"w-10 h-10 rounded-full border border-zinc-100 object-cover shadow-sm transition-transform group-hover:scale-105"},null,8,C1),s("span",z1,M(q(x)),1)],8,$1),s("button",{onClick:H=>ne(x.id),class:"w-8 h-8 shrink-0 rounded-full border border-zinc-200 hover:border-black hover:bg-black hover:text-white flex items-center justify-center transition-all shadow-sm active:scale-90 opacity-0 group-hover:opacity-100",title:""},[...g[21]||(g[21]=[s("span",{class:"material-symbols-outlined text-[16px]"},"all_inclusive",-1)])],8,S1)]))),128))])]),g[22]||(g[22]=s("div",{class:"p-4 border-t border-zinc-50 bg-zinc-50/50"},[s("p",{class:"text-[10px] text-zinc-400 leading-relaxed text-center font-medium"},[_s(" "),s("br"),_s("   ")])],-1))])],2)]))}},A1=Ke(I1,[["__scopeId","data-v-6fb1aa12"]]),M1={class:"h-full flex flex-col bg-white overflow-hidden relative"},T1={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},j1={class:"flex items-center gap-3"},E1={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},O1={class:"flex items-center gap-2"},P1={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},N1={key:0},R1={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},L1=["onClick"],D1={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-110 transition-transform mb-2"},B1={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},F1={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},V1={key:0,class:"w-3 h-3 bg-black rounded-full"},U1={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},K1={class:"mb-8 flex items-end justify-between border-b border-zinc-50 pb-4"},W1={class:"flex-1 mr-8"},H1=["value"],G1={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-3 gap-y-8"},q1=["onClick"],Q1=["src"],J1={key:0,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},Y1={key:0,class:"w-3 h-3 bg-black rounded-full"},X1={key:1,class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},Z1={class:"text-center px-1"},eh={class:"text-[11px] font-medium text-zinc-600 truncate leading-tight"},th={key:0,class:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40 animate-in slide-in-from-bottom-4 duration-200"},sh={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},nh={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},oh={class:"grid grid-cols-2 gap-3"},ah={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},ih={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-2xl p-2"},rh=["onClick"],lh={key:0,class:"material-symbols-outlined text-sm"},ch={key:0,class:"text-center py-4 text-zinc-400 text-xs"},dh={class:"grid grid-cols-2 gap-3"},uh=["disabled"],fh={class:"bg-white w-[420px] max-w-full rounded-[32px] shadow-2xl flex flex-col gap-6 p-8 max-h-[85vh] animate-in zoom-in-95 duration-300 transform transition-all"},ph={class:"text-center mb-8"},vh={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},bh={class:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-6"},xh={class:"flex items-center justify-center w-full h-32 border border-dashed border-zinc-200 rounded-2xl cursor-pointer hover:border-black hover:bg-zinc-50 transition-all group"},gh={class:"mt-8 grid grid-cols-2 gap-3"},mh=["disabled"],hh={__name:"StickerLibrary",emits:["back"],setup(e,{emit:t}){const n=N(null),o=N(!1),a=N(""),i=N(!1),r=N(""),l=N(!1),c=N(!1),f=N(new Set),d=N(!1),p=N(""),h=N(null),I=me(()=>S.stickerCategories),R=async()=>{a.value.trim()&&(await ki(a.value.trim(),""),a.value="",o.value=!1)},T=j=>{if(c.value){E(j.id);return}n.value=j,c.value=!1,f.value=new Set},B=async()=>{confirm("")&&(await _i(n.value.id),n.value=null)},w=async j=>{const g=j.target.value.trim();g&&g!==n.value.name&&await Hd(n.value.id,{name:g})},C=me(()=>n.value?Zs(n.value.id):[]),z=async()=>{if(!r.value.trim())return;l.value=!0;const j=r.value.split(`
`);for(const g of j){const x=g.split(/:(.+)/);let H="sticker",W=g.trim();x.length>1&&(H=x[0].trim(),W=x[1].trim()),W&&await Hn(n.value.id,W,H)}l.value=!1,r.value="",i.value=!1},A=async j=>{const g=j.target.files;if(!(!g||g.length===0)){l.value=!0;for(const x of g)if(x.type.startsWith("image/")){const H=new FileReader;await new Promise(W=>{H.onload=async $=>{const O=$.target.result,be=x.name.replace(/\.[^/.]+$/,"");await Hn(n.value.id,O,be),W()},H.readAsDataURL(x)})}l.value=!1,i.value=!1}},E=j=>{f.value.has(j)?f.value.delete(j):f.value.add(j)},G=()=>{const j=n.value?C.value:I.value;f.value.size===j.length?f.value.clear():j.forEach(g=>f.value.add(g.id))},ne=async()=>{if(f.value.size===0)return;const j=f.value.size,g=n.value?"":"";if(confirm(` ${j} ${g}`)){for(const x of f.value)n.value?await ia(x):await _i(x);f.value.clear(),n.value||(c.value=!1)}},pe=()=>{f.value.size!==0&&(d.value=!0,p.value="")},ee=async()=>{if(p.value){for(const j of f.value){const g=S.stickers.find(x=>x.id===j);g&&(await ia(j),await Hn(p.value,g.url,g.keyword))}f.value.clear(),c.value=!1,d.value=!1,n.value=null}},de=()=>{if(f.value.size===0)return;const j={version:1,packs:[]};for(const W of f.value){const $=I.value.find(O=>O.id===W);if($){const O=Zs(W);j.packs.push({name:$.name,stickers:O.map(be=>({keyword:be.keyword,url:be.url}))})}}const g=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),x=URL.createObjectURL(g),H=document.createElement("a");H.href=x,H.download=`Roche_stickers_export_${Date.now()}.json`,H.click(),URL.revokeObjectURL(x),f.value.clear(),c.value=!1},ve=()=>{h.value.click()},q=async j=>{const g=j.target.files[0];if(!g)return;const x=new FileReader;x.onload=async H=>{try{const W=JSON.parse(H.target.result),$=W.packs||(W.name?[W]:[]);if($.length>0){let O=0;for(const be of $)if(be.name&&Array.isArray(be.stickers)){const et=await ki(be.name+" (Import)","");for(const ce of be.stickers)await Hn(et.id,ce.url,ce.keyword);O++}alert(`Successfully imported ${O} packs.`)}else alert("Invalid sticker pack format.")}catch(W){console.error(W),alert("Failed to parse sticker pack.")}j.target.value=""},x.readAsText(g)};return(j,g)=>(u(),v("div",M1,[s("div",T1,[s("div",j1,[s("button",{onClick:g[0]||(g[0]=x=>n.value?n.value=null:j.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...g[14]||(g[14]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),s("span",E1,M(n.value?n.value.name:"Sticker Packs"),1)]),s("div",O1,[!n.value&&!c.value?(u(),v(ae,{key:0},[s("button",{onClick:ve,class:"text-[10px] font-bold uppercase tracking-widest px-4 py-2 hover:bg-zinc-50 rounded-full border border-zinc-100 transition-colors flex items-center gap-2"},[...g[15]||(g[15]=[s("span",{class:"material-symbols-outlined text-[16px]"},"download",-1),s("span",null,"Import",-1)])]),s("input",{ref_key:"fileInputRef",ref:h,type:"file",accept:".json",class:"hidden",onChange:q},null,544),s("button",{onClick:g[1]||(g[1]=x=>c.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Packs"},[...g[16]||(g[16]=[s("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64)):c.value?(u(),v(ae,{key:1},[s("button",{onClick:G,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),s("button",{onClick:g[2]||(g[2]=x=>{c.value=!1,f.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-red-500"},"Cancel")],64)):(u(),v("button",{key:2,onClick:g[3]||(g[3]=x=>c.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Stickers"},[...g[17]||(g[17]=[s("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])]))])]),s("div",P1,[n.value?(u(),v("div",U1,[s("div",K1,[s("div",W1,[s("input",{value:n.value.name,onChange:w,class:"text-3xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0",placeholder:"Pack Name"},null,40,H1)]),s("button",{onClick:B,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors",title:"Delete Pack"},[...g[19]||(g[19]=[s("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),s("div",G1,[(u(!0),v(ae,null,xe(C.value,x=>(u(),v("div",{key:x.id,class:"relative group flex flex-col gap-2",onClick:H=>c.value?E(x.id):null},[s("div",{class:J(["aspect-square bg-zinc-50 rounded-2xl overflow-hidden border transition-all cursor-pointer relative",f.value.has(x.id)?"border-black ring-2 ring-black ring-offset-2":"border-zinc-50 hover:border-zinc-200"])},[s("img",{src:x.url,class:"w-full h-full object-cover"},null,8,Q1),c.value?(u(),v("div",J1,[f.value.has(x.id)?(u(),v("div",Y1)):D("",!0)])):(u(),v("div",X1,[...g[20]||(g[20]=[s("span",{class:"material-symbols-outlined text-white"},"visibility",-1)])]))],2),s("div",Z1,[s("p",eh,M(x.keyword),1)])],8,q1))),128)),c.value?D("",!0):(u(),v("button",{key:0,onClick:g[5]||(g[5]=x=>i.value=!0),class:"aspect-square rounded-2xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-1"},[...g[21]||(g[21]=[s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"add",-1),s("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"Add",-1)])]))])])):(u(),v("div",N1,[s("div",R1,[(u(!0),v(ae,null,xe(I.value,x=>(u(),v("div",{key:x.id,class:J(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border-2",f.value.has(x.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:H=>T(x)},[s("span",D1,M(x.name),1),s("div",B1,M(Ne(Zs)(x.id).length)+" stickers",1),c.value?(u(),v("div",F1,[f.value.has(x.id)?(u(),v("div",V1)):D("",!0)])):D("",!0)],10,L1))),128)),c.value?D("",!0):(u(),v("button",{key:0,onClick:g[4]||(g[4]=x=>o.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...g[18]||(g[18]=[s("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2"},"add",-1),s("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))])]))]),c.value&&f.value.size>0?(u(),v("div",th,[s("span",sh,M(f.value.size)+" Selected",1),g[25]||(g[25]=s("div",{class:"h-4 w-px bg-white/20"},null,-1)),n.value?(u(),v("button",{key:1,onClick:pe,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...g[23]||(g[23]=[s("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),s("span",{class:"text-[11px] font-bold"},"Move",-1)])])):(u(),v("button",{key:0,onClick:de,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...g[22]||(g[22]=[s("span",{class:"material-symbols-outlined text-[18px]"},"ios_share",-1),s("span",{class:"text-[11px] font-bold"},"Export Items",-1)])])),g[26]||(g[26]=s("div",{class:"h-4 w-px bg-white/20"},null,-1)),s("button",{onClick:ne,class:"flex items-center gap-2 hover:text-red-300 transition-colors"},[...g[24]||(g[24]=[s("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1),s("span",{class:"text-[11px] font-bold"},"Delete",-1)])])])):D("",!0),(u(),ke(At,{to:"body"},[o.value?(u(),v("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:g[8]||(g[8]=Le(x=>o.value=!1,["self"]))},[s("div",nh,[g[27]||(g[27]=s("div",{class:"text-center"},[s("h3",{class:"font-serif italic text-2xl mb-1"},"New Sticker Pack"),s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new collection")],-1)),se(s("input",{"onUpdate:modelValue":g[6]||(g[6]=x=>a.value=x),placeholder:"Name your pack...",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:Us(R,["enter"])},null,544),[[re,a.value]]),s("div",oh,[s("button",{onClick:g[7]||(g[7]=x=>o.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),s("button",{onClick:R,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):D("",!0)])),(u(),ke(At,{to:"body"},[d.value?(u(),v("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:g[10]||(g[10]=Le(x=>d.value=!1,["self"]))},[s("div",ah,[g[28]||(g[28]=s("div",{class:"text-center"},[s("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),s("div",ih,[(u(!0),v(ae,null,xe(I.value.filter(x=>x.id!==n.value.id),x=>(u(),v("button",{key:x.id,onClick:H=>p.value=x.id,class:J(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",p.value===x.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[s("span",null,M(x.name),1),p.value===x.id?(u(),v("span",lh,"check")):D("",!0)],10,rh))),128)),I.value.length<=1?(u(),v("div",ch,"No other packs available")):D("",!0)]),s("div",dh,[s("button",{onClick:g[9]||(g[9]=x=>d.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),s("button",{onClick:ee,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!p.value}," Move ",8,uh)])])])):D("",!0)])),(u(),ke(At,{to:"body"},[i.value?(u(),v("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:g[13]||(g[13]=Le(x=>i.value=!1,["self"]))},[s("div",fh,[s("div",ph,[g[29]||(g[29]=s("h3",{class:"font-serif italic text-2xl mb-1"},"Add Stickers",-1)),s("p",vh,M(n.value.name),1)]),s("div",bh,[s("div",null,[s("label",xh,[g[30]||(g[30]=s("div",{class:"flex flex-col items-center gap-2"},[s("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-white group-hover:shadow-md transition-all"},[s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black"},"cloud_upload")]),s("span",{class:"text-[10px] font-bold text-zinc-400 group-hover:text-black uppercase tracking-widest"},"Upload Images")],-1)),s("input",{type:"file",class:"hidden",multiple:"",accept:"image/*",onChange:A},null,32)])]),g[32]||(g[32]=s("div",{class:"flex items-center gap-4"},[s("div",{class:"h-px bg-zinc-100 flex-1"}),s("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"OR"),s("div",{class:"h-px bg-zinc-100 flex-1"})],-1)),s("div",null,[g[31]||(g[31]=s("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 block"},"Batch Import URLs",-1)),se(s("textarea",{"onUpdate:modelValue":g[11]||(g[11]=x=>r.value=x),rows:"4",class:"w-full bg-zinc-50 rounded-2xl p-4 text-xs font-mono border-none focus:ring-1 focus:ring-black resize-none placeholder:text-zinc-300 outline-none",placeholder:`happy:http://example.com/happy.jpg
sad:http://example.com/sad.jpg`},null,512),[[re,r.value]])])]),s("div",gh,[s("button",{onClick:g[12]||(g[12]=x=>i.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),s("button",{onClick:z,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:l.value},M(l.value?"Processing...":"Confirm"),9,mh)])])])):D("",!0)]))]))}},yh={class:"h-full flex flex-col bg-white overflow-hidden relative"},wh={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center px-6 shrink-0 bg-white/95 backdrop-blur z-20"},kh={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},_h={class:"w-full aspect-[1.586] bg-black rounded-[24px] p-8 text-white flex flex-col justify-between shadow-2xl relative overflow-hidden mb-8 group"},$h={class:"relative z-10"},Ch={class:"font-serif text-4xl font-bold tracking-tight"},zh={class:"grid grid-cols-2 gap-4 mb-8"},Sh={class:"flex flex-col"},Ih={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Ah={class:"text-xs text-red-500 text-center h-4 mb-6"},Mh={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Th={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},jh={key:0},Eh={key:1,class:"text-center text-red-500 text-xs mb-4"},Oh={class:"text-xs text-red-500 text-center h-4 mb-6"},Ph={class:"grid grid-cols-2 gap-3"},Nh=["disabled"],Rh={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Lh={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},Dh={class:"space-y-4 mb-6"},Bh={class:"text-xs text-red-500 text-center h-4 mb-6"},Fh={class:"bg-white w-full max-w-md rounded-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-300"},Vh={class:"px-6 py-4 border-b border-zinc-50 flex items-center gap-4 bg-zinc-50/50"},Uh={class:"relative group"},Kh={class:"flex-1 flex bg-zinc-100 p-1 rounded-lg"},Wh={class:"flex-1 overflow-y-auto custom-scrollbar p-0"},Hh={key:0,class:"flex flex-col items-center justify-center h-64 text-zinc-300 gap-2"},Gh={key:1,class:"divide-y divide-zinc-50"},qh={class:"flex flex-col"},Qh={class:"font-bold text-sm"},Jh={class:"text-[10px] text-zinc-400 mt-1"},Yh={__name:"Wallet",emits:["back"],setup(e,{emit:t}){const n=N(null),o=N(""),a=N(""),i=N(""),r=N(""),l=me(()=>S.wallet.balance.toFixed(2)),c=me(()=>S.wallet.hasPassword),f=me(()=>S.wallet.transactions),d=new Date,p=N(`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`),h=N("all"),I=me(()=>f.value.filter(A=>{const E=new Date(A.timestamp),ne=`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`===p.value;let pe=!0;return h.value==="deposit"&&(pe=A.type==="deposit"),h.value==="withdraw"&&(pe=A.type==="withdraw"),ne&&pe})),R=A=>{n.value=A,o.value="",a.value="",i.value="",r.value=""},T=()=>{n.value=null},B=()=>{const A=parseFloat(o.value);if(!A||A<=0){r.value="Please enter a valid amount";return}oa("deposit",A,"Account Deposit"),T()},w=()=>{const A=parseFloat(o.value);if(!A||A<=0){r.value="Please enter a valid amount";return}if(A>S.wallet.balance){r.value="Insufficient balance";return}if(!c.value){r.value="Please set a payment password first";return}if(!Vr(a.value)){r.value="Incorrect password";return}oa("withdraw",A,"Withdrawal"),T()},C=()=>{if(a.value.length!==6||isNaN(a.value)){r.value="Password must be 6 digits";return}if(a.value!==i.value){r.value="Passwords do not match";return}Od(a.value),T()},z=A=>new Date(A).toLocaleString();return(A,E)=>(u(),v("div",yh,[s("div",wh,[s("button",{onClick:E[0]||(E[0]=G=>A.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2 mr-2"},[...E[14]||(E[14]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),E[15]||(E[15]=s("span",{class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},"My Wallet",-1))]),s("div",kh,[s("div",_h,[E[17]||(E[17]=s("div",{class:"absolute -right-20 -top-20 w-64 h-64 bg-zinc-800/30 rounded-full blur-3xl group-hover:bg-zinc-700/30 transition-colors duration-500"},null,-1)),E[18]||(E[18]=s("div",{class:"flex items-center justify-between relative z-10"},[s("span",{class:"font-serif italic text-lg opacity-80"},"Noir Card"),s("span",{class:"material-symbols-outlined opacity-50"},"contactless")],-1)),s("div",$h,[E[16]||(E[16]=s("div",{class:"text-[11px] uppercase tracking-[0.2em] opacity-60 mb-1"},"Total Balance",-1)),s("div",Ch," "+M(l.value),1)]),E[19]||(E[19]=s("div",{class:"flex items-center justify-between text-[10px] uppercase tracking-widest opacity-60 relative z-10"},[s("span",null,"**** 8848"),s("span",null,"Noir Inc.")],-1))]),s("div",zh,[s("button",{onClick:E[1]||(E[1]=G=>R("recharge")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...E[20]||(E[20]=[s("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"add_card",-1),s("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Top Up",-1)])]),s("button",{onClick:E[2]||(E[2]=G=>R("withdraw")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...E[21]||(E[21]=[s("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"payments",-1),s("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Withdraw",-1)])])]),s("div",Sh,[s("button",{onClick:E[3]||(E[3]=G=>R("history")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...E[22]||(E[22]=[s("div",{class:"flex items-center gap-4"},[s("span",{class:"material-symbols-outlined text-zinc-400"},"receipt_long"),s("span",{class:"text-[15px] font-medium"},"Transaction History")],-1),s("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])]),s("button",{onClick:E[4]||(E[4]=G=>R("password")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...E[23]||(E[23]=[s("div",{class:"flex items-center gap-4"},[s("span",{class:"material-symbols-outlined text-zinc-400"},"lock"),s("span",{class:"text-[15px] font-medium"},"Payment Security")],-1),s("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])])])]),(u(),ke(At,{to:"body"},[n.value==="recharge"?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Le(T,["self"])},[s("div",Ih,[E[24]||(E[24]=s("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Top Up",-1)),E[25]||(E[25]=s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},"Add funds to wallet",-1)),se(s("input",{"onUpdate:modelValue":E[5]||(E[5]=G=>o.value=G),type:"number",placeholder:"0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-2 bg-transparent",autofocus:""},null,512),[[re,o.value]]),s("div",Ah,M(r.value),1),s("div",{class:"grid grid-cols-2 gap-3"},[s("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:B,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])])])):D("",!0)])),(u(),ke(At,{to:"body"},[n.value==="withdraw"?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Le(T,["self"])},[s("div",Mh,[E[27]||(E[27]=s("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Withdraw",-1)),s("p",Th,"Available: "+M(l.value),1),se(s("input",{"onUpdate:modelValue":E[6]||(E[6]=G=>o.value=G),type:"number",placeholder:"Amount",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-6 bg-transparent"},null,512),[[re,o.value]]),c.value?(u(),v("div",jh,[E[26]||(E[26]=s("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 mb-2"},"Payment Password",-1)),se(s("input",{"onUpdate:modelValue":E[7]||(E[7]=G=>a.value=G),type:"password",maxlength:"6",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black mb-2"},null,512),[[re,a.value]])])):(u(),v("div",Eh,"Please set password first")),s("div",Oh,M(r.value),1),s("div",Ph,[s("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:w,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg",disabled:!c.value},"Confirm",8,Nh)])])])):D("",!0)])),(u(),ke(At,{to:"body"},[n.value==="password"?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Le(T,["self"])},[s("div",Rh,[E[28]||(E[28]=s("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Security",-1)),s("p",Lh,M(c.value?"Change Password":"Set Payment Password"),1),s("div",Dh,[s("div",null,[se(s("input",{"onUpdate:modelValue":E[8]||(E[8]=G=>a.value=G),type:"password",maxlength:"6",placeholder:"New Password (6 digits)",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[re,a.value]])]),s("div",null,[se(s("input",{"onUpdate:modelValue":E[9]||(E[9]=G=>i.value=G),type:"password",maxlength:"6",placeholder:"Confirm Password",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[re,i.value]])])]),s("div",Bh,M(r.value),1),s("div",{class:"grid grid-cols-2 gap-3"},[s("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:C,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Save")])])])):D("",!0)])),(u(),ke(At,{to:"body"},[n.value==="history"?(u(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Le(T,["self"])},[s("div",Fh,[s("div",{class:"p-6 border-b border-zinc-50 flex items-center justify-between shrink-0"},[E[30]||(E[30]=s("h3",{class:"font-serif italic text-2xl"},"Transactions",-1)),s("button",{onClick:T,class:"w-8 h-8 flex items-center justify-center bg-zinc-50 rounded-full hover:bg-zinc-100"},[...E[29]||(E[29]=[s("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),s("div",Vh,[s("div",Uh,[se(s("input",{"onUpdate:modelValue":E[10]||(E[10]=G=>p.value=G),type:"month",class:"pl-8 pr-3 py-1.5 rounded-lg bg-white border border-zinc-200 text-xs font-bold uppercase tracking-wider focus:outline-none focus:border-black cursor-pointer w-32"},null,512),[[re,p.value]]),E[31]||(E[31]=s("span",{class:"material-symbols-outlined text-[16px] absolute left-2 top-1.5 text-zinc-400 pointer-events-none"},"calendar_month",-1))]),s("div",Kh,[s("button",{onClick:E[11]||(E[11]=G=>h.value="all"),class:J(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",h.value==="all"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-black"])},"All",2),s("button",{onClick:E[12]||(E[12]=G=>h.value="deposit"),class:J(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",h.value==="deposit"?"bg-white shadow-sm text-green-600":"text-zinc-400 hover:text-black"])},"Income",2),s("button",{onClick:E[13]||(E[13]=G=>h.value="withdraw"),class:J(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",h.value==="withdraw"?"bg-white shadow-sm text-red-600":"text-zinc-400 hover:text-black"])},"Expense",2)])]),s("div",Wh,[I.value.length===0?(u(),v("div",Hh,[...E[32]||(E[32]=[s("span",{class:"material-symbols-outlined text-4xl"},"event_busy",-1),s("span",{class:"text-[10px] uppercase tracking-widest"},"No matching records",-1)])])):(u(),v("div",Gh,[(u(!0),v(ae,null,xe(I.value,G=>(u(),v("div",{key:G.id,class:"flex items-center justify-between p-6 hover:bg-zinc-50 transition-colors"},[s("div",qh,[s("span",Qh,M(G.title),1),s("span",Jh,M(z(G.timestamp)),1)]),s("span",{class:J(["font-mono font-bold",G.type==="deposit"?"text-green-600":"text-black"])},M(G.type==="deposit"?"+":"-")+" "+M(G.amount.toFixed(2)),3)]))),128))]))])])])):D("",!0)]))]))}},Xh={class:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100 pb-[env(safe-area-inset-bottom)] z-[60]"},Zh={class:"max-w-7xl mx-auto flex items-center justify-around h-14 px-4 w-full"},ey=["onClick"],ty={key:0,class:"w-10 h-10 bg-zinc-50 rounded-lg text-black hover:bg-zinc-100 flex items-center justify-center"},sy={__name:"Navigation",props:["activeTab"],emits:["change"],setup(e,{emit:t}){const n=t,o=[{id:"feed",icon:"home"},{id:"inbox",icon:"mail"},{id:"compose",icon:"add",isAction:!0},{id:"activity",icon:"favorite"},{id:"profile",icon:"person"}],a=i=>{n("change",i)};return(i,r)=>(u(),v("nav",Xh,[s("div",Zh,[(u(),v(ae,null,xe(o,l=>s("button",{key:l.id,onClick:c=>a(l.id),class:J(["flex items-center justify-center w-12 transition-colors",[l.isAction?"":e.activeTab===l.id?"text-black":"text-zinc-400 hover:text-black"]])},[l.isAction?(u(),v("div",ty,[...r[0]||(r[0]=[s("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])):(u(),v("span",{key:1,class:J(["material-symbols-outlined text-[26px]",{"active-icon":e.activeTab===l.id}])},M(l.icon),3))],10,ey)),64))])]))}},ny=Ke(sy,[["__scopeId","data-v-d58efd91"]]),oy={class:"noir-app-container w-full h-full bg-white relative font-sans text-black overflow-hidden flex flex-col"},ay={key:10,class:"flex-1 flex items-center justify-center h-full"},iy={__name:"NoirApp",emits:["close"],setup(e,{emit:t}){const n=N("feed"),o=N(null);jt(()=>{Pd()});const a=(r,l=null)=>{o.value=l,n.value=r},i=r=>{n.value=r};return(r,l)=>(u(),v("div",oy,[n.value==="feed"?(u(),ke(su,{key:0,onClose:l[0]||(l[0]=c=>r.$emit("close")),onNavigate:a})):D("",!0),n.value==="post"?(u(),ke(R0,{key:1,postId:o.value?.id,onBack:l[1]||(l[1]=c=>a("feed"))},null,8,["postId"])):D("",!0),n.value==="inbox"?(u(),ke(xf,{key:2,onNavigate:a,onClose:l[2]||(l[2]=c=>r.$emit("close"))})):D("",!0),n.value==="chat"?(u(),ke(n0,{key:3,chatId:o.value?.id,onBack:l[3]||(l[3]=c=>a("inbox")),onNavigate:a},null,8,["chatId"])):D("",!0),n.value==="chat-settings"?(u(),ke(cg,{key:4,chatId:o.value?.id,onBack:l[4]||(l[4]=c=>a("chat",{id:o.value?.id})),onNavigate:a},null,8,["chatId"])):D("",!0),n.value==="chat-settings-identity"?(u(),ke(rm,{key:5,chatId:o.value?.id,onBack:l[5]||(l[5]=c=>a("chat-settings",{id:o.value?.id}))},null,8,["chatId"])):D("",!0),n.value==="worldbook-selector"?(u(),ke(Mm,{key:6,chatId:o.value?.id,onBack:l[6]||(l[6]=c=>a("chat-settings",{id:o.value?.id}))},null,8,["chatId"])):D("",!0),n.value==="wallet"?(u(),ke(Yh,{key:7,onBack:l[7]||(l[7]=c=>a("profile"))})):D("",!0),n.value==="profile"?(u(),ke(z0,{key:8,onBack:l[8]||(l[8]=c=>r.$emit("close")),onNavigate:a})):D("",!0),n.value==="compose"?(u(),ke(j0,{key:9,onClose:l[9]||(l[9]=c=>a("feed"))})):D("",!0),n.value==="activity"?(u(),v("div",ay,[...l[25]||(l[25]=[s("span",{class:"text-zinc-400 font-serif italic text-xl"},"Coming soon...",-1)])])):D("",!0),n.value==="persona-archive"?(u(),ke(Q0,{key:11,onBack:l[10]||(l[10]=c=>a("profile")),onAdd:l[11]||(l[11]=c=>a("persona-edit")),onEdit:l[12]||(l[12]=c=>a("persona-edit",{id:c})),onSelect:l[13]||(l[13]=c=>a("profile"))})):D("",!0),n.value==="persona-edit"?(u(),ke(lb,{key:12,personaId:o.value?.id,onBack:l[14]||(l[14]=c=>a("persona-archive")),onSave:l[15]||(l[15]=c=>a("persona-archive"))},null,8,["personaId"])):D("",!0),n.value==="following"?(u(),ke(kb,{key:13,onBack:l[16]||(l[16]=c=>a("feed")),onAdd:l[17]||(l[17]=c=>a("contact-edit")),onEdit:l[18]||(l[18]=c=>a("contact-edit",{id:c}))})):D("",!0),n.value==="contact-edit"?(u(),ke(zi,{key:14,contactId:o.value?.id,onBack:l[19]||(l[19]=c=>a("following")),onSave:l[20]||(l[20]=c=>a("following"))},null,8,["contactId"])):D("",!0),n.value==="contact-edit"?(u(),ke(zi,{key:15,contactId:o.value?.id,onBack:l[21]||(l[21]=c=>a("following")),onSave:l[22]||(l[22]=c=>a("following"))},null,8,["contactId"])):D("",!0),n.value==="relationship-network"?(u(),ke(A1,{key:16,myPersonaId:o.value?.id,onBack:l[23]||(l[23]=c=>a("profile"))},null,8,["myPersonaId"])):D("",!0),n.value==="sticker-library"?(u(),ke(hh,{key:17,onBack:l[24]||(l[24]=c=>a("profile"))})):D("",!0),["feed","inbox","profile","activity"].includes(n.value)?(u(),ke(ny,{key:18,activeTab:n.value,onChange:i},null,8,["activeTab"])):D("",!0)]))}},ry=Ke(iy,[["__scopeId","data-v-d86542c4"]]),ly={class:"h-full flex flex-col bg-background-light dark:bg-background-dark overflow-y-auto"},cy={class:"sticky top-0 z-50 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md border-b border-neutral-100 dark:border-neutral-900 px-6 pt-[env(safe-area-inset-top)] pb-3 flex items-center justify-between"},dy={class:"w-full pb-12"},uy={class:"divide-y divide-neutral-100 dark:divide-neutral-900"},fy={__name:"SettingsHome",emits:["close","navigate"],setup(e,{emit:t}){return(n,o)=>(u(),v("div",ly,[s("nav",cy,[s("button",{onClick:o[0]||(o[0]=a=>n.$emit("close")),class:"-ml-2 size-10 flex items-center justify-center hover:bg-neutral-50 rounded-full transition-colors"},[...o[2]||(o[2]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),o[3]||(o[3]=s("h1",{class:"font-display text-lg tracking-[0.2em] uppercase font-bold"},"Settings",-1)),o[4]||(o[4]=s("div",{class:"w-8"},null,-1))]),s("main",dy,[o[7]||(o[7]=s("header",{class:"px-6 py-10 border-b border-neutral-100 dark:border-neutral-900"},[s("span",{class:"text-[10px] uppercase tracking-[0.3em] font-medium text-neutral-400 dark:text-neutral-500 block mb-2"},"Preferences"),s("h2",{class:"text-4xl font-display italic leading-tight"},"Curation & Control")],-1)),s("section",uy,[s("button",{onClick:o[1]||(o[1]=a=>n.$emit("navigate","api-setup")),class:"w-full px-6 py-8 flex items-center justify-between group transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 text-left"},[...o[5]||(o[5]=[s("div",{class:"text-left"},[s("div",{class:"flex items-center gap-3 mb-1"},[s("span",{class:"text-xs uppercase tracking-[0.15em] font-bold"},"API ")])],-1),s("span",{class:"material-symbols-outlined text-lg opacity-30 group-hover:opacity-100 transition-opacity"},"chevron_right",-1)])]),o[6]||(o[6]=dt('<button class="w-full px-6 py-6 flex items-center justify-between group transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 text-left" data-v-dead9db9><span class="text-xs uppercase tracking-[0.15em] font-medium" data-v-dead9db9></span><div class="flex items-center gap-3" data-v-dead9db9><span class="text-[10px] font-mono opacity-40 uppercase" data-v-dead9db9></span><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>chevron_right</span></div></button><button class="w-full px-6 py-6 flex items-center justify-between group transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 text-left" data-v-dead9db9><span class="text-xs uppercase tracking-[0.15em] font-medium" data-v-dead9db9></span><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>chevron_right</span></button><button class="w-full px-6 py-6 flex items-center justify-between group transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 text-left" data-v-dead9db9><span class="text-xs uppercase tracking-[0.15em] font-medium" data-v-dead9db9></span><div class="flex items-center gap-3" data-v-dead9db9><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>lock</span><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>chevron_right</span></div></button><button class="w-full px-6 py-6 flex items-center justify-between group transition-colors hover:bg-neutral-50 dark:hover:bg-neutral-900/50 text-left" data-v-dead9db9><span class="text-xs uppercase tracking-[0.15em] font-medium" data-v-dead9db9></span><div class="flex items-center gap-3" data-v-dead9db9><div class="w-2 h-2 bg-neutral-200 dark:bg-neutral-800 rounded-full" data-v-dead9db9></div><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>chevron_right</span></div></button>',4))]),o[8]||(o[8]=dt('<section class="mt-12" data-v-dead9db9><div class="px-6 mb-4" data-v-dead9db9><h3 class="text-[10px] uppercase tracking-[0.3em] font-bold text-neutral-400" data-v-dead9db9></h3></div><div class="divide-y divide-neutral-100 dark:divide-neutral-900 border-t border-neutral-100 dark:border-neutral-900" data-v-dead9db9><button class="w-full px-6 py-5 flex items-center justify-between group hover:bg-neutral-50 dark:hover:bg-neutral-900/50 transition-colors text-left" data-v-dead9db9><span class="text-xs uppercase tracking-widest font-medium opacity-60" data-v-dead9db9></span><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>chevron_right</span></button><button class="w-full px-6 py-5 flex items-center justify-between group hover:bg-neutral-50 dark:hover:bg-neutral-900/50 transition-colors text-left" data-v-dead9db9><span class="text-xs uppercase tracking-widest font-medium opacity-60" data-v-dead9db9></span><span class="material-symbols-outlined text-lg opacity-30" data-v-dead9db9>chevron_right</span></button><div class="px-6 py-10 text-center" data-v-dead9db9><p class="text-[9px] font-mono uppercase tracking-[0.4em] text-neutral-400 italic" data-v-dead9db9>Settings  v2.4.0 (Build 992)</p></div></div></section><section class="px-6 mt-4" data-v-dead9db9><button class="w-full border border-neutral-200 dark:border-neutral-800 py-4 text-[10px] uppercase tracking-[0.2em] font-bold hover:bg-black hover:text-white dark:hover:bg-white dark:hover:text-black transition-all" data-v-dead9db9>  </button></section>',2))])]))}},py=Ke(fy,[["__scopeId","data-v-dead9db9"]]),vy={class:"h-full flex flex-col bg-background-light dark:bg-background-dark overflow-y-auto w-full relative"},by={class:"sticky top-0 z-50 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md border-b border-neutral-100 dark:border-neutral-900 px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 flex items-center justify-between"},xy={class:"w-full pb-40"},gy={class:"border-b border-neutral-100 dark:border-neutral-900 overflow-x-auto no-scrollbar"},my={class:"flex px-6 space-x-8"},hy=["onClick"],yy={class:"px-6 py-8"},wy={class:"flex items-center justify-between border-b border-neutral-100 dark:border-neutral-900 pb-4"},ky={class:"flex gap-4"},_y={class:"px-6 py-4 mb-8"},$y={class:"flex justify-between items-end mb-4"},Cy={class:"w-full mr-4"},zy={class:"group relative"},Sy={class:"relative w-full"},Iy=["value"],Ay={class:"w-full flex items-center justify-between py-4 border-y border-neutral-100 dark:border-neutral-900 group-hover:border-black dark:group-hover:border-white transition-colors pointer-events-none"},My={class:"text-xs font-mono uppercase tracking-widest text-neutral-600 dark:text-neutral-400"},Ty={class:"px-6 space-y-10"},jy={class:"group"},Ey={class:"group"},Oy={class:"relative"},Py=["type"],Ny={class:"material-symbols-outlined text-lg"},Ry={class:"flex justify-between items-baseline mb-8"},Ly={class:"text-2xl font-display italic"},Dy={class:"flex items-center justify-between"},By={class:"px-6 py-12"},Fy={class:"flex items-center justify-between py-6 border-t border-neutral-100 dark:border-neutral-900"},Vy={class:"flex items-center gap-4"},Uy={key:0,class:"fixed inset-0 z-[60] flex items-center justify-center bg-black/20 backdrop-blur-sm p-6"},Ky={class:"bg-white dark:bg-black p-6 w-full max-w-sm shadow-2xl border border-neutral-100"},Wy={class:"flex justify-end gap-4"},Hy={__name:"ApiSetup",emits:["back"],setup(e,{emit:t}){const n=t,{provider:o,endpoint:a,apiKey:i,model:r,temperature:l,stream:c,modelsList:f,presetState:d,init:p,getPresetById:h,saveCurrentAsPreset:I,deleteCurrentPreset:R,fetchModels:T,commitSettings:B}=Wr(),w=zs({provider:"openai",endpoint:"",apiKey:"",model:"",temperature:.7,stream:!1,currentPresetId:"custom"}),C=N(!1),z=N(!1),A=N(""),E=N(!1);jt(async()=>{await p(),G()});const G=()=>{w.provider=o.value,w.endpoint=a.value,w.apiKey=i.value,w.model=r.value,w.temperature=l.value,w.stream=c.value!==void 0?c.value:!1,w.currentPresetId=d.currentPresetId},ne=async()=>{await B({provider:w.provider,endpoint:w.endpoint,apiKey:w.apiKey,model:w.model,temperature:w.temperature,stream:w.stream,currentPresetId:w.currentPresetId}),n("back")},pe=async()=>{C.value=!0,await T({endpoint:w.endpoint,apiKey:w.apiKey}),C.value=!1},ee=async()=>{if(A.value)try{await I(A.value,w),z.value=!1,A.value="",G()}catch(g){console.error(g),alert(": "+g)}},de=async()=>{confirm("")&&(await R(),G())},ve=g=>{if(g==="custom"){w.currentPresetId="custom";return}const x=h(g);x&&(w.provider=x.provider,w.endpoint=x.endpoint,x.apiKey&&(w.apiKey=x.apiKey),w.model=x.model,w.temperature=x.temperature,w.stream=x.stream!==void 0?x.stream:!1,w.currentPresetId=g)},q=g=>{w.provider=g,g==="gemini"?(w.endpoint="https://generativelanguage.googleapis.com/v1beta/openai/",w.model.includes("gpt")&&(w.model="gemini-1.5-flash")):w.endpoint="https://api.openai.com/v1",w.currentPresetId!=="custom"&&(w.currentPresetId="custom")},j=()=>{E.value=!E.value};return(g,x)=>(u(),v("div",vy,[s("nav",by,[s("button",{onClick:x[0]||(x[0]=H=>g.$emit("back")),class:"-ml-2 size-10 flex items-center justify-center hover:bg-neutral-50 rounded-full transition-colors"},[...x[13]||(x[13]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),x[14]||(x[14]=s("h1",{class:"font-display text-xl tracking-tight"},"API Setup",-1)),x[15]||(x[15]=s("div",{class:"w-8 h-8 flex items-center justify-end"},[s("span",{class:"material-symbols-outlined text-xl text-neutral-400"},"tune")],-1))]),s("main",xy,[s("section",gy,[s("div",my,[(u(!0),v(ae,null,xe(Ne(d).list,H=>(u(),v("button",{key:H.id,onClick:W=>ve(H.id),class:J(["py-4 border-b-2 whitespace-nowrap transition-colors",w.currentPresetId===H.id?"border-black dark:border-white":"border-transparent text-neutral-400"])},[s("span",{class:J(["text-[10px] uppercase tracking-[0.2em] font-medium",{"font-bold":w.currentPresetId===H.id}])},M(H.name),3)],10,hy))),128)),s("button",{onClick:x[1]||(x[1]=H=>ve("custom")),class:J(["py-4 border-b-2 whitespace-nowrap transition-colors",w.currentPresetId==="custom"?"border-black dark:border-white !text-black dark:!text-white":"border-transparent text-neutral-400"])},[...x[16]||(x[16]=[s("span",{class:"text-[10px] uppercase tracking-[0.2em] font-medium"},"Custom",-1)])],2)])]),s("section",yy,[s("div",wy,[x[17]||(x[17]=s("span",{class:"text-[10px] uppercase tracking-[0.2em] font-medium text-neutral-500 dark:text-neutral-400"},"",-1)),s("div",ky,[s("button",{onClick:x[2]||(x[2]=H=>q("openai")),class:J(["text-[10px] uppercase tracking-widest transition-all",w.provider==="openai"?"font-bold border-b border-black dark:border-white":"font-medium text-neutral-400 dark:text-neutral-600"])},"OpenAI",2),s("button",{onClick:x[3]||(x[3]=H=>q("gemini")),class:J(["text-[10px] uppercase tracking-widest transition-all",w.provider==="gemini"?"font-bold border-b border-black dark:border-white":"font-medium text-neutral-400 dark:text-neutral-600"])},"Gemini",2)])])]),s("section",_y,[s("div",$y,[s("div",Cy,[x[18]||(x[18]=s("span",{class:"text-[10px] uppercase tracking-[0.3em] font-bold text-neutral-600 dark:text-neutral-400 block mb-1"},"",-1)),se(s("input",{"onUpdate:modelValue":x[4]||(x[4]=H=>w.model=H),class:"text-3xl font-display italic tracking-tight bg-transparent border-none p-0 pr-10 pl-6 focus:ring-0 w-full placeholder:text-neutral-300",placeholder:""},null,512),[[re,w.model]])]),s("button",{onClick:pe,class:"shrink-0 text-[10px] uppercase tracking-widest font-bold text-neutral-500 flex items-center gap-1 border border-neutral-200 dark:border-neutral-800 px-3 py-1 mb-1 hover:bg-neutral-50 active:scale-95 transition-all"},[x[19]||(x[19]=_s("  ",-1)),s("span",{class:J(["material-symbols-outlined text-xs",{"animate-spin":C.value}])},"sync",2)])]),s("div",zy,[s("div",Sy,[se(s("select",{id:"modelSelect","onUpdate:modelValue":x[5]||(x[5]=H=>w.model=H),class:"appearance-none w-full bg-transparent py-4 border-y border-neutral-100 dark:border-neutral-900 text-transparent absolute inset-0 z-10 cursor-pointer outline-none"},[(u(!0),v(ae,null,xe(Ne(f),H=>(u(),v("option",{key:H,value:H,class:"text-black dark:text-white bg-white dark:bg-black"},M(H),9,Iy))),128))],512),[[nn,w.model]]),s("div",Ay,[s("span",My," ("+M(Ne(f).length)+")",1),x[20]||(x[20]=s("span",{class:"material-symbols-outlined text-lg"},"expand_more",-1))])])])]),s("section",Ty,[s("div",jy,[x[21]||(x[21]=s("label",{class:"text-[10px] uppercase tracking-[0.2em] font-medium text-neutral-500 block mb-2"},"",-1)),se(s("input",{"onUpdate:modelValue":x[6]||(x[6]=H=>w.endpoint=H),class:"w-full bg-transparent border-0 border-b border-neutral-100 dark:border-neutral-900 px-0 py-2 focus:ring-0 focus:border-black dark:focus:border-white transition-colors font-mono text-sm placeholder:text-neutral-300 dark:placeholder:text-neutral-700",type:"text",placeholder:"https://api.openai.com/v1"},null,512),[[re,w.endpoint]])]),s("div",Ey,[x[22]||(x[22]=s("label",{class:"text-[10px] uppercase tracking-[0.2em] font-medium text-neutral-500 block mb-2"},"API  ( Key  , )",-1)),s("div",Oy,[se(s("input",{"onUpdate:modelValue":x[7]||(x[7]=H=>w.apiKey=H),type:E.value?"text":"password",class:"w-full bg-transparent border-0 border-b border-neutral-100 dark:border-neutral-900 px-0 py-2 focus:ring-0 focus:border-black dark:focus:border-white transition-colors font-mono text-sm resize-none text-black dark:text-white",placeholder:"sk-..., sk-..."},null,8,Py),[[wd,w.apiKey]]),s("button",{onClick:j,class:"absolute right-0 top-2 text-neutral-400 hover:text-black dark:hover:text-white transition-colors"},[s("span",Ny,M(E.value?"visibility_off":"visibility"),1)])])]),s("div",null,[s("div",Ry,[x[23]||(x[23]=s("h3",{class:"text-[10px] uppercase tracking-[0.2em] font-medium text-neutral-500"},"",-1)),s("span",Ly,M(w.temperature),1)]),se(s("input",{"onUpdate:modelValue":x[8]||(x[8]=H=>w.temperature=H),class:"w-full",max:"2",min:"0",step:"0.1",type:"range"},null,512),[[re,w.temperature,void 0,{number:!0}]]),x[24]||(x[24]=s("div",{class:"mt-4 flex justify-between text-[9px] font-mono uppercase text-neutral-300 dark:text-neutral-700 tracking-widest"},[s("span",null," (0.0)"),s("span",null," (2.0)")],-1))]),s("div",Dy,[x[25]||(x[25]=s("label",{class:"text-[10px] uppercase tracking-[0.2em] font-medium text-neutral-500"}," (Streaming)",-1)),s("button",{onClick:x[9]||(x[9]=H=>w.stream=!w.stream),class:J(["w-12 h-6 rounded-full relative transition-colors duration-200",w.stream?"bg-black dark:bg-white":"bg-neutral-200 dark:bg-neutral-800"])},[s("div",{class:J(["absolute top-1 left-1 w-4 h-4 rounded-full bg-white dark:bg-black transition-transform duration-200 shadow-sm",w.stream?"translate-x-6":"translate-x-0"])},null,2)],2)])]),s("section",By,[s("div",Fy,[x[26]||(x[26]=s("span",{class:"text-[10px] uppercase tracking-[0.2em] font-medium text-neutral-400"},"Preset Management",-1)),s("div",Vy,[w.currentPresetId!=="custom"?(u(),v("button",{key:0,onClick:de,class:"text-[10px] uppercase tracking-wider font-bold text-neutral-400 hover:text-red-500 transition-colors"},"  ")):D("",!0),s("button",{onClick:x[10]||(x[10]=H=>z.value=!0),class:"text-[10px] uppercase tracking-wider font-bold underline underline-offset-4 hover:opacity-70"},"")])])]),z.value?(u(),v("div",Uy,[s("div",Ky,[x[27]||(x[27]=s("h3",{class:"font-display italic text-2xl mb-4"},"Save Preset",-1)),se(s("input",{"onUpdate:modelValue":x[11]||(x[11]=H=>A.value=H),placeholder:"Preset Name (e.g. Coding)",class:"w-full border-b border-neutral-200 mb-6 py-2 focus:outline-none font-mono text-sm"},null,512),[[re,A.value]]),s("div",Wy,[s("button",{onClick:x[12]||(x[12]=H=>z.value=!1),class:"text-[10px] uppercase font-bold text-neutral-400"},"Cancel"),s("button",{onClick:ee,class:"text-[10px] uppercase font-bold text-black dark:text-white"},"Save")])])])):D("",!0),s("div",{class:"fixed bottom-10 left-0 right-0 px-6 flex justify-center z-50 pointer-events-none"},[s("button",{onClick:ne,class:"bg-black text-white dark:bg-white dark:text-black w-full max-w-xs py-4 px-8 flex items-center justify-between transition-transform active:scale-95 shadow-[0_20px_40px_rgba(0,0,0,0.1)] pointer-events-auto"},[...x[28]||(x[28]=[s("span",{class:"text-[10px] uppercase tracking-[0.3em] font-bold"},"",-1),s("span",{class:"material-symbols-outlined text-lg"},"check",-1)])])])])]))}},Gy=Ke(Hy,[["__scopeId","data-v-0c56b2c6"]]),qy={class:"h-full w-full bg-background-light dark:bg-background-dark text-black dark:text-white font-sans overflow-hidden relative"},Qy={__name:"SettingsApp",emits:["close"],setup(e,{emit:t}){const n=t,o=N("home"),a=r=>{o.value=r},i=()=>{o.value==="home"?n("close"):o.value="home"};return(r,l)=>(u(),v("div",qy,[De(Vs,{name:"slide"},{default:ys(()=>[o.value==="home"?(u(),ke(py,{onClose:l[0]||(l[0]=c=>r.$emit("close")),onNavigate:a,key:"home"})):o.value==="api-setup"?(u(),ke(Gy,{onBack:i,key:"api-setup"})):D("",!0)]),_:1})]))}},Jy=Ke(Qy,[["__scopeId","data-v-49131ef6"]]),Yy={class:"h-full w-full bg-white flex flex-col font-display text-black"},Xy={class:"flex items-center justify-between px-6 py-6 pt-[calc(20px_+_env(safe-area-inset-top))] bg-white z-10"},Zy={class:"flex gap-4"},e2={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar"},t2={class:"mb-8"},s2={class:"relative"},n2=["value"],o2={class:"mb-10"},a2={class:"mb-12"},i2={class:"mb-10"},r2={class:"flex gap-8"},l2={key:0,class:"material-symbols-outlined text-white text-[16px] font-bold"},c2={key:0,class:"material-symbols-outlined text-white text-[16px] font-bold"},d2={key:0,class:"mb-10 animate-fade-in"},u2={class:"mb-10"},f2={class:"flex border border-black h-12"},p2={class:"mb-10 flex items-center justify-between"},v2={__name:"EntryEdit",props:{entryId:{type:String,default:null},initialCategoryId:{type:String,required:!0},initialScope:{type:String,default:"global"}},emits:["back","save"],setup(e,{emit:t}){const n=e,o=t,a=Co(),i=N(""),r=N(""),l=N(n.initialCategoryId),c=N(n.initialScope),f=N(!1),d=N(""),p=N("front"),h=N(4),I=a.getCategories(),R=!n.entryId;jt(()=>{if(!R&&n.entryId){const w=a.getEntry(n.entryId);w&&(i.value=w.title,r.value=w.content,l.value=w.categoryId,c.value=w.scope||"global",f.value=w.isConstant,d.value=w.keywords.join(", "),p.value=w.position,h.value=w.depth)}});const T=()=>{if(!i.value.trim()||!r.value.trim())return;const w={title:i.value,content:r.value,categoryId:l.value,scope:c.value,isConstant:f.value,keywords:f.value?[]:d.value.split(",").map(C=>C.trim()).filter(Boolean),position:p.value,depth:Number(h.value)};R?a.addEntry(w):n.entryId&&a.updateEntry(n.entryId,w),o("save")},B=()=>{!R&&n.entryId&&(a.deleteEntry(n.entryId),o("back"))};return(w,C)=>(u(),v("div",Yy,[s("div",Xy,[s("button",{onClick:C[0]||(C[0]=z=>o("back")),class:"material-symbols-outlined text-[24px]"},"arrow_back"),s("div",Zy,[R?D("",!0):(u(),v("button",{key:0,onClick:B,class:"material-symbols-outlined text-[24px]"},"delete")),C[11]||(C[11]=s("button",{class:"material-symbols-outlined text-[24px]"},"more_horiz",-1))])]),s("div",e2,[s("div",t2,[C[13]||(C[13]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-1 font-bold"}," / Category",-1)),s("div",s2,[se(s("select",{"onUpdate:modelValue":C[1]||(C[1]=z=>l.value=z),class:"w-full text-2xl font-serif font-black italic bg-transparent border-none outline-none appearance-none pr-8 cursor-pointer z-10 relative"},[(u(!0),v(ae,null,xe(Ne(I),z=>(u(),v("option",{key:z.id,value:z.id},M(z.name),9,n2))),128))],512),[[nn,l.value]]),C[12]||(C[12]=s("span",{class:"material-symbols-outlined absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none z-0"},"expand_more",-1))])]),s("div",o2,[C[14]||(C[14]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-2 font-bold"}," / Title",-1)),se(s("input",{"onUpdate:modelValue":C[2]||(C[2]=z=>i.value=z),type:"text",placeholder:"Enter Title",class:"w-full text-[40px] leading-tight font-serif font-medium bg-transparent border-none outline-none placeholder:text-gray-200"},null,512),[[re,i.value]])]),s("div",a2,[C[15]||(C[15]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-4 font-bold"}," / Content",-1)),se(s("textarea",{"onUpdate:modelValue":C[3]||(C[3]=z=>r.value=z),placeholder:"Enter lore content...",class:"w-full min-h-[120px] text-base font-sans font-medium text-black/80 bg-transparent border-none outline-none resize-none placeholder:text-gray-200"},null,512),[[re,r.value]])]),C[23]||(C[23]=s("div",{class:"w-full border-b border-gray-100 mb-8"},null,-1)),s("div",i2,[C[16]||(C[16]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-4 font-bold"}," / Mode",-1)),s("div",r2,[s("div",{onClick:C[4]||(C[4]=z=>f.value=!1),class:"flex items-center gap-3 cursor-pointer group"},[s("div",{class:J(["w-5 h-5 border-2 border-black flex items-center justify-center transition-colors",f.value?"":"bg-black"])},[f.value?D("",!0):(u(),v("span",l2,"check"))],2),s("span",{class:J(["text-sm font-bold",f.value?"text-gray-400":"text-black"])}," (Trigger)",2)]),s("div",{onClick:C[5]||(C[5]=z=>f.value=!0),class:"flex items-center gap-3 cursor-pointer group"},[s("div",{class:J(["w-5 h-5 border-2 border-black flex items-center justify-center transition-colors",f.value?"bg-black":""])},[f.value?(u(),v("span",c2,"check")):D("",!0)],2),s("span",{class:J(["text-sm font-bold",f.value?"text-black":"text-gray-400"])}," (Global)",2)])])]),C[24]||(C[24]=s("div",{class:"w-full border-b border-gray-100 mb-8"},null,-1)),f.value?D("",!0):(u(),v("div",d2,[C[17]||(C[17]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-2 font-bold"}," / Keywords",-1)),se(s("input",{"onUpdate:modelValue":C[6]||(C[6]=z=>d.value=z),type:"text",placeholder:"tag1, tag2...",class:"w-full text-xl font-sans font-medium bg-transparent border-none outline-none placeholder:text-gray-200"},null,512),[[re,d.value]])])),s("div",u2,[C[20]||(C[20]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-4 font-bold"}," / Injection Position",-1)),s("div",f2,[s("div",{onClick:C[7]||(C[7]=z=>p.value="front"),class:J(["flex-1 flex items-center justify-center font-bold text-sm uppercase cursor-pointer transition-colors",p.value==="front"?"bg-black text-white":"bg-white text-black hover:bg-gray-50"])},"  (Front) ",2),C[18]||(C[18]=s("div",{class:"w-[1px] bg-black"},null,-1)),s("div",{onClick:C[8]||(C[8]=z=>p.value="mid"),class:J(["flex-1 flex items-center justify-center font-bold text-sm uppercase cursor-pointer transition-colors",p.value==="mid"?"bg-black text-white":"bg-white text-black hover:bg-gray-50"])},"  (Mid) ",2),C[19]||(C[19]=s("div",{class:"w-[1px] bg-black"},null,-1)),s("div",{onClick:C[9]||(C[9]=z=>p.value="back"),class:J(["flex-1 flex items-center justify-center font-bold text-sm uppercase cursor-pointer transition-colors",p.value==="back"?"bg-black text-white":"bg-white text-black hover:bg-gray-50"])},"  (Back) ",2)])]),s("div",p2,[C[21]||(C[21]=s("div",null,[s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-1 font-bold"}," / Logic Depth"),s("div",{class:"text-[10px] text-gray-300 italic"},"Range: 1 - 10")],-1)),s("div",null,[se(s("input",{"onUpdate:modelValue":C[10]||(C[10]=z=>h.value=z),type:"number",min:"1",max:"10",class:"w-24 text-right text-4xl font-serif font-black italic bg-transparent border-none outline-none transition-colors input-clean cursor-default"},null,512),[[re,h.value]])])]),C[25]||(C[25]=s("div",{class:"w-full border-b border-gray-100 mb-8"},null,-1)),s("div",{onClick:T,class:"w-full bg-black text-white h-14 flex items-center justify-center gap-2 cursor-pointer active:scale-95 transition-transform mt-4"},[...C[22]||(C[22]=[s("span",{class:"text-[10px] font-bold uppercase tracking-[0.2em]"},"Save & Sync",-1)])])])]))}},b2=Ke(v2,[["__scopeId","data-v-f095e035"]]),x2={class:"h-full w-full bg-white flex flex-col font-display text-black relative"},g2={key:0,class:"absolute inset-0 z-20 bg-white"},m2={key:1,class:"absolute inset-0 z-50 bg-black/50 flex items-center justify-center p-6"},h2={class:"bg-white w-full max-w-sm p-6 rounded-none shadow-2xl animate-fade-in"},y2={class:"mb-8"},w2={class:"relative"},k2=["value"],_2={class:"flex gap-4"},$2={key:2,class:"flex flex-col h-full"},C2={class:"px-6 py-4 pt-[calc(5px_+_env(safe-area-inset-top))] flex flex-col bg-white/90 backdrop-blur-sm z-10 sticky top-0 border-b border-gray-100"},z2={class:"flex items-center justify-between mb-4 mt-2"},S2={class:"flex gap-6 mt-0"},I2={class:"flex-grow overflow-y-auto px-6 pb-24 no-scrollbar pt-6"},A2={key:0,class:"flex flex-col gap-10"},M2={key:0,class:"animate-fade-in mb-8"},T2={key:0,class:"sticky top-0 bg-white z-20 py-4 border-b border-gray-100 flex items-center justify-between mb-4 animate-fade-in"},j2={class:"text-xs font-bold"},E2={class:"flex flex-col gap-3"},O2={class:"flex items-center gap-2"},P2=["onUpdate:modelValue","onChange"],N2=["onClick"],R2={class:"pl-4 border-l-2 border-gray-100 flex flex-col gap-2 mt-2"},L2=["onClick"],D2={key:0,class:"material-symbols-outlined text-white text-[10px] font-bold"},B2={class:"flex items-center gap-2 mt-6"},F2=["disabled"],V2={key:1},U2={class:"flex items-center justify-between mb-4 cursor-pointer"},K2={class:"text-2xl font-serif font-black italic"},W2={class:"pl-4 border-l-2 border-black/5 flex flex-col gap-4"},H2=["onClick"],G2={class:"font-bold text-sm group-hover/entry:underline decoration-1 underline-offset-4"},q2={class:"text-[10px] text-gray-400 line-clamp-1 mt-0.5"},Q2=["onClick"],J2={key:1,class:"mt-2"},Y2={class:"relative mb-8"},X2={class:"flex flex-col gap-6"},Z2=["onClick"],ew={class:"flex items-center gap-2 mb-1"},tw={class:"text-[8px] font-bold px-1.5 py-0.5 bg-gray-100 rounded text-gray-500 uppercase"},sw={class:"text-[8px] text-gray-400 uppercase tracking-widest"},nw={class:"text-lg font-bold mb-1"},ow={class:"text-xs text-gray-500 line-clamp-2"},aw={class:"fixed bottom-0 left-0 w-full bg-white border-t border-gray-100 py-4 pb-8 flex justify-around items-center z-10"},iw={__name:"WorldBookApp",emits:["close"],setup(e,{emit:t}){const n=t,o=Co(),a=N("home"),i=N("global"),r=N("main"),l=N(!1),c=N(""),f=N(new Set),d=N(!1),p=N(""),h=N(null),I=N(""),R=me(()=>o.getCategories()),T=N(""),B=me(()=>T.value?o.searchEntries(T.value):[]),w=q=>{if(l.value){pe(q);return}h.value=q,I.value="",r.value="edit"},C=q=>{h.value=null,I.value=q||R.value[0]?.id,r.value="edit"},z=()=>{r.value="main",h.value=null},A=()=>{r.value="main",h.value=null},E=()=>{c.value.trim()&&(o.addCategory(c.value.trim()),c.value="")},G=q=>{confirm("Are you sure? This will delete all entries in this category.")&&o.deleteCategory(q)},ne=()=>{l.value=!l.value,l.value&&(a.value="home"),f.value.clear()},pe=q=>{f.value.has(q)?f.value.delete(q):f.value.add(q),f.value=new Set(f.value)},ee=()=>{f.value.size!==0&&(p.value=R.value[0]?.id,d.value=!0)},de=()=>{p.value&&(f.value.forEach(q=>{o.updateEntry(q,{categoryId:p.value})}),f.value.clear(),d.value=!1,l.value=!1)},ve=q=>o.getEntriesByCategory(q,i.value);return(q,j)=>(u(),v("div",x2,[r.value==="edit"?(u(),v("div",g2,[De(b2,{"entry-id":h.value,"initial-category-id":I.value,"initial-scope":i.value,onBack:z,onSave:A},null,8,["entry-id","initial-category-id","initial-scope"])])):D("",!0),d.value?(u(),v("div",m2,[s("div",h2,[j[11]||(j[11]=s("h3",{class:"text-xl font-bold uppercase tracking-widest mb-6"},"Move Entries",-1)),s("div",y2,[j[10]||(j[10]=s("div",{class:"text-[10px] text-gray-400 uppercase tracking-widest mb-2 font-bold"},"To Category",-1)),s("div",w2,[se(s("select",{"onUpdate:modelValue":j[0]||(j[0]=g=>p.value=g),class:"w-full text-xl font-serif font-bold italic bg-transparent border-b border-black outline-none appearance-none py-2 pr-8"},[(u(!0),v(ae,null,xe(R.value,g=>(u(),v("option",{key:g.id,value:g.id},M(g.name),9,k2))),128))],512),[[nn,p.value]]),j[9]||(j[9]=s("span",{class:"material-symbols-outlined absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"},"expand_more",-1))])]),s("div",_2,[s("button",{onClick:j[1]||(j[1]=g=>d.value=!1),class:"flex-1 py-3 border border-black font-bold uppercase text-xs tracking-widest hover:bg-gray-50"},"Cancel"),s("button",{onClick:de,class:"flex-1 py-3 bg-black text-white font-bold uppercase text-xs tracking-widest hover:opacity-90"},"Confirm")])])])):(u(),v("div",$2,[s("div",C2,[s("div",z2,[s("button",{onClick:j[2]||(j[2]=g=>n("close")),class:"material-symbols-outlined text-[18px] -ml-2 w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"},"arrow_back_ios_new"),j[12]||(j[12]=s("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase text-center"},"World Book",-1)),j[13]||(j[13]=s("div",{class:"w-10"},null,-1))]),s("div",S2,[s("div",{onClick:j[3]||(j[3]=g=>i.value="global"),class:J(["pb-2 cursor-pointer font-bold text-sm tracking-widest uppercase transition-all duration-300 border-b-2",i.value==="global"?"text-black border-black":"text-gray-300 border-transparent hover:text-gray-500"])}," Global ",2),s("div",{onClick:j[4]||(j[4]=g=>i.value="local"),class:J(["pb-2 cursor-pointer font-bold text-sm tracking-widest uppercase transition-all duration-300 border-b-2",i.value==="local"?"text-black border-black":"text-gray-300 border-transparent hover:text-gray-500"])}," Local ",2)])]),s("div",I2,[a.value==="home"?(u(),v("div",A2,[l.value?(u(),v("div",M2,[f.value.size>0?(u(),v("div",T2,[s("span",j2,M(f.value.size)+" selected",1),s("button",{onClick:ee,class:"px-4 py-2 bg-black text-white text-[10px] font-bold uppercase tracking-widest hover:opacity-90"}," Move to... ")])):D("",!0),j[15]||(j[15]=s("div",{class:"text-xs font-bold uppercase tracking-widest text-black mb-4 flex items-center gap-2"},[s("span",{class:"material-symbols-outlined text-sm"},"edit"),_s(" Manage Categories ")],-1)),s("div",E2,[(u(!0),v(ae,null,xe(R.value,g=>(u(),v("div",{key:g.id,class:"flex flex-col gap-2 group"},[s("div",O2,[se(s("input",{"onUpdate:modelValue":x=>g.name=x,onChange:x=>Ne(o).updateCategory(g.id,g.name),class:"flex-grow border-b border-gray-200 py-1 font-serif text-lg italic outline-none focus:border-black bg-transparent"},null,40,P2),[[re,g.name]]),s("button",{onClick:x=>G(g.id),class:"opacity-0 group-hover:opacity-100 transition-opacity text-red-500 material-symbols-outlined text-[20px]"},"delete",8,N2)]),s("div",R2,[(u(!0),v(ae,null,xe(ve(g.id),x=>(u(),v("div",{key:x.id,onClick:H=>pe(x.id),class:"py-2 flex items-center gap-3 cursor-pointer"},[s("div",{class:J(["w-4 h-4 border border-black flex items-center justify-center transition-colors",f.value.has(x.id)?"bg-black":"bg-transparent"])},[f.value.has(x.id)?(u(),v("span",D2,"check")):D("",!0)],2),s("div",{class:J(["font-bold text-sm",f.value.has(x.id)?"opacity-100":"opacity-60"])},M(x.title),3)],8,L2))),128))])]))),128)),s("div",B2,[se(s("input",{"onUpdate:modelValue":j[5]||(j[5]=g=>c.value=g),onKeyup:Us(E,["enter"]),placeholder:"New Category...",class:"flex-grow border-b border-gray-100 py-1 font-serif text-lg italic outline-none focus:border-black bg-transparent placeholder:text-gray-200"},null,544),[[re,c.value]]),s("button",{onClick:E,class:"w-8 h-8 flex items-center justify-center bg-black text-white rounded-full hover:scale-105 transition-transform",disabled:!c.value.trim()},[...j[14]||(j[14]=[s("span",{class:"material-symbols-outlined text-sm"},"add",-1)])],8,F2)])])])):(u(),v("div",V2,[(u(!0),v(ae,null,xe(R.value,g=>(u(),v("div",{key:g.id,class:"group mb-8"},[s("div",U2,[s("h2",K2,M(g.name),1),j[16]||(j[16]=s("span",{class:"material-symbols-outlined text-gray-300 text-sm group-hover:text-black transition-colors transform group-hover:translate-x-1"},"arrow_forward",-1))]),s("div",W2,[(u(!0),v(ae,null,xe(ve(g.id),x=>(u(),v("div",{key:x.id,onClick:H=>w(x.id),class:"py-1 cursor-pointer hover:translate-x-1 transition-transform group/entry"},[s("div",G2,M(x.title),1),s("div",q2,M(x.content),1)],8,H2))),128)),s("div",{onClick:x=>C(g.id),class:"py-2 opacity-30 hover:opacity-100 cursor-pointer text-[10px] uppercase tracking-wider font-bold flex items-center gap-1 transition-opacity"},[j[17]||(j[17]=s("span",{class:"material-symbols-outlined text-[12px]"},"add",-1)),_s(" Add "+M(i.value)+" Entry ",1)],8,Q2)])]))),128))]))])):D("",!0),a.value==="search"?(u(),v("div",J2,[s("div",Y2,[j[18]||(j[18]=s("span",{class:"material-symbols-outlined absolute left-0 top-1/2 -translate-y-1/2 text-gray-400"},"search",-1)),se(s("input",{"onUpdate:modelValue":j[6]||(j[6]=g=>T.value=g),type:"text",placeholder:"Search...",class:"w-full pl-8 py-2 text-xl font-serif border-b border-gray-200 outline-none focus:border-black bg-transparent placeholder:italic placeholder:text-gray-200",autofocus:""},null,512),[[re,T.value]])]),s("div",X2,[(u(!0),v(ae,null,xe(B.value,g=>(u(),v("div",{key:g.id,onClick:x=>w(g.id),class:"cursor-pointer"},[s("div",ew,[s("span",tw,M(g.scope),1),s("span",sw,M(R.value.find(x=>x.id===g.categoryId)?.name),1)]),s("div",nw,M(g.title),1),s("div",ow,M(g.content),1)],8,Z2))),128))])])):D("",!0)]),s("div",aw,[s("button",{onClick:ne,class:J(["flex flex-col items-center gap-1 transition-colors",l.value?"text-black":"text-gray-300"])},[s("span",{class:J(["material-symbols-outlined text-[28px] fill-current",l.value?"font-variation-fill":""])},"grid_view",2)],2),s("button",{onClick:j[7]||(j[7]=g=>C()),class:"flex flex-col items-center justify-center w-12 h-12 bg-black rounded-full shadow-lg active:scale-95 transition-transform"},[...j[19]||(j[19]=[s("span",{class:"material-symbols-outlined text-white text-[24px]"},"add",-1)])]),s("button",{onClick:j[8]||(j[8]=g=>a.value="search"),class:J(["flex flex-col items-center gap-1 transition-colors",a.value==="search"?"text-black":"text-gray-300"])},[...j[20]||(j[20]=[s("span",{class:"material-symbols-outlined text-[28px]"},"search",-1)])],2)])]))]))}},rw=Ke(iw,[["__scopeId","data-v-fd678481"]]),lw={class:"relative h-screen w-full flex flex-col overflow-hidden bg-[#F2F2F7] font-sans text-black"},cw={class:"relative z-10 flex-grow px-5 pt-[calc(5px_+_env(safe-area-inset-top))] pb-32 overflow-y-auto no-scrollbar flex flex-col items-center gap-8"},dw={class:"w-full max-w-sm flex justify-between items-center mt-4"},uw={class:"flex flex-col gap-4"},fw={class:"flex flex-col gap-4"},pw={__name:"Desktop",emits:["open-app"],setup(e,{emit:t}){const n=t,o=()=>{n("open-app","noir")},a=()=>{n("open-app","worldbook")},i=()=>{n("open-app","settings")},r=l=>{console.log("Clicked",l)};return(l,c)=>(u(),v("div",lw,[s("div",cw,[s("div",dw,[s("div",uw,[s("button",{class:"app-pill",onClick:c[0]||(c[0]=f=>r("Music"))},[...c[4]||(c[4]=[s("span",{class:"material-symbols-outlined icon"},"headphones",-1),s("span",{class:"label"},"Music::",-1)])]),s("button",{class:"app-pill",onClick:c[1]||(c[1]=f=>r("Status"))},[...c[5]||(c[5]=[s("span",{class:"material-symbols-outlined icon fill-current"},"favorite",-1),s("span",{class:"label"},"Status",-1)])])]),c[8]||(c[8]=s("div",{class:"flex flex-col items-center gap-2 mx-2"},[s("div",{class:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-200"},[s("img",{src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover",alt:"Avatar"})]),s("div",{class:"text-[10px] text-gray-400 tracking-widest font-serif italic text-center leading-tight"}," **. ")],-1)),s("div",fw,[s("button",{class:"app-pill",onClick:c[2]||(c[2]=f=>r("Gallery"))},[...c[6]||(c[6]=[s("span",{class:"material-symbols-outlined icon"},"movie",-1),s("span",{class:"label"},"Gallery",-1)])]),s("button",{class:"app-pill",onClick:c[3]||(c[3]=f=>r("Weather"))},[...c[7]||(c[7]=[s("span",{class:"material-symbols-outlined icon"},"cloud",-1),s("span",{class:"label"},"Cloud",-1)])])])]),c[9]||(c[9]=dt('<div class="w-full max-w-sm grid grid-cols-[1.4fr_1fr] gap-4" data-v-995d555e><div class="bg-white rounded-[2rem] p-5 shadow-sm relative flex flex-col justify-between h-48 w-full" data-v-995d555e><div class="flex items-center gap-2 mb-1" data-v-995d555e><div class="w-1 h-3 bg-gray-300 rounded-full" data-v-995d555e></div><span class="text-xs text-gray-400 font-medium" data-v-995d555e>s.coups</span></div><div class="flex flex-col gap-2" data-v-995d555e><div class="flex flex-col gap-1 items-start" data-v-995d555e><span class="text-[10px] text-gray-400 ml-1" data-v-995d555e>    22:50</span></div><div class="self-end bg-[#333] text-white rounded-2xl rounded-tr-sm py-2.5 px-3 max-w-[90%] shadow-md" data-v-995d555e><span class="text-sm font-medium" data-v-995d555e></span><div class="flex justify-end items-center gap-1 mt-0.5" data-v-995d555e><span class="text-[8px] opacity-60" data-v-995d555e>jeonghan</span><span class="material-symbols-outlined text-[9px]" data-v-995d555e>done_all</span></div></div><div class="bg-gray-100/50 rounded-xl p-2 self-start max-w-[80%]" data-v-995d555e><span class="text-[9px] text-gray-500 leading-tight block" data-v-995d555e><br data-v-995d555e>  22:55</span></div></div></div><div class="grid grid-cols-2 gap-3 h-48 content-between" data-v-995d555e><button class="square-app-btn" data-v-995d555e><div class="app-icon-bg" data-v-995d555e><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-995d555e>calendar_month</span></div><span class="app-label" data-v-995d555e>Calendar</span></button><button class="square-app-btn" data-v-995d555e><div class="app-icon-bg" data-v-995d555e><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-995d555e>menu_book</span></div><span class="app-label" data-v-995d555e>WorldBook</span></button><button class="square-app-btn" data-v-995d555e><div class="app-icon-bg" data-v-995d555e><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-995d555e>pets</span></div><span class="app-label" data-v-995d555e>Pet</span></button><button class="square-app-btn" data-v-995d555e><div class="app-icon-bg" data-v-995d555e><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-995d555e>person</span></div><span class="app-label" data-v-995d555e>Me</span></button></div></div><div class="w-full max-w-sm flex justify-center gap-2 mt-4 relative h-40" data-v-995d555e><div class="polaroid rotate-[-6deg] translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-995d555e><div class="tape" data-v-995d555e></div><div class="photo" data-v-995d555e><img src="https://i.pinimg.com/736x/88/2c/83/882c83c21389c836dc22874136696b99.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-995d555e></div><div class="caption" data-v-995d555e></div></div><div class="polaroid rotate-[2deg] -translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-995d555e><div class="tape" data-v-995d555e></div><div class="photo" data-v-995d555e><img src="https://i.pinimg.com/736x/cf/17/dc/cf17dc13023cf8527a26f03027788484.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-995d555e></div><div class="caption" data-v-995d555e></div></div><div class="polaroid rotate-[8deg] translate-y-4 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-995d555e><div class="tape" data-v-995d555e></div><div class="photo" data-v-995d555e><img src="https://i.pinimg.com/736x/be/ab/e1/beabe17c5a08579932066d5b004278df.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-995d555e></div><div class="caption text-[8px] text-right pr-1 pt-1 opacity-50 font-serif" data-v-995d555e>~~</div></div></div>',2))]),s("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[85%] max-w-[280px] z-50"},[s("div",{class:"bg-white/80 backdrop-blur-xl border border-white/40 px-6 py-4 flex justify-between items-center shadow-lg rounded-[2.5rem]"},[s("button",{onClick:i,class:"dock-icon-btn"},[...c[10]||(c[10]=[s("span",{class:"material-symbols-outlined"},"settings",-1)])]),s("button",{onClick:a,class:"dock-icon-btn"},[...c[11]||(c[11]=[s("span",{class:"material-symbols-outlined"},"menu_book",-1)])]),s("button",{onClick:o,class:"dock-icon-btn"},[...c[12]||(c[12]=[s("span",{class:"material-symbols-outlined"},"chat_bubble",-1)])])])])]))}},vw=Ke(pw,[["__scopeId","data-v-995d555e"]]),bw={class:"w-full min-h-[100dvh] relative"},xw={key:0,class:"fixed inset-0 z-50 bg-white"},gw={key:0,class:"fixed inset-0 z-50 bg-white"},mw={key:0,class:"fixed inset-0 z-50 bg-white"},hw={__name:"App",setup(e){const t=N(!1),n=N(!1),o=N(!1),a=c=>{c==="noir"?t.value=!0:c==="settings"?n.value=!0:c==="worldbook"&&(o.value=!0)},i=()=>{t.value=!1},r=()=>{n.value=!1},l=()=>{o.value=!1};return(c,f)=>(u(),v("div",bw,[!t.value&&!n.value&&!o.value?(u(),ke(vw,{key:0,onOpenApp:a})):D("",!0),De(Vs,{name:"app-launch"},{default:ys(()=>[t.value?(u(),v("div",xw,[De(ry,{onClose:i})])):D("",!0)]),_:1}),De(Vs,{name:"app-launch"},{default:ys(()=>[n.value?(u(),v("div",gw,[De(Jy,{onClose:r})])):D("",!0)]),_:1}),De(Vs,{name:"app-launch"},{default:ys(()=>[o.value?(u(),v("div",mw,[De(rw,{onClose:l})])):D("",!0)]),_:1})]))}};Id(hw).mount("#app");
