function e(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return e=>e in t}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t={},a=[],n=()=>{},l=()=>!1,s=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),i=e=>e.startsWith("onUpdate:"),o=Object.assign,r=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},c=Object.prototype.hasOwnProperty,d=(e,t)=>c.call(e,t),u=Array.isArray,p=e=>"[object Map]"===w(e),v=e=>"[object Set]"===w(e),f=e=>"[object Date]"===w(e),x=e=>"function"==typeof e,b=e=>"string"==typeof e,m=e=>"symbol"==typeof e,g=e=>null!==e&&"object"==typeof e,h=e=>(g(e)||x(e))&&x(e.then)&&x(e.catch),y=Object.prototype.toString,w=e=>y.call(e),k=e=>"[object Object]"===w(e),z=e=>b(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,C=e(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},S=/-\w/g,I=_(e=>e.replace(S,e=>e.slice(1).toUpperCase())),j=/\B([A-Z])/g,M=_(e=>e.replace(j,"-$1").toLowerCase()),E=_(e=>e.charAt(0).toUpperCase()+e.slice(1)),A=_(e=>e?`on${E(e)}`:""),T=(e,t)=>!Object.is(e,t),O=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},$=(e,t,a,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:a})},L=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let N;const P=()=>N||(N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function R(e){if(u(e)){const t={};for(let a=0;a<e.length;a++){const n=e[a],l=b(n)?B(n):R(n);if(l)for(const e in l)t[e]=l[e]}return t}if(b(e)||g(e))return e}const D=/;(?![^(]*\))/g,U=/:([^]+)/,V=/\/\*[^]*?\*\//g;function B(e){const t={};return e.replace(V,"").split(D).forEach(e=>{if(e){const a=e.split(U);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function F(e){let t="";if(b(e))t=e;else if(u(e))for(let a=0;a<e.length;a++){const n=F(e[a]);n&&(t+=n+" ")}else if(g(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const G=e("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function K(e){return!!e||""===e}function W(e,t){if(e===t)return!0;let a=f(e),n=f(t);if(a||n)return!(!a||!n)&&e.getTime()===t.getTime();if(a=m(e),n=m(t),a||n)return e===t;if(a=u(e),n=u(t),a||n)return!(!a||!n)&&function(e,t){if(e.length!==t.length)return!1;let a=!0;for(let n=0;a&&n<e.length;n++)a=W(e[n],t[n]);return a}(e,t);if(a=g(e),n=g(t),a||n){if(!a||!n)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e){const n=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(n&&!l||!n&&l||!W(e[a],t[a]))return!1}}return String(e)===String(t)}function H(e,t){return e.findIndex(e=>W(e,t))}const q=e=>!(!e||!0!==e.__v_isRef),J=e=>b(e)?e:null==e?"":u(e)||g(e)&&(e.toString===y||!x(e.toString))?q(e)?J(e.value):JSON.stringify(e,Y,2):String(e),Y=(e,t)=>q(t)?Y(e,t.value):p(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,a],n)=>(e[X(t,n)+" =>"]=a,e),{})}:v(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>X(e))}:m(t)?X(t):!g(t)||u(t)||k(t)?t:String(t),X=(e,t="")=>{var a;return m(e)?`Symbol(${null!=(a=e.description)?a:t})`:e};let Q,Z;class ee{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Q,!e&&Q&&(this.index=(Q.scopes||(Q.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Q;try{return Q=this,e()}finally{Q=t}}}on(){1===++this._on&&(this.prevScope=Q,Q=this)}off(){this._on>0&&0===--this._on&&(Q=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,a;for(this._active=!1,t=0,a=this.effects.length;t<a;t++)this.effects[t].stop();for(this.effects.length=0,t=0,a=this.cleanups.length;t<a;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}const te=new WeakSet;class ae{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Q&&Q.active&&Q.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,te.has(this)&&(te.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||ie(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,he(this),ce(this);const e=Z,t=xe;Z=this,xe=!0;try{return this.fn()}finally{de(this),Z=e,xe=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)ve(e);this.deps=this.depsTail=void 0,he(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?te.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ue(this)&&this.run()}get dirty(){return ue(this)}}let ne,le,se=0;function ie(e,t=!1){if(e.flags|=8,t)return e.next=le,void(le=e);e.next=ne,ne=e}function oe(){se++}function re(){if(--se>0)return;if(le){let e=le;for(le=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ne;){let a=ne;for(ne=void 0;a;){const n=a.next;if(a.next=void 0,a.flags&=-9,1&a.flags)try{a.trigger()}catch(t){e||(e=t)}a=n}}if(e)throw e}function ce(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function de(e){let t,a=e.depsTail,n=a;for(;n;){const e=n.prevDep;-1===n.version?(n===a&&(a=e),ve(n),fe(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=e}e.deps=t,e.depsTail=a}function ue(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(pe(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function pe(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===ye)return;if(e.globalVersion=ye,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!ue(e)))return;e.flags|=2;const t=e.dep,a=Z,n=xe;Z=e,xe=!0;try{ce(e);const a=e.fn(e._value);(0===t.version||T(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(l){throw t.version++,l}finally{Z=a,xe=n,de(e),e.flags&=-3}}function ve(e,t=!1){const{dep:a,prevSub:n,nextSub:l}=e;if(n&&(n.nextSub=l,e.prevSub=void 0),l&&(l.prevSub=n,e.nextSub=void 0),a.subs===e&&(a.subs=n,!n&&a.computed)){a.computed.flags&=-5;for(let e=a.computed.deps;e;e=e.nextDep)ve(e,!0)}t||--a.sc||!a.map||a.map.delete(a.key)}function fe(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let xe=!0;const be=[];function me(){be.push(xe),xe=!1}function ge(){const e=be.pop();xe=void 0===e||e}function he(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=Z;Z=void 0;try{t()}finally{Z=e}}}let ye=0;class we{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ke{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Z||!xe||Z===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==Z)t=this.activeLink=new we(Z,this),Z.deps?(t.prevDep=Z.depsTail,Z.depsTail.nextDep=t,Z.depsTail=t):Z.deps=Z.depsTail=t,ze(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=Z.depsTail,t.nextDep=void 0,Z.depsTail.nextDep=t,Z.depsTail=t,Z.deps===t&&(Z.deps=e)}return t}trigger(e){this.version++,ye++,this.notify(e)}notify(e){oe();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{re()}}}function ze(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)ze(e)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const Ce=new WeakMap,_e=Symbol(""),Se=Symbol(""),Ie=Symbol("");function je(e,t,a){if(xe&&Z){let t=Ce.get(e);t||Ce.set(e,t=new Map);let n=t.get(a);n||(t.set(a,n=new ke),n.map=t,n.key=a),n.track()}}function Me(e,t,a,n,l,s){const i=Ce.get(e);if(!i)return void ye++;const o=e=>{e&&e.trigger()};if(oe(),"clear"===t)i.forEach(o);else{const l=u(e),s=l&&z(a);if(l&&"length"===a){const e=Number(n);i.forEach((t,a)=>{("length"===a||a===Ie||!m(a)&&a>=e)&&o(t)})}else switch((void 0!==a||i.has(void 0))&&o(i.get(a)),s&&o(i.get(Ie)),t){case"add":l?s&&o(i.get("length")):(o(i.get(_e)),p(e)&&o(i.get(Se)));break;case"delete":l||(o(i.get(_e)),p(e)&&o(i.get(Se)));break;case"set":p(e)&&o(i.get(_e))}}re()}function Ee(e){const t=bt(e);return t===e?t:(je(t,0,Ie),ft(e)?t:t.map(mt))}function Ae(e){return je(e=bt(e),0,Ie),e}function Te(e,t){return vt(e)?gt(pt(e)?mt(t):t):mt(t)}const Oe={__proto__:null,[Symbol.iterator](){return $e(this,Symbol.iterator,e=>Te(this,e))},concat(...e){return Ee(this).concat(...e.map(e=>u(e)?Ee(e):e))},entries(){return $e(this,"entries",e=>(e[1]=Te(this,e[1]),e))},every(e,t){return Ne(this,"every",e,t,void 0,arguments)},filter(e,t){return Ne(this,"filter",e,t,e=>e.map(e=>Te(this,e)),arguments)},find(e,t){return Ne(this,"find",e,t,e=>Te(this,e),arguments)},findIndex(e,t){return Ne(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ne(this,"findLast",e,t,e=>Te(this,e),arguments)},findLastIndex(e,t){return Ne(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ne(this,"forEach",e,t,void 0,arguments)},includes(...e){return Re(this,"includes",e)},indexOf(...e){return Re(this,"indexOf",e)},join(e){return Ee(this).join(e)},lastIndexOf(...e){return Re(this,"lastIndexOf",e)},map(e,t){return Ne(this,"map",e,t,void 0,arguments)},pop(){return De(this,"pop")},push(...e){return De(this,"push",e)},reduce(e,...t){return Pe(this,"reduce",e,t)},reduceRight(e,...t){return Pe(this,"reduceRight",e,t)},shift(){return De(this,"shift")},some(e,t){return Ne(this,"some",e,t,void 0,arguments)},splice(...e){return De(this,"splice",e)},toReversed(){return Ee(this).toReversed()},toSorted(e){return Ee(this).toSorted(e)},toSpliced(...e){return Ee(this).toSpliced(...e)},unshift(...e){return De(this,"unshift",e)},values(){return $e(this,"values",e=>Te(this,e))}};function $e(e,t,a){const n=Ae(e),l=n[t]();return n===e||ft(e)||(l._next=l.next,l.next=()=>{const e=l._next();return e.done||(e.value=a(e.value)),e}),l}const Le=Array.prototype;function Ne(e,t,a,n,l,s){const i=Ae(e),o=i!==e&&!ft(e),r=i[t];if(r!==Le[t]){const t=r.apply(e,s);return o?mt(t):t}let c=a;i!==e&&(o?c=function(t,n){return a.call(this,Te(e,t),n,e)}:a.length>2&&(c=function(t,n){return a.call(this,t,n,e)}));const d=r.call(i,c,n);return o&&l?l(d):d}function Pe(e,t,a,n){const l=Ae(e);let s=a;return l!==e&&(ft(e)?a.length>3&&(s=function(t,n,l){return a.call(this,t,n,l,e)}):s=function(t,n,l){return a.call(this,t,Te(e,n),l,e)}),l[t](s,...n)}function Re(e,t,a){const n=bt(e);je(n,0,Ie);const l=n[t](...a);return-1!==l&&!1!==l||!xt(a[0])?l:(a[0]=bt(a[0]),n[t](...a))}function De(e,t,a=[]){me(),oe();const n=bt(e)[t].apply(e,a);return re(),ge(),n}const Ue=e("__proto__,__v_isRef,__isVue"),Ve=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(m));function Be(e){m(e)||(e=String(e));const t=bt(this);return je(t,0,e),t.hasOwnProperty(e)}class Fe{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,a){if("__v_skip"===t)return e.__v_skip;const n=this._isReadonly,l=this._isShallow;if("__v_isReactive"===t)return!n;if("__v_isReadonly"===t)return n;if("__v_isShallow"===t)return l;if("__v_raw"===t)return a===(n?l?it:st:l?lt:nt).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const s=u(e);if(!n){let e;if(s&&(e=Oe[t]))return e;if("hasOwnProperty"===t)return Be}const i=Reflect.get(e,t,ht(e)?e:a);if(m(t)?Ve.has(t):Ue(t))return i;if(n||je(e,0,t),l)return i;if(ht(i)){const e=s&&z(t)?i:i.value;return n&&g(e)?dt(e):e}return g(i)?n?dt(i):rt(i):i}}class Ge extends Fe{constructor(e=!1){super(!1,e)}set(e,t,a,n){let l=e[t];const s=u(e)&&z(t);if(!this._isShallow){const e=vt(l);if(ft(a)||vt(a)||(l=bt(l),a=bt(a)),!s&&ht(l)&&!ht(a))return e||(l.value=a),!0}const i=s?Number(t)<e.length:d(e,t),o=Reflect.set(e,t,a,ht(e)?e:n);return e===bt(n)&&(i?T(a,l)&&Me(e,"set",t,a):Me(e,"add",t,a)),o}deleteProperty(e,t){const a=d(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&a&&Me(e,"delete",t,void 0),n}has(e,t){const a=Reflect.has(e,t);return m(t)&&Ve.has(t)||je(e,0,t),a}ownKeys(e){return je(e,0,u(e)?"length":_e),Reflect.ownKeys(e)}}class Ke extends Fe{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const We=new Ge,He=new Ke,qe=new Ge(!0),Je=e=>e,Ye=e=>Reflect.getPrototypeOf(e);function Xe(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function Qe(e,t){const a={get(a){const n=this.__v_raw,l=bt(n),s=bt(a);e||(T(a,s)&&je(l,0,a),je(l,0,s));const{has:i}=Ye(l),o=t?Je:e?gt:mt;return i.call(l,a)?o(n.get(a)):i.call(l,s)?o(n.get(s)):void(n!==l&&n.get(a))},get size(){const t=this.__v_raw;return!e&&je(bt(t),0,_e),t.size},has(t){const a=this.__v_raw,n=bt(a),l=bt(t);return e||(T(t,l)&&je(n,0,t),je(n,0,l)),t===l?a.has(t):a.has(t)||a.has(l)},forEach(a,n){const l=this,s=l.__v_raw,i=t?Je:e?gt:mt;return!e&&je(bt(s),0,_e),s.forEach((e,t)=>a.call(n,i(e),i(t),l))}};o(a,e?{add:Xe("add"),set:Xe("set"),delete:Xe("delete"),clear:Xe("clear")}:{add(e){t||ft(e)||vt(e)||(e=bt(e));const a=bt(this);return Ye(a).has.call(a,e)||(a.add(e),Me(a,"add",e,e)),this},set(e,a){t||ft(a)||vt(a)||(a=bt(a));const n=bt(this),{has:l,get:s}=Ye(n);let i=l.call(n,e);i||(e=bt(e),i=l.call(n,e));const o=s.call(n,e);return n.set(e,a),i?T(a,o)&&Me(n,"set",e,a):Me(n,"add",e,a),this},delete(e){const t=bt(this),{has:a,get:n}=Ye(t);let l=a.call(t,e);l||(e=bt(e),l=a.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return l&&Me(t,"delete",e,void 0),s},clear(){const e=bt(this),t=0!==e.size,a=e.clear();return t&&Me(e,"clear",void 0,void 0),a}});return["keys","values","entries",Symbol.iterator].forEach(n=>{a[n]=function(e,t,a){return function(...n){const l=this.__v_raw,s=bt(l),i=p(s),r="entries"===e||e===Symbol.iterator&&i,c="keys"===e&&i,d=l[e](...n),u=a?Je:t?gt:mt;return!t&&je(s,0,c?Se:_e),o(Object.create(d),{next(){const{value:e,done:t}=d.next();return t?{value:e,done:t}:{value:r?[u(e[0]),u(e[1])]:u(e),done:t}}})}}(n,e,t)}),a}function Ze(e,t){const a=Qe(e,t);return(t,n,l)=>"__v_isReactive"===n?!e:"__v_isReadonly"===n?e:"__v_raw"===n?t:Reflect.get(d(a,n)&&n in t?a:t,n,l)}const et={get:Ze(!1,!1)},tt={get:Ze(!1,!0)},at={get:Ze(!0,!1)},nt=new WeakMap,lt=new WeakMap,st=new WeakMap,it=new WeakMap;function ot(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>w(e).slice(8,-1))(e))}function rt(e){return vt(e)?e:ut(e,!1,We,et,nt)}function ct(e){return ut(e,!1,qe,tt,lt)}function dt(e){return ut(e,!0,He,at,st)}function ut(e,t,a,n,l){if(!g(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const s=ot(e);if(0===s)return e;const i=l.get(e);if(i)return i;const o=new Proxy(e,2===s?n:a);return l.set(e,o),o}function pt(e){return vt(e)?pt(e.__v_raw):!(!e||!e.__v_isReactive)}function vt(e){return!(!e||!e.__v_isReadonly)}function ft(e){return!(!e||!e.__v_isShallow)}function xt(e){return!!e&&!!e.__v_raw}function bt(e){const t=e&&e.__v_raw;return t?bt(t):e}const mt=e=>g(e)?rt(e):e,gt=e=>g(e)?dt(e):e;function ht(e){return!!e&&!0===e.__v_isRef}function yt(e){return function(e,t){if(ht(e))return e;return new wt(e,t)}(e,!1)}class wt{constructor(e,t){this.dep=new ke,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:bt(e),this._value=t?e:mt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,a=this.__v_isShallow||ft(e)||vt(e);T(e=a?e:bt(e),t)&&(this._rawValue=e,this._value=a?e:mt(e),this.dep.trigger())}}function kt(e){return ht(e)?e.value:e}const zt={get:(e,t,a)=>"__v_raw"===t?e:kt(Reflect.get(e,t,a)),set:(e,t,a,n)=>{const l=e[t];return ht(l)&&!ht(a)?(l.value=a,!0):Reflect.set(e,t,a,n)}};function Ct(e){return pt(e)?e:new Proxy(e,zt)}function _t(e){const t=u(e)?new Array(e.length):{};for(const a in e)t[a]=It(e,a);return t}class St{constructor(e,t,a){this._object=e,this._key=t,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0,this._raw=bt(e);let n=!0,l=e;if(!u(e)||!z(String(t)))do{n=!xt(l)||ft(l)}while(n&&(l=l.__v_raw));this._shallow=n}get value(){let e=this._object[this._key];return this._shallow&&(e=kt(e)),this._value=void 0===e?this._defaultValue:e}set value(e){if(this._shallow&&ht(this._raw[this._key])){const t=this._object[this._key];if(ht(t))return void(t.value=e)}this._object[this._key]=e}get dep(){return function(e,t){const a=Ce.get(e);return a&&a.get(t)}(this._raw,this._key)}}function It(e,t,a){return new St(e,t,a)}class jt{constructor(e,t,a){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ke(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ye-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=a}notify(){if(this.flags|=16,!(8&this.flags)&&Z!==this)return ie(this,!0),!0}get value(){const e=this.dep.track();return pe(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Mt(e,t,a=!1){let n,l;x(e)?n=e:(n=e.get,l=e.set);return new jt(n,l,a)}const Et={},At=new WeakMap;let Tt;function Ot(e,a,l=t){const{immediate:s,deep:i,once:o,scheduler:c,augmentJob:d,call:p}=l,v=e=>i?e:ft(e)||!1===i||0===i?$t(e,1):$t(e);let f,b,m,g,h=!1,y=!1;if(ht(e)?(b=()=>e.value,h=ft(e)):pt(e)?(b=()=>v(e),h=!0):u(e)?(y=!0,h=e.some(e=>pt(e)||ft(e)),b=()=>e.map(e=>ht(e)?e.value:pt(e)?v(e):x(e)?p?p(e,2):e():void 0)):b=x(e)?a?p?()=>p(e,2):e:()=>{if(m){me();try{m()}finally{ge()}}const t=Tt;Tt=f;try{return p?p(e,3,[g]):e(g)}finally{Tt=t}}:n,a&&i){const e=b,t=!0===i?1/0:i;b=()=>$t(e(),t)}const w=Q,k=()=>{f.stop(),w&&w.active&&r(w.effects,f)};if(o&&a){const e=a;a=(...t)=>{e(...t),k()}}let z=y?new Array(e.length).fill(Et):Et;const C=e=>{if(1&f.flags&&(f.dirty||e))if(a){const e=f.run();if(i||h||(y?e.some((e,t)=>T(e,z[t])):T(e,z))){m&&m();const t=Tt;Tt=f;try{const t=[e,z===Et?void 0:y&&z[0]===Et?[]:z,g];z=e,p?p(a,3,t):a(...t)}finally{Tt=t}}}else f.run()};return d&&d(C),f=new ae(b),f.scheduler=c?()=>c(C,!1):C,g=e=>function(e,t=!1,a=Tt){if(a){let t=At.get(a);t||At.set(a,t=[]),t.push(e)}}(e,!1,f),m=f.onStop=()=>{const e=At.get(f);if(e){if(p)p(e,4);else for(const t of e)t();At.delete(f)}},a?s?C(!0):z=f.run():c?c(C.bind(null,!0),!0):f.run(),k.pause=f.pause.bind(f),k.resume=f.resume.bind(f),k.stop=k,k}function $t(e,t=1/0,a){if(t<=0||!g(e)||e.__v_skip)return e;if(((a=a||new Map).get(e)||0)>=t)return e;if(a.set(e,t),t--,ht(e))$t(e.value,t,a);else if(u(e))for(let n=0;n<e.length;n++)$t(e[n],t,a);else if(v(e)||p(e))e.forEach(e=>{$t(e,t,a)});else if(k(e)){for(const n in e)$t(e[n],t,a);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&$t(e[n],t,a)}return e}function Lt(e,t,a,n){try{return n?e(...n):e()}catch(l){Pt(l,t,a)}}function Nt(e,t,a,n){if(x(e)){const l=Lt(e,t,a,n);return l&&h(l)&&l.catch(e=>{Pt(e,t,a)}),l}if(u(e)){const l=[];for(let s=0;s<e.length;s++)l.push(Nt(e[s],t,a,n));return l}}function Pt(e,a,n,l=!0){a&&a.vnode;const{errorHandler:s,throwUnhandledErrorInProduction:i}=a&&a.appContext.config||t;if(a){let t=a.parent;const l=a.proxy,i=`https://vuejs.org/error-reference/#runtime-${n}`;for(;t;){const a=t.ec;if(a)for(let t=0;t<a.length;t++)if(!1===a[t](e,l,i))return;t=t.parent}if(s)return me(),Lt(s,null,10,[e,l,i]),void ge()}!function(e,t,a,n=!0,l=!1){if(l)throw e}(e,0,0,l,i)}const Rt=[];let Dt=-1;const Ut=[];let Vt=null,Bt=0;const Ft=Promise.resolve();let Gt=null;function Kt(e){const t=Gt||Ft;return e?t.then(this?e.bind(this):e):t}function Wt(e){if(!(1&e.flags)){const t=Yt(e),a=Rt[Rt.length-1];!a||!(2&e.flags)&&t>=Yt(a)?Rt.push(e):Rt.splice(function(e){let t=Dt+1,a=Rt.length;for(;t<a;){const n=t+a>>>1,l=Rt[n],s=Yt(l);s<e||s===e&&2&l.flags?t=n+1:a=n}return t}(t),0,e),e.flags|=1,Ht()}}function Ht(){Gt||(Gt=Ft.then(Xt))}function qt(e,t,a=Dt+1){for(;a<Rt.length;a++){const t=Rt[a];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Rt.splice(a,1),a--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function Jt(e){if(Ut.length){const e=[...new Set(Ut)].sort((e,t)=>Yt(e)-Yt(t));if(Ut.length=0,Vt)return void Vt.push(...e);for(Vt=e,Bt=0;Bt<Vt.length;Bt++){const e=Vt[Bt];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Vt=null,Bt=0}}const Yt=e=>null==e.id?2&e.flags?-1:1/0:e.id;function Xt(e){try{for(Dt=0;Dt<Rt.length;Dt++){const e=Rt[Dt];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Lt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Dt<Rt.length;Dt++){const e=Rt[Dt];e&&(e.flags&=-2)}Dt=-1,Rt.length=0,Jt(),Gt=null,(Rt.length||Ut.length)&&Xt()}}let Qt=null,Zt=null;function ea(e){const t=Qt;return Qt=e,Zt=e&&e.type.__scopeId||null,t}function ta(e,t=Qt,a){if(!t)return e;if(e._n)return e;const n=(...a)=>{n._d&&vl(-1);const l=ea(t);let s;try{s=e(...a)}finally{ea(l),n._d&&vl(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function aa(e,a){if(null===Qt)return e;const n=Gl(Qt),l=e.dirs||(e.dirs=[]);for(let s=0;s<a.length;s++){let[e,i,o,r=t]=a[s];e&&(x(e)&&(e={mounted:e,updated:e}),e.deep&&$t(i),l.push({dir:e,instance:n,value:i,oldValue:void 0,arg:o,modifiers:r}))}return e}function na(e,t,a,n){const l=e.dirs,s=t&&t.dirs;for(let i=0;i<l.length;i++){const o=l[i];s&&(o.oldValue=s[i].value);let r=o.dir[n];r&&(me(),Nt(r,a,8,[e.el,o,e,t]),ge())}}function la(e,t,a=!1){const n=$l();if(n||In){let l=In?In._context.provides:n?null==n.parent||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(l&&e in l)return l[e];if(arguments.length>1)return a&&x(t)?t.call(n&&n.proxy):t}}const sa=Symbol.for("v-scx");function ia(e,t,a){return oa(e,t,a)}function oa(e,a,l=t){const{immediate:s,deep:i,flush:r,once:c}=l,d=o({},l),u=a&&s||!a&&"post"!==r;let p;if(Ul)if("sync"===r){const e=la(sa);p=e.__watcherHandles||(e.__watcherHandles=[])}else if(!u){const e=()=>{};return e.stop=n,e.resume=n,e.pause=n,e}const v=Ol;d.call=(e,t,a)=>Nt(e,v,t,a);let f=!1;"post"===r?d.scheduler=e=>{Yn(e,v&&v.suspense)}:"sync"!==r&&(f=!0,d.scheduler=(e,t)=>{t?e():Wt(e)}),d.augmentJob=e=>{a&&(e.flags|=4),f&&(e.flags|=2,v&&(e.id=v.uid,e.i=v))};const x=Ot(e,a,d);return Ul&&(p?p.push(x):u&&x()),x}function ra(e,t,a){const n=this.proxy,l=b(e)?e.includes(".")?ca(n,e):()=>n[e]:e.bind(n,n);let s;x(t)?s=t:(s=t.handler,a=t);const i=Pl(this),o=oa(l,s.bind(n),a);return i(),o}function ca(e,t){const a=t.split(".");return()=>{let t=e;for(let e=0;e<a.length&&t;e++)t=t[a[e]];return t}}const da=Symbol("_vte"),ua=e=>e.__isTeleport,pa=e=>e&&(e.disabled||""===e.disabled),va=e=>e&&(e.defer||""===e.defer),fa=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,xa=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,ba=(e,t)=>{const a=e&&e.to;if(b(a)){if(t){return t(a)}return null}return a},ma={name:"Teleport",__isTeleport:!0,process(e,t,a,n,l,s,i,o,r,c){const{mc:d,pc:u,pbc:p,o:{insert:v,querySelector:f,createText:x,createComment:b}}=c,m=pa(t.props);let{shapeFlag:g,children:h,dynamicChildren:y}=t;if(null==e){const e=t.el=x(""),c=t.anchor=x("");v(e,a,n),v(c,a,n);const u=(e,t)=>{16&g&&d(h,e,t,l,s,i,o,r)},p=()=>{const e=t.target=ba(t.props,f),a=wa(e,t,x,v);e&&("svg"!==i&&fa(e)?i="svg":"mathml"!==i&&xa(e)&&(i="mathml"),l&&l.isCE&&(l.ce._teleportTargets||(l.ce._teleportTargets=new Set)).add(e),m||(u(e,a),ya(t,!1)))};m&&(u(a,c),ya(t,!0)),va(t.props)?(t.el.__isMounted=!1,Yn(()=>{p(),delete t.el.__isMounted},s)):p()}else{if(va(t.props)&&!1===e.el.__isMounted)return void Yn(()=>{ma.process(e,t,a,n,l,s,i,o,r,c)},s);t.el=e.el,t.targetStart=e.targetStart;const d=t.anchor=e.anchor,v=t.target=e.target,x=t.targetAnchor=e.targetAnchor,b=pa(e.props),g=b?a:v,h=b?d:x;if("svg"===i||fa(v)?i="svg":("mathml"===i||xa(v))&&(i="mathml"),y?(p(e.dynamicChildren,y,g,l,s,i,o),el(e,t,!0)):r||u(e,t,g,h,l,s,i,o,!1),m)b?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ga(t,a,d,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=ba(t.props,f);e&&ga(t,e,null,c,0)}else b&&ga(t,v,x,c,1);ya(t,m)}},remove(e,t,a,{um:n,o:{remove:l}},s){const{shapeFlag:i,children:o,anchor:r,targetStart:c,targetAnchor:d,target:u,props:p}=e;if(u&&(l(c),l(d)),s&&l(r),16&i){const e=s||!pa(p);for(let l=0;l<o.length;l++){const s=o[l];n(s,t,a,e,!!s.dynamicChildren)}}},move:ga,hydrate:function(e,t,a,n,l,s,{o:{nextSibling:i,parentNode:o,querySelector:r,insert:c,createText:d}},u){function p(e,t,r,c){t.anchor=u(i(e),t,o(e),a,n,l,s),t.targetStart=r,t.targetAnchor=c}const v=t.target=ba(t.props,r),f=pa(t.props);if(v){const o=v._lpa||v.firstChild;if(16&t.shapeFlag)if(f)p(e,t,o,o&&i(o));else{t.anchor=i(e);let r=o;for(;r;){if(r&&8===r.nodeType)if("teleport start anchor"===r.data)t.targetStart=r;else if("teleport anchor"===r.data){t.targetAnchor=r,v._lpa=t.targetAnchor&&i(t.targetAnchor);break}r=i(r)}t.targetAnchor||wa(v,t,d,c),u(o&&i(o),t,v,a,n,l,s)}ya(t,f)}else f&&16&t.shapeFlag&&p(e,t,e,i(e));return t.anchor&&i(t.anchor)}};function ga(e,t,a,{o:{insert:n},m:l},s=2){0===s&&n(e.targetAnchor,t,a);const{el:i,anchor:o,shapeFlag:r,children:c,props:d}=e,u=2===s;if(u&&n(i,t,a),(!u||pa(d))&&16&r)for(let p=0;p<c.length;p++)l(c[p],t,a,2);u&&n(o,t,a)}const ha=ma;function ya(e,t){const a=e.ctx;if(a&&a.ut){let n,l;for(t?(n=e.el,l=e.anchor):(n=e.targetStart,l=e.targetAnchor);n&&n!==l;)1===n.nodeType&&n.setAttribute("data-v-owner",a.uid),n=n.nextSibling;a.ut()}}function wa(e,t,a,n){const l=t.targetStart=a(""),s=t.targetAnchor=a("");return l[da]=s,e&&(n(l,e),n(s,e)),s}const ka=Symbol("_leaveCb"),za=Symbol("_enterCb");function Ca(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ja(()=>{e.isMounted=!0}),Qa(()=>{e.isUnmounting=!0}),e}const _a=[Function,Array],Sa={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_a,onEnter:_a,onAfterEnter:_a,onEnterCancelled:_a,onBeforeLeave:_a,onLeave:_a,onAfterLeave:_a,onLeaveCancelled:_a,onBeforeAppear:_a,onAppear:_a,onAfterAppear:_a,onAppearCancelled:_a},Ia=e=>{const t=e.subTree;return t.component?Ia(t.component):t};function ja(e){let t=e[0];if(e.length>1)for(const a of e)if(a.type!==ol){t=a;break}return t}const Ma={name:"BaseTransition",props:Sa,setup(e,{slots:t}){const a=$l(),n=Ca();return()=>{const l=t.default&&La(t.default(),!0);if(!l||!l.length)return;const s=ja(l),i=bt(e),{mode:o}=i;if(n.isLeaving)return Ta(s);const r=Oa(s);if(!r)return Ta(s);let c=Aa(r,i,n,a,e=>c=e);r.type!==ol&&$a(r,c);let d=a.subTree&&Oa(a.subTree);if(d&&d.type!==ol&&!gl(d,r)&&Ia(a).type!==ol){let e=Aa(d,i,n,a);if($a(d,e),"out-in"===o&&r.type!==ol)return n.isLeaving=!0,e.afterLeave=()=>{n.isLeaving=!1,8&a.job.flags||a.update(),delete e.afterLeave,d=void 0},Ta(s);"in-out"===o&&r.type!==ol?e.delayLeave=(e,t,a)=>{Ea(n,d)[String(d.key)]=d,e[ka]=()=>{t(),e[ka]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{a(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function Ea(e,t){const{leavingVNodes:a}=e;let n=a.get(t.type);return n||(n=Object.create(null),a.set(t.type,n)),n}function Aa(e,t,a,n,l){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:r,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:f,onAfterLeave:x,onLeaveCancelled:b,onBeforeAppear:m,onAppear:g,onAfterAppear:h,onAppearCancelled:y}=t,w=String(e.key),k=Ea(a,e),z=(e,t)=>{e&&Nt(e,n,9,t)},C=(e,t)=>{const a=t[1];z(e,t),u(e)?e.every(e=>e.length<=1)&&a():e.length<=1&&a()},_={mode:i,persisted:o,beforeEnter(t){let n=r;if(!a.isMounted){if(!s)return;n=m||r}t[ka]&&t[ka](!0);const l=k[w];l&&gl(e,l)&&l.el[ka]&&l.el[ka](),z(n,[t])},enter(e){let t=c,n=d,l=p;if(!a.isMounted){if(!s)return;t=g||c,n=h||d,l=y||p}let i=!1;const o=e[za]=t=>{i||(i=!0,z(t?l:n,[e]),_.delayedLeave&&_.delayedLeave(),e[za]=void 0)};t?C(t,[e,o]):o()},leave(t,n){const l=String(e.key);if(t[za]&&t[za](!0),a.isUnmounting)return n();z(v,[t]);let s=!1;const i=t[ka]=a=>{s||(s=!0,n(),z(a?b:x,[t]),t[ka]=void 0,k[l]===e&&delete k[l])};k[l]=e,f?C(f,[t,i]):i()},clone(e){const s=Aa(e,t,a,n,l);return l&&l(s),s}};return _}function Ta(e){if(Va(e))return(e=zl(e)).children=null,e}function Oa(e){if(!Va(e))return ua(e.type)&&e.children?ja(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:a}=e;if(a){if(16&t)return a[0];if(32&t&&x(a.default))return a.default()}}function $a(e,t){6&e.shapeFlag&&e.component?(e.transition=t,$a(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function La(e,t=!1,a){let n=[],l=0;for(let s=0;s<e.length;s++){let i=e[s];const o=null==a?i.key:String(a)+String(null!=i.key?i.key:s);i.type===sl?(128&i.patchFlag&&l++,n=n.concat(La(i.children,t,o))):(t||i.type!==ol)&&n.push(null!=o?zl(i,{key:o}):i)}if(l>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function Na(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Pa=new WeakMap;function Ra(e,a,n,s,i=!1){if(u(e))return void e.forEach((e,t)=>Ra(e,a&&(u(a)?a[t]:a),n,s,i));if(Ua(s)&&!i)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&Ra(e,a,n,s.component.subTree));const o=4&s.shapeFlag?Gl(s.component):s.el,c=i?null:o,{i:p,r:v}=e,f=a&&a.r,m=p.refs===t?p.refs={}:p.refs,g=p.setupState,h=bt(g),y=g===t?l:e=>d(h,e);if(null!=f&&f!==v)if(Da(a),b(f))m[f]=null,y(f)&&(g[f]=null);else if(ht(f)){f.value=null;const e=a;e.k&&(m[e.k]=null)}if(x(v))Lt(v,p,12,[c,m]);else{const t=b(v),a=ht(v);if(t||a){const l=()=>{if(e.f){const a=t?y(v)?g[v]:m[v]:v.value;if(i)u(a)&&r(a,o);else if(u(a))a.includes(o)||a.push(o);else if(t)m[v]=[o],y(v)&&(g[v]=m[v]);else{const t=[o];v.value=t,e.k&&(m[e.k]=t)}}else t?(m[v]=c,y(v)&&(g[v]=c)):a&&(v.value=c,e.k&&(m[e.k]=c))};if(c){const t=()=>{l(),Pa.delete(e)};t.id=-1,Pa.set(e,t),Yn(t,n)}else Da(e),l()}}}function Da(e){const t=Pa.get(e);t&&(t.flags|=8,Pa.delete(e))}P().requestIdleCallback,P().cancelIdleCallback;const Ua=e=>!!e.type.__asyncLoader,Va=e=>e.type.__isKeepAlive;function Ba(e,t){Ga(e,"a",t)}function Fa(e,t){Ga(e,"da",t)}function Ga(e,t,a=Ol){const n=e.__wdc||(e.__wdc=()=>{let t=a;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(Wa(t,n,a),a){let e=a.parent;for(;e&&e.parent;)Va(e.parent.vnode)&&Ka(n,t,a,e),e=e.parent}}function Ka(e,t,a,n){const l=Wa(t,e,n,!0);Za(()=>{r(n[t],l)},a)}function Wa(e,t,a=Ol,n=!1){if(a){const l=a[e]||(a[e]=[]),s=t.__weh||(t.__weh=(...n)=>{me();const l=Pl(a),s=Nt(t,a,e,n);return l(),ge(),s});return n?l.unshift(s):l.push(s),s}}const Ha=e=>(t,a=Ol)=>{Ul&&"sp"!==e||Wa(e,(...e)=>t(...e),a)},qa=Ha("bm"),Ja=Ha("m"),Ya=Ha("bu"),Xa=Ha("u"),Qa=Ha("bum"),Za=Ha("um"),en=Ha("sp"),tn=Ha("rtg"),an=Ha("rtc");function nn(e,t=Ol){Wa("ec",e,t)}const ln=Symbol.for("v-ndc");function sn(e,t,a,n){let l;const s=a,i=u(e);if(i||b(e)){let a=!1,n=!1;i&&pt(e)&&(a=!ft(e),n=vt(e),e=Ae(e)),l=new Array(e.length);for(let i=0,o=e.length;i<o;i++)l[i]=t(a?n?gt(mt(e[i])):mt(e[i]):e[i],i,void 0,s)}else if("number"==typeof e){l=new Array(e);for(let a=0;a<e;a++)l[a]=t(a+1,a,void 0,s)}else if(g(e))if(e[Symbol.iterator])l=Array.from(e,(e,a)=>t(e,a,void 0,s));else{const a=Object.keys(e);l=new Array(a.length);for(let n=0,i=a.length;n<i;n++){const i=a[n];l[n]=t(e[i],i,n,s)}}else l=[];return l}const on=e=>e?Dl(e)?Gl(e):on(e.parent):null,rn=o(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>on(e.parent),$root:e=>on(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bn(e),$forceUpdate:e=>e.f||(e.f=()=>{Wt(e.update)}),$nextTick:e=>e.n||(e.n=Kt.bind(e.proxy)),$watch:e=>ra.bind(e)}),cn=(e,a)=>e!==t&&!e.__isScriptSetup&&d(e,a),dn={get({_:e},a){if("__v_skip"===a)return!0;const{ctx:n,setupState:l,data:s,props:i,accessCache:o,type:r,appContext:c}=e;if("$"!==a[0]){const e=o[a];if(void 0!==e)switch(e){case 1:return l[a];case 2:return s[a];case 4:return n[a];case 3:return i[a]}else{if(cn(l,a))return o[a]=1,l[a];if(s!==t&&d(s,a))return o[a]=2,s[a];if(d(i,a))return o[a]=3,i[a];if(n!==t&&d(n,a))return o[a]=4,n[a];pn&&(o[a]=0)}}const u=rn[a];let p,v;return u?("$attrs"===a&&je(e.attrs,0,""),u(e)):(p=r.__cssModules)&&(p=p[a])?p:n!==t&&d(n,a)?(o[a]=4,n[a]):(v=c.config.globalProperties,d(v,a)?v[a]:void 0)},set({_:e},a,n){const{data:l,setupState:s,ctx:i}=e;return cn(s,a)?(s[a]=n,!0):l!==t&&d(l,a)?(l[a]=n,!0):!d(e.props,a)&&(("$"!==a[0]||!(a.slice(1)in e))&&(i[a]=n,!0))},has({_:{data:e,setupState:a,accessCache:n,ctx:l,appContext:s,props:i,type:o}},r){let c;return!!(n[r]||e!==t&&"$"!==r[0]&&d(e,r)||cn(a,r)||d(i,r)||d(l,r)||d(rn,r)||d(s.config.globalProperties,r)||(c=o.__cssModules)&&c[r])},defineProperty(e,t,a){return null!=a.get?e._.accessCache[t]=0:d(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function un(e){return u(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let pn=!0;function vn(e){const t=bn(e),a=e.proxy,l=e.ctx;pn=!1,t.beforeCreate&&fn(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:r,provide:c,inject:d,created:p,beforeMount:v,mounted:f,beforeUpdate:b,updated:m,activated:h,deactivated:y,beforeDestroy:w,beforeUnmount:k,destroyed:z,unmounted:C,render:_,renderTracked:S,renderTriggered:I,errorCaptured:j,serverPrefetch:M,expose:E,inheritAttrs:A,components:T,directives:O,filters:$}=t;if(d&&function(e,t){u(e)&&(e=yn(e));for(const a in e){const n=e[a];let l;l=g(n)?"default"in n?la(n.from||a,n.default,!0):la(n.from||a):la(n),ht(l)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e}):t[a]=l}}(d,l,null),o)for(const n in o){const e=o[n];x(e)&&(l[n]=e.bind(a))}if(s){const t=s.call(a,a);g(t)&&(e.data=rt(t))}if(pn=!0,i)for(const u in i){const e=i[u],t=x(e)?e.bind(a,a):x(e.get)?e.get.bind(a,a):n,s=!x(e)&&x(e.set)?e.set.bind(a):n,o=Kl({get:t,set:s});Object.defineProperty(l,u,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e})}if(r)for(const n in r)xn(r[n],l,a,n);if(c){const e=x(c)?c.call(a):c;Reflect.ownKeys(e).forEach(t=>{!function(e,t){if(Ol){let a=Ol.provides;const n=Ol.parent&&Ol.parent.provides;n===a&&(a=Ol.provides=Object.create(n)),a[e]=t}}(t,e[t])})}function L(e,t){u(t)?t.forEach(t=>e(t.bind(a))):t&&e(t.bind(a))}if(p&&fn(p,e,"c"),L(qa,v),L(Ja,f),L(Ya,b),L(Xa,m),L(Ba,h),L(Fa,y),L(nn,j),L(an,S),L(tn,I),L(Qa,k),L(Za,C),L(en,M),u(E))if(E.length){const t=e.exposed||(e.exposed={});E.forEach(e=>{Object.defineProperty(t,e,{get:()=>a[e],set:t=>a[e]=t,enumerable:!0})})}else e.exposed||(e.exposed={});_&&e.render===n&&(e.render=_),null!=A&&(e.inheritAttrs=A),T&&(e.components=T),O&&(e.directives=O),M&&Na(e)}function fn(e,t,a){Nt(u(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,a)}function xn(e,t,a,n){let l=n.includes(".")?ca(a,n):()=>a[n];if(b(e)){const a=t[e];x(a)&&ia(l,a)}else if(x(e))ia(l,e.bind(a));else if(g(e))if(u(e))e.forEach(e=>xn(e,t,a,n));else{const n=x(e.handler)?e.handler.bind(a):t[e.handler];x(n)&&ia(l,n,e)}}function bn(e){const t=e.type,{mixins:a,extends:n}=t,{mixins:l,optionsCache:s,config:{optionMergeStrategies:i}}=e.appContext,o=s.get(t);let r;return o?r=o:l.length||a||n?(r={},l.length&&l.forEach(e=>mn(r,e,i,!0)),mn(r,t,i)):r=t,g(t)&&s.set(t,r),r}function mn(e,t,a,n=!1){const{mixins:l,extends:s}=t;s&&mn(e,s,a,!0),l&&l.forEach(t=>mn(e,t,a,!0));for(const i in t)if(n&&"expose"===i);else{const n=gn[i]||a&&a[i];e[i]=n?n(e[i],t[i]):t[i]}return e}const gn={data:hn,props:zn,emits:zn,methods:kn,computed:kn,beforeCreate:wn,created:wn,beforeMount:wn,mounted:wn,beforeUpdate:wn,updated:wn,beforeDestroy:wn,beforeUnmount:wn,destroyed:wn,unmounted:wn,activated:wn,deactivated:wn,errorCaptured:wn,serverPrefetch:wn,components:kn,directives:kn,watch:function(e,t){if(!e)return t;if(!t)return e;const a=o(Object.create(null),e);for(const n in t)a[n]=wn(e[n],t[n]);return a},provide:hn,inject:function(e,t){return kn(yn(e),yn(t))}};function hn(e,t){return t?e?function(){return o(x(e)?e.call(this,this):e,x(t)?t.call(this,this):t)}:t:e}function yn(e){if(u(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function wn(e,t){return e?[...new Set([].concat(e,t))]:t}function kn(e,t){return e?o(Object.create(null),e,t):t}function zn(e,t){return e?u(e)&&u(t)?[...new Set([...e,...t])]:o(Object.create(null),un(e),un(null!=t?t:{})):t}function Cn(){return{app:null,config:{isNativeTag:l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _n=0;function Sn(e,t){return function(t,a=null){x(t)||(t=o({},t)),null==a||g(a)||(a=null);const n=Cn(),l=new WeakSet,s=[];let i=!1;const r=n.app={_uid:_n++,_component:t,_props:a,_container:null,_context:n,_instance:null,version:Wl,get config(){return n.config},set config(e){},use:(e,...t)=>(l.has(e)||(e&&x(e.install)?(l.add(e),e.install(r,...t)):x(e)&&(l.add(e),e(r,...t))),r),mixin:e=>(n.mixins.includes(e)||n.mixins.push(e),r),component:(e,t)=>t?(n.components[e]=t,r):n.components[e],directive:(e,t)=>t?(n.directives[e]=t,r):n.directives[e],mount(l,s,o){if(!i){const s=r._ceVNode||kl(t,a);return s.appContext=n,!0===o?o="svg":!1===o&&(o=void 0),e(s,l,o),i=!0,r._container=l,l.__vue_app__=r,Gl(s.component)}},onUnmount(e){s.push(e)},unmount(){i&&(Nt(s,r._instance,16),e(null,r._container),delete r._container.__vue_app__)},provide:(e,t)=>(n.provides[e]=t,r),runWithContext(e){const t=In;In=r;try{return e()}finally{In=t}}};return r}}let In=null;function jn(e,a,...n){if(e.isUnmounted)return;const l=e.vnode.props||t;let s=n;const i=a.startsWith("update:"),o=i&&((e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${I(t)}Modifiers`]||e[`${M(t)}Modifiers`])(l,a.slice(7));let r;o&&(o.trim&&(s=n.map(e=>b(e)?e.trim():e)),o.number&&(s=n.map(L)));let c=l[r=A(a)]||l[r=A(I(a))];!c&&i&&(c=l[r=A(M(a))]),c&&Nt(c,e,6,s);const d=l[r+"Once"];if(d){if(e.emitted){if(e.emitted[r])return}else e.emitted={};e.emitted[r]=!0,Nt(d,e,6,s)}}const Mn=new WeakMap;function En(e,t,a=!1){const n=a?Mn:t.emitsCache,l=n.get(e);if(void 0!==l)return l;const s=e.emits;let i={},r=!1;if(!x(e)){const n=e=>{const a=En(e,t,!0);a&&(r=!0,o(i,a))};!a&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return s||r?(u(s)?s.forEach(e=>i[e]=null):o(i,s),g(e)&&n.set(e,i),i):(g(e)&&n.set(e,null),null)}function An(e,t){return!(!e||!s(t))&&(t=t.slice(2).replace(/Once$/,""),d(e,t[0].toLowerCase()+t.slice(1))||d(e,M(t))||d(e,t))}function Tn(e){const{type:t,vnode:a,proxy:n,withProxy:l,propsOptions:[s],slots:o,attrs:r,emit:c,render:d,renderCache:u,props:p,data:v,setupState:f,ctx:x,inheritAttrs:b}=e,m=ea(e);let g,h;try{if(4&a.shapeFlag){const e=l||n,t=e;g=Il(d.call(t,e,u,p,f,v,x)),h=r}else{const e=t;0,g=Il(e.length>1?e(p,{attrs:r,slots:o,emit:c}):e(p,null)),h=t.props?r:On(r)}}catch(w){cl.length=0,Pt(w,e,1),g=kl(ol)}let y=g;if(h&&!1!==b){const e=Object.keys(h),{shapeFlag:t}=y;e.length&&7&t&&(s&&e.some(i)&&(h=$n(h,s)),y=zl(y,h,!1,!0))}return a.dirs&&(y=zl(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(a.dirs):a.dirs),a.transition&&$a(y,a.transition),g=y,ea(m),g}const On=e=>{let t;for(const a in e)("class"===a||"style"===a||s(a))&&((t||(t={}))[a]=e[a]);return t},$n=(e,t)=>{const a={};for(const n in e)i(n)&&n.slice(9)in t||(a[n]=e[n]);return a};function Ln(e,t,a){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let l=0;l<n.length;l++){const s=n[l];if(t[s]!==e[s]&&!An(a,s))return!0}return!1}const Nn={},Pn=()=>Object.create(Nn),Rn=e=>Object.getPrototypeOf(e)===Nn;function Dn(e,a,n,l){const[s,i]=e.propsOptions;let o,r=!1;if(a)for(let t in a){if(C(t))continue;const c=a[t];let u;s&&d(s,u=I(t))?i&&i.includes(u)?(o||(o={}))[u]=c:n[u]=c:An(e.emitsOptions,t)||t in l&&c===l[t]||(l[t]=c,r=!0)}if(i){const a=bt(n),l=o||t;for(let t=0;t<i.length;t++){const o=i[t];n[o]=Un(s,a,o,l[o],e,!d(l,o))}}return r}function Un(e,t,a,n,l,s){const i=e[a];if(null!=i){const e=d(i,"default");if(e&&void 0===n){const e=i.default;if(i.type!==Function&&!i.skipFactory&&x(e)){const{propsDefaults:s}=l;if(a in s)n=s[a];else{const i=Pl(l);n=s[a]=e.call(null,t),i()}}else n=e;l.ce&&l.ce._setProp(a,n)}i[0]&&(s&&!e?n=!1:!i[1]||""!==n&&n!==M(a)||(n=!0))}return n}const Vn=new WeakMap;function Bn(e,n,l=!1){const s=l?Vn:n.propsCache,i=s.get(e);if(i)return i;const r=e.props,c={},p=[];let v=!1;if(!x(e)){const t=e=>{v=!0;const[t,a]=Bn(e,n,!0);o(c,t),a&&p.push(...a)};!l&&n.mixins.length&&n.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!r&&!v)return g(e)&&s.set(e,a),a;if(u(r))for(let a=0;a<r.length;a++){const e=I(r[a]);Fn(e)&&(c[e]=t)}else if(r)for(const t in r){const e=I(t);if(Fn(e)){const a=r[t],n=c[e]=u(a)||x(a)?{type:a}:o({},a),l=n.type;let s=!1,i=!0;if(u(l))for(let e=0;e<l.length;++e){const t=l[e],a=x(t)&&t.name;if("Boolean"===a){s=!0;break}"String"===a&&(i=!1)}else s=x(l)&&"Boolean"===l.name;n[0]=s,n[1]=i,(s||d(n,"default"))&&p.push(e)}}const f=[c,p];return g(e)&&s.set(e,f),f}function Fn(e){return"$"!==e[0]&&!C(e)}const Gn=e=>"_"===e||"_ctx"===e||"$stable"===e,Kn=e=>u(e)?e.map(Il):[Il(e)],Wn=(e,t,a)=>{if(t._n)return t;const n=ta((...e)=>Kn(t(...e)),a);return n._c=!1,n},Hn=(e,t,a)=>{const n=e._ctx;for(const l in e){if(Gn(l))continue;const a=e[l];if(x(a))t[l]=Wn(0,a,n);else if(null!=a){const e=Kn(a);t[l]=()=>e}}},qn=(e,t)=>{const a=Kn(t);e.slots.default=()=>a},Jn=(e,t,a)=>{for(const n in t)!a&&Gn(n)||(e[n]=t[n])},Yn=function(e,t){t&&t.pendingBranch?u(e)?t.effects.push(...e):t.effects.push(e):(u(a=e)?Ut.push(...a):Vt&&-1===a.id?Vt.splice(Bt+1,0,a):1&a.flags||(Ut.push(a),a.flags|=1),Ht());var a};function Xn(e){return function(e){P().__VUE__=!0;const{insert:l,remove:s,patchProp:i,createElement:o,createText:r,createComment:c,setText:u,setElementText:p,parentNode:v,nextSibling:f,setScopeId:x=n,insertStaticContent:b}=e,m=(e,t,a,n=null,l=null,s=null,i=void 0,o=null,r=!!t.dynamicChildren)=>{if(e===t)return;e&&!gl(e,t)&&(n=Q(e),H(e,l,s,!0),e=null),-2===t.patchFlag&&(r=!1,t.dynamicChildren=null);const{type:c,ref:d,shapeFlag:u}=t;switch(c){case il:g(e,t,a,n);break;case ol:y(e,t,a,n);break;case rl:null==e&&w(t,a,n,i);break;case sl:N(e,t,a,n,l,s,i,o,r);break;default:1&u?_(e,t,a,n,l,s,i,o,r):6&u?R(e,t,a,n,l,s,i,o,r):(64&u||128&u)&&c.process(e,t,a,n,l,s,i,o,r,ne)}null!=d&&l?Ra(d,e&&e.ref,s,t||e,!t):null==d&&e&&null!=e.ref&&Ra(e.ref,null,s,e,!0)},g=(e,t,a,n)=>{if(null==e)l(t.el=r(t.children),a,n);else{const a=t.el=e.el;t.children!==e.children&&u(a,t.children)}},y=(e,t,a,n)=>{null==e?l(t.el=c(t.children||""),a,n):t.el=e.el},w=(e,t,a,n)=>{[e.el,e.anchor]=b(e.children,t,a,n,e.el,e.anchor)},k=({el:e,anchor:t},a,n)=>{let s;for(;e&&e!==t;)s=f(e),l(e,a,n),e=s;l(t,a,n)},z=({el:e,anchor:t})=>{let a;for(;e&&e!==t;)a=f(e),s(e),e=a;s(t)},_=(e,t,a,n,l,s,i,o,r)=>{if("svg"===t.type?i="svg":"math"===t.type&&(i="mathml"),null==e)S(t,a,n,l,s,i,o,r);else{const a=e.el&&e.el._isVueCE?e.el:null;try{a&&a._beginPatch(),A(e,t,l,s,i,o,r)}finally{a&&a._endPatch()}}},S=(e,t,a,n,s,r,c,d)=>{let u,v;const{props:f,shapeFlag:x,transition:b,dirs:m}=e;if(u=e.el=o(e.type,r,f&&f.is,f),8&x?p(u,e.children):16&x&&E(e.children,u,null,n,s,Qn(e,r),c,d),m&&na(e,null,n,"created"),j(u,e,e.scopeId,c,n),f){for(const e in f)"value"===e||C(e)||i(u,e,null,f[e],r,n);"value"in f&&i(u,"value",null,f.value,r),(v=f.onVnodeBeforeMount)&&El(v,n,e)}m&&na(e,null,n,"beforeMount");const g=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(s,b);g&&b.beforeEnter(u),l(u,t,a),((v=f&&f.onVnodeMounted)||g||m)&&Yn(()=>{v&&El(v,n,e),g&&b.enter(u),m&&na(e,null,n,"mounted")},s)},j=(e,t,a,n,l)=>{if(a&&x(e,a),n)for(let s=0;s<n.length;s++)x(e,n[s]);if(l){let a=l.subTree;if(t===a||ll(a.type)&&(a.ssContent===t||a.ssFallback===t)){const t=l.vnode;j(e,t,t.scopeId,t.slotScopeIds,l.parent)}}},E=(e,t,a,n,l,s,i,o,r=0)=>{for(let c=r;c<e.length;c++){const r=e[c]=o?jl(e[c]):Il(e[c]);m(null,r,t,a,n,l,s,i,o)}},A=(e,a,n,l,s,o,r)=>{const c=a.el=e.el;let{patchFlag:d,dynamicChildren:u,dirs:v}=a;d|=16&e.patchFlag;const f=e.props||t,x=a.props||t;let b;if(n&&Zn(n,!1),(b=x.onVnodeBeforeUpdate)&&El(b,n,a,e),v&&na(a,e,n,"beforeUpdate"),n&&Zn(n,!0),(f.innerHTML&&null==x.innerHTML||f.textContent&&null==x.textContent)&&p(c,""),u?T(e.dynamicChildren,u,c,n,l,Qn(a,s),o):r||F(e,a,c,null,n,l,Qn(a,s),o,!1),d>0){if(16&d)L(c,f,x,n,s);else if(2&d&&f.class!==x.class&&i(c,"class",null,x.class,s),4&d&&i(c,"style",f.style,x.style,s),8&d){const e=a.dynamicProps;for(let t=0;t<e.length;t++){const a=e[t],l=f[a],o=x[a];o===l&&"value"!==a||i(c,a,l,o,s,n)}}1&d&&e.children!==a.children&&p(c,a.children)}else r||null!=u||L(c,f,x,n,s);((b=x.onVnodeUpdated)||v)&&Yn(()=>{b&&El(b,n,a,e),v&&na(a,e,n,"updated")},l)},T=(e,t,a,n,l,s,i)=>{for(let o=0;o<t.length;o++){const r=e[o],c=t[o],d=r.el&&(r.type===sl||!gl(r,c)||198&r.shapeFlag)?v(r.el):a;m(r,c,d,null,n,l,s,i,!0)}},L=(e,a,n,l,s)=>{if(a!==n){if(a!==t)for(const t in a)C(t)||t in n||i(e,t,a[t],null,s,l);for(const t in n){if(C(t))continue;const o=n[t],r=a[t];o!==r&&"value"!==t&&i(e,t,r,o,s,l)}"value"in n&&i(e,"value",a.value,n.value,s)}},N=(e,t,a,n,s,i,o,c,d)=>{const u=t.el=e?e.el:r(""),p=t.anchor=e?e.anchor:r("");let{patchFlag:v,dynamicChildren:f,slotScopeIds:x}=t;x&&(c=c?c.concat(x):x),null==e?(l(u,a,n),l(p,a,n),E(t.children||[],a,p,s,i,o,c,d)):v>0&&64&v&&f&&e.dynamicChildren&&e.dynamicChildren.length===f.length?(T(e.dynamicChildren,f,a,s,i,o,c),(null!=t.key||s&&t===s.subTree)&&el(e,t,!0)):F(e,t,a,p,s,i,o,c,d)},R=(e,t,a,n,l,s,i,o,r)=>{t.slotScopeIds=o,null==e?512&t.shapeFlag?l.ctx.activate(t,a,n,i,r):D(t,a,n,l,s,i,r):U(e,t,r)},D=(e,a,n,l,s,i,o)=>{const r=e.component=function(e,a,n){const l=e.type,s=(a?a.appContext:e.appContext)||Al,i={uid:Tl++,vnode:e,type:l,parent:a,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ee(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:a?a.provides:Object.create(s.provides),ids:a?a.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Bn(l,s),emitsOptions:En(l,s),emit:null,emitted:null,propsDefaults:t,inheritAttrs:l.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};i.ctx={_:i},i.root=a?a.root:i,i.emit=jn.bind(null,i),e.ce&&e.ce(i);return i}(e,l,s);if(Va(e)&&(r.ctx.renderer=ne),function(e,t=!1,a=!1){t&&Nl(t);const{props:n,children:l}=e.vnode,s=Dl(e);(function(e,t,a,n=!1){const l={},s=Pn();e.propsDefaults=Object.create(null),Dn(e,t,l,s);for(const i in e.propsOptions[0])i in l||(l[i]=void 0);a?e.props=n?l:ct(l):e.type.props?e.props=l:e.props=s,e.attrs=s})(e,n,s,t),((e,t,a)=>{const n=e.slots=Pn();if(32&e.vnode.shapeFlag){const e=t._;e?(Jn(n,t,a),a&&$(n,"_",e,!0)):Hn(t,n)}else t&&qn(e,t)})(e,l,a||t);const i=s?function(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dn);const{setup:n}=a;if(n){me();const a=e.setupContext=n.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Fl),slots:e.slots,emit:e.emit,expose:t}}(e):null,l=Pl(e),s=Lt(n,e,0,[e.props,a]),i=h(s);if(ge(),l(),!i&&!e.sp||Ua(e)||Na(e),i){if(s.then(Rl,Rl),t)return s.then(t=>{Vl(e,t)}).catch(t=>{Pt(t,e,0)});e.asyncDep=s}else Vl(e,s)}else Bl(e)}(e,t):void 0;t&&Nl(!1)}(r,!1,o),r.asyncDep){if(s&&s.registerDep(r,V,o),!e.el){const t=r.subTree=kl(ol);y(null,t,a,n),e.placeholder=t.el}}else V(r,e,a,n,s,i,o)},U=(e,t,a)=>{const n=t.component=e.component;if(function(e,t,a){const{props:n,children:l,component:s}=e,{props:i,children:o,patchFlag:r}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(a&&r>=0))return!(!l&&!o||o&&o.$stable)||n!==i&&(n?!i||Ln(n,i,c):!!i);if(1024&r)return!0;if(16&r)return n?Ln(n,i,c):!!i;if(8&r){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const a=e[t];if(i[a]!==n[a]&&!An(c,a))return!0}}return!1}(e,t,a)){if(n.asyncDep&&!n.asyncResolved)return void B(n,t,a);n.next=t,n.update()}else t.el=e.el,n.vnode=t},V=(e,t,a,n,l,s,i)=>{const o=()=>{if(e.isMounted){let{next:t,bu:a,u:n,parent:r,vnode:c}=e;{const a=tl(e);if(a)return t&&(t.el=c.el,B(e,t,i)),void a.asyncDep.then(()=>{e.isUnmounted||o()})}let d,u=t;Zn(e,!1),t?(t.el=c.el,B(e,t,i)):t=c,a&&O(a),(d=t.props&&t.props.onVnodeBeforeUpdate)&&El(d,r,t,c),Zn(e,!0);const p=Tn(e),f=e.subTree;e.subTree=p,m(f,p,v(f.el),Q(f),e,l,s),t.el=p.el,null===u&&function({vnode:e,parent:t},a){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n!==e)break;(e=t.vnode).el=a,t=t.parent}}(e,p.el),n&&Yn(n,l),(d=t.props&&t.props.onVnodeUpdated)&&Yn(()=>El(d,r,t,c),l)}else{let i;const{el:o,props:r}=t,{bm:c,m:d,parent:u,root:p,type:v}=e,f=Ua(t);Zn(e,!1),c&&O(c),!f&&(i=r&&r.onVnodeBeforeMount)&&El(i,u,t),Zn(e,!0);{p.ce&&!1!==p.ce._def.shadowRoot&&p.ce._injectChildStyle(v);const i=e.subTree=Tn(e);m(null,i,a,n,e,l,s),t.el=i.el}if(d&&Yn(d,l),!f&&(i=r&&r.onVnodeMounted)){const e=t;Yn(()=>El(i,u,e),l)}(256&t.shapeFlag||u&&Ua(u.vnode)&&256&u.vnode.shapeFlag)&&e.a&&Yn(e.a,l),e.isMounted=!0,t=a=n=null}};e.scope.on();const r=e.effect=new ae(o);e.scope.off();const c=e.update=r.run.bind(r),d=e.job=r.runIfDirty.bind(r);d.i=e,d.id=e.uid,r.scheduler=()=>Wt(d),Zn(e,!0),c()},B=(e,a,n)=>{a.component=e;const l=e.vnode.props;e.vnode=a,e.next=null,function(e,t,a,n){const{props:l,attrs:s,vnode:{patchFlag:i}}=e,o=bt(l),[r]=e.propsOptions;let c=!1;if(!(n||i>0)||16&i){let n;Dn(e,t,l,s)&&(c=!0);for(const s in o)t&&(d(t,s)||(n=M(s))!==s&&d(t,n))||(r?!a||void 0===a[s]&&void 0===a[n]||(l[s]=Un(r,o,s,void 0,e,!0)):delete l[s]);if(s!==o)for(const e in s)t&&d(t,e)||(delete s[e],c=!0)}else if(8&i){const a=e.vnode.dynamicProps;for(let n=0;n<a.length;n++){let i=a[n];if(An(e.emitsOptions,i))continue;const u=t[i];if(r)if(d(s,i))u!==s[i]&&(s[i]=u,c=!0);else{const t=I(i);l[t]=Un(r,o,t,u,e,!1)}else u!==s[i]&&(s[i]=u,c=!0)}}c&&Me(e.attrs,"set","")}(e,a.props,l,n),((e,a,n)=>{const{vnode:l,slots:s}=e;let i=!0,o=t;if(32&l.shapeFlag){const e=a._;e?n&&1===e?i=!1:Jn(s,a,n):(i=!a.$stable,Hn(a,s)),o=a}else a&&(qn(e,a),o={default:1});if(i)for(const t in s)Gn(t)||null!=o[t]||delete s[t]})(e,a.children,n),me(),qt(e),ge()},F=(e,t,a,n,l,s,i,o,r=!1)=>{const c=e&&e.children,d=e?e.shapeFlag:0,u=t.children,{patchFlag:v,shapeFlag:f}=t;if(v>0){if(128&v)return void K(c,u,a,n,l,s,i,o,r);if(256&v)return void G(c,u,a,n,l,s,i,o,r)}8&f?(16&d&&X(c,l,s),u!==c&&p(a,u)):16&d?16&f?K(c,u,a,n,l,s,i,o,r):X(c,l,s,!0):(8&d&&p(a,""),16&f&&E(u,a,n,l,s,i,o,r))},G=(e,t,n,l,s,i,o,r,c)=>{t=t||a;const d=(e=e||a).length,u=t.length,p=Math.min(d,u);let v;for(v=0;v<p;v++){const a=t[v]=c?jl(t[v]):Il(t[v]);m(e[v],a,n,null,s,i,o,r,c)}d>u?X(e,s,i,!0,!1,p):E(t,n,l,s,i,o,r,c,p)},K=(e,t,n,l,s,i,o,r,c)=>{let d=0;const u=t.length;let p=e.length-1,v=u-1;for(;d<=p&&d<=v;){const a=e[d],l=t[d]=c?jl(t[d]):Il(t[d]);if(!gl(a,l))break;m(a,l,n,null,s,i,o,r,c),d++}for(;d<=p&&d<=v;){const a=e[p],l=t[v]=c?jl(t[v]):Il(t[v]);if(!gl(a,l))break;m(a,l,n,null,s,i,o,r,c),p--,v--}if(d>p){if(d<=v){const e=v+1,a=e<u?t[e].el:l;for(;d<=v;)m(null,t[d]=c?jl(t[d]):Il(t[d]),n,a,s,i,o,r,c),d++}}else if(d>v)for(;d<=p;)H(e[d],s,i,!0),d++;else{const f=d,x=d,b=new Map;for(d=x;d<=v;d++){const e=t[d]=c?jl(t[d]):Il(t[d]);null!=e.key&&b.set(e.key,d)}let g,h=0;const y=v-x+1;let w=!1,k=0;const z=new Array(y);for(d=0;d<y;d++)z[d]=0;for(d=f;d<=p;d++){const a=e[d];if(h>=y){H(a,s,i,!0);continue}let l;if(null!=a.key)l=b.get(a.key);else for(g=x;g<=v;g++)if(0===z[g-x]&&gl(a,t[g])){l=g;break}void 0===l?H(a,s,i,!0):(z[l-x]=d+1,l>=k?k=l:w=!0,m(a,t[l],n,null,s,i,o,r,c),h++)}const C=w?function(e){const t=e.slice(),a=[0];let n,l,s,i,o;const r=e.length;for(n=0;n<r;n++){const r=e[n];if(0!==r){if(l=a[a.length-1],e[l]<r){t[n]=l,a.push(n);continue}for(s=0,i=a.length-1;s<i;)o=s+i>>1,e[a[o]]<r?s=o+1:i=o;r<e[a[s]]&&(s>0&&(t[n]=a[s-1]),a[s]=n)}}s=a.length,i=a[s-1];for(;s-- >0;)a[s]=i,i=t[i];return a}(z):a;for(g=C.length-1,d=y-1;d>=0;d--){const e=x+d,a=t[e],p=t[e+1],v=e+1<u?p.el||nl(p):l;0===z[d]?m(null,a,n,v,s,i,o,r,c):w&&(g<0||d!==C[g]?W(a,n,v,2):g--)}}},W=(e,t,a,n,i=null)=>{const{el:o,type:r,transition:c,children:d,shapeFlag:u}=e;if(6&u)return void W(e.component.subTree,t,a,n);if(128&u)return void e.suspense.move(t,a,n);if(64&u)return void r.move(e,t,a,ne);if(r===sl){l(o,t,a);for(let e=0;e<d.length;e++)W(d[e],t,a,n);return void l(e.anchor,t,a)}if(r===rl)return void k(e,t,a);if(2!==n&&1&u&&c)if(0===n)c.beforeEnter(o),l(o,t,a),Yn(()=>c.enter(o),i);else{const{leave:n,delayLeave:i,afterLeave:r}=c,d=()=>{e.ctx.isUnmounted?s(o):l(o,t,a)},u=()=>{o._isLeaving&&o[ka](!0),n(o,()=>{d(),r&&r()})};i?i(o,d,u):u()}else l(o,t,a)},H=(e,t,a,n=!1,l=!1)=>{const{type:s,props:i,ref:o,children:r,dynamicChildren:c,shapeFlag:d,patchFlag:u,dirs:p,cacheIndex:v}=e;if(-2===u&&(l=!1),null!=o&&(me(),Ra(o,null,a,e,!0),ge()),null!=v&&(t.renderCache[v]=void 0),256&d)return void t.ctx.deactivate(e);const f=1&d&&p,x=!Ua(e);let b;if(x&&(b=i&&i.onVnodeBeforeUnmount)&&El(b,t,e),6&d)Y(e.component,a,n);else{if(128&d)return void e.suspense.unmount(a,n);f&&na(e,null,t,"beforeUnmount"),64&d?e.type.remove(e,t,a,ne,n):c&&!c.hasOnce&&(s!==sl||u>0&&64&u)?X(c,t,a,!1,!0):(s===sl&&384&u||!l&&16&d)&&X(r,t,a),n&&q(e)}(x&&(b=i&&i.onVnodeUnmounted)||f)&&Yn(()=>{b&&El(b,t,e),f&&na(e,null,t,"unmounted")},a)},q=e=>{const{type:t,el:a,anchor:n,transition:l}=e;if(t===sl)return void J(a,n);if(t===rl)return void z(e);const i=()=>{s(a),l&&!l.persisted&&l.afterLeave&&l.afterLeave()};if(1&e.shapeFlag&&l&&!l.persisted){const{leave:t,delayLeave:n}=l,s=()=>t(a,i);n?n(e.el,i,s):s()}else i()},J=(e,t)=>{let a;for(;e!==t;)a=f(e),s(e),e=a;s(t)},Y=(e,t,a)=>{const{bum:n,scope:l,job:s,subTree:i,um:o,m:r,a:c}=e;al(r),al(c),n&&O(n),l.stop(),s&&(s.flags|=8,H(i,e,t,a)),o&&Yn(o,t),Yn(()=>{e.isUnmounted=!0},t)},X=(e,t,a,n=!1,l=!1,s=0)=>{for(let i=s;i<e.length;i++)H(e[i],t,a,n,l)},Q=e=>{if(6&e.shapeFlag)return Q(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=f(e.anchor||e.el),a=t&&t[da];return a?f(a):t};let Z=!1;const te=(e,t,a)=>{let n;null==e?t._vnode&&(H(t._vnode,null,null,!0),n=t._vnode.component):m(t._vnode||null,e,t,null,null,null,a),t._vnode=e,Z||(Z=!0,qt(n),Jt(),Z=!1)},ne={p:m,um:H,m:W,r:q,mt:D,mc:E,pc:F,pbc:T,n:Q,o:e};let le;return{render:te,hydrate:le,createApp:Sn(te)}}(e)}function Qn({type:e,props:t},a){return"svg"===a&&"foreignObject"===e||"mathml"===a&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function Zn({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function el(e,t,a=!1){const n=e.children,l=t.children;if(u(n)&&u(l))for(let s=0;s<n.length;s++){const t=n[s];let i=l[s];1&i.shapeFlag&&!i.dynamicChildren&&((i.patchFlag<=0||32===i.patchFlag)&&(i=l[s]=jl(l[s]),i.el=t.el),a||-2===i.patchFlag||el(t,i)),i.type===il&&(-1!==i.patchFlag?i.el=t.el:i.__elIndex=s+(e.type===sl?1:0)),i.type!==ol||i.el||(i.el=t.el)}}function tl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tl(t)}function al(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function nl(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?nl(t.subTree):null}const ll=e=>e.__isSuspense;const sl=Symbol.for("v-fgt"),il=Symbol.for("v-txt"),ol=Symbol.for("v-cmt"),rl=Symbol.for("v-stc"),cl=[];let dl=null;function ul(e=!1){cl.push(dl=e?null:[])}let pl=1;function vl(e,t=!1){pl+=e,e<0&&dl&&t&&(dl.hasOnce=!0)}function fl(e){return e.dynamicChildren=pl>0?dl||a:null,cl.pop(),dl=cl[cl.length-1]||null,pl>0&&dl&&dl.push(e),e}function xl(e,t,a,n,l,s){return fl(wl(e,t,a,n,l,s,!0))}function bl(e,t,a,n,l){return fl(kl(e,t,a,n,l,!0))}function ml(e){return!!e&&!0===e.__v_isVNode}function gl(e,t){return e.type===t.type&&e.key===t.key}const hl=({key:e})=>null!=e?e:null,yl=({ref:e,ref_key:t,ref_for:a})=>("number"==typeof e&&(e=""+e),null!=e?b(e)||ht(e)||x(e)?{i:Qt,r:e,k:t,f:!!a}:e:null);function wl(e,t=null,a=null,n=0,l=null,s=(e===sl?0:1),i=!1,o=!1){const r={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hl(t),ref:t&&yl(t),scopeId:Zt,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Qt};return o?(Ml(r,a),128&s&&e.normalize(r)):a&&(r.shapeFlag|=b(a)?8:16),pl>0&&!i&&dl&&(r.patchFlag>0||6&s)&&32!==r.patchFlag&&dl.push(r),r}const kl=function(e,t=null,a=null,n=0,l=null,s=!1){e&&e!==ln||(e=ol);if(ml(e)){const n=zl(e,t,!0);return a&&Ml(n,a),pl>0&&!s&&dl&&(6&n.shapeFlag?dl[dl.indexOf(e)]=n:dl.push(n)),n.patchFlag=-2,n}i=e,x(i)&&"__vccOpts"in i&&(e=e.__vccOpts);var i;if(t){t=function(e){return e?xt(e)||Rn(e)?o({},e):e:null}(t);let{class:e,style:a}=t;e&&!b(e)&&(t.class=F(e)),g(a)&&(xt(a)&&!u(a)&&(a=o({},a)),t.style=R(a))}const r=b(e)?1:ll(e)?128:ua(e)?64:g(e)?4:x(e)?2:0;return wl(e,t,a,n,l,r,s,!0)};function zl(e,t,a=!1,n=!1){const{props:l,ref:i,patchFlag:o,children:r,transition:c}=e,d=t?function(...e){const t={};for(let a=0;a<e.length;a++){const n=e[a];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=F([t.class,n.class]));else if("style"===e)t.style=R([t.style,n.style]);else if(s(e)){const a=t[e],l=n[e];!l||a===l||u(a)&&a.includes(l)||(t[e]=a?[].concat(a,l):l)}else""!==e&&(t[e]=n[e])}return t}(l||{},t):l,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&hl(d),ref:t&&t.ref?a&&i?u(i)?i.concat(yl(t)):[i,yl(t)]:yl(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==sl?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zl(e.ssContent),ssFallback:e.ssFallback&&zl(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&n&&$a(p,c.clone(p)),p}function Cl(e=" ",t=0){return kl(il,null,e,t)}function _l(e,t){const a=kl(rl,null,e);return a.staticCount=t,a}function Sl(e="",t=!1){return t?(ul(),bl(ol,null,e)):kl(ol,null,e)}function Il(e){return null==e||"boolean"==typeof e?kl(ol):u(e)?kl(sl,null,e.slice()):ml(e)?jl(e):kl(il,null,String(e))}function jl(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:zl(e)}function Ml(e,t){let a=0;const{shapeFlag:n}=e;if(null==t)t=null;else if(u(t))a=16;else if("object"==typeof t){if(65&n){const a=t.default;return void(a&&(a._c&&(a._d=!1),Ml(e,a()),a._c&&(a._d=!0)))}{a=32;const n=t._;n||Rn(t)?3===n&&Qt&&(1===Qt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Qt}}else x(t)?(t={default:t,_ctx:Qt},a=32):(t=String(t),64&n?(a=16,t=[Cl(t)]):a=8);e.children=t,e.shapeFlag|=a}function El(e,t,a,n=null){Nt(e,t,7,[a,n])}const Al=Cn();let Tl=0;let Ol=null;const $l=()=>Ol||Qt;let Ll,Nl;{const e=P(),t=(t,a)=>{let n;return(n=e[t])||(n=e[t]=[]),n.push(a),e=>{n.length>1?n.forEach(t=>t(e)):n[0](e)}};Ll=t("__VUE_INSTANCE_SETTERS__",e=>Ol=e),Nl=t("__VUE_SSR_SETTERS__",e=>Ul=e)}const Pl=e=>{const t=Ol;return Ll(e),e.scope.on(),()=>{e.scope.off(),Ll(t)}},Rl=()=>{Ol&&Ol.scope.off(),Ll(null)};function Dl(e){return 4&e.vnode.shapeFlag}let Ul=!1;function Vl(e,t,a){x(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:g(t)&&(e.setupState=Ct(t)),Bl(e)}function Bl(e,t,a){const l=e.type;e.render||(e.render=l.render||n);{const t=Pl(e);me();try{vn(e)}finally{ge(),t()}}}const Fl={get:(e,t)=>(je(e,0,""),e[t])};function Gl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ct((t=e.exposed,!d(t,"__v_skip")&&Object.isExtensible(t)&&$(t,"__v_skip",!0),t)),{get:(t,a)=>a in t?t[a]:a in rn?rn[a](e):void 0,has:(e,t)=>t in e||t in rn})):e.proxy;var t}const Kl=(e,t)=>Mt(e,0,Ul);const Wl="3.5.27";let Hl;const ql="undefined"!=typeof window&&window.trustedTypes;if(ql)try{Hl=ql.createPolicy("vue",{createHTML:e=>e})}catch(UI){}const Jl=Hl?e=>Hl.createHTML(e):e=>e,Yl="undefined"!=typeof document?document:null,Xl=Yl&&Yl.createElement("template"),Ql={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,n)=>{const l="svg"===t?Yl.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Yl.createElementNS("http://www.w3.org/1998/Math/MathML",e):a?Yl.createElement(e,{is:a}):Yl.createElement(e);return"select"===e&&n&&null!=n.multiple&&l.setAttribute("multiple",n.multiple),l},createText:e=>Yl.createTextNode(e),createComment:e=>Yl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,n,l,s){const i=a?a.previousSibling:t.lastChild;if(l&&(l===s||l.nextSibling))for(;t.insertBefore(l.cloneNode(!0),a),l!==s&&(l=l.nextSibling););else{Xl.innerHTML=Jl("svg"===n?`<svg>${e}</svg>`:"mathml"===n?`<math>${e}</math>`:e);const l=Xl.content;if("svg"===n||"mathml"===n){const e=l.firstChild;for(;e.firstChild;)l.appendChild(e.firstChild);l.removeChild(e)}t.insertBefore(l,a)}return[i?i.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},Zl="transition",es="animation",ts=Symbol("_vtc"),as={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ns=o({},Sa,as),ls=(e=>(e.displayName="Transition",e.props=ns,e))((e,{slots:t})=>function(e,t,a){try{vl(-1);const n=arguments.length;return 2===n?g(t)&&!u(t)?ml(t)?kl(e,null,[t]):kl(e,t):kl(e,null,t):(n>3?a=Array.prototype.slice.call(arguments,2):3===n&&ml(a)&&(a=[a]),kl(e,t,a))}finally{vl(1)}}(Ma,os(e),t)),ss=(e,t=[])=>{u(e)?e.forEach(e=>e(...t)):e&&e(...t)},is=e=>!!e&&(u(e)?e.some(e=>e.length>1):e.length>1);function os(e){const t={};for(const o in e)o in as||(t[o]=e[o]);if(!1===e.css)return t;const{name:a="v",type:n,duration:l,enterFromClass:s=`${a}-enter-from`,enterActiveClass:i=`${a}-enter-active`,enterToClass:r=`${a}-enter-to`,appearFromClass:c=s,appearActiveClass:d=i,appearToClass:u=r,leaveFromClass:p=`${a}-leave-from`,leaveActiveClass:v=`${a}-leave-active`,leaveToClass:f=`${a}-leave-to`}=e,x=function(e){if(null==e)return null;if(g(e))return[rs(e.enter),rs(e.leave)];{const t=rs(e);return[t,t]}}(l),b=x&&x[0],m=x&&x[1],{onBeforeEnter:h,onEnter:y,onEnterCancelled:w,onLeave:k,onLeaveCancelled:z,onBeforeAppear:C=h,onAppear:_=y,onAppearCancelled:S=w}=t,I=(e,t,a,n)=>{e._enterCancelled=n,ds(e,t?u:r),ds(e,t?d:i),a&&a()},j=(e,t)=>{e._isLeaving=!1,ds(e,p),ds(e,f),ds(e,v),t&&t()},M=e=>(t,a)=>{const l=e?_:y,i=()=>I(t,e,a);ss(l,[t,i]),us(()=>{ds(t,e?c:s),cs(t,e?u:r),is(l)||vs(t,n,b,i)})};return o(t,{onBeforeEnter(e){ss(h,[e]),cs(e,s),cs(e,i)},onBeforeAppear(e){ss(C,[e]),cs(e,c),cs(e,d)},onEnter:M(!1),onAppear:M(!0),onLeave(e,t){e._isLeaving=!0;const a=()=>j(e,t);cs(e,p),e._enterCancelled?(cs(e,v),ms(e)):(ms(e),cs(e,v)),us(()=>{e._isLeaving&&(ds(e,p),cs(e,f),is(k)||vs(e,n,m,a))}),ss(k,[e,a])},onEnterCancelled(e){I(e,!1,void 0,!0),ss(w,[e])},onAppearCancelled(e){I(e,!0,void 0,!0),ss(S,[e])},onLeaveCancelled(e){j(e),ss(z,[e])}})}function rs(e){const t=(e=>{const t=b(e)?Number(e):NaN;return isNaN(t)?e:t})(e);return t}function cs(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[ts]||(e[ts]=new Set)).add(t)}function ds(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const a=e[ts];a&&(a.delete(t),a.size||(e[ts]=void 0))}function us(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let ps=0;function vs(e,t,a,n){const l=e._endId=++ps,s=()=>{l===e._endId&&n()};if(null!=a)return setTimeout(s,a);const{type:i,timeout:o,propCount:r}=fs(e,t);if(!i)return n();const c=i+"end";let d=0;const u=()=>{e.removeEventListener(c,p),s()},p=t=>{t.target===e&&++d>=r&&u()};setTimeout(()=>{d<r&&u()},o+1),e.addEventListener(c,p)}function fs(e,t){const a=window.getComputedStyle(e),n=e=>(a[e]||"").split(", "),l=n(`${Zl}Delay`),s=n(`${Zl}Duration`),i=xs(l,s),o=n(`${es}Delay`),r=n(`${es}Duration`),c=xs(o,r);let d=null,u=0,p=0;t===Zl?i>0&&(d=Zl,u=i,p=s.length):t===es?c>0&&(d=es,u=c,p=r.length):(u=Math.max(i,c),d=u>0?i>c?Zl:es:null,p=d?d===Zl?s.length:r.length:0);return{type:d,timeout:u,propCount:p,hasTransform:d===Zl&&/\b(?:transform|all)(?:,|$)/.test(n(`${Zl}Property`).toString())}}function xs(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((t,a)=>bs(t)+bs(e[a])))}function bs(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function ms(e){return(e?e.ownerDocument:document).body.offsetHeight}const gs=Symbol("_vod"),hs=Symbol("_vsh"),ys={name:"show",beforeMount(e,{value:t},{transition:a}){e[gs]="none"===e.style.display?"":e.style.display,a&&t?a.beforeEnter(e):ws(e,t)},mounted(e,{value:t},{transition:a}){a&&t&&a.enter(e)},updated(e,{value:t,oldValue:a},{transition:n}){!t!=!a&&(n?t?(n.beforeEnter(e),ws(e,!0),n.enter(e)):n.leave(e,()=>{ws(e,!1)}):ws(e,t))},beforeUnmount(e,{value:t}){ws(e,t)}};function ws(e,t){e.style.display=t?e[gs]:"none",e[hs]=!t}const ks=Symbol(""),zs=/(?:^|;)\s*display\s*:/;const Cs=/\s*!important$/;function _s(e,t,a){if(u(a))a.forEach(a=>_s(e,t,a));else if(null==a&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const n=function(e,t){const a=Is[t];if(a)return a;let n=I(t);if("filter"!==n&&n in e)return Is[t]=n;n=E(n);for(let l=0;l<Ss.length;l++){const a=Ss[l]+n;if(a in e)return Is[t]=a}return t}(e,t);Cs.test(a)?e.setProperty(M(n),a.replace(Cs,""),"important"):e[n]=a}}const Ss=["Webkit","Moz","ms"],Is={};const js="http://www.w3.org/1999/xlink";function Ms(e,t,a,n,l,s=G(t)){n&&t.startsWith("xlink:")?null==a?e.removeAttributeNS(js,t.slice(6,t.length)):e.setAttributeNS(js,t,a):null==a||s&&!K(a)?e.removeAttribute(t):e.setAttribute(t,s?"":m(a)?String(a):a)}function Es(e,t,a,n,l){if("innerHTML"===t||"textContent"===t)return void(null!=a&&(e[t]="innerHTML"===t?Jl(a):a));const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){const n="OPTION"===s?e.getAttribute("value")||"":e.value,l=null==a?"checkbox"===e.type?"on":"":String(a);return n===l&&"_value"in e||(e.value=l),null==a&&e.removeAttribute(t),void(e._value=a)}let i=!1;if(""===a||null==a){const n=typeof e[t];"boolean"===n?a=K(a):null==a&&"string"===n?(a="",i=!0):"number"===n&&(a=0,i=!0)}try{e[t]=a}catch(UI){}i&&e.removeAttribute(l||t)}function As(e,t,a,n){e.addEventListener(t,a,n)}const Ts=Symbol("_vei");function Os(e,t,a,n,l=null){const s=e[Ts]||(e[Ts]={}),i=s[t];if(n&&i)i.value=n;else{const[a,o]=function(e){let t;if($s.test(e)){let a;for(t={};a=e.match($s);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}const a=":"===e[2]?e.slice(3):M(e.slice(2));return[a,t]}(t);if(n){const i=s[t]=function(e,t){const a=e=>{if(e._vts){if(e._vts<=a.attached)return}else e._vts=Date.now();Nt(function(e,t){if(u(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,a.value),t,5,[e])};return a.value=e,a.attached=Ps(),a}(n,l);As(e,a,i,o)}else i&&(!function(e,t,a,n){e.removeEventListener(t,a,n)}(e,a,i,o),s[t]=void 0)}}const $s=/(?:Once|Passive|Capture)$/;let Ls=0;const Ns=Promise.resolve(),Ps=()=>Ls||(Ns.then(()=>Ls=0),Ls=Date.now());const Rs=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Ds=new WeakMap,Us=new WeakMap,Vs=Symbol("_moveCb"),Bs=Symbol("_enterCb"),Fs=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:o({},ns,{tag:String,moveClass:String}),setup(e,{slots:t}){const a=$l(),n=Ca();let l,s;return Xa(()=>{if(!l.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,a){const n=e.cloneNode(),l=e[ts];l&&l.forEach(e=>{e.split(/\s+/).forEach(e=>e&&n.classList.remove(e))});a.split(/\s+/).forEach(e=>e&&n.classList.add(e)),n.style.display="none";const s=1===t.nodeType?t:t.parentNode;s.appendChild(n);const{hasTransform:i}=fs(n);return s.removeChild(n),i}(l[0].el,a.vnode.el,t))return void(l=[]);l.forEach(Gs),l.forEach(Ks);const n=l.filter(Ws);ms(a.vnode.el),n.forEach(e=>{const a=e.el,n=a.style;cs(a,t),n.transform=n.webkitTransform=n.transitionDuration="";const l=a[Vs]=e=>{e&&e.target!==a||e&&!e.propertyName.endsWith("transform")||(a.removeEventListener("transitionend",l),a[Vs]=null,ds(a,t))};a.addEventListener("transitionend",l)}),l=[]}),()=>{const i=bt(e),o=os(i);let r=i.tag||sl;if(l=[],s)for(let e=0;e<s.length;e++){const t=s[e];t.el&&t.el instanceof Element&&(l.push(t),$a(t,Aa(t,o,n,a)),Ds.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop}))}s=t.default?La(t.default()):[];for(let e=0;e<s.length;e++){const t=s[e];null!=t.key&&$a(t,Aa(t,o,n,a))}return kl(r,null,s)}}});function Gs(e){const t=e.el;t[Vs]&&t[Vs](),t[Bs]&&t[Bs]()}function Ks(e){Us.set(e,{left:e.el.offsetLeft,top:e.el.offsetTop})}function Ws(e){const t=Ds.get(e),a=Us.get(e),n=t.left-a.left,l=t.top-a.top;if(n||l){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${n}px,${l}px)`,t.transitionDuration="0s",e}}const Hs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return u(t)?e=>O(t,e):t};function qs(e){e.target.composing=!0}function Js(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ys=Symbol("_assign");function Xs(e,t,a){return t&&(e=e.trim()),a&&(e=L(e)),e}const Qs={created(e,{modifiers:{lazy:t,trim:a,number:n}},l){e[Ys]=Hs(l);const s=n||l.props&&"number"===l.props.type;As(e,t?"change":"input",t=>{t.target.composing||e[Ys](Xs(e.value,a,s))}),(a||s)&&As(e,"change",()=>{e.value=Xs(e.value,a,s)}),t||(As(e,"compositionstart",qs),As(e,"compositionend",Js),As(e,"change",Js))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:n,trim:l,number:s}},i){if(e[Ys]=Hs(i),e.composing)return;const o=null==t?"":t;if((!s&&"number"!==e.type||/^0\d/.test(e.value)?e.value:L(e.value))!==o){if(document.activeElement===e&&"range"!==e.type){if(n&&t===a)return;if(l&&e.value.trim()===o)return}e.value=o}}},Zs={deep:!0,created(e,t,a){e[Ys]=Hs(a),As(e,"change",()=>{const t=e._modelValue,a=li(e),n=e.checked,l=e[Ys];if(u(t)){const e=H(t,a),s=-1!==e;if(n&&!s)l(t.concat(a));else if(!n&&s){const a=[...t];a.splice(e,1),l(a)}}else if(v(t)){const e=new Set(t);n?e.add(a):e.delete(a),l(e)}else l(si(e,n))})},mounted:ei,beforeUpdate(e,t,a){e[Ys]=Hs(a),ei(e,t,a)}};function ei(e,{value:t,oldValue:a},n){let l;if(e._modelValue=t,u(t))l=H(t,n.props.value)>-1;else if(v(t))l=t.has(n.props.value);else{if(t===a)return;l=W(t,si(e,!0))}e.checked!==l&&(e.checked=l)}const ti={created(e,{value:t},a){e.checked=W(t,a.props.value),e[Ys]=Hs(a),As(e,"change",()=>{e[Ys](li(e))})},beforeUpdate(e,{value:t,oldValue:a},n){e[Ys]=Hs(n),t!==a&&(e.checked=W(t,n.props.value))}},ai={deep:!0,created(e,{value:t,modifiers:{number:a}},n){const l=v(t);As(e,"change",()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>a?L(li(e)):li(e));e[Ys](e.multiple?l?new Set(t):t:t[0]),e._assigning=!0,Kt(()=>{e._assigning=!1})}),e[Ys]=Hs(n)},mounted(e,{value:t}){ni(e,t)},beforeUpdate(e,t,a){e[Ys]=Hs(a)},updated(e,{value:t}){e._assigning||ni(e,t)}};function ni(e,t){const a=e.multiple,n=u(t);if(!a||n||v(t)){for(let l=0,s=e.options.length;l<s;l++){const s=e.options[l],i=li(s);if(a)if(n){const e=typeof i;s.selected="string"===e||"number"===e?t.some(e=>String(e)===String(i)):H(t,i)>-1}else s.selected=t.has(i);else if(W(li(s),t))return void(e.selectedIndex!==l&&(e.selectedIndex=l))}a||-1===e.selectedIndex||(e.selectedIndex=-1)}}function li(e){return"_value"in e?e._value:e.value}function si(e,t){const a=t?"_trueValue":"_falseValue";return a in e?e[a]:t}const ii={created(e,t,a){oi(e,t,a,null,"created")},mounted(e,t,a){oi(e,t,a,null,"mounted")},beforeUpdate(e,t,a,n){oi(e,t,a,n,"beforeUpdate")},updated(e,t,a,n){oi(e,t,a,n,"updated")}};function oi(e,t,a,n,l){const s=function(e,t){switch(e){case"SELECT":return ai;case"TEXTAREA":return Qs;default:switch(t){case"checkbox":return Zs;case"radio":return ti;default:return Qs}}}(e.tagName,a.props&&a.props.type)[l];s&&s(e,t,a,n)}const ri=["ctrl","shift","alt","meta"],ci={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>ri.some(a=>e[`${a}Key`]&&!t.includes(a))},di=(e,t)=>{const a=e._withMods||(e._withMods={}),n=t.join(".");return a[n]||(a[n]=(a,...n)=>{for(let e=0;e<t.length;e++){const n=ci[t[e]];if(n&&n(a,t))return}return e(a,...n)})},ui={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pi=(e,t)=>{const a=e._withKeys||(e._withKeys={}),n=t.join(".");return a[n]||(a[n]=a=>{if(!("key"in a))return;const n=M(a.key);return t.some(e=>e===n||ui[e]===n)?e(a):void 0})},vi=o({patchProp:(e,t,a,n,l,o)=>{const r="svg"===l;"class"===t?function(e,t,a){const n=e[ts];n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}(e,n,r):"style"===t?function(e,t,a){const n=e.style,l=b(a);let s=!1;if(a&&!l){if(t)if(b(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==a[t]&&_s(n,t,"")}else for(const e in t)null==a[e]&&_s(n,e,"");for(const e in a)"display"===e&&(s=!0),_s(n,e,a[e])}else if(l){if(t!==a){const e=n[ks];e&&(a+=";"+e),n.cssText=a,s=zs.test(a)}}else t&&e.removeAttribute("style");gs in e&&(e[gs]=s?n.display:"",e[hs]&&(n.display="none"))}(e,a,n):s(t)?i(t)||Os(e,t,0,n,o):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,a,n){if(n)return"innerHTML"===t||"textContent"===t||!!(t in e&&Rs(t)&&x(a));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("sandbox"===t&&"IFRAME"===e.tagName)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(Rs(t)&&b(a))return!1;return t in e}(e,t,n,r))?(Es(e,t,n),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||Ms(e,t,n,r,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&b(n)?("true-value"===t?e._trueValue=n:"false-value"===t&&(e._falseValue=n),Ms(e,t,n,r)):Es(e,I(t),n,0,t)}},Ql);let fi;const xi={},bi=function(e,t,a){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const l=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");n=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,a),e in xi)return;xi[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(a)for(let a=l.length-1;a>=0;a--){const n=l[a];if(n.href===e&&(!t||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,i&&s.setAttribute("nonce",i),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function l(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&l(e.reason);return e().catch(l)})},mi={PERSONAS:"personas",CONTACTS:"contacts",SETTINGS:"settings",PRESETS:"presets",CONVERSATIONS:"conversations",MESSAGES:"messages",WORLDBOOK_CATEGORIES:"worldbook_categories",WORLDBOOK_ENTRIES:"worldbook_entries",RELATIONSHIPS:"relationships",STICKER_CATEGORIES:"sticker_categories",STICKERS:"stickers",CORE_MEMORIES:"core_memories",FACT_MEMORIES:"fact_memories",REGEX_CATEGORIES:"regex_categories",REGEX_ENTRIES:"regex_entries"};let gi=null,hi=null;const yi=()=>gi?Promise.resolve():hi||(hi=new Promise((e,t)=>{const a=indexedDB.open("Roche_db",11);a.onerror=e=>{const a=e.target.error;hi=null,t(a||"Error opening database")},a.onsuccess=t=>{gi=t.target.result,e()},a.onupgradeneeded=e=>{const t=e.target.result;if(t.objectStoreNames.contains(mi.PERSONAS)||t.createObjectStore(mi.PERSONAS,{keyPath:"id"}),t.objectStoreNames.contains(mi.CONTACTS)||t.createObjectStore(mi.CONTACTS,{keyPath:"id"}),t.objectStoreNames.contains(mi.SETTINGS)||t.createObjectStore(mi.SETTINGS,{keyPath:"id"}),t.objectStoreNames.contains(mi.PRESETS)||t.createObjectStore(mi.PRESETS,{keyPath:"id"}),t.objectStoreNames.contains(mi.CONVERSATIONS)||t.createObjectStore(mi.CONVERSATIONS,{keyPath:"id"}),!t.objectStoreNames.contains(mi.MESSAGES)){const e=t.createObjectStore(mi.MESSAGES,{keyPath:"id"});e.createIndex("conversationId","conversationId",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}if(t.objectStoreNames.contains(mi.WORLDBOOK_CATEGORIES)||t.createObjectStore(mi.WORLDBOOK_CATEGORIES,{keyPath:"id"}),!t.objectStoreNames.contains(mi.WORLDBOOK_ENTRIES)){t.createObjectStore(mi.WORLDBOOK_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1})}if(!t.objectStoreNames.contains(mi.RELATIONSHIPS)){const e=t.createObjectStore(mi.RELATIONSHIPS,{keyPath:"id"});e.createIndex("sourceId","sourceId",{unique:!1}),e.createIndex("targetId","targetId",{unique:!1}),e.createIndex("type","type",{unique:!1})}if(t.objectStoreNames.contains(mi.STICKER_CATEGORIES)||t.createObjectStore(mi.STICKER_CATEGORIES,{keyPath:"id"}),!t.objectStoreNames.contains(mi.STICKERS)){t.createObjectStore(mi.STICKERS,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1})}if(t.objectStoreNames.contains(mi.CORE_MEMORIES)||t.createObjectStore(mi.CORE_MEMORIES,{keyPath:"conversationId"}),!t.objectStoreNames.contains(mi.FACT_MEMORIES)){const e=t.createObjectStore(mi.FACT_MEMORIES,{keyPath:"id"});e.createIndex("conversationId","conversationId",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}if(t.objectStoreNames.contains(mi.REGEX_CATEGORIES)||t.createObjectStore(mi.REGEX_CATEGORIES,{keyPath:"id"}),!t.objectStoreNames.contains(mi.REGEX_ENTRIES)){t.createObjectStore(mi.REGEX_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1})}t.objectStoreNames.contains("chats")&&t.deleteObjectStore("chats")}}),hi),wi=async e=>(gi||await yi(),new Promise((t,a)=>{const n=gi.transaction([e],"readonly").objectStore(e).getAll();n.onsuccess=()=>t(n.result),n.onerror=()=>a(n.error)})),ki=async(e,t)=>(gi||await yi(),new Promise((a,n)=>{const l=gi.transaction([e],"readwrite").objectStore(e).put(t);l.onsuccess=()=>a(),l.onerror=()=>n(l.error)})),zi=async(e,t)=>(gi||await yi(),new Promise((a,n)=>{const l=gi.transaction([e],"readwrite").objectStore(e).delete(t);l.onsuccess=()=>a(),l.onerror=()=>n(l.error)})),Ci=async()=>{gi||await yi();const e=gi.transaction([mi.SETTINGS],"readonly").objectStore(mi.SETTINGS).get("current");return new Promise((t,a)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>a(e.error)})},_i=async e=>ki(mi.SETTINGS,{...e,id:"current"}),Si=async()=>wi(mi.PRESETS),Ii=async e=>ki(mi.PRESETS,e),ji=mi,Mi=async e=>(gi||await yi(),new Promise((t,a)=>{const n=gi.transaction([mi.MESSAGES],"readonly").objectStore(mi.MESSAGES).index("conversationId").getAll(IDBKeyRange.only(e));n.onsuccess=()=>{const e=n.result;e.sort((e,t)=>e.timestamp-t.timestamp),t(e)},n.onerror=()=>a(n.error)})),Ei=async e=>(gi||await yi(),new Promise((t,a)=>{const n=gi.transaction([mi.FACT_MEMORIES],"readonly").objectStore(mi.FACT_MEMORIES).index("conversationId").getAll(IDBKeyRange.only(e));n.onsuccess=()=>{const e=n.result;e.sort((e,t)=>t.timestamp-e.timestamp),t(e)},n.onerror=()=>a(n.error)})),Ai=Object.freeze(Object.defineProperty({__proto__:null,DB_STORES:ji,deleteItem:zi,getAll:wi,getFactMemoriesByConversationId:Ei,getMessagesByConversationId:Mi,getPresets:Si,getRegexEntriesByCategory:async e=>(gi||await yi(),new Promise((t,a)=>{const n=gi.transaction([mi.REGEX_ENTRIES],"readonly").objectStore(mi.REGEX_ENTRIES).index("categoryId").getAll(IDBKeyRange.only(e));n.onsuccess=()=>{const e=n.result;e.sort((e,t)=>(e.order||0)-(t.order||0)),t(e)},n.onerror=()=>a(n.error)})),getSettings:Ci,initDB:yi,put:ki,savePreset:Ii,saveSettings:_i},Symbol.toStringTag,{value:"Module"})),Ti=[{id:"p1",handle:"studio_noir",name:"Noir Official",persona:"A mysterious, high-end design studio director obsessed with brutalism and silence.",avatar:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",bio:"Curating architectural silence and high-contrast fashion. Based in Paris.",link:"noir.studio/archive",location:"Paris, FR",stats:{followers:"18.4k",following:"942"}}],Oi=rt({activePersonaId:localStorage.getItem("noir_active_persona_id")||"p1",personas:[],contacts:[],conversations:[],messages:{},relationships:[],stickerCategories:[],stickers:[],regexCategories:[],regexEntries:[],isInitialized:!1,wallet:JSON.parse(localStorage.getItem("noir_wallet_data")||JSON.stringify({balance:0,hasPassword:!1,password:"",transactions:[]})),videoCallState:{isActive:!1,isMinimized:!1,chatId:null}}),$i=(e,t)=>{Oi.videoCallState.isActive=e,t&&(Oi.videoCallState.chatId=t),e||(Oi.videoCallState.isMinimized=!1,Oi.videoCallState.chatId=null)},Li=()=>{localStorage.setItem("noir_wallet_data",JSON.stringify(Oi.wallet))},Ni=(e,t,a)=>{const n=Date.now(),l={id:crypto.randomUUID(),type:e,amount:t,title:a,timestamp:n,status:"completed"};if("deposit"===e)Oi.wallet.balance+=t;else if("withdraw"===e||"transfer"===e){if(Oi.wallet.balance<t)return!1;Oi.wallet.balance-=t}return Oi.wallet.transactions.unshift(l),Li(),!0},Pi=(e,t)=>{Oi.wallet.balance+=e;const a={id:crypto.randomUUID(),type:"deposit",amount:e,title:"Refund: "+t,timestamp:Date.now(),status:"completed"};Oi.wallet.transactions.unshift(a),Li()},Ri=e=>Oi.wallet.password===e,Di=async()=>{try{await yi();const e=await wi(ji.PERSONAS);if(e.length>0){const t=e.filter(e=>e&&e.id);Oi.personas.splice(0,Oi.personas.length,...t)}else{Oi.personas.splice(0,Oi.personas.length,...Ti);for(const e of Ti)await ki(ji.PERSONAS,e)}const t=(await wi(ji.CONTACTS)).filter(e=>e&&e.id);Oi.contacts.splice(0,Oi.contacts.length,...t);const a=await wi(ji.CONVERSATIONS);Oi.conversations.splice(0,Oi.conversations.length,...a.reverse());const n=await wi(ji.RELATIONSHIPS);Oi.relationships.splice(0,Oi.relationships.length,...n),await Xi(),await(async()=>{const e=await wi(ji.REGEX_CATEGORIES);Oi.regexCategories=e||[];const t=await wi(ji.REGEX_ENTRIES);Oi.regexEntries=t||[]})();const l=localStorage.getItem("noir_active_persona_id");l&&(Oi.activePersonaId=l),Oi.isInitialized=!0}catch(e){}},Ui=Kl(()=>Oi.personas.find(e=>e.id===Oi.activePersonaId)||Oi.personas[0]),Vi=e=>{Oi.activePersonaId=e,localStorage.setItem("noir_active_persona_id",e)},Bi=async e=>{if(!Oi.conversations.find(t=>t.id===e.id)){Oi.conversations.unshift(e);const t=JSON.parse(JSON.stringify(e));await ki(ji.CONVERSATIONS,t);const a=e.myActivePersonaId||Oi.activePersonaId,n=e.participants?.find(t=>t!==a&&"user"!==t&&t!==e.myActivePersonaId)||e.contactId;if(a&&n){Oi.relationships.find(e=>e.sourceId===a&&e.targetId===n)||await Ji(a,n,"new")}}},Fi=async e=>{const t=Oi.conversations.findIndex(t=>t.id===e.id);if(-1!==t){const a={...Oi.conversations[t],...e};Oi.conversations[t]=a;try{const e=bt(a),t=JSON.parse(JSON.stringify(e));await ki(ji.CONVERSATIONS,t)}catch(UI){}}},Gi=async e=>{Oi.messages[e]||(Oi.messages[e]=[]);const t=await Mi(e);Oi.messages[e]=t},Ki=async(e,t)=>{Oi.messages[e]||(Oi.messages[e]=[]),Oi.messages[e].push(t),await ki(ji.MESSAGES,t);const a=Oi.conversations.find(t=>t.id===e);a&&Fi({...a,lastMessage:t.text,time:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),updatedAt:t.timestamp}),setTimeout(()=>{uo(e).catch(e=>{})},500)},Wi=async(e,t)=>{if(!Oi.messages[e])return;const a=Oi.messages[e].findIndex(e=>e.id===t.id);-1!==a&&(Oi.messages[e][a]=t,await ki(ji.MESSAGES,t))},Hi=async(e,t)=>{if(Oi.messages[e]){Oi.messages[e]=Oi.messages[e].filter(e=>!t.includes(e.id));for(const e of t)await zi(ji.MESSAGES,e)}},qi=e=>Oi.conversations.find(t=>t.id===e),Ji=async(e,t,a)=>{const n=Oi.relationships.find(a=>a.sourceId===e&&a.targetId===t);if(n)return void(n.type!==a&&await Yi(n.id,a));const l={id:crypto.randomUUID(),sourceId:e,targetId:t,type:a,createdAt:Date.now()};Oi.relationships.push(l),await ki(ji.RELATIONSHIPS,l)},Yi=async(e,t)=>{const a=Oi.relationships.findIndex(t=>t.id===e);if(-1!==a){const e={...Oi.relationships[a],type:t};Oi.relationships[a]=e,await ki(ji.RELATIONSHIPS,e)}},Xi=async()=>{const e=await wi(ji.STICKER_CATEGORIES);Oi.stickerCategories=e||[];const t=await wi(ji.STICKERS);Oi.stickers=t||[]},Qi=async(e,t)=>{const a={id:crypto.randomUUID(),name:e,coverUrl:t||"",createdAt:Date.now()};return Oi.stickerCategories.push(a),await ki(ji.STICKER_CATEGORIES,a),a},Zi=async e=>{const t=Oi.stickerCategories.findIndex(t=>t.id===e);if(-1!==t){Oi.stickerCategories.splice(t,1),await zi(ji.STICKER_CATEGORIES,e);const a=Oi.stickers.filter(t=>t.categoryId===e);for(const e of a)await to(e.id)}},eo=async(e,t,a)=>{const n={id:crypto.randomUUID(),categoryId:e,url:t,keyword:a||"sticker",createdAt:Date.now()};return Oi.stickers.push(n),await ki(ji.STICKERS,n),n},to=async e=>{const t=Oi.stickers.findIndex(t=>t.id===e);-1!==t&&(Oi.stickers.splice(t,1),await zi(ji.STICKERS,e))},ao=e=>Oi.stickers.filter(t=>t.categoryId===e),no=async e=>{try{const t=await wi(ji.CORE_MEMORIES);return t.find(t=>t.conversationId===e)||null}catch(UI){return null}},lo=async(e,t)=>{const a={conversationId:e,summary:t,lastUpdatedAt:Date.now()};return await ki(ji.CORE_MEMORIES,a),a},so=async e=>{try{return await Ei(e)}catch(UI){return[]}},io=async(e,t)=>{const a={id:crypto.randomUUID(),conversationId:e,...t,timestamp:Date.now()};return await ki(ji.FACT_MEMORIES,a),a},oo=e=>{if(!e||"null"===e)return null;try{const t=new Date(e);return isNaN(t.getTime())?null:t.getTime()}catch{return null}},ro=async e=>{try{const t=(await wi(ji.FACT_MEMORIES)).find(t=>t.id===e);t&&(t.appointmentMentioned=!0,await ki(ji.FACT_MEMORIES,t))}catch(UI){}},co=new Set,uo=async e=>{if(!co.has(e))try{const t=Oi.conversations.find(t=>t.id===e);if(!t)return;if(!(!0===t.localSettings?.longTermMemoryEnabled))return;const a=t.localSettings?.ltmSummarizeTrigger||100,n=Oi.messages[e]||[],l=await no(e),s=l?.lastUpdatedAt||0,i=n.filter(e=>e.timestamp>s);if(i.length>=a){co.add(e);try{await po(e,i)}finally{co.delete(e)}}}catch(UI){co.delete(e)}},po=async(e,t)=>{try{const n=await(async e=>{try{const t=localStorage.getItem("noir_mounted_apis");if(t){const a=JSON.parse(t)[e];if(a&&"default"!==a){const{getPresets:e}=await bi(async()=>{const{getPresets:e}=await Promise.resolve().then(()=>Ai);return{getPresets:e}},void 0,import.meta.url),t=(await e()).find(e=>e.id===a);if(t)return{endpoint:t.endpoint,apiKey:t.apiKey,model:t.model,temperature:t.temperature??.3}}}const{getSettings:a}=await bi(async()=>{const{getSettings:e}=await Promise.resolve().then(()=>Ai);return{getSettings:e}},void 0,import.meta.url),n=await a();return n?{endpoint:n.endpoint,apiKey:n.apiKey,model:n.model,temperature:.3}:null}catch(UI){return null}})("memorySummarization");if(!n||!n.apiKey)return;const l=Oi.conversations.find(t=>t.id===e),s=l?.localSettings?.ltmCoreMaxChars||500,i=await no(e),o=i?.summary||"",r=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},c=t.map(e=>{const t=e.isMe?"User":Oi.contacts.find(t=>t.id===e.senderId)?.name||"Assistant",a=e.timestamp?`[${r(e.timestamp)}]`:"";let n=e.text||"";return"transfer"===e.type?n=`[${e.amount}${e.recipientName||""}${e.note?": "+e.note:""}]`:"sticker"===e.type?n=`[: ${e.keyword||""}]`:"voice"===e.type?n=`[: ${e.text||""}]`:"image"===e.type?n="[]":"payment_notice"===e.type?n="collect"===e.action?`[${e.amount}]`:`[${e.amount}]`:n||(n="[]"),`${a} ${t}: ${n}`}).join("\n"),d=new Date,u=`\n\n15\n****\n \n1. \n2. \n3. \n4. \n5. \n\n \n- \n- TODO\n- \n- \n\n{"who": "", "what": "", "when": "", "fact_type": "", "appointment_time": "null"}\n\n\n- event: \n- preference: \n- relationship: \n- identity: \n- appointment: \n\n YYYY-MM-DD HH:mm ${`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`}\n appointment  appointment_time\n \n //\n\n2\n${s}\n\n\n${o?`${o}\n`:""}\n${c}\n\nJSON\n{"facts": [{"who": "", "what": "", "when": "YYYY-MM-DD HH:mm", "fact_type": "", "appointment_time": "YYYY-MM-DD HH:mmnull"}], "core_summary": ""}`,p=n.endpoint.replace(/\/+$/,"")+"/chat/completions",v=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.apiKey}`},body:JSON.stringify({model:n.model,messages:[{role:"system",content:""},{role:"user",content:u}],temperature:n.temperature,response_format:{type:"json_object"}})});if(!v.ok)throw new Error(`API Error: ${v.status}`);const f=await v.json(),x=f.choices?.[0]?.message?.content;if(x)try{const t=JSON.parse(x);if(t.facts&&Array.isArray(t.facts))for(const a of t.facts){const t=Array.isArray(a.who)?a.who:[a.who].filter(Boolean);await io(e,{who:t,action:a.what,when:a.when||null,factType:a.fact_type||"other",appointmentTime:a.appointment_time?oo(a.appointment_time):null,appointmentMentioned:!1})}t.core_summary&&await lo(e,t.core_summary)}catch(a){}}catch(UI){}},vo=e=>e?e.toLowerCase().replace(/[""''\s]+/g," ").split(" ").filter(e=>e.length>0):[],fo=(e,t,a)=>{const n=vo(e),l=vo(t),s=l.length;if(0===n.length||0===s)return 0;const i={};l.forEach(e=>{i[e]=(i[e]||0)+1});let o=0;return n.forEach(e=>{const t=i[e]||0;if(t>0){const e=Math.log(2);o+=e*(2.5*t/(t+1.5*(.25+.75*s/a)))}}),o},xo=e=>{const t=(Date.now()-e)/864e5;return t<=3?1:Math.exp(-.1*(t-3))},bo=(e,t,a)=>{const n=Oi.conversations.find(t=>t.id===e);if(!n)return!1;if("group"===n.type||n.isGroup){const e=n.members||[];return a.some(t=>e.includes(t))}return a.includes(e)||t===e},mo=e=>{if(e.length<=1)return e;const t=new Map;return e.forEach(e=>{const a=(e.action||e.what||"").toLowerCase().trim().substring(0,50);(!t.has(a)||e.timestamp>(t.get(a).timestamp||0))&&t.set(a,e)}),Array.from(t.values())},go=async(e,t)=>{const a={recentFacts:[],rankedFacts:[],noteMemory:null,coreMemories:[],upcomingAppointments:[],overdueAppointments:[]};try{const n=Oi.conversations.find(t=>t.id===e);if(!n)return a;const l=n.localSettings?.mountedMemorySources||[],s="group"===n.type||n.isGroup?n.members||[]:[n.id],i=[e,...l];let o=[],r=[];const c=Date.now(),d=c-2592e5,u=c-2592e6;for(const t of i){if(t!==e&&!bo(t,e,s))continue;const n=await no(t);if(n?.summary){const e=Oi.conversations.find(e=>e.id===t),l=e?.title||e?.handle||("group"===e?.type?"":Oi.contacts.find(e=>e.id===t)?.name||"");a.coreMemories.push({source:l,summary:n.summary})}const l=await so(t);l&&l.length>0&&l.forEach(e=>{const n={...e,sourceConversationId:t,sourceType:"group"===Oi.conversations.find(e=>e.id===t)?.type?"group":"dm"};e.timestamp>=d?a.recentFacts.push(n):(o.push(n),e.timestamp<u&&r.push(n))})}if(a.recentFacts=mo(a.recentFacts),o.length>0&&t){const e=o.reduce((e,t)=>e+vo(t.action||t.what||"").length,0)/o.length;o=o.map(a=>({...a,score:fo(t,a.action||a.what||"",e)*xo(a.timestamp||0)})),o.sort((e,t)=>t.score-e.score),o=mo(o);const n=15-a.recentFacts.length;a.rankedFacts=o.slice(0,Math.max(0,n))}if(r.length>0&&Math.random()<.2){const e=Math.floor(Math.random()*r.length);a.noteMemory=r[e]}const p=108e5,v=[...a.recentFacts,...o].filter(e=>"appointment"===e.factType&&e.appointmentTime&&!e.appointmentMentioned);a.upcomingAppointments=v.filter(e=>e.appointmentTime>c&&e.appointmentTime<=c+p),a.overdueAppointments=v.filter(e=>e.appointmentTime<=c&&e.appointmentTime>c-p),a.upcomingAppointments.length>0||a.overdueAppointments.length}catch(UI){}return a},ho=async(e,t)=>{const a={id:crypto.randomUUID(),name:e,scope:t,timestamp:Date.now()};return Oi.regexCategories.push(a),await ki(ji.REGEX_CATEGORIES,a),a},yo=async e=>{const t=Oi.regexCategories.findIndex(t=>t.id===e);if(-1!==t){Oi.regexCategories.splice(t,1),await zi(ji.REGEX_CATEGORIES,e);const a=Oi.regexEntries.filter(t=>t.categoryId===e);for(const e of a)await zo(e.id)}},wo=async e=>{const t={id:crypto.randomUUID(),...e,timestamp:Date.now()};return Oi.regexEntries.push(t),await ki(ji.REGEX_ENTRIES,t),t},ko=async(e,t)=>{const a=Oi.regexEntries.findIndex(t=>t.id===e);if(-1!==a){const e={...Oi.regexEntries[a],...t};Oi.regexEntries[a]=e,await ki(ji.REGEX_ENTRIES,e)}},zo=async e=>{const t=Oi.regexEntries.findIndex(t=>t.id===e);-1!==t&&(Oi.regexEntries.splice(t,1),await zi(ji.REGEX_ENTRIES,e))},Co=e=>Oi.regexEntries.filter(t=>t.categoryId===e).sort((e,t)=>(e.order||0)-(t.order||0)),_o=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a},So={class:"h-full flex flex-col bg-background-light text-black"},Io={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-50"},jo={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Mo={class:"flex-1"},Eo={class:"flex-1 flex justify-end"},Ao={class:"flex-1 overflow-y-auto w-full pb-[calc(6rem+env(safe-area-inset-bottom))]"},To={class:"relative px-6 py-8 border-b border-gray-50"},Oo={class:"ml-14 mt-6 flex items-center gap-6 text-black"},$o={__name:"Feed",emits:["close","navigate"],setup:(e,{emit:t})=>(e,t)=>(ul(),xl("div",So,[wl("header",Io,[wl("div",jo,[wl("div",Mo,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[4]||(t[4]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),t[6]||(t[6]=wl("div",{class:"flex justify-center"},[wl("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir")],-1)),wl("div",Eo,[wl("button",{onClick:t[1]||(t[1]=t=>e.$emit("navigate","following")),class:"size-10 rounded-full bg-white border border-gray-100 flex items-center justify-center overflow-hidden hover:bg-gray-50 transition-colors -mr-2"},[...t[5]||(t[5]=[wl("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-black"},[wl("circle",{cx:"11",cy:"11",r:"8"}),wl("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)])])])])]),wl("main",Ao,[wl("article",To,[t[10]||(t[10]=_l('<div class="thread-line" data-v-72b05aaa></div><div class="flex items-start gap-4 mb-4 relative z-10" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-900 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="w-1/2 h-[1px] bg-white rotate-45" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><div class="flex items-center gap-1" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>studio_noir</span><span class="material-symbols-outlined text-[14px] active-icon" data-v-72b05aaa>verified</span></div><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>4m</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> Symmetry in stone. A study of concrete textures and morning shadows. Winter editorial. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div>',2)),wl("div",{onClick:t[2]||(t[2]=t=>e.$emit("navigate","post",{id:"p1"})),class:"cursor-pointer ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-[4/5] editorial-image",style:{"background-image":"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E')","background-size":"cover","background-position":"center"}}),wl("div",Oo,[t[8]||(t[8]=wl("button",{class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[wl("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[wl("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),wl("span",{class:"text-[12px] font-medium"},"2.8k")],-1)),wl("button",{onClick:t[3]||(t[3]=t=>e.$emit("navigate","post",{id:"p1"})),class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[...t[7]||(t[7]=[wl("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[wl("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),wl("span",{class:"text-[12px] font-medium"},"56",-1)])]),t[9]||(t[9]=_l('<button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>112</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button>',2))])]),t[11]||(t[11]=_l('<article class="relative px-6 py-8 border-b border-gray-50" data-v-72b05aaa><div class="flex items-start gap-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-50 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-4 rounded-sm border border-black rotate-12" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>elena_di_rossi</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>2h</span></div><p class="text-[15px] leading-relaxed mt-1 font-serif italic text-zinc-900" data-v-72b05aaa> In design, if you are not taking a risk, you are not doing anything new. Perfection is the enemy. </p><div class="mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>892</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>4</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div></article><article class="relative px-6 py-8" data-v-72b05aaa><div class="flex items-start gap-4 mb-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-5 border-2 border-white/40 rounded-full" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>arc_digest</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>5h</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> High desert sanctuary. Minimalism meets nature. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div><div class="ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-video editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0&#39;);background-size:cover;background-position:center;" data-v-72b05aaa></div><div class="ml-14 mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>2.1k</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>14</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></article>',2))])]))},Lo=_o($o,[["__scopeId","data-v-72b05aaa"]]),No={class:"fixed inset-x-0 bottom-0 h-[92%] z-[60] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},Po={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},Ro={class:"text-[16px] font-bold tracking-tight"},Do={class:"flex-1 overflow-y-auto"},Uo={key:0,class:"pb-[100px]"},Vo={class:"px-4 py-2 mt-2"},Bo={class:"flex items-center gap-2 bg-neutral-100 px-3 py-2 rounded-xl"},Fo=["onClick"],Go={class:"flex items-center gap-3"},Ko={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Wo={class:"flex flex-col"},Ho={class:"text-[14px] font-bold leading-tight"},qo={class:"text-[13px] text-neutral-500 leading-tight"},Jo={key:1,class:"pb-[100px] px-4 pt-2"},Yo={class:"flex flex-col gap-4"},Xo=["onClick"],Qo={class:"flex-1"},Zo={class:"text-[15px] font-bold tracking-tight"},er={class:"text-[12px] text-zinc-500"},tr={__name:"NewMessage",emits:["close","create-group","navigate"],setup(e,{emit:t}){const a=t,n=yt(""),l=Kl(()=>{if(!n.value)return Oi.contacts;const e=n.value.toLowerCase();return Oi.contacts.filter(t=>t.handle.toLowerCase().includes(e)||t.name&&t.name.toLowerCase().includes(e))}),s=yt("contacts"),i=yt(null),o=()=>{"persona"===s.value?s.value="contacts":a("close")};return(e,t)=>(ul(),xl("div",No,[wl("header",Po,[wl("button",{onClick:o,class:"text-[16px] text-black hover:opacity-70 transition-opacity"},J("persona"===s.value?"Back":"Cancel"),1),wl("h2",Ro,J("persona"===s.value?"Select Persona":"New message"),1),t[2]||(t[2]=wl("div",{class:"w-[50px]"},null,-1))]),wl("div",Do,["contacts"===s.value?(ul(),xl("div",Uo,[wl("div",Vo,[wl("div",Bo,[t[3]||(t[3]=wl("span",{class:"material-symbols-outlined text-neutral-400 text-[20px]"},"search",-1)),aa(wl("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),type:"text",placeholder:"Search",class:"bg-transparent border-none text-[15px] placeholder:text-neutral-400 focus:ring-0 w-full p-0"},null,512),[[Qs,n.value]])])]),wl("div",{onClick:t[1]||(t[1]=t=>e.$emit("create-group")),class:"flex items-center gap-4 px-4 py-4 hover:bg-neutral-50 transition-colors cursor-pointer"},[...t[4]||(t[4]=[wl("div",{class:"size-12 rounded-full border border-neutral-200 flex items-center justify-center bg-transparent shrink-0"},[wl("span",{class:"material-symbols-outlined text-[24px] text-black"},"group_add")],-1),wl("span",{class:"text-[15px] font-medium tracking-tight"},"Create a New Group",-1)])]),t[6]||(t[6]=wl("div",{class:"px-4 py-2 mt-2"},[wl("span",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase"},"Suggested")],-1)),(ul(!0),xl(sl,null,sn(l.value,e=>(ul(),xl("div",{key:e.id,onClick:t=>{return a=e.id,i.value=a,void(s.value="persona");var a},class:"flex items-center justify-between px-4 py-3 hover:bg-neutral-50 transition-colors cursor-pointer"},[wl("div",Go,[wl("div",{class:"size-10 rounded-full bg-neutral-900 overflow-hidden shrink-0 border border-neutral-100",style:R({backgroundImage:e.avatar?`url(${e.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[e.avatar?Sl("",!0):(ul(),xl("div",Ko))],4),wl("div",Wo,[wl("span",Ho,J(e.handle),1),wl("span",qo,J(e.name||"No Name"),1)])]),t[5]||(t[5]=wl("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"chevron_right",-1))],8,Fo))),128))])):"persona"===s.value?(ul(),xl("div",Jo,[wl("div",Yo,[(ul(!0),xl(sl,null,sn(kt(Oi).personas,e=>(ul(),xl("div",{key:e.id,onClick:t=>{return n=e.id,Vi(n),a("navigate","chat",{id:i.value}),void a("close");var n},class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[wl("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:R({backgroundImage:`url(${e.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),wl("div",Qo,[wl("h3",Zo,J(e.handle),1),wl("p",er,J(e.name),1)])],8,Xo))),128))])])):Sl("",!0)])]))}},ar=_o(tr,[["__scopeId","data-v-a35529b4"]]),nr={class:"fixed inset-x-0 bottom-0 h-[92%] z-[70] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},lr={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},sr={class:"text-[16px] font-bold tracking-tight"},ir=["disabled"],or={key:1,class:"w-[30px]"},rr={class:"flex-1 overflow-y-auto px-6 pt-8 pb-[calc(6rem+env(safe-area-inset-bottom))]"},cr={key:0},dr={class:"flex flex-col items-center gap-6 mb-10"},ur={key:1,class:"material-symbols-outlined text-[24px]"},pr={class:"w-full"},vr={class:"mt-8"},fr={key:0,class:"text-center py-4 text-neutral-400 text-sm"},xr={class:"flex flex-col gap-1"},br=["onClick"],mr={class:"flex items-center gap-3"},gr={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},hr={class:"text-[14px] font-bold"},yr={key:0,class:"material-symbols-outlined text-white text-[16px]"},wr={key:1,class:"mt-6 pt-6 border-t border-gray-100"},kr={class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},zr={class:"flex flex-wrap gap-4"},Cr=["onClick"],_r={class:"text-[10px] text-neutral-600 text-center truncate w-full leading-tight"},Sr={key:1},Ir={class:"flex flex-col gap-4"},jr=["onClick"],Mr={class:"flex-1"},Er={class:"text-[15px] font-bold tracking-tight"},Ar={class:"text-[12px] text-zinc-500"},Tr={__name:"CreateGroup",emits:["back","create"],setup(e,{emit:t}){const a=t,n=yt(""),l=yt(new Set),s=Kl(()=>Oi.contacts),i=Kl(()=>Oi.contacts.filter(e=>l.value.has(e.id))),o=yt("details"),r=yt(""),c=()=>{const e=prompt("Enter image URL for group photo:");e&&(r.value=e)},d=()=>{"details"===o.value&&n.value&&(o.value="persona")},u=()=>{"persona"===o.value?o.value="details":a("back")};return(e,t)=>(ul(),xl("div",nr,[wl("header",lr,[wl("button",{onClick:u,class:"text-[16px] text-black hover:opacity-70 transition-opacity flex items-center -ml-1"},[t[1]||(t[1]=wl("span",{class:"material-symbols-outlined text-[24px]"},"chevron_left",-1)),Cl(" "+J((o.value,"Back")),1)]),wl("h2",sr,J("persona"===o.value?"Select Persona":"Create group"),1),"details"===o.value?(ul(),xl("button",{key:0,onClick:d,class:"text-[16px] font-bold text-black hover:opacity-70 transition-opacity disabled:opacity-30",disabled:!n.value||i.value.length<2}," Next ",8,ir)):(ul(),xl("div",or))]),wl("main",rr,["details"===o.value?(ul(),xl("div",cr,[wl("div",dr,[wl("button",{onClick:c,class:"size-24 rounded-full border border-dashed border-neutral-300 flex items-center justify-center flex-col gap-1 text-neutral-400 hover:bg-neutral-50 transition-colors overflow-hidden relative"},[r.value?(ul(),xl("div",{key:0,class:"absolute inset-0 bg-cover bg-center",style:R({backgroundImage:`url(${r.value})`})},null,4)):(ul(),xl("span",ur,"add_a_photo"))]),t[2]||(t[2]=wl("span",{class:"text-[10px] font-bold uppercase tracking-widest text-neutral-400"},"Add Group Photo",-1)),wl("div",pr,[aa(wl("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),type:"text",placeholder:"Group name",class:"w-full bg-transparent border-0 border-b border-neutral-200 px-0 py-3 text-lg placeholder:text-neutral-300 focus:ring-0 focus:border-black transition-colors"},null,512),[[Qs,n.value]])])]),wl("div",vr,[t[4]||(t[4]=wl("h3",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},"Select Members (Min 2)",-1)),0===s.value.length?(ul(),xl("div",fr," No contacts found in Following. ")):Sl("",!0),wl("div",xr,[(ul(!0),xl(sl,null,sn(s.value,e=>(ul(),xl("div",{key:e.id,onClick:t=>{return a=e.id,void(l.value.has(a)?l.value.delete(a):l.value.add(a));var a},class:"flex items-center justify-between py-3 px-2 -mx-2 hover:bg-neutral-50 rounded-xl cursor-pointer transition-colors"},[wl("div",mr,[wl("div",{class:"size-10 rounded-full bg-neutral-900 border border-neutral-100 overflow-hidden",style:R({backgroundImage:e.avatar?`url(${e.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[e.avatar?Sl("",!0):(ul(),xl("div",gr))],4),wl("span",hr,J(e.handle),1)]),wl("div",{class:F(["size-6 rounded-full border flex items-center justify-center transition-all",l.value.has(e.id)?"bg-black border-black":"border-neutral-300 bg-white"])},[l.value.has(e.id)?(ul(),xl("span",yr,"check")):Sl("",!0)],2)],8,br))),128))]),i.value.length>0?(ul(),xl("div",wr,[wl("h3",kr,"Selected ("+J(i.value.length)+")",1),wl("div",zr,[(ul(!0),xl(sl,null,sn(i.value,e=>(ul(),xl("div",{key:e.id,class:"flex flex-col items-center gap-2 group relative w-[60px]"},[wl("div",{class:"size-12 rounded-full bg-neutral-900 border border-white/20 shadow-sm relative overflow-hidden",style:R({backgroundImage:e.avatar?`url(${e.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[wl("button",{onClick:di(t=>{return a=e.id,void l.value.delete(a);var a},["stop"]),class:"absolute top-0 right-0 size-4 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-100 hover:bg-neutral-100"},[...t[3]||(t[3]=[wl("span",{class:"material-symbols-outlined text-[10px] text-black"},"close",-1)])],8,Cr)],4),wl("span",_r,J(e.handle),1)]))),128))])])):Sl("",!0)])])):"persona"===o.value?(ul(),xl("div",Sr,[wl("div",Ir,[(ul(!0),xl(sl,null,sn(kt(Oi).personas,e=>(ul(),xl("div",{key:e.id,onClick:t=>{return s=e.id,Vi(s),void a("create",{name:n.value,avatar:r.value,members:Array.from(l.value)});var s},class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[wl("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:R({backgroundImage:`url(${e.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),wl("div",Mr,[wl("h3",Er,J(e.handle),1),wl("p",Ar,J(e.name),1)])],8,jr))),128))])])):Sl("",!0)])]))}},Or={class:"h-full flex flex-col bg-background-light text-black relative"},$r={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100/50"},Lr={class:"px-6 pb-4 pt-[calc(10px_+_env(safe-area-inset-top))] w-full"},Nr={class:"flex items-center justify-between mb-6"},Pr={class:"flex items-center gap-2"},Rr={class:"flex-1 overflow-y-auto w-full pb-24"},Dr=["onClick"],Ur={key:0,class:"size-14 shrink-0 rounded-full avatar-abstract flex items-center justify-center"},Vr={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Br={class:"flex-1 min-w-0"},Fr={class:"flex items-center justify-between mb-0.5"},Gr={class:"font-bold text-[15px] tracking-tight"},Kr={class:"flex items-center gap-2"},Wr={key:0,class:"size-2 bg-black rounded-full"},Hr={__name:"Inbox",emits:["navigate","close"],setup(e,{emit:t}){const a=t,n=yt(!1),l=yt(!1),s=()=>{l.value=!0},i=e=>{l.value=!1,n.value=!1;const t={id:"group_"+Date.now(),type:"group",name:e.name,handle:e.name.toLowerCase().replace(/\s+/g,"_"),avatar:e.avatar||"",members:e.members||[],lastMessage:"Group created",time:"Just now",unread:!1};Bi(t),a("navigate","chat",{id:t.id})},o=(e,t)=>{if("chat"===e&&t.id){const e=Oi.contacts.find(e=>e.id===t.id);!Oi.conversations.find(e=>e.id===t.id)&&e&&Bi({id:e.id,type:"direct",name:e.name,handle:e.handle,avatar:e.avatar,lastMessage:"Draft",time:"Now",unread:!1})}n.value=!1,a("navigate",e,t),n.value=!1,a("navigate",e,t)},r=e=>{const t=e.localSettings||{};if("group"===e.type||e.isAbstract)return{avatar:t.groupAvatarOverride||e.avatar,handle:t.groupNameOverride||e.title||e.handle||"Group",isAbstract:e.isAbstract};const a=Oi.contacts.find(t=>t.id===e.id);return a?{avatar:t.theirAvatarOverride||a.avatar,handle:t.theirNicknameOverride||a.handle,isAbstract:!1}:{avatar:t.theirAvatarOverride||e.avatar,handle:t.theirNicknameOverride||e.handle,isAbstract:!1}};return Ja(()=>{}),(e,t)=>(ul(),xl("div",Or,[wl("header",$r,[wl("div",Lr,[wl("div",Nr,[wl("div",Pr,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"flex items-center justify-center size-8 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[4]||(t[4]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[5]||(t[5]=wl("h1",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Messages",-1))]),wl("button",{onClick:t[1]||(t[1]=e=>n.value=!0),class:"hover:opacity-50 transition-opacity"},[...t[6]||(t[6]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"edit_square",-1)])])]),t[7]||(t[7]=wl("div",{class:"relative"},[wl("input",{class:"w-full bg-neutral-100 border-none rounded-full py-2 px-5 text-sm placeholder:text-neutral-400 focus:ring-1 focus:ring-black transition-all",placeholder:"Search",type:"text"})],-1))])]),wl("main",Rr,[(ul(!0),xl(sl,null,sn(kt(Oi).conversations,e=>(ul(),xl("div",{key:e.id,onClick:t=>{return n=e.id,void a("navigate","chat",{id:n});var n},class:"flex items-center gap-4 px-6 py-5 hover:bg-neutral-50 transition-colors cursor-pointer group border-b border-gray-50"},[e.isAbstract?(ul(),xl("div",Ur,[...t[8]||(t[8]=[wl("div",{class:"absolute inset-0 bg-zinc-900"},null,-1),wl("div",{class:"relative size-6 border-[0.5px] border-white/30 rotate-45"},null,-1)])])):(ul(),xl("div",{key:1,class:"size-14 shrink-0 rounded-full bg-neutral-900 flex items-center justify-center overflow-hidden border border-neutral-100",style:R({backgroundImage:r(e).avatar?`url(${r(e).avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[r(e).avatar?Sl("",!0):(ul(),xl("div",Vr))],4)),wl("div",Br,[wl("div",Fr,[wl("span",Gr,J(r(e).handle),1),wl("div",Kr,[wl("span",{class:F(["text-[11px] font-medium",e.unread?"text-black":"text-neutral-400"])},J(e.time),3),e.unread?(ul(),xl("div",Wr)):Sl("",!0)])]),wl("p",{class:F(["text-[14px] font-semibold truncate leading-snug",e.unread?"text-black":"text-neutral-500"])},J(e.lastMessage),3)])],8,Dr))),128))]),kl(ls,{name:"slide-up"},{default:ta(()=>[n.value?(ul(),bl(ar,{key:0,onClose:t[2]||(t[2]=e=>n.value=!1),onCreateGroup:s,onNavigate:o})):Sl("",!0)]),_:1}),kl(ls,{name:"slide-right"},{default:ta(()=>[l.value?(ul(),bl(Tr,{key:0,onBack:t[3]||(t[3]=e=>l.value=!1),onCreate:i})):Sl("",!0)]),_:1})]))}},qr=_o(Hr,[["__scopeId","data-v-8dd3129f"]]),Jr=rt({id:"current",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.7,stream:!1,modelsList:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"]}),Yr=rt({list:[],currentPresetId:"custom"}),Xr=async()=>{const e=await Ci();e?(Object.assign(Jr,e),void 0===Jr.stream&&(Jr.stream=!1)):await _i(bt(Jr));const t=await Si();if(Yr.list=t,Yr.currentPresetId=Jr.activePresetId||"custom",0===t.length){const e=[{id:"editorial",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.3,stream:!1},{id:"creative",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.9,stream:!1},{id:"drafting",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,stream:!1}];for(const t of e)await Ii(t);Yr.list=await Si()}},Qr=async e=>{Object.assign(Jr,e),e.currentPresetId&&(Yr.currentPresetId=e.currentPresetId);const t={...bt(Jr),activePresetId:Yr.currentPresetId};await _i(t)},Zr=()=>{if(!Jr.apiKey)return"";const e=Jr.apiKey.split(",").map(e=>e.trim()).filter(e=>e);if(0===e.length)return"";return e[Math.floor(Math.random()*e.length)]},ec=async e=>{try{const t=void 0!==e?.apiKey?e.apiKey:Jr.apiKey,a=void 0!==e?.endpoint?e.endpoint:Jr.endpoint;let n="";if(t){const e=t.split(",").map(e=>e.trim()).filter(e=>e);e.length>0&&(n=e[Math.floor(Math.random()*e.length)])}if(!n)throw new Error("No API Key provided");let l=`${a.replace(/\/+$/,"")}/models`;const s=await fetch(l,{headers:{Authorization:`Bearer ${n}`}});if(!s.ok)throw new Error(`Fetch failed: ${s.statusText}`);const i=await s.json();return i.data&&Array.isArray(i.data)&&(Jr.modelsList=i.data.map(e=>e.id)),!0}catch(UI){return!1}},tc=e=>Yr.list.find(t=>t.id===e),ac=async(e,t)=>{const a={id:Date.now().toString(),name:e,provider:t.provider,endpoint:t.endpoint,apiKey:t.apiKey,model:t.model,temperature:t.temperature,stream:t.stream};await Ii(a),Yr.list=await Si(),Yr.currentPresetId=a.id,Jr.activePresetId=a.id,await Qr({...t,activePresetId:a.id})},nc=async()=>{if(Yr.currentPresetId&&"custom"!==Yr.currentPresetId){const e=Yr.currentPresetId;await bi(()=>Promise.resolve().then(()=>Ai),void 0,import.meta.url).then(t=>t.deleteItem("presets",e)),Yr.list=await Si(),Yr.currentPresetId="custom",Jr.activePresetId="custom",await Qr({activePresetId:"custom"})}},lc=()=>({..._t(Jr),presetState:Yr,init:Xr,getActiveKey:Zr,fetchModels:ec,getPresetById:tc,commitSettings:Qr,saveCurrentAsPreset:ac,deleteCurrentPreset:nc}),sc="worldbook_db",ic=rt({categories:[],entries:[]}),oc=async()=>{const e=[{id:"cat_myth",name:""},{id:"cat_history",name:""},{id:"cat_chars",name:""},{id:"cat_locs",name:""}];ic.categories.splice(0,ic.categories.length,...e),ic.entries.splice(0,ic.entries.length);for(const t of e)await ki(ji.WORLDBOOK_CATEGORIES,t)},rc=()=>{0===ic.categories.length&&(async()=>{try{await yi();const e=localStorage.getItem(sc);if(e)try{const t=JSON.parse(e),a=t.categories||[],n=t.entries||[];for(const e of a)await ki(ji.WORLDBOOK_CATEGORIES,e);for(const e of n)e.scope||(e.scope="global"),await ki(ji.WORLDBOOK_ENTRIES,e);localStorage.removeItem(sc)}catch(UI){}const t=await wi(ji.WORLDBOOK_CATEGORIES),a=await wi(ji.WORLDBOOK_ENTRIES);0===t.length&&0===a.length?await oc():(ic.categories.splice(0,ic.categories.length,...t),ic.entries.splice(0,ic.entries.length,...a))}catch(UI){}})();return{state:ic,getCategories:()=>ic.categories,getEntriesByCategory:(e,t="global")=>ic.entries.filter(a=>a.categoryId===e&&a.scope===t),getEntry:e=>ic.entries.find(t=>t.id===e),addCategory:async e=>{const t=`cat_${Date.now()}`,a={id:t,name:e};return ic.categories.push(a),await ki(ji.WORLDBOOK_CATEGORIES,a),t},updateCategory:async(e,t)=>{const a=ic.categories.find(t=>t.id===e);if(a){a.name=t;const e=bt(a);await ki(ji.WORLDBOOK_CATEGORIES,{...e})}},deleteCategory:async e=>{const t=ic.entries.filter(t=>t.categoryId===e);ic.entries=ic.entries.filter(t=>t.categoryId!==e);const a=ic.categories.findIndex(t=>t.id===e);-1!==a&&ic.categories.splice(a,1),await zi(ji.WORLDBOOK_CATEGORIES,e);for(const n of t)await zi(ji.WORLDBOOK_ENTRIES,n.id)},addEntry:async e=>{const t={...e,id:`entry_${Date.now()}`,createdAt:Date.now(),updatedAt:Date.now()};return ic.entries.push(t),await ki(ji.WORLDBOOK_ENTRIES,t),t.id},updateEntry:async(e,t)=>{const a=ic.entries.findIndex(t=>t.id===e);if(-1!==a){const e={...ic.entries[a],...t,updatedAt:Date.now()};ic.entries[a]=e;const n=bt(e);await ki(ji.WORLDBOOK_ENTRIES,n)}},deleteEntry:async e=>{const t=ic.entries.findIndex(t=>t.id===e);-1!==t&&(ic.entries.splice(t,1),await zi(ji.WORLDBOOK_ENTRIES,e))},searchEntries:e=>{const t=e.toLowerCase();return ic.entries.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.keywords?.some(e=>e.toLowerCase().includes(t)))}}},cc={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},dc=new Map,uc=async(e,t)=>{const a=`${e.toFixed(2)},${t.toFixed(2)}`,n=Date.now();if(dc.has(a)){const e=dc.get(a);if(n-e.ts<36e5)return e.data}const l=await(async(e,t)=>{try{const a=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,weather_code,is_day&timezone=auto`,n=await fetch(a),l=await n.json();return l.current?{temperature:l.current.temperature_2m,conditionCode:l.current.weather_code,isDay:l.current.is_day,time:l.current.time}:null}catch(UI){return null}})(e,t);return l&&dc.set(a,{data:l,ts:n}),l},pc=["innerHTML"],vc={__name:"HtmlCard",props:["content","isMe"],setup(e){const t=yt(null),a=yt(1),n=()=>{if(!t.value)return;a.value=1;const e=t.value.scrollWidth;a.value=e>210?.7:1};return Ja(()=>{n(),setTimeout(n,100),setTimeout(n,500)}),(n,l)=>(ul(),xl("div",{class:F(["html-card-wrapper relative",e.isMe?"origin-top-right":"origin-top-left"]),style:R({transform:`scale(${a.value})`})},[wl("div",{ref_key:"containerRef",ref:t,class:"html-content inline-block text-left",innerHTML:e.content},null,8,pc)],6))}},fc=_o(vc,[["__scopeId","data-v-0bfcbd29"]]),xc={class:"bg-white w-full max-w-lg rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all h-[60vh]"},bc={class:"text-center shrink-0"},mc={class:"font-serif text-xl font-bold tracking-tight text-black"},gc={key:0,class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},hc=["placeholder"],yc={__name:"EditModal",props:{isOpen:Boolean,modelValue:String,title:String,subtitle:String,placeholder:String},emits:["update:isOpen","update:modelValue","save","cancel"],setup(e,{emit:t}){const a=e,n=t,l=yt("");ia(()=>a.isOpen,e=>{e&&(l.value=a.modelValue||"")});const s=()=>{n("update:isOpen",!1),n("cancel")},i=()=>{n("update:modelValue",l.value),n("save",l.value),n("update:isOpen",!1)};return(t,a)=>(ul(),bl(ha,{to:"body"},[e.isOpen?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:di(s,["self"])},[wl("div",xc,[wl("div",bc,[wl("h3",mc,J(e.title||"Edit"),1),e.subtitle?(ul(),xl("p",gc,J(e.subtitle),1)):Sl("",!0)]),aa(wl("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),class:"w-full flex-1 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none font-mono leading-relaxed",placeholder:e.placeholder||"Enter text...",autofocus:""},null,8,hc),[[Qs,l.value]]),wl("div",{class:"flex items-center gap-3 w-full shrink-0"},[wl("button",{onClick:s,class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),wl("button",{onClick:i,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Save ")])])])):Sl("",!0)]))}},wc={class:"h-[100dvh] flex flex-col bg-background-light text-black"},kc={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},zc={class:"flex items-center px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Cc={class:"flex items-center gap-3 ml-1 cursor-pointer"},_c={key:0,class:"absolute inset-0 bg-zinc-900"},Sc={key:1,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Ic={class:"flex flex-col"},jc={class:"font-serif text-[17px] font-semibold tracking-tight"},Mc={class:"flex-1 flex justify-end"},Ec={class:"flex justify-center my-4"},Ac={class:"text-[10px] text-zinc-400 uppercase tracking-[0.2em] font-semibold"},Tc={key:0,class:"flex flex-col gap-4"},Oc=["id"],$c={key:0,class:"w-full flex items-center my-1 animate-in fade-in zoom-in-95 duration-300"},Lc=["onClick"],Nc={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Pc={class:"flex-1 flex justify-center"},Rc=["onClick","onContextmenu"],Dc={class:"text-[11px] text-zinc-400 px-3 py-1 rounded-full transition-colors"},Uc={class:"text-[9px] opacity-50 ml-1"},Vc={key:0,class:"mt-1 max-w-[280px] p-3 rounded-[16px] bg-zinc-50 border border-zinc-100 text-zinc-500 text-[13px] relative animate-in fade-in zoom-in-95 duration-200"},Bc=["src"],Fc=["src"],Gc={key:2,class:"italic opacity-70"},Kc=["innerHTML"],Wc={key:1,class:"w-full flex items-start transition-all duration-300"},Hc=["onClick"],qc={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Jc=["onContextmenu"],Yc={key:0,class:"text-[10px] text-zinc-500 font-bold mb-1 ml-1"},Xc=["onClick"],Qc={class:"flex flex-col"},Zc=["onClick"],ed={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},td={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},ad=["src"],nd=["onClick"],ld={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center animate-in fade-in duration-300"},sd={key:1,class:"absolute inset-0 z-20 p-6 flex items-center justify-center animate-in fade-in zoom-in-95 duration-500"},id=["innerHTML"],od=["onClick"],rd={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},cd={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},dd=["onClick"],ud=["src"],pd=["onClick"],vd={class:"h-32 bg-[#F4F4F5] relative overflow-hidden group"},fd={class:"p-3 bg-white relative z-10 flex flex-col gap-0.5 border-t border-zinc-100"},xd={class:"flex items-start justify-between gap-2"},bd={class:"text-[14px] font-bold text-black leading-snug line-clamp-1"},md={class:"text-[11px] text-zinc-500 line-clamp-1"},gd={class:"flex items-center gap-2 mt-2 pt-2 border-t border-zinc-50"},hd={class:"text-[9px] font-mono text-zinc-300 ml-auto tracking-tight"},yd=["onClick"],wd={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},kd={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},zd=["onClick"],Cd={class:"flex items-center gap-3 px-3 py-2"},_d={class:"flex items-center gap-0.5 h-4"},Sd={class:"text-[11px] font-medium opacity-60 ml-1"},Id=["innerHTML"],jd=["onClick"],Md={class:"flex items-center justify-between mb-4 relative z-0"},Ed={class:"flex items-center gap-2"},Ad={class:"material-symbols-outlined text-[16px]"},Td={class:"text-[10px] font-bold opacity-40"},Od={class:"mb-1 relative z-0"},$d={class:"text-2xl font-serif font-bold tracking-tight"},Ld={class:"text-[11px] opacity-50 relative z-0 flex justify-between items-center"},Nd={key:0,class:"flex items-center gap-1 text-[9px] uppercase tracking-wider font-bold opacity-60"},Pd=["onClick"],Rd={class:"flex items-center justify-between mb-4 relative z-0"},Dd={class:"flex items-center gap-2"},Ud={class:"material-symbols-outlined text-[16px]"},Vd={class:"text-[10px] font-bold opacity-40"},Bd={class:"mb-1 relative z-0"},Fd={class:"text-2xl font-serif font-bold tracking-tight"},Gd={class:"text-[11px] opacity-50 relative z-0"},Kd=["onClick"],Wd={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-10"},Hd={class:"flex items-center justify-between mb-4 relative z-0"},qd={class:"flex items-center gap-2"},Jd={class:"text-[10px] font-bold opacity-40"},Yd={class:"mb-1 relative z-0"},Xd={class:"flex flex-col relative z-0 gap-0.5"},Qd={class:"text-[11px] opacity-60 font-medium lowercase"},Zd={key:0,class:"text-[11px] opacity-50 italic truncate max-w-[180px]"},eu={key:0,class:"relative",style:{zoom:"0.7"}},tu={class:"entry-preview w-full max-w-full overflow-hidden"},au=["innerHTML"],nu=["onClick"],lu=["innerHTML"],su={class:"text-[9px] text-zinc-400 mt-1 mx-1 tracking-wider uppercase"},iu={key:1,class:"flex flex-col items-start gap-1"},ou={class:"flex items-end gap-2 px-1"},ru={key:2,class:"flex flex-col items-center justify-center h-full text-neutral-400"},cu={key:1,class:"absolute inset-x-0 bottom-0 top-auto h-auto bg-white rounded-t-[32px] shadow-[0_-8px_40px_rgba(0,0,0,0.1)] z-[60] flex flex-col animate-in slide-in-from-bottom-10 duration-300 overflow-hidden text-black border-t border-zinc-100/50"},du={class:"h-10 flex items-center justify-between px-6 shrink-0 bg-white"},uu={class:"flex items-center gap-3"},pu={class:"h-[255px] overflow-y-auto custom-scrollbar px-6 py-2 bg-white"},vu={key:0,class:"grid grid-cols-4 gap-4"},fu=["onClick"],xu={class:"aspect-square w-full bg-white border border-zinc-50 rounded-[22px] overflow-hidden group-hover:border-zinc-200 group-hover:shadow-[0_4px_12px_rgba(0,0,0,0.03)] transition-all relative"},bu=["src"],mu={class:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.15em] truncate w-full text-center group-hover:text-black transition-colors font-sans"},gu={key:1,class:"flex flex-col items-center justify-center h-full text-zinc-300 gap-3"},hu={class:"flex flex-col items-center gap-1"},yu={class:"flex items-center justify-between px-5 bg-white border-t border-zinc-50 gap-4 shrink-0 pt-2 pb-safe"},wu={class:"flex-1 overflow-x-auto custom-scrollbar flex items-center gap-4 px-2 hide-scrollbar"},ku=["onClick"],zu={class:"w-6 h-6 flex items-center justify-center"},Cu={key:0,class:"absolute -bottom-2 w-1 h-1 bg-black rounded-full"},_u={key:1,class:"material-symbols-outlined text-[20px]"},Su={key:2,class:"text-[10px] font-black uppercase font-serif"},Iu={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},ju={class:"flex flex-col gap-2 max-h-[50vh] overflow-y-auto custom-scrollbar px-1"},Mu={key:0,class:"text-center py-10 text-zinc-300 flex flex-col items-center gap-3"},Eu=["onClick"],Au={class:"flex items-center gap-4"},Tu={class:"w-10 h-10 rounded-xl bg-white border border-zinc-100 flex items-center justify-center text-xs font-serif font-bold text-zinc-700 shadow-sm"},Ou={class:"font-semibold text-zinc-900 text-[15px]"},$u={class:"material-symbols-outlined text-[14px] font-bold"},Lu={class:"grid grid-cols-1 mt-4"},Nu={class:"bg-white w-full sm:max-w-sm rounded-t-[32px] sm:rounded-[32px] shadow-2xl flex flex-col h-[80vh] sm:h-[600px] animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300 transform transition-all"},Pu={class:"p-6 pb-2 shrink-0"},Ru={class:"flex items-center justify-between mb-6"},Du={class:"relative group flex items-center gap-2"},Uu={class:"relative flex-1"},Vu={class:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-6 flex flex-col gap-2"},Bu=["onClick"],Fu={class:"min-w-0"},Gu={class:"text-sm font-bold text-zinc-900 truncate"},Ku={class:"text-xs text-zinc-500 truncate"},Wu={key:2,class:"absolute left-4 right-4 bottom-[80px] bg-white/90 backdrop-blur-2xl rounded-[32px] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.12)] border border-zinc-100 p-6 z-[80] animate-in slide-in-from-bottom-6 fade-in duration-300 ring-1 ring-black/5"},Hu={class:"grid grid-cols-4 gap-x-2 gap-y-6"},qu={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Ju={class:"flex items-center gap-3 w-full"},Yu={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Xu={class:"flex items-center gap-3 w-full"},Qu={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Zu={key:0,class:"font-serif italic text-2xl mb-1 text-center"},ep={key:1,class:"font-serif italic text-2xl mb-1 text-center"},tp={key:2},ap={key:0,class:"mb-6"},np={class:"relative"},lp=["value"],sp={key:1,class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},ip={class:"flex flex-col gap-4"},op={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},rp={class:"grid grid-cols-2 gap-3"},cp={key:3,class:"animate-in slide-in-from-right-8 duration-300"},dp={class:"flex justify-center mb-8"},up={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},pp={class:"grid grid-cols-2 gap-3"},vp={class:"bg-white w-full max-w-xs rounded-[32px] shadow-2xl p-0 animate-in zoom-in-95 duration-300 overflow-hidden relative"},fp={class:"p-8 text-center -mt-10"},xp={class:"font-serif text-3xl font-bold mb-1"},bp={class:"text-xs text-zinc-400 uppercase tracking-widest mb-6"},mp={class:"space-y-3 text-sm border-t border-zinc-100 pt-6"},gp={class:"flex justify-between"},hp={class:"font-medium"},yp={class:"flex justify-between"},wp={class:"text-zinc-400"},kp={class:"font-medium"},zp={key:0,class:"flex justify-between"},Cp={class:"font-medium text-zinc-800"},_p={key:0,class:"mt-8 grid grid-cols-2 gap-3"},Sp=["src"],Ip={key:1,class:"fixed inset-x-0 bottom-0 z-[10000] animate-in slide-in-from-bottom-full duration-300"},jp={class:"bg-white/95 backdrop-blur-xl rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.1)] overflow-hidden"},Mp={class:"flex flex-col"},Ep={class:"border-t border-zinc-100 py-3 pb-safe"},Ap={key:4,class:"fixed bottom-10 left-0 right-0 z-[100] flex justify-center pointer-events-none animate-in slide-in-from-bottom-20 duration-300"},Tp={class:"bg-black text-white h-[64px] rounded-full shadow-[0_8px_40px_rgba(0,0,0,0.3)] flex items-center px-8 gap-8 pointer-events-auto min-w-[280px] justify-between ring-1 ring-white/10 mx-6"},Op={class:"font-bold text-xs tracking-[0.2em] font-sans whitespace-nowrap"},$p={class:"flex items-center gap-6"},Lp=["disabled"],Np={class:"bg-white w-[90%] max-w-sm rounded-3xl p-5 animate-in zoom-in-95 duration-200 max-h-[60vh] overflow-hidden shadow-2xl"},Pp={class:"flex items-center justify-between mb-4"},Rp={class:"space-y-2 overflow-y-auto max-h-[40vh] pb-safe"},Dp=["onClick"],Up={class:"font-medium text-[15px]"},Vp={class:"flex items-center gap-2 z-[110] mb-6"},Bp=["title"],Fp={class:"material-symbols-outlined text-zinc-600 text-[20px]"},Gp={key:0,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 shadow-2xl mx-auto"},Kp={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},Wp={class:"flex-1"},Hp={class:"font-bold text-lg"},qp={key:0,class:"relative inner-voice-card max-h-[80vh] overflow-y-auto scrollbar-hide"},Jp=["onClick"],Yp=["fill"],Xp=["innerHTML"],Qp={key:1,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 shadow-2xl mx-auto"},Zp={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},ev={class:"flex-1"},tv={class:"font-bold text-lg"},av=["onClick"],nv=["fill"],lv={class:"text-[14px] text-zinc-700 leading-relaxed"},sv={class:"text-[10px] text-zinc-400 mt-3 font-mono"},iv={key:1,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 max-h-[70vh] overflow-hidden flex flex-col shadow-2xl"},ov={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},rv={class:"flex-1"},cv={class:"font-bold text-lg"},dv={class:"flex-1 overflow-y-auto space-y-3 scrollbar-hide"},uv={key:0,class:"text-center py-12 text-zinc-400"},pv=["onClick"],vv={class:"text-[10px] text-zinc-400 mb-2 font-mono"},fv=["innerHTML"],xv={key:7,class:"sticky bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md pb-safe border-t border-gray-100 z-50"},bv={key:0,class:"px-4 py-2 bg-zinc-50 border-b border-zinc-100 flex items-center justify-between"},mv={class:"flex items-center gap-3 overflow-hidden"},gv={class:"flex flex-col"},hv={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-500"},yv={class:"text-xs text-zinc-600 line-clamp-1 truncate"},wv={class:"px-4 py-3 flex items-center gap-2"},kv={class:"flex-1 relative"},zv={class:"bg-white w-full max-w-sm max-h-[70vh] rounded-[32px] shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300"},Cv={class:"bg-zinc-50 border-b border-zinc-100 p-5 flex items-center justify-between shrink-0"},_v={class:"text-xs text-zinc-400 mt-0.5 font-mono"},Sv={class:"flex-1 overflow-y-auto p-5 space-y-4 bg-white custom-scrollbar"},Iv={key:0,class:"text-center my-2 px-4"},jv={class:"text-[11px] text-zinc-400 italic bg-zinc-50 px-3 py-1.5 rounded-full border border-zinc-100 inline-block leading-relaxed"},Mv={key:0,class:"text-[10px] text-zinc-500 mb-1 ml-2 font-bold select-none"},Ev={key:0,class:"text-[13px] leading-relaxed"},Av={key:0,class:"text-zinc-400 italic block mb-1"},Tv={key:1,class:"p-3 bg-zinc-50 rounded-xl text-zinc-800 border border-zinc-100"},Ov={key:2,class:"text-zinc-500"},$v={key:1,class:"relative z-10 flex-1 flex flex-col items-center justify-center p-6 text-center bg-white"},Lv={class:"w-36 h-36 rounded-full ring-4 ring-zinc-100 mb-8 relative overflow-hidden shadow-xl"},Nv=["src"],Pv={class:"text-zinc-900 text-2xl font-bold mb-2"},Rv={key:2,class:"relative z-10 flex-1 flex flex-col items-center justify-center p-6 text-center bg-white"},Dv={class:"w-40 h-40 rounded-full ring-4 ring-zinc-200 mb-8 relative overflow-hidden shadow-2xl animate-bounce-slow"},Uv=["src"],Vv={class:"text-zinc-900 text-3xl font-bold mb-2"},Bv={key:3,class:"relative z-10 flex flex-col h-full"},Fv={class:"pt-safe pt-6 px-4 py-2 flex items-center justify-between z-10 shrink-0 relative"},Gv={class:"absolute inset-x-0 top-6 pt-safe flex justify-center pointer-events-none"},Kv={class:"px-3 py-1.5 rounded-full bg-black/30 backdrop-blur-md border border-white/10 flex items-center gap-2 pointer-events-auto"},Wv={class:"text-xs text-white/90 font-mono"},Hv={class:"flex items-center justify-center gap-1.5 overflow-x-auto py-2 shrink-0 z-10"},qv={class:"relative w-10 h-10 bg-zinc-800 rounded-lg overflow-hidden ring-1 ring-white/20 shadow-md shrink-0"},Jv=["src"],Yv=["src"],Xv={key:1,class:"pt-safe pt-6 px-4 py-3 flex justify-between items-start shrink-0 z-10"},Qv={class:"flex flex-col items-center mt-1"},Zv={class:"font-bold text-sm text-white shadow-sm"},ef={class:"mt-2 px-3 py-1.5 rounded-full flex items-center gap-2 bg-black/40 backdrop-blur-md border border-white/5"},tf={class:"text-xs text-white/90 font-mono tracking-widest"},af={class:"w-20 h-28 rounded-xl overflow-hidden shadow-2xl ring-2 ring-white/30"},nf=["src"],lf={id:"video-messages-container",class:"flex-1 overflow-y-auto px-4 py-2 space-y-4 custom-scrollbar scroll-smooth z-10"},sf={class:"flex flex-col justify-end min-h-full pb-4"},of={key:0,class:"self-center max-w-[90%] my-2 text-center"},rf={class:"text-[11px] italic text-white/50 leading-relaxed"},cf=["onContextmenu"],df={class:"shrink-0 pb-safe pt-4 px-6 z-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent"},uf={class:"flex items-center gap-3 mb-6"},pf={class:"flex-1 relative group"},vf=["onKeydown"],ff={class:"flex items-center justify-center gap-8 mb-4"},xf=["src"],bf={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-black/30 flex flex-col justify-between p-2"},mf={class:"flex flex-col items-center mb-1"},gf={class:"text-[10px] text-white/90 font-mono tracking-wider font-bold"},hf={key:5,class:"relative z-10 flex-1 flex flex-col items-center justify-center animate-in zoom-in-95 duration-300"},yf={class:"relative z-10 flex flex-col items-center"},wf={class:"text-white/50 text-sm font-mono"},kf={key:1,class:"fixed inset-0 z-[10000] flex items-end justify-center pointer-events-auto"},zf={class:"bg-zinc-900 w-full max-w-sm m-4 mb-safe rounded-2xl overflow-hidden border border-white/10 shadow-2xl relative z-10 animate-in slide-in-from-bottom-10 duration-200"},Cf={class:"p-4 border-b border-white/5 bg-white/5"},_f={class:"text-xs text-white/50 line-clamp-1 italic text-center"},Sf={class:"bg-black py-2"},If={__name:"Chat",props:["chatId"],emits:["back","navigate"],setup(e,{emit:t}){const a=e,n=t,l=Kl(()=>qi(a.chatId)),s=Kl(()=>{if(!Oi.regexCategories||!Oi.regexEntries)return[];const e=Oi.regexCategories.filter(e=>"global"===e.scope).map(e=>e.id),t=l.value?.localSettings?.mountedRegexCategories||[],a=Oi.regexCategories.filter(e=>"local"===e.scope&&t.includes(e.id)).map(e=>e.id),n=new Set([...e,...a]);return Oi.regexEntries.filter(e=>!!n.has(e.categoryId)||!!t.includes(e.id))}),i=e=>{if(!e)return"";let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return s.value.forEach(e=>{if(e.regex&&e.html)try{const a=new RegExp(e.regex,"gms");t=t.bind?t.replace(a,e.html):String(t).replace(a,e.html)}catch(UI){}}),t},o=Kl(()=>{const e=l.value;if(!e)return{};const t=e.localSettings||{};if("group"===e.type||e.isAbstract)return{avatar:t.groupAvatarOverride||e.avatar,handle:t.groupNameOverride||e.handle||e.title||"Group",isAbstract:e.isAbstract,id:e.id};const a=Oi.contacts.find(t=>t.id===e.id);return{avatar:t.theirAvatarOverride||a?.avatar||e.avatar,handle:t.theirNicknameOverride||a?.handle||e.handle,realName:a?.name||e.handle,isAbstract:!1,id:e.id}}),r=Kl(()=>St.value?St.value.filter(e=>"innerVoice"!==e.type):[]),c=()=>{n("back")},d=yt(""),u=yt(!1),p=yt(!1),v=yt(!1),f=yt(!1),x=yt(!1),b=yt(""),m=yt(""),g=yt(""),h=yt(null),y=yt("input"),w=yt(""),k=yt(""),z=yt([]),C=yt(!1),_=yt(!1),S=yt(""),I=yt(!1),j=yt(new Set),M=yt(!1),E=yt(null),A=yt(null),T=e=>{const t=document.getElementById(`msg-${e}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("bg-zinc-100/50"),setTimeout(()=>t.classList.remove("bg-zinc-100/50"),1e3))},O=yt(!1),$=yt(""),L=yt(""),N=yt(""),P=yt(null),D=yt("single"),U=()=>{const e=St.value;if(0===e.length)return;const t=[];let a=e.length-1;if(e[a].isMe)return;for(;a>=0&&!e[a].isMe;)t.unshift(e[a]),a--;if(0===t.length)return;let n=t.map(e=>{let t="[]",a=e.text,n=e.senderName||B(e);if("sticker"===e.type)t="[]",a=e.keyword;else if("spoiler"===e.type)t="[]",a=e.text;else if("voice"===e.type)t="[]",a=e.text;else if("html"===e.type)t="[html]",a=e.content||e.text;else if("location"===e.type){t="[]";try{a=JSON.parse(e.content).name}catch(UI){a=e.text}}else{if("video_call_notice"===e.type)return`[] ${e.text}`;e.replyTo?(t="[]",a=`{${e.replyTo.senderName}${e.replyTo.text}} ${e.text}`):"action"===e.type?(t="[]",a=e.text):e.isAction}return`${t} ${n}${a}`}).join("\n");D.value="last_round",P.value=null,$.value="Edit Last Round",L.value="Edit the full AI response context",N.value=n,M.value=!1,O.value=!0},V=async e=>{if("single"===D.value){const t=St.value.find(e=>e.id===P.value);t&&await Wi(a.chatId,{...t,text:e})}else if("last_round"===D.value){const t=St.value,n=[];let l=t.length-1;for(;l>=0&&!t[l].isMe;)n.push(t[l].id),l--;await Hi(a.chatId,n);const s=e.split(/(?=\[(?:|||||||||html||||)])/);for(const e of s)e.trim()&&await Wt(e)}},B=e=>{if(e.isMe)return It.value.handle||It.value.name;const t=Jt(e.senderId);return t&&(t.handle||t.name)||"Unknown"},G=()=>{E.value&&(A.value=E.value,M.value=!1,E.value=null,p.value=!1,Kt(()=>{const e=document.querySelector("textarea");e&&e.focus()}))},K=e=>{I.value?H(e):(E.value=e,M.value=!0)},W=Kl(()=>0!==St.value.length&&!St.value[St.value.length-1].isMe),H=e=>{j.value.has(e.id)?j.value.delete(e.id):j.value.add(e.id)},q=()=>{I.value=!0,M.value=!1,E.value&&j.value.add(E.value.id),E.value=null},Y=()=>{I.value=!1,j.value.clear()},X=async e=>{const t=St.value.find(t=>t.id===e);t&&await Wi(a.chatId,{...t,isRecalled:!0,isRecallRevealed:!1})},Q=()=>{E.value&&(X(E.value.id),M.value=!1,E.value=null)},Z=async()=>{E.value&&(confirm("Delete this message?")&&await(async(e,t)=>{if(!Oi.messages[e])return;const a=Oi.messages[e].findIndex(e=>e.id===t);-1!==a&&(Oi.messages[e].splice(a,1),await zi(ji.MESSAGES,t))})(a.chatId,E.value.id),M.value=!1,E.value=null)},ee=async()=>{const e=Array.from(j.value);0!==e.length&&confirm(`Delete ${e.length} messages?`)&&(await Hi(a.chatId,e),Y())},te=Kl(()=>{const e=l.value;if(!e)return{name:"Unknown"};if("group"===e.type||e.isAbstract)return{name:e.handle||"Group",isGroup:!0};return Oi.contacts.find(t=>t.id===e.id)||{name:e.handle||"Unknown",isGroup:!1}}),ae=yt(null),ne=yt(!1),le=yt(!1),se=yt(null),ie=yt("current"),oe=Kl(()=>St.value?St.value.filter(e=>"innerVoice"===e.type):[]),re=e=>e?oe.value.filter(t=>t.senderId===e):oe.value,ce=Kl(()=>{let e=("group"===l.value?.type||l.value?.isGroup)&&se.value?re(se.value):oe.value;const t=[...St.value].reverse().find(e=>e.isMe&&"innerVoice"!==e.type),a=t?.timestamp||0;return e.filter(e=>e.timestamp>a)}),de=Kl(()=>(("group"===l.value?.type||l.value?.isGroup)&&se.value?re(se.value):oe.value).filter(e=>e.isFavorited)),ue=Kl(()=>"current"===ie.value?ce.value:de.value),pe=async e=>{const t=St.value.find(t=>t.id===e);t&&await Wi(a.chatId,{...t,isFavorited:!t.isFavorited})},ve=()=>{ie.value="current";"group"===l.value?.type||l.value?.isGroup?le.value=!0:ne.value=!0},fe=()=>{ne.value=!1,se.value=null},xe=e=>{if(!e){return Oi.contacts.find(e=>e.id===a.chatId)||{name:"Unknown",avatar:null}}return Oi.contacts.find(t=>t.id===e)||{name:"Unknown",avatar:null}},be=e=>{if(!e)return"";let t=e;return s.value.forEach(e=>{if(e.regex&&e.html)try{const a=new RegExp(e.regex,"gms");t=t.replace(a,e.html)}catch(UI){}}),t},me=yt(!1),ge=yt(""),he=()=>{p.value=!1,me.value=!0,ge.value=""},ye=async()=>{if(!ge.value.trim())return;const e={id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,text:ge.value,type:"spoiler",senderId:"me",timestamp:Date.now(),isMe:!0,isRevealed:!1};await Ki(a.chatId,e),me.value=!1,At(!0)},we=()=>{p.value=!1,_.value=!0,S.value=""},ke=async()=>{if(!S.value.trim())return;const e={id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,text:S.value,type:"voice",senderId:"me",timestamp:Date.now(),isMe:!0};await Ki(a.chatId,e),_.value=!1,At(!0)},ze=yt(!1),Ce=yt(""),_e=yt(null),Se=async e=>{const t=e.target.files[0];if(t){if(t.type.startsWith("image/")){const e=new FileReader;e.onload=async e=>{const t=e.target.result,n={id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,text:"[Image Upload]",content:t,type:"image",senderId:"me",timestamp:Date.now(),isMe:!0};await Ki(a.chatId,n),p.value=!1,At(!0)},e.readAsDataURL(t)}e.target.value=""}},Ie=Kl(()=>Oi.stickerCategories),je=Kl(()=>{if(!l.value)return[];const e=l.value.localSettings?.mountedStickerPacks;return null==e?Ie.value:Ie.value.filter(t=>e.includes(t.id))}),Me=Kl(()=>{if(0===je.value.length)return null;if(ae.value){const e=je.value.find(e=>e.id===ae.value);if(e)return e}return je.value[0]});ia(je,e=>{e.length>0?ae.value&&e.find(e=>e.id===ae.value)||(ae.value=e[0].id):ae.value=null},{immediate:!0});const Ee=async()=>{p.value=!1;const e=St.value;if(0===e.length)return;const t=[];for(let a=e.length-1;a>=0;a--){const n=e[a];if(n.isMe)break;if(["system","transfer","payment_notice","video_call_notice"].includes(n.type))break;t.push(n.id)}t.length>0&&await Hi(a.chatId,t),Ft()},Ae=()=>{p.value=!p.value,p.value&&(v.value=!1)},Te=()=>{p.value=!1,v.value=!1},Oe=()=>{A.value=null},$e=()=>{p.value=!1,v.value=!0},Le=yt(!1),Ne=yt(""),Pe=()=>{p.value=!1,Ne.value="",Le.value=!0},Re=async e=>{Le.value=!1;const t={id:crypto.randomUUID(),conversationId:a.chatId,senderId:"user",text:e.name,content:JSON.stringify(e),type:"location",timestamp:Date.now(),isMe:!0};await Ki(a.chatId,t),At(!0)},De=yt(!1),Ue=yt(null),Ve=e=>{if(!e)return"";const t=Math.floor(e/1e3),a=Math.floor(t/60),n=t%60;return a>0?`${a}m ${n}s`:`${n}s`},Be=e=>{"missed"!==e.callResult&&(Ue.value=e,De.value=!0)},Fe=()=>{De.value=!1,Ue.value=null},Ge=Kl(()=>Oi.videoCallState.isActive&&(Oi.videoCallState.chatId===a.chatId||!Oi.videoCallState.chatId)),Ke=Kl(()=>Oi.videoCallState.isMinimized),We=yt({x:window.innerWidth-130,y:100}),He=yt(!1),qe=yt({x:0,y:0}),Je=()=>{if(!Ke.value){const e=window.innerWidth-120;We.value.x>e&&(We.value.x=Math.max(10,e-10)),We.value.y>window.innerHeight-180&&(We.value.y=Math.max(50,window.innerHeight-180))}var e;e=!Ke.value,Oi.videoCallState.isMinimized=e},Ye=e=>{He.value=!1;const t=e.touches?e.touches[0].clientX:e.clientX,a=e.touches?e.touches[0].clientY:e.clientY;qe.value={x:t-We.value.x,y:a-We.value.y},document.addEventListener("mousemove",Xe),document.addEventListener("mouseup",Qe),document.addEventListener("touchmove",Xe,{passive:!1}),document.addEventListener("touchend",Qe)},Xe=e=>{e.preventDefault(),He.value=!0;const t=e.touches?e.touches[0].clientX:e.clientX,a=e.touches?e.touches[0].clientY:e.clientY;let n=t-qe.value.x,l=a-qe.value.y;const s=window.innerWidth-112,i=window.innerHeight-160;We.value={x:Math.max(10,Math.min(n,s-10)),y:Math.max(50,Math.min(l,i-80))}},Qe=()=>{document.removeEventListener("mousemove",Xe),document.removeEventListener("mouseup",Qe),document.removeEventListener("touchmove",Xe),document.removeEventListener("touchend",Qe)},Ze=()=>{He.value||Je()},et=yt("idle"),tt=yt(null),at=yt([]),nt=yt(""),lt=yt(0),st=yt("00:00");let it=null;const ot=yt(!1),rt=yt(null),ct=()=>{rt.value&&(at.value=at.value.filter(e=>e.id!==rt.value.id),ot.value=!1,rt.value=null)},dt=()=>{if(!rt.value)return;const e=prompt("Videoscript Edit",rt.value.text);if(null!==e&&""!==e.trim()){const t=at.value.findIndex(e=>e.id===rt.value.id);-1!==t&&(at.value[t].text=e)}ot.value=!1,rt.value=null};ia(()=>Oi.videoCallState.isActive,e=>{e&&et.value},{immediate:!0});const ut=()=>{et.value="active",lt.value=Date.now(),at.value=[],xt(),at.value.push({id:"sys_start",text:"Video call connected",isAction:!0,isMe:!1})},pt=async()=>{await Ki(a.chatId,{id:"msg_"+Date.now(),conversationId:a.chatId,type:"video_call_notice",text:"[] ",callResult:"rejected",senderId:It.value.id,timestamp:Date.now(),isMe:!0}),ft(!1)},vt=()=>{p.value=!1,$i(!0,a.chatId),et.value="dialing",at.value=[];const e=2e3+2e3*Math.random();setTimeout(()=>{Math.random()>.3?(et.value="active",lt.value=Date.now(),xt(),gt(!0)):(et.value="ended",Ki(a.chatId,{id:"msg_vc_"+Date.now(),conversationId:a.chatId,text:"[] ",type:"video_call_notice",callResult:"missed",timestamp:Date.now(),isMe:!0}),setTimeout(()=>{ft(!0)},1500))},e)},ft=async(e=!1)=>{if(it&&clearInterval(it),tt.value=null,!e&&"active"===et.value){const e=Date.now()-lt.value;et.value="ended",await wt(e)}setTimeout(()=>{$i(!1),et.value="idle",at.value=[],st.value="00:00"},e?0:800)},xt=()=>{it&&clearInterval(it),it=setInterval(()=>{const e=Date.now()-lt.value,t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3);st.value=`${String(t).padStart(2,"0")}:${String(a).padStart(2,"0")}`},1e3)},bt=async()=>{if(!nt.value.trim())return;const e={id:"vcm_"+Date.now(),text:nt.value.trim(),isMe:!0,timestamp:Date.now()};at.value.push(e),Kt(()=>{const e=document.getElementById("video-messages-container");e&&(e.scrollTop=e.scrollHeight)}),nt.value="",await gt(!1)},mt=async()=>{const e=at.value;if(0===e.length)return;const t=[];for(let a=e.length-1;a>=0;a--){const n=e[a];if(n.isMe)break;if(n.id.startsWith("sys_"))break;t.push(n.id)}t.length>0&&(at.value=at.value.filter(e=>!t.includes(e.id))),await gt(!1)},gt=async(e=!1)=>{const t="group"===l.value?.type||l.value?.isGroup,n=l.value?.localSettings||{},s=n.shortTermMemoryLimit||50,i=St.value.slice(-s).map(e=>e.text).join("\n")+"\n"+at.value.map(e=>e.text).join("\n"),{front:r,mid:c,back:d}=Ot(i,"");let u="";if(!0===n.longTermMemoryEnabled)try{const e=await go(a.chatId,i.slice(-1e3));if(e.coreMemories.length>0&&(u+="/\n",e.coreMemories.forEach(e=>u+=`: ${e.source}\n${e.summary}\n\n`)),e.recentFacts.length>0&&(u+="\n",e.recentFacts.forEach(e=>{const t=Array.isArray(e.who)?e.who.join(""):e.who,a="group"===e.sourceType?"[]":"[]";u+=`${a} ${t}: ${e.action||e.what}${e.when?` (${e.when})`:""}\n`}),u+="\n"),e.rankedFacts.length>0&&(u+="\n",e.rankedFacts.forEach(e=>{const t=Array.isArray(e.who)?e.who.join(""):e.who,a="group"===e.sourceType?"[]":"[]";u+=`${a} ${t}: ${e.action||e.what}${e.when?` (${e.when})`:""}\n`}),u+="\n"),e.noteMemory){const t=e.noteMemory,a=Array.isArray(t.who)?t.who.join(""):t.who;u+=`/\n${a}: ${t.action||t.what}\n\n`}}catch(UI){}let p="";if(t){const t=(l.value.members||[]).map(e=>{const t=Oi.contacts.find(t=>t.id===e);if(!t)return null;const a=t.persona||t.bio||"";return`${t.name}\n${a||""}`}).filter(Boolean).join("\n\n"),a=(l.value.members||[]).map(e=>Oi.contacts.find(t=>t.id===e)?.name||"Unknown").join(", "),n=It.value?.name||It.value?.handle||"User",s=It.value?.persona||It.value?.bio||"";p=`\n\n\n${n}\n${s?`${s}`:""}\n\n\n${a}\n\n\n${t}\n\n\n\n - \n1. \n2. [] \n3. \n4. [] \n5. \n\n\n[] Alice\n[] Alice\n[] Bob\n[] Bob\n\n${e?"":""}`}else{const t=Oi.contacts.find(e=>e.id===a.chatId),n=t?.name||o.value.handle,l=t?.persona||t?.bio||"",s=It.value?.name||It.value?.handle||"User",i=It.value?.persona||It.value?.bio||"";p=`\n\n\n${s}\n${i?`${i}`:""}\n\n\n${n}\n${l}\n\n - \n1. \n2. [] ${n}\n3. \n4. [] ${n}\n5. \n6.  []+[] \n7. \n\n\n[] ${n}\n[] ${n}~\n[] ${n}\n[] ${n}\n\n${e?"":""}`}const v=[...r,p,c,u,...d].filter(e=>e&&e.trim()).join("\n\n"),f=at.value.map(e=>({role:e.isMe?"user":"assistant",content:e.text})),x=Bt.getActiveKey();if(!Bt.endpoint?.value)return void at.value.push({id:"err_cfg_"+Date.now(),text:"[]  API ",isAction:!0,isMe:!0});const b=Bt.endpoint.value.replace(/\/+$/,"")+"/chat/completions";try{const e=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({model:Bt.model.value||"gpt-3.5-turbo",messages:[{role:"system",content:v},...f],temperature:void 0!==Bt.temperature.value?Bt.temperature.value:.7})}),t=await e.json(),a=(t.choices?.[0]?.message?.content||"").split("\n").filter(e=>e.trim());for(const n of a){const e=n.startsWith("[]"),t=n.startsWith("[]");if(e||t){const t=n.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];let a=null;if(t&&"group"===l.value?.type){const e=Oi.contacts.find(e=>e.name===t||e.handle===t);e&&(a=e.id)}at.value.push({id:"vcm_ai_"+Date.now()+Math.random(),text:n,isMe:!1,senderId:a,timestamp:Date.now(),isAction:e}),await Kt();const s=document.getElementById("video-messages-container");s&&(s.scrollTop=s.scrollHeight),await new Promise(e=>setTimeout(e,800+1e3*Math.random()))}}}catch(UI){at.value.push({id:"err_"+Date.now(),text:`[] AI : ${UI.message||""}`,isAction:!0,isMe:!0})}},ht=e=>{if(!e)return null;try{const t=JSON.parse(e);return Array.isArray(t)?t:null}catch(UI){return null}},wt=async e=>{const t=at.value.map(e=>({id:e.id,text:e.text,isMe:e.isMe,isAction:e.isAction,senderId:e.senderId,timestamp:e.timestamp})),n=JSON.stringify(t),s="group"===l.value?.type,i=(e=>{const t=Math.floor(e/1e3),a=Math.floor(t/60),n=t%60;return a>0?`${a}${n}`:`${n}`})(e);await Ki(a.chatId,{id:"msg_vc_"+Date.now(),conversationId:a.chatId,text:s?`[]  ${i}`:`[]  ${i}`,type:"video_call_notice",callResult:"completed",duration:e,callTranscript:n,timestamp:Date.now(),isMe:!0})},zt=e=>{let t=0;const a=e||"Location";for(let s=0;s<a.length;s++)t=a.charCodeAt(s)+((t<<5)-t);t=Math.abs(t);const n=[],l=12+t%8;for(let s=0;s<l;s++){const e=t*(s+131)*37+101*s;n.push({left:e%100+"%",top:e/100%100+"%",width:20+e%30+"px",height:20+(e>>4)%30+"px",opacity:.03+e%10/100})}return n},Ct=()=>{v.value=!1,C.value=!0},_t=e=>{const t=l.value?.localSettings?.mountedStickerPacks;return null==t||t.includes(e)},St=Kl(()=>Oi.messages[a.chatId]||[]),It=Kl(()=>{const e=l.value?.localSettings?.myActivePersonaId,t=Oi.activePersonaId,a=e||t;return Oi.personas.find(e=>e.id===a)||Oi.personas[0]}),jt=yt(null),Mt=yt(null),Et=yt(!0),At=async(e=!1)=>{await Kt(),Mt.value||!jt.value?Mt.value&&(e?Mt.value.scrollTop=Mt.value.scrollHeight:Mt.value.scrollTo({top:Mt.value.scrollHeight,behavior:"smooth"})):jt.value.scrollIntoView({behavior:e?"auto":"smooth"})};ia(()=>St.value.length,e=>{0!==e&&(Et.value?(At(!0),Et.value=!1):At(!1))},{flush:"post"}),Ja(async()=>{if(await Bt.init(),a.chatId)if(Et.value=!0,await Gi(a.chatId),St.value.length>0&&Et.value)At(!0),Et.value=!1;else if("noir"===a.chatId&&0===St.value.length){const e=[{id:"demo_1",conversationId:"noir",text:"The composition in your latest editorial is remarkable. The use of negative space creates a profound tension.",senderId:"noir_official",timestamp:(new Date).setHours(14,22,0,0),isMe:!1,type:"text"},{id:"demo_2",conversationId:"noir",text:"Thank you. I was exploring the intersection of brutalist architecture and morning light.",senderId:"me",timestamp:(new Date).setHours(14,25,0,0),isMe:!0,type:"text"},{id:"demo_3",conversationId:"noir",text:'"Silent Forms". Focusing on textures of concrete and silk.',senderId:"noir_official",timestamp:(new Date).setHours(14,28,0,0),isMe:!1,type:"text"}];for(const t of e)await Ki("noir",t);await Gi("noir"),At(!0),Et.value=!1}}),ia(()=>a.chatId,async e=>{e&&(Et.value=!0,await Gi(e),St.value.length>0&&Et.value&&(At(!0),Et.value=!1))});const Tt=rc(),Ot=(e,t)=>{const a=(e+"\n"+t).toLowerCase(),n=Tt.state.entries;let s=n.filter(e=>"global"===e.scope);const i=l.value?.localSettings?.mountedWorldbooks||[];if(i.length>0){const e=n.filter(e=>"local"===e.scope&&(i.includes(e.categoryId)||i.includes(e.id)));s=[...s,...e]}const o=s.filter(e=>!!e.isConstant||!(!e.keywords||0===e.keywords.length)&&e.keywords.some(e=>a.includes(e.toLowerCase()))),r=[],c=[],d=[],u=[];return o.forEach(e=>{e.depth&&e.depth>0?u.push({content:e.content,depth:e.depth}):"front"===e.position?r.push(e.content):"back"===e.position?d.push(e.content):c.push(e.content)}),{front:r,mid:c.join("\n\n"),back:d,historyInjections:u}},$t=()=>{b.value="",m.value="",g.value="",w.value="",y.value="input",f.value=!0,p.value=!1;const e=l.value;"group"===e.type||e.isGroup?(z.value=(e.members||[]).map(e=>Oi.contacts.find(t=>t.id===e)).filter(e=>e&&e.id!==It.value.id),k.value=""):(k.value=te.value.id||e.id,z.value=[])},Lt=()=>{const e=parseFloat(b.value);!e||e<=0?w.value="Invalid amount":k.value?(w.value="",y.value="password"):w.value="Please select a recipient"},Nt=async()=>{if(!Oi.wallet.hasPassword)return void(w.value="Please set payment password in Wallet first");if(!Ri(g.value))return void(w.value="Incorrect password");const e=parseFloat(b.value);let t=te.value.name;if(z.value.length>0){const e=z.value.find(e=>e.id===k.value);t=e?e.name:"Unknown"}if(!Ni("transfer",e,`Transfer to ${t}`))return void(w.value="Insufficient balance");const n={id:"msg_"+Date.now(),conversationId:a.chatId,text:`Transfer: ${e.toFixed(2)}`,senderId:It.value.id,recipientId:k.value,timestamp:Date.now(),isMe:!0,type:"transfer",amount:e,note:m.value,type:"transfer",amount:e,note:m.value,status:"pending"};await Ki(a.chatId,n),f.value=!1,At()},Pt=e=>{if("payment_notice"===e.type)return e.isMe?e.senderName:e.targetName;if(e.isMe){if(e.recipientId){const t=Oi.contacts.find(t=>t.id===e.recipientId);if(t)return t.name}return te.value.name||"User"}{const t=Jt(e.senderId);return t?t.name:te.value.name||"User"}},Rt=async()=>{if(!h.value)return;const e=h.value;await Wi(a.chatId,{...e,status:"collected"});const t=Oi.contacts.find(t=>t.id===e.senderId),n=t?t.name:"Unknown";Pi(e.amount,`Transfer from ${n}`),await Ki(a.chatId,{id:"msg_"+Date.now(),conversationId:a.chatId,type:"payment_notice",action:"collect",amount:e.amount,senderName:It.value.name,targetName:n,timestamp:Date.now(),isMe:!0,text:"Accepted transfer"}),x.value=!1},Dt=async()=>{if(!h.value)return;const e=h.value;await Wi(a.chatId,{...e,status:"rejected"});const t=Oi.contacts.find(t=>t.id===e.senderId),n=t?t.name:"Unknown";await Ki(a.chatId,{id:"msg_"+Date.now(),conversationId:a.chatId,type:"payment_notice",action:"reject",amount:e.amount,senderName:It.value.name,targetName:n,timestamp:Date.now(),isMe:!0,text:"Rejected transfer"}),x.value=!1},Ut=async(e=!1)=>{if(!d.value.trim())return;if(e&&!Bt.apiKey.value)return void alert(" API Setup  API Key  Model");const t=d.value;d.value="";let n="text",s=t;const i=t.trim();/^<[a-z][\s\S]*>$/i.test(i)&&(n="html",s=i);const o=t.match(/^\[html\]\s*(.+?)[:](.+)$/s);o&&(n="html",s=o[2].trim());const r={id:"msg_"+Date.now(),conversationId:a.chatId,text:t,senderId:"me",timestamp:Date.now(),isMe:!0,replyTo:A.value?{id:A.value.id,text:A.value.text||("image"===A.value.type?"[Image]":"[Content]"),senderName:B(A.value),type:A.value.type}:null,type:n,content:s};A.value=null,await Ki(a.chatId,r),e&&(l.value,Ft())},Vt=async()=>{if(d.value.trim())await Ut(!0);else{if(!Bt.apiKey.value)return void alert(" API Setup  API Key  Model");Ft()}},Bt=lc(),Ft=async()=>{if(!Bt.apiKey.value)return;u.value=!0;const e=It.value.name,t=It.value.persona||"Unknown",n=l.value?.localSettings?.shortTermMemoryLimit||15,s=St.value.slice(-n),i=s.map(e=>e.text).join("\n"),{front:r,mid:c,back:d,historyInjections:p}=Ot(i,""),v=l.value?.localSettings||{},f=!1!==v.timeAwareness,x=!0===v.envSensing,b=!0===v.innerVoiceEnabled,m=!0===v.innerVoiceUseCustom,g=v.innerVoiceTemplate||"";let h="",y=[];if(!0===v.longTermMemoryEnabled)try{const e=St.value.slice(-5).map(e=>e.text||"").join(" "),t=await go(a.chatId,e);if(t.coreMemories.length>0&&(h+="/\n",t.coreMemories.forEach(e=>{h+=`: ${e.source}\n${e.summary}\n\n`})),t.recentFacts.length>0&&(h+="\n",t.recentFacts.forEach(e=>{const t=Array.isArray(e.who)?e.who.join(""):e.who,a="group"===e.sourceType?"[]":"[]";h+=`${a} ${t}: ${e.action||e.what}${e.when?` (${e.when})`:""}\n`}),h+="\n"),t.rankedFacts.length>0&&(h+="\n",t.rankedFacts.forEach(e=>{const t=Array.isArray(e.who)?e.who.join(""):e.who,a="group"===e.sourceType?"[]":"[]";h+=`${a} ${t}: ${e.action||e.what}${e.when?` (${e.when})`:""}\n`}),h+="\n"),t.noteMemory){const e=t.noteMemory,a=Array.isArray(e.who)?e.who.join(""):e.who;h+="/\n",h+=`"${a}: ${e.action||e.what}"\n`,h+="......\n\n"}f&&(t.upcomingAppointments?.length>0&&(h+="\n",t.upcomingAppointments.forEach(e=>{const t=Array.isArray(e.who)?e.who.join(""):e.who,a=new Date(e.appointmentTime).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});h+=`- ${t}: ${e.action} (${a})\n`}),h+="\n"),t.overdueAppointments?.length>0&&(h+="\n",t.overdueAppointments.forEach(e=>{const t=Array.isArray(e.who)?e.who.join(""):e.who,a=new Date(e.appointmentTime).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});h+=`- ${t}: ${e.action} ( ${a})\n`}),h+="\n")),y=[...t.upcomingAppointments||[],...t.overdueAppointments||[]]}catch(UI){h=""}const w=c?c+"\n":"",k=h?`\n\n${h}`:"";let z="";const C=[],_=[];for(let a=1;a<s.length;a++){const e=s[a],t=s[a-1],n=e.timestamp-t.timestamp,l=Math.floor(n/6e4);l>15&&_.push({index:a,diffMins:l,currTimestamp:e.timestamp})}_.length>4&&_.splice(0,_.length-4);const S=e=>{if(e<60)return`${e} `;const t=Math.floor(e/60),a=e%60;return t<24?`${t} ${a>0?" "+a+" ":""}`:`${Math.floor(t/24)}  ${t%24} `},I=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})}`};let j=!1,M=0;const E=[];if(s.forEach((e,t)=>{if("innerVoice"===e.type)return;const a=_.find(e=>e.index===t);if(a){if(f){const e=S(a.diffMins),t=`[(${I(a.currTimestamp)})  ${e}]`;C.push({role:"system",content:t})}j=!0,M=a.currTimestamp}let n="Unknown";if(e.isMe)n=It.value.name;else{const t=Jt(e.senderId);n=t?t.name:"Unknown"}if(e.isRecalled)C.push({role:e.isMe?"user":"assistant",content:`[] ${n}${e.text||"[]"}`});else if("image"===e.type)e.isAnalyzed?C.push({role:e.isMe?"user":"assistant",content:`[] ${n}[]`}):(C.push({role:e.isMe?"user":"assistant",content:[{type:"text",text:`[] ${n} sent an image.`},{type:"image_url",image_url:{url:e.content}}]}),E.push(e.id));else if("transfer"===e.type)C.push({role:e.isMe?"user":"assistant",content:`[] ${n}@${qt(e)} ${e.amount?e.amount.toFixed(2):"0.00"} ${e.note||""}`.trim()});else if("payment_notice"===e.type)"collect"===e.action?C.push({role:"assistant",content:`[] ${e.senderName}${e.targetName} ${e.amount}`}):C.push({role:"assistant",content:`[] ${e.senderName}${e.targetName} ${e.amount}`});else if("video_call_notice"===e.type){if("missed"===e.callResult)C.push({role:e.isMe?"user":"assistant",content:`[] ${n} `});else if("completed"===e.callResult&&e.callTranscript){let t="";try{const a="string"==typeof e.callTranscript?JSON.parse(e.callTranscript):e.callTranscript;Array.isArray(a)&&(t=a.map(e=>e.text).join("\n"))}catch(UI){}t&&C.push({role:"system",content:`[] ${n} ${Math.floor((e.duration||0)/1e3)}\n${t}`})}}else{let t="[]",a=e.text;if("sticker"===e.type?(t="[]",a=e.keyword):"spoiler"===e.type?(t="[]",a=e.text):"voice"===e.type?(t="[]",a=e.text):"action"===e.type?(t="[]",a=e.text):"html"===e.type?(t="[html]",a=e.content||e.text):"location"===e.type&&(t="[]",a=e.text),e.replyTo){t="[]";let l=e.replyTo.senderName;if(e.replyTo.id){const t=St.value.find(t=>t.id===e.replyTo.id);if(t)if(t.isMe)l=It.value.name;else{const e=Jt(t.senderId);e&&e.name&&(l=e.name)}}const s=`{${l}${e.replyTo.text}}`;C.push({role:e.isMe?"user":"assistant",content:`${t} ${n}${s} ${a}`})}else C.push({role:e.isMe?"user":"assistant",content:`${t} ${n}${a}`})}}),s.length>0){const e=s[s.length-1],t=Date.now(),a=t-e.timestamp,n=Math.floor(a/6e4);if(n>15){if(f){const e=S(n),a=`[(${I(t)})  ${e}]`;C.push({role:"system",content:a})}j=!0,M=t}}if(j&&(f||x)||!j&&x){const e=l.value?.localSettings?.myLocationOverride,t=It.value.name,n=M||Date.now(),s=l.value?.localSettings?.myWeatherConfig,i=async(e,t)=>{let a=[];if(f&&a.push(((e,t)=>{let a=Intl.DateTimeFormat().resolvedOptions().timeZone;e&&e.trim()&&(a=e.trim());try{const e=t?new Date(t):new Date,n=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${n}-${l}-${s} ${["","","","","","",""][e.getDay()]} ${e.toLocaleTimeString("en-US",{timeZone:a,hour:"2-digit",minute:"2-digit",hour12:!1})}`}catch(UI){return(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}})(e,n)),x&&t&&t.lat){const e=await uc(t.lat,t.long);e&&a.push(`${l=e.conditionCode,cc[l]||"Unknown"} ${e.temperature}C`)}var l;return a.join(" ")},o=await i(e,s),r=[];o&&r.push(`${t}: ${o}`);const c=l.value?.localSettings?.theirLocationOverride,d=l.value?.localSettings?.memberOverrides||{},u=l.value?.localSettings?.theirWeatherConfig,p=l.value?.localSettings?.groupWeatherConfigs||{};if(("group"===l.value?.type||l.value?.isGroup)&&Array.isArray(l.value.members))for(const a of l.value.members){const e=Oi.contacts.find(e=>e.id===a);if(e){const t=d[a]?.location||e.location,n=p[a],l=await i(t,n);l&&r.push(`${e.name}: ${l}`)}}else{const e=Oi.contacts.find(e=>e.id===a.chatId);if(e){const t=c||e.location,a=await i(t,u);a&&r.push(`${e.name}: ${a}`)}}if(r.length>0){let e="",t="Current Context";f&&!x&&(e="",t="Current Time"),!f&&x&&(e="",t="Current Weather");const a=r.join(", ");C.push({role:"system",content:`[${e} (${t})${a}]`})}}const A=[];je.value.length>0&&je.value.forEach(e=>{ao(e.id).forEach(e=>A.push(e.keyword))});const T=A.length>0?`\n[]: ${A.join(", ")}`:"\n[]: ";if("group"===l.value?.type||l.value?.isGroup){const a=(l.value.members||[]).map(e=>{const t="object"==typeof e?e.id:e,a=Oi.contacts.find(e=>e.id===t);return a?`${a.name||"Unknown"} (${a.handle||a.name}): ${a.persona||a.bio||"No persona"}`:""}).filter(Boolean).join("\n");z=`\n "${l.value.title||"Group"}"\n"${e}" (${t})\n${w?"\n"+w+"\n":""}\n\n${a||""}${k}\n${T}\n\n - \n [] \n- " X //"""""""""\n- \n- \n- \n\n - \n- A  B  Alice Bob  []  Alice\n- \n-  Alice  Bob  Alice Bob Alice  Charlie \n-  [] \n- \n- \n\n - \n- "..."""\n- "...""..."\n- \n- \n\n - \n []  []  [] \n- \n- /\n\n\nHTML - \nHTML/\n1.  [html]  [] \n2. [html] \n3. HTML[html]\n\n - \n1.  [] "[] "  "[] "\n2. "[] "\n\n\n\n[] Alice\n[html] Alice<div>HTML</div>   \n\n\n[] \n[] {} \n[] \n[] \n[] @  \n[]  [] AliceMagic 100.00\n[]  [] BobMagic 50.00\n[] \n[html] <HTML>\n[] \n[] \n[] ${b?"\n[] \n\n - \n1[]"+(m&&g?`\n\n - \n\n[] ${g}`:"\n\n[] Alice...\n[] Alice~"):""}\n\n1${b?"\n[] Alice~":""}\n[] Alice~\n[] Bob{Alice~} \n[] Alice\n[] Charlie{Bob} \n\n\n2-4${b?"1[]":""}`}else{const n=Oi.contacts.find(e=>e.id===a.chatId),l=n?.name||o.value.handle;z=`\n"${l}"\nPersona${n?.persona||n?.bio||"A helpful assistant."}${k}\n"${e}"\n${t}\n${w?"\n"+w+"\n":""}\n${T}\n\n - \n [] \n- " X //"""""""""\n- \n- \n- \n\n - \n- "..."""\n- "...""..."\n- \n- \n\n - \n [] "[] @ 100.00" []  [] \n- \n- /\n\nHTML - \nHTML/\n1.  [html]  [] \n2. [html] \n3. HTML[html]\n\n - \n1.  [] "[] ${l}"  "[] ${l}"\n2. "[] ${l}"\n\n\n[] ${l}\n[html] ${l}<div>HTML</div>   HTML\n\n\n[] ${l}\n[] ${l}{} \n[] ${l}\n[] ${l}\n[] ${l}@  \n[] ${l} [] ${l}${e} 100.00\n[] ${l} [] ${l}${e} 50.00\n[] ${l}\n[html] ${l}<HTML>\n[] ${l}\n[] ${l}\n[] ${l}${b?`\n[] ${l}\n\n - \n1[]${m&&g?`\n\n - \n\n[] ${l}${g}`:`\n\n[] ${l}...\n[] ${l}...\n[] ${l}...`}`:""}\n\n1${b?`\n[] ${l}...`:""}\n[] ${l}\n[] ${l}\n\n\n2-7${b?"1[]":""}1`}p&&p.length>0&&p.forEach(e=>{const t=Math.max(0,C.length-e.depth);C.splice(t,0,{role:"system",content:`[] ${e.content}`})});try{const e=[...r.map(e=>({role:"system",content:`[/] ${e}`})),{role:"system",content:z},...C,...d.map(e=>({role:"system",content:`[/] ${e}`}))],t=!0===Bt.stream.value,a={model:Bt.model.value||"gpt-3.5-turbo",messages:e,temperature:Bt.temperature.value||.7,stream:t},n=Bt.getActiveKey(),l=Bt.endpoint.value.replace(/\/+$/,"")+"/chat/completions",s=async()=>{const e=1500+1500*Math.random();await new Promise(t=>setTimeout(t,e))},i=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(a)});if(!i.ok){const e=await i.text();throw new Error(`API Error: ${i.status} - ${e}`)}if(t){const e=i.body.getReader(),t=new TextDecoder("utf-8");let a=!1,n="";for(;!a;){const{value:l,done:i}=await e.read();if(a=i,l){const e=t.decode(l,{stream:!0}).split("\n");for(const t of e)if(t.trim().startsWith("data: ")){const e=t.trim().slice(6);if("[DONE]"===e)continue;try{const t=JSON.parse(e);n+=t.choices?.[0]?.delta?.content||"";const a=/\[(?:|||||||||html||||)]/;let l=n.search(a),i=-1;if(-1!==l){const e=n.substring(l+1).search(a);-1!==e&&(i=l+1+e)}for(;-1!==l&&-1!==i;){const e=n.slice(l,i).trim();if(await Wt(e),await s(),n=n.slice(i),l=n.search(a),i=-1,-1!==l){const e=n.substring(l+1).search(a);-1!==e&&(i=l+1+e)}}}catch(UI){}}}}if(-1!==n.search(/\[(?:|||||||||html||||)]/)){const e=n.substring(n.search(/\[(?:|||||||||html||||)]/)).trim();await Wt(e)}}else{const e=await i.json(),t=(e.choices?.[0]?.message?.content||"").split(/(?=\[(?:|||||||||html||||)])/);for(const a of t)a.trim()&&(await Wt(a),await s())}}catch(UI){u.value=!1}finally{if(u.value=!1,E&&E.length>0)for(const e of E){const t=St.value.find(t=>t.id===e);t&&await Wi(a.chatId,{...t,isAnalyzed:!0})}if(y&&y.length>0){const e=St.value.filter(e=>!e.isMe&&e.timestamp>Date.now()-6e4).map(e=>(e.text||"").toLowerCase()).join(" ");for(const t of y){(t.action||"").toLowerCase().split(/[\s]+/).filter(e=>e.length>1).some(t=>e.includes(t))&&t.id&&await ro(t.id)}}await Kt(),At()}},Gt=new Set,Wt=async e=>{const t=e.match(/^\[(|)]\s*(.+?)[:]\s*(.+?)\s+(\d+(\.\d+)?)/);if(t){const e=""===t[1]?"collect":"reject",n=t[2].trim(),s=t[3].trim(),i=parseFloat(t[4]);return void(await(async(e,t,n,s)=>{const i=St.value.filter(e=>"transfer"===e.type&&"pending"===e.status&&!0===e.isMe&&Math.abs(e.amount-s)<.1&&!Gt.has(e.id)),o=i[i.length-1];if(o){Gt.add(o.id),"collect"===e?await Wi(a.chatId,{...o,status:"collected"}):"reject"===e&&(await Wi(a.chatId,{...o,status:"rejected"}),Pi(o.amount,`Refund from ${t}`));let i=a.chatId;if("group"===l.value?.type||l.value?.isGroup){const e=Oi.contacts.find(e=>e.name===t);e&&(i=e.id)}await Ki(a.chatId,{id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,type:"payment_notice",action:e,amount:s,senderId:i,senderName:t,targetName:n,timestamp:Date.now(),isMe:!1,text:"collect"===e?"Accepted transfer":"Rejected transfer"}),setTimeout(()=>Gt.delete(o.id),5e3)}})(e,n,s,i))}const n=e.match(/^\[\]\s*(.+?)[:]\s*\{(.+?)[:](.+?)\}\s*(.+)$/s);if(n&&n[4]){const e=n[1].trim(),t=n[2].trim(),s=n[3].trim(),i=n[4].trim(),o=St.value.slice().reverse().find(e=>{const a=e.text&&e.text.includes(s);let n=!1;if(e.isMe)n=t===It.value.name||t===It.value.handle;else{const a=Jt(e.senderId);a&&(n=t===a.name||t===a.handle)}return a&&n});let r=a.chatId;if("group"===l.value?.type||l.value?.isGroup){let t=Oi.contacts.find(t=>t.name===e||t.handle===e);t&&(r=t.id)}let c=t;if(o)c=B(o);else if(t===It.value.name)c=It.value.handle||It.value.name;else{const e=Oi.contacts.find(e=>e.name===t);e&&(c=e.handle||e.name)}const d={id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,text:i,content:i,type:"text",senderId:r,timestamp:Date.now(),isMe:!1,replyTo:{id:o?o.id:"unknown_quote",text:s,senderName:c,type:o?o.type:"text"}};return await Ki(a.chatId,d),await Kt(),void At()}const s=e.match(/^\[]\s*(.+?)[:](.+)$/s);if(s&&s[2]){const e=s[1].trim(),t=s[2].trim();return void(await Ht(e,t,"text"))}const i=e.match(/^\[]\s*(.+?)[:](.+)$/s);if(i&&i[2]){const e=i[1].trim(),t=i[2].trim();return void(await Ht(e,t,"spoiler"))}const o=e.match(/^\[]\s*(.+?)[:]\s*@(.+?)\s+(\d+(\.\d+)?)\s*(.*)$/);if(o){o[1].trim();const e=o[2].trim(),t=parseFloat(o[3]),n=o[5]?o[5].trim():"";let s=a.chatId;"group"===l.value?.type||l.value;const i=It.value.name.toLowerCase();let r=null;if(e.toLowerCase()===i||""===e||""===e)r=It.value.id;else{const t=Oi.contacts.find(t=>t.name===e);t&&(r=t.id)}const c={id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,type:"transfer",amount:t,note:n,senderId:s,recipientId:r,recipientName:e,timestamp:Date.now(),isMe:!1,status:"pending"};return void(await Ki(a.chatId,c))}const r=e.match(/^\[]\s*(.+?)[:](.+)$/s);if(r&&r[2]){const e=r[1].trim(),t=r[2].trim();return void(await Ht(e,JSON.stringify({name:t,address:"Shared Location"}),"location"))}const c=e.match(/^\[\]\s*(.+?)[:](.+)$/s);if(c&&c[2]){const e=c[1].trim(),t=c[2].trim();return void(await Ht(e,t,"action"))}const d=e.match(/^\[\]\s*(.+)$/s);if(d){return void(e=>{if(Ge.value)return;let t=null;t="group"===l.value?.type||l.value?.isGroup?Oi.contacts.find(t=>t.name===e||t.handle===e):Oi.contacts.find(e=>e.id===a.chatId),t||(t={name:e,handle:e,avatar:l.value?.avatar||"https://via.placeholder.com/100"}),tt.value=t,$i(!0,a.chatId),et.value="incoming"})(d[1].trim())}const u=e.match(/^\[]\s*(.+?)[:](.+)$/s);if(u&&u[2]){const e=u[1].trim(),t=u[2].trim(),a=je.value.flatMap(e=>ao(e.id)).find(e=>e.keyword===t);return void(a&&await Ht(e,a.url,"sticker",t))}const p=e.match(/^\[]\s*(.+?)[:](.+)$/s);if(p&&p[2]){const e=p[1].trim(),t=p[2].trim();return void(await Ht(e,t,"voice"))}const v=e.match(/^\[html\]\s*(.+?)[:](.+)$/s);if(v&&v[2]){const e=v[1].trim(),t=v[2].trim();return void(await Ht(e,t,"html"))}const f=e.match(/^\[\]\s*(.+?)[:](.+)$/s);if(f&&f[2]){const e=f[1].trim(),t=f[2].trim();return void(await Ht(e,t,"innerVoice"))}const x=e.match(/\[\]\s*(.+?)[:](.+)$/s);if(x&&x[2]){const e=x[1].trim(),t=x[2].trim(),n=St.value.slice(-20).reverse().find(e=>!e.isRecalled&&e.text&&(e.text.includes(t)||t.includes(e.text))&&e.senderId!==a.chatId);if(n)await new Promise(e=>setTimeout(e,2e3)),X(n.id);else{await Ht(e,t,"text"),await Kt(),At(),await new Promise(e=>setTimeout(e,2500));const a=St.value[St.value.length-1];a&&!a.isRecalled&&X(a.id)}return}},Ht=async(e,t,n="text",s="")=>{let i=a.chatId;if("group"===l.value?.type||l.value?.isGroup){const t=e.toLowerCase();let a=Oi.contacts.find(a=>a.name===e||a.handle===e||a.id===e||a.name&&a.name.toLowerCase()===t||a.handle&&a.handle.toLowerCase()===t);if(!a&&l.value.members.includes(e)&&(a=Oi.contacts.find(t=>t.id===e)),!a&&l.value.members&&l.value.members.length>0){const e=l.value.members[0];a=Oi.contacts.find(t=>t.id===e)}a&&(i=a.id)}const o={id:"msg_"+Date.now()+Math.random(),conversationId:a.chatId,text:t,content:t,type:n,keyword:s,senderId:i,senderName:e,timestamp:Date.now(),isMe:!1};await Ki(a.chatId,o),await Kt(),At()},qt=e=>{if(e.recipientName)return e.recipientName;if(e.recipientId){if(e.recipientId===It.value.id)return It.value.name;const t=Oi.contacts.find(t=>t.id===e.recipientId);if(t)return t.name}return e.isMe?te.value.name||"User":It.value.name},Jt=e=>{if("me"===e)return null;const t=l.value?.localSettings?.memberOverrides?.[e],a=Oi.contacts.find(t=>t.id===e);return t?{...a,handle:t.nickname||a?.handle||"Unknown",avatar:t.avatar||a?.avatar,id:e}:a};return(e,t)=>{return ul(),xl(sl,null,[wl("div",wc,[wl("header",kc,[wl("div",zc,[wl("button",{onClick:c,class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[44]||(t[44]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),wl("div",Cc,[wl("div",{class:"size-9 rounded-full bg-black overflow-hidden flex items-center justify-center relative border border-gray-100",style:R({backgroundImage:o.value.avatar?`url(${o.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[!o.value.avatar&&o.value.isAbstract?(ul(),xl("div",_c,[...t[45]||(t[45]=[wl("div",{class:"w-[0.5px] h-full bg-white/30 rotate-45 absolute left-1/2"},null,-1),wl("div",{class:"w-[0.5px] h-full bg-white/30 -rotate-45 absolute left-1/2"},null,-1)])])):o.value.avatar?Sl("",!0):(ul(),xl("div",Sc))],4),wl("div",Ic,[wl("h1",jc,J(o.value.handle||"Unknown"),1),t[46]||(t[46]=wl("span",{class:"text-[9px] text-zinc-400 uppercase tracking-[0.15em] font-medium"},"Online",-1))])]),wl("div",Mc,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("navigate","chat-settings",{id:a.chatId})),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"more_horiz")])])]),wl("main",{ref_key:"messagesContainer",ref:Mt,class:"flex-1 overflow-y-auto px-5 pt-4 pb-2 flex flex-col gap-4 w-full"},[wl("div",Ec,[wl("span",Ac,J(l.value?.time||"Today"),1)]),r.value.length>0?(ul(),xl("div",Tc,[(ul(!0),xl(sl,null,sn(r.value,a=>{return ul(),xl("div",{key:a.id,id:"msg-"+a.id,class:F(["flex flex-col relative select-none",a.isMe?"items-end":"items-start"])},[a.isRecalled?(ul(),xl("div",$c,[wl("div",{class:F(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0",I.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[wl("div",{class:F(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",j.value.has(a.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:e=>H(a)},[j.value.has(a.id)?(ul(),xl("span",Nc,"check")):Sl("",!0)],10,Lc)],2),wl("div",Pc,[wl("div",{class:"flex flex-col items-center gap-1 cursor-pointer group p-2",onClick:di(e=>a.isRecallRevealed=!a.isRecallRevealed,["stop"]),onContextmenu:di(e=>K(a),["prevent"])},[wl("span",Dc,[Cl(J(a.isMe?"":`${Jt(a.senderId)?.handle||Jt(a.senderId)?.name||"Someone"} `)+" ",1),wl("span",Uc,J(a.isRecallRevealed?"()":"()"),1)]),a.isRecallRevealed?(ul(),xl("div",Vc,["image"===a.type?(ul(),xl("img",{key:0,src:a.content||a.text,class:"max-w-[120px] rounded-lg opacity-80 grayscale"},null,8,Bc)):"sticker"===a.type?(ul(),xl("img",{key:1,src:a.content||a.text,class:"max-w-[80px] opacity-80 grayscale"},null,8,Fc)):"transfer"===a.type||"payment_notice"===a.type?(ul(),xl("span",Gc,"["+J(a.type)+"]",1)):(ul(),xl("p",{key:3,class:"break-words leading-relaxed whitespace-pre-wrap",innerHTML:i(a.text||"[Empty Message]")},null,8,Kc))])):Sl("",!0)],40,Rc)])])):(ul(),xl("div",Wc,[wl("div",{class:F(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0 pt-[5px]",I.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[wl("div",{class:F(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",j.value.has(a.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:e=>H(a)},[j.value.has(a.id)?(ul(),xl("span",qc,"check")):Sl("",!0)],10,Hc)],2),wl("div",{class:F(["flex-1 min-w-0 flex flex-col relative transition-all duration-300",[a.isMe?"items-end":"items-start",E.value&&E.value.id===a.id?"z-[60]":"z-auto",a.isRecalled?"opacity-90":""]])},[wl("div",{class:F(["flex items-start gap-2 mb-2 w-full transition-all duration-300",a.isMe?"flex-row-reverse":"flex-row"]),onContextmenu:di(e=>K(a),["prevent"])},[a.isMe&&!1!==l.value?.localSettings?.showSelfAvatar||!a.isMe&&!1!==l.value?.localSettings?.showOtherAvatar?(ul(),xl("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:R({backgroundImage:`url(${a.isMe?l.value?.localSettings?.myAvatarOverride||It.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E":l.value?.localSettings?.theirAvatarOverride||Jt(a.senderId)?.avatar||l.value?.avatar})`,backgroundSize:"cover"})},null,4)):Sl("",!0),wl("div",{class:F(["flex flex-col max-w-[88%] text-[15px]",a.isMe?"items-end":"items-start"])},["group"!==l.value?.type||a.isMe?Sl("",!0):(ul(),xl("div",Yc,J(Jt(a.senderId)?.handle||"Unknown"),1)),"video_call_notice"===a.type?(ul(),xl("div",{key:1,onClick:e=>Be(a),class:F(["px-4 py-3 rounded-2xl cursor-pointer transition-all flex items-center gap-3 select-none shadow-sm group border active:scale-[98%]",a.isMe?"bg-black text-white border-zinc-800 hover:bg-zinc-900 rounded-br-sm":"bg-white border-zinc-100 hover:bg-zinc-50 rounded-bl-sm"])},[wl("div",{class:F(["w-9 h-9 rounded-full flex items-center justify-center transition-colors",a.isMe?"bg-white/10 group-hover:bg-white/20":"bg-zinc-100 group-hover:bg-zinc-200"])},[wl("span",{class:F(["material-symbols-outlined text-xl","missed"===a.callResult?"text-red-400":a.isMe?"text-white":"text-zinc-800"])},J("missed"===a.callResult?"call_missed":"videocam"),3)],2),wl("div",Qc,[wl("span",{class:F(["text-[13px] font-bold leading-tight tracking-wide",a.isMe?"text-white":"text-zinc-800"])},J("missed"===a.callResult?"Missed Call":"Video Chat"),3),wl("span",{class:F(["text-[10px] font-mono mt-0.5 transition-colors",a.isMe?"text-white/60":"text-zinc-500"])},J(a.duration?Ve(a.duration):"missed"===a.callResult?"No Answer":"Ended"),3)]),"completed"===a.callResult?(ul(),xl("span",{key:0,class:F(["material-symbols-outlined text-lg ml-1 group-hover:translate-x-0.5 transition-all",a.isMe?"text-white/30 group-hover:text-white/60":"text-zinc-300 group-hover:text-zinc-500"])},"chevron_right",2)):Sl("",!0)],10,Xc)):"sticker"===a.type?(ul(),xl("div",{key:2,class:F(["flex flex-col",a.isMe?"items-end":"items-start"])},[a.replyTo?(ul(),xl("div",{key:0,class:F(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",a.isMe?"items-end":"items-start"]),onClick:di(e=>T(a.replyTo.id),["stop"])},[wl("div",{class:F(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(a.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[wl("span",ed,J(a.replyTo.senderName),1),wl("span",td,J(a.replyTo.text),1)],2)],10,Zc)):Sl("",!0),wl("div",{class:F(["rounded-2xl overflow-hidden mb-1",a.isMe?"rounded-tr-sm":"rounded-tl-sm"])},[wl("img",{src:a.content||a.text,class:"max-w-[110px] max-h-[110px] object-contain block bg-white/50 backdrop-blur-sm"},null,8,ad)],2)],2)):"spoiler"===a.type?(ul(),xl("div",{key:3,class:"relative overflow-hidden rounded-[24px] cursor-pointer group w-[240px] h-[320px] shadow-sm transition-all duration-300 hover:shadow-md",onClick:e=>a.isRevealed=!a.isRevealed},[t[48]||(t[48]=wl("div",{class:"absolute inset-0 bokeh-effect"},null,-1)),a.isRevealed?(ul(),xl("div",sd,[wl("p",{class:"font-serif text-[20px] leading-relaxed text-center text-black/90 break-words drop-shadow-sm italic",innerHTML:i(a.text)},null,8,id)])):(ul(),xl("div",ld,[...t[47]||(t[47]=[_l('<div class="absolute inset-0 z-0 opacity-80" data-v-aab90ae4><div class="absolute w-14 h-16 top-6 left-6 -rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-translate-y-1" data-v-aab90ae4><div class="w-full h-[80%] bg-zinc-800 flex items-center justify-center" data-v-aab90ae4><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-aab90ae4>filter_hdr</span></div></div><div class="absolute w-12 h-16 top-10 right-4 rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:translate-x-1" data-v-aab90ae4><div class="w-full h-[80%] bg-zinc-300 flex items-center justify-center" data-v-aab90ae4><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-aab90ae4>photo_camera</span></div></div><div class="absolute w-14 h-16 bottom-12 left-8 rotate-6 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-rotate-3" data-v-aab90ae4><div class="w-full h-[80%] bg-zinc-600 flex items-center justify-center" data-v-aab90ae4><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-aab90ae4>auto_awesome_motion</span></div></div></div><div class="relative z-10 flex flex-col items-center transform translate-y-2" data-v-aab90ae4><span class="font-serif italic text-black text-[18px] tracking-tight drop-shadow-sm" data-v-aab90ae4>Click to reveal</span><span class="text-[9px] text-black/50 uppercase tracking-[0.2em] font-medium mt-1" data-v-aab90ae4>Tap/Click</span></div>',2)])]))],8,nd)):"image"===a.type?(ul(),xl("div",{key:4,class:F(["flex flex-col",a.isMe?"items-end":"items-start"])},[a.replyTo?(ul(),xl("div",{key:0,class:F(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[200px]",a.isMe?"items-end":"items-start"]),onClick:di(e=>T(a.replyTo.id),["stop"])},[wl("div",{class:F(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(a.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[wl("span",rd,J(a.replyTo.senderName),1),wl("span",cd,J(a.replyTo.text),1)],2)],10,od)):Sl("",!0),wl("div",{class:"rounded-2xl overflow-hidden mb-1 cursor-zoom-in",onClick:e=>{return t=a.content,Ce.value=t,void(ze.value=!0);var t}},[wl("img",{src:a.content,class:"max-w-[200px] max-h-[300px] object-cover block bg-zinc-50 border border-black/5"},null,8,ud)],8,dd)],2)):"location"===a.type?(ul(),xl("div",{key:5,class:F(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl rounded-[24px]",[a.isMe?"bg-white rounded-br-md border border-zinc-100":"bg-white rounded-bl-md border border-zinc-100",j.value.has(a.id)?"ring-2 ring-indigo-500":""]]),onClick:()=>{try{e.window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(JSON.parse(a.content).name||a.text)}`,"_blank")}catch(UI){}},style:{width:"260px"}},[wl("div",vd,[t[49]||(t[49]=wl("div",{class:"absolute inset-0",style:{"background-image":"linear-gradient(#e4e4e7 1px, transparent 1px), linear-gradient(to right, #e4e4e7 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),(ul(!0),xl(sl,null,sn(zt(a.text),(e,t)=>(ul(),xl("div",{key:t,class:"absolute bg-black transition-all duration-700 hover:scale-105",style:R({left:e.left,top:e.top,width:e.width,height:e.height,opacity:e.opacity,borderRadius:"2px"})},null,4))),128)),t[50]||(t[50]=_l('<div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 translate-y-full group-hover:-translate-y-full transform" data-v-aab90ae4></div><div class="absolute inset-0 flex items-center justify-center pt-4" data-v-aab90ae4><div class="relative flex flex-col items-center" data-v-aab90ae4><div class="w-12 h-12 bg-black/5 rounded-full animate-ping absolute top-0 -translate-y-1.5 opacity-0 group-hover:opacity-100 transition-opacity" data-v-aab90ae4></div><div class="w-8 h-8 rounded-full bg-black shadow-lg flex items-center justify-center relative z-10 transform transition-transform group-hover:-translate-y-2 ring-2 ring-white" data-v-aab90ae4><div class="w-2.5 h-2.5 rounded-full bg-white" data-v-aab90ae4></div></div><div class="w-1 h-3 bg-black rounded-b-sm -mt-0.5 z-0 shadow-sm" data-v-aab90ae4></div><div class="w-3 h-1.5 bg-black/10 rounded-full blur-[1px] mt-0.5 group-hover:scale-75 group-hover:opacity-50 transition-all" data-v-aab90ae4></div></div></div>',2))]),wl("div",fd,[wl("div",xd,[wl("h4",bd,J((()=>{try{return JSON.parse(a.content).name}catch(UI){return a.text}})()),1),t[51]||(t[51]=wl("div",{class:"w-5 h-5 rounded-full bg-zinc-50 flex items-center justify-center shrink-0 group-hover:bg-zinc-100 transition-colors"},[wl("span",{class:"material-symbols-outlined text-zinc-400 text-[12px]"},"open_in_new")],-1))]),wl("p",md,J((()=>{try{return JSON.parse(a.content).address}catch(UI){return"Unknown Location"}})()),1),wl("div",gd,[t[52]||(t[52]=wl("div",{class:"flex items-center gap-1.5"},[wl("div",{class:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),wl("span",{class:"text-[9px] font-bold text-zinc-400 tracking-wide"},"LIVE")],-1)),wl("span",hd,J((()=>{const e=(a.text||"Location")+(a.id||"")+"salt";let t=3735928559,n=1103547991;for(let a=0;a<e.length;a++){const l=e.charCodeAt(a);t=Math.imul(t^l,2654435761),n=Math.imul(n^l,1597334677)}t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909);return`${(Math.abs(t)%18e5/1e4-90).toFixed(4)}, ${(Math.abs(n)%36e5/1e4-180).toFixed(4)}`})()),1)])])],10,pd)):"voice"===a.type?(ul(),xl(sl,{key:6},[a.replyTo?(ul(),xl("div",{key:0,class:F(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",a.isMe?"items-end":"items-start"]),onClick:di(e=>T(a.replyTo.id),["stop"])},[wl("div",{class:F(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(a.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[wl("span",wd,J(a.replyTo.senderName),1),wl("span",kd,J(a.replyTo.text),1)],2)],10,yd)):Sl("",!0),wl("div",{class:F(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-sm hover:shadow-md",[a.isMe?"bg-black text-white rounded-[18px] rounded-br-sm":"bg-white text-black rounded-[18px] rounded-bl-sm",j.value.has(a.id)?"ring-2 ring-indigo-500":""]]),onClick:e=>a.isExpanded=!a.isExpanded},[wl("div",Cd,[wl("div",_d,[wl("div",{class:F(["w-1 h-2 rounded-full animate-pulse",a.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.8s"}},null,2),wl("div",{class:F(["w-1 h-3 rounded-full animate-pulse",a.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.1s"}},null,2),wl("div",{class:F(["w-1 h-2 rounded-full animate-pulse",a.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.9s"}},null,2),wl("div",{class:F(["w-1 h-4 rounded-full animate-pulse",a.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.3s"}},null,2),wl("div",{class:F(["w-1 h-2 rounded-full animate-pulse",a.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.7s"}},null,2)]),wl("span",Sd,J(Math.min(60,Math.ceil(a.text.length/3)))+"'",1)]),a.isExpanded?(ul(),xl("div",{key:0,class:F(["px-3 pb-3 pt-1 animate-in slide-in-from-top-1 duration-200 border-t",a.isMe?"border-white/10":"border-black/5"])},[wl("p",{class:"text-[15px] leading-relaxed break-words",innerHTML:i(a.text)},null,8,Id)],2)):Sl("",!0)],10,zd)],64)):"html"===a.type?(ul(),bl(fc,{key:7,content:a.content,"is-me":a.isMe},null,8,["content","is-me"])):"video_call_notice"===a.type||"text"===a.type&&"[] "===a.text?(ul(),xl("div",{key:8,onClick:e=>Be(a),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[wl("div",Md,[wl("div",Ed,[wl("div",{class:F(["w-8 h-8 rounded-full flex items-center justify-center shrink-0","missed"===(a.callResult||"rejected")||"rejected"===(a.callResult||"rejected")?"bg-zinc-100 text-zinc-500":"bg-black text-white"])},[wl("span",Ad,J("missed"===(a.callResult||"rejected")?"call_missed":"rejected"===(a.callResult||"rejected")?"call_end":"videocam"),1)],2),t[53]||(t[53]=wl("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Video Call",-1))]),wl("span",Td,J("missed"===(a.callResult||"rejected")?"Missed":"rejected"===(a.callResult||"rejected")?"Declined":"Ended"),1)]),wl("div",Od,[wl("span",$d,J(a.duration?Ve(a.duration):"rejected"===(a.callResult||"rejected")?"Declined":"No Answer"),1)]),wl("div",Ld,[wl("span",null,J(new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1),a.callTranscript?(ul(),xl("span",Nd,[...t[54]||(t[54]=[wl("span",{class:"material-symbols-outlined text-[10px]"},"description",-1),Cl(" Transcript ",-1)])])):Sl("",!0)])],8,jd)):"payment_notice"===a.type?(ul(),xl("div",{key:9,onClick:e=>(e=>{h.value={...e,status:"collect"===e.action?"collected":"rejected",note:"collect"===e.action?"Payment Accepted":"Payment Returned",isMe:!e.isMe},x.value=!0})(a),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[wl("div",Rd,[wl("div",Dd,[wl("div",{class:F(["w-8 h-8 rounded-full flex items-center justify-center shrink-0","collect"===a.action?"bg-black text-white":"bg-zinc-100 text-zinc-900"])},[wl("span",Ud,J("collect"===a.action?"check":"close"),1)],2),t[55]||(t[55]=wl("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Payment",-1))]),wl("span",Vd,J("collect"===a.action?"Success":"Returned"),1)]),wl("div",Bd,[t[56]||(t[56]=wl("span",{class:"text-xs opacity-60 mr-1"},"",-1)),wl("span",Fd,J(a.amount?a.amount.toFixed(2):"0.00"),1)]),wl("div",Gd,J("collect"===a.action?`${a.senderName} accepted`:`${a.senderName} rejected transfer`),1)],8,Pd)):"transfer"===a.type?(ul(),xl("div",{key:10,onClick:e=>(e=>{h.value=e,x.value=!0})(a),class:F(["rounded-2xl p-4 min-w-[220px] cursor-pointer transition-transform active:scale-95 border mb-1 relative overflow-hidden",[a.isMe?"bg-black text-white border-black":"bg-white text-black border-zinc-200","rejected"===a.status?"opacity-60 grayscale":""]])},["rejected"===a.status?(ul(),xl("div",Wd,[...t[57]||(t[57]=[wl("div",{class:"w-full h-[1px] bg-current opacity-50 rotate-[-12deg]"},null,-1)])])):Sl("",!0),wl("div",Hd,[wl("div",qd,[wl("div",{class:F(["w-8 h-8 rounded-full flex items-center justify-center",a.isMe?"bg-zinc-800":"bg-zinc-100"])},[...t[58]||(t[58]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"currency_yen",-1)])],2),t[59]||(t[59]=wl("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Transfer",-1))]),wl("span",Jd,J("collected"===a.status?"Accepted":"rejected"===a.status?"Returned":"pending"===a.status?"Unclaimed":"Success"),1)]),wl("div",Yd,[t[60]||(t[60]=wl("span",{class:"text-xs opacity-60 mr-1"},"",-1)),wl("span",{class:F(["text-2xl font-serif font-bold tracking-tight","rejected"===a.status?"line-through decoration-2":""])},J(a.amount.toFixed(2)),3)]),wl("div",Xd,[wl("span",Qd,J(`to ${qt(a)}`),1),a.note?(ul(),xl("span",Zd,' "'+J(a.note)+'" ',1)):Sl("",!0)])],10,Kd)):(ul(),xl(sl,{key:11},[(n=a.text,n&&s.value.some(e=>{if(!e.regex)return!1;try{return new RegExp(e.regex,"gms").test(n)}catch(UI){return!1}})?(ul(),xl("div",eu,[wl("div",tu,[wl("div",{innerHTML:i(a.text)},null,8,au)])])):(ul(),xl("div",{key:1,class:F([a.isMe?"bubble-sent bg-bubble-sent text-white":"bubble-received bg-bubble-received text-black","px-3 py-[7px] shadow-sm min-h-[34px] w-fit max-w-full"])},[a.replyTo?(ul(),xl("div",{key:0,class:"mb-2 mt-0.5 cursor-pointer select-none group",onClick:di(e=>T(a.replyTo.id),["stop"])},[wl("div",{class:F(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",a.isMe?"border-white/50 group-hover:border-white/70":"border-zinc-300 group-hover:border-zinc-400"])},[wl("span",{class:F(["text-[9px] font-bold uppercase tracking-wider opacity-60",a.isMe?"text-white":"text-zinc-500"])},J(a.replyTo.senderName),3),wl("span",{class:F(["text-[12px] line-clamp-1 leading-snug opacity-90",a.isMe?"text-white":"text-zinc-700"])},J(a.replyTo.text),3)],2)],8,nu)):Sl("",!0),wl("p",{class:"message-text leading-snug break-words whitespace-pre-wrap",innerHTML:i(a.text)},null,8,lu)],2)))],64)),wl("span",su,J(new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)],2)],42,Jc)],2)]))],10,Oc);var n}),128))])):Sl("",!0),u.value?(ul(),xl("div",iu,[wl("div",ou,[!1!==l.value?.localSettings?.showOtherAvatar?(ul(),xl("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:R({backgroundImage:`url(${l.value?.localSettings?.theirAvatarOverride||o.value.avatar||l.value?.avatar})`,backgroundSize:"cover"})},null,4)):Sl("",!0),t[61]||(t[61]=_l('<div class="bubble-received bg-bubble-received px-3 py-[7px] text-black w-fit" data-v-aab90ae4><div class="flex gap-1 h-[21px] items-center" data-v-aab90ae4><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-aab90ae4></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-aab90ae4></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-aab90ae4></div></div></div>',1))]),t[62]||(t[62]=wl("span",{class:"text-[9px] text-zinc-300 ml-[50px] tracking-wider uppercase"},"Typing...",-1))])):Sl("",!0),l.value?.id&&"noir"===l.value.id||0!==St.value.length?Sl("",!0):(ul(),xl("div",ru,[...t[63]||(t[63]=[wl("span",{class:"text-[12px] opacity-70"},"No messages yet",-1)])])),wl("div",{ref_key:"messagesEndRef",ref:jt,class:"h-px w-full"},null,512)],512),v.value||p.value?(ul(),xl("div",{key:0,class:"absolute inset-0 z-50",onClick:Te})):Sl("",!0),v.value?(ul(),xl("div",cu,[wl("div",{class:"w-full flex justify-center pt-3 pb-1 shrink-0 bg-white",onClick:t[1]||(t[1]=e=>v.value=!1)},[...t[64]||(t[64]=[wl("div",{class:"w-8 h-1 rounded-full bg-zinc-200/80"},null,-1)])]),wl("div",du,[t[67]||(t[67]=wl("span",{class:"text-[10px] font-bold tracking-[0.2em] text-zinc-400 uppercase font-sans"},"Sticker Meanings",-1)),wl("div",uu,[t[66]||(t[66]=wl("button",{class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[wl("span",{class:"material-symbols-outlined text-[18px]"},"search")],-1)),wl("button",{onClick:di(Ct,["stop"]),class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[...t[65]||(t[65]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"settings",-1)])])])]),wl("div",pu,[Me.value?(ul(),xl("div",vu,[(ul(!0),xl(sl,null,sn(kt(ao)(Me.value.id),e=>(ul(),xl("div",{key:e.id,class:"flex flex-col items-center gap-2 cursor-pointer group w-full",onClick:t=>(async e=>{const t={id:"msg_"+Date.now(),conversationId:a.chatId,text:e.url,content:e.url,type:"sticker",keyword:e.keyword,senderId:"me",timestamp:Date.now(),isMe:!0};await Ki(a.chatId,t)})(e)},[wl("div",xu,[wl("img",{src:e.url,class:"w-full h-full object-cover drop-shadow-sm group-hover:scale-110 transition-transform duration-300"},null,8,bu)]),wl("span",mu,J(e.keyword),1)],8,fu))),128))])):(ul(),xl("div",gu,[t[69]||(t[69]=wl("div",{class:"w-12 h-12 rounded-full bg-zinc-50 flex items-center justify-center mb-1"},[wl("span",{class:"material-symbols-outlined text-2xl opacity-40"},"dashboard_customize")],-1)),wl("div",hu,[t[68]||(t[68]=wl("span",{class:"text-[10px] uppercase font-bold tracking-widest text-zinc-400"},"Library Empty",-1)),wl("button",{onClick:di(Ct,["stop"]),class:"text-[10px] text-zinc-500 hover:text-black border-b border-zinc-300 hover:border-black transition-colors pb-0.5"}," Mount your packs ")])]))]),wl("div",yu,[t[71]||(t[71]=wl("button",{class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-50 transition-colors text-zinc-400 hover:text-black"},[wl("span",{class:"material-symbols-outlined text-[20px]"},"history")],-1)),t[72]||(t[72]=wl("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),wl("div",wu,[(ul(!0),xl(sl,null,sn(je.value,e=>(ul(),xl("button",{key:e.id,onClick:t=>ae.value=e.id,class:F(["shrink-0 transition-all flex items-center justify-center relative",ae.value===e.id?"opacity-100":"opacity-30 hover:opacity-100"])},[wl("div",zu,[ae.value===e.id?(ul(),xl("span",Cu)):Sl("",!0),e.name.toLowerCase().includes("shape")?(ul(),xl("span",_u,"category")):(ul(),xl("span",Su,J(e.name.substring(0,2)),1))])],10,ku))),128))]),t[73]||(t[73]=wl("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),wl("button",{onClick:di(Ct,["stop"]),class:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-black transition-colors rounded-lg hover:bg-zinc-50"},[...t[70]||(t[70]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])])])])):Sl("",!0),(ul(),bl(ha,{to:"body"},[C.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:t[3]||(t[3]=di(e=>C.value=!1,["self"]))},[wl("div",Iu,[t[75]||(t[75]=wl("div",{class:"text-center space-y-2"},[wl("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Pack Selection"),wl("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium"},"Choose what you see in this chat")],-1)),wl("div",ju,[0===Ie.value.length?(ul(),xl("div",Mu,[...t[74]||(t[74]=[wl("span",{class:"material-symbols-outlined text-3xl"},"folder_off",-1),wl("span",{class:"text-[10px] uppercase tracking-widest font-bold"},"Library is empty",-1)])])):Sl("",!0),(ul(!0),xl(sl,null,sn(Ie.value,e=>(ul(),xl("button",{key:e.id,onClick:t=>(async e=>{if(!l.value)return;let t=l.value.localSettings?.mountedStickerPacks;t=null==t?Ie.value.map(e=>e.id):[...t];const n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),await Fi({id:a.chatId,localSettings:{...l.value.localSettings,mountedStickerPacks:t}})})(e.id),class:F(["w-full flex items-center justify-between p-4 rounded-2xl transition-all group border",_t(e.id)?"bg-zinc-50 border-zinc-200":"bg-transparent border-transparent hover:bg-zinc-50"])},[wl("div",Au,[wl("div",Tu,J(e.name.charAt(0)),1),wl("span",Ou,J(e.name),1)]),wl("div",{class:F(["w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300 border",_t(e.id)?"bg-black border-black text-white scale-110":"bg-transparent border-zinc-300 group-hover:border-zinc-400"])},[aa(wl("span",$u,"check",512),[[ys,_t(e.id)]])],2)],10,Eu))),128))]),wl("div",Lu,[wl("button",{onClick:t[2]||(t[2]=e=>C.value=!1),class:"py-4 rounded-full font-bold text-[11px] uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5"},"Done")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[Le.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-6 animate-in fade-in duration-200",onClick:t[9]||(t[9]=di(e=>Le.value=!1,["self"]))},[wl("div",Nu,[wl("div",Pu,[wl("div",Ru,[t[77]||(t[77]=wl("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Location",-1)),wl("button",{onClick:t[4]||(t[4]=e=>Le.value=!1),class:"w-8 h-8 rounded-full bg-zinc-100 flex items-center justify-center hover:bg-zinc-200 transition-colors"},[...t[76]||(t[76]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"close",-1)])])]),wl("div",Du,[wl("div",Uu,[t[78]||(t[78]=wl("span",{class:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-black transition-colors"},"search",-1)),aa(wl("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>Ne.value=e),type:"text",placeholder:"Search places (e.g. Eiffel Tower)...",class:"w-full bg-zinc-50 border border-zinc-100 rounded-xl py-3 pl-10 pr-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-black/5 focus:border-black/10 transition-all placeholder:text-zinc-400",onKeydown:t[6]||(t[6]=pi(e=>Re({name:Ne.value,address:"Custom Location",lat:0,lng:0}),["enter"]))},null,544),[[Qs,Ne.value]])]),wl("button",{onClick:t[7]||(t[7]=e=>Re({name:Ne.value||"My Location",address:"Custom Location",lat:0,lng:0})),class:"h-[46px] px-4 bg-black text-white rounded-xl font-bold text-xs uppercase tracking-wider hover:scale-105 active:scale-95 transition-all shadow-md"}," Send ")])]),wl("div",{class:"h-24 mx-6 mt-4 rounded-2xl relative overflow-hidden shrink-0 group cursor-pointer border border-zinc-100 shadow-sm hover:shadow-md transition-all",onClick:t[8]||(t[8]=e=>Re({name:"Current Location",address:"Near coordinates",lat:0,lng:0}))},[...t[79]||(t[79]=[wl("div",{class:"absolute inset-0 bg-gradient-to-r from-zinc-100 to-zinc-50 opacity-100"},null,-1),wl("div",{class:"absolute inset-0 flex items-center justify-between px-5"},[wl("div",{class:"flex items-center gap-4"},[wl("div",{class:"w-10 h-10 rounded-full bg-black flex items-center justify-center text-white group-hover:scale-110 transition-transform shadow-lg ring-4 ring-zinc-50"},[wl("span",{class:"material-symbols-outlined text-[20px]"},"my_location")]),wl("div",{class:"flex flex-col relative z-10"},[wl("span",{class:"text-sm font-bold text-black"},"Current Location"),wl("span",{class:"text-[10px] text-zinc-500 font-medium uppercase tracking-wider"},"Tap to share")])]),wl("span",{class:"material-symbols-outlined text-zinc-300 group-hover:translate-x-1 transition-transform"},"chevron_right")],-1)])]),wl("div",Vu,[t[81]||(t[81]=wl("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 font-bold mb-2"},"Nearby Places",-1)),(ul(),xl(sl,null,sn([{name:"Central Park",address:"New York, NY",lat:40.785091,lng:-73.968285},{name:"Starbucks Reserve",address:"61 9th Ave, New York",lat:40.741895,lng:-74.004745},{name:"Empire State Building",address:"20 W 34th St",lat:40.748817,lng:-73.985428},{name:"Brooklyn Bridge",address:"New York, NY 10038",lat:40.7061,lng:-73.9969},{name:"The High Line",address:"New York, NY 10011",lat:40.748,lng:-74.0048}],e=>wl("button",{key:e.name,onClick:t=>Re(e),class:"flex items-center gap-4 p-3 hover:bg-zinc-50 rounded-xl transition-colors text-left group border border-transparent hover:border-zinc-100"},[t[80]||(t[80]=wl("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-400 group-hover:bg-black group-hover:text-white transition-all shrink-0"},[wl("span",{class:"material-symbols-outlined text-[20px]"},"location_on")],-1)),wl("div",Fu,[wl("div",Gu,J(e.name),1),wl("div",Ku,J(e.address),1)])],8,Bu)),64))])])])):Sl("",!0)])),p.value?(ul(),xl("div",Wu,[wl("div",Hu,[wl("button",{onClick:$e,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[82]||(t[82]=[_l('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z" data-v-aab90ae4></path><path d="M14 3v4a2 2 0 0 0 2 2h4" data-v-aab90ae4></path><path d="M8 13h0" data-v-aab90ae4></path><path d="M16 13h0" data-v-aab90ae4></path><path d="M10 16s.5 1 2 1 2-1 2-1" data-v-aab90ae4></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Sticker</span>',2)])]),wl("button",{onClick:t[10]||(t[10]=e=>_e.value.click()),class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[83]||(t[83]=[_l('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><rect width="18" height="18" x="3" y="3" rx="2" ry="2" data-v-aab90ae4></rect><circle cx="9" cy="9" r="2" data-v-aab90ae4></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" data-v-aab90ae4></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Gallery</span>',2)])]),wl("button",{onClick:he,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[84]||(t[84]=[_l('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" data-v-aab90ae4></path><circle cx="12" cy="13" r="3" data-v-aab90ae4></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Camera</span>',2)])]),wl("button",{onClick:we,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[85]||(t[85]=[wl("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[wl("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"mic")],-1),wl("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Voice",-1)])]),wl("button",{onClick:Pe,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[86]||(t[86]=[_l('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" data-v-aab90ae4></path><circle cx="12" cy="10" r="3" data-v-aab90ae4></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Location</span>',2)])]),wl("button",{onClick:vt,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[87]||(t[87]=[wl("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[wl("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"videocam")],-1),wl("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Video",-1)])]),wl("button",{onClick:$t,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[88]||(t[88]=[_l('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-aab90ae4><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-aab90ae4><path d="M8 3 4 7l4 4" data-v-aab90ae4></path><path d="M4 7h16" data-v-aab90ae4></path><path d="m16 21 4-4-4-4" data-v-aab90ae4></path><path d="M20 17H4" data-v-aab90ae4></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-aab90ae4>Transfer</span>',2)])]),wl("button",{onClick:Ee,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...t[89]||(t[89]=[wl("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[wl("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"refresh")],-1),wl("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Reroll",-1)])])])])):Sl("",!0),wl("input",{type:"file",ref_key:"fileInput",ref:_e,accept:"image/*",class:"hidden",onChange:Se},null,544),(ul(),bl(ha,{to:"body"},[me.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:t[13]||(t[13]=di(e=>me.value=!1,["self"]))},[wl("div",qu,[t[90]||(t[90]=wl("div",{class:"text-center"},[wl("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"New Spoiler"),wl("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap to reveal functionality")],-1)),aa(wl("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>ge.value=e),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Enter content to hide..."},null,512),[[Qs,ge.value]]),wl("div",Ju,[wl("button",{onClick:t[12]||(t[12]=e=>me.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),wl("button",{onClick:ye,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[_.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:t[16]||(t[16]=di(e=>_.value=!1,["self"]))},[wl("div",Yu,[t[91]||(t[91]=wl("div",{class:"text-center"},[wl("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"Voice Message"),wl("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap microphone to stop")],-1)),aa(wl("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>S.value=e),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Listening...",autofocus:""},null,512),[[Qs,S.value]]),wl("div",Xu,[wl("button",{onClick:t[15]||(t[15]=e=>_.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),wl("button",{onClick:ke,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[f.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:t[23]||(t[23]=di(e=>f.value=!1,["self"]))},[wl("div",Qu,["input"===y.value?(ul(),xl("h3",Zu,"Transfer")):(ul(),xl("h3",ep,"Verify")),"input"===y.value?(ul(),xl("div",tp,[z.value.length>0?(ul(),xl("div",ap,[t[94]||(t[94]=wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-2"},"Recipient",-1)),wl("div",np,[aa(wl("select",{"onUpdate:modelValue":t[17]||(t[17]=e=>k.value=e),class:"w-full bg-zinc-50 border-none rounded-xl px-4 py-3 text-sm appearance-none focus:ring-1 focus:ring-black outline-none font-medium text-center"},[t[92]||(t[92]=wl("option",{value:"",disabled:""},"Select Member",-1)),(ul(!0),xl(sl,null,sn(z.value,e=>(ul(),xl("option",{key:e.id,value:e.id},J(e.name),9,lp))),128))],512),[[ai,k.value]]),t[93]||(t[93]=wl("span",{class:"material-symbols-outlined absolute right-3 top-3 text-zinc-400 pointer-events-none"},"expand_more",-1))])])):(ul(),xl("p",sp,"To "+J(te.value.name),1)),wl("div",ip,[aa(wl("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>b.value=e),type:"number",placeholder:" 0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors bg-transparent"},null,512),[[Qs,b.value]]),aa(wl("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>m.value=e),type:"text",placeholder:"Add a note...",class:"w-full text-center text-sm bg-zinc-50 rounded-xl py-3 focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[Qs,m.value]])]),wl("div",op,J(w.value),1),wl("div",rp,[wl("button",{onClick:t[20]||(t[20]=e=>f.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),wl("button",{onClick:Lt,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Next")])])):(ul(),xl("div",cp,[t[95]||(t[95]=wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-6"},"Enter Payment Password",-1)),wl("div",dp,[aa(wl("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>g.value=e),type:"password",maxlength:"6",autofocus:"",class:"w-full bg-zinc-50 rounded-xl px-4 py-4 text-center text-2xl tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[Qs,g.value]])]),wl("div",up,J(w.value),1),wl("div",pp,[wl("button",{onClick:t[22]||(t[22]=e=>y.value="input"),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Back"),wl("button",{onClick:Nt,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])]))])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[x.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:t[25]||(t[25]=di(e=>x.value=!1,["self"]))},[wl("div",vp,[wl("div",{class:F(["h-32 flex items-center justify-center","rejected"===h.value?.status?"bg-zinc-100":"bg-black"])},[wl("span",{class:F(["material-symbols-outlined text-6xl","rejected"===h.value?.status?"text-zinc-400":"text-white/20"])},J("rejected"===h.value?.status?"remove_circle_outline":"check_circle"),3)],2),wl("div",fp,[t[98]||(t[98]=wl("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg mb-4"},[wl("span",{class:"material-symbols-outlined text-4xl text-black"},"currency_yen")],-1)),wl("h3",xp," "+J(h.value?.amount.toFixed(2)),1),wl("p",bp,J("pending"===h.value?.status?"Waiting for collection":"collected"===h.value?.status?"Transfer Successful":"rejected"===h.value?.status?"Transfer Returned":"Transfer"),1),wl("div",mp,[wl("div",gp,[t[96]||(t[96]=wl("span",{class:"text-zinc-400"},"Time",-1)),wl("span",hp,J(new Date(h.value?.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),wl("div",yp,[wl("span",wp,J(h.value?.isMe?"To":"From"),1),wl("span",kp,J(Pt(h.value)),1)]),h.value?.note?(ul(),xl("div",zp,[t[97]||(t[97]=wl("span",{class:"text-zinc-400"},"Note",-1)),wl("span",Cp,J(h.value?.note),1)])):Sl("",!0)]),h.value?.isMe||"pending"!==h.value?.status||(n=h.value,n.isMe||(n.recipientId||n.recipientName)&&n.recipientId!==It.value.id&&(!n.recipientName||n.recipientName!==It.value.name&&""!==n.recipientName&&!n.recipientName.includes(It.value.name)))?(ul(),xl("button",{key:1,onClick:t[24]||(t[24]=e=>x.value=!1),class:"mt-8 w-full py-3 rounded-full bg-zinc-100 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Close ")):(ul(),xl("div",_p,[wl("button",{onClick:Dt,class:"w-full py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Reject "),wl("button",{onClick:Rt,class:"w-full py-3.5 rounded-full bg-black text-white font-bold text-xs uppercase tracking-widest hover:scale-105 transition-transform shadow-lg"}," Collect ")]))])])])):Sl("",!0)])),ze.value?(ul(),xl("div",{key:3,class:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center cursor-zoom-out animate-in fade-in duration-200",onClick:t[26]||(t[26]=e=>ze.value=!1)},[wl("img",{src:Ce.value,class:"max-w-full max-h-full object-contain shadow-2xl transition-transform duration-300 scale-100"},null,8,Sp)])):Sl("",!0),kl(yc,{isOpen:O.value,"onUpdate:isOpen":t[27]||(t[27]=e=>O.value=e),modelValue:N.value,"onUpdate:modelValue":t[28]||(t[28]=e=>N.value=e),title:$.value,subtitle:L.value,onSave:V},null,8,["isOpen","modelValue","title","subtitle"]),(ul(),bl(ha,{to:"body"},[M.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[50] bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:t[29]||(t[29]=e=>{M.value=!1,E.value=null})})):Sl("",!0),M.value?(ul(),xl("div",Ip,[wl("div",jp,[t[106]||(t[106]=wl("div",{class:"w-full flex justify-center pt-3 pb-2"},[wl("div",{class:"w-10 h-1 rounded-full bg-zinc-200"})],-1)),wl("div",Mp,["text"===E.value?.type||E.value?.text?(ul(),xl("button",{key:0,onClick:t[30]||(t[30]=e=>(async e=>{if(e){try{await navigator.clipboard.writeText(e.text||e.content||"")}catch(t){}M.value=!1,E.value=null}})(E.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...t[99]||(t[99]=[wl("span",{class:"text-[15px] font-medium text-black"},"Copy",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"content_copy",-1)])])):Sl("",!0),wl("button",{onClick:t[31]||(t[31]=e=>(e=>{D.value="single",P.value=e.id,$.value="Edit Message",L.value="Modify this message content locally",N.value=e.text,M.value=!1,E.value=null,O.value=!0})(E.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...t[100]||(t[100]=[wl("span",{class:"text-[15px] font-medium text-black"},"Edit",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"edit",-1)])]),W.value&&!E.value?.isMe&&E.value===St.value[St.value.length-1]?(ul(),xl("button",{key:1,onClick:U,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...t[101]||(t[101]=[wl("span",{class:"text-[15px] font-medium text-black"},"Edit Full Response",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"history_edu",-1)])])):Sl("",!0),E.value?.isMe&&!E.value?.isRecalled&&Date.now()-E.value.timestamp<12e4?(ul(),xl("button",{key:2,onClick:Q,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...t[102]||(t[102]=[wl("span",{class:"text-[15px] font-medium text-black"},"Recall",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete_sweep",-1)])])):Sl("",!0),wl("button",{onClick:G,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...t[103]||(t[103]=[wl("span",{class:"text-[15px] font-medium text-black"},"Reply",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"reply",-1)])]),wl("button",{onClick:q,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...t[104]||(t[104]=[wl("span",{class:"text-[15px] font-medium text-black"},"Select",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"check_circle",-1)])]),wl("button",{onClick:Z,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors"},[...t[105]||(t[105]=[wl("span",{class:"text-[15px] font-medium text-black"},"Delete",-1),wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete",-1)])])]),wl("div",Ep,[wl("button",{onClick:t[32]||(t[32]=e=>{M.value=!1,E.value=null}),class:"w-full py-2 text-center text-[13px] font-bold uppercase tracking-widest text-zinc-400 hover:text-black transition-colors"}," Cancel ")])])])):Sl("",!0)])),I.value?(ul(),xl("div",Ap,[wl("div",Tp,[wl("span",Op,J(j.value.size)+" SELECTED ",1),wl("div",$p,[wl("button",{onClick:ee,class:"flex items-center gap-2 text-white hover:text-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed group",disabled:0===j.value.size},[...t[107]||(t[107]=[wl("span",{class:"material-symbols-outlined text-[20px] group-hover:scale-110 transition-transform"},"delete",-1),wl("span",{class:"font-bold text-xs uppercase tracking-widest hidden sm:block"},"Delete",-1)])],8,Lp),t[109]||(t[109]=wl("div",{class:"w-px h-4 bg-white/20"},null,-1)),wl("button",{onClick:Y,class:"flex items-center justify-center text-white/50 hover:text-white transition-colors"},[...t[108]||(t[108]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):Sl("",!0),le.value?(ul(),xl("div",{key:5,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex items-center justify-center animate-in fade-in duration-200",onClick:t[34]||(t[34]=di(e=>le.value=!1,["self"]))},[wl("div",Np,[wl("div",Pp,[t[111]||(t[111]=wl("h3",{class:"text-lg font-bold"},"",-1)),wl("button",{onClick:t[33]||(t[33]=e=>le.value=!1),class:"p-1 rounded-full hover:bg-zinc-100"},[...t[110]||(t[110]=[wl("span",{class:"material-symbols-outlined text-zinc-400"},"close",-1)])])]),wl("div",Rp,[(ul(!0),xl(sl,null,sn(l.value?.members||[],e=>(ul(),xl("button",{key:e,onClick:t=>{return a=e,se.value=a,le.value=!1,void(ne.value=!0);var a},class:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-50 transition-colors"},[wl("div",{class:"w-10 h-10 rounded-full bg-zinc-200",style:R({backgroundImage:`url(${kt(Oi).contacts.find(t=>t.id===e)?.avatar||""})`,backgroundSize:"cover"})},null,4),wl("span",Up,J(kt(Oi).contacts.find(t=>t.id===e)?.handle||kt(Oi).contacts.find(t=>t.id===e)?.name||"Unknown"),1)],8,Dp))),128))])])])):Sl("",!0),ne.value?(ul(),xl("div",{key:6,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex flex-col items-center justify-center animate-in fade-in duration-200",onClick:di(fe,["self"])},[wl("div",Vp,[wl("button",{onClick:t[35]||(t[35]=e=>ie.value="current"===ie.value?"favorites":"current"),class:"p-2.5 rounded-full bg-white/90 backdrop-blur shadow-lg transition-all hover:bg-white",title:"current"===ie.value?"":""},[wl("span",Fp,J("current"===ie.value?"bookmark":"schedule"),1)],8,Bp),wl("button",{onClick:fe,class:"p-2.5 rounded-full bg-white/90 backdrop-blur shadow-lg transition-all hover:bg-white"},[...t[112]||(t[112]=[wl("span",{class:"material-symbols-outlined text-zinc-600 text-[20px]"},"close",-1)])])]),"current"===ie.value?(ul(),xl(sl,{key:0},[0===ue.value.length?(ul(),xl("div",Gp,[wl("div",Kp,[wl("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:R({backgroundImage:`url(${xe(se.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),wl("div",Wp,[wl("h3",Hp,J(xe(se.value)?.handle||xe(se.value)?.name||"Unknown"),1),t[113]||(t[113]=wl("p",{class:"text-xs text-zinc-400"},"",-1))])]),t[114]||(t[114]=wl("div",{class:"text-center py-8 text-zinc-400"},[wl("svg",{class:"w-10 h-10 mx-auto mb-2 text-zinc-300",fill:"currentColor",viewBox:"0 0 24 24"},[wl("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})]),wl("p",null,"")],-1))])):Sl("",!0),(ul(!0),xl(sl,null,sn([...ue.value].reverse(),(e,a)=>{return ul(),xl(sl,{key:e.id},[(n=e.text||e.content,n&&s.value.some(e=>{if(!e.regex||!e.html)return!1;try{return new RegExp(e.regex,"gms").test(n)}catch(UI){return!1}})?(ul(),xl("div",qp,[wl("button",{onClick:t=>pe(e.id),class:F(["absolute top-2 right-2 p-1.5 rounded-full transition-all z-10 bg-black/20 backdrop-blur-sm",e.isFavorited?"text-zinc-400":"text-white/50 hover:text-white/80"])},[(ul(),xl("svg",{class:"w-4 h-4",fill:e.isFavorited?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...t[115]||(t[115]=[wl("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1)])],8,Yp))],10,Jp),wl("div",{innerHTML:be(e.text||e.content)},null,8,Xp)])):(ul(),xl("div",Qp,[wl("div",Zp,[wl("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:R({backgroundImage:`url(${xe(se.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),wl("div",ev,[wl("h3",tv,J(xe(se.value)?.handle||xe(se.value)?.name||"Unknown"),1),t[116]||(t[116]=wl("p",{class:"text-xs text-zinc-400"},"",-1))]),wl("button",{onClick:t=>pe(e.id),class:F(["p-2 rounded-full transition-all",e.isFavorited?"text-zinc-500":"text-zinc-300 hover:text-zinc-500"])},[(ul(),xl("svg",{class:"w-5 h-5",fill:e.isFavorited?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...t[117]||(t[117]=[wl("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1)])],8,nv))],10,av)]),wl("div",lv,J(e.text||e.content),1),wl("div",sv,J(new Date(e.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])))],64);var n}),128))],64)):(ul(),xl("div",iv,[wl("div",ov,[wl("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:R({backgroundImage:`url(${xe(se.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),wl("div",rv,[wl("h3",cv,J(xe(se.value)?.handle||xe(se.value)?.name||"Unknown"),1),t[118]||(t[118]=wl("p",{class:"text-xs text-zinc-400"},"",-1))])]),wl("div",dv,[0===ue.value.length?(ul(),xl("div",uv,[...t[119]||(t[119]=[wl("svg",{class:"w-10 h-10 mx-auto mb-2 text-zinc-300",fill:"currentColor",viewBox:"0 0 24 24"},[wl("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1),wl("p",null,"",-1)])])):Sl("",!0),(ul(!0),xl(sl,null,sn([...ue.value].reverse(),(e,a)=>(ul(),xl("div",{key:e.id,class:"p-4 bg-gradient-to-r from-zinc-50 to-zinc-100/50 rounded-2xl relative"},[wl("button",{onClick:t=>pe(e.id),class:"absolute top-3 right-3 p-1.5 rounded-full transition-all text-zinc-400 hover:text-zinc-600"},[...t[120]||(t[120]=[wl("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[wl("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],8,pv),wl("div",vv,J(new Date(e.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1),wl("div",{class:"text-[14px] text-zinc-700 leading-relaxed pr-8",innerHTML:be(e.text||e.content)},null,8,fv)]))),128))])]))])):(ul(),xl("footer",xv,[A.value?(ul(),xl("div",bv,[wl("div",mv,[t[121]||(t[121]=wl("span",{class:"material-symbols-outlined text-zinc-400 text-lg"},"reply",-1)),wl("div",gv,[wl("span",hv,"Replying to "+J(B(A.value)),1),wl("span",yv,J(A.value.text||("image"===A.value.type?"[Image]":"[Content]")),1)])]),wl("button",{onClick:Oe,class:"p-1 rounded-full hover:bg-zinc-200 text-zinc-400 hover:text-black transition-colors"},[...t[122]||(t[122]=[wl("span",{class:"material-symbols-outlined text-base"},"close",-1)])])])):Sl("",!0),wl("div",wv,[wl("button",{onClick:di(Ae,["stop"]),class:F(["flex items-center justify-center size-10 rounded-full transition-all duration-200 hover:bg-zinc-50 text-zinc-400 hover:text-black",p.value?"bg-zinc-100 text-black":""])},[...t[123]||(t[123]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])],2),wl("div",kv,[aa(wl("textarea",{"onUpdate:modelValue":t[36]||(t[36]=e=>d.value=e),onKeydown:t[37]||(t[37]=pi(di(e=>Ut(!1),["exact","prevent"]),["enter"])),onFocus:Te,class:"w-full border-none bg-zinc-100/60 rounded-[26px] px-5 py-3 pr-12 text-[15px] placeholder-zinc-400 focus:ring-0 focus:bg-zinc-100 transition-colors resize-none h-[44px] leading-snug",placeholder:"Message..."},null,544),[[Qs,d.value]]),wl("button",{onClick:ve,class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center justify-center size-7 rounded-full transition-all duration-200 hover:bg-zinc-200/50 text-zinc-300 hover:text-zinc-500",title:""},[...t[124]||(t[124]=[wl("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[wl("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])])]),wl("button",{onClick:Vt},[...t[125]||(t[125]=[wl("svg",{class:"w-6 h-6 text-black relative right-0.5 bottom-0.5",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[wl("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})],-1)])])])]))]),(ul(),bl(ha,{to:"body"},[De.value&&Ue.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:di(Fe,["self"])},[wl("div",zv,[wl("div",Cv,[wl("div",null,[t[126]||(t[126]=wl("h3",{class:"font-bold text-lg text-black"},"Call Transcript",-1)),wl("p",_v,J(new Date(Ue.value.timestamp).toLocaleString("zh-CN",{hour:"2-digit",minute:"2-digit"}))+"  "+J(Ve(Ue.value.duration)),1)]),wl("button",{onClick:Fe,class:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center hover:bg-zinc-300 transition-colors"},[...t[127]||(t[127]=[wl("span",{class:"material-symbols-outlined text-black text-sm"},"close",-1)])])]),wl("div",Sv,[ht(Ue.value.callTranscript)?(ul(!0),xl(sl,{key:0},sn(ht(Ue.value.callTranscript),(e,t)=>(ul(),xl("div",{key:t},[e.isAction?(ul(),xl("div",Iv,[wl("span",jv,J(e.text.replace(/^\[\]\s*([^:]+[:])?/,"")),1)])):(ul(),xl("div",{key:1,class:F(["flex w-full flex-col",e.isMe?"items-end":"items-start"])},[e.isMe?Sl("",!0):(ul(),xl("div",Mv,J((()=>{if(e.senderId&&"ai"!==e.senderId){const t=Jt(e.senderId);if(t?.handle)return t.handle;if(t?.name)return t.name}const t=e.text.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];if(t){const e=kt(Oi).contacts.find(e=>e.name===t||e.handle===t);if(e?.handle)return e.handle}return t||"AI"})()),1)),wl("div",{class:F(["px-4 py-2.5 max-w-[85%] text-[14px] leading-snug shadow-sm border relative",e.isMe?"bg-black text-white rounded-[18px] rounded-br-sm border-transparent":"bg-zinc-100 text-zinc-800 rounded-[18px] rounded-bl-sm border-zinc-100"])},J(e.text.replace(/^\[\]\s*([^:]+[:])?/,"")),3)],2))]))),128)):(ul(!0),xl(sl,{key:1},sn((Ue.value.callTranscript||"").split("\n"),(e,t)=>(ul(),xl(sl,{key:t},[e.trim()?(ul(),xl("div",Ev,[e.startsWith("[]")?(ul(),xl("span",Av,J(e.replace(/^\[\]/,"").trim()),1)):e.startsWith("[]")?(ul(),xl("div",Tv,J(e.replace(/^\[\]/,"").trim()),1)):(ul(),xl("span",Ov,J(e),1))])):Sl("",!0)],64))),128))])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[Ge.value?(ul(),xl("div",{key:0,class:F(["fixed inset-0 z-[9999] flex flex-col animate-in fade-in duration-500",Ke.value?"bg-transparent pointer-events-none":"bg-black pointer-events-auto"])},[Ke.value?Sl("",!0):(ul(),xl("div",{key:0,class:F(["absolute inset-0 overflow-hidden pointer-events-none",(l.value,"bg-zinc-900")])},["group"===l.value?.type?(ul(),xl("div",{key:0,class:"absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-110",style:R({backgroundImage:`url(${It.value?.avatar||"https://via.placeholder.com/400"})`})},[...t[128]||(t[128]=[wl("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-3xl"},null,-1)])],4)):(ul(),xl("div",{key:1,class:"absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-105",style:R({backgroundImage:`url(${"incoming"===et.value?tt.value?.avatar||l.value?.avatar:l.value?.localSettings?.videoCallUseImage&&l.value?.localSettings?.videoCallCharImage||l.value?.avatar||o.value.avatar})`})},[...t[129]||(t[129]=[wl("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-3xl"},null,-1)])],4))],2)),"dialing"===et.value?(ul(),xl("div",$v,[wl("div",Lv,[t[130]||(t[130]=wl("div",{class:"absolute inset-0 border-4 border-zinc-200 rounded-full animate-[ping_2s_infinite] opacity-50"},null,-1)),wl("img",{src:o.value.avatar,class:"w-full h-full rounded-full object-cover relative z-10"},null,8,Nv)]),wl("h2",Pv,J(o.value.handle),1),t[132]||(t[132]=wl("p",{class:"text-zinc-400 text-xs uppercase tracking-[0.2em] animate-pulse"},"Calling...",-1)),wl("button",{onClick:t[38]||(t[38]=e=>ft(!1)),class:"mt-16 w-16 h-16 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg hover:scale-105 active:scale-95"},[...t[131]||(t[131]=[wl("span",{class:"material-symbols-outlined text-3xl"},"call_end",-1)])])])):"incoming"===et.value?(ul(),xl("div",Rv,[wl("div",Dv,[t[133]||(t[133]=wl("div",{class:"absolute inset-0 border-4 border-green-400 rounded-full animate-ping opacity-30"},null,-1)),wl("img",{src:tt.value?.avatar||l.value?.avatar,class:"w-full h-full rounded-full object-cover relative z-10"},null,8,Uv)]),wl("h2",Vv,J(tt.value?.handle||tt.value?.name||"Incoming Call"),1),t[136]||(t[136]=wl("p",{class:"text-zinc-500 text-sm uppercase tracking-[0.2em] animate-pulse"},"Inviting to Video Call...",-1)),wl("div",{class:"flex items-center gap-16 mt-20"},[wl("button",{onClick:pt,class:"flex flex-col items-center gap-3 group"},[...t[134]||(t[134]=[wl("div",{class:"w-20 h-20 rounded-full bg-red-500/90 flex items-center justify-center transition-all group-hover:bg-red-600 group-hover:scale-110 shadow-xl shadow-red-500/30"},[wl("span",{class:"material-symbols-outlined text-4xl text-white"},"call_end")],-1),wl("span",{class:"text-xs text-zinc-400 tracking-widest uppercase group-hover:text-zinc-600 transition-colors"},"Decline",-1)])]),wl("button",{onClick:ut,class:"flex flex-col items-center gap-3 group"},[...t[135]||(t[135]=[wl("div",{class:"w-20 h-20 rounded-full bg-green-500/90 flex items-center justify-center transition-all group-hover:bg-green-500 group-hover:scale-110 shadow-xl shadow-green-500/30 animate-pulse-fast"},[wl("span",{class:"material-symbols-outlined text-4xl text-white"},"videocam")],-1),wl("span",{class:"text-xs text-zinc-400 tracking-widest uppercase group-hover:text-zinc-600 transition-colors"},"Accept",-1)])])])])):"active"!==et.value||Ke.value?Ke.value?(ul(),xl("div",{key:4,onMousedown:Ye,onTouchstart:Ye,onClick:Ze,class:"fixed z-[9999] w-28 h-40 bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden border border-white/20 cursor-move transition-shadow hover:scale-105 active:scale-95 animate-in zoom-in duration-300 ring-2 ring-black/50 pointer-events-auto",style:R({left:We.value.x+"px",top:We.value.y+"px"})},[wl("img",{src:"group"===l.value?.type?It.value?.avatar:tt.value?.avatar||l.value?.avatar||o.value.avatar,class:"w-full h-full object-cover opacity-80"},null,8,xf),wl("div",bf,[t[147]||(t[147]=wl("div",{class:"flex justify-end"},[wl("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.8)]"})],-1)),wl("div",mf,[wl("span",gf,J(st.value),1)])])],36)):"ended"===et.value?(ul(),xl("div",hf,[t[150]||(t[150]=wl("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-xl"},null,-1)),wl("div",yf,[t[148]||(t[148]=wl("div",{class:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 backdrop-blur-md shadow-2xl ring-4 ring-white/5"},[wl("span",{class:"material-symbols-outlined text-white/70 text-5xl"},"call_end")],-1)),t[149]||(t[149]=wl("h2",{class:"text-white text-2xl font-bold tracking-wide mb-2"},"Call Ended",-1)),wl("p",wf,J(st.value),1),wl("button",{onClick:t[41]||(t[41]=e=>ft(!0)),class:"mt-12 px-8 py-3 bg-white text-black rounded-full font-bold text-sm uppercase tracking-widest hover:bg-zinc-100 transition-all hover:scale-105 active:scale-95 shadow-xl"}," Return ")])])):Sl("",!0):(ul(),xl("div",Bv,["group"===l.value?.type||l.value?.isGroup?(ul(),xl(sl,{key:0},[wl("div",Fv,[wl("button",{onClick:Je,class:"w-12 h-12 rounded-full flex items-center justify-center bg-black/20 text-white backdrop-blur-md hover:bg-black/30 transition-colors shrink-0 z-20 active:scale-95"},[...t[137]||(t[137]=[wl("span",{class:"material-symbols-outlined text-2xl"},"expand_more",-1)])]),wl("div",Gv,[wl("div",Kv,[t[138]||(t[138]=wl("div",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1)),wl("span",Wv,J(st.value),1)])]),t[139]||(t[139]=wl("div",{class:"w-12"},null,-1))]),wl("div",Hv,[wl("div",qv,[wl("img",{src:l.value?.localSettings?.videoCallUseImage&&l.value?.localSettings?.videoCallUserImage||It.value?.avatar||"https://via.placeholder.com/150",class:"w-full h-full object-cover"},null,8,Jv)]),(ul(!0),xl(sl,null,sn(l.value.members||[],e=>(ul(),xl("div",{key:e,class:"relative w-10 h-10 bg-zinc-800 rounded-lg overflow-hidden ring-1 ring-white/20 shadow-md shrink-0"},[wl("img",{src:kt(Oi).contacts.find(t=>t.id===e)?.avatar||"https://via.placeholder.com/150",class:"w-full h-full object-cover"},null,8,Yv)]))),128))])],64)):(ul(),xl("div",Xv,[wl("button",{onClick:Je,class:"w-12 h-12 rounded-full flex items-center justify-center transition-all bg-white/10 text-white hover:bg-white/20 active:scale-95 backdrop-blur-md"},[...t[140]||(t[140]=[wl("span",{class:"material-symbols-outlined text-2xl"},"expand_more",-1)])]),wl("div",Qv,[wl("h3",Zv,J(o.value.handle),1),wl("div",ef,[t[141]||(t[141]=wl("div",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1)),wl("span",tf,J(st.value),1)])]),wl("div",af,[wl("img",{src:l.value?.localSettings?.videoCallUseImage&&l.value?.localSettings?.videoCallUserImage||It.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover"},null,8,nf)])])),wl("div",lf,[wl("div",sf,[kl(Fs,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0"},{default:ta(()=>[(ul(!0),xl(sl,null,sn(at.value,e=>(ul(),xl("div",{key:e.id,class:"flex flex-col gap-1 mb-2"},[e.isAction?(ul(),xl("div",of,[wl("span",rf,J(e.text.replace(/^\[\]\s*([^:]+[:])?/,"")),1)])):(ul(),xl("div",{key:1,class:F(["flex flex-col max-w-[85%] text-[15px] leading-snug",e.isMe?"self-end items-end":"self-start items-start"])},[e.isMe||"group"!==l.value?.type&&!l.value?.isGroup?Sl("",!0):(ul(),xl("div",{key:0,class:F(["text-[10px] mb-1 ml-3 font-bold","group"===l.value?.type||l.value?.isGroup?"text-white/80":"text-white/60 drop-shadow-md"])},J((()=>{if(e.senderId&&"ai"!==e.senderId){const t=Jt(e.senderId);if(t?.handle)return t.handle;if(t?.name)return t.name}const t=e.text.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];return t||o.value.handle})()),3)),wl("div",{class:F(["px-4 py-2.5 shadow-sm border relative backdrop-blur-md cursor-pointer",e.isMe?"bg-white/10 text-white rounded-[18px] rounded-br-sm border-white/10":"bg-black/40 text-white rounded-[18px] rounded-bl-sm border-white/5"]),onContextmenu:di(t=>(e=>{rt.value=e,ot.value=!0})(e),["prevent"])},J(e.text.replace(/^\[\]\s*([^:]+[:])?/,"")),43,cf)],2))]))),128))]),_:1})])]),wl("div",df,[wl("div",uf,[wl("div",pf,[aa(wl("input",{"onUpdate:modelValue":t[39]||(t[39]=e=>nt.value=e),onKeydown:pi(di(bt,["prevent"]),["enter"]),type:"text",placeholder:"Type designed to speak...",class:"relative w-full rounded-full h-12 px-6 focus:outline-none transition-all text-sm bg-black/40 border border-white/20 text-white placeholder:text-white/30 focus:border-white/50 backdrop-blur-md"},null,40,vf),[[Qs,nt.value]])]),wl("button",{onClick:mt,class:"w-12 h-12 rounded-full flex items-center justify-center hover:scale-105 active:scale-95 transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-md"},[...t[142]||(t[142]=[wl("span",{class:"material-symbols-outlined"},"refresh",-1)])]),wl("button",{onClick:bt,class:"w-12 h-12 rounded-full flex items-center justify-center hover:scale-105 active:scale-95 transition-all bg-white text-black shadow-[0_0_20px_rgba(255,255,255,0.3)]"},[...t[143]||(t[143]=[wl("span",{class:"material-symbols-outlined"},"arrow_upward",-1)])])]),wl("div",ff,[t[145]||(t[145]=wl("button",{class:"flex flex-col items-center gap-1 group"},[wl("div",{class:"w-14 h-14 rounded-full flex items-center justify-center transition-all bg-white/10 backdrop-blur-md group-hover:bg-white/20"},[wl("span",{class:"material-symbols-outlined text-2xl text-white"},"mic")]),wl("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"Mute")],-1)),wl("button",{onClick:t[40]||(t[40]=e=>ft(!1)),class:"flex flex-col items-center gap-1 group"},[...t[144]||(t[144]=[wl("div",{class:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center group-hover:bg-red-600 group-hover:scale-105 transition-all shadow-xl shadow-red-500/20"},[wl("span",{class:"material-symbols-outlined text-white text-3xl"},"call_end")],-1),wl("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"End",-1)])]),t[146]||(t[146]=wl("button",{class:"flex flex-col items-center gap-1 group"},[wl("div",{class:"w-14 h-14 rounded-full flex items-center justify-center transition-all bg-white/10 backdrop-blur-md group-hover:bg-white/20"},[wl("span",{class:"material-symbols-outlined text-2xl text-white"},"videocam")]),wl("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"Cam")],-1))])])]))],2)):Sl("",!0),ot.value?(ul(),xl("div",kf,[wl("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[42]||(t[42]=e=>ot.value=!1)}),wl("div",zf,[wl("div",Cf,[wl("p",_f,J(rt.value?.text),1)]),wl("button",{onClick:dt,class:"w-full py-4 bg-transparent hover:bg-white/5 flex items-center justify-center gap-2 border-b border-white/5 transition-colors"},[...t[151]||(t[151]=[wl("span",{class:"material-symbols-outlined text-white/80"},"edit",-1),wl("span",{class:"text-sm font-bold text-white uppercase tracking-widest"},"Edit",-1)])]),wl("button",{onClick:ct,class:"w-full py-4 bg-transparent hover:bg-red-500/10 flex items-center justify-center gap-2 transition-colors"},[...t[152]||(t[152]=[wl("span",{class:"material-symbols-outlined text-red-400"},"delete",-1),wl("span",{class:"text-sm font-bold text-red-400 uppercase tracking-widest"},"Delete",-1)])]),wl("div",Sf,[wl("button",{onClick:t[43]||(t[43]=e=>ot.value=!1),class:"w-full py-3 text-xs text-white/30 uppercase tracking-widest"},"Cancel")])])])):Sl("",!0)]))],64);var n}}},jf=_o(If,[["__scopeId","data-v-aab90ae4"]]),Mf={class:"h-full flex flex-col bg-white text-black font-sans"},Ef={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl"},Af={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Tf={class:"flex-1"},Of={class:"flex items-center gap-2"},$f={class:"flex-1 overflow-y-auto w-full pb-[calc(2rem+env(safe-area-inset-bottom))]"},Lf={class:"px-5 pt-2 pb-6"},Nf={class:"flex justify-between items-start"},Pf={class:"flex-1 pr-4 min-w-0"},Rf={class:"text-[24px] font-bold leading-tight truncate"},Df={class:"mt-4 text-[14px] leading-relaxed whitespace-pre-wrap"},Uf={class:"mt-3 text-[14px] text-zinc-400 font-normal"},Vf={class:"shrink-0"},Bf={key:0,class:"flex items-center justify-center h-full w-full material-symbols-outlined text-zinc-300 text-[32px]"},Ff={class:"flex gap-2 mt-6"},Gf={class:"flex border-b border-zinc-100 sticky top-0 bg-white z-10"},Kf={key:0,class:"space-y-0"},Wf={class:"relative px-5 py-6 border-b border-gray-50"},Hf={class:"flex items-start gap-4 mb-3 relative z-10"},qf={class:"flex flex-col flex-1 min-w-0"},Jf={class:"flex items-center justify-between"},Yf={class:"text-[14px] font-bold text-black truncate"},Xf={class:"relative px-5 py-6 border-b border-gray-50"},Qf={class:"flex items-start gap-4 mb-3 relative z-10"},Zf={class:"flex flex-col flex-1 min-w-0"},ex={class:"flex items-center justify-between"},tx={class:"text-[14px] font-bold text-black truncate"},ax={key:1,class:"p-12 text-center text-zinc-400 text-sm font-light"},nx={key:0,class:"fixed top-0 right-0 h-full w-[300px] z-[100] bg-white shadow-2xl flex flex-col border-l border-gray-50"},lx={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 border-b border-gray-100"},sx={class:"flex-1 overflow-y-auto"},ix={__name:"Profile",props:{contactId:{type:String,default:null}},emits:["back","navigate"],setup(e,{emit:t}){const a=e,n=t,l=yt(!1),s=yt("threads"),i=Kl(()=>{if(a.contactId&&a.contactId!==Oi.activePersonaId){const e=Oi.contacts.find(e=>e.id===a.contactId);if(e)return e;const t=Oi.personas.find(e=>e.id===a.contactId);if(t)return t}return Ui.value}),o=Kl(()=>!(a.contactId&&a.contactId!==Oi.activePersonaId&&!Oi.personas.find(e=>e.id===a.contactId))),r=e=>{l.value=!1,n("navigate",e)},c=Kl(()=>i.value.stats?.followers||"100");return(t,a)=>(ul(),xl("div",Mf,[wl("header",Ef,[wl("div",Af,[wl("div",Tf,[wl("button",{onClick:a[0]||(a[0]=e=>t.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...a[14]||(a[14]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),wl("div",Of,[a[17]||(a[17]=_l('<button class="header-btn" data-v-3e48d63d><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3e48d63d><rect x="2" y="2" width="20" height="20" rx="5" ry="5" data-v-3e48d63d></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" data-v-3e48d63d></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5" data-v-3e48d63d></line></svg></button>',1)),o.value?Sl("",!0):(ul(),xl("button",{key:0,onClick:a[1]||(a[1]=a=>t.$emit("navigate","char-memory",{id:e.contactId||i.value.id})),class:"header-btn"},[...a[15]||(a[15]=[wl("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[wl("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),wl("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)])])),wl("button",{onClick:a[2]||(a[2]=e=>l.value=!0),class:"header-btn"},[...a[16]||(a[16]=[wl("span",{class:"material-symbols-outlined text-[26px]"},"more_horiz",-1)])])])])]),wl("main",$f,[wl("section",Lf,[wl("div",Nf,[wl("div",Pf,[wl("h1",Rf,J(i.value.handle),1),wl("div",Df,J(i.value.bio||""),1),wl("div",Uf,J(c.value)+" ",1)]),wl("div",Vf,[wl("div",{class:"size-[80px] rounded-full overflow-hidden border border-gray-100 bg-zinc-50 editorial-image",style:R({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[i.value.avatar?Sl("",!0):(ul(),xl("span",Bf,"person"))],4)])]),wl("div",Ff,[o.value?(ul(),xl(sl,{key:1},[a[20]||(a[20]=wl("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1)),a[21]||(a[21]=wl("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64)):(ul(),xl(sl,{key:0},[a[18]||(a[18]=wl("button",{class:"flex-1 py-1.5 bg-black text-white text-[14px] font-bold rounded-[8px] border border-black transition-opacity hover:opacity-90"},"  ",-1)),a[19]||(a[19]=wl("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64))])]),wl("nav",Gf,[wl("button",{onClick:a[3]||(a[3]=e=>s.value="threads"),class:F(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative","threads"===s.value?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),wl("button",{onClick:a[4]||(a[4]=e=>s.value="replies"),class:F(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative","replies"===s.value?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),wl("button",{onClick:a[5]||(a[5]=e=>s.value="media"),class:F(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative","media"===s.value?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),wl("button",{onClick:a[6]||(a[6]=e=>s.value="reposts"),class:F(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative","reposts"===s.value?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2)]),"threads"===s.value?(ul(),xl("div",Kf,[wl("article",Wf,[a[24]||(a[24]=wl("div",{class:"absolute left-[36px] top-[60px] bottom-[-10px] w-[1px] bg-zinc-100"},null,-1)),wl("div",Hf,[wl("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:R({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover"})},null,4),wl("div",qf,[wl("div",Jf,[wl("span",Yf,J(i.value.handle),1),a[22]||(a[22]=wl("div",{class:"flex items-center gap-3"},[wl("span",{class:"text-[13px] text-zinc-400 font-light"},"4h"),wl("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),a[23]||(a[23]=wl("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Just deployed the new changes. Feeling nervous but excited. code-life ",-1))])]),a[25]||(a[25]=_l('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-3e48d63d><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>42</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>5</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><polyline points="17 1 21 5 17 9" data-v-3e48d63d></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-3e48d63d></path><polyline points="7 23 3 19 7 15" data-v-3e48d63d></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>2</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-3e48d63d></path></svg></button></div>',1))]),wl("article",Xf,[wl("div",Qf,[wl("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:R({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover"})},null,4),wl("div",Zf,[wl("div",ex,[wl("span",tx,J(i.value.handle),1),a[26]||(a[26]=wl("div",{class:"flex items-center gap-3"},[wl("span",{class:"text-[13px] text-zinc-400 font-light"},"1d"),wl("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),a[27]||(a[27]=wl("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Weather is getting colder. Time for coffee and hoodies. ",-1))])]),a[28]||(a[28]=_l('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-3e48d63d><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>108</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>14</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><polyline points="17 1 21 5 17 9" data-v-3e48d63d></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-3e48d63d></path><polyline points="7 23 3 19 7 15" data-v-3e48d63d></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>8</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-3e48d63d></path></svg></button></div>',1))])])):(ul(),xl("div",ax," Nothing here yet... "))]),l.value?(ul(),xl("div",{key:0,onClick:a[7]||(a[7]=e=>l.value=!1),class:"fixed inset-0 z-[99]"})):Sl("",!0),kl(ls,{name:"slide"},{default:ta(()=>[l.value?(ul(),xl("div",nx,[wl("div",lx,[a[30]||(a[30]=wl("span",{class:"text-[13px] font-bold tracking-[0.2em] text-zinc-400 uppercase"},"Menu",-1)),wl("button",{onClick:a[8]||(a[8]=e=>l.value=!1),class:"p-2 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...a[29]||(a[29]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"close",-1)])])]),wl("div",sx,[o.value?(ul(),xl(sl,{key:0},[wl("div",{onClick:a[9]||(a[9]=e=>r("persona-archive")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...a[31]||(a[31]=[wl("div",{class:"flex items-center gap-6"},[wl("span",{class:"material-symbols-outlined text-[26px] font-light"},"tune"),wl("div",{class:"flex flex-col"},[wl("span",{class:"text-[17px] font-medium tracking-tight"},"Persona Archive"),wl("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),wl("div",{onClick:a[10]||(a[10]=e=>r("sticker-library")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...a[32]||(a[32]=[wl("div",{class:"flex items-center gap-6"},[wl("span",{class:"material-symbols-outlined text-[26px] font-light"},"sentiment_satisfied"),wl("div",{class:"flex flex-col"},[wl("span",{class:"text-[17px] font-medium tracking-tight"},"Stickers"),wl("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),wl("div",{onClick:a[11]||(a[11]=e=>r("wallet")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...a[33]||(a[33]=[wl("div",{class:"flex items-center gap-6"},[wl("span",{class:"material-symbols-outlined text-[26px] font-light"},"credit_card"),wl("div",{class:"flex flex-col"},[wl("span",{class:"text-[17px] font-medium tracking-tight"},"Wallet"),wl("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])],64)):Sl("",!0),wl("div",{onClick:a[12]||(a[12]=e=>r("relationship-network")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...a[34]||(a[34]=[wl("div",{class:"flex items-center gap-6"},[wl("span",{class:"material-symbols-outlined text-[26px] font-light"},"hub"),wl("div",{class:"flex flex-col"},[wl("span",{class:"text-[17px] font-medium tracking-tight"},"Network"),wl("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),wl("div",{onClick:a[13]||(a[13]=e=>r("regex-manager")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...a[35]||(a[35]=[wl("div",{class:"flex items-center gap-6"},[wl("span",{class:"material-symbols-outlined text-[26px] font-light"},"style"),wl("div",{class:"flex flex-col"},[wl("span",{class:"text-[17px] font-medium tracking-tight"},"Regex Cards"),wl("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])])])):Sl("",!0)]),_:1})]))}},ox=_o(ix,[["__scopeId","data-v-3e48d63d"]]),rx={class:"fixed inset-x-0 bottom-0 h-[92%] z-[100] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},cx={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},dx={class:"flex-1 overflow-y-auto px-4 pt-4 pb-32 w-full"},ux={class:"flex gap-4"},px={class:"flex flex-col items-center"},vx={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},fx={class:"flex-1 flex flex-col gap-1 min-h-[120px]"},xx={class:"font-bold text-[15px] pt-1 leading-none"},bx={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-50 pb-safe z-20 px-6 py-4 flex items-center justify-between"},mx=["disabled"],gx={__name:"Compose",emits:["close"],setup(e,{emit:t}){const a=t,n=yt(""),l=Kl(()=>Oi.activePersonaId?Oi.personas.find(e=>e.id===Oi.activePersonaId):Oi.personas[0]||{}),s=()=>{a("close")};return(e,t)=>(ul(),xl("div",rx,[wl("header",cx,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"text-[16px] text-black hover:opacity-70 transition-opacity"}," Cancel "),t[2]||(t[2]=wl("h2",{class:"text-[16px] font-bold tracking-tight"}," New thread ",-1)),t[3]||(t[3]=wl("button",{class:"w-[50px] flex justify-end"},[wl("span",{class:"material-symbols-outlined text-black"},"more_horiz")],-1))]),wl("main",dx,[wl("div",ux,[wl("div",px,[wl("div",{class:"size-10 shrink-0 rounded-full bg-zinc-200 overflow-hidden border border-gray-100",style:R({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[l.value.avatar?Sl("",!0):(ul(),xl("div",vx))],4),t[4]||(t[4]=wl("div",{class:"w-0.5 flex-1 bg-gray-200 my-2 rounded-full min-h-[40px]"},null,-1)),wl("div",{class:"size-5 shrink-0 rounded-full bg-zinc-200 overflow-hidden opacity-50",style:R({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4)]),wl("div",fx,[wl("div",xx,J(l.value.handle||"user"),1),aa(wl("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),autofocus:"",class:"w-full border-0 p-0 focus:ring-0 text-[15px] leading-relaxed resize-none bg-transparent placeholder:text-neutral-400 mt-1 min-h-[60px]",placeholder:"What's new?"},null,512),[[Qs,n.value]]),t[5]||(t[5]=_l('<div class="flex items-center gap-5 mt-2" data-v-2e69b1af><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>imagesmode</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>gif_box</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>mic</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>tag</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>poll</span></button></div>',1))])]),t[6]||(t[6]=wl("div",{class:"flex gap-4 mt-4"},[wl("div",{class:"w-10 flex justify-center opacity-0"}),wl("div",{class:"flex-1"},[wl("button",{class:"text-[14px] text-neutral-400 hover:text-black transition-colors"},"Add to thread")])],-1))]),wl("div",bx,[t[7]||(t[7]=wl("button",{class:"text-[14px] text-neutral-400 font-medium hover:text-black transition-colors"}," Anyone can reply ",-1)),wl("button",{onClick:s,disabled:!n.value.trim(),class:"bg-black text-white px-5 py-2 rounded-full text-[15px] font-bold tracking-wide hover:opacity-80 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed"}," Post ",8,mx)])]))}},hx=_o(gx,[["__scopeId","data-v-2e69b1af"]]),yx={class:"h-full flex flex-col bg-background-light text-black"},wx={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-zinc-100"},kx={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},zx={__name:"PostDetail",props:["postId"],emits:["back"],setup:(e,{emit:t})=>(e,t)=>(ul(),xl("div",yx,[wl("header",wx,[wl("div",kx,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...t[1]||(t[1]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[2]||(t[2]=wl("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir",-1)),t[3]||(t[3]=wl("div",{class:"w-10"},null,-1))])]),t[4]||(t[4]=_l('<main class="flex-1 overflow-y-auto pb-32 w-full" data-v-eae84c1c><article class="pt-6" data-v-eae84c1c><div class="px-6 mb-6" data-v-eae84c1c><div class="flex items-center gap-3" data-v-eae84c1c><div class="size-10 rounded-full bg-black flex items-center justify-center overflow-hidden border border-zinc-200" data-v-eae84c1c><div class="w-full h-[0.5px] bg-white/30 rotate-45" data-v-eae84c1c></div><div class="absolute w-full h-[0.5px] bg-white/30 -rotate-45" data-v-eae84c1c></div></div><div class="flex flex-col" data-v-eae84c1c><span class="text-sm font-semibold tracking-tight" data-v-eae84c1c>studio_noir</span><span class="text-[9px] text-zinc-400 uppercase tracking-widest" data-v-eae84c1c>Paris, FR</span></div></div></div><div class="px-6 mb-6" data-v-eae84c1c><p class="text-[17px] leading-relaxed font-light text-zinc-900" data-v-eae84c1c> The silence of structure. Exploring the intersection of Brutalist architecture and morning light. Every angle is a dialogue with the sky. </p></div><div class="mx-6 aspect-[4/5] bg-zinc-100 overflow-hidden mb-6" data-v-eae84c1c><img alt="Editorial Architecture" class="w-full h-full object-cover editorial-image" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E" data-v-eae84c1c></div><div class="px-6 pb-8" data-v-eae84c1c><div class="flex items-center gap-7 pb-8 border-b border-zinc-50" data-v-eae84c1c><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>1,240</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48L4.32 21l4.287-1.022c1.026.177 2.104.272 3.393.272z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>48</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>12</span></button><button class="flex items-center group ml-auto" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg></button></div></div></article><section class="px-6 space-y-8" data-v-eae84c1c><h3 class="text-[10px] uppercase tracking-[0.25em] text-zinc-400 font-semibold mb-8" data-v-eae84c1c>Responses</h3><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-zinc-50 flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="size-3 border border-black/20 rounded-sm rotate-45" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>elena_di_rossi</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>2h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The high contrast captures the starkness perfectly. Exceptional work.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-black flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="w-4 h-[1px] bg-white/20" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>arc_digest</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>4h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The brutalist aesthetic is making a serious comeback this season.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-white flex items-center justify-center border border-zinc-200" data-v-eae84c1c><div class="size-2 bg-black rounded-full" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>minimal_vibe</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>5h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>Pure sophistication.</p></div></div></section></main><footer class="fixed bottom-0 left-0 right-0 bottom-input-bar border-t border-zinc-100 safe-area-bottom bg-white/90 backdrop-blur-md" data-v-eae84c1c><div class="flex items-center gap-4 px-6 pt-4 pb-[calc(1rem+env(safe-area-inset-bottom))] w-full" data-v-eae84c1c><div class="size-8 shrink-0 rounded-full bg-zinc-50 border border-zinc-200 flex items-center justify-center overflow-hidden" data-v-eae84c1c><div class="w-3 h-3 border-t border-l border-zinc-400 rotate-45 translate-y-0.5" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><input class="w-full bg-transparent border-none focus:ring-0 text-[14px] py-2 placeholder:text-zinc-400 font-light tracking-tight" placeholder="Write a comment..." type="text" data-v-eae84c1c></div><button class="text-[11px] font-bold tracking-[0.15em] uppercase hover:opacity-40 transition-opacity" data-v-eae84c1c> Post </button></div></footer>',2))]))},Cx=_o(zx,[["__scopeId","data-v-eae84c1c"]]),_x={class:"h-full flex flex-col bg-white text-black font-sans"},Sx={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Ix={class:"flex-1 overflow-y-auto px-6 py-4 w-full"},jx={class:"grid gap-4"},Mx=["onClick"],Ex={key:0,class:"absolute top-4 right-4 text-black"},Ax={class:"flex-1 min-w-0 pr-6"},Tx={class:"text-[16px] font-bold tracking-tight truncate"},Ox={class:"text-[12px] text-zinc-500 font-light truncate mt-0.5"},$x=["onClick"],Lx={__name:"PersonaArchive",emits:["back","add","edit","select"],setup(e,{emit:t}){const a=t;return(e,t)=>(ul(),xl("div",_x,[wl("header",Sx,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[3]||(t[3]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[5]||(t[5]=wl("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Persona Archive",-1)),wl("button",{onClick:t[1]||(t[1]=t=>e.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[4]||(t[4]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])]),wl("main",Ix,[wl("div",jx,[(ul(!0),xl(sl,null,sn(kt(Oi).personas,e=>(ul(),xl("div",{key:e.id,class:F(["group relative flex items-center gap-5 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer hover:shadow-sm hover:translate-y-[-1px]",{"bg-zinc-50 border-black/5":kt(Oi).activePersonaId===e.id,"bg-white":kt(Oi).activePersonaId!==e.id}]),onClick:t=>{return n=e.id,Vi(n),void a("select");var n}},[kt(Oi).activePersonaId===e.id?(ul(),xl("div",Ex,[...t[6]||(t[6]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"check_circle",-1)])])):Sl("",!0),wl("div",{class:"size-16 shrink-0 rounded-full overflow-hidden border border-gray-100 editorial-image",style:R({backgroundImage:`url(${e.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),wl("div",Ax,[wl("h3",Tx,J(e.handle),1),wl("p",Ox,J(e.name||e.handle),1)]),wl("div",{onClick:t[2]||(t[2]=di(()=>{},["stop"])),class:"relative z-20"},[wl("button",{onClick:t=>{return n=e.id,t.stopPropagation(),void a("edit",n);var n},class:"p-3 text-zinc-400 hover:text-black hover:bg-gray-100/50 rounded-full transition-all"},[...t[7]||(t[7]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"edit",-1)])],8,$x)])],10,Mx))),128))])])]))}},Nx=_o(Lx,[["__scopeId","data-v-09dd5376"]]),Px={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},Rx={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Dx={class:"flex items-center gap-3"},Ux={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},Vx={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},Bx={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},Fx={class:"bg-zinc-50 rounded-2xl p-5"},Gx={class:"bg-zinc-50 rounded-2xl p-5"},Kx={class:"bg-zinc-50 rounded-2xl p-5"},Wx={class:"bg-zinc-50 rounded-2xl p-5"},Hx={class:"bg-zinc-50 rounded-2xl p-5"},qx={key:0,class:"pt-4"},Jx={__name:"PersonaEdit",props:["personaId"],emits:["back","save"],setup(e,{emit:t}){const a=e,n=t,l=yt({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),s=yt(!1);Ja(()=>{if(a.personaId){const e=Oi.personas.find(e=>e.id===a.personaId);e&&(s.value=!0,l.value={...e})}else l.value.id="p_"+Date.now(),l.value.avatar="https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0"});const i=async()=>{const e={...l.value,stats:l.value.stats||{followers:"0",following:"0"}};s.value?await(async e=>{const t=Oi.personas.findIndex(t=>t.id===e.id);-1!==t&&(Oi.personas[t]=e,await ki(ji.PERSONAS,JSON.parse(JSON.stringify(e))))})(e):await(async e=>{Oi.personas.push(e),await ki(ji.PERSONAS,JSON.parse(JSON.stringify(e)))})(e),n("save")},o=()=>{const e=prompt("Enter image URL for avatar:",l.value.avatar);e&&(l.value.avatar=e)},r=async()=>{l.value.id&&confirm("Delete this persona? This cannot be undone.")&&(await(async e=>{const t=Oi.personas.findIndex(t=>t.id===e);if(-1!==t&&(Oi.personas.splice(t,1),await zi(ji.PERSONAS,e),Oi.activePersonaId===e)){const e=Oi.personas[0];e&&Vi(e.id)}})(l.value.id),n("save"))};return(e,t)=>(ul(),xl("div",Px,[wl("header",Rx,[wl("div",Dx,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[6]||(t[6]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),wl("span",Ux,J(s.value?"":""),1)]),wl("button",{onClick:i,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),wl("main",Vx,[wl("div",Bx,[wl("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200",style:R({backgroundImage:`url(${l.value.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),wl("button",{onClick:o,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),wl("div",Fx,[t[7]||(t[7]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),aa(wl("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.handle=e),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"your_handle"},null,512),[[Qs,l.value.handle]])]),wl("div",Gx,[t[8]||(t[8]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.name=e),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Official Name"},null,512),[[Qs,l.value.name]]),t[9]||(t[9]=wl("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),wl("div",Kx,[t[10]||(t[10]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.persona=e),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Describe the inner persona..."},null,512),[[Qs,l.value.persona]]),t[11]||(t[11]=wl("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),wl("div",Wx,[t[12]||(t[12]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.bio=e),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Write a brief description..."},null,512),[[Qs,l.value.bio]])]),wl("div",Hx,[t[13]||(t[13]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.link=e),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[Qs,l.value.link]])]),s.value?(ul(),xl("div",qx,[wl("button",{onClick:r,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):Sl("",!0)])]))}},Yx=_o(Jx,[["__scopeId","data-v-e15adcb5"]]),Xx={class:"h-full flex flex-col bg-white text-black font-sans"},Qx={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Zx={class:"flex-1 overflow-y-auto w-full"},eb={class:"px-6 py-4"},tb={class:"relative"},ab={class:"px-6 pb-20"},nb=["onClick"],lb={key:0,class:"material-symbols-outlined text-zinc-300 text-[24px]"},sb={class:"flex flex-col min-w-0"},ib={class:"text-[14px] font-bold tracking-tight truncate"},ob={class:"text-[11px] text-zinc-500 font-light truncate mt-0.5"},rb={class:"flex items-center gap-2 ml-4"},cb=["onClick"],db={__name:"Following",emits:["back","add","edit","navigate"],setup(e,{emit:t}){const a=t,n=yt(""),l=Kl(()=>{if(!n.value)return Oi.contacts;const e=n.value.toLowerCase();return Oi.contacts.filter(t=>t.handle.toLowerCase().includes(e)||t.name&&t.name.toLowerCase().includes(e)||t.bio&&t.bio.toLowerCase().includes(e))});return(e,t)=>(ul(),xl("div",Xx,[wl("header",Qx,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[3]||(t[3]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[5]||(t[5]=wl("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Following",-1)),wl("button",{onClick:t[1]||(t[1]=t=>e.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...t[4]||(t[4]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"person_add",-1)])])]),wl("main",Zx,[wl("div",eb,[wl("div",tb,[t[6]||(t[6]=wl("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-zinc-400 text-[20px]"},"search",-1)),aa(wl("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),type:"text",class:"w-full bg-zinc-50 border border-gray-100 rounded-lg py-2.5 pl-10 pr-4 text-sm font-light placeholder-zinc-400 focus:outline-none focus:border-black/10 transition-colors",placeholder:"Search connections..."},null,512),[[Qs,n.value]])])]),wl("div",ab,[(ul(!0),xl(sl,null,sn(l.value,n=>(ul(),xl("div",{key:n.id,class:"flex items-center justify-between py-5 border-b border-gray-50 group hover:bg-zinc-50/50 -mx-6 px-6 transition-colors"},[wl("div",{onClick:t=>e.$emit("navigate","profile",{id:n.id}),class:"flex items-center gap-4 min-w-0 flex-1 cursor-pointer"},[wl("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100 bg-zinc-100 flex items-center justify-center editorial-image",style:R({backgroundImage:n.avatar?`url(${n.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[n.avatar?Sl("",!0):(ul(),xl("span",lb,"person"))],4),wl("div",sb,[wl("h3",ib,J(n.handle),1),wl("p",ob,J(n.bio||n.name||"No bio"),1)])],8,nb),wl("div",rb,[wl("button",{onClick:e=>{return t=n.id,void a("edit",t);var t},class:"px-4 py-1.5 border border-zinc-200 text-black rounded-full text-[11px] font-medium hover:bg-zinc-50 transition-colors"}," Edit ",8,cb),t[7]||(t[7]=wl("div",{class:"px-5 py-1.5 bg-black text-white rounded-full text-[11px] font-medium tracking-wide"}," Following ",-1))])]))),128))])])]))}},ub=_o(db,[["__scopeId","data-v-c8641243"]]),pb={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},vb={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},fb={class:"flex items-center gap-3"},xb={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},bb={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},mb={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},gb={key:0,class:"material-symbols-outlined text-zinc-400 text-[40px]"},hb={class:"bg-zinc-50 rounded-2xl p-5"},yb={class:"bg-zinc-50 rounded-2xl p-5"},wb={class:"bg-zinc-50 rounded-2xl p-5"},kb={class:"bg-zinc-50 rounded-2xl p-5"},zb={class:"bg-zinc-50 rounded-2xl p-5"},Cb={key:0,class:"pt-4"},_b={__name:"ContactEdit",props:["contactId"],emits:["back","save"],setup(e,{emit:t}){const a=e,n=t,l=yt({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),s=yt(!1);Ja(()=>{if(a.contactId){const e=Oi.contacts.find(e=>e.id===a.contactId);e&&(s.value=!0,l.value={...e})}else l.value.id="c_"+Date.now(),l.value.avatar=""});const i=()=>{const e={...l.value};s.value?(async e=>{const t=Oi.contacts.findIndex(t=>t.id===e.id);-1!==t&&(Oi.contacts[t]=e,await ki(ji.CONTACTS,e))})(e):(async e=>{Oi.contacts.push(e),await ki(ji.CONTACTS,e)})(e),n("save")},o=()=>{const e=prompt("Enter image URL for avatar:",l.value.avatar);e&&(l.value.avatar=e)},r=async()=>{l.value.id&&confirm("Remove this contact?")&&(await(async e=>{const t=Oi.contacts.findIndex(t=>t.id===e);-1!==t&&(Oi.contacts.splice(t,1),await zi(ji.CONTACTS,e))})(l.value.id),n("save"))};return(e,t)=>(ul(),xl("div",pb,[wl("header",vb,[wl("div",fb,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[6]||(t[6]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),wl("span",xb,J(s.value?"":""),1)]),wl("button",{onClick:i,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),wl("main",bb,[wl("div",mb,[wl("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200 flex items-center justify-center",style:R({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[l.value.avatar?Sl("",!0):(ul(),xl("span",gb,"person"))],4),wl("button",{onClick:o,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),wl("div",hb,[t[7]||(t[7]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),aa(wl("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.handle=e),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"handle"},null,512),[[Qs,l.value.handle]])]),wl("div",yb,[t[8]||(t[8]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.name=e),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Real Name"},null,512),[[Qs,l.value.name]]),t[9]||(t[9]=wl("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),wl("div",wb,[t[10]||(t[10]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.persona=e),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Internal notes about this contact..."},null,512),[[Qs,l.value.persona]]),t[11]||(t[11]=wl("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),wl("div",kb,[t[12]||(t[12]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.bio=e),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Public bio..."},null,512),[[Qs,l.value.bio]])]),wl("div",zb,[t[13]||(t[13]=wl("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),aa(wl("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.link=e),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[Qs,l.value.link]])]),s.value?(ul(),xl("div",Cb,[wl("button",{onClick:r,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):Sl("",!0)])]))}},Sb=_o(_b,[["__scopeId","data-v-3b23ee71"]]),Ib={class:"h-full flex flex-col bg-white text-black font-sans relative"},jb={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl border-b border-zinc-100"},Mb={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Eb={class:"flex-1"},Ab={class:"flex-1 text-center flex flex-col items-center"},Tb={key:0,class:"text-[10px] text-zinc-400 bg-zinc-50 px-2 py-0.5 rounded-full mt-0.5 max-w-[120px] truncate"},Ob={class:"flex-1 flex justify-end"},$b={class:"flex-1 overflow-y-auto w-full"},Lb={key:0,class:"p-12 text-center text-zinc-400"},Nb={key:1,class:"pb-12"},Pb={class:"p-5 border-b-8 border-zinc-50"},Rb={class:"flex items-center justify-between mb-3"},Db={key:0,class:"bg-zinc-50 p-4 rounded-xl border border-zinc-100"},Ub={key:0,class:"text-[15px] leading-relaxed text-black/80 font-serif italic"},Vb={key:1,class:"text-zinc-400 text-sm italic"},Bb={key:2,class:"mt-2 text-right text-[11px] text-zinc-400"},Fb={class:"p-5"},Gb={class:"flex items-center justify-between mb-4"},Kb={class:"relative"},Wb={class:"space-y-3"},Hb=["onClick"],qb={class:"flex flex-col gap-1.5"},Jb={class:"flex items-center gap-2 text-[11px] font-bold text-zinc-400 uppercase tracking-wider"},Yb={class:"pr-6"},Xb={class:"text-[14px] text-black font-medium"},Qb={class:"text-[14px] text-zinc-600"},Zb={key:0,class:"mt-1 flex items-start"},em={class:"bg-zinc-100 text-zinc-500 text-[11px] px-2 py-0.5 rounded text-left"},tm={key:0,class:"absolute inset-0 z-[100] flex justify-end"},am={class:"relative w-[280px] h-full bg-white shadow-2xl flex flex-col animate-slide-in"},nm={class:"p-5 border-b border-zinc-100 flex items-center justify-between"},lm={class:"flex-1 overflow-y-auto p-2"},sm=["onClick"],im={class:"size-10 rounded-full bg-zinc-200 flex items-center justify-center text-zinc-500 shrink-0"},om={class:"material-symbols-outlined"},rm={class:"flex flex-col overflow-hidden"},cm={class:"text-sm font-bold truncate"},dm={class:"text-xs text-zinc-400 uppercase"},um={key:0,class:"text-center p-8 text-zinc-400 text-sm"},pm={__name:"CharMemory",props:{contactId:{type:String,required:!0}},emits:["back"],setup(e,{emit:t}){const a=e,n=yt(!0),l=yt(null),s=yt([]),i=yt(""),o=yt(!1),r=yt(""),c=yt(!1),d=yt(null),u=Kl(()=>{const e=Oi.conversations.filter(e=>("dm"===e.type||"direct"===e.type)&&e.id===a.contactId||!("group"!==e.type&&!e.isGroup||!e.members||!e.members.includes(a.contactId))).map(e=>{const t=Oi.contacts.find(e=>e.id===a.contactId),n=t?.handle&&t.handle.trim()||t?.name||"Unknown";return{id:e.id,name:e.title||("group"===e.type||e.isGroup?"":n),type:"group"===e.type||e.isGroup?"group":"dm",avatar:e.avatar||null}});if(0===e.length){const e=Oi.contacts.find(e=>e.id===a.contactId);return[{id:"no_conv",name:` ${e?.handle&&e.handle.trim()||e?.name||"Unknown"} `,type:"placeholder",avatar:null}]}return e}),p=Kl(()=>{if(!i.value)return s.value.slice(0,50);const e=i.value.toLowerCase();return s.value.filter(t=>{const a=Array.isArray(t.who)?t.who.join(" "):t.who||"";return(t.action||t.what||"").toLowerCase().includes(e)||a.toLowerCase().includes(e)||t.why&&t.why.toLowerCase().includes(e)||t.when&&t.when.toLowerCase().includes(e)})}),v=async e=>{if(n.value=!0,!e||"no_conv"===e)return l.value=null,r.value="",s.value=[],void(n.value=!1);const[t,a]=await Promise.all([no(e),so(e)]);t?(l.value=t,r.value=t.summary||""):(l.value=null,r.value=""),s.value=a||[],n.value=!1},f=async()=>{if(!d.value||d.value.startsWith("mock_"))return l.value={...l.value,summary:r.value,lastUpdatedAt:Date.now()},void(o.value=!1);await lo(d.value,r.value),l.value={...l.value,summary:r.value,lastUpdatedAt:Date.now()},o.value=!1},x=async e=>{confirm("")&&(d.value&&!d.value.startsWith("mock_")&&await(async e=>{await zi(ji.FACT_MEMORIES,e)})(e),s.value=s.value.filter(t=>t.id!==e))},b=e=>{if(!e)return"";return(Array.isArray(e)?e:[e]).map(e=>"User"===e?"":e).join("")},m=e=>e.action||e.what||"";return Ja(async()=>{u.value.length>0&&!d.value&&(d.value=u.value[0].id),await v(d.value)}),(e,t)=>{return ul(),xl("div",Ib,[wl("header",jb,[wl("div",Mb,[wl("div",Eb,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...t[7]||(t[7]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),wl("div",Ab,[t[8]||(t[8]=wl("span",{class:"text-[16px] font-bold"},"Memory",-1)),d.value?(ul(),xl("span",Tb,J(u.value.find(e=>e.id===d.value)?.name||""),1)):Sl("",!0)]),wl("div",Ob,[wl("button",{onClick:t[1]||(t[1]=e=>c.value=!0),class:"size-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors"},[...t[9]||(t[9]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"more_horiz",-1)])])])])]),wl("main",$b,[n.value?(ul(),xl("div",Lb," ... ")):(ul(),xl("div",Nb,[wl("section",Pb,[wl("div",Rb,[t[10]||(t[10]=wl("div",{class:"flex items-center gap-2"},[wl("span",{class:"material-symbols-outlined text-[20px] text-zinc-900"},"psychology"),wl("h2",{class:"text-[16px] font-bold uppercase tracking-wide"},"CORE COGNITION")],-1)),o.value?(ul(),xl("button",{key:1,onClick:f,class:"text-[13px] font-bold text-black border border-black px-3 py-0.5 rounded-full hover:bg-black hover:text-white transition-colors"}," SAVE ")):(ul(),xl("button",{key:0,onClick:t[2]||(t[2]=e=>o.value=!0),class:"text-[13px] font-bold text-zinc-400 hover:text-black transition-colors"}," EDIT "))]),o.value?aa((ul(),xl("textarea",{key:1,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),class:"w-full h-[120px] bg-white border border-black p-3 rounded-lg text-[15px] font-serif focus:outline-none"},null,512)),[[Qs,r.value]]):(ul(),xl("div",Db,[l.value?(ul(),xl("p",Ub,' "'+J(l.value.summary)+'" ',1)):(ul(),xl("p",Vb,"  "))])),l.value?(ul(),xl("div",Bb," : "+J((a=l.value.lastUpdatedAt,new Date(a).toLocaleDateString()+" "+new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1)):Sl("",!0)]),wl("section",Fb,[wl("div",Gb,[t[12]||(t[12]=wl("h2",{class:"text-[16px] font-bold uppercase tracking-wide"},"MEMORY STREAM",-1)),wl("div",Kb,[aa(wl("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),type:"text",placeholder:"...",class:"bg-zinc-50 border border-zinc-200 rounded-full py-1.5 pl-9 pr-4 text-[13px] w-[140px] focus:w-[180px] focus:border-black transition-all focus:outline-none"},null,512),[[Qs,i.value]]),t[11]||(t[11]=wl("span",{class:"material-symbols-outlined absolute left-2.5 top-1.5 text-[16px] text-zinc-400"},"search",-1))])]),wl("div",Wb,[(ul(!0),xl(sl,null,sn(p.value,e=>(ul(),xl("div",{key:e.id,class:"group relative bg-white border border-zinc-100 rounded-xl p-4 transition-shadow hover:shadow-sm hover:border-zinc-200"},[wl("button",{onClick:t=>x(e.id),class:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-zinc-100 rounded-md"},[...t[13]||(t[13]=[wl("span",{class:"material-symbols-outlined text-[16px] text-zinc-400"},"delete",-1)])],8,Hb),wl("div",qb,[wl("div",Jb,[wl("span",null,J(e.when||""),1),t[14]||(t[14]=wl("span",{class:"w-1 h-1 rounded-full bg-zinc-300"},null,-1)),wl("span",null,J(e.where||""),1)]),wl("div",Yb,[wl("span",Xb,J(b(e.who)),1),wl("span",Qb,J(m(e)),1)]),e.why?(ul(),xl("div",Zb,[wl("span",em," : "+J(e.why),1)])):Sl("",!0)])]))),128))])])]))]),c.value?(ul(),xl("div",tm,[wl("div",{class:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:t[5]||(t[5]=e=>c.value=!1)}),wl("div",am,[wl("div",nm,[t[16]||(t[16]=wl("span",{class:"font-bold text-lg"},"",-1)),wl("button",{onClick:t[6]||(t[6]=e=>c.value=!1),class:"text-zinc-400 hover:text-black"},[...t[15]||(t[15]=[wl("span",{class:"material-symbols-outlined"},"close",-1)])])]),wl("div",lm,[(ul(!0),xl(sl,null,sn(u.value,e=>(ul(),xl("div",{key:e.id,onClick:t=>{return a=e.id,d.value=a,c.value=!1,void v(a);var a},class:F(["p-3 rounded-lg cursor-pointer flex items-center gap-3 transition-colors hover:bg-zinc-50",d.value===e.id?"bg-zinc-100 ring-1 ring-zinc-200":""])},[wl("div",im,[wl("span",om,J("group"===e.type?"group":"person"),1)]),wl("div",rm,[wl("span",cm,J(e.name),1),wl("span",dm,J("dm"===e.type?"":""),1)])],10,sm))),128)),0===u.value.length?(ul(),xl("div",um,"  ")):Sl("",!0)])])])):Sl("",!0)]);var a}}},vm=_o(pm,[["__scopeId","data-v-882b9b31"]]),fm={class:"h-full flex flex-col bg-white text-black font-sans relative overflow-hidden"},xm={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},bm={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},mm={class:"w-full pb-32 flex-1 overflow-y-auto scrollbar-hide"},gm={class:"flex flex-col items-center pt-8 pb-8 border-b border-gray-50"},hm={class:"relative w-[86px] h-[86px] rounded-full p-[2px] border border-gray-100 mb-4 bg-white shadow-sm"},ym={class:"font-serif text-2xl font-medium tracking-tight mb-1"},wm={class:"text-[10px] tracking-[0.2em] font-bold uppercase text-zinc-400"},km={class:"text-[11px] font-medium text-zinc-600 group-hover:text-black"},zm={class:"px-6 py-6 space-y-8"},Cm={class:"bg-transparent flex flex-col gap-0"},_m={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Sm={class:"flex flex-col gap-1"},Im={key:0,class:"text-[11px] text-zinc-400 font-light"},jm={class:"flex items-center gap-3"},Mm={class:"relative inline-flex items-center cursor-pointer"},Em={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Am={class:"flex flex-col gap-1"},Tm={key:0,class:"text-[11px] text-zinc-400 font-light"},Om={class:"flex items-center gap-3"},$m={class:"relative inline-flex items-center cursor-pointer"},Lm={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Nm={class:"flex items-center gap-2"},Pm={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Rm={class:"relative inline-flex items-center cursor-pointer"},Dm={key:0,class:"space-y-3 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},Um={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},Vm={class:"relative inline-flex items-center cursor-pointer"},Bm={key:0,class:"pl-4 border-l-2 border-zinc-100"},Fm={key:1,class:"group flex items-center justify-between py-3 border-b border-gray-50"},Gm={class:"relative inline-flex items-center cursor-pointer"},Km={key:2,class:"space-y-4 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},Wm={class:"flex items-start gap-3 py-2 pl-4 border-l-2 border-zinc-100"},Hm={class:"flex flex-col gap-2 flex-1"},qm={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-zinc-100 ring-1 ring-zinc-200 shrink-0"},Jm=["src"],Ym={class:"flex items-start gap-3 py-2 pl-4 border-l-2 border-zinc-100"},Xm={class:"flex flex-col gap-2 flex-1"},Qm={class:"text-[12px] text-zinc-500 font-medium"},Zm={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-zinc-100 ring-1 ring-zinc-200 shrink-0"},eg=["src"],tg={class:"flex items-center gap-2"},ag={class:"text-[12px] text-zinc-400"},ng={class:"flex items-center gap-2"},lg={class:"text-[12px] text-zinc-400"},sg={class:"mt-4 pt-4 border-t border-gray-100"},ig={class:"flex items-center justify-between py-3"},og={class:"relative inline-flex items-center cursor-pointer"},rg={key:0,class:"space-y-3 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},cg={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},dg={class:"flex items-center gap-2"},ug={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},pg={class:"flex items-center gap-2"},vg=["disabled"],fg={class:"flex items-center gap-2"},xg={key:0,class:"text-[11px] text-zinc-400"},bg={key:1,class:"text-[11px] text-zinc-300"},mg={class:"material-symbols-outlined text-zinc-300 text-[16px] group-hover:text-black"},gg={class:"flex items-center gap-2"},hg={key:0,class:"text-[12px] text-zinc-400"},yg={key:1,class:"text-[12px] text-zinc-400"},wg={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},kg={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},zg={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Cg={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-6"},_g={id:"timezone-list"},Sg=["value"],Ig={class:"flex flex-col gap-2"},jg={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},Mg={key:0,class:"flex flex-col gap-2"},Eg={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},Ag={key:1,class:"flex flex-col gap-4"},Tg={class:"text-[10px] text-zinc-500 font-medium ml-1"},Og=["onUpdate:modelValue","placeholder"],$g={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Lg={key:1,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Ng={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Pg={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Rg={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-8"},Dg={class:"flex flex-col gap-3"},Ug={class:"flex gap-2"},Vg={key:0,class:"material-symbols-outlined text-sm animate-spin"},Bg={key:1,class:"material-symbols-outlined text-sm"},Fg={key:0,class:"flex flex-col gap-1 mt-1"},Gg=["onClick"],Kg={key:0,class:"material-symbols-outlined text-xs"},Wg={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},Hg={class:"text-[12px] font-medium"},qg={class:"text-[10px] text-zinc-400 font-mono ml-auto"},Jg={class:"flex flex-col gap-4"},Yg={class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},Xg={key:0,class:"flex flex-col gap-3"},Qg={class:"flex gap-2"},Zg={key:0,class:"material-symbols-outlined text-sm animate-spin"},eh={key:1,class:"material-symbols-outlined text-sm"},th={key:0,class:"flex flex-col gap-1 mt-1"},ah=["onClick"],nh={key:0,class:"material-symbols-outlined text-xs"},lh={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},sh={class:"text-[12px] font-medium"},ih={class:"text-[10px] text-zinc-400 font-mono ml-auto"},oh={key:1,class:"flex flex-col gap-6"},rh={class:"text-[11px] font-bold block mb-2"},ch={class:"flex gap-2"},dh=["onUpdate:modelValue","onKeyup"],uh=["onClick"],ph={key:0,class:"material-symbols-outlined text-sm animate-spin"},vh={key:1,class:"material-symbols-outlined text-sm"},fh={key:0,class:"flex flex-col gap-1 mt-2 bg-white rounded-md border border-gray-100 p-1"},xh=["onClick"],bh={class:"truncate"},mh={key:0,class:"material-symbols-outlined text-[10px]"},gh={key:1,class:"flex items-center gap-2 mt-2 px-2"},hh={class:"text-[11px] font-bold text-zinc-600"},yh={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end gap-3"},wh={key:2,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},kh={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},zh={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Ch={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},_h={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},Sh={class:"text-[13px] text-zinc-600"},Ih={class:"font-bold text-black"},jh={class:"flex flex-col gap-2"},Mh=["onClick"],Eh={class:"flex items-center gap-3"},Ah={class:"font-medium text-[14px] text-zinc-900"},Th={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},Oh=["checked","onChange"],$h={key:0,class:"border-t border-zinc-100 px-4 pb-4"},Lh={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},Nh={class:"flex flex-col"},Ph={class:"text-[13px] font-medium text-zinc-700"},Rh={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},Dh=["checked","disabled","onChange"],Uh={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Vh={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Bh={key:3,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Fh={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Gh={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Kh={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},Wh={key:0,class:"py-8 text-center"},Hh={key:1,class:"flex flex-col gap-2"},qh=["onClick"],Jh={class:"flex items-center gap-3"},Yh={key:0,class:"material-symbols-outlined text-zinc-400 flex items-center justify-center h-full"},Xh={class:"flex flex-col items-start"},Qh={class:"text-[14px] font-medium"},Zh={key:0,class:"material-symbols-outlined text-black text-[16px] font-bold"},ey={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},ty={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},ay={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},ny={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},ly={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},sy={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},iy={class:"text-[13px] text-zinc-600"},oy={class:"font-bold text-black"},ry={key:0,class:"py-8 text-center bg-zinc-50 rounded-2xl border border-zinc-100"},cy={key:1,class:"flex flex-col gap-2"},dy=["onClick"],uy={class:"flex items-center gap-3"},py={class:"font-medium text-[14px] text-zinc-900"},vy={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},fy=["checked","onChange"],xy={key:0,class:"border-t border-zinc-100 px-4 pb-4"},by={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},my={class:"flex flex-col"},gy={class:"text-[13px] font-medium text-zinc-700"},hy={class:"text-[10px] text-zinc-400 font-mono truncate max-w-[200px]"},yy=["checked","disabled","onChange"],wy={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},ky={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},zy={__name:"ChatSettings",props:["chatId"],emits:["back","navigate"],setup(e,{emit:t}){const a=e,n=Kl(()=>qi(a.chatId)),l=yt(!1),s=yt(!1),i=yt(""),o=yt(""),r=yt(15),c=yt(!1),d=yt(100),u=yt(500),p=yt(!1),v=yt([]),f=yt(!1),x=yt(!1),b=yt(""),m=yt(""),g=yt(""),h=yt([]),y=yt([]),w=yt({}),k=yt({}),z=yt(null),C=yt(null),_=yt({}),S=rc(),I=yt(!1),j=yt([]),M=yt(new Set),E=yt(!1),A=yt([]),T=yt(new Set),O=Kl(()=>Oi.regexCategories.filter(e=>"local"===e.scope)),$=yt(!1),L=yt(!1),N=yt(""),P=yt(!1),D=yt(""),U=yt(""),V=Kl(()=>{const e=n.value?.localSettings?.myActivePersonaId;if(e){const t=Oi.personas.find(t=>t.id===e);return t?t.name:"My"}return Ui.value?Ui.value.name:"My"}),B=Kl(()=>{if(!n.value)return"https://via.placeholder.com/150";const e=n.value.localSettings||{},t="group"===n.value.type||n.value.isGroup?e.groupAvatarOverride:e.theirAvatarOverride;if(t)return t;if(!n.value.isGroup&&"group"!==n.value.type){const e=Oi.contacts.find(e=>e.id===n.value.id);if(e?.avatar)return e.avatar}return n.value.avatar||"https://via.placeholder.com/150"}),G=Kl(()=>{if(!n.value)return"Their";const e=n.value.localSettings||{};if(n.value.isGroup||"group"===n.value.type)return e.groupNameOverride||n.value.title||"Group";const t=Oi.contacts.find(e=>e.id===n.value.id);return e.theirNicknameOverride||t?.handle||t?.name||n.value.handle||n.value.name||"Their"}),K=yt([]);try{K.value=Intl.supportedValuesOf("timeZone")}catch(UI){K.value=["UTC","Asia/Shanghai","Asia/Tokyo","Europe/London","Europe/Paris","America/New_York","America/Los_Angeles"]}const W=yt({}),H=Kl(()=>"group"===n.value?.type||!0===n.value?.isGroup),q=yt(!1),Y=Kl(()=>H.value?(n.value.members||[]).map(e=>Oi.contacts.find(t=>t.id===e)||{id:e,name:"Unknown"}):[]),X=async()=>{if(n.value){const e={};for(const[t,a]of Object.entries(W.value))a&&(e[t]={location:a});await Fi({id:a.chatId,localSettings:{...n.value.localSettings||{},timeAwareness:l.value,envSensing:s.value,myLocationOverride:i.value,theirLocationOverride:o.value,shortTermMemoryLimit:r.value,memberOverrides:e,myWeatherConfig:z.value,theirWeatherConfig:C.value,groupWeatherConfigs:_.value,longTermMemoryEnabled:c.value,ltmSummarizeTrigger:d.value,ltmCoreMaxChars:u.value,mountedMemorySources:v.value,mountedRegexCategories:A.value,innerVoiceEnabled:$.value,innerVoiceUseCustom:L.value,innerVoiceTemplate:N.value,videoCallUseImage:P.value,videoCallUserImage:D.value,videoCallCharImage:U.value}})}},Q=async e=>{g.value=e;let t="";if(t="me"===e?b.value:"their"===e?m.value:w.value[e]||"",!t)return void(g.value="");const a=await(async e=>{if(!e||e.length<2)return[];try{const t=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=5&language=en&format=json`,a=await fetch(t),n=await a.json();return n.results&&Array.isArray(n.results)?n.results.map(e=>({id:e.id,name:e.name,latitude:e.latitude,longitude:e.longitude,country:e.country,admin1:e.admin1})):[]}catch(UI){return[]}})(t);"me"===e?h.value=a:"their"===e?y.value=a:k.value={...k.value,[e]:a},g.value=""},Z=(e,t)=>{const a={city:t.name,lat:t.latitude,long:t.longitude};if("me"===e)z.value=a,h.value=[],b.value="";else if("their"===e)C.value=a,y.value=[],m.value="";else{_.value={..._.value,[e]:a};const t={...k.value};delete t[e],k.value=t,w.value[e]=""}},ee=e=>_.value[e],te=Kl(()=>S.state.categories),ae=Kl(()=>S.state.entries),ne=e=>ae.value.filter(t=>t.categoryId===e&&"local"===t.scope),le=e=>{const t=j.value.indexOf(e);-1===t?j.value.push(e):j.value.splice(t,1),re()},se=e=>j.value.includes(e),ie=e=>M.value.has(e),oe=()=>{I.value=!0},re=async()=>{if(n.value){const e=n.value.localSettings||{};await Fi({id:a.chatId,localSettings:{...e,mountedWorldbooks:j.value}})}},ce=Kl(()=>ae.value.filter(e=>"global"===e.scope).length),de=e=>{const t=A.value.indexOf(e);-1===t?A.value.push(e):A.value.splice(t,1),X()},ue=e=>A.value.includes(e),pe=e=>T.value.has(e),ve=e=>Oi.regexEntries.filter(t=>t.categoryId===e),fe=Kl(()=>{const e=n.value;if(!e)return[];const t="group"===e.type||e.isGroup?null:e.id,a=e.members||[];return Oi.conversations.filter(n=>{if(n.id===e.id)return!1;if(t){if(("dm"===n.type||"direct"===n.type)&&n.id===t)return!0;if(("group"===n.type||n.isGroup)&&n.members?.includes(t))return!0}else{if(("dm"===n.type||"direct"===n.type)&&a.includes(n.id))return!0;if(("group"===n.type||n.isGroup)&&n.members?.some(e=>a.includes(e)))return!0}return!1}).map(e=>{const t="group"===e.type||e.isGroup;let a="";if(t)a=e.title||e.handle||"";else{const t=Oi.contacts.find(t=>t.id===e.id);a=t?.name||t?.handle||""}return{id:e.id,name:a,type:t?"group":"dm",avatar:e.avatar||null}})}),xe=e=>v.value.includes(e),be=async()=>{if(!f.value)try{f.value=!0,await Gi(a.chatId);const e=Oi.messages[a.chatId]||[];if(0===e.length)return void alert("");await po(a.chatId,e.slice(-50)),alert("")}catch(UI){alert(": "+UI.message)}finally{f.value=!1}};return Ja(()=>{(()=>{if(n.value){const e=n.value.localSettings||{};l.value=!1!==e.timeAwareness,s.value=!0===e.envSensing,i.value=e.myLocationOverride||"",o.value=e.theirLocationOverride||"",r.value=e.shortTermMemoryLimit||15,z.value=e.myWeatherConfig||null,C.value=e.theirWeatherConfig||null,_.value=e.groupWeatherConfigs||{};const t=e.memberOverrides||{};H.value&&Y.value.forEach(e=>{W.value[e.id]=t[e.id]?.location||""}),j.value=[...e.mountedWorldbooks||[]],A.value=[...e.mountedRegexCategories||[]],c.value=!0===e.longTermMemoryEnabled,d.value=e.ltmSummarizeTrigger||15,u.value=e.ltmCoreMaxChars||500,v.value=[...e.mountedMemorySources||[]],$.value=!0===e.innerVoiceEnabled,L.value=!0===e.innerVoiceUseCustom,N.value=e.innerVoiceTemplate||"",P.value=!0===e.videoCallUseImage,D.value=e.videoCallUserImage||"",U.value=e.videoCallCharImage||""}})()}),(e,t)=>(ul(),xl("div",fm,[wl("header",xm,[wl("div",bm,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors active:scale-95"},[...t[43]||(t[43]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[44]||(t[44]=wl("h1",{class:"font-serif text-[16px] font-semibold tracking-wide uppercase text-center flex-1 pr-8 opacity-80"},"",-1)),t[45]||(t[45]=wl("div",{class:"w-8 hidden"},null,-1))])]),wl("main",mm,[wl("section",gm,[wl("div",hm,[wl("div",{class:"w-full h-full rounded-full bg-neutral-100 bg-cover bg-center",style:R({backgroundImage:`url(${B.value})`})},null,4)]),wl("h2",ym,J(G.value),1),wl("span",wm,J(H.value?"":""),1),wl("button",{onClick:t[1]||(t[1]=t=>e.$emit("navigate","chat-settings-identity",{id:a.chatId})),class:"mt-6 flex items-center gap-2 pl-3 pr-4 py-1.5 rounded-full bg-zinc-50 border border-zinc-100 hover:bg-zinc-100 transition-colors group"},[wl("div",{class:"w-5 h-5 rounded-full bg-cover bg-center",style:R({backgroundImage:`url(${kt(Oi).personas.find(e=>e.name===V.value)?.avatar})`})},null,4),wl("span",km,": "+J(V.value),1),t[46]||(t[46]=wl("span",{class:"material-symbols-outlined text-[14px] text-zinc-300 group-hover:text-black"},"arrow_forward_ios",-1))])]),wl("section",zm,[wl("div",null,[t[62]||(t[62]=wl("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-500 mb-4 ml-1"},"",-1)),wl("div",Cm,[wl("div",_m,[wl("div",Sm,[t[47]||(t[47]=wl("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),l.value?(ul(),xl("span",Im,J(i.value||"")+"  "+J(o.value||""),1)):Sl("",!0)]),wl("div",jm,[l.value?(ul(),xl("button",{key:0,onClick:t[2]||(t[2]=e=>q.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...t[48]||(t[48]=[wl("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):Sl("",!0),wl("label",Mm,[aa(wl("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>l.value=e),class:"sr-only noir-toggle",onChange:X},null,544),[[Zs,l.value]]),t[49]||(t[49]=wl("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),wl("div",Em,[wl("div",Am,[t[50]||(t[50]=wl("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),s.value?(ul(),xl("span",Tm,J(b.value||"")+"  "+J(m.value||""),1)):Sl("",!0)]),wl("div",Om,[s.value?(ul(),xl("button",{key:0,onClick:t[4]||(t[4]=e=>x.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...t[51]||(t[51]=[wl("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):Sl("",!0),wl("label",$m,[aa(wl("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>s.value=e),class:"sr-only noir-toggle",onChange:X},null,544),[[Zs,s.value]]),t[52]||(t[52]=wl("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),wl("div",Lm,[t[54]||(t[54]=wl("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),wl("div",Nm,[aa(wl("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>r.value=e),onChange:X,class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[Qs,r.value]]),t[53]||(t[53]=wl("span",{class:"text-[11px] text-zinc-400 uppercase tracking-widest"},"",-1))])]),wl("div",Pm,[t[56]||(t[56]=wl("div",{class:"flex flex-col gap-1"},[wl("span",{class:"text-[15px] font-medium text-zinc-900"},""),wl("span",{class:"text-[11px] text-zinc-400 font-light"},"AI ")],-1)),wl("label",Rm,[aa(wl("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>$.value=e),class:"sr-only noir-toggle",onChange:X},null,544),[[Zs,$.value]]),t[55]||(t[55]=wl("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),$.value?(ul(),xl("div",Dm,[wl("div",Um,[t[58]||(t[58]=wl("span",{class:"text-[13px] text-zinc-600"},"",-1)),wl("label",Vm,[aa(wl("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>L.value=e),class:"sr-only noir-toggle",onChange:X},null,544),[[Zs,L.value]]),t[57]||(t[57]=wl("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),L.value?(ul(),xl("div",Bm,[aa(wl("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>N.value=e),onChange:X,placeholder:" {{content}} \n<div class='thought'> {{content}}</div>",class:"w-full h-20 bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20 resize-none"},null,544),[[Qs,N.value]])])):Sl("",!0)])):Sl("",!0),H.value?Sl("",!0):(ul(),xl("div",Fm,[t[60]||(t[60]=wl("div",{class:"flex flex-col gap-1"},[wl("span",{class:"text-[15px] font-medium text-zinc-900"},""),wl("span",{class:"text-[11px] text-zinc-400 font-light"},"")],-1)),wl("label",Gm,[aa(wl("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>P.value=e),class:"sr-only noir-toggle",onChange:X},null,544),[[Zs,P.value]]),t[59]||(t[59]=wl("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])),P.value&&!H.value?(ul(),xl("div",Km,[wl("div",Wm,[wl("div",Hm,[t[61]||(t[61]=wl("span",{class:"text-[12px] text-zinc-500 font-medium"},"",-1)),aa(wl("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>D.value=e),onChange:X,placeholder:"URL ()",class:"w-full bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20"},null,544),[[Qs,D.value]])]),D.value?(ul(),xl("div",qm,[wl("img",{src:D.value,class:"w-full h-full object-cover",onError:t[12]||(t[12]=e=>D.value="")},null,40,Jm)])):Sl("",!0)]),wl("div",Ym,[wl("div",Xm,[wl("span",Qm,J(G.value)+" ",1),aa(wl("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>U.value=e),onChange:X,placeholder:"URL ()",class:"w-full bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20"},null,544),[[Qs,U.value]])]),U.value?(ul(),xl("div",Zm,[wl("img",{src:U.value,class:"w-full h-full object-cover",onError:t[14]||(t[14]=e=>U.value="")},null,40,eg)])):Sl("",!0)])])):Sl("",!0)])]),wl("div",null,[t[76]||(t[76]=wl("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-500 mb-4 ml-1"},"",-1)),wl("button",{onClick:oe,class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors"},[t[64]||(t[64]=wl("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),wl("div",tg,[wl("span",ag,J(j.value.length)+" ",1),t[63]||(t[63]=wl("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),wl("button",{onClick:t[15]||(t[15]=e=>E.value=!0),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors mt-0"},[t[66]||(t[66]=wl("span",{class:"text-[15px] font-medium text-zinc-900"},"Regex ",-1)),wl("div",ng,[wl("span",lg,J(A.value.length)+" ",1),t[65]||(t[65]=wl("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),wl("div",sg,[wl("div",ig,[t[68]||(t[68]=wl("div",{class:"flex flex-col gap-1"},[wl("span",{class:"text-[15px] font-medium text-zinc-900"},""),wl("span",{class:"text-[11px] text-zinc-400 font-light"},"")],-1)),wl("label",og,[aa(wl("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>c.value=e),class:"sr-only noir-toggle",onChange:X},null,544),[[Zs,c.value]]),t[67]||(t[67]=wl("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),c.value?(ul(),xl("div",rg,[wl("div",cg,[t[70]||(t[70]=wl("span",{class:"text-[13px] text-zinc-600"},"",-1)),wl("div",dg,[aa(wl("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=e=>d.value=e),onChange:X,min:"10",max:"200",class:"w-14 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[Qs,d.value]]),t[69]||(t[69]=wl("span",{class:"text-[11px] text-zinc-400"},"",-1))])]),wl("div",ug,[t[72]||(t[72]=wl("span",{class:"text-[13px] text-zinc-600"},"",-1)),wl("div",pg,[aa(wl("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=e=>u.value=e),onChange:X,min:"100",max:"2000",step:"50",class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[Qs,u.value]]),t[71]||(t[71]=wl("span",{class:"text-[11px] text-zinc-400"},"",-1))])]),wl("button",{onClick:be,disabled:f.value,class:"w-full flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100 group hover:bg-zinc-50 rounded-r-lg transition-colors disabled:opacity-50"},[t[73]||(t[73]=wl("span",{class:"text-[13px] text-zinc-600 group-hover:text-black"},"",-1)),wl("div",fg,[f.value?(ul(),xl("span",xg,"...")):(ul(),xl("span",bg,"")),wl("span",mg,J(f.value?"sync":"play_arrow"),1)])],8,vg)])):Sl("",!0)]),wl("button",{onClick:t[19]||(t[19]=e=>p.value=!0),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[t[75]||(t[75]=wl("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),wl("div",gg,[v.value.length>0?(ul(),xl("span",hg,J(v.value.length)+" ",1)):(ul(),xl("span",yg,"")),t[74]||(t[74]=wl("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),t[77]||(t[77]=wl("button",{class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[wl("span",{class:"text-[15px] font-medium text-zinc-500 group-hover:text-zinc-900 transition-colors"},""),wl("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-zinc-900 transition-colors"},"delete_outline")],-1))])]),t[78]||(t[78]=wl("div",{class:"flex flex-col items-center opacity-10 py-12 select-none pointer-events-none"},[wl("span",{class:"font-serif italic text-2xl"},"NOIR")],-1))]),(ul(),bl(ha,{to:"body"},[q.value?(ul(),xl("div",wg,[wl("div",kg,[wl("div",zg,[t[79]||(t[79]=wl("span",{class:"font-serif italic text-lg"},"",-1)),wl("button",{onClick:t[20]||(t[20]=e=>q.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),wl("div",Cg,[wl("datalist",_g,[(ul(!0),xl(sl,null,sn(K.value,e=>(ul(),xl("option",{key:e,value:e},J(e),9,Sg))),128))]),wl("div",Ig,[wl("label",jg,J(V.value)+" () ",1),aa(wl("input",{type:"text",list:"timezone-list","onUpdate:modelValue":t[21]||(t[21]=e=>i.value=e),onChange:X,placeholder:" Asia/Shanghai",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[Qs,i.value]])]),H.value?(ul(),xl("div",Ag,[t[80]||(t[80]=wl("div",{class:"w-full h-px bg-black/[0.03]"},null,-1)),t[81]||(t[81]=wl("span",{class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},"",-1)),(ul(!0),xl(sl,null,sn(Y.value,e=>(ul(),xl("div",{key:e.id,class:"flex flex-col gap-2"},[wl("label",Tg,J(e.name),1),aa(wl("input",{type:"text",list:"timezone-list","onUpdate:modelValue":t=>W.value[e.id]=t,onChange:X,placeholder:`${e.name} `,class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,40,Og),[[Qs,W.value[e.id]]])]))),128))])):(ul(),xl("div",Mg,[wl("label",Eg,J(G.value)+" () ",1),aa(wl("input",{type:"text",list:"timezone-list","onUpdate:modelValue":t[22]||(t[22]=e=>o.value=e),onChange:X,placeholder:" Europe/Paris",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[Qs,o.value]])]))]),wl("div",$g,[wl("button",{onClick:t[23]||(t[23]=e=>q.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):Sl("",!0),x.value?(ul(),xl("div",Lg,[wl("div",Ng,[wl("div",Pg,[t[82]||(t[82]=wl("div",{class:"flex flex-col"},[wl("span",{class:"font-serif italic text-lg"},""),wl("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Environment Simulation")],-1)),wl("button",{onClick:t[24]||(t[24]=e=>x.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),wl("div",Rg,[t[87]||(t[87]=wl("div",{class:"bg-gray-50 p-4 rounded-lg flex gap-3"},[wl("span",{class:"material-symbols-outlined text-zinc-400 text-sm mt-0.5"},"info"),wl("p",{class:"text-[11px] text-zinc-500 leading-relaxed"}," Noir  Prompt  ")],-1)),wl("div",Dg,[t[84]||(t[84]=wl("span",{class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},"",-1)),wl("div",Ug,[aa(wl("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>b.value=e),onKeyup:t[26]||(t[26]=pi(e=>Q("me"),["enter"])),placeholder:" ( )",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[Qs,b.value]]),wl("button",{onClick:t[27]||(t[27]=e=>Q("me")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},["me"===g.value?(ul(),xl("span",Vg,"sync")):(ul(),xl("span",Bg,"search"))])]),h.value.length>0?(ul(),xl("div",Fg,[(ul(!0),xl(sl,null,sn(h.value,e=>(ul(),xl("button",{key:e.id,onClick:t=>Z("me",e),class:F(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",z.value?.city===e.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[wl("span",null,J(e.name)+", "+J(e.admin1||e.country),1),z.value?.city===e.name?(ul(),xl("span",Kg,"check")):Sl("",!0)],10,Gg))),128))])):z.value?.city?(ul(),xl("div",Wg,[t[83]||(t[83]=wl("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),wl("span",Hg,J(z.value.city),1),wl("span",qg,J(z.value.lat.toFixed(2))+", "+J(z.value.long.toFixed(2)),1)])):Sl("",!0)]),t[88]||(t[88]=wl("div",{class:"w-full h-px bg-gray-100"},null,-1)),wl("div",Jg,[wl("span",Yg,J(H.value?"":""),1),H.value?(ul(),xl("div",oh,[(ul(!0),xl(sl,null,sn(Y.value,e=>(ul(),xl("div",{key:e.id,class:"p-3 border border-gray-100 rounded-lg bg-gray-50/50"},[wl("span",rh,J(e.name),1),wl("div",ch,[aa(wl("input",{"onUpdate:modelValue":t=>w.value[e.id]=t,onKeyup:pi(t=>Q(e.id),["enter"]),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-1.5 text-[12px] focus:border-black focus:outline-none transition-colors"},null,40,dh),[[Qs,w.value[e.id]]]),wl("button",{onClick:t=>Q(e.id),class:"bg-white border border-gray-200 text-black rounded-lg px-3 flex items-center justify-center hover:border-black transition-colors"},[g.value===e.id?(ul(),xl("span",ph,"sync")):(ul(),xl("span",vh,"search"))],8,uh)]),k.value[e.id]&&k.value[e.id].length>0?(ul(),xl("div",fh,[(ul(!0),xl(sl,null,sn(k.value[e.id],t=>(ul(),xl("button",{key:t.id,onClick:a=>Z(e.id,t),class:F(["text-left px-2 py-1.5 rounded hover:bg-gray-50 text-[11px] flex items-center justify-between group transition-colors",ee(e.id)?.city===t.name?"font-bold text-black":"text-zinc-500"])},[wl("span",bh,J(t.name)+", "+J(t.country),1),ee(e.id)?.city===t.name?(ul(),xl("span",mh,"check")):Sl("",!0)],10,xh))),128))])):ee(e.id)?.city?(ul(),xl("div",gh,[t[86]||(t[86]=wl("span",{class:"material-symbols-outlined text-[10px] text-green-600"},"check_circle",-1)),wl("span",hh,J(ee(e.id).city),1)])):Sl("",!0)]))),128))])):(ul(),xl("div",Xg,[wl("div",Qg,[aa(wl("input",{"onUpdate:modelValue":t[28]||(t[28]=e=>m.value=e),onKeyup:t[29]||(t[29]=pi(e=>Q("their"),["enter"])),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[Qs,m.value]]),wl("button",{onClick:t[30]||(t[30]=e=>Q("their")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},["their"===g.value?(ul(),xl("span",Zg,"sync")):(ul(),xl("span",eh,"search"))])]),y.value.length>0?(ul(),xl("div",th,[(ul(!0),xl(sl,null,sn(y.value,e=>(ul(),xl("button",{key:e.id,onClick:t=>Z("their",e),class:F(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",C.value?.city===e.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[wl("span",null,J(e.name)+", "+J(e.admin1||e.country),1),C.value?.city===e.name?(ul(),xl("span",nh,"check")):Sl("",!0)],10,ah))),128))])):C.value?.city?(ul(),xl("div",lh,[t[85]||(t[85]=wl("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),wl("span",sh,J(C.value.city),1),wl("span",ih,J(C.value.lat.toFixed(2))+", "+J(C.value.long.toFixed(2)),1)])):Sl("",!0)]))])]),wl("div",yh,[wl("button",{onClick:t[31]||(t[31]=e=>x.value=!1),class:"px-6 py-2 border border-gray-200 bg-white text-black text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-gray-50 transition-colors"},"  "),wl("button",{onClick:t[32]||(t[32]=e=>{X(),x.value=!1}),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):Sl("",!0),I.value?(ul(),xl("div",wh,[wl("div",kh,[wl("div",zh,[t[89]||(t[89]=wl("div",{class:"flex flex-col"},[wl("span",{class:"font-serif italic text-lg"},""),wl("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"WorldBook Mount")],-1)),wl("button",{onClick:t[33]||(t[33]=e=>I.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),wl("div",Ch,[wl("div",_h,[t[91]||(t[91]=wl("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),wl("p",Sh,[wl("span",Ih,J(ce.value),1),t[90]||(t[90]=Cl("  ",-1))])]),wl("div",jh,[(ul(!0),xl(sl,null,sn(te.value,e=>(ul(),xl("div",{key:e.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[wl("button",{onClick:t=>{return a=e.id,M.value.has(a)?M.value.delete(a):M.value.add(a),void(M.value=new Set(M.value));var a},class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[wl("div",Eh,[wl("span",{class:F(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",ie(e.id)?"rotate-90":""])},"chevron_right",2),wl("span",Ah,J(e.name),1),wl("span",Th,J(ne(e.id).length)+" local",1)]),wl("label",{class:"relative inline-flex items-center cursor-pointer",onClick:t[34]||(t[34]=di(()=>{},["stop"]))},[wl("input",{type:"checkbox",class:"sr-only",checked:se(e.id),onChange:t=>{return a=e.id,void le(a);var a}},null,40,Oh),wl("div",{class:F(["w-[36px] h-[20px] rounded-full transition-colors duration-200",se(e.id)?"bg-black":"bg-zinc-200"])},[wl("div",{class:F(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",se(e.id)?"translate-x-4":""])},null,2)],2)])],8,Mh),ie(e.id)?(ul(),xl("div",$h,[0===ne(e.id).length?(ul(),xl("div",Lh," No local entries ")):Sl("",!0),(ul(!0),xl(sl,null,sn(ne(e.id),a=>(ul(),xl("div",{key:a.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[wl("div",Nh,[wl("span",Ph,J(a.title),1),wl("span",Rh,J(a.isConstant?"Constant":"Trigger")+"  "+J(a.position),1)]),wl("label",{class:"relative inline-flex items-center cursor-pointer",onClick:t[35]||(t[35]=di(()=>{},["stop"]))},[wl("input",{type:"checkbox",class:"sr-only",checked:se(e.id)||se(a.id),disabled:se(e.id),onChange:t=>!se(e.id)&&le(a.id)},null,40,Dh),wl("div",{class:F(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",se(e.id)||se(a.id)?"bg-black border-black":"bg-transparent"])},[se(e.id)||se(a.id)?(ul(),xl("span",Uh,"check")):Sl("",!0)],2)])]))),128))])):Sl("",!0)]))),128))])]),wl("div",Vh,[wl("button",{onClick:t[36]||(t[36]=e=>I.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):Sl("",!0),p.value?(ul(),xl("div",Bh,[wl("div",Fh,[wl("div",Gh,[t[92]||(t[92]=wl("div",{class:"flex flex-col"},[wl("span",{class:"font-serif italic text-lg"},""),wl("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Memory Mount")],-1)),wl("button",{onClick:t[37]||(t[37]=e=>p.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),wl("div",Kh,[t[94]||(t[94]=wl("div",{class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200"},[wl("p",{class:"text-[12px] text-zinc-500 leading-relaxed"},"  ")],-1)),0===fe.value.length?(ul(),xl("div",Wh,[...t[93]||(t[93]=[wl("span",{class:"material-symbols-outlined text-[48px] text-zinc-200 mb-2"},"memory",-1),wl("p",{class:"text-[13px] text-zinc-400"},"",-1),wl("p",{class:"text-[11px] text-zinc-300 mt-1"},"",-1)])])):(ul(),xl("div",Hh,[(ul(!0),xl(sl,null,sn(fe.value,e=>(ul(),xl("button",{key:e.id,onClick:t=>(e=>{const t=v.value.indexOf(e);-1===t?v.value.push(e):v.value.splice(t,1),X()})(e.id),class:F(["flex items-center justify-between p-4 rounded-xl border transition-all",xe(e.id)?"bg-black text-white border-black":"bg-white text-black border-zinc-200 hover:border-zinc-400"])},[wl("div",Jh,[wl("div",{class:"w-10 h-10 rounded-full bg-zinc-200 bg-cover bg-center shrink-0",style:R(e.avatar?{backgroundImage:`url(${e.avatar})`}:{})},[e.avatar?Sl("",!0):(ul(),xl("span",Yh,J("group"===e.type?"groups":"person"),1))],4),wl("div",Xh,[wl("span",Qh,J(e.name),1),wl("span",{class:F(["text-[10px] uppercase tracking-wider",(xe(e.id),"text-zinc-400")])},J("group"===e.type?"":""),3)])]),wl("div",{class:F(["w-5 h-5 rounded flex items-center justify-center transition-colors",xe(e.id)?"bg-white":"border border-zinc-300"])},[xe(e.id)?(ul(),xl("span",Zh,"check")):Sl("",!0)],2)],10,qh))),128))]))]),wl("div",ey,[wl("button",{onClick:t[38]||(t[38]=e=>p.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[E.value?(ul(),xl("div",ty,[wl("div",ay,[wl("div",ny,[t[95]||(t[95]=wl("div",{class:"flex flex-col"},[wl("span",{class:"font-serif italic text-lg"},"Regex "),wl("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Regex Mount")],-1)),wl("button",{onClick:t[39]||(t[39]=e=>E.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),wl("div",ly,[wl("div",sy,[t[97]||(t[97]=wl("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),wl("p",iy,[wl("span",oy,J(kt(Oi).regexCategories.filter(e=>"global"===e.scope).length),1),t[96]||(t[96]=Cl("  ",-1))])]),0===O.value.length?(ul(),xl("div",ry,[...t[98]||(t[98]=[wl("span",{class:"material-symbols-outlined text-[32px] text-zinc-200 mb-2"},"style",-1),wl("p",{class:"text-[13px] text-zinc-400"}," Local ",-1),wl("p",{class:"text-[11px] text-zinc-300 mt-1"}," Regex Manager  Scope  Local ",-1)])])):(ul(),xl("div",cy,[(ul(!0),xl(sl,null,sn(O.value,e=>(ul(),xl("div",{key:e.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[wl("button",{onClick:t=>{return a=e.id,T.value.has(a)?T.value.delete(a):T.value.add(a),void(T.value=new Set(T.value));var a},class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[wl("div",uy,[wl("span",{class:F(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",pe(e.id)?"rotate-90":""])},"chevron_right",2),wl("span",py,J(e.name),1),wl("span",vy,J(ve(e.id).length)+" local",1)]),wl("label",{class:"relative inline-flex items-center cursor-pointer",onClick:t[40]||(t[40]=di(()=>{},["stop"]))},[wl("input",{type:"checkbox",class:"sr-only",checked:ue(e.id),onChange:t=>de(e.id)},null,40,fy),wl("div",{class:F(["w-[36px] h-[20px] rounded-full transition-colors duration-200",ue(e.id)?"bg-black":"bg-zinc-200"])},[wl("div",{class:F(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",ue(e.id)?"translate-x-4":""])},null,2)],2)])],8,dy),pe(e.id)?(ul(),xl("div",xy,[0===ve(e.id).length?(ul(),xl("div",by," No entries in this pack ")):Sl("",!0),(ul(!0),xl(sl,null,sn(ve(e.id),a=>(ul(),xl("div",{key:a.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[wl("div",my,[wl("span",gy,J(a.name),1),wl("code",hy,J(a.regex),1)]),wl("label",{class:"relative inline-flex items-center cursor-pointer",onClick:t[41]||(t[41]=di(()=>{},["stop"]))},[wl("input",{type:"checkbox",class:"sr-only",checked:ue(e.id)||ue(a.id),disabled:ue(e.id),onChange:t=>!ue(e.id)&&de(a.id)},null,40,yy),wl("div",{class:F(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",ue(e.id)||ue(a.id)?"bg-black border-black":"bg-transparent"])},[ue(e.id)||ue(a.id)?(ul(),xl("span",wy,"check")):Sl("",!0)],2)])]))),128))])):Sl("",!0)]))),128))]))]),wl("div",ky,[wl("button",{onClick:t[42]||(t[42]=e=>E.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):Sl("",!0)]))]))}},Cy=_o(zy,[["__scopeId","data-v-1543b7a6"]]),_y={class:"h-full flex flex-col bg-zinc-50 text-black font-sans"},Sy={class:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50"},Iy={class:"flex items-center justify-between px-4 pt-[calc(12px_+_env(safe-area-inset-top))] pb-3 max-w-lg mx-auto w-full"},jy={key:0,class:"w-full max-w-lg mx-auto px-4 pb-32 flex-1 overflow-y-auto scrollbar-hide pt-6"},My={class:"space-y-6"},Ey={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Ay={class:"px-5 py-3 border-b border-gray-50 flex items-center justify-between bg-white"},Ty={class:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 border border-zinc-100"},Oy={class:"text-[10px] font-medium text-zinc-600"},$y={class:"p-5 flex flex-col gap-6"},Ly={class:"relative"},Ny=["value"],Py={class:"flex items-start gap-4"},Ry={class:"relative group shrink-0"},Dy={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},Uy=["src"],Vy={class:"flex-1 space-y-3 pt-1"},By={class:"relative"},Fy=["placeholder"],Gy={class:"relative"},Ky={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Wy={class:"px-5 py-3 border-b border-gray-50 bg-white"},Hy={class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},qy={class:"p-5 flex items-start gap-4"},Jy={class:"relative group shrink-0"},Yy={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},Xy=["src"],Qy={class:"flex-1 space-y-3 pt-1"},Zy={class:"relative"},ew=["placeholder"],tw={class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},aw={class:"relative"},nw={key:0,class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},lw={class:"divide-y divide-gray-50"},sw={class:"relative size-10 rounded-full bg-zinc-100 shrink-0 border border-gray-100 overflow-hidden cursor-pointer group-hover:border-zinc-300 transition-colors"},iw=["src"],ow=["onChange"],rw={class:"flex-1 flex flex-col gap-2"},cw=["onUpdate:modelValue","placeholder"],dw=["onUpdate:modelValue"],uw={class:"shrink-0 flex flex-col items-end"},pw={class:"text-[9px] font-mono text-zinc-300 bg-zinc-100 px-1.5 py-0.5 rounded"},vw={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},fw={class:"divide-y divide-gray-50"},xw={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},bw={class:"relative inline-flex items-center cursor-pointer"},mw={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},gw={class:"relative inline-flex items-center cursor-pointer"},hw={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},yw={class:"flex bg-zinc-100 rounded-lg p-1 gap-1"},ww={__name:"ChatSettingsIdentity",props:["chatId"],emits:["back"],setup(e,{emit:t}){const a=e,n=yt(null),l=yt(""),s=Kl(()=>Oi.personas),i=yt({showSelfAvatar:!0,showOtherAvatar:!0,avatarShape:"circle",myActivePersonaId:"",myNicknameOverride:"",myAvatarOverride:"",theirNicknameOverride:"",theirAvatarOverride:"",groupNameOverride:"",groupAvatarOverride:""});Ja(async()=>{const e=qi(a.chatId);if(e){n.value=e;const t=Oi.contacts.find(t=>t.id===e.id);l.value=t?.avatar||e.avatar||"",e.localSettings?(!1===e.localSettings.showAvatars&&(i.value.showSelfAvatar=!1,i.value.showOtherAvatar=!1),i.value={...i.value,...e.localSettings}):i.value.myActivePersonaId=Oi.activePersonaId}});const o=(e,t)=>{const a=e.target.files[0];if(!a)return;const l=new FileReader;l.onload=e=>{const a=e.target.result;"myAvatarOverride"===t?i.value.myAvatarOverride=a:"remote"===t&&("group"===n.value.type||n.value.isGroup?i.value.groupAvatarOverride=a:i.value.theirAvatarOverride=a)},l.readAsDataURL(a)};let r=null;const c=async()=>{if(!n.value)return;let e;try{const t=bt(n.value);e=JSON.parse(JSON.stringify(t))}catch(UI){return}const t={...e,localSettings:{...bt(i.value)}};("group"===n.value.type||n.value.isGroup)&&(i.value.groupNameOverride&&(t.title=i.value.groupNameOverride),i.value.groupAvatarOverride&&(t.avatar=i.value.groupAvatarOverride)),await Fi(t),Object.assign(n.value,t)};ia(i,()=>{r&&clearTimeout(r),r=setTimeout(c,500)},{deep:!0});const d=Kl(()=>n.value?Oi.contacts.find(e=>e.id===n.value.id):null),u=Kl(()=>{if(!n.value)return"https://via.placeholder.com/150";const e="group"===n.value.type||n.value.isGroup?i.value.groupAvatarOverride:i.value.theirAvatarOverride;return e||(d.value?.avatar||n.value.avatar||"https://via.placeholder.com/150")}),p=Kl(()=>{const e=i.value.myActivePersonaId||Oi.activePersonaId;return Oi.personas.find(t=>t.id===e)||Oi.personas[0]||{}}),v=Kl({get:()=>n.value?"group"===n.value.type||n.value.isGroup?i.value.groupNameOverride:i.value.theirNicknameOverride:"",set(e){n.value&&("group"===n.value.type||n.value.isGroup?i.value.groupNameOverride=e:i.value.theirNicknameOverride=e)}}),f=Kl(()=>n.value?.members?n.value.members.map(e=>Oi.contacts.find(t=>t.id===e)).filter(Boolean):[]),x=e=>(i.value.memberOverrides||(i.value.memberOverrides={}),i.value.memberOverrides[e]||(i.value.memberOverrides[e]={nickname:"",avatar:""}),i.value.memberOverrides[e]),b=e=>"square"===e?"rounded-none":"rounded-full";return(e,t)=>(ul(),xl("div",_y,[wl("header",Sy,[wl("div",Iy,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 text-zinc-600 hover:text-black hover:bg-zinc-100 rounded-full transition-all active:scale-95"},[...t[13]||(t[13]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"arrow_back",-1)])]),t[14]||(t[14]=wl("h1",{class:"font-serif text-[15px] font-semibold tracking-wider uppercase text-center text-zinc-800"},"",-1)),t[15]||(t[15]=wl("div",{class:"w-8"},null,-1))])]),n.value?(ul(),xl("main",jy,[wl("div",My,[wl("section",Ey,[wl("div",Ay,[t[17]||(t[17]=wl("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"",-1)),wl("div",Ty,[t[16]||(t[16]=wl("div",{class:"size-1.5 rounded-full bg-emerald-500"},null,-1)),wl("span",Oy,J(kt(Oi).personas.find(e=>e.id===i.value.myActivePersonaId)?.name||""),1)])]),wl("div",$y,[wl("div",Ly,[aa(wl("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.myActivePersonaId=e),class:"w-full appearance-none bg-zinc-50 border border-gray-200 rounded-xl px-4 py-3 text-[13px] font-medium text-zinc-700 outline-none focus:border-zinc-400 focus:bg-white transition-all"},[(ul(!0),xl(sl,null,sn(s.value,e=>(ul(),xl("option",{key:e.id,value:e.id},J(e.name)+" ("+J(e.handle)+") ",9,Ny))),128))],512),[[ai,i.value.myActivePersonaId]]),t[18]||(t[18]=wl("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-[18px] pointer-events-none"},"unfold_more",-1))]),wl("div",Py,[wl("div",Ry,[wl("div",Dy,[wl("img",{src:i.value.myAvatarOverride||p.value?.avatar,class:F(["w-full h-full object-cover",b(i.value.avatarShape)])},null,10,Uy),t[19]||(t[19]=wl("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[wl("span",{class:"material-symbols-outlined text-white text-[20px]"},"photo_camera")],-1))]),wl("input",{type:"file",accept:"image/*",onChange:t[2]||(t[2]=e=>o(e,"myAvatarOverride")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),wl("div",Vy,[wl("div",By,[aa(wl("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.value.myNicknameOverride=e),placeholder:p.value?.handle||p.value?.name,class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,Fy),[[Qs,i.value.myNicknameOverride]]),t[20]||(t[20]=wl("label",{class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},"Display Name",-1))]),wl("div",Gy,[aa(wl("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.value.myAvatarOverride=e),placeholder:"Paste Image URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512),[[Qs,i.value.myAvatarOverride]])])])])])]),wl("section",Ky,[wl("div",Wy,[wl("span",Hy,J("group"===n.value.type||n.value.isGroup?"":""),1)]),wl("div",qy,[wl("div",Jy,[wl("div",Yy,[wl("img",{src:u.value,class:F(["w-full h-full object-cover",b(i.value.avatarShape)])},null,10,Xy),t[21]||(t[21]=wl("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[wl("span",{class:"material-symbols-outlined text-white text-[20px]"},"edit")],-1))]),wl("input",{type:"file",accept:"image/*",onChange:t[5]||(t[5]=e=>o(e,"remote")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),wl("div",Qy,[wl("div",Zy,[aa(wl("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>v.value=e),placeholder:d.value?.handle||d.value?.name||n.value.handle||n.value.title||n.value.name||"",class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,ew),[[Qs,v.value]]),wl("label",tw,J("group"===n.value.type||n.value.isGroup?"Group Name":"Alias (Local)"),1)]),wl("div",aw,["group"===n.value.type||n.value.isGroup?aa((ul(),xl("input",{key:0,type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.value.groupAvatarOverride=e),placeholder:"Group Icon URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[Qs,i.value.groupAvatarOverride]]):aa((ul(),xl("input",{key:1,type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>i.value.theirAvatarOverride=e),placeholder:"Avatar URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[Qs,i.value.theirAvatarOverride]])])])])]),("group"===n.value.type||n.value.isGroup)&&n.value.members?.length?(ul(),xl("section",nw,[t[23]||(t[23]=wl("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[wl("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),wl("div",lw,[(ul(!0),xl(sl,null,sn(f.value,e=>(ul(),xl("div",{key:e.id,class:"p-4 flex items-start gap-3 hover:bg-zinc-50/50 transition-colors group"},[wl("div",sw,[wl("img",{src:i.value.memberOverrides?.[e.id]?.avatar||e.avatar,class:F(["w-full h-full object-cover",b(i.value.avatarShape)])},null,10,iw),t[22]||(t[22]=wl("div",{class:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[wl("span",{class:"material-symbols-outlined text-white text-[14px]"},"edit")],-1)),wl("input",{type:"file",accept:"image/*",onChange:t=>((e,t)=>{const a=e.target.files[0];if(!a)return;const n=new FileReader;n.onload=e=>{const a=e.target.result;x(t).avatar=a},n.readAsDataURL(a)})(t,e.id),class:"absolute inset-0 opacity-0 cursor-pointer z-10",title:""},null,40,ow)]),wl("div",rw,[aa(wl("input",{type:"text","onUpdate:modelValue":t=>x(e.id).nickname=t,placeholder:e.handle||e.name,class:"w-full bg-transparent text-[14px] font-medium text-zinc-800 placeholder:text-zinc-300 focus:outline-none focus:border-b focus:border-zinc-300 transition-colors py-0.5"},null,8,cw),[[Qs,x(e.id).nickname]]),aa(wl("input",{type:"text","onUpdate:modelValue":t=>x(e.id).avatar=t,placeholder:"Avatar URL...",class:"w-full bg-zinc-50/50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded px-2 py-1 text-[10px] text-zinc-500 max-w-[90%] outline-none transition-all placeholder:text-zinc-300"},null,8,dw),[[Qs,x(e.id).avatar]])]),wl("div",uw,[wl("span",pw,J(e.handle),1)])]))),128))])])):Sl("",!0),wl("section",vw,[t[31]||(t[31]=wl("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[wl("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),wl("div",fw,[wl("div",xw,[t[25]||(t[25]=wl("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),wl("label",bw,[aa(wl("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.value.showSelfAvatar=e),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[Zs,i.value.showSelfAvatar]]),t[24]||(t[24]=wl("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),wl("div",mw,[t[27]||(t[27]=wl("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),wl("label",gw,[aa(wl("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.value.showOtherAvatar=e),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[Zs,i.value.showOtherAvatar]]),t[26]||(t[26]=wl("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[wl("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),wl("div",hw,[t[30]||(t[30]=wl("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),wl("div",yw,[wl("button",{onClick:t[11]||(t[11]=e=>i.value.avatarShape="circle"),class:F(["size-7 rounded-md flex items-center justify-center transition-all","circle"===i.value.avatarShape?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...t[28]||(t[28]=[wl("div",{class:"w-3 h-3 rounded-full border-[1.5px] border-current"},null,-1)])],2),wl("button",{onClick:t[12]||(t[12]=e=>i.value.avatarShape="square"),class:F(["size-7 rounded-md flex items-center justify-center transition-all","square"===i.value.avatarShape?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...t[29]||(t[29]=[wl("div",{class:"w-3 h-3 border-[1.5px] border-current rounded-[1px]"},null,-1)])],2)])])])])])])):Sl("",!0)]))}},kw=_o(ww,[["__scopeId","data-v-9a42c415"]]),zw={class:"h-full flex flex-col bg-white text-black font-sans"},Cw={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},_w={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Sw={class:"w-full px-8 pb-32 flex-1 overflow-y-auto"},Iw={class:"mt-8 mb-10 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},jw={class:"text-[14px] text-zinc-600"},Mw={class:"font-bold text-black"},Ew={class:"flex flex-col gap-10"},Aw={class:"flex items-center justify-between py-2 border-b-2 border-black mb-4"},Tw={class:"font-serif text-[18px] tracking-tight font-bold"},Ow={class:"relative inline-flex items-center cursor-pointer"},$w=["checked","onChange"],Lw={class:"noir-toggle-bg w-8 h-4 bg-zinc-200 rounded-full transition-colors duration-300"},Nw={class:"flex flex-col gap-1"},Pw={class:"flex flex-col"},Rw={class:"text-[14px] font-medium group-hover:text-black text-zinc-700 transition-colors"},Dw={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},Uw={class:"relative inline-flex items-center cursor-pointer"},Vw=["checked","disabled","onChange"],Bw={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Fw={key:0,class:"py-2 text-center text-zinc-300 text-[12px] italic"},Gw={__name:"WorldBookSelector",props:["chatId"],emits:["back"],setup(e,{emit:t}){const a=e,n=rc(),l=Kl(()=>qi(a.chatId)),s=yt([]);Ja(()=>{l.value?.localSettings?.mountedWorldbooks&&(s.value=[...l.value.localSettings.mountedWorldbooks])});const i=Kl(()=>n.state.categories),o=Kl(()=>n.state.entries),r=e=>o.value.filter(t=>t.categoryId===e),c=e=>{const t=s.value.indexOf(e);-1===t?s.value.push(e):s.value.splice(t,1),u()},d=e=>s.value.includes(e),u=async()=>{if(l.value){const e=l.value.localSettings||{};await Fi({id:a.chatId,localSettings:{...e,mountedWorldbooks:s.value}})}},p=Kl(()=>o.value.filter(e=>"global"===e.scope).length);return(e,t)=>(ul(),xl("div",zw,[wl("header",Cw,[wl("div",_w,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"flex items-center justify-center -ml-2 w-10 h-10 hover:bg-gray-100 rounded-full transition-colors"},[...t[1]||(t[1]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[2]||(t[2]=wl("h1",{class:"font-serif text-[18px] font-light tracking-[0.15em] uppercase text-center flex-1 pr-8"},"",-1)),t[3]||(t[3]=wl("div",{class:"w-8 hidden"},null,-1))])]),wl("main",Sw,[wl("div",Iw,[t[5]||(t[5]=wl("span",{class:"block text-[12px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),wl("p",jw,[wl("span",Mw,J(p.value),1),t[4]||(t[4]=Cl("  ",-1))])]),wl("div",Ew,[(ul(!0),xl(sl,null,sn(i.value,e=>(ul(),xl("div",{key:e.id,class:"flex flex-col"},[wl("div",Aw,[wl("span",Tw,J(e.name),1),wl("label",Ow,[wl("input",{type:"checkbox",class:"sr-only noir-toggle",checked:d(e.id),onChange:t=>{return a=e.id,void c(a);var a}},null,40,$w),wl("div",Lw,[wl("div",{class:F(["noir-toggle-bg-thumb absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform duration-300 shadow-sm",d(e.id)?"translate-x-4":""])},null,2)])])]),wl("div",Nw,[(ul(!0),xl(sl,null,sn(r(e.id).filter(e=>"local"===e.scope),t=>(ul(),xl("div",{key:t.id,class:"flex items-center justify-between py-3 px-2 hover:bg-gray-50 rounded-lg transition-colors group"},[wl("div",Pw,[wl("span",Rw,J(t.title),1),wl("span",Dw,J(t.isConstant?"Constant":"Trigger")+"  "+J(t.position),1)]),wl("label",Uw,[wl("input",{type:"checkbox",class:"sr-only",checked:d(e.id)||d(t.id),disabled:d(e.id),onChange:a=>!d(e.id)&&c(t.id)},null,40,Vw),wl("div",{class:F(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",d(e.id)||d(t.id)?"bg-black border-black":"bg-transparent"])},[d(e.id)||d(t.id)?(ul(),xl("span",Bw,"check")):Sl("",!0)],2)])]))),128)),0===r(e.id).filter(e=>"local"===e.scope).length?(ul(),xl("div",Fw," No local entries ")):Sl("",!0)])]))),128))]),t[6]||(t[6]=wl("div",{class:"h-20"},null,-1))])]))}},Kw=_o(Gw,[["__scopeId","data-v-623fc9e7"]]),Ww={class:"relationship-network w-full h-full flex flex-col bg-white relative overflow-hidden"},Hw={class:"h-[calc(3.5rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 z-30 bg-white/80 backdrop-blur sticky top-0"},qw={class:"flex items-center w-full justify-between"},Jw={class:"material-symbols-outlined text-zinc-600 text-[20px]"},Yw=["viewBox"],Xw=["onClick"],Qw=["x1","y1","x2","y2"],Zw=["x1","y1","x2","y2","stroke-dasharray"],ek=["x","y"],tk={class:"flex justify-center"},ak={class:"bg-white border border-zinc-200 px-2 py-0.5 rounded-full text-[10px] text-center font-bold text-zinc-500 group-hover:text-black group-hover:border-black transition-colors shadow-sm whitespace-nowrap"},nk={class:"absolute inset-0 w-full h-full pointer-events-none z-20"},lk=["title"],sk=["src"],ik={class:"absolute -bottom-6 bg-black text-white text-[10px] px-3 py-1 rounded-full uppercase font-bold tracking-widest whitespace-nowrap shadow-lg z-30"},ok=["title","onClick"],rk=["src"],ck={class:"absolute top-full mt-3 left-1/2 -translate-x-1/2 text-[11px] text-zinc-700 font-bold whitespace-nowrap bg-white/90 backdrop-blur px-2 py-0.5 rounded border border-zinc-100 shadow-sm z-30 pointer-events-none"},dk={class:"bg-white p-8 shadow-2xl rounded-2xl w-96 max-w-full flex flex-col gap-6 animate-in fade-in zoom-in duration-200"},uk={class:"bg-zinc-50 px-4 py-3 rounded-xl border border-zinc-100 focus-within:border-black focus-within:ring-1 focus-within:ring-black transition-all"},pk={class:"bg-white p-6 shadow-2xl rounded-2xl w-[400px] max-w-full flex flex-col gap-4 max-h-[80vh] animate-in fade-in slide-in-from-bottom-4 duration-300"},vk={class:"flex-1 overflow-y-auto custom-scrollbar px-1 space-y-5"},fk={class:"space-y-2"},xk=["onClick"],bk=["src"],mk={class:"flex flex-col flex-1"},gk={class:"text-sm font-bold text-zinc-900"},hk={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},yk={key:1,class:"ml-2"},wk={key:0,class:"text-[9px] bg-zinc-900 text-white px-2 py-0.5 rounded-full font-bold"},kk={key:0},zk={class:"space-y-2"},Ck=["onClick"],_k=["src"],Sk={class:"flex flex-col flex-1"},Ik={class:"text-sm font-bold text-zinc-900"},jk={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},Mk={key:1,class:"ml-2"},Ek={key:0,class:"text-[9px] bg-zinc-200 text-zinc-600 px-2 py-0.5 rounded-full font-bold"},Ak={class:"flex gap-3 mt-2 shrink-0 pt-4 border-t border-zinc-50"},Tk={key:1,class:"flex-1 py-3 bg-zinc-100 text-zinc-400 font-bold text-sm cursor-default rounded-xl"},Ok={class:"flex flex-col h-full overflow-hidden"},$k={class:"p-5 border-b border-zinc-50 flex justify-between items-center sm:hidden"},Lk={class:"flex-1 p-5 flex flex-col overflow-hidden"},Nk={class:"font-serif text-xs font-bold tracking-widest text-zinc-400 uppercase mb-6 flex justify-between items-center"},Pk={class:"bg-zinc-100 text-zinc-500 px-2 py-0.5 rounded-full text-[10px] font-bold"},Rk={class:"space-y-4 overflow-y-auto flex-1 pr-1 custom-scrollbar pb-10"},Dk=["onClick"],Uk=["src"],Vk={class:"text-sm font-bold text-zinc-700 truncate group-hover:text-black transition-colors"},Bk=["onClick"],Fk={__name:"RelationshipNetwork",emits:["back"],setup(e,{emit:t}){const a=yt(!1),n=yt(null),l=yt(""),s=yt(!1),i=yt(!1),o=yt(null),r=yt(null),c=yt(0),d=yt(0),u=yt(!1),p=yt(0),v=yt(0),f=yt(1),x=1e3,b=e=>{("svg"===e.target.tagName||"DIV"===e.target.tagName||e.target.classList.contains("canvas-area"))&&(u.value=!0,"touchstart"===e.type?(p.value=e.touches[0].clientX,v.value=e.touches[0].clientY):(p.value=e.clientX,v.value=e.clientY))},m=e=>{if(!u.value)return;let t,a;"touchmove"===e.type?(t=e.touches[0].clientX,a=e.touches[0].clientY):(t=e.clientX,a=e.clientY);const n=t-p.value,l=a-v.value;c.value+=n,d.value+=l,p.value=t,v.value=a},g=()=>{u.value=!1};Ja(()=>{c.value=window.innerWidth/2-1e3,d.value=window.innerHeight/2-1e3,window.addEventListener("mousemove",m),window.addEventListener("mouseup",g),window.addEventListener("touchmove",m,{passive:!1}),window.addEventListener("touchend",g)}),Za(()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",m),window.removeEventListener("touchend",g)});const h=Kl(()=>{const e=Oi.personas,t=Oi.relationships,a=Oi.contacts,n=e.map((t,a)=>{const n=a/(e.length||1)*2*Math.PI-Math.PI/2;return{...t,nodeType:"persona",x:x+150*Math.cos(n),y:x+150*Math.sin(n)}}),l=new Set;t.forEach(e=>{l.add(e.sourceId),l.add(e.targetId)});const s=a.filter(e=>l.has(e.id)).map(e=>{const a=t.filter(t=>t.sourceId===e.id||t.targetId===e.id);let l=0,s=350;if(a.length>0){let t=0,i=0,o=0;if(a.forEach(a=>{const l=a.sourceId===e.id?a.targetId:a.sourceId,s=n.find(e=>e.id===l);s&&(t+=s.x-x,i+=s.y-x,o++)}),o>0)l=Math.atan2(i,t),o>1&&(s=250);else{l=e.id.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%360*(Math.PI/180)}}else{l=e.id.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%360*(Math.PI/180)}return{...e,displayName:e.handle||e.nickname||e.name,nodeType:"contact",idealAngle:l,radius:s,x:0,y:0}});s.sort((e,t)=>e.idealAngle-t.idealAngle);for(let r=0;r<s.length;r++){const e=s[r];if(r>0){const t=s[r-1],a=80/e.radius;let n=e.idealAngle-t.idealAngle;for(;n<0;)n+=2*Math.PI;n<a&&(e.idealAngle=t.idealAngle+a)}}s.forEach(e=>{e.x=x+e.radius*Math.cos(e.idealAngle),e.y=x+e.radius*Math.sin(e.idealAngle)});const i=[...n,...s],o=t.map(e=>{const t=i.find(t=>t.id===e.sourceId),a=i.find(t=>t.id===e.targetId);return t&&a?{...e,x1:t.x,y1:t.y,x2:a.x,y2:a.y,isCharChar:"contact"===t.nodeType&&"contact"===a.nodeType}:null}).filter(Boolean);return{personaNodes:n,contactNodes:s,links:o}}),y=async()=>{n.value&&l.value.trim()&&(await Yi(n.value.id,l.value.trim()),s.value=!1,n.value=null)},w=async()=>{n.value&&confirm("")&&(await(async e=>{const t=Oi.relationships.findIndex(t=>t.id===e);-1!==t&&(Oi.relationships.splice(t,1),await zi(ji.RELATIONSHIPS,e))})(n.value.id),s.value=!1,n.value=null)},k=e=>{o.value=e,r.value=null,i.value=!0},z=async()=>{if(o.value&&r.value){if(Oi.relationships.find(e=>e.sourceId===r.value&&e.targetId===o.value||e.sourceId===o.value&&e.targetId===r.value))return void alert("");const e="";await Ji(r.value,o.value,e),i.value=!1,setTimeout(()=>{const t=Oi.relationships.find(t=>t.sourceId===r.value&&t.targetId===o.value&&t.type===e);t&&(n.value=t,l.value="",s.value=!0)},100),o.value=null}},C=(e,t)=>{const a=Oi.relationships.find(a=>a.sourceId===e&&a.targetId===t||a.sourceId===t&&a.targetId===e);return a?a.type:null},_=Kl(()=>Oi.contacts),S=Kl(()=>o.value?Oi.contacts.filter(e=>e.id!==o.value):[]),I=e=>e.handle||e.nickname||e.name;return(e,t)=>(ul(),xl("div",Ww,[wl("header",Hw,[wl("div",qw,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"w-10 h-10 -ml-2 flex items-center justify-center hover:bg-zinc-100/50 rounded-full transition-colors"},[...t[7]||(t[7]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t[8]||(t[8]=wl("span",{class:"font-bold tracking-[0.2em] text-[13px] uppercase text-zinc-900 absolute left-1/2 -translate-x-1/2"}," (NETWORK)",-1)),wl("button",{onClick:t[1]||(t[1]=e=>a.value=!a.value),class:"sm:hidden p-2 -mr-2 rounded-full hover:bg-zinc-100"},[wl("span",Jw,J(a.value?"close":"group_add"),1)]),t[9]||(t[9]=wl("div",{class:"w-10 h-10 hidden sm:block"},null,-1))])]),wl("div",{class:"flex-1 overflow-hidden relative bg-zinc-50 cursor-move",onMousedown:b,onTouchstart:b},[wl("div",{class:"absolute top-0 left-0 w-full h-full canvas-area",style:R({transform:`translate(${c.value}px, ${d.value}px) scale(${f.value})`,transformOrigin:"0 0"})},[wl("div",{class:"relative",style:R({width:"2000px",height:"2000px"})},[t[10]||(t[10]=wl("div",{class:"absolute inset-0 opacity-10 pointer-events-none",style:{"background-image":"radial-gradient(#000 1px, transparent 1px)","background-size":"20px 20px"}},null,-1)),(ul(),xl("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",viewBox:"0 0 2000 2000"},[(ul(!0),xl(sl,null,sn(h.value.links,e=>(ul(),xl("g",{key:e.id,class:"pointer-events-auto cursor-pointer group",onClick:di(t=>(e=>{n.value=e,l.value=e.type,s.value=!0})(e),["stop"])},[wl("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:"transparent","stroke-width":"40"},null,8,Qw),wl("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,class:"stroke-zinc-300 stroke-1 group-hover:stroke-black transition-colors","stroke-dasharray":e.isCharChar?"8 4":"0"},null,8,Zw),(ul(),xl("foreignObject",{x:(e.x1+e.x2)/2-50,y:(e.y1+e.y2)/2-12,width:"100",height:"24",class:"overflow-visible pointer-events-none"},[wl("div",tk,[wl("span",ak,J(e.type),1)])],8,ek))],8,Xw))),128))],8,Yw)),wl("div",nk,[(ul(!0),xl(sl,null,sn(h.value.personaNodes,e=>(ul(),xl("div",{key:e.id,class:"absolute w-20 h-20 -ml-10 -mt-10 rounded-full border-4 border-white ring-1 ring-zinc-200 bg-white flex items-center justify-center shadow-xl pointer-events-auto transition-transform hover:scale-110",style:R({left:`${e.x}px`,top:`${e.y}px`}),title:e.name},[wl("img",{src:e.avatar,class:"w-full h-full rounded-full object-cover"},null,8,sk),wl("div",ik,"  ("+J(e.handle)+") ",1)],12,lk))),128)),(ul(!0),xl(sl,null,sn(h.value.contactNodes,e=>(ul(),xl("div",{key:e.id,class:"absolute w-14 h-14 -ml-7 -mt-7 rounded-full border-2 border-white ring-1 ring-zinc-200 bg-white p-0.5 pointer-events-auto cursor-pointer hover:ring-black hover:shadow-xl transition-all flex items-center justify-center group",style:R({left:`${e.x}px`,top:`${e.y}px`}),title:e.displayName,onClick:di(t=>k(e.id),["stop"])},[wl("img",{src:e.avatar,class:"w-full h-full rounded-full object-cover"},null,8,rk),wl("span",ck,J(e.displayName),1)],12,ok))),128))])],4)],4),t[11]||(t[11]=wl("div",{class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] right-6 text-zinc-300 text-xs font-serif tracking-widest pointer-events-none select-none z-20"}," UNIFIED NETWORK   ",-1))],32),s.value?(ul(),xl("div",{key:0,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:t[3]||(t[3]=di(e=>s.value=!1,["self"]))},[wl("div",dk,[t[12]||(t[12]=wl("div",{class:"text-center"},[wl("h3",{class:"font-bold text-lg text-zinc-900"}," (Define Link)"),wl("p",{class:"text-zinc-500 text-xs mt-1"},"")],-1)),wl("div",uk,[aa(wl("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),ref:"typeInput",placeholder:"...",class:"bg-transparent border-none w-full text-center font-bold text-xl focus:ring-0 p-0 text-zinc-900 placeholder:text-zinc-300",onKeyup:pi(y,["enter"]),autofocus:""},null,544),[[Qs,l.value]])]),wl("div",{class:"grid grid-cols-2 gap-3"},[wl("button",{onClick:w,class:"py-3 bg-white text-red-500 border border-zinc-200 hover:border-red-200 hover:bg-red-50 font-bold text-sm rounded-xl transition-all shadow-sm"},"  "),wl("button",{onClick:y,class:"py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg shadow-zinc-200"},"  ")])])])):Sl("",!0),i.value?(ul(),xl("div",{key:1,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:t[5]||(t[5]=di(e=>i.value=!1,["self"]))},[wl("div",pk,[t[17]||(t[17]=wl("div",{class:"shrink-0 text-center pb-2 border-b border-zinc-50"},[wl("h3",{class:"font-bold text-base text-zinc-900"}," (Connect)")],-1)),wl("div",vk,[wl("div",null,[t[14]||(t[14]=wl("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (ME)",-1)),wl("div",fk,[(ul(!0),xl(sl,null,sn(kt(Oi).personas,e=>(ul(),xl("div",{key:e.id,onClick:t=>r.value=e.id,class:F(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",r.value===e.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[wl("img",{src:e.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,bk),wl("div",mk,[wl("span",gk,J(e.handle),1)]),r.value===e.id?(ul(),xl("div",hk,[...t[13]||(t[13]=[wl("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(ul(),xl("div",yk,[C(o.value,e.id)?(ul(),xl("span",wk,J(C(o.value,e.id)),1)):Sl("",!0)]))],10,xk))),128))])]),S.value.length>0?(ul(),xl("div",kk,[t[16]||(t[16]=wl("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (OTHERS)",-1)),wl("div",zk,[(ul(!0),xl(sl,null,sn(S.value,e=>(ul(),xl("div",{key:e.id,onClick:t=>r.value=e.id,class:F(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",r.value===e.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[wl("img",{src:e.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,_k),wl("div",Sk,[wl("span",Ik,J(I(e)),1)]),r.value===e.id?(ul(),xl("div",jk,[...t[15]||(t[15]=[wl("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(ul(),xl("div",Mk,[C(o.value,e.id)?(ul(),xl("span",Ek,J(C(o.value,e.id)),1)):Sl("",!0)]))],10,Ck))),128))])])):Sl("",!0)]),wl("div",Ak,[wl("button",{onClick:t[4]||(t[4]=e=>i.value=!1),class:"flex-1 py-3 text-zinc-500 bg-white hover:bg-zinc-50 border border-zinc-200 font-bold text-sm rounded-xl transition-colors"},"  "),r.value&&!C(o.value,r.value)?(ul(),xl("button",{key:0,onClick:z,class:"flex-1 py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg hover:shadow-xl"},"  ")):r.value?(ul(),xl("button",Tk,"  ")):Sl("",!0)])])])):Sl("",!0),wl("div",{class:F(["absolute right-0 top-0 bottom-0 pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)] bg-white border-l border-zinc-100 shadow-2xl transition-transform duration-300 transform w-80 z-40 flex flex-col",a.value?"translate-x-0":"translate-x-full sm:translate-x-0"])},[wl("div",Ok,[wl("div",$k,[t[19]||(t[19]=wl("span",{class:"font-bold text-xs text-zinc-500 uppercase tracking-widest"},"Directory",-1)),wl("button",{onClick:t[6]||(t[6]=e=>a.value=!1),class:"p-2 rounded-full hover:bg-zinc-100"},[...t[18]||(t[18]=[wl("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),wl("div",Lk,[wl("h3",Nk,[t[20]||(t[20]=wl("span",null," (ALL)",-1)),wl("span",Pk,J(_.value.length),1)]),wl("div",Rk,[(ul(!0),xl(sl,null,sn(_.value,e=>(ul(),xl("div",{key:e.id,class:"flex items-center justify-between group"},[wl("div",{class:"flex items-center gap-3 overflow-hidden cursor-pointer",onClick:t=>k(e.id)},[wl("img",{src:e.avatar,class:"w-10 h-10 rounded-full border border-zinc-100 object-cover shadow-sm transition-transform group-hover:scale-105"},null,8,Uk),wl("span",Vk,J(I(e)),1)],8,Dk),wl("button",{onClick:t=>k(e.id),class:"w-8 h-8 shrink-0 rounded-full border border-zinc-200 hover:border-black hover:bg-black hover:text-white flex items-center justify-center transition-all shadow-sm active:scale-90 opacity-0 group-hover:opacity-100",title:""},[...t[21]||(t[21]=[wl("span",{class:"material-symbols-outlined text-[16px]"},"all_inclusive",-1)])],8,Bk)]))),128))])]),t[22]||(t[22]=wl("div",{class:"p-4 border-t border-zinc-50 bg-zinc-50/50"},[wl("p",{class:"text-[10px] text-zinc-400 leading-relaxed text-center font-medium"},[Cl(" "),wl("br"),Cl("   ")])],-1))])],2)]))}},Gk=_o(Fk,[["__scopeId","data-v-0cda6011"]]),Kk={class:"h-full flex flex-col bg-white overflow-hidden relative"},Wk={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Hk={class:"flex items-center gap-3"},qk={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},Jk={class:"flex items-center gap-2"},Yk={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},Xk={key:0},Qk={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},Zk=["onClick"],ez={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-110 transition-transform mb-2"},tz={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},az={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},nz={key:0,class:"w-3 h-3 bg-black rounded-full"},lz={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},sz={class:"mb-8 flex items-end justify-between border-b border-zinc-50 pb-4"},iz={class:"flex-1 mr-8"},oz=["value"],rz={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-3 gap-y-8"},cz=["onClick"],dz=["src"],uz={key:0,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},pz={key:0,class:"w-3 h-3 bg-black rounded-full"},vz={key:1,class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},fz={class:"text-center px-1"},xz={class:"text-[11px] font-medium text-zinc-600 truncate leading-tight"},bz={key:0,class:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40 animate-in slide-in-from-bottom-4 duration-200"},mz={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},gz={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},hz={class:"grid grid-cols-2 gap-3"},yz={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},wz={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-2xl p-2"},kz=["onClick"],zz={key:0,class:"material-symbols-outlined text-sm"},Cz={key:0,class:"text-center py-4 text-zinc-400 text-xs"},_z={class:"grid grid-cols-2 gap-3"},Sz=["disabled"],Iz={class:"bg-white w-[420px] max-w-full rounded-[32px] shadow-2xl flex flex-col gap-6 p-8 max-h-[85vh] animate-in zoom-in-95 duration-300 transform transition-all"},jz={class:"text-center mb-8"},Mz={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},Ez={class:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-6"},Az={class:"flex items-center justify-center w-full h-32 border border-dashed border-zinc-200 rounded-2xl cursor-pointer hover:border-black hover:bg-zinc-50 transition-all group"},Tz={class:"mt-8 grid grid-cols-2 gap-3"},Oz=["disabled"],$z={__name:"StickerLibrary",emits:["back"],setup(e,{emit:t}){const a=yt(null),n=yt(!1),l=yt(""),s=yt(!1),i=yt(""),o=yt(!1),r=yt(!1),c=yt(new Set),d=yt(!1),u=yt(""),p=yt(null),v=Kl(()=>Oi.stickerCategories),f=async()=>{l.value.trim()&&(await Qi(l.value.trim(),""),l.value="",n.value=!1)},x=async()=>{confirm("")&&(await Zi(a.value.id),a.value=null)},b=async e=>{const t=e.target.value.trim();t&&t!==a.value.name&&await(async(e,t)=>{const a=Oi.stickerCategories.findIndex(t=>t.id===e);if(-1!==a){const e={...Oi.stickerCategories[a],...t};Oi.stickerCategories[a]=e,await ki(ji.STICKER_CATEGORIES,e)}})(a.value.id,{name:t})},m=Kl(()=>a.value?ao(a.value.id):[]),g=async()=>{if(!i.value.trim())return;o.value=!0;const e=i.value.split("\n");for(const t of e){const e=t.split(/:(.+)/);let n="sticker",l=t.trim();e.length>1&&(n=e[0].trim(),l=e[1].trim()),l&&await eo(a.value.id,l,n)}o.value=!1,i.value="",s.value=!1},h=async e=>{const t=e.target.files;if(t&&0!==t.length){o.value=!0;for(const e of t)if(e.type.startsWith("image/")){const t=new FileReader;await new Promise(n=>{t.onload=async t=>{const l=t.target.result,s=e.name.replace(/\.[^/.]+$/,"");await eo(a.value.id,l,s),n()},t.readAsDataURL(e)})}o.value=!1,s.value=!1}},y=e=>{c.value.has(e)?c.value.delete(e):c.value.add(e)},w=()=>{const e=a.value?m.value:v.value;c.value.size===e.length?c.value.clear():e.forEach(e=>c.value.add(e.id))},k=async()=>{if(0===c.value.size)return;const e=c.value.size,t=a.value?"":"";if(confirm(` ${e} ${t}`)){for(const e of c.value)a.value?await to(e):await Zi(e);c.value.clear(),a.value||(r.value=!1)}},z=()=>{0!==c.value.size&&(d.value=!0,u.value="")},C=async()=>{if(u.value){for(const e of c.value){const t=Oi.stickers.find(t=>t.id===e);t&&(await to(e),await eo(u.value,t.url,t.keyword))}c.value.clear(),r.value=!1,d.value=!1,a.value=null}},_=()=>{if(0===c.value.size)return;const e={version:1,packs:[]};for(const l of c.value){const t=v.value.find(e=>e.id===l);if(t){const a=ao(l);e.packs.push({name:t.name,stickers:a.map(e=>({keyword:e.keyword,url:e.url}))})}}const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`Roche_stickers_export_${Date.now()}.json`,n.click(),URL.revokeObjectURL(a),c.value.clear(),r.value=!1},S=()=>{p.value.click()},I=async e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=async t=>{try{const e=JSON.parse(t.target.result),a=e.packs||(e.name?[e]:[]);if(a.length>0){let e=0;for(const t of a)if(t.name&&Array.isArray(t.stickers)){const a=await Qi(t.name+" (Import)","");for(const e of t.stickers)await eo(a.id,e.url,e.keyword);e++}alert(`Successfully imported ${e} packs.`)}else alert("Invalid sticker pack format.")}catch(a){alert("Failed to parse sticker pack.")}e.target.value=""},a.readAsText(t)};return(e,t)=>(ul(),xl("div",Kk,[wl("div",Wk,[wl("div",Hk,[wl("button",{onClick:t[0]||(t[0]=t=>a.value?a.value=null:e.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[14]||(t[14]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),wl("span",qk,J(a.value?a.value.name:"Sticker Packs"),1)]),wl("div",Jk,[a.value||r.value?r.value?(ul(),xl(sl,{key:1},[wl("button",{onClick:w,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),wl("button",{onClick:t[2]||(t[2]=e=>{r.value=!1,c.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-red-500"},"Cancel")],64)):(ul(),xl("button",{key:2,onClick:t[3]||(t[3]=e=>r.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Stickers"},[...t[17]||(t[17]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])):(ul(),xl(sl,{key:0},[wl("button",{onClick:S,class:"text-[10px] font-bold uppercase tracking-widest px-4 py-2 hover:bg-zinc-50 rounded-full border border-zinc-100 transition-colors flex items-center gap-2"},[...t[15]||(t[15]=[wl("span",{class:"material-symbols-outlined text-[16px]"},"download",-1),wl("span",null,"Import",-1)])]),wl("input",{ref_key:"fileInputRef",ref:p,type:"file",accept:".json",class:"hidden",onChange:I},null,544),wl("button",{onClick:t[1]||(t[1]=e=>r.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Packs"},[...t[16]||(t[16]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64))])]),wl("div",Yk,[a.value?(ul(),xl("div",lz,[wl("div",sz,[wl("div",iz,[wl("input",{value:a.value.name,onChange:b,class:"text-3xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0",placeholder:"Pack Name"},null,40,oz)]),wl("button",{onClick:x,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors",title:"Delete Pack"},[...t[19]||(t[19]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),wl("div",rz,[(ul(!0),xl(sl,null,sn(m.value,e=>(ul(),xl("div",{key:e.id,class:"relative group flex flex-col gap-2",onClick:t=>r.value?y(e.id):null},[wl("div",{class:F(["aspect-square bg-zinc-50 rounded-2xl overflow-hidden border transition-all cursor-pointer relative",c.value.has(e.id)?"border-black ring-2 ring-black ring-offset-2":"border-zinc-50 hover:border-zinc-200"])},[wl("img",{src:e.url,class:"w-full h-full object-cover"},null,8,dz),r.value?(ul(),xl("div",uz,[c.value.has(e.id)?(ul(),xl("div",pz)):Sl("",!0)])):(ul(),xl("div",vz,[...t[20]||(t[20]=[wl("span",{class:"material-symbols-outlined text-white"},"visibility",-1)])]))],2),wl("div",fz,[wl("p",xz,J(e.keyword),1)])],8,cz))),128)),r.value?Sl("",!0):(ul(),xl("button",{key:0,onClick:t[5]||(t[5]=e=>s.value=!0),class:"aspect-square rounded-2xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-1"},[...t[21]||(t[21]=[wl("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"add",-1),wl("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"Add",-1)])]))])])):(ul(),xl("div",Xk,[wl("div",Qk,[(ul(!0),xl(sl,null,sn(v.value,e=>(ul(),xl("div",{key:e.id,class:F(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border-2",c.value.has(e.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:t=>(e=>{r.value?y(e.id):(a.value=e,r.value=!1,c.value=new Set)})(e)},[wl("span",ez,J(e.name),1),wl("div",tz,J(kt(ao)(e.id).length)+" stickers",1),r.value?(ul(),xl("div",az,[c.value.has(e.id)?(ul(),xl("div",nz)):Sl("",!0)])):Sl("",!0)],10,Zk))),128)),r.value?Sl("",!0):(ul(),xl("button",{key:0,onClick:t[4]||(t[4]=e=>n.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...t[18]||(t[18]=[wl("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2"},"add",-1),wl("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))])]))]),r.value&&c.value.size>0?(ul(),xl("div",bz,[wl("span",mz,J(c.value.size)+" Selected",1),t[25]||(t[25]=wl("div",{class:"h-4 w-px bg-white/20"},null,-1)),a.value?(ul(),xl("button",{key:1,onClick:z,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...t[23]||(t[23]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),wl("span",{class:"text-[11px] font-bold"},"Move",-1)])])):(ul(),xl("button",{key:0,onClick:_,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...t[22]||(t[22]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"ios_share",-1),wl("span",{class:"text-[11px] font-bold"},"Export Items",-1)])])),t[26]||(t[26]=wl("div",{class:"h-4 w-px bg-white/20"},null,-1)),wl("button",{onClick:k,class:"flex items-center gap-2 hover:text-red-300 transition-colors"},[...t[24]||(t[24]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1),wl("span",{class:"text-[11px] font-bold"},"Delete",-1)])])])):Sl("",!0),(ul(),bl(ha,{to:"body"},[n.value?(ul(),xl("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:t[8]||(t[8]=di(e=>n.value=!1,["self"]))},[wl("div",gz,[t[27]||(t[27]=wl("div",{class:"text-center"},[wl("h3",{class:"font-serif italic text-2xl mb-1"},"New Sticker Pack"),wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new collection")],-1)),aa(wl("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.value=e),placeholder:"Name your pack...",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:pi(f,["enter"])},null,544),[[Qs,l.value]]),wl("div",hz,[wl("button",{onClick:t[7]||(t[7]=e=>n.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),wl("button",{onClick:f,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[d.value?(ul(),xl("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:t[10]||(t[10]=di(e=>d.value=!1,["self"]))},[wl("div",yz,[t[28]||(t[28]=wl("div",{class:"text-center"},[wl("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),wl("div",wz,[(ul(!0),xl(sl,null,sn(v.value.filter(e=>e.id!==a.value.id),e=>(ul(),xl("button",{key:e.id,onClick:t=>u.value=e.id,class:F(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",u.value===e.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[wl("span",null,J(e.name),1),u.value===e.id?(ul(),xl("span",zz,"check")):Sl("",!0)],10,kz))),128)),v.value.length<=1?(ul(),xl("div",Cz,"No other packs available")):Sl("",!0)]),wl("div",_z,[wl("button",{onClick:t[9]||(t[9]=e=>d.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),wl("button",{onClick:C,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!u.value}," Move ",8,Sz)])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[s.value?(ul(),xl("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:t[13]||(t[13]=di(e=>s.value=!1,["self"]))},[wl("div",Iz,[wl("div",jz,[t[29]||(t[29]=wl("h3",{class:"font-serif italic text-2xl mb-1"},"Add Stickers",-1)),wl("p",Mz,J(a.value.name),1)]),wl("div",Ez,[wl("div",null,[wl("label",Az,[t[30]||(t[30]=wl("div",{class:"flex flex-col items-center gap-2"},[wl("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-white group-hover:shadow-md transition-all"},[wl("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black"},"cloud_upload")]),wl("span",{class:"text-[10px] font-bold text-zinc-400 group-hover:text-black uppercase tracking-widest"},"Upload Images")],-1)),wl("input",{type:"file",class:"hidden",multiple:"",accept:"image/*",onChange:h},null,32)])]),t[32]||(t[32]=wl("div",{class:"flex items-center gap-4"},[wl("div",{class:"h-px bg-zinc-100 flex-1"}),wl("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"OR"),wl("div",{class:"h-px bg-zinc-100 flex-1"})],-1)),wl("div",null,[t[31]||(t[31]=wl("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 block"},"Batch Import URLs",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.value=e),rows:"4",class:"w-full bg-zinc-50 rounded-2xl p-4 text-xs font-mono border-none focus:ring-1 focus:ring-black resize-none placeholder:text-zinc-300 outline-none",placeholder:"happy:http://example.com/happy.jpg\nsad:http://example.com/sad.jpg"},null,512),[[Qs,i.value]])])]),wl("div",Tz,[wl("button",{onClick:t[12]||(t[12]=e=>s.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),wl("button",{onClick:g,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:o.value},J(o.value?"Processing...":"Confirm"),9,Oz)])])])):Sl("",!0)]))]))}},Lz={class:"h-full flex flex-col bg-white overflow-hidden relative"},Nz={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Pz={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},Rz={class:"w-full aspect-[1.586] bg-black rounded-[24px] p-8 text-white flex flex-col justify-between shadow-2xl relative overflow-hidden mb-8 group"},Dz={class:"relative z-10"},Uz={class:"font-serif text-4xl font-bold tracking-tight"},Vz={class:"grid grid-cols-2 gap-4 mb-8"},Bz={class:"flex flex-col"},Fz={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Gz={class:"text-xs text-red-500 text-center h-4 mb-6"},Kz={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Wz={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},Hz={key:0},qz={key:1,class:"text-center text-red-500 text-xs mb-4"},Jz={class:"text-xs text-red-500 text-center h-4 mb-6"},Yz={class:"grid grid-cols-2 gap-3"},Xz=["disabled"],Qz={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Zz={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},eC={class:"space-y-4 mb-6"},tC={class:"text-xs text-red-500 text-center h-4 mb-6"},aC={class:"bg-white w-full max-w-md rounded-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-300"},nC={class:"px-6 py-4 border-b border-zinc-50 flex items-center gap-4 bg-zinc-50/50"},lC={class:"relative group"},sC={class:"flex-1 flex bg-zinc-100 p-1 rounded-lg"},iC={class:"flex-1 overflow-y-auto custom-scrollbar p-0"},oC={key:0,class:"flex flex-col items-center justify-center h-64 text-zinc-300 gap-2"},rC={key:1,class:"divide-y divide-zinc-50"},cC={class:"flex flex-col"},dC={class:"font-bold text-sm"},uC={class:"text-[10px] text-zinc-400 mt-1"},pC={__name:"Wallet",emits:["back"],setup(e,{emit:t}){const a=yt(null),n=yt(""),l=yt(""),s=yt(""),i=yt(""),o=Kl(()=>Oi.wallet.balance.toFixed(2)),r=Kl(()=>Oi.wallet.hasPassword),c=Kl(()=>Oi.wallet.transactions),d=new Date,u=yt(`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`),p=yt("all"),v=Kl(()=>c.value.filter(e=>{const t=new Date(e.timestamp),a=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`===u.value;let n=!0;return"deposit"===p.value&&(n="deposit"===e.type),"withdraw"===p.value&&(n="withdraw"===e.type),a&&n})),f=e=>{a.value=e,n.value="",l.value="",s.value="",i.value=""},x=()=>{a.value=null},b=()=>{const e=parseFloat(n.value);!e||e<=0?i.value="Please enter a valid amount":(Ni("deposit",e,"Account Deposit"),x())},m=()=>{const e=parseFloat(n.value);!e||e<=0?i.value="Please enter a valid amount":e>Oi.wallet.balance?i.value="Insufficient balance":r.value?Ri(l.value)?(Ni("withdraw",e,"Withdrawal"),x()):i.value="Incorrect password":i.value="Please set a payment password first"},g=()=>{var e;6!==l.value.length||isNaN(l.value)?i.value="Password must be 6 digits":l.value===s.value?(e=l.value,Oi.wallet.password=e,Oi.wallet.hasPassword=!0,Li(),x()):i.value="Passwords do not match"};return(e,t)=>(ul(),xl("div",Lz,[wl("div",Nz,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2 mr-2"},[...t[14]||(t[14]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t[15]||(t[15]=wl("span",{class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},"My Wallet",-1))]),wl("div",Pz,[wl("div",Rz,[t[17]||(t[17]=wl("div",{class:"absolute -right-20 -top-20 w-64 h-64 bg-zinc-800/30 rounded-full blur-3xl group-hover:bg-zinc-700/30 transition-colors duration-500"},null,-1)),t[18]||(t[18]=wl("div",{class:"flex items-center justify-between relative z-10"},[wl("span",{class:"font-serif italic text-lg opacity-80"},"Noir Card"),wl("span",{class:"material-symbols-outlined opacity-50"},"contactless")],-1)),wl("div",Dz,[t[16]||(t[16]=wl("div",{class:"text-[11px] uppercase tracking-[0.2em] opacity-60 mb-1"},"Total Balance",-1)),wl("div",Uz," "+J(o.value),1)]),t[19]||(t[19]=wl("div",{class:"flex items-center justify-between text-[10px] uppercase tracking-widest opacity-60 relative z-10"},[wl("span",null,"**** 8848"),wl("span",null,"Noir Inc.")],-1))]),wl("div",Vz,[wl("button",{onClick:t[1]||(t[1]=e=>f("recharge")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...t[20]||(t[20]=[wl("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"add_card",-1),wl("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Top Up",-1)])]),wl("button",{onClick:t[2]||(t[2]=e=>f("withdraw")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...t[21]||(t[21]=[wl("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"payments",-1),wl("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Withdraw",-1)])])]),wl("div",Bz,[wl("button",{onClick:t[3]||(t[3]=e=>f("history")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...t[22]||(t[22]=[wl("div",{class:"flex items-center gap-4"},[wl("span",{class:"material-symbols-outlined text-zinc-400"},"receipt_long"),wl("span",{class:"text-[15px] font-medium"},"Transaction History")],-1),wl("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])]),wl("button",{onClick:t[4]||(t[4]=e=>f("password")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...t[23]||(t[23]=[wl("div",{class:"flex items-center gap-4"},[wl("span",{class:"material-symbols-outlined text-zinc-400"},"lock"),wl("span",{class:"text-[15px] font-medium"},"Payment Security")],-1),wl("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])])])]),(ul(),bl(ha,{to:"body"},["recharge"===a.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:di(x,["self"])},[wl("div",Fz,[t[24]||(t[24]=wl("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Top Up",-1)),t[25]||(t[25]=wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},"Add funds to wallet",-1)),aa(wl("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.value=e),type:"number",placeholder:"0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-2 bg-transparent",autofocus:""},null,512),[[Qs,n.value]]),wl("div",Gz,J(i.value),1),wl("div",{class:"grid grid-cols-2 gap-3"},[wl("button",{onClick:x,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),wl("button",{onClick:b,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},["withdraw"===a.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:di(x,["self"])},[wl("div",Kz,[t[27]||(t[27]=wl("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Withdraw",-1)),wl("p",Wz,"Available: "+J(o.value),1),aa(wl("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.value=e),type:"number",placeholder:"Amount",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-6 bg-transparent"},null,512),[[Qs,n.value]]),r.value?(ul(),xl("div",Hz,[t[26]||(t[26]=wl("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 mb-2"},"Payment Password",-1)),aa(wl("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.value=e),type:"password",maxlength:"6",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black mb-2"},null,512),[[Qs,l.value]])])):(ul(),xl("div",qz,"Please set password first")),wl("div",Jz,J(i.value),1),wl("div",Yz,[wl("button",{onClick:x,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),wl("button",{onClick:m,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg",disabled:!r.value},"Confirm",8,Xz)])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},["password"===a.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:di(x,["self"])},[wl("div",Qz,[t[28]||(t[28]=wl("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Security",-1)),wl("p",Zz,J(r.value?"Change Password":"Set Payment Password"),1),wl("div",eC,[wl("div",null,[aa(wl("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.value=e),type:"password",maxlength:"6",placeholder:"New Password (6 digits)",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[Qs,l.value]])]),wl("div",null,[aa(wl("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.value=e),type:"password",maxlength:"6",placeholder:"Confirm Password",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[Qs,s.value]])])]),wl("div",tC,J(i.value),1),wl("div",{class:"grid grid-cols-2 gap-3"},[wl("button",{onClick:x,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),wl("button",{onClick:g,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Save")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},["history"===a.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:di(x,["self"])},[wl("div",aC,[wl("div",{class:"p-6 border-b border-zinc-50 flex items-center justify-between shrink-0"},[t[30]||(t[30]=wl("h3",{class:"font-serif italic text-2xl"},"Transactions",-1)),wl("button",{onClick:x,class:"w-8 h-8 flex items-center justify-center bg-zinc-50 rounded-full hover:bg-zinc-100"},[...t[29]||(t[29]=[wl("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),wl("div",nC,[wl("div",lC,[aa(wl("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>u.value=e),type:"month",class:"pl-8 pr-3 py-1.5 rounded-lg bg-white border border-zinc-200 text-xs font-bold uppercase tracking-wider focus:outline-none focus:border-black cursor-pointer w-32"},null,512),[[Qs,u.value]]),t[31]||(t[31]=wl("span",{class:"material-symbols-outlined text-[16px] absolute left-2 top-1.5 text-zinc-400 pointer-events-none"},"calendar_month",-1))]),wl("div",sC,[wl("button",{onClick:t[11]||(t[11]=e=>p.value="all"),class:F(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all","all"===p.value?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-black"])},"All",2),wl("button",{onClick:t[12]||(t[12]=e=>p.value="deposit"),class:F(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all","deposit"===p.value?"bg-white shadow-sm text-green-600":"text-zinc-400 hover:text-black"])},"Income",2),wl("button",{onClick:t[13]||(t[13]=e=>p.value="withdraw"),class:F(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all","withdraw"===p.value?"bg-white shadow-sm text-red-600":"text-zinc-400 hover:text-black"])},"Expense",2)])]),wl("div",iC,[0===v.value.length?(ul(),xl("div",oC,[...t[32]||(t[32]=[wl("span",{class:"material-symbols-outlined text-4xl"},"event_busy",-1),wl("span",{class:"text-[10px] uppercase tracking-widest"},"No matching records",-1)])])):(ul(),xl("div",rC,[(ul(!0),xl(sl,null,sn(v.value,e=>{return ul(),xl("div",{key:e.id,class:"flex items-center justify-between p-6 hover:bg-zinc-50 transition-colors"},[wl("div",cC,[wl("span",dC,J(e.title),1),wl("span",uC,J((t=e.timestamp,new Date(t).toLocaleString())),1)]),wl("span",{class:F(["font-mono font-bold","deposit"===e.type?"text-green-600":"text-black"])},J("deposit"===e.type?"+":"-")+" "+J(e.amount.toFixed(2)),3)]);var t}),128))]))])])])):Sl("",!0)]))]))}},vC={class:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100 pb-6 z-[60]"},fC={class:"max-w-7xl mx-auto flex items-center justify-around h-16 px-4 w-full"},xC=["onClick"],bC={key:0,class:"w-10 h-10 bg-zinc-50 rounded-lg text-black hover:bg-zinc-100 flex items-center justify-center"},mC=_o({__name:"Navigation",props:["activeTab"],emits:["change"],setup(e,{emit:t}){const a=t,n=[{id:"feed",icon:"home",customSvg:!0},{id:"inbox",icon:"mail"},{id:"compose",icon:"add",isAction:!0},{id:"activity",icon:"favorite"},{id:"profile",icon:"person"}];return(t,l)=>(ul(),xl("nav",vC,[wl("div",fC,[(ul(),xl(sl,null,sn(n,t=>wl("button",{key:t.id,onClick:e=>{return n=t.id,void a("change",n);var n},class:F(["flex items-center justify-center w-12 transition-colors",[t.isAction?"":e.activeTab===t.id?"text-black":"text-zinc-400 hover:text-black"]])},[t.isAction?(ul(),xl("div",bC,[...l[0]||(l[0]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])):t.customSvg?(ul(),xl("svg",{key:1,width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:F({"nav-icon-active":e.activeTab===t.id})},[...l[1]||(l[1]=[wl("path",{d:"M3 10.5L12 3L21 10.5"},null,-1),wl("path",{d:"M5 9.5V19C5 19.5523 5.44772 20 6 20H18C18.5523 20 19 19.5523 19 19V9.5"},null,-1)])],2)):(ul(),xl("span",{key:2,class:F(["material-symbols-outlined text-[26px]",{"active-icon":e.activeTab===t.id}])},J(t.icon),3))],10,xC)),64))])]))}},[["__scopeId","data-v-0d87dcee"]]),gC={class:"h-full flex flex-col bg-white overflow-hidden relative font-sans text-black"},hC={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},yC={class:"flex items-center gap-3"},wC={class:"flex flex-col"},kC={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900 max-w-[200px] truncate"},zC={class:"flex items-center gap-2"},CC={key:0,class:"px-6 pt-2 pb-0 bg-white z-10"},_C={class:"flex items-center p-1.5 bg-zinc-100 rounded-full border border-zinc-200/50"},SC={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},IC={key:0},jC={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},MC=["onClick"],EC={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-105 transition-transform mb-2"},AC={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},TC={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center shadow-sm"},OC={key:0,class:"w-2.5 h-2.5 bg-black rounded-full"},$C={key:0,class:"mt-20 text-center text-zinc-300"},LC={class:"text-xs uppercase tracking-widest"},NC={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},PC={class:"mb-6 flex items-end justify-between border-b border-zinc-100 pb-4 pt-2 -mt-2"},RC={class:"flex-1 mr-8"},DC=["value"],UC={class:"text-[10px] text-zinc-400 uppercase tracking-widest block mt-1"},VC={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},BC=["onClick"],FC={class:"h-[100px] bg-zinc-100 flex items-center justify-center border-b border-zinc-100 relative p-3 overflow-hidden"},GC=["innerHTML"],KC={key:0,class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},WC=["onClick"],HC={key:1,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center shadow-sm z-10"},qC={key:0,class:"w-2.5 h-2.5 bg-black rounded-full"},JC={class:"p-3"},YC={class:"font-bold text-[13px] truncate text-zinc-800"},XC={class:"text-[10px] text-zinc-400 font-mono mt-0.5 block truncate opacity-70"},QC={key:1,class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 bg-zinc-900 text-white pl-3 pr-3 py-1.5 rounded-full shadow-2xl flex items-center gap-3 z-40 animate-in slide-in-from-bottom-4 duration-200"},ZC={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-400"},e_={class:"bg-white w-full max-w-sm rounded-[24px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all border border-zinc-100"},t_={class:"text-center"},a_={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},n_={class:"text-black font-bold"},l_={class:"grid grid-cols-2 gap-3"},s_={class:"bg-white w-[420px] max-w-full rounded-[28px] shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 transform transition-all border border-zinc-100 overflow-hidden relative"},i_={class:"overflow-y-auto custom-scrollbar p-6 flex flex-col gap-5"},o_={class:"text-center mb-1"},r_={class:"font-sans font-bold text-xl mb-1 text-black tracking-tight"},c_={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},d_={class:"space-y-4"},u_={class:"space-y-1"},p_={class:"space-y-1"},v_={class:"space-y-1"},f_={class:"bg-zinc-50 rounded-xl p-6 flex items-center justify-center min-h-[100px] border border-dashed border-zinc-200 relative overflow-hidden"},x_=["innerHTML"],b_={key:1,class:"text-zinc-300 text-[10px] font-bold uppercase tracking-widest"},m_={class:"grid grid-cols-2 gap-3 mt-4"},g_={class:"bg-white w-full max-w-sm rounded-[24px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},h_={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-xl p-2"},y_=["onClick"],w_={key:0,class:"material-symbols-outlined text-sm"},k_={key:0,class:"text-center py-4 text-zinc-400 text-xs"},z_={class:"grid grid-cols-2 gap-3"},C_=["disabled"],__=_o({__name:"RegexManager",emits:["back"],setup(e,{emit:t}){const a=yt("global"),n=yt(null),l=yt(!1),s=yt(""),i=yt(!1),o=yt(null),r=yt({name:"",regex:"",html:""}),c=yt(!1),d=yt(new Set),u=yt(!1),p=yt(""),v=yt(null),f=Kl(()=>Oi.regexCategories.filter(e=>e.scope===a.value||!e.scope&&"local"===a.value)),x=Kl(()=>n.value?Co(n.value.id):[]),b=e=>{a.value=e,n.value=null,c.value=!1,d.value.clear()},m=async()=>{s.value.trim()&&(await ho(s.value.trim(),a.value),s.value="",l.value=!1)},g=async e=>{const t=e.target.value.trim();t&&t!==n.value.name&&await(async(e,t)=>{const a=Oi.regexCategories.findIndex(t=>t.id===e);if(-1!==a){const e={...Oi.regexCategories[a],...t};Oi.regexCategories[a]=e,await ki(ji.REGEX_CATEGORIES,e)}})(n.value.id,{name:t})},h=async()=>{confirm("Delete this category and all its cards?")&&(await yo(n.value.id),n.value=null)},y=(e=null)=>{e?(o.value=e,r.value={...e}):(o.value=null,r.value={name:"",regex:"",html:""}),i.value=!0},w=async()=>{if(!r.value.name)return;const e={categoryId:n.value.id,name:r.value.name,regex:r.value.regex,html:r.value.html};o.value?await ko(o.value.id,e):await wo(e),i.value=!1},k=e=>{d.value.has(e)?d.value.delete(e):d.value.add(e)},z=()=>{const e=n.value?x.value:f.value;d.value.size===e.length?d.value.clear():e.forEach(e=>d.value.add(e.id))},C=async()=>{if(0===d.value.size)return;const e=d.value.size;if(confirm(`Delete ${e} selected items?`)){for(const e of d.value)n.value?await zo(e):await yo(e);d.value.clear(),n.value||(c.value=!1)}},_=()=>{0!==d.value.size&&(u.value=!0,p.value="")},S=async()=>{if(p.value){for(const e of d.value){Oi.regexEntries.find(t=>t.id===e)&&await ko(e,{categoryId:p.value})}d.value.clear(),c.value=!1,u.value=!1}},I=()=>{if(0===d.value.size)return;const e={version:1,categories:[]};if(n.value){const t=x.value.filter(e=>d.value.has(e.id));e.categories.push({name:n.value.name,scope:n.value.scope,entries:t})}else for(const n of d.value){const t=f.value.find(e=>e.id===n);if(t){const a=Co(n);e.categories.push({name:t.name,scope:t.scope,entries:a})}}const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),l=document.createElement("a");l.href=a,l.download=`noir_regex_export_${Date.now()}.json`,l.click(),URL.revokeObjectURL(a),d.value.clear(),c.value=!1},j=()=>{v.value.click()},M=async e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=async t=>{try{const e=JSON.parse(t.target.result),n=e.categories||(e.category?[e]:[]);if(n.length>0){let e=0;for(const t of n){const n=await ho(t.name+" (Import)",a.value);if(t.entries&&Array.isArray(t.entries))for(const e of t.entries)await wo({categoryId:n.id,name:e.name,regex:e.regex,html:e.html});e++}alert(`Successfully imported ${e} categories.`)}else alert("Invalid regex format.")}catch(n){alert("Failed to parse file.")}e.target.value=""},n.readAsText(t)};return(e,t)=>(ul(),xl("div",gC,[wl("div",hC,[wl("div",yC,[wl("button",{onClick:t[0]||(t[0]=t=>n.value?n.value=null:e.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[18]||(t[18]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),wl("div",wC,[wl("span",kC,J(n.value?n.value.name:"Regex Manager"),1)])]),wl("div",zC,[n.value||c.value?c.value?(ul(),xl(sl,{key:1},[wl("button",{onClick:z,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),wl("button",{onClick:t[2]||(t[2]=e=>{c.value=!1,d.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-zinc-400 hover:text-zinc-600"},"Cancel")],64)):(ul(),xl("button",{key:2,onClick:t[3]||(t[3]=e=>c.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select"},[...t[21]||(t[21]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])):(ul(),xl(sl,{key:0},[wl("button",{onClick:j,class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Import"},[...t[19]||(t[19]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"download",-1)])]),wl("input",{ref_key:"fileInputRef",ref:v,type:"file",accept:".json",class:"hidden",onChange:M},null,544),wl("button",{onClick:t[1]||(t[1]=e=>c.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select"},[...t[20]||(t[20]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64))])]),n.value?Sl("",!0):(ul(),xl("div",CC,[wl("div",_C,[wl("button",{onClick:t[4]||(t[4]=e=>b("global")),class:F(["flex-1 flex flex-col items-center justify-center py-2.5 rounded-full transition-all duration-200","global"===a.value?"bg-white shadow-sm text-black ring-1 ring-black/5":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-200/50"])},[...t[22]||(t[22]=[wl("div",{class:"flex flex-col leading-none gap-0.5"},[wl("span",{class:"text-[12px] font-bold uppercase tracking-wider"},"Global"),wl("span",{class:"text-[9px] opacity-40 font-normal scale-90"},"Apply Everywhere")],-1)])],2),wl("button",{onClick:t[5]||(t[5]=e=>b("local")),class:F(["flex-1 flex flex-col items-center justify-center py-2.5 rounded-full transition-all duration-200","local"===a.value?"bg-white shadow-sm text-black ring-1 ring-black/5":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-200/50"])},[...t[23]||(t[23]=[wl("div",{class:"flex flex-col leading-none gap-0.5"},[wl("span",{class:"text-[12px] font-bold uppercase tracking-wider"},"Local"),wl("span",{class:"text-[9px] opacity-40 font-normal scale-90"},"Mount per Chat")],-1)])],2)]),t[24]||(t[24]=wl("div",{class:"h-px w-full bg-zinc-100 mt-4"},null,-1))])),wl("div",SC,[n.value?(ul(),xl("div",NC,[wl("div",PC,[wl("div",RC,[wl("input",{value:n.value.name,onChange:g,class:"text-2xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0 text-zinc-900",placeholder:"Pack Name"},null,40,DC),wl("span",UC,J(a.value)+" Pack  "+J(x.value.length)+" Cards",1)]),wl("button",{onClick:h,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-300 hover:text-black transition-colors"},[...t[27]||(t[27]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),wl("div",VC,[(ul(!0),xl(sl,null,sn(x.value,e=>(ul(),xl("div",{key:e.id,class:F(["relative group rounded-xl bg-white border border-zinc-100 shadow-sm hover:shadow-md transition-all overflow-hidden",d.value.has(e.id)?"ring-1 ring-black":""]),onClick:t=>c.value?k(e.id):null},[wl("div",FC,[wl("div",{class:"w-full h-full flex items-center justify-center pointer-events-none select-none origin-center scale-[0.7] entry-preview",innerHTML:e.html},null,8,GC),c.value?Sl("",!0):(ul(),xl("div",KC,[wl("button",{onClick:di(t=>y(e),["stop"]),class:"p-1.5 bg-white rounded-full shadow-sm hover:bg-zinc-100 text-zinc-600"},[...t[28]||(t[28]=[wl("span",{class:"material-symbols-outlined text-[14px]"},"edit",-1)])],8,WC)])),c.value?(ul(),xl("div",HC,[d.value.has(e.id)?(ul(),xl("div",qC)):Sl("",!0)])):Sl("",!0)]),wl("div",JC,[wl("h4",YC,J(e.name),1),wl("code",XC,J(e.regex),1)])],10,BC))),128)),c.value?Sl("",!0):(ul(),xl("button",{key:0,onClick:t[7]||(t[7]=e=>y()),class:"min-h-[180px] rounded-xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-2 group"},[...t[29]||(t[29]=[wl("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"add",-1),wl("span",{class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black transition-colors"},"Add Card",-1)])]))])])):(ul(),xl("div",IC,[wl("div",jC,[(ul(!0),xl(sl,null,sn(f.value,e=>(ul(),xl("div",{key:e.id,class:F(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border",d.value.has(e.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:t=>(e=>{c.value?k(e.id):(n.value=e,c.value=!1,d.value=new Set)})(e)},[wl("span",EC,J(e.name),1),wl("div",AC,J(kt(Co)(e.id).length)+" cards",1),c.value?(ul(),xl("div",TC,[d.value.has(e.id)?(ul(),xl("div",OC)):Sl("",!0)])):Sl("",!0)],10,MC))),128)),c.value?Sl("",!0):(ul(),xl("button",{key:0,onClick:t[6]||(t[6]=e=>l.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...t[25]||(t[25]=[wl("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2 text-[32px]"},"add",-1),wl("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))]),0!==f.value.length||c.value?Sl("",!0):(ul(),xl("div",$C,[t[26]||(t[26]=wl("span",{class:"material-symbols-outlined text-[48px] mb-2 opacity-20"},"style",-1)),wl("p",LC,"No categories in "+J(a.value),1)]))]))]),c.value&&d.value.size>0?(ul(),xl("div",QC,[wl("span",ZC,J(d.value.size),1),t[33]||(t[33]=wl("div",{class:"h-3 w-px bg-zinc-700"},null,-1)),wl("button",{onClick:I,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Export"},[...t[30]||(t[30]=[wl("span",{class:"material-symbols-outlined text-[16px]"},"ios_share",-1)])]),n.value?(ul(),xl("button",{key:0,onClick:_,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Move"},[...t[31]||(t[31]=[wl("span",{class:"material-symbols-outlined text-[16px]"},"drive_file_move",-1)])])):Sl("",!0),wl("button",{onClick:C,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Delete"},[...t[32]||(t[32]=[wl("span",{class:"material-symbols-outlined text-[16px]"},"delete",-1)])])])):Sl("",!0),(ul(),bl(ha,{to:"body"},[l.value?(ul(),xl("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:t[10]||(t[10]=di(e=>l.value=!1,["self"]))},[wl("div",e_,[wl("div",t_,[t[35]||(t[35]=wl("h3",{class:"font-serif italic text-2xl mb-1"},"New Pack",-1)),wl("p",a_,[t[34]||(t[34]=Cl("Create a regex collection in ",-1)),wl("span",n_,J(a.value),1)])]),aa(wl("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.value=e),placeholder:"Pack Name...",class:"w-full bg-zinc-50 border-none rounded-xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:pi(m,["enter"])},null,544),[[Qs,s.value]]),wl("div",l_,[wl("button",{onClick:t[9]||(t[9]=e=>l.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),wl("button",{onClick:m,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[i.value?(ul(),xl("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:t[15]||(t[15]=di(e=>i.value=!1,["self"]))},[wl("div",s_,[wl("div",i_,[wl("div",o_,[wl("h3",r_,J(o.value?"Edit Card":"New Card"),1),wl("p",c_,J(n.value.name),1)]),wl("div",d_,[wl("div",u_,[t[36]||(t[36]=wl("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest ml-1"},"Name",-1)),aa(wl("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.value.name=e),type:"text",placeholder:"e.g. Bold Text",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 focus:ring-1 focus:ring-black transition-all outline-none text-sm"},null,512),[[Qs,r.value.name]])]),wl("div",p_,[t[37]||(t[37]=wl("div",{class:"flex justify-between px-1"},[wl("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest"},"Regex"),wl("a",{href:"https://regex101.com/",target:"_blank",class:"text-[9px] font-bold text-zinc-400 hover:text-black hover:underline transition-colors"},"Open Regex101 ")],-1)),aa(wl("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>r.value.regex=e),type:"text",placeholder:"^\\d+$",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 font-mono text-sm focus:ring-1 focus:ring-black transition-all outline-none"},null,512),[[Qs,r.value.regex]])]),wl("div",v_,[t[38]||(t[38]=wl("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest ml-1"},"HTML Template",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>r.value.html=e),rows:"4",placeholder:"<div>Content</div>",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 font-mono text-sm focus:ring-1 focus:ring-black transition-all resize-none outline-none"},null,512),[[Qs,r.value.html]])]),wl("div",f_,[r.value.html?(ul(),xl("div",{key:0,innerHTML:r.value.html},null,8,x_)):(ul(),xl("span",b_,"Preview Output"))])]),wl("div",m_,[wl("button",{onClick:t[14]||(t[14]=e=>i.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),wl("button",{onClick:w,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},J(o.value?"Save":"Create"),1)])])])])):Sl("",!0)])),(ul(),bl(ha,{to:"body"},[u.value?(ul(),xl("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:t[17]||(t[17]=di(e=>u.value=!1,["self"]))},[wl("div",g_,[t[39]||(t[39]=wl("div",{class:"text-center"},[wl("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),wl("div",h_,[(ul(!0),xl(sl,null,sn(f.value.filter(e=>e.id!==n.value.id),e=>(ul(),xl("button",{key:e.id,onClick:t=>p.value=e.id,class:F(["w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between",p.value===e.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[wl("span",null,J(e.name),1),p.value===e.id?(ul(),xl("span",w_,"check")):Sl("",!0)],10,y_))),128)),f.value.length<=1?(ul(),xl("div",k_,"No other packs available")):Sl("",!0)]),wl("div",z_,[wl("button",{onClick:t[16]||(t[16]=e=>u.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),wl("button",{onClick:S,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!p.value}," Move ",8,C_)])])])):Sl("",!0)]))]))}},[["__scopeId","data-v-1a2505a7"]]),S_={class:"noir-app-container w-full h-full bg-white relative font-sans text-black overflow-hidden flex flex-col"},I_={key:3,class:"w-full h-full"},j_={key:10,class:"flex-1 flex items-center justify-center h-full"},M_=_o({__name:"NoirApp",emits:["close"],setup(e,{emit:t}){const a=yt("feed"),n=yt(!1),l=yt(null),s=yt(!1),i=Kl(()=>Oi.videoCallState.isActive&&Oi.videoCallState.chatId?Oi.videoCallState.chatId:l.value?.id);Ja(()=>{Di()}),ia([()=>a.value,()=>Oi.videoCallState.isActive],([e,t])=>{("chat"===e||t)&&(s.value=!0)});const o=(e,t=null)=>{l.value=t,a.value=e},r=e=>{"compose"!==e?a.value=e:n.value=!0},c=Kl(()=>{const e=a.value;return"profile"===e&&l.value?.id||"following"===e?"feed":e});return(e,t)=>(ul(),xl("div",S_,["feed"===a.value?(ul(),bl(Lo,{key:0,onClose:t[0]||(t[0]=t=>e.$emit("close")),onNavigate:o})):Sl("",!0),"post"===a.value?(ul(),bl(Cx,{key:1,postId:l.value?.id,onBack:t[1]||(t[1]=e=>o("feed"))},null,8,["postId"])):Sl("",!0),"inbox"===a.value?(ul(),bl(qr,{key:2,onNavigate:o,onClose:t[2]||(t[2]=t=>e.$emit("close"))})):Sl("",!0),s.value?aa((ul(),xl("div",I_,[kl(jf,{chatId:i.value,onBack:t[3]||(t[3]=e=>o("inbox")),onNavigate:o},null,8,["chatId"])],512)),[[ys,"chat"===a.value]]):Sl("",!0),"chat-settings"===a.value?(ul(),bl(Cy,{key:4,chatId:l.value?.id,onBack:t[4]||(t[4]=e=>o("chat",{id:l.value?.id})),onNavigate:o},null,8,["chatId"])):Sl("",!0),"chat-settings-identity"===a.value?(ul(),bl(kw,{key:5,chatId:l.value?.id,onBack:t[5]||(t[5]=e=>o("chat-settings",{id:l.value?.id}))},null,8,["chatId"])):Sl("",!0),"worldbook-selector"===a.value?(ul(),bl(Kw,{key:6,chatId:l.value?.id,onBack:t[6]||(t[6]=e=>o("chat-settings",{id:l.value?.id}))},null,8,["chatId"])):Sl("",!0),"wallet"===a.value?(ul(),bl(pC,{key:7,onBack:t[7]||(t[7]=e=>o("profile"))})):Sl("",!0),"profile"===a.value?(ul(),bl(ox,{key:8,contactId:l.value?.id,onBack:t[8]||(t[8]=t=>l.value?.id?o("following"):e.$emit("close")),onNavigate:o},null,8,["contactId"])):Sl("",!0),"char-memory"===a.value?(ul(),bl(vm,{key:9,contactId:l.value?.id,onBack:t[9]||(t[9]=e=>o("profile",{id:l.value?.id}))},null,8,["contactId"])):Sl("",!0),kl(ls,{name:"slide-up"},{default:ta(()=>[n.value?(ul(),bl(hx,{key:0,onClose:t[10]||(t[10]=e=>n.value=!1)})):Sl("",!0)]),_:1}),"activity"===a.value?(ul(),xl("div",j_,[...t[25]||(t[25]=[wl("span",{class:"text-zinc-400 font-serif italic text-xl"},"Coming soon...",-1)])])):Sl("",!0),"persona-archive"===a.value?(ul(),bl(Nx,{key:11,onBack:t[11]||(t[11]=e=>o("profile")),onAdd:t[12]||(t[12]=e=>o("persona-edit")),onEdit:t[13]||(t[13]=e=>o("persona-edit",{id:e})),onSelect:t[14]||(t[14]=e=>o("profile"))})):Sl("",!0),"persona-edit"===a.value?(ul(),bl(Yx,{key:12,personaId:l.value?.id,onBack:t[15]||(t[15]=e=>o("persona-archive")),onSave:t[16]||(t[16]=e=>o("persona-archive"))},null,8,["personaId"])):Sl("",!0),"following"===a.value?(ul(),bl(ub,{key:13,onBack:t[17]||(t[17]=e=>o("feed")),onAdd:t[18]||(t[18]=e=>o("contact-edit")),onEdit:t[19]||(t[19]=e=>o("contact-edit",{id:e})),onNavigate:o})):Sl("",!0),"contact-edit"===a.value?(ul(),bl(Sb,{key:14,contactId:l.value?.id,onBack:t[20]||(t[20]=e=>o("following")),onSave:t[21]||(t[21]=e=>o("following"))},null,8,["contactId"])):Sl("",!0),"relationship-network"===a.value?(ul(),bl(Gk,{key:15,myPersonaId:l.value?.id,onBack:t[22]||(t[22]=e=>o("profile"))},null,8,["myPersonaId"])):Sl("",!0),"sticker-library"===a.value?(ul(),bl($z,{key:16,onBack:t[23]||(t[23]=e=>o("profile"))})):Sl("",!0),"regex-manager"===a.value?(ul(),bl(__,{key:17,onBack:t[24]||(t[24]=e=>o("profile"))})):Sl("",!0),["feed","inbox","profile","activity","following"].includes(a.value)||"profile"===a.value&&l.value?.id?(ul(),bl(mC,{key:18,activeTab:c.value,onChange:r},null,8,["activeTab"])):Sl("",!0)]))}},[["__scopeId","data-v-c14519fb"]]),E_={class:"h-full flex flex-col bg-white overflow-hidden"},A_={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},T_={class:"flex items-center gap-3"},O_={class:"flex-1 overflow-y-auto p-6 space-y-3 pb-12"},$_={class:"space-y-3"},L_=_o({__name:"SettingsHome",emits:["close","navigate"],setup:(e,{emit:t})=>(e,t)=>(ul(),xl("div",E_,[wl("div",A_,[wl("div",T_,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[2]||(t[2]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t[3]||(t[3]=wl("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"Settings",-1))])]),wl("main",O_,[wl("div",$_,[wl("button",{onClick:t[1]||(t[1]=t=>e.$emit("navigate","api-setup")),class:"w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all"},[...t[4]||(t[4]=[_l('<div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>api</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501>API </span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Configure AI providers</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span>',2)])]),t[5]||(t[5]=_l('<button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>palette</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501></span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>person</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Manage personas</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>lock</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Privacy settings</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>notifications</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Notification preferences</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button>',4))]),t[6]||(t[6]=_l('<div class="mt-8" data-v-b01f0501><div class="text-[10px] text-zinc-400 uppercase tracking-widest mb-4 px-1 font-bold" data-v-b01f0501></div><div class="bg-zinc-50 rounded-2xl overflow-hidden" data-v-b01f0501><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors border-b border-zinc-100" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button></div><div class="text-center py-8" data-v-b01f0501><p class="text-[9px] font-mono uppercase tracking-[0.3em] text-zinc-300 italic" data-v-b01f0501>Settings  v2.4.0 (Build 992)</p></div></div><button class="w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors" data-v-b01f0501>  </button>',2))])]))},[["__scopeId","data-v-b01f0501"]]),N_={class:"h-full flex flex-col bg-white w-full relative overflow-hidden"},P_={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},R_={class:"flex items-center gap-3"},D_={class:"flex-1 overflow-y-auto p-6 pb-40 space-y-6"},U_={class:"flex gap-2 overflow-x-auto no-scrollbar pb-2"},V_=["onClick"],B_={class:"bg-zinc-50 rounded-2xl p-5"},F_={class:"flex gap-2"},G_={class:"bg-zinc-50 rounded-2xl p-5"},K_={class:"flex justify-between items-center mb-4"},W_={class:"mt-3 relative"},H_=["value"],q_={class:"bg-zinc-50 rounded-2xl p-5 space-y-4"},J_={class:"relative"},Y_=["type"],X_={class:"material-symbols-outlined text-[18px]"},Q_={class:"bg-zinc-50 rounded-2xl p-5"},Z_={class:"flex justify-between items-center mb-6"},eS={class:"text-2xl font-semibold text-zinc-900"},tS={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},aS={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},nS={class:"flex items-center gap-3"},lS={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},sS={class:"grid grid-cols-2 gap-3"},iS={key:1,class:"fixed inset-0 z-[9999] flex justify-end"},oS={class:"relative w-[300px] h-full bg-white shadow-2xl flex flex-col animate-slide-in-right"},rS={class:"p-5 border-b border-zinc-100 flex items-center justify-between shrink-0"},cS={class:"flex-1 overflow-y-auto p-5 space-y-6"},dS={class:"bg-zinc-50 rounded-xl p-4"},uS={class:"relative"},pS=["value"],vS={key:0,class:"mt-3 flex items-center gap-2 text-[11px] text-green-600"},fS=_o({__name:"ApiSetup",emits:["back"],setup(e,{emit:t}){const a=t,{provider:n,endpoint:l,apiKey:s,model:i,temperature:o,stream:r,modelsList:c,presetState:d,init:u,getPresetById:p,saveCurrentAsPreset:v,deleteCurrentPreset:f,fetchModels:x,commitSettings:b}=lc(),m=rt({provider:"openai",endpoint:"",apiKey:"",model:"",temperature:.7,stream:!1,currentPresetId:"custom"}),g=yt(!1),h=yt(!1),y=yt(""),w=yt(!1),k=yt(!1),z=rt({memorySummarization:null});ia(z,()=>{localStorage.setItem("noir_mounted_apis",JSON.stringify(z))},{deep:!0}),Ja(async()=>{await u(),C(),(()=>{try{const e=localStorage.getItem("noir_mounted_apis");if(e){const t=JSON.parse(e);t.memorySummarization&&(z.memorySummarization=t.memorySummarization)}}catch(UI){}})()});const C=()=>{m.provider=n.value,m.endpoint=l.value,m.apiKey=s.value,m.model=i.value,m.temperature=o.value,m.stream=void 0!==r.value&&r.value,m.currentPresetId=d.currentPresetId},_=async()=>{await b({provider:m.provider,endpoint:m.endpoint,apiKey:m.apiKey,model:m.model,temperature:m.temperature,stream:m.stream,currentPresetId:m.currentPresetId}),a("back")},S=async()=>{g.value=!0,await x({endpoint:m.endpoint,apiKey:m.apiKey}),g.value=!1},I=async()=>{if(y.value)try{await v(y.value,m),h.value=!1,y.value="",C()}catch(UI){alert(": "+UI)}},j=async()=>{confirm("")&&(await f(),C())},M=e=>{if("custom"===e)return void(m.currentPresetId="custom");const t=p(e);t&&(m.provider=t.provider,m.endpoint=t.endpoint,t.apiKey&&(m.apiKey=t.apiKey),m.model=t.model,m.temperature=t.temperature,m.stream=void 0!==t.stream&&t.stream,m.currentPresetId=e)},E=e=>{m.provider=e,"gemini"===e?(m.endpoint="https://generativelanguage.googleapis.com/v1beta/openai/",m.model.includes("gpt")&&(m.model="gemini-1.5-flash")):m.endpoint="https://api.openai.com/v1","custom"!==m.currentPresetId&&(m.currentPresetId="custom")},A=()=>{w.value=!w.value},T=e=>{if(!e)return"";if("custom"===e)return"Custom";const t=p(e);return t?.name||e};return(e,t)=>(ul(),xl("div",N_,[wl("div",P_,[wl("div",R_,[wl("button",{onClick:t[0]||(t[0]=t=>e.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[18]||(t[18]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t[19]||(t[19]=wl("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"API Setup",-1))]),wl("button",{onClick:t[1]||(t[1]=e=>k.value=!0),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 transition-colors"},[...t[20]||(t[20]=[wl("span",{class:"material-symbols-outlined text-zinc-400 text-[20px]"},"tune",-1)])])]),wl("main",D_,[wl("div",U_,[(ul(!0),xl(sl,null,sn(kt(d).list,e=>(ul(),xl("button",{key:e.id,onClick:t=>M(e.id),class:F(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",m.currentPresetId===e.id?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])},J(e.name),11,V_))),128)),wl("button",{onClick:t[2]||(t[2]=e=>M("custom")),class:F(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all","custom"===m.currentPresetId?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])}," Custom ",2)]),wl("div",B_,[t[21]||(t[21]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold"}," / Provider",-1)),wl("div",F_,[wl("button",{onClick:t[3]||(t[3]=e=>E("openai")),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all","openai"===m.provider?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"OpenAI",2),wl("button",{onClick:t[4]||(t[4]=e=>E("gemini")),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all","gemini"===m.provider?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"Gemini",2)])]),wl("div",G_,[wl("div",K_,[t[23]||(t[23]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Model",-1)),wl("button",{onClick:S,class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-all flex items-center gap-2"},[t[22]||(t[22]=Cl("  ",-1)),wl("span",{class:F(["material-symbols-outlined text-[14px]",{"animate-spin":g.value}])},"sync",2)])]),aa(wl("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>m.model=e),class:"w-full bg-white rounded-2xl py-4 px-5 text-[15px] focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none border-none",placeholder:""},null,512),[[Qs,m.model]]),wl("div",W_,[aa(wl("select",{id:"modelSelect","onUpdate:modelValue":t[6]||(t[6]=e=>m.model=e),class:"w-full bg-white rounded-2xl py-3 px-5 text-[13px] font-medium text-zinc-600 appearance-none focus:ring-1 focus:ring-black outline-none cursor-pointer"},[(ul(!0),xl(sl,null,sn(kt(c),e=>(ul(),xl("option",{key:e,value:e},J(e),9,H_))),128))],512),[[ai,m.model]]),t[24]||(t[24]=wl("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),wl("div",q_,[wl("div",null,[t[25]||(t[25]=wl("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest block mb-2 font-bold"}," / Endpoint",-1)),aa(wl("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>m.endpoint=e),class:"w-full bg-white rounded-2xl py-3 px-5 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",type:"text",placeholder:"https://api.openai.com/v1"},null,512),[[Qs,m.endpoint]])]),wl("div",null,[t[26]||(t[26]=wl("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest block mb-2 font-bold"},"API  ( Key  , )",-1)),wl("div",J_,[aa(wl("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>m.apiKey=e),type:w.value?"text":"password",class:"w-full bg-white rounded-2xl py-3 px-5 pr-12 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",placeholder:"sk-..., sk-..."},null,8,Y_),[[ii,m.apiKey]]),wl("button",{onClick:A,class:"absolute right-3 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-400 hover:text-black transition-colors"},[wl("span",X_,J(w.value?"visibility_off":"visibility"),1)])])])]),wl("div",Q_,[wl("div",Z_,[t[27]||(t[27]=wl("span",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Temperature",-1)),wl("span",eS,J(m.temperature),1)]),aa(wl("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>m.temperature=e),class:"w-full",max:"2",min:"0",step:"0.1",type:"range"},null,512),[[Qs,m.temperature,void 0,{number:!0}]]),t[28]||(t[28]=wl("div",{class:"mt-3 flex justify-between text-[9px] font-mono uppercase text-zinc-300 tracking-widest"},[wl("span",null," (0.0)"),wl("span",null," (2.0)")],-1))]),wl("div",tS,[t[29]||(t[29]=wl("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Streaming",-1)),wl("button",{onClick:t[10]||(t[10]=e=>m.stream=!m.stream),class:F(["w-14 h-8 rounded-full relative transition-colors duration-200",m.stream?"bg-black":"bg-zinc-200"])},[wl("div",{class:F(["absolute top-1 left-1 w-6 h-6 rounded-full bg-white transition-transform duration-200 shadow-sm",m.stream?"translate-x-6":"translate-x-0"])},null,2)],2)]),wl("div",aS,[t[30]||(t[30]=wl("span",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"},"Preset Management",-1)),wl("div",nS,["custom"!==m.currentPresetId?(ul(),xl("button",{key:0,onClick:j,class:"px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-colors"},"  ")):Sl("",!0),wl("button",{onClick:t[11]||(t[11]=e=>h.value=!0),class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-600 hover:bg-zinc-100 transition-colors"},"")])]),(ul(),bl(ha,{to:"body"},[h.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-8 animate-in fade-in duration-200",onClick:t[14]||(t[14]=di(e=>h.value=!1,["self"]))},[wl("div",lS,[t[31]||(t[31]=wl("div",{class:"text-center"},[wl("h3",{class:"text-xl font-semibold mb-1"},"Save Preset"),wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new configuration")],-1)),aa(wl("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>y.value=e),placeholder:"Preset Name (e.g. Coding)",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:pi(I,["enter"])},null,544),[[Qs,y.value]]),wl("div",sS,[wl("button",{onClick:t[13]||(t[13]=e=>h.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),wl("button",{onClick:I,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Save")])])])):Sl("",!0),k.value?(ul(),xl("div",iS,[wl("div",{class:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:t[15]||(t[15]=e=>k.value=!1)}),wl("div",oS,[wl("div",rS,[t[33]||(t[33]=wl("div",null,[wl("span",{class:"font-bold text-lg block"},"API "),wl("span",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Function Bindings")],-1)),wl("button",{onClick:t[16]||(t[16]=e=>k.value=!1),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black"},[...t[32]||(t[32]=[wl("span",{class:"material-symbols-outlined"},"close",-1)])])]),wl("div",cS,[t[39]||(t[39]=wl("div",{class:"bg-zinc-50 rounded-xl p-4 text-[12px] text-zinc-500 leading-relaxed"},[wl("span",{class:"material-symbols-outlined text-[14px] mr-1 align-middle"},"info"),Cl("  ")],-1)),wl("div",dS,[t[37]||(t[37]=wl("div",{class:"flex items-center gap-2 mb-3"},[wl("span",{class:"material-symbols-outlined text-[18px] text-zinc-600"},"psychology"),wl("span",{class:"text-[13px] font-bold"},"")],-1)),t[38]||(t[38]=wl("p",{class:"text-[11px] text-zinc-400 mb-4"}," API ",-1)),wl("div",uS,[aa(wl("select",{"onUpdate:modelValue":t[17]||(t[17]=e=>z.memorySummarization=e),class:"w-full bg-white border border-zinc-200 rounded-lg py-2.5 px-4 text-[13px] appearance-none focus:border-black focus:outline-none cursor-pointer"},[t[34]||(t[34]=wl("option",{value:null},"",-1)),(ul(!0),xl(sl,null,sn(kt(d).list,e=>(ul(),xl("option",{key:e.id,value:e.id},J(e.name),9,pS))),128))],512),[[ai,z.memorySummarization]]),t[35]||(t[35]=wl("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400 text-[18px]"},"expand_more",-1))]),z.memorySummarization?(ul(),xl("div",vS,[t[36]||(t[36]=wl("span",{class:"material-symbols-outlined text-[14px]"},"check_circle",-1)),Cl(" : "+J(T(z.memorySummarization)),1)])):Sl("",!0)]),t[40]||(t[40]=wl("div",{class:"text-center py-8 text-zinc-300 text-[11px] uppercase tracking-widest"},"  ",-1))])])])):Sl("",!0)])),wl("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 w-[calc(100%-3rem)] max-w-sm"},[wl("button",{onClick:_,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl"},[...t[41]||(t[41]=[wl("span",{class:"text-[11px] uppercase tracking-[0.2em] font-bold"},"",-1),wl("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])])]))}},[["__scopeId","data-v-c8052ce6"]]),xS={class:"h-full w-full bg-background-light dark:bg-background-dark text-black dark:text-white font-sans overflow-hidden relative"},bS=_o({__name:"SettingsApp",emits:["close"],setup(e,{emit:t}){const a=t,n=yt("home"),l=e=>{n.value=e},s=()=>{"home"===n.value?a("close"):n.value="home"};return(e,t)=>(ul(),xl("div",xS,[kl(ls,{name:"slide"},{default:ta(()=>["home"===n.value?(ul(),bl(L_,{onClose:t[0]||(t[0]=t=>e.$emit("close")),onNavigate:l,key:"home"})):"api-setup"===n.value?(ul(),bl(fS,{onBack:s,key:"api-setup"})):Sl("",!0)]),_:1})]))}},[["__scopeId","data-v-49131ef6"]]),mS={class:"h-full w-full bg-white flex flex-col"},gS={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},hS={class:"flex gap-2"},yS={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6 space-y-6"},wS={class:"bg-zinc-50 rounded-2xl p-5"},kS={class:"relative"},zS=["value"],CS={class:"bg-zinc-50 rounded-2xl p-5"},_S={class:"bg-zinc-50 rounded-2xl p-5"},SS={class:"flex gap-3"},IS={key:0,class:"bg-zinc-50 rounded-2xl p-5 animate-fade-in"},jS={class:"bg-zinc-50 rounded-2xl p-5"},MS={class:"flex gap-2"},ES={class:"bg-zinc-50 rounded-2xl p-5"},AS={class:"flex items-center justify-between mb-3"},TS={class:"text-[10px] text-zinc-400"},OS={class:"flex items-center gap-3"},$S={class:"text-2xl font-semibold w-12 text-center"},LS=_o({__name:"EntryEdit",props:{entryId:{type:String,default:null},initialCategoryId:{type:String,required:!0},initialScope:{type:String,default:"global"}},emits:["back","save"],setup(e,{emit:t}){const a=e,n=t,l=rc(),s=yt(""),i=yt(""),o=yt(a.initialCategoryId),r=yt(a.initialScope),c=yt(!1),d=yt(""),u=yt("front"),p=yt(0),v=l.getCategories(),f=!a.entryId;Ja(()=>{if(!f&&a.entryId){const e=l.getEntry(a.entryId);e&&(s.value=e.title,i.value=e.content,o.value=e.categoryId,r.value=e.scope||"global",c.value=e.isConstant,d.value=e.keywords.join(", "),u.value=e.position,p.value=e.depth)}});const x=()=>{if(!s.value.trim()||!i.value.trim())return;const e={title:s.value,content:i.value,categoryId:o.value,scope:r.value,isConstant:c.value,keywords:c.value?[]:d.value.split(",").map(e=>e.trim()).filter(Boolean),position:u.value,depth:Number(p.value)};f?l.addEntry(e):a.entryId&&l.updateEntry(a.entryId,e),n("save")},b=()=>{!f&&a.entryId&&(l.deleteEntry(a.entryId),n("back"))};return(e,t)=>(ul(),xl("div",mS,[wl("div",gS,[wl("button",{onClick:t[0]||(t[0]=e=>n("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[12]||(t[12]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),wl("div",hS,[f?Sl("",!0):(ul(),xl("button",{key:0,onClick:b,class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-400 hover:text-red-500 transition-colors"},[...t[13]||(t[13]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"delete",-1)])])),t[14]||(t[14]=wl("button",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 transition-colors"},[wl("span",{class:"material-symbols-outlined text-[20px]"},"more_horiz")],-1))])]),wl("div",yS,[wl("div",wS,[t[16]||(t[16]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-bold"}," / Category",-1)),wl("div",kS,[aa(wl("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),class:"w-full text-[15px] font-medium bg-white rounded-2xl py-3 px-5 outline-none appearance-none cursor-pointer focus:ring-1 focus:ring-black border-none"},[(ul(!0),xl(sl,null,sn(kt(v),e=>(ul(),xl("option",{key:e.id,value:e.id},J(e.name),9,zS))),128))],512),[[ai,o.value]]),t[15]||(t[15]=wl("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),wl("div",null,[t[17]||(t[17]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold px-1"}," / Title",-1)),aa(wl("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),type:"text",placeholder:"Enter Title",class:"w-full text-2xl font-semibold bg-transparent focus:outline-none placeholder:text-zinc-300 border-none p-0"},null,512),[[Qs,s.value]])]),wl("div",CS,[t[18]||(t[18]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold"}," / Content",-1)),aa(wl("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.value=e),placeholder:"Enter lore content...",class:"w-full min-h-[150px] text-[14px] leading-relaxed font-normal text-zinc-800 bg-white rounded-2xl p-4 outline-none resize-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[Qs,i.value]])]),wl("div",_S,[t[19]||(t[19]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-4 font-bold"}," / Mode",-1)),wl("div",SS,[wl("button",{onClick:t[4]||(t[4]=e=>c.value=!1),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",c.value?"bg-white text-zinc-500 hover:bg-zinc-100":"bg-black text-white"])},"  (Trigger) ",2),wl("button",{onClick:t[5]||(t[5]=e=>c.value=!0),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",c.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Global) ",2)])]),c.value?Sl("",!0):(ul(),xl("div",IS,[t[20]||(t[20]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-bold"}," / Keywords",-1)),aa(wl("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>d.value=e),type:"text",placeholder:"tag1, tag2...",class:"w-full text-lg font-medium bg-white rounded-2xl py-3 px-5 outline-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[Qs,d.value]])])),wl("div",jS,[t[21]||(t[21]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-4 font-bold"}," / Injection Position",-1)),wl("div",MS,[wl("button",{onClick:t[7]||(t[7]=e=>u.value="front"),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all","front"===u.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Front) ",2),wl("button",{onClick:t[8]||(t[8]=e=>u.value="mid"),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all","mid"===u.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Mid) ",2),wl("button",{onClick:t[9]||(t[9]=e=>u.value="back"),class:F(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all","back"===u.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Back) ",2)])]),wl("div",ES,[wl("div",AS,[wl("div",null,[t[22]||(t[22]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-1 font-bold"}," / Logic Depth",-1)),wl("div",TS,J(0===p.value?"":`${p.value}`),1)]),wl("div",OS,[wl("button",{onClick:t[10]||(t[10]=e=>p.value=Math.max(0,p.value-1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...t[23]||(t[23]=[wl("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"remove",-1)])]),wl("span",$S,J(p.value),1),wl("button",{onClick:t[11]||(t[11]=e=>p.value=Math.min(10,p.value+1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...t[24]||(t[24]=[wl("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"add",-1)])])])]),t[25]||(t[25]=wl("div",{class:"text-[10px] text-zinc-300 italic"},"0 = , 1-10 = ",-1))]),wl("button",{onClick:x,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl mt-4"},[...t[26]||(t[26]=[wl("span",{class:"text-[11px] font-bold uppercase tracking-[0.2em]"},"Save & Sync",-1),wl("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])]))}},[["__scopeId","data-v-560b7b8d"]]),NS={class:"h-full w-full bg-white flex flex-col relative overflow-hidden"},PS={key:0,class:"absolute inset-0 z-20 bg-white"},RS={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},DS={class:"max-h-60 overflow-y-auto bg-zinc-50 rounded-2xl p-2"},US=["onClick"],VS={key:0,class:"material-symbols-outlined text-sm"},BS={class:"grid grid-cols-2 gap-3"},FS={key:1,class:"flex flex-col h-full"},GS={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},KS={class:"flex items-center gap-3"},WS={class:"flex bg-zinc-100 rounded-full p-1"},HS={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6"},qS={key:0,class:"space-y-4"},JS={key:0,class:"animate-fade-in space-y-6"},YS={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40"},XS={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},QS={class:"space-y-4"},ZS={class:"flex items-center justify-between mb-3"},eI=["onUpdate:modelValue","onChange"],tI=["onClick"],aI={class:"space-y-2"},nI=["onClick"],lI={class:"w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center"},sI={key:0,class:"w-3 h-3 bg-black rounded-full"},iI={class:"flex items-center gap-3"},oI=["disabled"],rI={key:1,class:"space-y-3"},cI=["onClick"],dI={class:"flex items-center gap-3"},uI={class:"text-[15px] font-medium text-zinc-900"},pI={class:"text-[9px] text-zinc-300 uppercase tracking-widest font-bold"},vI={key:0,class:"px-5 pb-5 pt-0 space-y-2 border-t border-zinc-100"},fI=["onClick"],xI={class:"font-medium text-[13px] text-zinc-800 group-hover/entry:text-black"},bI={class:"text-[11px] text-zinc-400 line-clamp-1 mt-0.5"},mI=["onClick"],gI={class:"text-[10px] font-bold text-zinc-300 group-hover/add:text-black uppercase tracking-wider"},hI={key:1,class:"mt-2"},yI={class:"relative mb-6"},wI={class:"space-y-3"},kI=["onClick"],zI={class:"flex items-center gap-2 mb-2"},CI={class:"text-[9px] font-bold px-2 py-1 bg-white rounded-full text-zinc-500 uppercase"},_I={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},SI={class:"text-[14px] font-medium text-zinc-900 mb-1"},II={class:"text-[12px] text-zinc-500 line-clamp-2"},jI={class:"fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur pb-[env(safe-area-inset-bottom)] pt-3 flex justify-around items-center z-10 border-t border-zinc-50"},MI=_o({__name:"WorldBookApp",emits:["close"],setup(e,{emit:t}){const a=t,n=rc(),l=yt("home"),s=yt("global"),i=yt("main"),o=yt(!1),r=yt(""),c=yt(new Set),d=yt(!1),u=yt(""),p=yt(new Set),v=yt(null),f=yt(""),x=Kl(()=>n.getCategories()),b=yt(""),m=Kl(()=>b.value?n.searchEntries(b.value):[]),g=e=>{o.value?C(e):(v.value=e,f.value="",i.value="edit")},h=e=>{v.value=null,f.value=e||x.value[0]?.id,i.value="edit"},y=()=>{i.value="main",v.value=null},w=()=>{i.value="main",v.value=null},k=()=>{r.value.trim()&&(n.addCategory(r.value.trim()),r.value="")},z=()=>{o.value=!o.value,o.value&&(l.value="home"),c.value.clear()},C=e=>{c.value.has(e)?c.value.delete(e):c.value.add(e),c.value=new Set(c.value)},_=()=>{0!==c.value.size&&(u.value=x.value[0]?.id,d.value=!0)},S=()=>{u.value&&(c.value.forEach(e=>{n.updateEntry(e,{categoryId:u.value})}),c.value.clear(),d.value=!1,o.value=!1)},I=e=>n.getEntriesByCategory(e,s.value),j=e=>p.value.has(e);return(e,t)=>(ul(),xl("div",NS,["edit"===i.value?(ul(),xl("div",PS,[kl(LS,{"entry-id":v.value,"initial-category-id":f.value,"initial-scope":s.value,onBack:y,onSave:w},null,8,["entry-id","initial-category-id","initial-scope"])])):Sl("",!0),(ul(),bl(ha,{to:"body"},[d.value?(ul(),xl("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:t[1]||(t[1]=di(e=>d.value=!1,["self"]))},[wl("div",RS,[t[9]||(t[9]=wl("div",{class:"text-center"},[wl("h3",{class:"text-xl font-semibold mb-1"},"Move Entries"),wl("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination category")],-1)),wl("div",DS,[(ul(!0),xl(sl,null,sn(x.value,e=>(ul(),xl("button",{key:e.id,onClick:t=>u.value=e.id,class:F(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",u.value===e.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[wl("span",null,J(e.name),1),u.value===e.id?(ul(),xl("span",VS,"check")):Sl("",!0)],10,US))),128))]),wl("div",BS,[wl("button",{onClick:t[0]||(t[0]=e=>d.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),wl("button",{onClick:S,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Confirm")])])])):Sl("",!0)])),"edit"!==i.value?(ul(),xl("div",FS,[wl("div",GS,[wl("div",KS,[wl("button",{onClick:t[2]||(t[2]=e=>a("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...t[10]||(t[10]=[wl("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t[11]||(t[11]=wl("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"World Book",-1))]),wl("div",WS,[wl("button",{onClick:t[3]||(t[3]=e=>s.value="global"),class:F(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all","global"===s.value?"bg-black text-white":"text-zinc-500"])},"Global",2),wl("button",{onClick:t[4]||(t[4]=e=>s.value="local"),class:F(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all","local"===s.value?"bg-black text-white":"text-zinc-500"])},"Local",2)])]),wl("div",HS,["home"===l.value?(ul(),xl("div",qS,[o.value?(ul(),xl("div",JS,[c.value.size>0?(ul(),xl("div",YS,[wl("span",XS,J(c.value.size)+" Selected",1),t[13]||(t[13]=wl("div",{class:"h-4 w-px bg-white/20"},null,-1)),wl("button",{onClick:_,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...t[12]||(t[12]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),wl("span",{class:"text-[11px] font-bold"},"Move",-1)])])])):Sl("",!0),t[16]||(t[16]=wl("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold flex items-center gap-2"},[wl("span",{class:"material-symbols-outlined text-[14px]"},"edit"),Cl(" Manage Categories ")],-1)),wl("div",QS,[(ul(!0),xl(sl,null,sn(x.value,e=>(ul(),xl("div",{key:e.id,class:"bg-zinc-50 rounded-2xl p-4"},[wl("div",ZS,[aa(wl("input",{"onUpdate:modelValue":t=>e.name=t,onChange:t=>kt(n).updateCategory(e.id,e.name),class:"flex-grow text-[15px] font-medium bg-transparent outline-none focus:ring-0 border-none p-0"},null,40,eI),[[Qs,e.name]]),wl("button",{onClick:t=>{return a=e.id,void(confirm("Are you sure? This will delete all entries in this category.")&&n.deleteCategory(a));var a},class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors"},[...t[14]||(t[14]=[wl("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])],8,tI)]),wl("div",aI,[(ul(!0),xl(sl,null,sn(I(e.id),e=>(ul(),xl("div",{key:e.id,onClick:t=>C(e.id),class:F(["py-3 px-4 bg-white rounded-xl flex items-center gap-3 cursor-pointer transition-all",c.value.has(e.id)?"ring-2 ring-black":"hover:bg-zinc-50"])},[wl("div",lI,[c.value.has(e.id)?(ul(),xl("div",sI)):Sl("",!0)]),wl("div",{class:F(["font-medium text-[13px]",c.value.has(e.id)?"text-black":"text-zinc-600"])},J(e.title),3)],10,nI))),128))])]))),128)),wl("div",iI,[aa(wl("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.value=e),onKeyup:pi(k,["enter"]),placeholder:"New Category...",class:"flex-grow bg-zinc-50 rounded-2xl py-3 px-5 text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none"},null,544),[[Qs,r.value]]),wl("button",{onClick:k,class:"w-12 h-12 flex items-center justify-center bg-black text-white rounded-full hover:bg-zinc-800 transition-colors shadow-lg",disabled:!r.value.trim()},[...t[15]||(t[15]=[wl("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])],8,oI)])])])):(ul(),xl("div",rI,[(ul(!0),xl(sl,null,sn(x.value,e=>(ul(),xl("div",{key:e.id,class:"bg-zinc-50 rounded-2xl overflow-hidden group"},[wl("button",{onClick:t=>{return a=e.id,p.value.has(a)?p.value.delete(a):p.value.add(a),void(p.value=new Set(p.value));var a},class:"w-full flex items-center justify-between p-5 hover:bg-zinc-100 transition-colors"},[wl("div",dI,[wl("span",{class:F(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",j(e.id)?"rotate-90":""])},"chevron_right",2),wl("h2",uI,J(e.name),1)]),wl("span",pI,J(I(e.id).length)+" entries",1)],8,cI),j(e.id)?(ul(),xl("div",vI,[(ul(!0),xl(sl,null,sn(I(e.id),e=>(ul(),xl("div",{key:e.id,onClick:t=>g(e.id),class:"py-3 px-4 bg-white rounded-xl cursor-pointer hover:bg-zinc-100 transition-all group/entry"},[wl("div",xI,J(e.title),1),wl("div",bI,J(e.content),1)],8,fI))),128)),wl("button",{onClick:t=>h(e.id),class:"w-full py-3 border border-dashed border-zinc-200 rounded-xl flex items-center justify-center gap-2 hover:border-zinc-400 hover:bg-zinc-50 transition-all group/add"},[t[17]||(t[17]=wl("span",{class:"material-symbols-outlined text-zinc-300 group-hover/add:text-black text-[16px]"},"add",-1)),wl("span",gI,"Add "+J(s.value)+" Entry",1)],8,mI)])):Sl("",!0)]))),128))]))])):Sl("",!0),"search"===l.value?(ul(),xl("div",hI,[wl("div",yI,[t[18]||(t[18]=wl("span",{class:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400"},"search",-1)),aa(wl("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),type:"text",placeholder:"Search entries...",class:"w-full pl-12 pr-4 py-4 bg-zinc-50 rounded-2xl text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none",autofocus:""},null,512),[[Qs,b.value]])]),wl("div",wI,[(ul(!0),xl(sl,null,sn(m.value,e=>(ul(),xl("div",{key:e.id,onClick:t=>g(e.id),class:"bg-zinc-50 rounded-2xl p-4 cursor-pointer hover:bg-zinc-100 transition-all"},[wl("div",zI,[wl("span",CI,J(e.scope),1),wl("span",_I,J(x.value.find(t=>t.id===e.categoryId)?.name),1)]),wl("div",SI,J(e.title),1),wl("div",II,J(e.content),1)],8,kI))),128))])])):Sl("",!0)]),wl("div",jI,[wl("button",{onClick:z,class:F(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",o.value?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[wl("span",{class:F(["material-symbols-outlined text-[24px]",o.value?"font-variation-fill":""])},"grid_view",2)],2),wl("button",{onClick:t[7]||(t[7]=e=>h()),class:"w-14 h-14 bg-black rounded-full shadow-2xl active:scale-95 transition-transform flex items-center justify-center -mt-6"},[...t[19]||(t[19]=[wl("span",{class:"material-symbols-outlined text-white text-[24px]"},"add",-1)])]),wl("button",{onClick:t[8]||(t[8]=e=>l.value="search"===l.value?"home":"search"),class:F(["w-12 h-12 flex items-center justify-center rounded-full transition-colors","search"===l.value?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[...t[20]||(t[20]=[wl("span",{class:"material-symbols-outlined text-[24px]"},"search",-1)])],2)])])):Sl("",!0)]))}},[["__scopeId","data-v-3d94a1bb"]]),EI={class:"relative h-screen w-full flex flex-col overflow-hidden bg-[#F2F2F7] font-sans text-black"},AI={class:"relative z-10 flex-grow px-5 pt-[calc(40px_+_env(safe-area-inset-top))] pb-32 overflow-y-auto no-scrollbar flex flex-col items-center gap-8"},TI={class:"w-full max-w-sm flex justify-between items-center mt-4"},OI={class:"flex flex-col gap-4"},$I={class:"flex flex-col gap-4"},LI=_o({__name:"Desktop",emits:["open-app"],setup(e,{emit:t}){const a=t,n=()=>{a("open-app","noir")},l=()=>{a("open-app","worldbook")},s=()=>{a("open-app","settings")};return(e,t)=>(ul(),xl("div",EI,[wl("div",AI,[wl("div",TI,[wl("div",OI,[wl("button",{class:"app-pill",onClick:t[0]||(t[0]=e=>{})},[...t[4]||(t[4]=[wl("span",{class:"material-symbols-outlined icon"},"headphones",-1),wl("span",{class:"label"},"Music::",-1)])]),wl("button",{class:"app-pill",onClick:t[1]||(t[1]=e=>{})},[...t[5]||(t[5]=[wl("span",{class:"material-symbols-outlined icon fill-current"},"favorite",-1),wl("span",{class:"label"},"Status",-1)])])]),t[8]||(t[8]=wl("div",{class:"flex flex-col items-center gap-2 mx-2"},[wl("div",{class:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-200"},[wl("img",{src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover",alt:"Avatar"})]),wl("div",{class:"text-[10px] text-gray-400 tracking-widest font-serif italic text-center leading-tight"}," **. ")],-1)),wl("div",$I,[wl("button",{class:"app-pill",onClick:t[2]||(t[2]=e=>{})},[...t[6]||(t[6]=[wl("span",{class:"material-symbols-outlined icon"},"movie",-1),wl("span",{class:"label"},"Gallery",-1)])]),wl("button",{class:"app-pill",onClick:t[3]||(t[3]=e=>{})},[...t[7]||(t[7]=[wl("span",{class:"material-symbols-outlined icon"},"cloud",-1),wl("span",{class:"label"},"Cloud",-1)])])])]),t[9]||(t[9]=_l('<div class="w-full max-w-sm grid grid-cols-[1.4fr_1fr] gap-4" data-v-6dbe5bb1><div class="bg-white rounded-[2rem] p-5 shadow-sm relative flex flex-col justify-between h-48 w-full" data-v-6dbe5bb1><div class="flex items-center gap-2 mb-1" data-v-6dbe5bb1><div class="w-1 h-3 bg-gray-300 rounded-full" data-v-6dbe5bb1></div><span class="text-xs text-gray-400 font-medium" data-v-6dbe5bb1>s.coups</span></div><div class="flex flex-col gap-2" data-v-6dbe5bb1><div class="flex flex-col gap-1 items-start" data-v-6dbe5bb1><span class="text-[10px] text-gray-400 ml-1" data-v-6dbe5bb1>    22:50</span></div><div class="self-end bg-[#333] text-white rounded-2xl rounded-tr-sm py-2.5 px-3 max-w-[90%] shadow-md" data-v-6dbe5bb1><span class="text-sm font-medium" data-v-6dbe5bb1></span><div class="flex justify-end items-center gap-1 mt-0.5" data-v-6dbe5bb1><span class="text-[8px] opacity-60" data-v-6dbe5bb1>jeonghan</span><span class="material-symbols-outlined text-[9px]" data-v-6dbe5bb1>done_all</span></div></div><div class="bg-gray-100/50 rounded-xl p-2 self-start max-w-[80%]" data-v-6dbe5bb1><span class="text-[9px] text-gray-500 leading-tight block" data-v-6dbe5bb1><br data-v-6dbe5bb1>  22:55</span></div></div></div><div class="grid grid-cols-2 gap-3 h-48 content-between" data-v-6dbe5bb1><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>calendar_month</span></div><span class="app-label" data-v-6dbe5bb1>Calendar</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>menu_book</span></div><span class="app-label" data-v-6dbe5bb1>WorldBook</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>pets</span></div><span class="app-label" data-v-6dbe5bb1>Pet</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>person</span></div><span class="app-label" data-v-6dbe5bb1>Me</span></button></div></div><div class="w-full max-w-sm flex justify-center gap-2 mt-4 relative h-40" data-v-6dbe5bb1><div class="polaroid rotate-[-6deg] translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/88/2c/83/882c83c21389c836dc22874136696b99.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[2deg] -translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/cf/17/dc/cf17dc13023cf8527a26f03027788484.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[8deg] translate-y-4 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/be/ab/e1/beabe17c5a08579932066d5b004278df.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption text-[8px] text-right pr-1 pt-1 opacity-50 font-serif" data-v-6dbe5bb1>~~</div></div></div>',2))]),wl("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[85%] max-w-[280px] z-50"},[wl("div",{class:"bg-white/80 backdrop-blur-xl border border-white/40 px-6 py-4 flex justify-between items-center shadow-lg rounded-[2.5rem]"},[wl("button",{onClick:s,class:"dock-icon-btn"},[...t[10]||(t[10]=[wl("span",{class:"material-symbols-outlined"},"settings",-1)])]),wl("button",{onClick:l,class:"dock-icon-btn"},[...t[11]||(t[11]=[wl("span",{class:"material-symbols-outlined"},"menu_book",-1)])]),wl("button",{onClick:n,class:"dock-icon-btn"},[...t[12]||(t[12]=[wl("span",{class:"material-symbols-outlined"},"chat_bubble",-1)])])])])]))}},[["__scopeId","data-v-6dbe5bb1"]]),NI={class:"w-full min-h-[100dvh] relative"},PI={key:0,class:"fixed inset-0 z-50 bg-white"},RI={key:0,class:"fixed inset-0 z-50 bg-white"},DI={key:0,class:"fixed inset-0 z-50 bg-white"};((...e)=>{const t=(fi||(fi=Xn(vi))).createApp(...e),{mount:a}=t;return t.mount=e=>{const n=function(e){if(b(e)){return document.querySelector(e)}return e}(e);if(!n)return;const l=t._component;x(l)||l.render||l.template||(l.template=n.innerHTML),1===n.nodeType&&(n.textContent="");const s=a(n,!1,function(e){if(e instanceof SVGElement)return"svg";if("function"==typeof MathMLElement&&e instanceof MathMLElement)return"mathml"}(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),s},t})({__name:"App",setup(e){const t=yt(!1),a=yt(!1),n=yt(!1),l=Kl(()=>t.value||Oi.videoCallState.isActive);ia(()=>Oi.videoCallState.isMinimized,e=>{!e&&Oi.videoCallState.isActive&&(t.value=!0)});const s=e=>{"noir"===e?t.value=!0:"settings"===e?a.value=!0:"worldbook"===e&&(n.value=!0)},i=()=>{t.value=!1},o=()=>{a.value=!1},r=()=>{n.value=!1};return(e,c)=>(ul(),xl("div",NI,[t.value||a.value||n.value?Sl("",!0):(ul(),bl(LI,{key:0,onOpenApp:s})),kl(ls,{name:"app-launch"},{default:ta(()=>[l.value?aa((ul(),xl("div",PI,[kl(M_,{onClose:i})],512)),[[ys,t.value]]):Sl("",!0)]),_:1}),kl(ls,{name:"app-launch"},{default:ta(()=>[a.value?(ul(),xl("div",RI,[kl(bS,{onClose:o})])):Sl("",!0)]),_:1}),kl(ls,{name:"app-launch"},{default:ta(()=>[n.value?(ul(),xl("div",DI,[kl(MI,{onClose:r})])):Sl("",!0)]),_:1})]))}}).mount("#app");
