(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ri(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const De={},en=[],os=()=>{},Ia=()=>!1,vo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ci=e=>e.startsWith("onUpdate:"),ut=Object.assign,di=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},or=Object.prototype.hasOwnProperty,Pe=(e,t)=>or.call(e,t),re=Array.isArray,tn=e=>On(e)==="[object Map]",cn=e=>On(e)==="[object Set]",Pi=e=>On(e)==="[object Date]",xe=e=>typeof e=="function",Je=e=>typeof e=="string",is=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",Ma=e=>(Re(e)||xe(e))&&xe(e.then)&&xe(e.catch),ja=Object.prototype.toString,On=e=>ja.call(e),ir=e=>On(e).slice(8,-1),Ta=e=>On(e)==="[object Object]",bo=e=>Je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,mn=ri(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xo=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},ar=/-\w/g,js=xo(e=>e.replace(ar,t=>t.slice(1).toUpperCase())),lr=/\B([A-Z])/g,Es=xo(e=>e.replace(lr,"-$1").toLowerCase()),Aa=xo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Po=xo(e=>e?`on${Aa(e)}`:""),Ss=(e,t)=>!Object.is(e,t),Yn=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ea=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},go=e=>{const t=parseFloat(e);return isNaN(t)?e:t},rr=e=>{const t=Je(e)?Number(e):NaN;return isNaN(t)?e:t};let Oi;const mo=()=>Oi||(Oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ve(e){if(re(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],i=Je(o)?fr(o):Ve(o);if(i)for(const a in i)t[a]=i[a]}return t}else if(Je(e)||Re(e))return e}const cr=/;(?![^(]*\))/g,dr=/:([^]+)/,ur=/\/\*[^]*?\*\//g;function fr(e){const t={};return e.replace(ur,"").split(cr).forEach(n=>{if(n){const o=n.split(dr);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function K(e){let t="";if(Je(e))t=e;else if(re(e))for(let n=0;n<e.length;n++){const o=K(e[n]);o&&(t+=o+" ")}else if(Re(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const pr="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vr=ri(pr);function Pa(e){return!!e||e===""}function br(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=qs(e[o],t[o]);return n}function qs(e,t){if(e===t)return!0;let n=Pi(e),o=Pi(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=is(e),o=is(t),n||o)return e===t;if(n=re(e),o=re(t),n||o)return n&&o?br(e,t):!1;if(n=Re(e),o=Re(t),n||o){if(!n||!o)return!1;const i=Object.keys(e).length,a=Object.keys(t).length;if(i!==a)return!1;for(const l in e){const r=e.hasOwnProperty(l),c=t.hasOwnProperty(l);if(r&&!c||!r&&c||!qs(e[l],t[l]))return!1}}return String(e)===String(t)}function ui(e,t){return e.findIndex(n=>qs(n,t))}const Oa=e=>!!(e&&e.__v_isRef===!0),C=e=>Je(e)?e:e==null?"":re(e)||Re(e)&&(e.toString===ja||!xe(e.toString))?Oa(e)?C(e.value):JSON.stringify(e,Na,2):String(e),Na=(e,t)=>Oa(t)?Na(e,t.value):tn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,i],a)=>(n[Oo(o,a)+" =>"]=i,n),{})}:cn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Oo(n))}:is(t)?Oo(t):Re(t)&&!re(t)&&!Ta(t)?String(t):t,Oo=(e,t="")=>{var n;return is(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Tt;class xr{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tt,!t&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Tt;try{return Tt=this,t()}finally{Tt=n}}}on(){++this._on===1&&(this.prevScope=Tt,Tt=this)}off(){this._on>0&&--this._on===0&&(Tt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function gr(){return Tt}let Fe;const No=new WeakSet;class Ra{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tt&&Tt.active&&Tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,No.has(this)&&(No.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Da(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ni(this),Ba(this);const t=Fe,n=Gt;Fe=this,Gt=!0;try{return this.fn()}finally{Ua(this),Fe=t,Gt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)vi(t);this.deps=this.depsTail=void 0,Ni(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?No.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Go(this)&&this.run()}get dirty(){return Go(this)}}let La=0,hn,yn;function Da(e,t=!1){if(e.flags|=8,t){e.next=yn,yn=e;return}e.next=hn,hn=e}function fi(){La++}function pi(){if(--La>0)return;if(yn){let t=yn;for(yn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;hn;){let t=hn;for(hn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Ba(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ua(e){let t,n=e.depsTail,o=n;for(;o;){const i=o.prevDep;o.version===-1?(o===n&&(n=i),vi(o),mr(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=i}e.deps=t,e.depsTail=n}function Go(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cn)||(e.globalVersion=Cn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Go(e))))return;e.flags|=2;const t=e.dep,n=Fe,o=Gt;Fe=e,Gt=!0;try{Ba(e);const i=e.fn(e._value);(t.version===0||Ss(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Fe=n,Gt=o,Ua(e),e.flags&=-3}}function vi(e,t=!1){const{dep:n,prevSub:o,nextSub:i}=e;if(o&&(o.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)vi(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function mr(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Gt=!0;const Va=[];function xs(){Va.push(Gt),Gt=!1}function gs(){const e=Va.pop();Gt=e===void 0?!0:e}function Ni(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Fe;Fe=void 0;try{t()}finally{Fe=n}}}let Cn=0;class hr{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Fe||!Gt||Fe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Fe)n=this.activeLink=new hr(Fe,this),Fe.deps?(n.prevDep=Fe.depsTail,Fe.depsTail.nextDep=n,Fe.depsTail=n):Fe.deps=Fe.depsTail=n,Ka(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Fe.depsTail,n.nextDep=void 0,Fe.depsTail.nextDep=n,Fe.depsTail=n,Fe.deps===n&&(Fe.deps=o)}return n}trigger(t){this.version++,Cn++,this.notify(t)}notify(t){fi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{pi()}}}function Ka(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ka(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const no=new WeakMap,Ks=Symbol(""),qo=Symbol(""),Sn=Symbol("");function gt(e,t,n){if(Gt&&Fe){let o=no.get(e);o||no.set(e,o=new Map);let i=o.get(n);i||(o.set(n,i=new bi),i.map=o,i.key=n),i.track()}}function ps(e,t,n,o,i,a){const l=no.get(e);if(!l){Cn++;return}const r=c=>{c&&c.trigger()};if(fi(),t==="clear")l.forEach(r);else{const c=re(e),b=c&&bo(n);if(c&&n==="length"){const d=Number(o);l.forEach((u,y)=>{(y==="length"||y===Sn||!is(y)&&y>=d)&&r(u)})}else switch((n!==void 0||l.has(void 0))&&r(l.get(n)),b&&r(l.get(Sn)),t){case"add":c?b&&r(l.get("length")):(r(l.get(Ks)),tn(e)&&r(l.get(qo)));break;case"delete":c||(r(l.get(Ks)),tn(e)&&r(l.get(qo)));break;case"set":tn(e)&&r(l.get(Ks));break}}pi()}function yr(e,t){const n=no.get(e);return n&&n.get(t)}function Ys(e){const t=we(e);return t===e?t:(gt(t,"iterate",Sn),Rt(e)?t:t.map(Jt))}function ho(e){return gt(e=we(e),"iterate",Sn),e}function _s(e,t){return ms(e)?an(Ws(e)?Jt(t):t):Jt(t)}const wr={__proto__:null,[Symbol.iterator](){return Ro(this,Symbol.iterator,e=>_s(this,e))},concat(...e){return Ys(this).concat(...e.map(t=>re(t)?Ys(t):t))},entries(){return Ro(this,"entries",e=>(e[1]=_s(this,e[1]),e))},every(e,t){return cs(this,"every",e,t,void 0,arguments)},filter(e,t){return cs(this,"filter",e,t,n=>n.map(o=>_s(this,o)),arguments)},find(e,t){return cs(this,"find",e,t,n=>_s(this,n),arguments)},findIndex(e,t){return cs(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return cs(this,"findLast",e,t,n=>_s(this,n),arguments)},findLastIndex(e,t){return cs(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return cs(this,"forEach",e,t,void 0,arguments)},includes(...e){return Lo(this,"includes",e)},indexOf(...e){return Lo(this,"indexOf",e)},join(e){return Ys(this).join(e)},lastIndexOf(...e){return Lo(this,"lastIndexOf",e)},map(e,t){return cs(this,"map",e,t,void 0,arguments)},pop(){return fn(this,"pop")},push(...e){return fn(this,"push",e)},reduce(e,...t){return Ri(this,"reduce",e,t)},reduceRight(e,...t){return Ri(this,"reduceRight",e,t)},shift(){return fn(this,"shift")},some(e,t){return cs(this,"some",e,t,void 0,arguments)},splice(...e){return fn(this,"splice",e)},toReversed(){return Ys(this).toReversed()},toSorted(e){return Ys(this).toSorted(e)},toSpliced(...e){return Ys(this).toSpliced(...e)},unshift(...e){return fn(this,"unshift",e)},values(){return Ro(this,"values",e=>_s(this,e))}};function Ro(e,t,n){const o=ho(e),i=o[t]();return o!==e&&!Rt(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.done||(a.value=n(a.value)),a}),i}const kr=Array.prototype;function cs(e,t,n,o,i,a){const l=ho(e),r=l!==e&&!Rt(e),c=l[t];if(c!==kr[t]){const u=c.apply(e,a);return r?Jt(u):u}let b=n;l!==e&&(r?b=function(u,y){return n.call(this,_s(e,u),y,e)}:n.length>2&&(b=function(u,y){return n.call(this,u,y,e)}));const d=c.call(l,b,o);return r&&i?i(d):d}function Ri(e,t,n,o){const i=ho(e);let a=n;return i!==e&&(Rt(e)?n.length>3&&(a=function(l,r,c){return n.call(this,l,r,c,e)}):a=function(l,r,c){return n.call(this,l,_s(e,r),c,e)}),i[t](a,...o)}function Lo(e,t,n){const o=we(e);gt(o,"iterate",Sn);const i=o[t](...n);return(i===-1||i===!1)&&yo(n[0])?(n[0]=we(n[0]),o[t](...n)):i}function fn(e,t,n=[]){xs(),fi();const o=we(e)[t].apply(e,n);return pi(),gs(),o}const _r=ri("__proto__,__v_isRef,__isVue"),Wa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(is));function zr(e){is(e)||(e=String(e));const t=we(this);return gt(t,"has",e),t.hasOwnProperty(e)}class Ha{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return a;if(n==="__v_raw")return o===(i?a?Pr:Qa:a?Ja:qa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=re(t);if(!i){let c;if(l&&(c=wr[n]))return c;if(n==="hasOwnProperty")return zr}const r=Reflect.get(t,n,dt(t)?t:o);if((is(n)?Wa.has(n):_r(n))||(i||gt(t,"get",n),a))return r;if(dt(r)){const c=l&&bo(n)?r:r.value;return i&&Re(c)?Qo(c):c}return Re(r)?i?Qo(r):Ps(r):r}}class Ga extends Ha{constructor(t=!1){super(!1,t)}set(t,n,o,i){let a=t[n];const l=re(t)&&bo(n);if(!this._isShallow){const b=ms(a);if(!Rt(o)&&!ms(o)&&(a=we(a),o=we(o)),!l&&dt(a)&&!dt(o))return b||(a.value=o),!0}const r=l?Number(n)<t.length:Pe(t,n),c=Reflect.set(t,n,o,dt(t)?t:i);return t===we(i)&&(r?Ss(o,a)&&ps(t,"set",n,o):ps(t,"add",n,o)),c}deleteProperty(t,n){const o=Pe(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&o&&ps(t,"delete",n,void 0),i}has(t,n){const o=Reflect.has(t,n);return(!is(n)||!Wa.has(n))&&gt(t,"has",n),o}ownKeys(t){return gt(t,"iterate",re(t)?"length":Ks),Reflect.ownKeys(t)}}class $r extends Ha{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Cr=new Ga,Sr=new $r,Ir=new Ga(!0);const Jo=e=>e,Kn=e=>Reflect.getPrototypeOf(e);function Mr(e,t,n){return function(...o){const i=this.__v_raw,a=we(i),l=tn(a),r=e==="entries"||e===Symbol.iterator&&l,c=e==="keys"&&l,b=i[e](...o),d=n?Jo:t?an:Jt;return!t&&gt(a,"iterate",c?qo:Ks),ut(Object.create(b),{next(){const{value:u,done:y}=b.next();return y?{value:u,done:y}:{value:r?[d(u[0]),d(u[1])]:d(u),done:y}}})}}function Wn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function jr(e,t){const n={get(i){const a=this.__v_raw,l=we(a),r=we(i);e||(Ss(i,r)&&gt(l,"get",i),gt(l,"get",r));const{has:c}=Kn(l),b=t?Jo:e?an:Jt;if(c.call(l,i))return b(a.get(i));if(c.call(l,r))return b(a.get(r));a!==l&&a.get(i)},get size(){const i=this.__v_raw;return!e&&gt(we(i),"iterate",Ks),i.size},has(i){const a=this.__v_raw,l=we(a),r=we(i);return e||(Ss(i,r)&&gt(l,"has",i),gt(l,"has",r)),i===r?a.has(i):a.has(i)||a.has(r)},forEach(i,a){const l=this,r=l.__v_raw,c=we(r),b=t?Jo:e?an:Jt;return!e&&gt(c,"iterate",Ks),r.forEach((d,u)=>i.call(a,b(d),b(u),l))}};return ut(n,e?{add:Wn("add"),set:Wn("set"),delete:Wn("delete"),clear:Wn("clear")}:{add(i){!t&&!Rt(i)&&!ms(i)&&(i=we(i));const a=we(this);return Kn(a).has.call(a,i)||(a.add(i),ps(a,"add",i,i)),this},set(i,a){!t&&!Rt(a)&&!ms(a)&&(a=we(a));const l=we(this),{has:r,get:c}=Kn(l);let b=r.call(l,i);b||(i=we(i),b=r.call(l,i));const d=c.call(l,i);return l.set(i,a),b?Ss(a,d)&&ps(l,"set",i,a):ps(l,"add",i,a),this},delete(i){const a=we(this),{has:l,get:r}=Kn(a);let c=l.call(a,i);c||(i=we(i),c=l.call(a,i)),r&&r.call(a,i);const b=a.delete(i);return c&&ps(a,"delete",i,void 0),b},clear(){const i=we(this),a=i.size!==0,l=i.clear();return a&&ps(i,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Mr(i,e,t)}),n}function xi(e,t){const n=jr(e,t);return(o,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?o:Reflect.get(Pe(n,i)&&i in o?n:o,i,a)}const Tr={get:xi(!1,!1)},Ar={get:xi(!1,!0)},Er={get:xi(!0,!1)};const qa=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,Pr=new WeakMap;function Or(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nr(e){return e.__v_skip||!Object.isExtensible(e)?0:Or(ir(e))}function Ps(e){return ms(e)?e:gi(e,!1,Cr,Tr,qa)}function Rr(e){return gi(e,!1,Ir,Ar,Ja)}function Qo(e){return gi(e,!0,Sr,Er,Qa)}function gi(e,t,n,o,i){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Nr(e);if(a===0)return e;const l=i.get(e);if(l)return l;const r=new Proxy(e,a===2?o:n);return i.set(e,r),r}function Ws(e){return ms(e)?Ws(e.__v_raw):!!(e&&e.__v_isReactive)}function ms(e){return!!(e&&e.__v_isReadonly)}function Rt(e){return!!(e&&e.__v_isShallow)}function yo(e){return e?!!e.__v_raw:!1}function we(e){const t=e&&e.__v_raw;return t?we(t):e}function Lr(e){return!Pe(e,"__v_skip")&&Object.isExtensible(e)&&Ea(e,"__v_skip",!0),e}const Jt=e=>Re(e)?Ps(e):e,an=e=>Re(e)?Qo(e):e;function dt(e){return e?e.__v_isRef===!0:!1}function E(e){return Dr(e,!1)}function Dr(e,t){return dt(e)?e:new Br(e,t)}class Br{constructor(t,n){this.dep=new bi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:we(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Rt(t)||ms(t);t=o?t:we(t),Ss(t,n)&&(this._rawValue=t,this._value=o?t:Jt(t),this.dep.trigger())}}function ct(e){return dt(e)?e.value:e}const Ur={get:(e,t,n)=>t==="__v_raw"?e:ct(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const i=e[t];return dt(i)&&!dt(n)?(i.value=n,!0):Reflect.set(e,t,n,o)}};function Ya(e){return Ws(e)?e:new Proxy(e,Ur)}function Fr(e){const t=re(e)?new Array(e.length):{};for(const n in e)t[n]=Kr(e,n);return t}class Vr{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=we(t);let i=!0,a=t;if(!re(t)||!bo(String(n)))do i=!yo(a)||Rt(a);while(i&&(a=a.__v_raw));this._shallow=i}get value(){let t=this._object[this._key];return this._shallow&&(t=ct(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&dt(this._raw[this._key])){const n=this._object[this._key];if(dt(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return yr(this._raw,this._key)}}function Kr(e,t,n){return new Vr(e,t,n)}class Wr{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new bi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Fe!==this)return Da(this,!0),!0}get value(){const t=this.dep.track();return Fa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Hr(e,t,n=!1){let o,i;return xe(e)?o=e:(o=e.get,i=e.set),new Wr(o,i,n)}const Hn={},oo=new WeakMap;let Fs;function Gr(e,t=!1,n=Fs){if(n){let o=oo.get(n);o||oo.set(n,o=[]),o.push(e)}}function qr(e,t,n=De){const{immediate:o,deep:i,once:a,scheduler:l,augmentJob:r,call:c}=n,b=j=>i?j:Rt(j)||i===!1||i===0?vs(j,1):vs(j);let d,u,y,M,R=!1,T=!1;if(dt(e)?(u=()=>e.value,R=Rt(e)):Ws(e)?(u=()=>b(e),R=!0):re(e)?(T=!0,R=e.some(j=>Ws(j)||Rt(j)),u=()=>e.map(j=>{if(dt(j))return j.value;if(Ws(j))return b(j);if(xe(j))return c?c(j,2):j()})):xe(e)?t?u=c?()=>c(e,2):e:u=()=>{if(y){xs();try{y()}finally{gs()}}const j=Fs;Fs=d;try{return c?c(e,3,[M]):e(M)}finally{Fs=j}}:u=os,t&&i){const j=u,A=i===!0?1/0:i;u=()=>vs(j(),A)}const L=gr(),z=()=>{d.stop(),L&&L.active&&di(L.effects,d)};if(a&&t){const j=t;t=(...A)=>{j(...A),z()}}let $=T?new Array(e.length).fill(Hn):Hn;const I=j=>{if(!(!(d.flags&1)||!d.dirty&&!j))if(t){const A=d.run();if(i||R||(T?A.some((q,de)=>Ss(q,$[de])):Ss(A,$))){y&&y();const q=Fs;Fs=d;try{const de=[A,$===Hn?void 0:T&&$[0]===Hn?[]:$,M];$=A,c?c(t,3,de):t(...de)}finally{Fs=q}}}else d.run()};return r&&r(I),d=new Ra(u),d.scheduler=l?()=>l(I,!1):I,M=j=>Gr(j,!1,d),y=d.onStop=()=>{const j=oo.get(d);if(j){if(c)c(j,4);else for(const A of j)A();oo.delete(d)}},t?o?I(!0):$=d.run():l?l(I.bind(null,!0),!0):d.run(),z.pause=d.pause.bind(d),z.resume=d.resume.bind(d),z.stop=z,z}function vs(e,t=1/0,n){if(t<=0||!Re(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,dt(e))vs(e.value,t,n);else if(re(e))for(let o=0;o<e.length;o++)vs(e[o],t,n);else if(cn(e)||tn(e))e.forEach(o=>{vs(o,t,n)});else if(Ta(e)){for(const o in e)vs(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&vs(e[o],t,n)}return e}function Nn(e,t,n,o){try{return o?e(...o):e()}catch(i){wo(i,t,n)}}function Qt(e,t,n,o){if(xe(e)){const i=Nn(e,t,n,o);return i&&Ma(i)&&i.catch(a=>{wo(a,t,n)}),i}if(re(e)){const i=[];for(let a=0;a<e.length;a++)i.push(Qt(e[a],t,n,o));return i}}function wo(e,t,n,o=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||De;if(t){let r=t.parent;const c=t.proxy,b=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const d=r.ec;if(d){for(let u=0;u<d.length;u++)if(d[u](e,c,b)===!1)return}r=r.parent}if(a){xs(),Nn(a,null,10,[e,c,b]),gs();return}}Jr(e,n,i,o,l)}function Jr(e,t,n,o=!0,i=!1){if(i)throw e;console.error(e)}const zt=[];let ts=-1;const sn=[];let zs=null,Zs=0;const Xa=Promise.resolve();let io=null;function $s(e){const t=io||Xa;return e?t.then(this?e.bind(this):e):t}function Qr(e){let t=ts+1,n=zt.length;for(;t<n;){const o=t+n>>>1,i=zt[o],a=In(i);a<e||a===e&&i.flags&2?t=o+1:n=o}return t}function mi(e){if(!(e.flags&1)){const t=In(e),n=zt[zt.length-1];!n||!(e.flags&2)&&t>=In(n)?zt.push(e):zt.splice(Qr(t),0,e),e.flags|=1,Za()}}function Za(){io||(io=Xa.then(tl))}function Yr(e){re(e)?sn.push(...e):zs&&e.id===-1?zs.splice(Zs+1,0,e):e.flags&1||(sn.push(e),e.flags|=1),Za()}function Li(e,t,n=ts+1){for(;n<zt.length;n++){const o=zt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;zt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function el(e){if(sn.length){const t=[...new Set(sn)].sort((n,o)=>In(n)-In(o));if(sn.length=0,zs){zs.push(...t);return}for(zs=t,Zs=0;Zs<zs.length;Zs++){const n=zs[Zs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zs=null,Zs=0}}const In=e=>e.id==null?e.flags&2?-1:1/0:e.id;function tl(e){try{for(ts=0;ts<zt.length;ts++){const t=zt[ts];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Nn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ts<zt.length;ts++){const t=zt[ts];t&&(t.flags&=-2)}ts=-1,zt.length=0,el(),io=null,(zt.length||sn.length)&&tl()}}let Vt=null,sl=null;function ao(e){const t=Vt;return Vt=e,sl=e&&e.type.__scopeId||null,t}function Is(e,t=Vt,n){if(!t||e._n)return e;const o=(...i)=>{o._d&&co(-1);const a=ao(t);let l;try{l=e(...i)}finally{ao(a),o._d&&co(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function te(e,t){if(Vt===null)return e;const n=Co(Vt),o=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,l,r,c=De]=t[i];a&&(xe(a)&&(a={mounted:a,updated:a}),a.deep&&vs(l),o.push({dir:a,instance:n,value:l,oldValue:void 0,arg:r,modifiers:c}))}return e}function Ls(e,t,n,o){const i=e.dirs,a=t&&t.dirs;for(let l=0;l<i.length;l++){const r=i[l];a&&(r.oldValue=a[l].value);let c=r.dir[o];c&&(xs(),Qt(c,n,8,[e.el,r,e,t]),gs())}}function Xr(e,t){if(Ct){let n=Ct.provides;const o=Ct.parent&&Ct.parent.provides;o===n&&(n=Ct.provides=Object.create(o)),n[e]=t}}function Xn(e,t,n=!1){const o=Pl();if(o||nn){let i=nn?nn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&xe(t)?t.call(o&&o.proxy):t}}const Zr=Symbol.for("v-scx"),ec=()=>Xn(Zr);function Hs(e,t,n){return nl(e,t,n)}function nl(e,t,n=De){const{immediate:o,deep:i,flush:a,once:l}=n,r=ut({},n),c=t&&o||!t&&a!=="post";let b;if(Tn){if(a==="sync"){const M=ec();b=M.__watcherHandles||(M.__watcherHandles=[])}else if(!c){const M=()=>{};return M.stop=os,M.resume=os,M.pause=os,M}}const d=Ct;r.call=(M,R,T)=>Qt(M,d,R,T);let u=!1;a==="post"?r.scheduler=M=>{_t(M,d&&d.suspense)}:a!=="sync"&&(u=!0,r.scheduler=(M,R)=>{R?M():mi(M)}),r.augmentJob=M=>{t&&(M.flags|=4),u&&(M.flags|=2,d&&(M.id=d.uid,M.i=d))};const y=qr(e,t,r);return Tn&&(b?b.push(y):c&&y()),y}function tc(e,t,n){const o=this.proxy,i=Je(e)?e.includes(".")?ol(o,e):()=>o[e]:e.bind(o,o);let a;xe(t)?a=t:(a=t.handler,n=t);const l=Rn(this),r=nl(i,a.bind(o),n);return l(),r}function ol(e,t){const n=t.split(".");return()=>{let o=e;for(let i=0;i<n.length&&o;i++)o=o[n[i]];return o}}const il=Symbol("_vte"),al=e=>e.__isTeleport,wn=e=>e&&(e.disabled||e.disabled===""),Di=e=>e&&(e.defer||e.defer===""),Bi=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ui=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Yo=(e,t)=>{const n=e&&e.to;return Je(n)?t?t(n):null:n},ll={name:"Teleport",__isTeleport:!0,process(e,t,n,o,i,a,l,r,c,b){const{mc:d,pc:u,pbc:y,o:{insert:M,querySelector:R,createText:T,createComment:L}}=b,z=wn(t.props);let{shapeFlag:$,children:I,dynamicChildren:j}=t;if(e==null){const A=t.el=T(""),q=t.anchor=T("");M(A,n,o),M(q,n,o);const de=(J,ne)=>{$&16&&d(I,J,ne,i,a,l,r,c)},pe=()=>{const J=t.target=Yo(t.props,R),ne=rl(J,t,T,M);J&&(l!=="svg"&&Bi(J)?l="svg":l!=="mathml"&&Ui(J)&&(l="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(J),z||(de(J,ne),Zn(t,!1)))};z&&(de(n,q),Zn(t,!0)),Di(t.props)?(t.el.__isMounted=!1,_t(()=>{pe(),delete t.el.__isMounted},a)):pe()}else{if(Di(t.props)&&e.el.__isMounted===!1){_t(()=>{ll.process(e,t,n,o,i,a,l,r,c,b)},a);return}t.el=e.el,t.targetStart=e.targetStart;const A=t.anchor=e.anchor,q=t.target=e.target,de=t.targetAnchor=e.targetAnchor,pe=wn(e.props),J=pe?n:q,ne=pe?A:de;if(l==="svg"||Bi(q)?l="svg":(l==="mathml"||Ui(q))&&(l="mathml"),j?(y(e.dynamicChildren,j,J,i,a,l,r),ki(e,t,!0)):c||u(e,t,J,ne,i,a,l,r,!1),z)pe?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Gn(t,n,A,b,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ee=t.target=Yo(t.props,R);ee&&Gn(t,ee,null,b,0)}else pe&&Gn(t,q,de,b,1);Zn(t,z)}},remove(e,t,n,{um:o,o:{remove:i}},a){const{shapeFlag:l,children:r,anchor:c,targetStart:b,targetAnchor:d,target:u,props:y}=e;if(u&&(i(b),i(d)),a&&i(c),l&16){const M=a||!wn(y);for(let R=0;R<r.length;R++){const T=r[R];o(T,t,n,M,!!T.dynamicChildren)}}},move:Gn,hydrate:sc};function Gn(e,t,n,{o:{insert:o},m:i},a=2){a===0&&o(e.targetAnchor,t,n);const{el:l,anchor:r,shapeFlag:c,children:b,props:d}=e,u=a===2;if(u&&o(l,t,n),(!u||wn(d))&&c&16)for(let y=0;y<b.length;y++)i(b[y],t,n,2);u&&o(r,t,n)}function sc(e,t,n,o,i,a,{o:{nextSibling:l,parentNode:r,querySelector:c,insert:b,createText:d}},u){function y(T,L,z,$){L.anchor=u(l(T),L,r(T),n,o,i,a),L.targetStart=z,L.targetAnchor=$}const M=t.target=Yo(t.props,c),R=wn(t.props);if(M){const T=M._lpa||M.firstChild;if(t.shapeFlag&16)if(R)y(e,t,T,T&&l(T));else{t.anchor=l(e);let L=T;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")t.targetStart=L;else if(L.data==="teleport anchor"){t.targetAnchor=L,M._lpa=t.targetAnchor&&l(t.targetAnchor);break}}L=l(L)}t.targetAnchor||rl(M,t,d,b),u(T&&l(T),t,M,n,o,i,a)}Zn(t,R)}else R&&t.shapeFlag&16&&y(e,t,e,l(e));return t.anchor&&l(t.anchor)}const mt=ll;function Zn(e,t){const n=e.ctx;if(n&&n.ut){let o,i;for(t?(o=e.el,i=e.anchor):(o=e.targetStart,i=e.targetAnchor);o&&o!==i;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function rl(e,t,n,o){const i=t.targetStart=n(""),a=t.targetAnchor=n("");return i[il]=a,e&&(o(i,e),o(a,e)),a}const fs=Symbol("_leaveCb"),qn=Symbol("_enterCb");function nc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lt(()=>{e.isMounted=!0}),xl(()=>{e.isUnmounting=!0}),e}const Ft=[Function,Array],cl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ft,onEnter:Ft,onAfterEnter:Ft,onEnterCancelled:Ft,onBeforeLeave:Ft,onLeave:Ft,onAfterLeave:Ft,onLeaveCancelled:Ft,onBeforeAppear:Ft,onAppear:Ft,onAfterAppear:Ft,onAppearCancelled:Ft},dl=e=>{const t=e.subTree;return t.component?dl(t.component):t},oc={name:"BaseTransition",props:cl,setup(e,{slots:t}){const n=Pl(),o=nc();return()=>{const i=t.default&&pl(t.default(),!0);if(!i||!i.length)return;const a=ul(i),l=we(e),{mode:r}=l;if(o.isLeaving)return Do(a);const c=Fi(a);if(!c)return Do(a);let b=Xo(c,l,o,n,u=>b=u);c.type!==$t&&Mn(c,b);let d=n.subTree&&Fi(n.subTree);if(d&&d.type!==$t&&!Vs(d,c)&&dl(n).type!==$t){let u=Xo(d,l,o,n);if(Mn(d,u),r==="out-in"&&c.type!==$t)return o.isLeaving=!0,u.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete u.afterLeave,d=void 0},Do(a);r==="in-out"&&c.type!==$t?u.delayLeave=(y,M,R)=>{const T=fl(o,d);T[String(d.key)]=d,y[fs]=()=>{M(),y[fs]=void 0,delete b.delayedLeave,d=void 0},b.delayedLeave=()=>{R(),delete b.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return a}}};function ul(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==$t){t=n;break}}return t}const ic=oc;function fl(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Xo(e,t,n,o,i){const{appear:a,mode:l,persisted:r=!1,onBeforeEnter:c,onEnter:b,onAfterEnter:d,onEnterCancelled:u,onBeforeLeave:y,onLeave:M,onAfterLeave:R,onLeaveCancelled:T,onBeforeAppear:L,onAppear:z,onAfterAppear:$,onAppearCancelled:I}=t,j=String(e.key),A=fl(n,e),q=(J,ne)=>{J&&Qt(J,o,9,ne)},de=(J,ne)=>{const ee=ne[1];q(J,ne),re(J)?J.every(W=>W.length<=1)&&ee():J.length<=1&&ee()},pe={mode:l,persisted:r,beforeEnter(J){let ne=c;if(!n.isMounted)if(a)ne=L||c;else return;J[fs]&&J[fs](!0);const ee=A[j];ee&&Vs(e,ee)&&ee.el[fs]&&ee.el[fs](),q(ne,[J])},enter(J){let ne=b,ee=d,W=u;if(!n.isMounted)if(a)ne=z||b,ee=$||d,W=I||u;else return;let D=!1;const k=J[qn]=m=>{D||(D=!0,m?q(W,[J]):q(ee,[J]),pe.delayedLeave&&pe.delayedLeave(),J[qn]=void 0)};ne?de(ne,[J,k]):k()},leave(J,ne){const ee=String(e.key);if(J[qn]&&J[qn](!0),n.isUnmounting)return ne();q(y,[J]);let W=!1;const D=J[fs]=k=>{W||(W=!0,ne(),k?q(T,[J]):q(R,[J]),J[fs]=void 0,A[ee]===e&&delete A[ee])};A[ee]=e,M?de(M,[J,D]):D()},clone(J){const ne=Xo(J,t,n,o,i);return i&&i(ne),ne}};return pe}function Do(e){if(ko(e))return e=Ts(e),e.children=null,e}function Fi(e){if(!ko(e))return al(e.type)&&e.children?ul(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&xe(n.default))return n.default()}}function Mn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Mn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function pl(e,t=!1,n){let o=[],i=0;for(let a=0;a<e.length;a++){let l=e[a];const r=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===se?(l.patchFlag&128&&i++,o=o.concat(pl(l.children,t,r))):(t||l.type!==$t)&&o.push(r!=null?Ts(l,{key:r}):l)}if(i>1)for(let a=0;a<o.length;a++)o[a].patchFlag=-2;return o}function vl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const lo=new WeakMap;function kn(e,t,n,o,i=!1){if(re(e)){e.forEach((R,T)=>kn(R,t&&(re(t)?t[T]:t),n,o,i));return}if(_n(o)&&!i){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&kn(e,t,n,o.component.subTree);return}const a=o.shapeFlag&4?Co(o.component):o.el,l=i?null:a,{i:r,r:c}=e,b=t&&t.r,d=r.refs===De?r.refs={}:r.refs,u=r.setupState,y=we(u),M=u===De?Ia:R=>Pe(y,R);if(b!=null&&b!==c){if(Vi(t),Je(b))d[b]=null,M(b)&&(u[b]=null);else if(dt(b)){b.value=null;const R=t;R.k&&(d[R.k]=null)}}if(xe(c))Nn(c,r,12,[l,d]);else{const R=Je(c),T=dt(c);if(R||T){const L=()=>{if(e.f){const z=R?M(c)?u[c]:d[c]:c.value;if(i)re(z)&&di(z,a);else if(re(z))z.includes(a)||z.push(a);else if(R)d[c]=[a],M(c)&&(u[c]=d[c]);else{const $=[a];c.value=$,e.k&&(d[e.k]=$)}}else R?(d[c]=l,M(c)&&(u[c]=l)):T&&(c.value=l,e.k&&(d[e.k]=l))};if(l){const z=()=>{L(),lo.delete(e)};z.id=-1,lo.set(e,z),_t(z,n)}else Vi(e),L()}}}function Vi(e){const t=lo.get(e);t&&(t.flags|=8,lo.delete(e))}mo().requestIdleCallback;mo().cancelIdleCallback;const _n=e=>!!e.type.__asyncLoader,ko=e=>e.type.__isKeepAlive;function ac(e,t){bl(e,"a",t)}function lc(e,t){bl(e,"da",t)}function bl(e,t,n=Ct){const o=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(_o(t,o,n),n){let i=n.parent;for(;i&&i.parent;)ko(i.parent.vnode)&&rc(o,t,n,i),i=i.parent}}function rc(e,t,n,o){const i=_o(t,e,o,!0);hi(()=>{di(o[t],i)},n)}function _o(e,t,n=Ct,o=!1){if(n){const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{xs();const r=Rn(n),c=Qt(t,n,e,l);return r(),gs(),c});return o?i.unshift(a):i.push(a),a}}const ys=e=>(t,n=Ct)=>{(!Tn||e==="sp")&&_o(e,(...o)=>t(...o),n)},cc=ys("bm"),Lt=ys("m"),dc=ys("bu"),uc=ys("u"),xl=ys("bum"),hi=ys("um"),fc=ys("sp"),pc=ys("rtg"),vc=ys("rtc");function bc(e,t=Ct){_o("ec",e,t)}const xc=Symbol.for("v-ndc");function be(e,t,n,o){let i;const a=n,l=re(e);if(l||Je(e)){const r=l&&Ws(e);let c=!1,b=!1;r&&(c=!Rt(e),b=ms(e),e=ho(e)),i=new Array(e.length);for(let d=0,u=e.length;d<u;d++)i[d]=t(c?b?an(Jt(e[d])):Jt(e[d]):e[d],d,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let r=0;r<e;r++)i[r]=t(r+1,r,void 0,a)}else if(Re(e))if(e[Symbol.iterator])i=Array.from(e,(r,c)=>t(r,c,void 0,a));else{const r=Object.keys(e);i=new Array(r.length);for(let c=0,b=r.length;c<b;c++){const d=r[c];i[c]=t(e[d],d,c,a)}}else i=[];return i}const Zo=e=>e?Ol(e)?Co(e):Zo(e.parent):null,zn=ut(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Zo(e.parent),$root:e=>Zo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ml(e),$forceUpdate:e=>e.f||(e.f=()=>{mi(e.update)}),$nextTick:e=>e.n||(e.n=$s.bind(e.proxy)),$watch:e=>tc.bind(e)}),Bo=(e,t)=>e!==De&&!e.__isScriptSetup&&Pe(e,t),gc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:i,props:a,accessCache:l,type:r,appContext:c}=e;if(t[0]!=="$"){const y=l[t];if(y!==void 0)switch(y){case 1:return o[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(Bo(o,t))return l[t]=1,o[t];if(i!==De&&Pe(i,t))return l[t]=2,i[t];if(Pe(a,t))return l[t]=3,a[t];if(n!==De&&Pe(n,t))return l[t]=4,n[t];ei&&(l[t]=0)}}const b=zn[t];let d,u;if(b)return t==="$attrs"&&gt(e.attrs,"get",""),b(e);if((d=r.__cssModules)&&(d=d[t]))return d;if(n!==De&&Pe(n,t))return l[t]=4,n[t];if(u=c.config.globalProperties,Pe(u,t))return u[t]},set({_:e},t,n){const{data:o,setupState:i,ctx:a}=e;return Bo(i,t)?(i[t]=n,!0):o!==De&&Pe(o,t)?(o[t]=n,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:i,props:a,type:l}},r){let c;return!!(n[r]||e!==De&&r[0]!=="$"&&Pe(e,r)||Bo(t,r)||Pe(a,r)||Pe(o,r)||Pe(zn,r)||Pe(i.config.globalProperties,r)||(c=l.__cssModules)&&c[r])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ki(e){return re(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ei=!0;function mc(e){const t=ml(e),n=e.proxy,o=e.ctx;ei=!1,t.beforeCreate&&Wi(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:l,watch:r,provide:c,inject:b,created:d,beforeMount:u,mounted:y,beforeUpdate:M,updated:R,activated:T,deactivated:L,beforeDestroy:z,beforeUnmount:$,destroyed:I,unmounted:j,render:A,renderTracked:q,renderTriggered:de,errorCaptured:pe,serverPrefetch:J,expose:ne,inheritAttrs:ee,components:W,directives:D,filters:k}=t;if(b&&hc(b,o,null),l)for(const V in l){const Z=l[V];xe(Z)&&(o[V]=Z.bind(n))}if(i){const V=i.call(n,n);Re(V)&&(e.data=Ps(V))}if(ei=!0,a)for(const V in a){const Z=a[V],Se=xe(Z)?Z.bind(n,n):xe(Z.get)?Z.get.bind(n,n):os,Be=!xe(Z)&&xe(Z.set)?Z.set.bind(n):os,ht=ve({get:Se,set:Be});Object.defineProperty(o,V,{enumerable:!0,configurable:!0,get:()=>ht.value,set:ie=>ht.value=ie})}if(r)for(const V in r)gl(r[V],o,n,V);if(c){const V=xe(c)?c.call(n):c;Reflect.ownKeys(V).forEach(Z=>{Xr(Z,V[Z])})}d&&Wi(d,e,"c");function P(V,Z){re(Z)?Z.forEach(Se=>V(Se.bind(n))):Z&&V(Z.bind(n))}if(P(cc,u),P(Lt,y),P(dc,M),P(uc,R),P(ac,T),P(lc,L),P(bc,pe),P(vc,q),P(pc,de),P(xl,$),P(hi,j),P(fc,J),re(ne))if(ne.length){const V=e.exposed||(e.exposed={});ne.forEach(Z=>{Object.defineProperty(V,Z,{get:()=>n[Z],set:Se=>n[Z]=Se,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===os&&(e.render=A),ee!=null&&(e.inheritAttrs=ee),W&&(e.components=W),D&&(e.directives=D),J&&vl(e)}function hc(e,t,n=os){re(e)&&(e=ti(e));for(const o in e){const i=e[o];let a;Re(i)?"default"in i?a=Xn(i.from||o,i.default,!0):a=Xn(i.from||o):a=Xn(i),dt(a)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[o]=a}}function Wi(e,t,n){Qt(re(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function gl(e,t,n,o){let i=o.includes(".")?ol(n,o):()=>n[o];if(Je(e)){const a=t[e];xe(a)&&Hs(i,a)}else if(xe(e))Hs(i,e.bind(n));else if(Re(e))if(re(e))e.forEach(a=>gl(a,t,n,o));else{const a=xe(e.handler)?e.handler.bind(n):t[e.handler];xe(a)&&Hs(i,a,e)}}function ml(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,r=a.get(t);let c;return r?c=r:!i.length&&!n&&!o?c=t:(c={},i.length&&i.forEach(b=>ro(c,b,l,!0)),ro(c,t,l)),Re(t)&&a.set(t,c),c}function ro(e,t,n,o=!1){const{mixins:i,extends:a}=t;a&&ro(e,a,n,!0),i&&i.forEach(l=>ro(e,l,n,!0));for(const l in t)if(!(o&&l==="expose")){const r=yc[l]||n&&n[l];e[l]=r?r(e[l],t[l]):t[l]}return e}const yc={data:Hi,props:Gi,emits:Gi,methods:gn,computed:gn,beforeCreate:kt,created:kt,beforeMount:kt,mounted:kt,beforeUpdate:kt,updated:kt,beforeDestroy:kt,beforeUnmount:kt,destroyed:kt,unmounted:kt,activated:kt,deactivated:kt,errorCaptured:kt,serverPrefetch:kt,components:gn,directives:gn,watch:kc,provide:Hi,inject:wc};function Hi(e,t){return t?e?function(){return ut(xe(e)?e.call(this,this):e,xe(t)?t.call(this,this):t)}:t:e}function wc(e,t){return gn(ti(e),ti(t))}function ti(e){if(re(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function kt(e,t){return e?[...new Set([].concat(e,t))]:t}function gn(e,t){return e?ut(Object.create(null),e,t):t}function Gi(e,t){return e?re(e)&&re(t)?[...new Set([...e,...t])]:ut(Object.create(null),Ki(e),Ki(t??{})):t}function kc(e,t){if(!e)return t;if(!t)return e;const n=ut(Object.create(null),e);for(const o in t)n[o]=kt(e[o],t[o]);return n}function hl(){return{app:null,config:{isNativeTag:Ia,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _c=0;function zc(e,t){return function(o,i=null){xe(o)||(o=ut({},o)),i!=null&&!Re(i)&&(i=null);const a=hl(),l=new WeakSet,r=[];let c=!1;const b=a.app={_uid:_c++,_component:o,_props:i,_container:null,_context:a,_instance:null,version:sd,get config(){return a.config},set config(d){},use(d,...u){return l.has(d)||(d&&xe(d.install)?(l.add(d),d.install(b,...u)):xe(d)&&(l.add(d),d(b,...u))),b},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),b},component(d,u){return u?(a.components[d]=u,b):a.components[d]},directive(d,u){return u?(a.directives[d]=u,b):a.directives[d]},mount(d,u,y){if(!c){const M=b._ceVNode||Ke(o,i);return M.appContext=a,y===!0?y="svg":y===!1&&(y=void 0),e(M,d,y),c=!0,b._container=d,d.__vue_app__=b,Co(M.component)}},onUnmount(d){r.push(d)},unmount(){c&&(Qt(r,b._instance,16),e(null,b._container),delete b._container.__vue_app__)},provide(d,u){return a.provides[d]=u,b},runWithContext(d){const u=nn;nn=b;try{return d()}finally{nn=u}}};return b}}let nn=null;const $c=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${js(t)}Modifiers`]||e[`${Es(t)}Modifiers`];function Cc(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||De;let i=n;const a=t.startsWith("update:"),l=a&&$c(o,t.slice(7));l&&(l.trim&&(i=n.map(d=>Je(d)?d.trim():d)),l.number&&(i=n.map(go)));let r,c=o[r=Po(t)]||o[r=Po(js(t))];!c&&a&&(c=o[r=Po(Es(t))]),c&&Qt(c,e,6,i);const b=o[r+"Once"];if(b){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,Qt(b,e,6,i)}}const Sc=new WeakMap;function yl(e,t,n=!1){const o=n?Sc:t.emitsCache,i=o.get(e);if(i!==void 0)return i;const a=e.emits;let l={},r=!1;if(!xe(e)){const c=b=>{const d=yl(b,t,!0);d&&(r=!0,ut(l,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!a&&!r?(Re(e)&&o.set(e,null),null):(re(a)?a.forEach(c=>l[c]=null):ut(l,a),Re(e)&&o.set(e,l),l)}function zo(e,t){return!e||!vo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,Es(t))||Pe(e,t))}function qi(e){const{type:t,vnode:n,proxy:o,withProxy:i,propsOptions:[a],slots:l,attrs:r,emit:c,render:b,renderCache:d,props:u,data:y,setupState:M,ctx:R,inheritAttrs:T}=e,L=ao(e);let z,$;try{if(n.shapeFlag&4){const j=i||o,A=j;z=ss(b.call(A,j,d,u,M,y,R)),$=r}else{const j=t;z=ss(j.length>1?j(u,{attrs:r,slots:l,emit:c}):j(u,null)),$=t.props?r:Ic(r)}}catch(j){$n.length=0,wo(j,e,1),z=Ke($t)}let I=z;if($&&T!==!1){const j=Object.keys($),{shapeFlag:A}=I;j.length&&A&7&&(a&&j.some(ci)&&($=Mc($,a)),I=Ts(I,$,!1,!0))}return n.dirs&&(I=Ts(I,null,!1,!0),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&Mn(I,n.transition),z=I,ao(L),z}const Ic=e=>{let t;for(const n in e)(n==="class"||n==="style"||vo(n))&&((t||(t={}))[n]=e[n]);return t},Mc=(e,t)=>{const n={};for(const o in e)(!ci(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function jc(e,t,n){const{props:o,children:i,component:a}=e,{props:l,children:r,patchFlag:c}=t,b=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return o?Ji(o,l,b):!!l;if(c&8){const d=t.dynamicProps;for(let u=0;u<d.length;u++){const y=d[u];if(l[y]!==o[y]&&!zo(b,y))return!0}}}else return(i||r)&&(!r||!r.$stable)?!0:o===l?!1:o?l?Ji(o,l,b):!0:!!l;return!1}function Ji(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let i=0;i<o.length;i++){const a=o[i];if(t[a]!==e[a]&&!zo(n,a))return!0}return!1}function Tc({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const wl={},kl=()=>Object.create(wl),_l=e=>Object.getPrototypeOf(e)===wl;function Ac(e,t,n,o=!1){const i={},a=kl();e.propsDefaults=Object.create(null),zl(e,t,i,a);for(const l in e.propsOptions[0])l in i||(i[l]=void 0);n?e.props=o?i:Rr(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function Ec(e,t,n,o){const{props:i,attrs:a,vnode:{patchFlag:l}}=e,r=we(i),[c]=e.propsOptions;let b=!1;if((o||l>0)&&!(l&16)){if(l&8){const d=e.vnode.dynamicProps;for(let u=0;u<d.length;u++){let y=d[u];if(zo(e.emitsOptions,y))continue;const M=t[y];if(c)if(Pe(a,y))M!==a[y]&&(a[y]=M,b=!0);else{const R=js(y);i[R]=si(c,r,R,M,e,!1)}else M!==a[y]&&(a[y]=M,b=!0)}}}else{zl(e,t,i,a)&&(b=!0);let d;for(const u in r)(!t||!Pe(t,u)&&((d=Es(u))===u||!Pe(t,d)))&&(c?n&&(n[u]!==void 0||n[d]!==void 0)&&(i[u]=si(c,r,u,void 0,e,!0)):delete i[u]);if(a!==r)for(const u in a)(!t||!Pe(t,u))&&(delete a[u],b=!0)}b&&ps(e.attrs,"set","")}function zl(e,t,n,o){const[i,a]=e.propsOptions;let l=!1,r;if(t)for(let c in t){if(mn(c))continue;const b=t[c];let d;i&&Pe(i,d=js(c))?!a||!a.includes(d)?n[d]=b:(r||(r={}))[d]=b:zo(e.emitsOptions,c)||(!(c in o)||b!==o[c])&&(o[c]=b,l=!0)}if(a){const c=we(n),b=r||De;for(let d=0;d<a.length;d++){const u=a[d];n[u]=si(i,c,u,b[u],e,!Pe(b,u))}}return l}function si(e,t,n,o,i,a){const l=e[n];if(l!=null){const r=Pe(l,"default");if(r&&o===void 0){const c=l.default;if(l.type!==Function&&!l.skipFactory&&xe(c)){const{propsDefaults:b}=i;if(n in b)o=b[n];else{const d=Rn(i);o=b[n]=c.call(null,t),d()}}else o=c;i.ce&&i.ce._setProp(n,o)}l[0]&&(a&&!r?o=!1:l[1]&&(o===""||o===Es(n))&&(o=!0))}return o}const Pc=new WeakMap;function $l(e,t,n=!1){const o=n?Pc:t.propsCache,i=o.get(e);if(i)return i;const a=e.props,l={},r=[];let c=!1;if(!xe(e)){const d=u=>{c=!0;const[y,M]=$l(u,t,!0);ut(l,y),M&&r.push(...M)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!c)return Re(e)&&o.set(e,en),en;if(re(a))for(let d=0;d<a.length;d++){const u=js(a[d]);Qi(u)&&(l[u]=De)}else if(a)for(const d in a){const u=js(d);if(Qi(u)){const y=a[d],M=l[u]=re(y)||xe(y)?{type:y}:ut({},y),R=M.type;let T=!1,L=!0;if(re(R))for(let z=0;z<R.length;++z){const $=R[z],I=xe($)&&$.name;if(I==="Boolean"){T=!0;break}else I==="String"&&(L=!1)}else T=xe(R)&&R.name==="Boolean";M[0]=T,M[1]=L,(T||Pe(M,"default"))&&r.push(u)}}const b=[l,r];return Re(e)&&o.set(e,b),b}function Qi(e){return e[0]!=="$"&&!mn(e)}const yi=e=>e==="_"||e==="_ctx"||e==="$stable",wi=e=>re(e)?e.map(ss):[ss(e)],Oc=(e,t,n)=>{if(t._n)return t;const o=Is((...i)=>wi(t(...i)),n);return o._c=!1,o},Cl=(e,t,n)=>{const o=e._ctx;for(const i in e){if(yi(i))continue;const a=e[i];if(xe(a))t[i]=Oc(i,a,o);else if(a!=null){const l=wi(a);t[i]=()=>l}}},Sl=(e,t)=>{const n=wi(t);e.slots.default=()=>n},Il=(e,t,n)=>{for(const o in t)(n||!yi(o))&&(e[o]=t[o])},Nc=(e,t,n)=>{const o=e.slots=kl();if(e.vnode.shapeFlag&32){const i=t._;i?(Il(o,t,n),n&&Ea(o,"_",i,!0)):Cl(t,o)}else t&&Sl(e,t)},Rc=(e,t,n)=>{const{vnode:o,slots:i}=e;let a=!0,l=De;if(o.shapeFlag&32){const r=t._;r?n&&r===1?a=!1:Il(i,t,n):(a=!t.$stable,Cl(t,i)),l=t}else t&&(Sl(e,t),l={default:1});if(a)for(const r in i)!yi(r)&&l[r]==null&&delete i[r]},_t=Fc;function Lc(e){return Dc(e)}function Dc(e,t){const n=mo();n.__VUE__=!0;const{insert:o,remove:i,patchProp:a,createElement:l,createText:r,createComment:c,setText:b,setElementText:d,parentNode:u,nextSibling:y,setScopeId:M=os,insertStaticContent:R}=e,T=(x,p,h,N=null,B=null,U=null,Q=void 0,H=null,G=!!p.dynamicChildren)=>{if(x===p)return;x&&!Vs(x,p)&&(N=it(x),ie(x,B,U,!0),x=null),p.patchFlag===-2&&(G=!1,p.dynamicChildren=null);const{type:F,ref:ce,shapeFlag:X}=p;switch(F){case $o:L(x,p,h,N);break;case $t:z(x,p,h,N);break;case eo:x==null&&$(p,h,N,Q);break;case se:W(x,p,h,N,B,U,Q,H,G);break;default:X&1?A(x,p,h,N,B,U,Q,H,G):X&6?D(x,p,h,N,B,U,Q,H,G):(X&64||X&128)&&F.process(x,p,h,N,B,U,Q,H,G,Et)}ce!=null&&B?kn(ce,x&&x.ref,U,p||x,!p):ce==null&&x&&x.ref!=null&&kn(x.ref,null,U,x,!0)},L=(x,p,h,N)=>{if(x==null)o(p.el=r(p.children),h,N);else{const B=p.el=x.el;p.children!==x.children&&b(B,p.children)}},z=(x,p,h,N)=>{x==null?o(p.el=c(p.children||""),h,N):p.el=x.el},$=(x,p,h,N)=>{[x.el,x.anchor]=R(x.children,p,h,N,x.el,x.anchor)},I=({el:x,anchor:p},h,N)=>{let B;for(;x&&x!==p;)B=y(x),o(x,h,N),x=B;o(p,h,N)},j=({el:x,anchor:p})=>{let h;for(;x&&x!==p;)h=y(x),i(x),x=h;i(p)},A=(x,p,h,N,B,U,Q,H,G)=>{if(p.type==="svg"?Q="svg":p.type==="math"&&(Q="mathml"),x==null)q(p,h,N,B,U,Q,H,G);else{const F=x.el&&x.el._isVueCE?x.el:null;try{F&&F._beginPatch(),J(x,p,B,U,Q,H,G)}finally{F&&F._endPatch()}}},q=(x,p,h,N,B,U,Q,H)=>{let G,F;const{props:ce,shapeFlag:X,transition:oe,dirs:fe}=x;if(G=x.el=l(x.type,U,ce&&ce.is,ce),X&8?d(G,x.children):X&16&&pe(x.children,G,null,N,B,Uo(x,U),Q,H),fe&&Ls(x,null,N,"created"),de(G,x,x.scopeId,Q,N),ce){for(const Ne in ce)Ne!=="value"&&!mn(Ne)&&a(G,Ne,null,ce[Ne],U,N);"value"in ce&&a(G,"value",null,ce.value,U),(F=ce.onVnodeBeforeMount)&&es(F,N,x)}fe&&Ls(x,null,N,"beforeMount");const ke=Bc(B,oe);ke&&oe.beforeEnter(G),o(G,p,h),((F=ce&&ce.onVnodeMounted)||ke||fe)&&_t(()=>{F&&es(F,N,x),ke&&oe.enter(G),fe&&Ls(x,null,N,"mounted")},B)},de=(x,p,h,N,B)=>{if(h&&M(x,h),N)for(let U=0;U<N.length;U++)M(x,N[U]);if(B){let U=B.subTree;if(p===U||Tl(U.type)&&(U.ssContent===p||U.ssFallback===p)){const Q=B.vnode;de(x,Q,Q.scopeId,Q.slotScopeIds,B.parent)}}},pe=(x,p,h,N,B,U,Q,H,G=0)=>{for(let F=G;F<x.length;F++){const ce=x[F]=H?Cs(x[F]):ss(x[F]);T(null,ce,p,h,N,B,U,Q,H)}},J=(x,p,h,N,B,U,Q)=>{const H=p.el=x.el;let{patchFlag:G,dynamicChildren:F,dirs:ce}=p;G|=x.patchFlag&16;const X=x.props||De,oe=p.props||De;let fe;if(h&&Ds(h,!1),(fe=oe.onVnodeBeforeUpdate)&&es(fe,h,p,x),ce&&Ls(p,x,h,"beforeUpdate"),h&&Ds(h,!0),(X.innerHTML&&oe.innerHTML==null||X.textContent&&oe.textContent==null)&&d(H,""),F?ne(x.dynamicChildren,F,H,h,N,Uo(p,B),U):Q||Z(x,p,H,null,h,N,Uo(p,B),U,!1),G>0){if(G&16)ee(H,X,oe,h,B);else if(G&2&&X.class!==oe.class&&a(H,"class",null,oe.class,B),G&4&&a(H,"style",X.style,oe.style,B),G&8){const ke=p.dynamicProps;for(let Ne=0;Ne<ke.length;Ne++){const je=ke[Ne],Te=X[je],ge=oe[je];(ge!==Te||je==="value")&&a(H,je,Te,ge,B,h)}}G&1&&x.children!==p.children&&d(H,p.children)}else!Q&&F==null&&ee(H,X,oe,h,B);((fe=oe.onVnodeUpdated)||ce)&&_t(()=>{fe&&es(fe,h,p,x),ce&&Ls(p,x,h,"updated")},N)},ne=(x,p,h,N,B,U,Q)=>{for(let H=0;H<p.length;H++){const G=x[H],F=p[H],ce=G.el&&(G.type===se||!Vs(G,F)||G.shapeFlag&198)?u(G.el):h;T(G,F,ce,null,N,B,U,Q,!0)}},ee=(x,p,h,N,B)=>{if(p!==h){if(p!==De)for(const U in p)!mn(U)&&!(U in h)&&a(x,U,p[U],null,B,N);for(const U in h){if(mn(U))continue;const Q=h[U],H=p[U];Q!==H&&U!=="value"&&a(x,U,H,Q,B,N)}"value"in h&&a(x,"value",p.value,h.value,B)}},W=(x,p,h,N,B,U,Q,H,G)=>{const F=p.el=x?x.el:r(""),ce=p.anchor=x?x.anchor:r("");let{patchFlag:X,dynamicChildren:oe,slotScopeIds:fe}=p;fe&&(H=H?H.concat(fe):fe),x==null?(o(F,h,N),o(ce,h,N),pe(p.children||[],h,ce,B,U,Q,H,G)):X>0&&X&64&&oe&&x.dynamicChildren&&x.dynamicChildren.length===oe.length?(ne(x.dynamicChildren,oe,h,B,U,Q,H),(p.key!=null||B&&p===B.subTree)&&ki(x,p,!0)):Z(x,p,h,ce,B,U,Q,H,G)},D=(x,p,h,N,B,U,Q,H,G)=>{p.slotScopeIds=H,x==null?p.shapeFlag&512?B.ctx.activate(p,h,N,Q,G):k(p,h,N,B,U,Q,G):m(x,p,G)},k=(x,p,h,N,B,U,Q)=>{const H=x.component=Jc(x,N,B);if(ko(x)&&(H.ctx.renderer=Et),Qc(H,!1,Q),H.asyncDep){if(B&&B.registerDep(H,P,Q),!x.el){const G=H.subTree=Ke($t);z(null,G,p,h),x.placeholder=G.el}}else P(H,x,p,h,B,U,Q)},m=(x,p,h)=>{const N=p.component=x.component;if(jc(x,p,h))if(N.asyncDep&&!N.asyncResolved){V(N,p,h);return}else N.next=p,N.update();else p.el=x.el,N.vnode=p},P=(x,p,h,N,B,U,Q)=>{const H=()=>{if(x.isMounted){let{next:X,bu:oe,u:fe,parent:ke,vnode:Ne}=x;{const at=Ml(x);if(at){X&&(X.el=Ne.el,V(x,X,Q)),at.asyncDep.then(()=>{x.isUnmounted||H()});return}}let je=X,Te;Ds(x,!1),X?(X.el=Ne.el,V(x,X,Q)):X=Ne,oe&&Yn(oe),(Te=X.props&&X.props.onVnodeBeforeUpdate)&&es(Te,ke,X,Ne),Ds(x,!0);const ge=qi(x),It=x.subTree;x.subTree=ge,T(It,ge,u(It.el),it(It),x,B,U),X.el=ge.el,je===null&&Tc(x,ge.el),fe&&_t(fe,B),(Te=X.props&&X.props.onVnodeUpdated)&&_t(()=>es(Te,ke,X,Ne),B)}else{let X;const{el:oe,props:fe}=p,{bm:ke,m:Ne,parent:je,root:Te,type:ge}=x,It=_n(p);Ds(x,!1),ke&&Yn(ke),!It&&(X=fe&&fe.onVnodeBeforeMount)&&es(X,je,p),Ds(x,!0);{Te.ce&&Te.ce._def.shadowRoot!==!1&&Te.ce._injectChildStyle(ge);const at=x.subTree=qi(x);T(null,at,h,N,x,B,U),p.el=at.el}if(Ne&&_t(Ne,B),!It&&(X=fe&&fe.onVnodeMounted)){const at=p;_t(()=>es(X,je,at),B)}(p.shapeFlag&256||je&&_n(je.vnode)&&je.vnode.shapeFlag&256)&&x.a&&_t(x.a,B),x.isMounted=!0,p=h=N=null}};x.scope.on();const G=x.effect=new Ra(H);x.scope.off();const F=x.update=G.run.bind(G),ce=x.job=G.runIfDirty.bind(G);ce.i=x,ce.id=x.uid,G.scheduler=()=>mi(ce),Ds(x,!0),F()},V=(x,p,h)=>{p.component=x;const N=x.vnode.props;x.vnode=p,x.next=null,Ec(x,p.props,N,h),Rc(x,p.children,h),xs(),Li(x),gs()},Z=(x,p,h,N,B,U,Q,H,G=!1)=>{const F=x&&x.children,ce=x?x.shapeFlag:0,X=p.children,{patchFlag:oe,shapeFlag:fe}=p;if(oe>0){if(oe&128){Be(F,X,h,N,B,U,Q,H,G);return}else if(oe&256){Se(F,X,h,N,B,U,Q,H,G);return}}fe&8?(ce&16&&Me(F,B,U),X!==F&&d(h,X)):ce&16?fe&16?Be(F,X,h,N,B,U,Q,H,G):Me(F,B,U,!0):(ce&8&&d(h,""),fe&16&&pe(X,h,N,B,U,Q,H,G))},Se=(x,p,h,N,B,U,Q,H,G)=>{x=x||en,p=p||en;const F=x.length,ce=p.length,X=Math.min(F,ce);let oe;for(oe=0;oe<X;oe++){const fe=p[oe]=G?Cs(p[oe]):ss(p[oe]);T(x[oe],fe,h,null,B,U,Q,H,G)}F>ce?Me(x,B,U,!0,!1,X):pe(p,h,N,B,U,Q,H,G,X)},Be=(x,p,h,N,B,U,Q,H,G)=>{let F=0;const ce=p.length;let X=x.length-1,oe=ce-1;for(;F<=X&&F<=oe;){const fe=x[F],ke=p[F]=G?Cs(p[F]):ss(p[F]);if(Vs(fe,ke))T(fe,ke,h,null,B,U,Q,H,G);else break;F++}for(;F<=X&&F<=oe;){const fe=x[X],ke=p[oe]=G?Cs(p[oe]):ss(p[oe]);if(Vs(fe,ke))T(fe,ke,h,null,B,U,Q,H,G);else break;X--,oe--}if(F>X){if(F<=oe){const fe=oe+1,ke=fe<ce?p[fe].el:N;for(;F<=oe;)T(null,p[F]=G?Cs(p[F]):ss(p[F]),h,ke,B,U,Q,H,G),F++}}else if(F>oe)for(;F<=X;)ie(x[F],B,U,!0),F++;else{const fe=F,ke=F,Ne=new Map;for(F=ke;F<=oe;F++){const wt=p[F]=G?Cs(p[F]):ss(p[F]);wt.key!=null&&Ne.set(wt.key,F)}let je,Te=0;const ge=oe-ke+1;let It=!1,at=0;const yt=new Array(ge);for(F=0;F<ge;F++)yt[F]=0;for(F=fe;F<=X;F++){const wt=x[F];if(Te>=ge){ie(wt,B,U,!0);continue}let Dt;if(wt.key!=null)Dt=Ne.get(wt.key);else for(je=ke;je<=oe;je++)if(yt[je-ke]===0&&Vs(wt,p[je])){Dt=je;break}Dt===void 0?ie(wt,B,U,!0):(yt[Dt-ke]=F+1,Dt>=at?at=Dt:It=!0,T(wt,p[Dt],h,null,B,U,Q,H,G),Te++)}const bt=It?Uc(yt):en;for(je=bt.length-1,F=ge-1;F>=0;F--){const wt=ke+F,Dt=p[wt],Bn=p[wt+1],Un=wt+1<ce?Bn.el||jl(Bn):N;yt[F]===0?T(null,Dt,h,Un,B,U,Q,H,G):It&&(je<0||F!==bt[je]?ht(Dt,h,Un,2):je--)}}},ht=(x,p,h,N,B=null)=>{const{el:U,type:Q,transition:H,children:G,shapeFlag:F}=x;if(F&6){ht(x.component.subTree,p,h,N);return}if(F&128){x.suspense.move(p,h,N);return}if(F&64){Q.move(x,p,h,Et);return}if(Q===se){o(U,p,h);for(let X=0;X<G.length;X++)ht(G[X],p,h,N);o(x.anchor,p,h);return}if(Q===eo){I(x,p,h);return}if(N!==2&&F&1&&H)if(N===0)H.beforeEnter(U),o(U,p,h),_t(()=>H.enter(U),B);else{const{leave:X,delayLeave:oe,afterLeave:fe}=H,ke=()=>{x.ctx.isUnmounted?i(U):o(U,p,h)},Ne=()=>{U._isLeaving&&U[fs](!0),X(U,()=>{ke(),fe&&fe()})};oe?oe(U,ke,Ne):Ne()}else o(U,p,h)},ie=(x,p,h,N=!1,B=!1)=>{const{type:U,props:Q,ref:H,children:G,dynamicChildren:F,shapeFlag:ce,patchFlag:X,dirs:oe,cacheIndex:fe}=x;if(X===-2&&(B=!1),H!=null&&(xs(),kn(H,null,h,x,!0),gs()),fe!=null&&(p.renderCache[fe]=void 0),ce&256){p.ctx.deactivate(x);return}const ke=ce&1&&oe,Ne=!_n(x);let je;if(Ne&&(je=Q&&Q.onVnodeBeforeUnmount)&&es(je,p,x),ce&6)Ie(x.component,h,N);else{if(ce&128){x.suspense.unmount(h,N);return}ke&&Ls(x,null,p,"beforeUnmount"),ce&64?x.type.remove(x,p,h,Et,N):F&&!F.hasOnce&&(U!==se||X>0&&X&64)?Me(F,p,h,!1,!0):(U===se&&X&384||!B&&ce&16)&&Me(G,p,h),N&&We(x)}(Ne&&(je=Q&&Q.onVnodeUnmounted)||ke)&&_t(()=>{je&&es(je,p,x),ke&&Ls(x,null,p,"unmounted")},h)},We=x=>{const{type:p,el:h,anchor:N,transition:B}=x;if(p===se){Qe(h,N);return}if(p===eo){j(x);return}const U=()=>{i(h),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(x.shapeFlag&1&&B&&!B.persisted){const{leave:Q,delayLeave:H}=B,G=()=>Q(h,U);H?H(x.el,U,G):G()}else U()},Qe=(x,p)=>{let h;for(;x!==p;)h=y(x),i(x),x=h;i(p)},Ie=(x,p,h)=>{const{bum:N,scope:B,job:U,subTree:Q,um:H,m:G,a:F}=x;Yi(G),Yi(F),N&&Yn(N),B.stop(),U&&(U.flags|=8,ie(Q,x,p,h)),H&&_t(H,p),_t(()=>{x.isUnmounted=!0},p)},Me=(x,p,h,N=!1,B=!1,U=0)=>{for(let Q=U;Q<x.length;Q++)ie(x[Q],p,h,N,B)},it=x=>{if(x.shapeFlag&6)return it(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const p=y(x.anchor||x.el),h=p&&p[il];return h?y(h):p};let ft=!1;const Ht=(x,p,h)=>{let N;x==null?p._vnode&&(ie(p._vnode,null,null,!0),N=p._vnode.component):T(p._vnode||null,x,p,null,null,null,h),p._vnode=x,ft||(ft=!0,Li(N),el(),ft=!1)},Et={p:T,um:ie,m:ht,r:We,mt:k,mc:pe,pc:Z,pbc:ne,n:it,o:e};return{render:Ht,hydrate:void 0,createApp:zc(Ht)}}function Uo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ds({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Bc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ki(e,t,n=!1){const o=e.children,i=t.children;if(re(o)&&re(i))for(let a=0;a<o.length;a++){const l=o[a];let r=i[a];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=i[a]=Cs(i[a]),r.el=l.el),!n&&r.patchFlag!==-2&&ki(l,r)),r.type===$o&&(r.patchFlag!==-1?r.el=l.el:r.__elIndex=a+(e.type===se?1:0)),r.type===$t&&!r.el&&(r.el=l.el)}}function Uc(e){const t=e.slice(),n=[0];let o,i,a,l,r;const c=e.length;for(o=0;o<c;o++){const b=e[o];if(b!==0){if(i=n[n.length-1],e[i]<b){t[o]=i,n.push(o);continue}for(a=0,l=n.length-1;a<l;)r=a+l>>1,e[n[r]]<b?a=r+1:l=r;b<e[n[a]]&&(a>0&&(t[o]=n[a-1]),n[a]=o)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function Ml(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ml(t)}function Yi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function jl(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?jl(t.subTree):null}const Tl=e=>e.__isSuspense;function Fc(e,t){t&&t.pendingBranch?re(e)?t.effects.push(...e):t.effects.push(e):Yr(e)}const se=Symbol.for("v-fgt"),$o=Symbol.for("v-txt"),$t=Symbol.for("v-cmt"),eo=Symbol.for("v-stc"),$n=[];let Nt=null;function f(e=!1){$n.push(Nt=e?null:[])}function Vc(){$n.pop(),Nt=$n[$n.length-1]||null}let jn=1;function co(e,t=!1){jn+=e,e<0&&Nt&&t&&(Nt.hasOnce=!0)}function Al(e){return e.dynamicChildren=jn>0?Nt||en:null,Vc(),jn>0&&Nt&&Nt.push(e),e}function v(e,t,n,o,i,a){return Al(s(e,t,n,o,i,a,!0))}function ye(e,t,n,o,i){return Al(Ke(e,t,n,o,i,!0))}function uo(e){return e?e.__v_isVNode===!0:!1}function Vs(e,t){return e.type===t.type&&e.key===t.key}const El=({key:e})=>e??null,to=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Je(e)||dt(e)||xe(e)?{i:Vt,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,i=null,a=e===se?0:1,l=!1,r=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&El(t),ref:t&&to(t),scopeId:sl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:o,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Vt};return r?(_i(c,n),a&128&&e.normalize(c)):n&&(c.shapeFlag|=Je(n)?8:16),jn>0&&!l&&Nt&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Nt.push(c),c}const Ke=Kc;function Kc(e,t=null,n=null,o=0,i=null,a=!1){if((!e||e===xc)&&(e=$t),uo(e)){const r=Ts(e,t,!0);return n&&_i(r,n),jn>0&&!a&&Nt&&(r.shapeFlag&6?Nt[Nt.indexOf(e)]=r:Nt.push(r)),r.patchFlag=-2,r}if(ed(e)&&(e=e.__vccOpts),t){t=Wc(t);let{class:r,style:c}=t;r&&!Je(r)&&(t.class=K(r)),Re(c)&&(yo(c)&&!re(c)&&(c=ut({},c)),t.style=Ve(c))}const l=Je(e)?1:Tl(e)?128:al(e)?64:Re(e)?4:xe(e)?2:0;return s(e,t,n,o,i,l,a,!0)}function Wc(e){return e?yo(e)||_l(e)?ut({},e):e:null}function Ts(e,t,n=!1,o=!1){const{props:i,ref:a,patchFlag:l,children:r,transition:c}=e,b=t?Hc(i||{},t):i,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:b,key:b&&El(b),ref:t&&t.ref?n&&a?re(a)?a.concat(to(t)):[a,to(t)]:to(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==se?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ts(e.ssContent),ssFallback:e.ssFallback&&Ts(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&o&&Mn(d,c.clone(d)),d}function hs(e=" ",t=0){return Ke($o,null,e,t)}function nt(e,t){const n=Ke(eo,null,e);return n.staticCount=t,n}function O(e="",t=!1){return t?(f(),ye($t,null,e)):Ke($t,null,e)}function ss(e){return e==null||typeof e=="boolean"?Ke($t):re(e)?Ke(se,null,e.slice()):uo(e)?Cs(e):Ke($o,null,String(e))}function Cs(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ts(e)}function _i(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(re(t))n=16;else if(typeof t=="object")if(o&65){const i=t.default;i&&(i._c&&(i._d=!1),_i(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!_l(t)?t._ctx=Vt:i===3&&Vt&&(Vt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else xe(t)?(t={default:t,_ctx:Vt},n=32):(t=String(t),o&64?(n=16,t=[hs(t)]):n=8);e.children=t,e.shapeFlag|=n}function Hc(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const i in o)if(i==="class")t.class!==o.class&&(t.class=K([t.class,o.class]));else if(i==="style")t.style=Ve([t.style,o.style]);else if(vo(i)){const a=t[i],l=o[i];l&&a!==l&&!(re(a)&&a.includes(l))&&(t[i]=a?[].concat(a,l):l)}else i!==""&&(t[i]=o[i])}return t}function es(e,t,n,o=null){Qt(e,t,7,[n,o])}const Gc=hl();let qc=0;function Jc(e,t,n){const o=e.type,i=(t?t.appContext:e.appContext)||Gc,a={uid:qc++,vnode:e,type:o,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$l(o,i),emitsOptions:yl(o,i),emit:null,emitted:null,propsDefaults:De,inheritAttrs:o.inheritAttrs,ctx:De,data:De,props:De,attrs:De,slots:De,refs:De,setupState:De,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Cc.bind(null,a),e.ce&&e.ce(a),a}let Ct=null;const Pl=()=>Ct||Vt;let fo,ni;{const e=mo(),t=(n,o)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(o),a=>{i.length>1?i.forEach(l=>l(a)):i[0](a)}};fo=t("__VUE_INSTANCE_SETTERS__",n=>Ct=n),ni=t("__VUE_SSR_SETTERS__",n=>Tn=n)}const Rn=e=>{const t=Ct;return fo(e),e.scope.on(),()=>{e.scope.off(),fo(t)}},Xi=()=>{Ct&&Ct.scope.off(),fo(null)};function Ol(e){return e.vnode.shapeFlag&4}let Tn=!1;function Qc(e,t=!1,n=!1){t&&ni(t);const{props:o,children:i}=e.vnode,a=Ol(e);Ac(e,o,a,t),Nc(e,i,n||t);const l=a?Yc(e,t):void 0;return t&&ni(!1),l}function Yc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,gc);const{setup:o}=n;if(o){xs();const i=e.setupContext=o.length>1?Zc(e):null,a=Rn(e),l=Nn(o,e,0,[e.props,i]),r=Ma(l);if(gs(),a(),(r||e.sp)&&!_n(e)&&vl(e),r){if(l.then(Xi,Xi),t)return l.then(c=>{Zi(e,c)}).catch(c=>{wo(c,e,0)});e.asyncDep=l}else Zi(e,l)}else Nl(e)}function Zi(e,t,n){xe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=Ya(t)),Nl(e)}function Nl(e,t,n){const o=e.type;e.render||(e.render=o.render||os);{const i=Rn(e);xs();try{mc(e)}finally{gs(),i()}}}const Xc={get(e,t){return gt(e,"get",""),e[t]}};function Zc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Xc),slots:e.slots,emit:e.emit,expose:t}}function Co(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ya(Lr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in zn)return zn[n](e)},has(t,n){return n in t||n in zn}})):e.proxy}function ed(e){return xe(e)&&"__vccOpts"in e}const ve=(e,t)=>Hr(e,t,Tn);function td(e,t,n){try{co(-1);const o=arguments.length;return o===2?Re(t)&&!re(t)?uo(t)?Ke(e,null,[t]):Ke(e,t):Ke(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&uo(n)&&(n=[n]),Ke(e,t,n))}finally{co(1)}}const sd="3.5.27";let oi;const ea=typeof window<"u"&&window.trustedTypes;if(ea)try{oi=ea.createPolicy("vue",{createHTML:e=>e})}catch{}const Rl=oi?e=>oi.createHTML(e):e=>e,nd="http://www.w3.org/2000/svg",od="http://www.w3.org/1998/Math/MathML",us=typeof document<"u"?document:null,ta=us&&us.createElement("template"),id={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const i=t==="svg"?us.createElementNS(nd,e):t==="mathml"?us.createElementNS(od,e):n?us.createElement(e,{is:n}):us.createElement(e);return e==="select"&&o&&o.multiple!=null&&i.setAttribute("multiple",o.multiple),i},createText:e=>us.createTextNode(e),createComment:e=>us.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>us.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,i,a){const l=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{ta.innerHTML=Rl(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const r=ta.content;if(o==="svg"||o==="mathml"){const c=r.firstChild;for(;c.firstChild;)r.appendChild(c.firstChild);r.removeChild(c)}t.insertBefore(r,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ks="transition",pn="animation",An=Symbol("_vtc"),Ll={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ad=ut({},cl,Ll),ld=e=>(e.displayName="Transition",e.props=ad,e),Gs=ld((e,{slots:t})=>td(ic,rd(e),t)),Bs=(e,t=[])=>{re(e)?e.forEach(n=>n(...t)):e&&e(...t)},sa=e=>e?re(e)?e.some(t=>t.length>1):e.length>1:!1;function rd(e){const t={};for(const W in e)W in Ll||(t[W]=e[W]);if(e.css===!1)return t;const{name:n="v",type:o,duration:i,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:c=a,appearActiveClass:b=l,appearToClass:d=r,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:y=`${n}-leave-active`,leaveToClass:M=`${n}-leave-to`}=e,R=cd(i),T=R&&R[0],L=R&&R[1],{onBeforeEnter:z,onEnter:$,onEnterCancelled:I,onLeave:j,onLeaveCancelled:A,onBeforeAppear:q=z,onAppear:de=$,onAppearCancelled:pe=I}=t,J=(W,D,k,m)=>{W._enterCancelled=m,Us(W,D?d:r),Us(W,D?b:l),k&&k()},ne=(W,D)=>{W._isLeaving=!1,Us(W,u),Us(W,M),Us(W,y),D&&D()},ee=W=>(D,k)=>{const m=W?de:$,P=()=>J(D,W,k);Bs(m,[D,P]),na(()=>{Us(D,W?c:a),ds(D,W?d:r),sa(m)||oa(D,o,T,P)})};return ut(t,{onBeforeEnter(W){Bs(z,[W]),ds(W,a),ds(W,l)},onBeforeAppear(W){Bs(q,[W]),ds(W,c),ds(W,b)},onEnter:ee(!1),onAppear:ee(!0),onLeave(W,D){W._isLeaving=!0;const k=()=>ne(W,D);ds(W,u),W._enterCancelled?(ds(W,y),la(W)):(la(W),ds(W,y)),na(()=>{W._isLeaving&&(Us(W,u),ds(W,M),sa(j)||oa(W,o,L,k))}),Bs(j,[W,k])},onEnterCancelled(W){J(W,!1,void 0,!0),Bs(I,[W])},onAppearCancelled(W){J(W,!0,void 0,!0),Bs(pe,[W])},onLeaveCancelled(W){ne(W),Bs(A,[W])}})}function cd(e){if(e==null)return null;if(Re(e))return[Fo(e.enter),Fo(e.leave)];{const t=Fo(e);return[t,t]}}function Fo(e){return rr(e)}function ds(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[An]||(e[An]=new Set)).add(t)}function Us(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[An];n&&(n.delete(t),n.size||(e[An]=void 0))}function na(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let dd=0;function oa(e,t,n,o){const i=e._endId=++dd,a=()=>{i===e._endId&&o()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:r,propCount:c}=ud(e,t);if(!l)return o();const b=l+"end";let d=0;const u=()=>{e.removeEventListener(b,y),a()},y=M=>{M.target===e&&++d>=c&&u()};setTimeout(()=>{d<c&&u()},r+1),e.addEventListener(b,y)}function ud(e,t){const n=window.getComputedStyle(e),o=R=>(n[R]||"").split(", "),i=o(`${ks}Delay`),a=o(`${ks}Duration`),l=ia(i,a),r=o(`${pn}Delay`),c=o(`${pn}Duration`),b=ia(r,c);let d=null,u=0,y=0;t===ks?l>0&&(d=ks,u=l,y=a.length):t===pn?b>0&&(d=pn,u=b,y=c.length):(u=Math.max(l,b),d=u>0?l>b?ks:pn:null,y=d?d===ks?a.length:c.length:0);const M=d===ks&&/\b(?:transform|all)(?:,|$)/.test(o(`${ks}Property`).toString());return{type:d,timeout:u,propCount:y,hasTransform:M}}function ia(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>aa(n)+aa(e[o])))}function aa(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function la(e){return(e?e.ownerDocument:document).body.offsetHeight}function fd(e,t,n){const o=e[An];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const po=Symbol("_vod"),Dl=Symbol("_vsh"),pd={name:"show",beforeMount(e,{value:t},{transition:n}){e[po]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):vn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),vn(e,!0),o.enter(e)):o.leave(e,()=>{vn(e,!1)}):vn(e,t))},beforeUnmount(e,{value:t}){vn(e,t)}};function vn(e,t){e.style.display=t?e[po]:"none",e[Dl]=!t}const vd=Symbol(""),bd=/(?:^|;)\s*display\s*:/;function xd(e,t,n){const o=e.style,i=Je(n);let a=!1;if(n&&!i){if(t)if(Je(t))for(const l of t.split(";")){const r=l.slice(0,l.indexOf(":")).trim();n[r]==null&&so(o,r,"")}else for(const l in t)n[l]==null&&so(o,l,"");for(const l in n)l==="display"&&(a=!0),so(o,l,n[l])}else if(i){if(t!==n){const l=o[vd];l&&(n+=";"+l),o.cssText=n,a=bd.test(n)}}else t&&e.removeAttribute("style");po in e&&(e[po]=a?o.display:"",e[Dl]&&(o.display="none"))}const ra=/\s*!important$/;function so(e,t,n){if(re(n))n.forEach(o=>so(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=gd(e,t);ra.test(n)?e.setProperty(Es(o),n.replace(ra,""),"important"):e[o]=n}}const ca=["Webkit","Moz","ms"],Vo={};function gd(e,t){const n=Vo[t];if(n)return n;let o=js(t);if(o!=="filter"&&o in e)return Vo[t]=o;o=Aa(o);for(let i=0;i<ca.length;i++){const a=ca[i]+o;if(a in e)return Vo[t]=a}return t}const da="http://www.w3.org/1999/xlink";function ua(e,t,n,o,i,a=vr(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(da,t.slice(6,t.length)):e.setAttributeNS(da,t,n):n==null||a&&!Pa(n)?e.removeAttribute(t):e.setAttribute(t,a?"":is(n)?String(n):n)}function fa(e,t,n,o,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Rl(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const r=a==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(r!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const r=typeof e[t];r==="boolean"?n=Pa(n):n==null&&r==="string"?(n="",l=!0):r==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(i||t)}function bs(e,t,n,o){e.addEventListener(t,n,o)}function md(e,t,n,o){e.removeEventListener(t,n,o)}const pa=Symbol("_vei");function hd(e,t,n,o,i=null){const a=e[pa]||(e[pa]={}),l=a[t];if(o&&l)l.value=o;else{const[r,c]=yd(t);if(o){const b=a[t]=_d(o,i);bs(e,r,b,c)}else l&&(md(e,r,l,c),a[t]=void 0)}}const va=/(?:Once|Passive|Capture)$/;function yd(e){let t;if(va.test(e)){t={};let o;for(;o=e.match(va);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Es(e.slice(2)),t]}let Ko=0;const wd=Promise.resolve(),kd=()=>Ko||(wd.then(()=>Ko=0),Ko=Date.now());function _d(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Qt(zd(o,n.value),t,5,[o])};return n.value=e,n.attached=kd(),n}function zd(e,t){if(re(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>i=>!i._stopped&&o&&o(i))}else return t}const ba=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$d=(e,t,n,o,i,a)=>{const l=i==="svg";t==="class"?fd(e,o,l):t==="style"?xd(e,n,o):vo(t)?ci(t)||hd(e,t,n,o,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Cd(e,t,o,l))?(fa(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ua(e,t,o,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Je(o))?fa(e,js(t),o,a,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),ua(e,t,o,l))};function Cd(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ba(t)&&xe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ba(t)&&Je(n)?!1:t in e}const As=e=>{const t=e.props["onUpdate:modelValue"]||!1;return re(t)?n=>Yn(t,n):t};function Sd(e){e.target.composing=!0}function xa(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Kt=Symbol("_assign");function ga(e,t,n){return t&&(e=e.trim()),n&&(e=go(e)),e}const le={created(e,{modifiers:{lazy:t,trim:n,number:o}},i){e[Kt]=As(i);const a=o||i.props&&i.props.type==="number";bs(e,t?"change":"input",l=>{l.target.composing||e[Kt](ga(e.value,n,a))}),(n||a)&&bs(e,"change",()=>{e.value=ga(e.value,n,a)}),t||(bs(e,"compositionstart",Sd),bs(e,"compositionend",xa),bs(e,"change",xa))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:i,number:a}},l){if(e[Kt]=As(l),e.composing)return;const r=(a||e.type==="number")&&!/^0\d/.test(e.value)?go(e.value):e.value,c=t??"";r!==c&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||i&&e.value.trim()===c)||(e.value=c))}},En={deep:!0,created(e,t,n){e[Kt]=As(n),bs(e,"change",()=>{const o=e._modelValue,i=ln(e),a=e.checked,l=e[Kt];if(re(o)){const r=ui(o,i),c=r!==-1;if(a&&!c)l(o.concat(i));else if(!a&&c){const b=[...o];b.splice(r,1),l(b)}}else if(cn(o)){const r=new Set(o);a?r.add(i):r.delete(i),l(r)}else l(Bl(e,a))})},mounted:ma,beforeUpdate(e,t,n){e[Kt]=As(n),ma(e,t,n)}};function ma(e,{value:t,oldValue:n},o){e._modelValue=t;let i;if(re(t))i=ui(t,o.props.value)>-1;else if(cn(t))i=t.has(o.props.value);else{if(t===n)return;i=qs(t,Bl(e,!0))}e.checked!==i&&(e.checked=i)}const Id={created(e,{value:t},n){e.checked=qs(t,n.props.value),e[Kt]=As(n),bs(e,"change",()=>{e[Kt](ln(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[Kt]=As(o),t!==n&&(e.checked=qs(t,o.props.value))}},Ln={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const i=cn(t);bs(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?go(ln(l)):ln(l));e[Kt](e.multiple?i?new Set(a):a:a[0]),e._assigning=!0,$s(()=>{e._assigning=!1})}),e[Kt]=As(o)},mounted(e,{value:t}){ha(e,t)},beforeUpdate(e,t,n){e[Kt]=As(n)},updated(e,{value:t}){e._assigning||ha(e,t)}};function ha(e,t){const n=e.multiple,o=re(t);if(!(n&&!o&&!cn(t))){for(let i=0,a=e.options.length;i<a;i++){const l=e.options[i],r=ln(l);if(n)if(o){const c=typeof r;c==="string"||c==="number"?l.selected=t.some(b=>String(b)===String(r)):l.selected=ui(t,r)>-1}else l.selected=t.has(r);else if(qs(ln(l),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ln(e){return"_value"in e?e._value:e.value}function Bl(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Md={created(e,t,n){Jn(e,t,n,null,"created")},mounted(e,t,n){Jn(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){Jn(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){Jn(e,t,n,o,"updated")}};function jd(e,t){switch(e){case"SELECT":return Ln;case"TEXTAREA":return le;default:switch(t){case"checkbox":return En;case"radio":return Id;default:return le}}}function Jn(e,t,n,o,i){const l=jd(e.tagName,n.props&&n.props.type)[i];l&&l(e,t,n,o)}const Td=["ctrl","shift","alt","meta"],Ad={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Td.some(n=>e[`${n}Key`]&&!t.includes(n))},Ce=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((i,...a)=>{for(let l=0;l<t.length;l++){const r=Ad[t[l]];if(r&&r(i,t))return}return e(i,...a)}))},Ed={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ms=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(i=>{if(!("key"in i))return;const a=Es(i.key);if(t.some(l=>l===a||Ed[l]===a))return e(i)}))},Pd=ut({patchProp:$d},id);let ya;function Od(){return ya||(ya=Lc(Pd))}const Nd=((...e)=>{const t=Od().createApp(...e),{mount:n}=t;return t.mount=o=>{const i=Ld(o);if(!i)return;const a=t._component;!xe(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const l=n(i,!1,Rd(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},t});function Rd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ld(e){return Je(e)?document.querySelector(e):e}const Dd="Roche_db",Bd=9,Ee={PERSONAS:"personas",CONTACTS:"contacts",SETTINGS:"settings",PRESETS:"presets",CONVERSATIONS:"conversations",MESSAGES:"messages",WORLDBOOK_CATEGORIES:"worldbook_categories",WORLDBOOK_ENTRIES:"worldbook_entries",RELATIONSHIPS:"relationships",STICKER_CATEGORIES:"sticker_categories",STICKERS:"stickers"};let Wt=null,bn=null;const Os=()=>Wt?Promise.resolve():bn||(bn=new Promise((e,t)=>{const n=indexedDB.open(Dd,Bd);n.onerror=o=>{const i=o.target.error;console.error("IndexedDB error:",i),bn=null,t(i||"Error opening database")},n.onsuccess=o=>{Wt=o.target.result,e()},n.onupgradeneeded=o=>{const i=o.target.result;if(i.objectStoreNames.contains(Ee.PERSONAS)||i.createObjectStore(Ee.PERSONAS,{keyPath:"id"}),i.objectStoreNames.contains(Ee.CONTACTS)||i.createObjectStore(Ee.CONTACTS,{keyPath:"id"}),i.objectStoreNames.contains(Ee.SETTINGS)||i.createObjectStore(Ee.SETTINGS,{keyPath:"id"}),i.objectStoreNames.contains(Ee.PRESETS)||i.createObjectStore(Ee.PRESETS,{keyPath:"id"}),i.objectStoreNames.contains(Ee.CONVERSATIONS)||i.createObjectStore(Ee.CONVERSATIONS,{keyPath:"id"}),!i.objectStoreNames.contains(Ee.MESSAGES)){const a=i.createObjectStore(Ee.MESSAGES,{keyPath:"id"});a.createIndex("conversationId","conversationId",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}if(i.objectStoreNames.contains(Ee.WORLDBOOK_CATEGORIES)||i.createObjectStore(Ee.WORLDBOOK_CATEGORIES,{keyPath:"id"}),i.objectStoreNames.contains(Ee.WORLDBOOK_ENTRIES)||i.createObjectStore(Ee.WORLDBOOK_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),!i.objectStoreNames.contains(Ee.RELATIONSHIPS)){const a=i.createObjectStore(Ee.RELATIONSHIPS,{keyPath:"id"});a.createIndex("sourceId","sourceId",{unique:!1}),a.createIndex("targetId","targetId",{unique:!1}),a.createIndex("type","type",{unique:!1})}i.objectStoreNames.contains(Ee.STICKER_CATEGORIES)||i.createObjectStore(Ee.STICKER_CATEGORIES,{keyPath:"id"}),i.objectStoreNames.contains(Ee.STICKERS)||i.createObjectStore(Ee.STICKERS,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),i.objectStoreNames.contains("chats")&&i.deleteObjectStore("chats")}}),bn),ns=async e=>(Wt||await Os(),new Promise((t,n)=>{const a=Wt.transaction([e],"readonly").objectStore(e).getAll();a.onsuccess=()=>t(a.result),a.onerror=()=>n(a.error)})),Ge=async(e,t)=>(Wt||await Os(),new Promise((n,o)=>{const l=Wt.transaction([e],"readwrite").objectStore(e).put(t);l.onsuccess=()=>n(),l.onerror=()=>o(l.error)})),qt=async(e,t)=>(Wt||await Os(),new Promise((n,o)=>{const l=Wt.transaction([e],"readwrite").objectStore(e).delete(t);l.onsuccess=()=>n(),l.onerror=()=>o(l.error)})),Ul=async()=>{Wt||await Os();const n=Wt.transaction([Ee.SETTINGS],"readonly").objectStore(Ee.SETTINGS).get("current");return new Promise((o,i)=>{n.onsuccess=()=>o(n.result),n.onerror=()=>i(n.error)})},zi=async e=>Ge(Ee.SETTINGS,{...e,id:"current"}),Pn=async()=>ns(Ee.PRESETS),$i=async e=>Ge(Ee.PRESETS,e),he=Ee,Fl=async e=>(Wt||await Os(),new Promise((t,n)=>{const l=Wt.transaction([Ee.MESSAGES],"readonly").objectStore(Ee.MESSAGES).index("conversationId").getAll(IDBKeyRange.only(e));l.onsuccess=()=>{const r=l.result;r.sort((c,b)=>c.timestamp-b.timestamp),t(r)},l.onerror=()=>n(l.error)})),Ud=Object.freeze(Object.defineProperty({__proto__:null,DB_STORES:he,deleteItem:qt,getAll:ns,getMessagesByConversationId:Fl,getPresets:Pn,getSettings:Ul,initDB:Os,put:Ge,savePreset:$i,saveSettings:zi},Symbol.toStringTag,{value:"Module"})),wa=[{id:"p1",handle:"studio_noir",name:"Noir Official",persona:"A mysterious, high-end design studio director obsessed with brutalism and silence.",avatar:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",bio:"Curating architectural silence and high-contrast fashion. Based in Paris.",link:"noir.studio/archive",location:"Paris, FR",stats:{followers:"18.4k",following:"942"}}],S=Ps({activePersonaId:localStorage.getItem("noir_active_persona_id")||"p1",personas:[],contacts:[],conversations:[],messages:{},relationships:[],stickerCategories:[],stickers:[],isInitialized:!1,wallet:JSON.parse(localStorage.getItem("noir_wallet_data")||JSON.stringify({balance:0,hasPassword:!1,password:"",transactions:[]}))}),Ci=()=>{localStorage.setItem("noir_wallet_data",JSON.stringify(S.wallet))},ii=(e,t,n)=>{const o=Date.now(),i={id:crypto.randomUUID(),type:e,amount:t,title:n,timestamp:o,status:"completed"};if(e==="deposit")S.wallet.balance+=t;else if(e==="withdraw"||e==="transfer"){if(S.wallet.balance<t)return!1;S.wallet.balance-=t}return S.wallet.transactions.unshift(i),Ci(),!0},ka=(e,t)=>{S.wallet.balance+=e;const n={id:crypto.randomUUID(),type:"deposit",amount:e,title:"Refund: "+t,timestamp:Date.now(),status:"completed"};S.wallet.transactions.unshift(n),Ci()},Fd=e=>{S.wallet.password=e,S.wallet.hasPassword=!0,Ci()},Vl=e=>S.wallet.password===e,Vd=async()=>{try{await Os();const e=await ns(he.PERSONAS);if(e.length>0){const l=e.filter(r=>r&&r.id);S.personas.splice(0,S.personas.length,...l)}else{S.personas.splice(0,S.personas.length,...wa);for(const l of wa)await Ge(he.PERSONAS,l)}const n=(await ns(he.CONTACTS)).filter(l=>l&&l.id);S.contacts.splice(0,S.contacts.length,...n);const o=await ns(he.CONVERSATIONS);S.conversations.splice(0,S.conversations.length,...o.reverse());const i=await ns(he.RELATIONSHIPS);S.relationships.splice(0,S.relationships.length,...i),await Zd();const a=localStorage.getItem("noir_active_persona_id");a&&(S.activePersonaId=a),S.isInitialized=!0,console.log("Store initialized. Actve:",S.activePersonaId,"Personas:",S.personas.length)}catch(e){console.error("Failed to initialize store:",e)}},ai=ve(()=>S.personas.find(e=>e.id===S.activePersonaId)||S.personas[0]),Kd=async e=>{S.personas.push(e),await Ge(he.PERSONAS,JSON.parse(JSON.stringify(e)))},Wd=async e=>{const t=S.personas.findIndex(n=>n.id===e.id);t!==-1&&(S.personas[t]=e,await Ge(he.PERSONAS,JSON.parse(JSON.stringify(e))))},Hd=async e=>{const t=S.personas.findIndex(n=>n.id===e);if(t!==-1&&(S.personas.splice(t,1),await qt(he.PERSONAS,e),S.activePersonaId===e)){const n=S.personas[0];n&&So(n.id)}},So=e=>{console.log("Setting active persona:",e),S.activePersonaId=e,localStorage.setItem("noir_active_persona_id",e)},Gd=async e=>{S.contacts.push(e),await Ge(he.CONTACTS,e)},qd=async e=>{const t=S.contacts.findIndex(n=>n.id===e.id);t!==-1&&(S.contacts[t]=e,await Ge(he.CONTACTS,e))},Jd=async e=>{const t=S.contacts.findIndex(n=>n.id===e);t!==-1&&(S.contacts.splice(t,1),await qt(he.CONTACTS,e))},_a=async e=>{if(!S.conversations.find(n=>n.id===e.id)){S.conversations.unshift(e);const n=JSON.parse(JSON.stringify(e));await Ge(he.CONVERSATIONS,n);const o=e.myActivePersonaId||S.activePersonaId,i=e.participants?.find(a=>a!==o&&a!=="user"&&a!==e.myActivePersonaId)||e.contactId;o&&i&&(S.relationships.find(l=>l.sourceId===o&&l.targetId===i)||await Kl(o,i,"new"))}},rn=async e=>{const t=S.conversations.findIndex(n=>n.id===e.id);if(t!==-1){const n={...S.conversations[t],...e};S.conversations[t]=n;try{const i=JSON.parse(JSON.stringify(we(n)));await Ge(he.CONVERSATIONS,i)}catch(o){console.error("Failed to serialize conversation for DB:",o)}}},Wo=async e=>{S.messages[e]||(S.messages[e]=[]);const t=await Fl(e);S.messages[e]=t},Ot=async(e,t)=>{S.messages[e]||(S.messages[e]=[]),S.messages[e].push(t),await Ge(he.MESSAGES,t);const n=S.conversations.find(o=>o.id===e);n&&rn({...n,lastMessage:t.text,time:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),updatedAt:t.timestamp})},Xs=async(e,t)=>{if(!S.messages[e])return;const n=S.messages[e].findIndex(o=>o.id===t.id);n!==-1&&(S.messages[e][n]=t,await Ge(he.MESSAGES,t))},Qd=async(e,t)=>{if(!S.messages[e])return;const n=S.messages[e].findIndex(o=>o.id===t);n!==-1&&(S.messages[e].splice(n,1),await qt(he.MESSAGES,t))},Yd=async(e,t)=>{if(S.messages[e]){S.messages[e]=S.messages[e].filter(n=>!t.includes(n.id));for(const n of t)await qt(he.MESSAGES,n)}},Io=e=>S.conversations.find(t=>t.id===e),Kl=async(e,t,n)=>{const o=S.relationships.find(a=>a.sourceId===e&&a.targetId===t);if(o){o.type!==n&&await Wl(o.id,n);return}const i={id:crypto.randomUUID(),sourceId:e,targetId:t,type:n,createdAt:Date.now()};S.relationships.push(i),await Ge(he.RELATIONSHIPS,i)},Wl=async(e,t)=>{const n=S.relationships.findIndex(o=>o.id===e);if(n!==-1){const o={...S.relationships[n],type:t};S.relationships[n]=o,await Ge(he.RELATIONSHIPS,o)}},Xd=async e=>{const t=S.relationships.findIndex(n=>n.id===e);t!==-1&&(S.relationships.splice(t,1),await qt(he.RELATIONSHIPS,e))},Zd=async()=>{const e=await ns(he.STICKER_CATEGORIES);S.stickerCategories=e||[];const t=await ns(he.STICKERS);S.stickers=t||[]},za=async(e,t)=>{const n={id:crypto.randomUUID(),name:e,coverUrl:t||"",createdAt:Date.now()};return S.stickerCategories.push(n),await Ge(he.STICKER_CATEGORIES,n),n},eu=async(e,t)=>{const n=S.stickerCategories.findIndex(o=>o.id===e);if(n!==-1){const o={...S.stickerCategories[n],...t};S.stickerCategories[n]=o,await Ge(he.STICKER_CATEGORIES,o)}},$a=async e=>{const t=S.stickerCategories.findIndex(n=>n.id===e);if(t!==-1){S.stickerCategories.splice(t,1),await qt(he.STICKER_CATEGORIES,e);const n=S.stickers.filter(o=>o.categoryId===e);for(const o of n)await li(o.id)}},Qn=async(e,t,n)=>{const o={id:crypto.randomUUID(),categoryId:e,url:t,keyword:n||"sticker",createdAt:Date.now()};return S.stickers.push(o),await Ge(he.STICKERS,o),o},li=async e=>{const t=S.stickers.findIndex(n=>n.id===e);t!==-1&&(S.stickers.splice(t,1),await qt(he.STICKERS,e))},on=e=>S.stickers.filter(t=>t.categoryId===e),qe=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},tu={class:"h-full flex flex-col bg-background-light text-black"},su={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-50"},nu={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},ou={class:"flex-1"},iu={class:"flex-1 flex justify-end"},au={class:"flex-1 overflow-y-auto w-full pb-[calc(6rem+env(safe-area-inset-bottom))]"},lu={class:"relative px-6 py-8 border-b border-gray-50"},ru={class:"ml-14 mt-6 flex items-center gap-6 text-black"},cu={__name:"Feed",emits:["close","navigate"],setup(e,{emit:t}){return(n,o)=>(f(),v("div",tu,[s("header",su,[s("div",nu,[s("div",ou,[s("button",{onClick:o[0]||(o[0]=i=>n.$emit("close")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...o[4]||(o[4]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),o[6]||(o[6]=s("div",{class:"flex justify-center"},[s("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir")],-1)),s("div",iu,[s("button",{onClick:o[1]||(o[1]=i=>n.$emit("navigate","following")),class:"size-10 rounded-full bg-white border border-gray-100 flex items-center justify-center overflow-hidden hover:bg-gray-50 transition-colors -mr-2"},[...o[5]||(o[5]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-black"},[s("circle",{cx:"11",cy:"11",r:"8"}),s("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)])])])])]),s("main",au,[s("article",lu,[o[10]||(o[10]=nt('<div class="thread-line" data-v-72b05aaa></div><div class="flex items-start gap-4 mb-4 relative z-10" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-900 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="w-1/2 h-[1px] bg-white rotate-45" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><div class="flex items-center gap-1" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>studio_noir</span><span class="material-symbols-outlined text-[14px] active-icon" data-v-72b05aaa>verified</span></div><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>4m</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> Symmetry in stone. A study of concrete textures and morning shadows. Winter editorial. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div>',2)),s("div",{onClick:o[2]||(o[2]=i=>n.$emit("navigate","post",{id:"p1"})),class:"cursor-pointer ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-[4/5] editorial-image",style:{"background-image":"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E')","background-size":"cover","background-position":"center"}}),s("div",ru,[o[8]||(o[8]=s("button",{class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[s("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[s("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),s("span",{class:"text-[12px] font-medium"},"2.8k")],-1)),s("button",{onClick:o[3]||(o[3]=i=>n.$emit("navigate","post",{id:"p1"})),class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[...o[7]||(o[7]=[s("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[s("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),s("span",{class:"text-[12px] font-medium"},"56",-1)])]),o[9]||(o[9]=nt('<button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>112</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button>',2))])]),o[11]||(o[11]=nt('<article class="relative px-6 py-8 border-b border-gray-50" data-v-72b05aaa><div class="flex items-start gap-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-50 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-4 rounded-sm border border-black rotate-12" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>elena_di_rossi</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>2h</span></div><p class="text-[15px] leading-relaxed mt-1 font-serif italic text-zinc-900" data-v-72b05aaa> In design, if you are not taking a risk, you are not doing anything new. Perfection is the enemy. </p><div class="mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>892</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>4</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div></article><article class="relative px-6 py-8" data-v-72b05aaa><div class="flex items-start gap-4 mb-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-5 border-2 border-white/40 rounded-full" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>arc_digest</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>5h</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> High desert sanctuary. Minimalism meets nature. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div><div class="ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-video editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0&#39;);background-size:cover;background-position:center;" data-v-72b05aaa></div><div class="ml-14 mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>2.1k</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>14</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></article>',2))])]))}},du=qe(cu,[["__scopeId","data-v-72b05aaa"]]),uu={class:"fixed inset-x-0 bottom-0 h-[92%] z-[60] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},fu={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},pu={class:"text-[16px] font-bold tracking-tight"},vu={class:"flex-1 overflow-y-auto"},bu={key:0,class:"pb-[100px]"},xu={class:"px-4 py-2 mt-2"},gu={class:"flex items-center gap-2 bg-neutral-100 px-3 py-2 rounded-xl"},mu=["onClick"],hu={class:"flex items-center gap-3"},yu={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},wu={class:"flex flex-col"},ku={class:"text-[14px] font-bold leading-tight"},_u={class:"text-[13px] text-neutral-500 leading-tight"},zu={key:1,class:"pb-[100px] px-4 pt-2"},$u={class:"flex flex-col gap-4"},Cu=["onClick"],Su={class:"flex-1"},Iu={class:"text-[15px] font-bold tracking-tight"},Mu={class:"text-[12px] text-zinc-500"},ju={__name:"NewMessage",emits:["close","create-group","navigate"],setup(e,{emit:t}){const n=t,o=E(""),i=ve(()=>{if(!o.value)return S.contacts;const d=o.value.toLowerCase();return S.contacts.filter(u=>u.handle.toLowerCase().includes(d)||u.name&&u.name.toLowerCase().includes(d))}),a=E("contacts"),l=E(null),r=d=>{l.value=d,a.value="persona"},c=d=>{So(d),n("navigate","chat",{id:l.value}),n("close")},b=()=>{a.value==="persona"?a.value="contacts":n("close")};return(d,u)=>(f(),v("div",uu,[s("header",fu,[s("button",{onClick:b,class:"text-[16px] text-black hover:opacity-70 transition-opacity"},C(a.value==="persona"?"Back":"Cancel"),1),s("h2",pu,C(a.value==="persona"?"Select Persona":"New message"),1),u[2]||(u[2]=s("div",{class:"w-[50px]"},null,-1))]),s("div",vu,[a.value==="contacts"?(f(),v("div",bu,[s("div",xu,[s("div",gu,[u[3]||(u[3]=s("span",{class:"material-symbols-outlined text-neutral-400 text-[20px]"},"search",-1)),te(s("input",{"onUpdate:modelValue":u[0]||(u[0]=y=>o.value=y),type:"text",placeholder:"Search",class:"bg-transparent border-none text-[15px] placeholder:text-neutral-400 focus:ring-0 w-full p-0"},null,512),[[le,o.value]])])]),s("div",{onClick:u[1]||(u[1]=y=>d.$emit("create-group")),class:"flex items-center gap-4 px-4 py-4 hover:bg-neutral-50 transition-colors cursor-pointer"},[...u[4]||(u[4]=[s("div",{class:"size-12 rounded-full border border-neutral-200 flex items-center justify-center bg-transparent shrink-0"},[s("span",{class:"material-symbols-outlined text-[24px] text-black"},"group_add")],-1),s("span",{class:"text-[15px] font-medium tracking-tight"},"Create a New Group",-1)])]),u[6]||(u[6]=s("div",{class:"px-4 py-2 mt-2"},[s("span",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase"},"Suggested")],-1)),(f(!0),v(se,null,be(i.value,y=>(f(),v("div",{key:y.id,onClick:M=>r(y.id),class:"flex items-center justify-between px-4 py-3 hover:bg-neutral-50 transition-colors cursor-pointer"},[s("div",hu,[s("div",{class:"size-10 rounded-full bg-neutral-900 overflow-hidden shrink-0 border border-neutral-100",style:Ve({backgroundImage:y.avatar?`url(${y.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[y.avatar?O("",!0):(f(),v("div",yu))],4),s("div",wu,[s("span",ku,C(y.handle),1),s("span",_u,C(y.name||"No Name"),1)])]),u[5]||(u[5]=s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"chevron_right",-1))],8,mu))),128))])):a.value==="persona"?(f(),v("div",zu,[s("div",$u,[(f(!0),v(se,null,be(ct(S).personas,y=>(f(),v("div",{key:y.id,onClick:M=>c(y.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[s("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Ve({backgroundImage:`url(${y.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",Su,[s("h3",Iu,C(y.handle),1),s("p",Mu,C(y.name),1)])],8,Cu))),128))])])):O("",!0)])]))}},Tu=qe(ju,[["__scopeId","data-v-a35529b4"]]),Au={class:"fixed inset-x-0 bottom-0 h-[92%] z-[70] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},Eu={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},Pu={class:"text-[16px] font-bold tracking-tight"},Ou=["disabled"],Nu={key:1,class:"w-[30px]"},Ru={class:"flex-1 overflow-y-auto px-6 pt-8 pb-[calc(6rem+env(safe-area-inset-bottom))]"},Lu={key:0},Du={class:"flex flex-col items-center gap-6 mb-10"},Bu={key:1,class:"material-symbols-outlined text-[24px]"},Uu={class:"w-full"},Fu={class:"mt-8"},Vu={key:0,class:"text-center py-4 text-neutral-400 text-sm"},Ku={class:"flex flex-col gap-1"},Wu=["onClick"],Hu={class:"flex items-center gap-3"},Gu={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},qu={class:"text-[14px] font-bold"},Ju={key:0,class:"material-symbols-outlined text-white text-[16px]"},Qu={key:1,class:"mt-6 pt-6 border-t border-gray-100"},Yu={class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},Xu={class:"flex flex-wrap gap-4"},Zu=["onClick"],ef={class:"text-[10px] text-neutral-600 text-center truncate w-full leading-tight"},tf={key:1},sf={class:"flex flex-col gap-4"},nf=["onClick"],of={class:"flex-1"},af={class:"text-[15px] font-bold tracking-tight"},lf={class:"text-[12px] text-zinc-500"},rf={__name:"CreateGroup",emits:["back","create"],setup(e,{emit:t}){const n=t,o=E(""),i=E(new Set),a=ve(()=>S.contacts),l=ve(()=>S.contacts.filter(T=>i.value.has(T.id))),r=T=>{i.value.has(T)?i.value.delete(T):i.value.add(T)},c=T=>{i.value.delete(T)},b=E("details"),d=E(""),u=()=>{const T=prompt("Enter image URL for group photo:");T&&(d.value=T)},y=()=>{b.value==="details"&&o.value&&(b.value="persona")},M=T=>{So(T),n("create",{name:o.value,avatar:d.value,members:Array.from(i.value)})},R=()=>{b.value==="persona"?b.value="details":n("back")};return(T,L)=>(f(),v("div",Au,[s("header",Eu,[s("button",{onClick:R,class:"text-[16px] text-black hover:opacity-70 transition-opacity flex items-center -ml-1"},[L[1]||(L[1]=s("span",{class:"material-symbols-outlined text-[24px]"},"chevron_left",-1)),hs(" "+C((b.value==="persona","Back")),1)]),s("h2",Pu,C(b.value==="persona"?"Select Persona":"Create group"),1),b.value==="details"?(f(),v("button",{key:0,onClick:y,class:"text-[16px] font-bold text-black hover:opacity-70 transition-opacity disabled:opacity-30",disabled:!o.value||l.value.length<2}," Next ",8,Ou)):(f(),v("div",Nu))]),s("main",Ru,[b.value==="details"?(f(),v("div",Lu,[s("div",Du,[s("button",{onClick:u,class:"size-24 rounded-full border border-dashed border-neutral-300 flex items-center justify-center flex-col gap-1 text-neutral-400 hover:bg-neutral-50 transition-colors overflow-hidden relative"},[d.value?(f(),v("div",{key:0,class:"absolute inset-0 bg-cover bg-center",style:Ve({backgroundImage:`url(${d.value})`})},null,4)):(f(),v("span",Bu,"add_a_photo"))]),L[2]||(L[2]=s("span",{class:"text-[10px] font-bold uppercase tracking-widest text-neutral-400"},"Add Group Photo",-1)),s("div",Uu,[te(s("input",{"onUpdate:modelValue":L[0]||(L[0]=z=>o.value=z),type:"text",placeholder:"Group name",class:"w-full bg-transparent border-0 border-b border-neutral-200 px-0 py-3 text-lg placeholder:text-neutral-300 focus:ring-0 focus:border-black transition-colors"},null,512),[[le,o.value]])])]),s("div",Fu,[L[4]||(L[4]=s("h3",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},"Select Members (Min 2)",-1)),a.value.length===0?(f(),v("div",Vu," No contacts found in Following. ")):O("",!0),s("div",Ku,[(f(!0),v(se,null,be(a.value,z=>(f(),v("div",{key:z.id,onClick:$=>r(z.id),class:"flex items-center justify-between py-3 px-2 -mx-2 hover:bg-neutral-50 rounded-xl cursor-pointer transition-colors"},[s("div",Hu,[s("div",{class:"size-10 rounded-full bg-neutral-900 border border-neutral-100 overflow-hidden",style:Ve({backgroundImage:z.avatar?`url(${z.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[z.avatar?O("",!0):(f(),v("div",Gu))],4),s("span",qu,C(z.handle),1)]),s("div",{class:K(["size-6 rounded-full border flex items-center justify-center transition-all",i.value.has(z.id)?"bg-black border-black":"border-neutral-300 bg-white"])},[i.value.has(z.id)?(f(),v("span",Ju,"check")):O("",!0)],2)],8,Wu))),128))]),l.value.length>0?(f(),v("div",Qu,[s("h3",Yu,"Selected ("+C(l.value.length)+")",1),s("div",Xu,[(f(!0),v(se,null,be(l.value,z=>(f(),v("div",{key:z.id,class:"flex flex-col items-center gap-2 group relative w-[60px]"},[s("div",{class:"size-12 rounded-full bg-neutral-900 border border-white/20 shadow-sm relative overflow-hidden",style:Ve({backgroundImage:z.avatar?`url(${z.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[s("button",{onClick:Ce($=>c(z.id),["stop"]),class:"absolute top-0 right-0 size-4 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-100 hover:bg-neutral-100"},[...L[3]||(L[3]=[s("span",{class:"material-symbols-outlined text-[10px] text-black"},"close",-1)])],8,Zu)],4),s("span",ef,C(z.handle),1)]))),128))])])):O("",!0)])])):b.value==="persona"?(f(),v("div",tf,[s("div",sf,[(f(!0),v(se,null,be(ct(S).personas,z=>(f(),v("div",{key:z.id,onClick:$=>M(z.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[s("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Ve({backgroundImage:`url(${z.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",of,[s("h3",af,C(z.handle),1),s("p",lf,C(z.name),1)])],8,nf))),128))])])):O("",!0)])]))}},cf={class:"h-full flex flex-col bg-background-light text-black relative"},df={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100/50"},uf={class:"px-6 pb-4 pt-[calc(10px_+_env(safe-area-inset-top))] w-full"},ff={class:"flex items-center justify-between mb-6"},pf={class:"flex items-center gap-2"},vf={class:"flex-1 overflow-y-auto w-full pb-24"},bf=["onClick"],xf={key:0,class:"size-14 shrink-0 rounded-full avatar-abstract flex items-center justify-center"},gf={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},mf={class:"flex-1 min-w-0"},hf={class:"flex items-center justify-between mb-0.5"},yf={class:"font-bold text-[15px] tracking-tight"},wf={class:"flex items-center gap-2"},kf={key:0,class:"size-2 bg-black rounded-full"},_f={__name:"Inbox",emits:["navigate","close"],setup(e,{emit:t}){const n=t,o=E(!1),i=E(!1),a=d=>{n("navigate","chat",{id:d})},l=()=>{i.value=!0},r=d=>{i.value=!1,o.value=!1;const u={id:"group_"+Date.now(),type:"group",name:d.name,handle:d.name.toLowerCase().replace(/\s+/g,"_"),avatar:d.avatar||"",members:d.members||[],lastMessage:"Group created",time:"Just now",unread:!1};_a(u),n("navigate","chat",{id:u.id})},c=(d,u)=>{if(d==="chat"&&u.id){const y=S.contacts.find(R=>R.id===u.id);!S.conversations.find(R=>R.id===u.id)&&y&&_a({id:y.id,type:"direct",name:y.name,handle:y.handle,avatar:y.avatar,lastMessage:"Draft",time:"Now",unread:!1})}o.value=!1,n("navigate",d,u),o.value=!1,n("navigate",d,u)},b=d=>{const u=d.localSettings||{};if(d.type==="group"||d.isAbstract)return{avatar:u.groupAvatarOverride||d.avatar,handle:u.groupNameOverride||d.title||d.handle||"Group",isAbstract:d.isAbstract};const y=S.contacts.find(M=>M.id===d.id);return y?{avatar:u.theirAvatarOverride||y.avatar,handle:u.theirNicknameOverride||y.handle,isAbstract:!1}:{avatar:u.theirAvatarOverride||d.avatar,handle:u.theirNicknameOverride||d.handle,isAbstract:!1}};return Lt(()=>{}),(d,u)=>(f(),v("div",cf,[s("header",df,[s("div",uf,[s("div",ff,[s("div",pf,[s("button",{onClick:u[0]||(u[0]=y=>d.$emit("close")),class:"flex items-center justify-center size-8 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...u[4]||(u[4]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),u[5]||(u[5]=s("h1",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Messages",-1))]),s("button",{onClick:u[1]||(u[1]=y=>o.value=!0),class:"hover:opacity-50 transition-opacity"},[...u[6]||(u[6]=[s("span",{class:"material-symbols-outlined text-[24px]"},"edit_square",-1)])])]),u[7]||(u[7]=s("div",{class:"relative"},[s("input",{class:"w-full bg-neutral-100 border-none rounded-full py-2 px-5 text-sm placeholder:text-neutral-400 focus:ring-1 focus:ring-black transition-all",placeholder:"Search",type:"text"})],-1))])]),s("main",vf,[(f(!0),v(se,null,be(ct(S).conversations,y=>(f(),v("div",{key:y.id,onClick:M=>a(y.id),class:"flex items-center gap-4 px-6 py-5 hover:bg-neutral-50 transition-colors cursor-pointer group border-b border-gray-50"},[y.isAbstract?(f(),v("div",xf,[...u[8]||(u[8]=[s("div",{class:"absolute inset-0 bg-zinc-900"},null,-1),s("div",{class:"relative size-6 border-[0.5px] border-white/30 rotate-45"},null,-1)])])):(f(),v("div",{key:1,class:"size-14 shrink-0 rounded-full bg-neutral-900 flex items-center justify-center overflow-hidden border border-neutral-100",style:Ve({backgroundImage:b(y).avatar?`url(${b(y).avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[b(y).avatar?O("",!0):(f(),v("div",gf))],4)),s("div",mf,[s("div",hf,[s("span",yf,C(b(y).handle),1),s("div",wf,[s("span",{class:K(["text-[11px] font-medium",y.unread?"text-black":"text-neutral-400"])},C(y.time),3),y.unread?(f(),v("div",kf)):O("",!0)])]),s("p",{class:K(["text-[14px] font-semibold truncate leading-snug",y.unread?"text-black":"text-neutral-500"])},C(y.lastMessage),3)])],8,bf))),128))]),Ke(Gs,{name:"slide-up"},{default:Is(()=>[o.value?(f(),ye(Tu,{key:0,onClose:u[2]||(u[2]=y=>o.value=!1),onCreateGroup:l,onNavigate:c})):O("",!0)]),_:1}),Ke(Gs,{name:"slide-right"},{default:Is(()=>[i.value?(f(),ye(rf,{key:0,onBack:u[3]||(u[3]=y=>i.value=!1),onCreate:r})):O("",!0)]),_:1})]))}},zf=qe(_f,[["__scopeId","data-v-8dd3129f"]]),$f="modulepreload",Cf=function(e,t){return new URL(e,t).href},Ca={},Sf=function(t,n,o){let i=Promise.resolve();if(n&&n.length>0){let b=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const l=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),c=r?.nonce||r?.getAttribute("nonce");i=b(n.map(d=>{if(d=Cf(d,o),d in Ca)return;Ca[d]=!0;const u=d.endsWith(".css"),y=u?'[rel="stylesheet"]':"";if(o)for(let R=l.length-1;R>=0;R--){const T=l[R];if(T.href===d&&(!u||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${y}`))return;const M=document.createElement("link");if(M.rel=u?"stylesheet":$f,u||(M.as="script"),M.crossOrigin="",M.href=d,c&&M.setAttribute("nonce",c),document.head.appendChild(M),u)return new Promise((R,T)=>{M.addEventListener("load",R),M.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l}return i.then(l=>{for(const r of l||[])r.status==="rejected"&&a(r.reason);return t().catch(a)})},St=Ps({id:"current",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.7,stream:!1,modelsList:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"]}),At=Ps({list:[],currentPresetId:"custom"}),If=async()=>{const e=await Ul();e?(Object.assign(St,e),St.stream===void 0&&(St.stream=!1)):await zi(we(St));const t=await Pn();if(At.list=t,At.currentPresetId=St.activePresetId||"custom",t.length===0){const n=[{id:"editorial",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.3,stream:!1},{id:"creative",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.9,stream:!1},{id:"drafting",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,stream:!1}];for(const o of n)await $i(o);At.list=await Pn()}},Si=async e=>{Object.assign(St,e),e.currentPresetId&&(At.currentPresetId=e.currentPresetId);const t={...we(St),activePresetId:At.currentPresetId};await zi(t)},Mf=()=>{if(!St.apiKey)return"";const e=St.apiKey.split(",").map(n=>n.trim()).filter(n=>n);if(e.length===0)return"";const t=Math.floor(Math.random()*e.length);return e[t]},jf=async e=>{try{const t=e?.apiKey!==void 0?e.apiKey:St.apiKey,n=e?.endpoint!==void 0?e.endpoint:St.endpoint;let o="";if(t){const c=t.split(",").map(b=>b.trim()).filter(b=>b);c.length>0&&(o=c[Math.floor(Math.random()*c.length)])}if(!o)throw new Error("No API Key provided");let a=`${n.replace(/\/+$/,"")}/models`;const l=await fetch(a,{headers:{Authorization:`Bearer ${o}`}});if(!l.ok)throw new Error(`Fetch failed: ${l.statusText}`);const r=await l.json();return r.data&&Array.isArray(r.data)&&(St.modelsList=r.data.map(c=>c.id)),!0}catch(t){return console.error("Failed to fetch models",t),!1}},Tf=e=>At.list.find(t=>t.id===e),Af=async(e,t)=>{const n={id:Date.now().toString(),name:e,provider:t.provider,endpoint:t.endpoint,apiKey:t.apiKey,model:t.model,temperature:t.temperature,stream:t.stream};await $i(n),At.list=await Pn(),At.currentPresetId=n.id,St.activePresetId=n.id,await Si({...t,activePresetId:n.id})},Ef=async()=>{if(At.currentPresetId&&At.currentPresetId!=="custom"){const e=At.currentPresetId;await Sf(()=>Promise.resolve().then(()=>Ud),void 0,import.meta.url).then(t=>t.deleteItem("presets",e)),At.list=await Pn(),At.currentPresetId="custom",St.activePresetId="custom",await Si({activePresetId:"custom"})}},Hl=()=>({...Fr(St),presetState:At,init:If,getActiveKey:Mf,fetchModels:jf,getPresetById:Tf,commitSettings:Si,saveCurrentAsPreset:Af,deleteCurrentPreset:Ef}),Sa="worldbook_db",Le=Ps({categories:[],entries:[]}),Pf=async()=>{try{await Os();const e=localStorage.getItem(Sa);if(e){console.log("Migrating WorldBook data from localStorage to IndexedDB...");try{const o=JSON.parse(e),i=o.categories||[],a=o.entries||[];for(const l of i)await Ge(he.WORLDBOOK_CATEGORIES,l);for(const l of a)l.scope||(l.scope="global"),await Ge(he.WORLDBOOK_ENTRIES,l);localStorage.removeItem(Sa),console.log("Migration complete.")}catch(o){console.error("Migration failed:",o)}}const t=await ns(he.WORLDBOOK_CATEGORIES),n=await ns(he.WORLDBOOK_ENTRIES);t.length===0&&n.length===0?await Of():(Le.categories.splice(0,Le.categories.length,...t),Le.entries.splice(0,Le.entries.length,...n))}catch(e){console.error("Failed to load WorldBook store:",e)}},Of=async()=>{const e=[{id:"cat_myth",name:""},{id:"cat_history",name:""},{id:"cat_chars",name:""},{id:"cat_locs",name:""}];Le.categories.splice(0,Le.categories.length,...e),Le.entries.splice(0,Le.entries.length);for(const t of e)await Ge(he.WORLDBOOK_CATEGORIES,t)},Dn=()=>(Le.categories.length===0&&Pf(),{state:Le,getCategories:()=>Le.categories,getEntriesByCategory:(d,u="global")=>Le.entries.filter(y=>y.categoryId===d&&y.scope===u),getEntry:d=>Le.entries.find(u=>u.id===d),addCategory:async d=>{const u=`cat_${Date.now()}`,y={id:u,name:d};return Le.categories.push(y),await Ge(he.WORLDBOOK_CATEGORIES,y),u},updateCategory:async(d,u)=>{const y=Le.categories.find(M=>M.id===d);if(y){y.name=u;const M=we(y);await Ge(he.WORLDBOOK_CATEGORIES,{...M})}},deleteCategory:async d=>{const u=Le.entries.filter(M=>M.categoryId===d);Le.entries=Le.entries.filter(M=>M.categoryId!==d);const y=Le.categories.findIndex(M=>M.id===d);y!==-1&&Le.categories.splice(y,1),await qt(he.WORLDBOOK_CATEGORIES,d);for(const M of u)await qt(he.WORLDBOOK_ENTRIES,M.id)},addEntry:async d=>{const u={...d,id:`entry_${Date.now()}`,createdAt:Date.now(),updatedAt:Date.now()};return Le.entries.push(u),await Ge(he.WORLDBOOK_ENTRIES,u),u.id},updateEntry:async(d,u)=>{const y=Le.entries.findIndex(M=>M.id===d);if(y!==-1){const M={...Le.entries[y],...u,updatedAt:Date.now()};Le.entries[y]=M;const R=we(M);await Ge(he.WORLDBOOK_ENTRIES,R)}},deleteEntry:async d=>{const u=Le.entries.findIndex(y=>y.id===d);u!==-1&&(Le.entries.splice(u,1),await qt(he.WORLDBOOK_ENTRIES,d))},searchEntries:d=>{const u=d.toLowerCase();return Le.entries.filter(y=>y.title.toLowerCase().includes(u)||y.content.toLowerCase().includes(u)||y.keywords?.some(M=>M.toLowerCase().includes(u)))}}),Nf={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},Rf=e=>Nf[e]||"Unknown",Lf=async e=>{if(!e||e.length<2)return[];try{const t=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=5&language=en&format=json`,o=await(await fetch(t)).json();return!o.results||!Array.isArray(o.results)?[]:o.results.map(i=>({id:i.id,name:i.name,latitude:i.latitude,longitude:i.longitude,country:i.country,admin1:i.admin1}))}catch(t){return console.error("City Search Failed",t),[]}},Df=async(e,t)=>{try{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,weather_code,is_day&timezone=auto`,i=await(await fetch(n)).json();return i.current?{temperature:i.current.temperature_2m,conditionCode:i.current.weather_code,isDay:i.current.is_day,time:i.current.time}:null}catch(n){return console.error("Weather Fetch Failed",n),null}},Ho=new Map,Bf=async(e,t)=>{const n=`${e.toFixed(2)},${t.toFixed(2)}`,o=Date.now();if(Ho.has(n)){const a=Ho.get(n);if(o-a.ts<36e5)return console.log("[Environment] Using Cached Weather for",n),a.data}const i=await Df(e,t);return i&&(console.log("[Environment] Fetched New Weather for",n),Ho.set(n,{data:i,ts:o})),i},Uf={class:"h-[100dvh] flex flex-col bg-background-light text-black"},Ff={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},Vf={class:"flex items-center px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Kf={class:"flex items-center gap-3 ml-1 cursor-pointer"},Wf={key:0,class:"absolute inset-0 bg-zinc-900"},Hf={key:1,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Gf={class:"flex flex-col"},qf={class:"font-serif text-[17px] font-semibold tracking-tight"},Jf={class:"flex-1 flex justify-end"},Qf={class:"flex justify-center my-4"},Yf={class:"text-[10px] text-zinc-400 uppercase tracking-[0.2em] font-semibold"},Xf={key:0,class:"flex flex-col gap-4"},Zf=["id"],ep={key:0,class:"w-full flex items-center my-1 animate-in fade-in zoom-in-95 duration-300"},tp=["onClick"],sp={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},np={class:"flex-1 flex justify-center"},op=["onClick","onContextmenu"],ip={class:"text-[11px] text-zinc-400 px-3 py-1 rounded-full transition-colors"},ap={class:"text-[9px] opacity-50 ml-1"},lp={key:0,class:"mt-1 max-w-[280px] p-3 rounded-[16px] bg-zinc-50 border border-zinc-100 text-zinc-500 text-[13px] relative animate-in fade-in zoom-in-95 duration-200"},rp=["src"],cp=["src"],dp={key:2,class:"italic opacity-70"},up={key:3,class:"break-words leading-relaxed whitespace-pre-wrap"},fp={key:1,class:"w-full flex items-start transition-all duration-300"},pp=["onClick"],vp={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},bp=["onContextmenu"],xp={key:0,class:"text-[10px] text-zinc-500 font-bold mb-1 ml-1"},gp=["onClick"],mp={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},hp={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},yp=["src"],wp=["onClick"],kp={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center animate-in fade-in duration-300"},_p={key:1,class:"absolute inset-0 z-20 p-6 flex items-center justify-center animate-in fade-in zoom-in-95 duration-500"},zp={class:"font-serif text-[20px] leading-relaxed text-center text-black/90 break-words drop-shadow-sm italic"},$p=["onClick"],Cp={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},Sp={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},Ip=["onClick"],Mp=["src"],jp=["onClick"],Tp={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},Ap={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},Ep=["onClick"],Pp={class:"flex items-center gap-3 px-3 py-2"},Op={class:"flex items-center gap-0.5 h-4"},Np={class:"text-[11px] font-medium opacity-60 ml-1"},Rp={class:"text-[15px] leading-relaxed break-words"},Lp=["onClick"],Dp={class:"flex items-center justify-between mb-4 relative z-0"},Bp={class:"flex items-center gap-2"},Up={class:"material-symbols-outlined text-[16px]"},Fp={class:"text-[10px] font-bold opacity-40"},Vp={class:"mb-1 relative z-0"},Kp={class:"text-2xl font-serif font-bold tracking-tight"},Wp={class:"text-[11px] opacity-50 relative z-0"},Hp=["onClick"],Gp={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-10"},qp={class:"flex items-center justify-between mb-4 relative z-0"},Jp={class:"flex items-center gap-2"},Qp={class:"text-[10px] font-bold opacity-40"},Yp={class:"mb-1 relative z-0"},Xp={class:"flex flex-col relative z-0 gap-0.5"},Zp={class:"text-[11px] opacity-60 font-medium lowercase"},e0={key:0,class:"text-[11px] opacity-50 italic truncate max-w-[180px]"},t0=["onClick"],s0={class:"message-text leading-snug break-words whitespace-pre-wrap"},n0={class:"text-[9px] text-zinc-400 mt-1 mx-1 tracking-wider uppercase"},o0={key:1,class:"flex flex-col items-start gap-1"},i0={class:"flex items-end gap-2 px-1"},a0={key:2,class:"flex flex-col items-center justify-center h-full text-neutral-400"},l0={key:1,class:"absolute inset-x-0 bottom-0 top-auto h-auto bg-white rounded-t-[32px] shadow-[0_-8px_40px_rgba(0,0,0,0.1)] z-[60] flex flex-col animate-in slide-in-from-bottom-10 duration-300 overflow-hidden text-black border-t border-zinc-100/50"},r0={class:"h-10 flex items-center justify-between px-6 shrink-0 bg-white"},c0={class:"flex items-center gap-3"},d0={class:"h-[255px] overflow-y-auto custom-scrollbar px-6 py-2 bg-white"},u0={key:0,class:"grid grid-cols-4 gap-4"},f0=["onClick"],p0={class:"aspect-square w-full bg-white border border-zinc-50 rounded-[22px] overflow-hidden group-hover:border-zinc-200 group-hover:shadow-[0_4px_12px_rgba(0,0,0,0.03)] transition-all relative"},v0=["src"],b0={class:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.15em] truncate w-full text-center group-hover:text-black transition-colors font-sans"},x0={key:1,class:"flex flex-col items-center justify-center h-full text-zinc-300 gap-3"},g0={class:"flex flex-col items-center gap-1"},m0={class:"flex items-center justify-between px-5 bg-white border-t border-zinc-50 gap-4 shrink-0 pt-2 pb-safe"},h0={class:"flex-1 overflow-x-auto custom-scrollbar flex items-center gap-4 px-2 hide-scrollbar"},y0=["onClick"],w0={class:"w-6 h-6 flex items-center justify-center"},k0={key:0,class:"absolute -bottom-2 w-1 h-1 bg-black rounded-full"},_0={key:1,class:"material-symbols-outlined text-[20px]"},z0={key:2,class:"text-[10px] font-black uppercase font-serif"},$0={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},C0={class:"flex flex-col gap-2 max-h-[50vh] overflow-y-auto custom-scrollbar px-1"},S0={key:0,class:"text-center py-10 text-zinc-300 flex flex-col items-center gap-3"},I0=["onClick"],M0={class:"flex items-center gap-4"},j0={class:"w-10 h-10 rounded-xl bg-white border border-zinc-100 flex items-center justify-center text-xs font-serif font-bold text-zinc-700 shadow-sm"},T0={class:"font-semibold text-zinc-900 text-[15px]"},A0={class:"material-symbols-outlined text-[14px] font-bold"},E0={class:"grid grid-cols-1 mt-4"},P0={key:2,class:"absolute left-4 right-4 bottom-[80px] bg-white/90 backdrop-blur-2xl rounded-[32px] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.12)] border border-zinc-100 p-6 z-40 animate-in slide-in-from-bottom-6 fade-in duration-300 ring-1 ring-black/5"},O0={class:"grid grid-cols-4 gap-x-2 gap-y-6"},N0={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},R0={class:"flex items-center gap-3 w-full"},L0={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},D0={class:"flex items-center gap-3 w-full"},B0={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},U0={key:0,class:"font-serif italic text-2xl mb-1 text-center"},F0={key:1,class:"font-serif italic text-2xl mb-1 text-center"},V0={key:2},K0={key:0,class:"mb-6"},W0={class:"relative"},H0=["value"],G0={key:1,class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},q0={class:"flex flex-col gap-4"},J0={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},Q0={class:"grid grid-cols-2 gap-3"},Y0={key:3,class:"animate-in slide-in-from-right-8 duration-300"},X0={class:"flex justify-center mb-8"},Z0={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},ev={class:"grid grid-cols-2 gap-3"},tv={class:"bg-white w-full max-w-xs rounded-[32px] shadow-2xl p-0 animate-in zoom-in-95 duration-300 overflow-hidden relative"},sv={class:"p-8 text-center -mt-10"},nv={class:"font-serif text-3xl font-bold mb-1"},ov={class:"text-xs text-zinc-400 uppercase tracking-widest mb-6"},iv={class:"space-y-3 text-sm border-t border-zinc-100 pt-6"},av={class:"flex justify-between"},lv={class:"font-medium"},rv={class:"flex justify-between"},cv={class:"text-zinc-400"},dv={class:"font-medium"},uv={key:0,class:"flex justify-between"},fv={class:"font-medium text-zinc-800"},pv={key:0,class:"mt-8 grid grid-cols-2 gap-3"},vv=["src"],bv={key:1,class:"fixed inset-x-0 bottom-0 z-[10000] animate-in slide-in-from-bottom-full duration-300"},xv={class:"bg-white/95 backdrop-blur-xl rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.1)] overflow-hidden"},gv={class:"flex flex-col"},mv={class:"border-t border-zinc-100 py-3 pb-safe"},hv={key:4,class:"fixed bottom-10 left-0 right-0 z-[100] flex justify-center pointer-events-none animate-in slide-in-from-bottom-20 duration-300"},yv={class:"bg-black text-white h-[64px] rounded-full shadow-[0_8px_40px_rgba(0,0,0,0.3)] flex items-center px-8 gap-8 pointer-events-auto min-w-[280px] justify-between ring-1 ring-white/10 mx-6"},wv={class:"font-bold text-xs tracking-[0.2em] font-sans whitespace-nowrap"},kv={class:"flex items-center gap-6"},_v=["disabled"],zv={key:5,class:"sticky bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md pb-safe border-t border-gray-100 z-50"},$v={key:0,class:"px-4 py-2 bg-zinc-50 border-b border-zinc-100 flex items-center justify-between"},Cv={class:"flex items-center gap-3 overflow-hidden"},Sv={class:"flex flex-col"},Iv={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-500"},Mv={class:"text-xs text-zinc-600 line-clamp-1 truncate"},jv={class:"px-4 py-3 flex items-center gap-2"},Tv={class:"flex-1 relative"},Av={__name:"Chat",props:["chatId"],emits:["back","navigate"],setup(e,{emit:t}){const n=e,o=t,i=ve(()=>Io(n.chatId)),a=ve(()=>{const _=i.value;if(!_)return{};const g=_.localSettings||{};if(_.type==="group"||_.isAbstract)return{avatar:g.groupAvatarOverride||_.avatar,handle:g.groupNameOverride||_.handle||_.title||"Group",isAbstract:_.isAbstract,id:_.id};const w=S.contacts.find(ae=>ae.id===_.id);return{avatar:g.theirAvatarOverride||w?.avatar||_.avatar,handle:g.theirNicknameOverride||w?.handle||_.handle,realName:w?.name||_.handle,isAbstract:!1,id:_.id}}),l=()=>{o("back")},r=E(""),c=E(!1),b=E(!1),d=E(!1),u=E(!1),y=E(!1),M=E(""),R=E(""),T=E(""),L=E(null),z=E("input"),$=E(""),I=E(""),j=E([]),A=E(!1),q=E(!1),de=E(""),pe=E(!1),J=E(new Set),ne=E(!1),ee=E(null),W=E(null),D=_=>{const g=document.getElementById(`msg-${_}`);g?(g.scrollIntoView({behavior:"smooth",block:"center"}),g.classList.add("bg-zinc-100/50"),setTimeout(()=>g.classList.remove("bg-zinc-100/50"),1e3)):console.log("Message target not found in DOM")},k=_=>{if(_.isMe)return ge.value.handle||ge.value.name;const g=as(_.senderId);return g&&(g.handle||g.name)||"Unknown"},m=()=>{ee.value&&(W.value=ee.value,ne.value=!1,ee.value=null,b.value=!1,$s(()=>{const _=document.querySelector("textarea");_&&_.focus()}))},P=_=>{if(pe.value){V(_);return}ee.value=_,ne.value=!0,b.value=!1},V=_=>{J.value.has(_.id)?J.value.delete(_.id):J.value.add(_.id)},Z=()=>{pe.value=!0,ne.value=!1,ee.value&&J.value.add(ee.value.id),ee.value=null},Se=()=>{pe.value=!1,J.value.clear()},Be=async _=>{const g=Te.value.find(w=>w.id===_);g&&await Xs(n.chatId,{...g,isRecalled:!0,isRecallRevealed:!1})},ht=()=>{ee.value&&(Be(ee.value.id),ne.value=!1,ee.value=null)},ie=async _=>{if(_){try{await navigator.clipboard.writeText(_.text||_.content||"")}catch(g){console.error("Failed to copy",g)}ne.value=!1,ee.value=null}},We=async()=>{ee.value&&(confirm("Delete this message?")&&await Qd(n.chatId,ee.value.id),ne.value=!1,ee.value=null)},Qe=async()=>{const _=Array.from(J.value);_.length!==0&&confirm(`Delete ${_.length} messages?`)&&(await Yd(n.chatId,_),Se())},Ie=ve(()=>{const _=i.value;return _?_.type==="group"||_.isAbstract?{name:_.handle||"Group",isGroup:!0}:S.contacts.find(w=>w.id===_.id)||{name:_.handle||"Unknown",isGroup:!1}:{name:"Unknown"}}),Me=E(null),it=E(!1),ft=E(""),Ht=()=>{b.value=!1,it.value=!0,ft.value=""},Et=async()=>{if(!ft.value.trim())return;const _={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:ft.value,type:"spoiler",senderId:"me",timestamp:Date.now(),isMe:!0,isRevealed:!1};await Ot(n.chatId,_),it.value=!1,bt(!0)},Yt=()=>{b.value=!1,q.value=!0,de.value=""},x=async()=>{if(!de.value.trim())return;const _={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:de.value,type:"voice",senderId:"me",timestamp:Date.now(),isMe:!0};await Ot(n.chatId,_),q.value=!1,bt(!0)},p=E(!1),h=E(""),N=E(null),B=_=>{h.value=_,p.value=!0},U=async _=>{const g=_.target.files[0];if(g){if(g.type.startsWith("image/")){const w=new FileReader;w.onload=async ae=>{const Ye=ae.target.result,He={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:"[Image Upload]",content:Ye,type:"image",senderId:"me",timestamp:Date.now(),isMe:!0};await Ot(n.chatId,He),b.value=!1,bt(!0)},w.readAsDataURL(g)}_.target.value=""}},Q=ve(()=>S.stickerCategories),H=ve(()=>{if(!i.value)return[];const _=i.value.localSettings?.mountedStickerPacks;return _==null?Q.value:Q.value.filter(g=>_.includes(g.id))}),G=ve(()=>{if(H.value.length===0)return null;if(Me.value){const _=H.value.find(g=>g.id===Me.value);if(_)return _}return H.value[0]});Hs(H,_=>{_.length>0?(!Me.value||!_.find(g=>g.id===Me.value))&&(Me.value=_[0].id):Me.value=null},{immediate:!0});const F=()=>{b.value=!b.value,b.value&&(d.value=!1)},ce=()=>{b.value=!1,d.value=!1},X=()=>{W.value=null},oe=()=>{b.value=!1,d.value=!0},fe=()=>{d.value=!1,A.value=!0},ke=_=>{const g=i.value?.localSettings?.mountedStickerPacks;return g==null?!0:g.includes(_)},Ne=async _=>{if(!i.value)return;let g=i.value.localSettings?.mountedStickerPacks;g==null?g=Q.value.map(ae=>ae.id):g=[...g];const w=g.indexOf(_);w>-1?g.splice(w,1):g.push(_),await rn({id:n.chatId,localSettings:{...i.value.localSettings,mountedStickerPacks:g}})},je=async _=>{const g={id:"msg_"+Date.now(),conversationId:n.chatId,text:_.url,content:_.url,type:"sticker",keyword:_.keyword,senderId:"me",timestamp:Date.now(),isMe:!0};await Ot(n.chatId,g)},Te=ve(()=>S.messages[n.chatId]||[]),ge=ve(()=>{const _=i.value?.localSettings?.myActivePersonaId,g=S.activePersonaId,w=_||g;return S.personas.find(ae=>ae.id===w)||S.personas[0]}),It=E(null),at=E(null),yt=E(!0),bt=async(_=!1)=>{if(await $s(),!at.value&&It.value){It.value.scrollIntoView({behavior:_?"auto":"smooth"});return}at.value&&(_?at.value.scrollTop=at.value.scrollHeight:at.value.scrollTo({top:at.value.scrollHeight,behavior:"smooth"}))};Hs(()=>Te.value.length,_=>{_!==0&&(yt.value?(bt(!0),yt.value=!1):bt(!1))},{flush:"post"}),Lt(async()=>{if(await Xt.init(),n.chatId){if(yt.value=!0,await Wo(n.chatId),Te.value.length>0&&yt.value)bt(!0),yt.value=!1;else if(n.chatId==="noir"&&Te.value.length===0){const _=[{id:"demo_1",conversationId:"noir",text:"The composition in your latest editorial is remarkable. The use of negative space creates a profound tension.",senderId:"noir_official",timestamp:new Date().setHours(14,22,0,0),isMe:!1,type:"text"},{id:"demo_2",conversationId:"noir",text:"Thank you. I was exploring the intersection of brutalist architecture and morning light.",senderId:"me",timestamp:new Date().setHours(14,25,0,0),isMe:!0,type:"text"},{id:"demo_3",conversationId:"noir",text:'"Silent Forms". Focusing on textures of concrete and silk.',senderId:"noir_official",timestamp:new Date().setHours(14,28,0,0),isMe:!1,type:"text"}];for(const g of _)await Ot("noir",g);await Wo("noir"),bt(!0),yt.value=!1}}}),Hs(()=>n.chatId,async _=>{_&&(yt.value=!0,await Wo(_),Te.value.length>0&&yt.value&&(bt(!0),yt.value=!1))});const wt=Dn(),Dt=(_,g)=>{const w=(_+`
`+g).toLowerCase(),ae=wt.state.entries;let Ye=ae.filter(ze=>ze.scope==="global");const He=i.value?.localSettings?.mountedWorldbooks||[];if(He.length>0){const ze=ae.filter(tt=>tt.scope==="local"&&(He.includes(tt.categoryId)||He.includes(tt.id)));Ye=[...Ye,...ze]}const et=Ye.filter(ze=>ze.isConstant?!0:!ze.keywords||ze.keywords.length===0?!1:ze.keywords.some(tt=>w.includes(tt.toLowerCase()))),Pt=[],Xe=[],_e=[],me=[];return et.forEach(ze=>{ze.position==="front"?Pt.push(ze.content):ze.position==="back"?_e.push(ze.content):ze.depth&&ze.depth>0?me.push({content:ze.content,depth:ze.depth}):Xe.push(ze.content)}),{front:Pt,mid:Xe.join(`

`),back:_e,historyInjections:me}},Bn=()=>{M.value="",R.value="",T.value="",$.value="",z.value="input",u.value=!0,b.value=!1;const _=i.value;_.type==="group"||_.isGroup?(j.value=(_.members||[]).map(g=>S.contacts.find(w=>w.id===g)).filter(g=>g&&g.id!==ge.value.id),I.value=""):(I.value=Ie.value.id||_.id,j.value=[])},Un=()=>{const _=parseFloat(M.value);if(!_||_<=0){$.value="Invalid amount";return}if(!I.value){$.value="Please select a recipient";return}$.value="",z.value="password"},Gl=async()=>{if(!S.wallet.hasPassword){$.value="Please set payment password in Wallet first";return}if(!Vl(T.value)){$.value="Incorrect password";return}const _=parseFloat(M.value);let g=Ie.value.name;if(j.value.length>0){const Ye=j.value.find(He=>He.id===I.value);g=Ye?Ye.name:"Unknown"}if(!ii("transfer",_,`Transfer to ${g}`)){$.value="Insufficient balance";return}const ae={id:"msg_"+Date.now(),conversationId:n.chatId,text:`Transfer: ${_.toFixed(2)}`,senderId:ge.value.id,recipientId:I.value,timestamp:Date.now(),isMe:!0,type:"transfer",amount:_,note:R.value,type:"transfer",amount:_,note:R.value,status:"pending"};await Ot(n.chatId,ae),u.value=!1,bt()},ql=_=>{L.value=_,y.value=!0},Jl=_=>{L.value={..._,status:_.action==="collect"?"collected":"rejected",note:_.action==="collect"?"Payment Accepted":"Payment Returned",isMe:!_.isMe},y.value=!0},Ql=_=>{if(_.type==="payment_notice")return _.isMe?_.senderName:_.targetName;if(_.isMe){if(_.recipientId){const g=S.contacts.find(w=>w.id===_.recipientId);if(g)return g.name}return Ie.value.name||"User"}else{const g=as(_.senderId);return g?g.name:Ie.value.name||"User"}},Yl=async()=>{if(!L.value)return;const _=L.value;await Xs(n.chatId,{..._,status:"collected"});const g=S.contacts.find(ae=>ae.id===_.senderId),w=g?g.name:"Unknown";ka(_.amount,`Transfer from ${w}`),await Ot(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"collect",amount:_.amount,senderName:ge.value.name,targetName:w,timestamp:Date.now(),isMe:!0,text:"Accepted transfer"}),y.value=!1},Xl=async()=>{if(!L.value)return;const _=L.value;await Xs(n.chatId,{..._,status:"rejected"});const g=S.contacts.find(ae=>ae.id===_.senderId),w=g?g.name:"Unknown";await Ot(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"reject",amount:_.amount,senderName:ge.value.name,targetName:w,timestamp:Date.now(),isMe:!0,text:"Rejected transfer"}),y.value=!1},Ii=async(_=!1)=>{if(!r.value.trim())return;if(_&&!Xt.apiKey.value){alert(" API Setup  API Key  Model");return}const g=r.value;r.value="";const w={id:"msg_"+Date.now(),conversationId:n.chatId,text:g,senderId:"me",timestamp:Date.now(),isMe:!0,replyTo:W.value?{id:W.value.id,text:W.value.text||(W.value.type==="image"?"[Image]":"[Content]"),senderName:k(W.value),type:W.value.type}:null};W.value=null,await Ot(n.chatId,w),_&&(i.value?.isGroup,Mo())},Zl=async()=>{if(r.value.trim())await Ii(!0);else{if(!Xt.apiKey.value){alert(" API Setup  API Key  Model");return}Mo()}},Xt=Hl(),Mo=async()=>{if(!Xt.apiKey.value)return;c.value=!0;const _=ge.value.name,g=ge.value.persona||"Unknown",w=i.value?.localSettings?.shortTermMemoryLimit||15,ae=Te.value.slice(-w),Ye=ae.map(Y=>Y.text).join(`
`),{front:He,mid:et,back:Pt,historyInjections:Xe}=Dt(Ye,""),_e=i.value?.localSettings||{},me=_e.timeAwareness!==!1,ze=_e.envSensing===!0,Ue=(et?et+`
`:"")+"";let ls="";const pt=[],Mt=[];for(let Y=1;Y<ae.length;Y++){const ue=ae[Y],Ae=ae[Y-1],Oe=ue.timestamp-Ae.timestamp,$e=Math.floor(Oe/6e4);$e>15&&Mt.push({index:Y,diffMins:$e,currTimestamp:ue.timestamp})}Mt.length>4&&Mt.splice(0,Mt.length-4);const Js=Y=>{if(Y<60)return`${Y} `;const ue=Math.floor(Y/60),Ae=Y%60;return ue<24?`${ue} ${Ae>0?" "+Ae+" ":""}`:`${Math.floor(ue/24)}  ${ue%24} `},st=Y=>{const ue=new Date(Y),Ae=ue.getFullYear(),Oe=String(ue.getMonth()+1).padStart(2,"0"),$e=String(ue.getDate()).padStart(2,"0"),ot=ue.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return`${Ae}-${Oe}-${$e} ${ot}`},Bt=(Y,ue)=>{let Ae=Intl.DateTimeFormat().resolvedOptions().timeZone;Y&&Y.trim()&&(Ae=Y.trim());try{const Oe=ue?new Date(ue):new Date,$e=Oe.getFullYear(),ot=String(Oe.getMonth()+1).padStart(2,"0"),Ze=String(Oe.getDate()).padStart(2,"0"),vt=Oe.toLocaleTimeString("en-US",{timeZone:Ae,hour:"2-digit",minute:"2-digit",hour12:!1});return`${$e}-${ot}-${Ze} ${vt}`}catch{return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}};let ws=!1,Ns=0;const Fn=[];if(ae.forEach((Y,ue)=>{const Ae=Mt.find($e=>$e.index===ue);if(Ae){if(me){const $e=Js(Ae.diffMins),Ze=`[(${st(Ae.currTimestamp)})  ${$e}]`;pt.push({role:"system",content:Ze})}ws=!0,Ns=Ae.currTimestamp}let Oe="Unknown";if(Y.isMe)Oe=ge.value.name;else{const $e=as(Y.senderId);Oe=$e?$e.name:"Unknown"}if(Y.isRecalled)pt.push({role:Y.isMe?"user":"assistant",content:`[] ${Oe}${Y.text||"[]"}`});else if(Y.type==="image")Y.isAnalyzed?pt.push({role:Y.isMe?"user":"assistant",content:`[] ${Oe}[]`}):(pt.push({role:Y.isMe?"user":"assistant",content:[{type:"text",text:`[] ${Oe} sent an image.`},{type:"image_url",image_url:{url:Y.content}}]}),Fn.push(Y.id));else if(Y.type==="transfer")pt.push({role:Y.isMe?"user":"assistant",content:`[] ${Oe}@${Mi(Y)} ${Y.amount?Y.amount.toFixed(2):"0.00"} ${Y.note||""}`.trim()});else if(Y.type==="payment_notice")Y.action==="collect"?pt.push({role:"assistant",content:`[] ${Y.senderName}${Y.targetName} ${Y.amount}`}):pt.push({role:"assistant",content:`[] ${Y.senderName}${Y.targetName} ${Y.amount}`});else{let $e="[]",ot=Y.text;if(Y.type==="sticker"?($e="[]",ot=Y.keyword):Y.type==="spoiler"?($e="[]",ot=Y.text):Y.type==="voice"&&($e="[]",ot=Y.text),Y.replyTo){$e="[]";let Ze=Y.replyTo.senderName;if(Y.replyTo.id){const Zt=Te.value.find(Ut=>Ut.id===Y.replyTo.id);if(Zt)if(Zt.isMe)Ze=ge.value.name;else{const Ut=as(Zt.senderId);Ut&&Ut.name&&(Ze=Ut.name)}}const vt=`{${Ze}${Y.replyTo.text}}`;pt.push({role:Y.isMe?"user":"assistant",content:`${$e} ${Oe}${vt} ${ot}`})}else pt.push({role:Y.isMe?"user":"assistant",content:`${$e} ${Oe}${ot}`})}}),ae.length>0){const Y=ae[ae.length-1],ue=Date.now(),Ae=ue-Y.timestamp,Oe=Math.floor(Ae/6e4);if(Oe>15){if(me){const $e=Js(Oe),Ze=`[(${st(ue)})  ${$e}]`;pt.push({role:"system",content:Ze})}ws=!0,Ns=ue}}if(ws&&(me||ze)||!ws&&ze){const Y=i.value?.localSettings?.myLocationOverride,ue=ge.value.name,Ae=Ns||Date.now(),Oe=i.value?.localSettings?.myWeatherConfig,$e=async(lt,rt)=>{let jt=[];if(me&&jt.push(Bt(lt,Ae)),ze&&rt&&rt.lat){const Rs=await Bf(rt.lat,rt.long);Rs&&jt.push(`${Rf(Rs.conditionCode)} ${Rs.temperature}C`)}return jt.join(" ")},ot=await $e(Y,Oe),Ze=[];ot&&Ze.push(`${ue}: ${ot}`);const vt=i.value?.localSettings?.theirLocationOverride,Zt=i.value?.localSettings?.memberOverrides||{},Ut=i.value?.localSettings?.theirWeatherConfig,xt=i.value?.localSettings?.groupWeatherConfigs||{};if((i.value?.type==="group"||i.value?.isGroup)&&Array.isArray(i.value.members))for(const lt of i.value.members){const rt=S.contacts.find(jt=>jt.id===lt);if(rt){const jt=Zt[lt]?.location||rt.location,Rs=xt[lt],un=await $e(jt,Rs);un&&Ze.push(`${rt.name}: ${un}`)}}else{const lt=S.contacts.find(rt=>rt.id===n.chatId);if(lt){const rt=vt||lt.location,jt=await $e(rt,Ut);jt&&Ze.push(`${lt.name}: ${jt}`)}}if(Ze.length>0){let lt="",rt="Current Context";me&&!ze&&(lt="",rt="Current Time"),!me&&ze&&(lt="",rt="Current Weather");const jt=Ze.join(", ");console.log("[ContextAwareness] Injected:",jt),pt.push({role:"system",content:`[${lt} (${rt})${jt}]`})}}const Ao=[];H.value.length>0&&H.value.forEach(Y=>{on(Y.id).forEach(Ae=>Ao.push(Ae.keyword))});const ji=Ao.length>0?`
[]: ${Ao.join(", ")}`:`
[]: `;if(i.value?.type==="group"||i.value?.isGroup){const ue=(i.value.members||[]).map(Ae=>{const Oe=typeof Ae=="object"?Ae.id:Ae,$e=S.contacts.find(ot=>ot.id===Oe);return $e?`${$e.name||"Unknown"} (${$e.handle||$e.name}): ${$e.persona||$e.bio||"No persona"}`:""}).filter(Boolean).join(`
`);ls=`
 "${i.value.title||"Group"}"
"${_}" (${g})
${Ue?`
`+Ue+`
`:""}

${ue||""}
${ji}

 - 
 [] 
- " X //"""""""""
- 
- 
- 

 - 
 []  []  [] 
- 
- /


- 
- 
- 


[] 
[] {} 
[] 
[] 
[] @  
[]  [] AliceMagic 100.00
[]  [] BobMagic 50.00
[] 
[] 

1
[] Noir Official
[] Alice Noir 
[] Bob{Alice Noir } 


2-4`}else{const Y=S.contacts.find(Oe=>Oe.id===n.chatId),ue=Y?.name||a.value.handle,Ae=Y?.persona||Y?.bio||"A helpful assistant.";ls=`
"${ue}"
Persona${Ae}
"${_}"
${g}
${Ue?`
`+Ue+`
`:""}
${ji}

 - 
 [] 
- " X //"""""""""
- 
- 
- 

 - 
 [] "[] @ 100.00" []  [] 
- 
- /


[] ${ue}
[] ${ue}{} 
[] ${ue}
[] ${ue}
[] ${ue}@  
[] ${ue} [] ${ue}${_} 100.00
[] ${ue} [] ${ue}${_} 50.00
[] ${ue}
[] ${ue}

1
[] ${ue}
[] ${ue}


2-71`}Xe&&Xe.length>0&&Xe.forEach(Y=>{const ue=Math.max(0,pt.length-Y.depth);pt.splice(ue,0,{role:"system",content:`[] ${Y.content}`})});try{const Y=[...He.map(vt=>({role:"system",content:`[/] ${vt}`})),{role:"system",content:ls},...pt,...Pt.map(vt=>({role:"system",content:`[/] ${vt}`}))],ue=Xt.stream.value===!0;console.log("[TimeAwareness] Settings Stream Value:",Xt.stream.value),console.log("[TimeAwareness] Effective useStream:",ue);const Ae={model:Xt.model.value||"gpt-3.5-turbo",messages:Y,temperature:Xt.temperature.value||.7,stream:ue},Oe=Xt.getActiveKey(),$e=Xt.endpoint.value.replace(/\/+$/,"")+"/chat/completions",ot=async()=>{const vt=1500+Math.random()*1500;console.log(`[TimeAwareness] Simulating Delay: ${Math.floor(vt)}ms`),await new Promise(Zt=>setTimeout(Zt,vt))},Ze=await fetch($e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify(Ae)});if(!Ze.ok){const vt=await Ze.text();throw new Error(`API Error: ${Ze.status} - ${vt}`)}if(ue){const vt=Ze.body.getReader(),Zt=new TextDecoder("utf-8");let Ut=!1,xt="";for(;!Ut;){const{value:lt,done:rt}=await vt.read();if(Ut=rt,lt){const Rs=Zt.decode(lt,{stream:!0}).split(`
`);for(const un of Rs)if(un.trim().startsWith("data: ")){const Ti=un.trim().slice(6);if(Ti==="[DONE]")continue;try{const nr=JSON.parse(Ti).choices?.[0]?.delta?.content||"";xt+=nr;const Vn=/\[(?:||||||||)]/;let rs=xt.search(Vn),Qs=-1;if(rs!==-1){const Eo=xt.substring(rs+1).search(Vn);Eo!==-1&&(Qs=rs+1+Eo)}for(;rs!==-1&&Qs!==-1;){const Ai=xt.slice(rs,Qs).trim();if(await To(Ai),await ot(),xt=xt.slice(Qs),rs=xt.search(Vn),Qs=-1,rs!==-1){const Ei=xt.substring(rs+1).search(Vn);Ei!==-1&&(Qs=rs+1+Ei)}}}catch{}}}}if(xt.search(/\[(?:||||||||)]/)!==-1){const lt=xt.substring(xt.search(/\[(?:||||||||)]/)).trim();await To(lt)}}else{const Ut=((await Ze.json()).choices?.[0]?.message?.content||"").split(/(?=\[(?:||||||||)])/);for(const xt of Ut)xt.trim()&&(await To(xt),await ot())}}catch(Y){console.error("AI Reply failed",Y),c.value=!1}finally{if(c.value=!1,Fn&&Fn.length>0)for(const Y of Fn){const ue=Te.value.find(Ae=>Ae.id===Y);ue&&await Xs(n.chatId,{...ue,isAnalyzed:!0})}await $s(),bt()}},jo=new Set,er=async(_,g,w,ae)=>{const Ye=Te.value.filter(et=>et.type==="transfer"&&et.status==="pending"&&et.isMe===!0&&Math.abs(et.amount-ae)<.1&&!jo.has(et.id)),He=Ye[Ye.length-1];if(He){jo.add(He.id),_==="collect"?await Xs(n.chatId,{...He,status:"collected"}):_==="reject"&&(await Xs(n.chatId,{...He,status:"rejected"}),ka(He.amount,`Refund from ${g}`));let et=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){const Xe=S.contacts.find(_e=>_e.name===g);Xe&&(et=Xe.id)}await Ot(n.chatId,{id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"payment_notice",action:_,amount:ae,senderId:et,senderName:g,targetName:w,timestamp:Date.now(),isMe:!1,text:_==="collect"?"Accepted transfer":"Rejected transfer"}),setTimeout(()=>jo.delete(He.id),5e3)}},To=async _=>{const g=_.match(/^\[(|)]\s*(.+?)[:]\s*(.+?)\s+(\d+(\.\d+)?)/);if(g){const _e=g[1]===""?"collect":"reject",me=g[2].trim(),ze=g[3].trim(),tt=parseFloat(g[4]);await er(_e,me,ze,tt);return}const w=_.match(/^\[\]\s*(.+?)[:]\s*\{(.+?)[:](.+?)\}\s*(.+)$/s);if(w&&w[4]){const _e=w[1].trim(),me=w[2].trim(),ze=w[3].trim(),tt=w[4].trim(),Ue=Te.value.slice().reverse().find(st=>{const Bt=st.text&&st.text.includes(ze);let ws=!1;if(st.isMe)ws=me===ge.value.name||me===ge.value.handle;else{const Ns=as(st.senderId);Ns&&(ws=me===Ns.name||me===Ns.handle)}return Bt&&ws});let ls=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){let st=S.contacts.find(Bt=>Bt.name===_e||Bt.handle===_e);st&&(ls=st.id)}let Mt=me;if(Ue)Mt=k(Ue);else if(me===ge.value.name)Mt=ge.value.handle||ge.value.name;else{const st=S.contacts.find(Bt=>Bt.name===me);st&&(Mt=st.handle||st.name)}const Js={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:tt,content:tt,type:"text",senderId:ls,timestamp:Date.now(),isMe:!1,replyTo:{id:Ue?Ue.id:"unknown_quote",text:ze,senderName:Mt,type:Ue?Ue.type:"text"}};await Ot(n.chatId,Js),await $s(),bt();return}const ae=_.match(/^\[]\s*(.+?)[:](.+)$/s);if(ae&&ae[2]){const _e=ae[1].trim(),me=ae[2].trim();await dn(_e,me,"text");return}const Ye=_.match(/^\[]\s*(.+?)[:](.+)$/s);if(Ye&&Ye[2]){const _e=Ye[1].trim(),me=Ye[2].trim();await dn(_e,me,"spoiler");return}const He=_.match(/^\[]\s*(.+?)[:]\s*@(.+?)\s+(\d+(\.\d+)?)\s*(.*)$/);if(He){const _e=He[1].trim(),me=He[2].trim(),ze=parseFloat(He[3]),tt=He[5]?He[5].trim():"";let Ue=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){const st=S.contacts.find(Bt=>Bt.name===_e);st&&(Ue=st.id)}const pt=ge.value.name.toLowerCase();let Mt=null;if(me.toLowerCase()===pt||me===""||me==="")Mt=ge.value.id;else{const st=S.contacts.find(Bt=>Bt.name===me);st&&(Mt=st.id)}const Js={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"transfer",amount:ze,note:tt,senderId:Ue,recipientId:Mt,recipientName:me,timestamp:Date.now(),isMe:!1,status:"pending"};await Ot(n.chatId,Js);return}const et=_.match(/^\[]\s*(.+?)[:](.+)$/s);if(et&&et[2]){const _e=et[1].trim(),me=et[2].trim(),ze=H.value.flatMap(tt=>on(tt.id)).find(tt=>tt.keyword===me);ze&&await dn(_e,ze.url,"sticker",me);return}const Pt=_.match(/^\[]\s*(.+?)[:](.+)$/s);if(Pt&&Pt[2]){const _e=Pt[1].trim(),me=Pt[2].trim();await dn(_e,me,"voice");return}const Xe=_.match(/\[\]\s*(.+?)[:](.+)$/s);if(Xe&&Xe[2]){const _e=Xe[1].trim(),me=Xe[2].trim(),tt=Te.value.slice(-20).reverse().find(Ue=>!Ue.isRecalled&&Ue.text&&(Ue.text.includes(me)||me.includes(Ue.text))&&Ue.senderId!==n.chatId);if(tt)await new Promise(Ue=>setTimeout(Ue,2e3)),Be(tt.id);else{await dn(_e,me,"text"),await $s(),bt(),await new Promise(ls=>setTimeout(ls,2500));const Ue=Te.value[Te.value.length-1];Ue&&!Ue.isRecalled&&Be(Ue.id)}return}},dn=async(_,g,w="text",ae="")=>{let Ye=n.chatId;if(i.value?.type==="group"||i.value?.isGroup){const Pt=_.toLowerCase();let Xe=S.contacts.find(_e=>_e.name===_||_e.handle===_||_e.id===_||_e.name&&_e.name.toLowerCase()===Pt||_e.handle&&_e.handle.toLowerCase()===Pt);if(!Xe&&i.value.members.includes(_)&&(Xe=S.contacts.find(_e=>_e.id===_)),!Xe&&i.value.members&&i.value.members.length>0){const _e=i.value.members[0];Xe=S.contacts.find(me=>me.id===_e)}Xe&&(Ye=Xe.id)}const et={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:g,content:g,type:w,keyword:ae,senderId:Ye,timestamp:Date.now(),isMe:!1};await Ot(n.chatId,et),await $s(),bt()},Mi=_=>{if(_.recipientName)return _.recipientName;if(_.recipientId){if(_.recipientId===ge.value.id)return ge.value.name;const g=S.contacts.find(w=>w.id===_.recipientId);if(g)return g.name}return _.isMe?Ie.value.name||"User":ge.value.name},tr=_=>_.isMe?!1:!!(!_.recipientId&&!_.recipientName||_.recipientId===ge.value.id||_.recipientName&&(_.recipientName===ge.value.name||_.recipientName===""||_.recipientName.includes(ge.value.name))),as=_=>{if(_==="me")return null;const g=i.value?.localSettings?.memberOverrides?.[_],w=S.contacts.find(ae=>ae.id===_);return g?{...w,handle:g.nickname||w?.handle||"Unknown",avatar:g.avatar||w?.avatar,id:_}:w};return(_,g)=>(f(),v("div",Uf,[s("header",Ff,[s("div",Vf,[s("button",{onClick:l,class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...g[26]||(g[26]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),s("div",Kf,[s("div",{class:"size-9 rounded-full bg-black overflow-hidden flex items-center justify-center relative border border-gray-100",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[!a.value.avatar&&a.value.isAbstract?(f(),v("div",Wf,[...g[27]||(g[27]=[s("div",{class:"w-[0.5px] h-full bg-white/30 rotate-45 absolute left-1/2"},null,-1),s("div",{class:"w-[0.5px] h-full bg-white/30 -rotate-45 absolute left-1/2"},null,-1)])])):a.value.avatar?O("",!0):(f(),v("div",Hf))],4),s("div",Gf,[s("h1",qf,C(a.value.handle||"Unknown"),1),g[28]||(g[28]=s("span",{class:"text-[9px] text-zinc-400 uppercase tracking-[0.15em] font-medium"},"Online",-1))])]),s("div",Jf,[s("button",{onClick:g[0]||(g[0]=w=>_.$emit("navigate","chat-settings",{id:n.chatId})),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"more_horiz")])])]),s("main",{ref_key:"messagesContainer",ref:at,class:"flex-1 overflow-y-auto px-5 pt-4 pb-2 flex flex-col gap-4 w-full"},[s("div",Qf,[s("span",Yf,C(i.value?.time||"Today"),1)]),Te.value.length>0?(f(),v("div",Xf,[(f(!0),v(se,null,be(Te.value,w=>(f(),v("div",{key:w.id,id:"msg-"+w.id,class:K(["flex flex-col relative select-none",w.isMe?"items-end":"items-start"])},[w.isRecalled?(f(),v("div",ep,[s("div",{class:K(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0",pe.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[s("div",{class:K(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",J.value.has(w.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:ae=>V(w)},[J.value.has(w.id)?(f(),v("span",sp,"check")):O("",!0)],10,tp)],2),s("div",np,[s("div",{class:"flex flex-col items-center gap-1 cursor-pointer group p-2",onClick:Ce(ae=>w.isRecallRevealed=!w.isRecallRevealed,["stop"]),onContextmenu:Ce(ae=>P(w),["prevent"])},[s("span",ip,[hs(C(w.isMe?"":`${as(w.senderId)?.handle||as(w.senderId)?.name||"Someone"} `)+" ",1),s("span",ap,C(w.isRecallRevealed?"()":"()"),1)]),w.isRecallRevealed?(f(),v("div",lp,[w.type==="image"?(f(),v("img",{key:0,src:w.content||w.text,class:"max-w-[120px] rounded-lg opacity-80 grayscale"},null,8,rp)):w.type==="sticker"?(f(),v("img",{key:1,src:w.content||w.text,class:"max-w-[80px] opacity-80 grayscale"},null,8,cp)):w.type==="transfer"||w.type==="payment_notice"?(f(),v("span",dp,"["+C(w.type)+"]",1)):(f(),v("p",up,C(w.text||"[Empty Message]"),1))])):O("",!0)],40,op)])])):(f(),v("div",fp,[s("div",{class:K(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0 pt-[5px]",pe.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[s("div",{class:K(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",J.value.has(w.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:ae=>V(w)},[J.value.has(w.id)?(f(),v("span",vp,"check")):O("",!0)],10,pp)],2),s("div",{class:K(["flex-1 min-w-0 flex flex-col relative transition-all duration-300",[w.isMe?"items-end":"items-start",ee.value&&ee.value.id===w.id?"z-[60]":"z-auto",w.isRecalled?"opacity-90":""]])},[s("div",{class:K(["flex items-start gap-2 mb-2 w-full transition-all duration-300",w.isMe?"flex-row-reverse":"flex-row"]),onContextmenu:Ce(ae=>P(w),["prevent"])},[w.isMe&&i.value?.localSettings?.showSelfAvatar!==!1||!w.isMe&&i.value?.localSettings?.showOtherAvatar!==!1?(f(),v("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Ve({backgroundImage:`url(${w.isMe?i.value?.localSettings?.myAvatarOverride||ge.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E":i.value?.localSettings?.theirAvatarOverride||as(w.senderId)?.avatar||i.value?.avatar})`,backgroundSize:"cover"})},null,4)):O("",!0),s("div",{class:K(["flex flex-col max-w-[88%] text-[15px]",w.isMe?"items-end":"items-start"])},[i.value?.type==="group"&&!w.isMe?(f(),v("div",xp,C(as(w.senderId)?.handle||"Unknown"),1)):O("",!0),w.type==="sticker"?(f(),v("div",{key:1,class:K(["flex flex-col",w.isMe?"items-end":"items-start"])},[w.replyTo?(f(),v("div",{key:0,class:K(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",w.isMe?"items-end":"items-start"]),onClick:Ce(ae=>D(w.replyTo.id),["stop"])},[s("div",{class:K(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(w.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[s("span",mp,C(w.replyTo.senderName),1),s("span",hp,C(w.replyTo.text),1)],2)],10,gp)):O("",!0),s("div",{class:K(["rounded-2xl overflow-hidden mb-1",w.isMe?"rounded-tr-sm":"rounded-tl-sm"])},[s("img",{src:w.content||w.text,class:"max-w-[110px] max-h-[110px] object-contain block bg-white/50 backdrop-blur-sm"},null,8,yp)],2)],2)):w.type==="spoiler"?(f(),v("div",{key:2,class:"relative overflow-hidden rounded-[24px] cursor-pointer group w-[240px] h-[320px] shadow-sm transition-all duration-300 hover:shadow-md",onClick:ae=>w.isRevealed=!w.isRevealed},[g[30]||(g[30]=s("div",{class:"absolute inset-0 bokeh-effect"},null,-1)),w.isRevealed?(f(),v("div",_p,[s("p",zp,C(w.text),1)])):(f(),v("div",kp,[...g[29]||(g[29]=[nt('<div class="absolute inset-0 z-0 opacity-80" data-v-c9cf87ae><div class="absolute w-14 h-16 top-6 left-6 -rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-translate-y-1" data-v-c9cf87ae><div class="w-full h-[80%] bg-zinc-800 flex items-center justify-center" data-v-c9cf87ae><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-c9cf87ae>filter_hdr</span></div></div><div class="absolute w-12 h-16 top-10 right-4 rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:translate-x-1" data-v-c9cf87ae><div class="w-full h-[80%] bg-zinc-300 flex items-center justify-center" data-v-c9cf87ae><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-c9cf87ae>photo_camera</span></div></div><div class="absolute w-14 h-16 bottom-12 left-8 rotate-6 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-rotate-3" data-v-c9cf87ae><div class="w-full h-[80%] bg-zinc-600 flex items-center justify-center" data-v-c9cf87ae><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-c9cf87ae>auto_awesome_motion</span></div></div></div><div class="relative z-10 flex flex-col items-center transform translate-y-2" data-v-c9cf87ae><span class="font-serif italic text-black text-[18px] tracking-tight drop-shadow-sm" data-v-c9cf87ae>Click to reveal</span><span class="text-[9px] text-black/50 uppercase tracking-[0.2em] font-medium mt-1" data-v-c9cf87ae>Tap/Click</span></div>',2)])]))],8,wp)):w.type==="image"?(f(),v("div",{key:3,class:K(["flex flex-col",w.isMe?"items-end":"items-start"])},[w.replyTo?(f(),v("div",{key:0,class:K(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[200px]",w.isMe?"items-end":"items-start"]),onClick:Ce(ae=>D(w.replyTo.id),["stop"])},[s("div",{class:K(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(w.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[s("span",Cp,C(w.replyTo.senderName),1),s("span",Sp,C(w.replyTo.text),1)],2)],10,$p)):O("",!0),s("div",{class:"rounded-2xl overflow-hidden mb-1 cursor-zoom-in",onClick:ae=>B(w.content)},[s("img",{src:w.content,class:"max-w-[200px] max-h-[300px] object-cover block bg-zinc-50 border border-black/5"},null,8,Mp)],8,Ip)],2)):w.type==="voice"?(f(),v(se,{key:4},[w.replyTo?(f(),v("div",{key:0,class:K(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",w.isMe?"items-end":"items-start"]),onClick:Ce(ae=>D(w.replyTo.id),["stop"])},[s("div",{class:K(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(w.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[s("span",Tp,C(w.replyTo.senderName),1),s("span",Ap,C(w.replyTo.text),1)],2)],10,jp)):O("",!0),s("div",{class:K(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-sm hover:shadow-md",[w.isMe?"bg-black text-white rounded-[18px] rounded-br-sm":"bg-white text-black rounded-[18px] rounded-bl-sm",J.value.has(w.id)?"ring-2 ring-indigo-500":""]]),onClick:ae=>w.isExpanded=!w.isExpanded},[s("div",Pp,[s("div",Op,[s("div",{class:K(["w-1 h-2 rounded-full animate-pulse",w.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.8s"}},null,2),s("div",{class:K(["w-1 h-3 rounded-full animate-pulse",w.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.1s"}},null,2),s("div",{class:K(["w-1 h-2 rounded-full animate-pulse",w.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.9s"}},null,2),s("div",{class:K(["w-1 h-4 rounded-full animate-pulse",w.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.3s"}},null,2),s("div",{class:K(["w-1 h-2 rounded-full animate-pulse",w.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.7s"}},null,2)]),s("span",Np,C(Math.min(60,Math.ceil(w.text.length/3)))+"'",1)]),w.isExpanded?(f(),v("div",{key:0,class:K(["px-3 pb-3 pt-1 animate-in slide-in-from-top-1 duration-200 border-t",w.isMe?"border-white/10":"border-black/5"])},[s("p",Rp,C(w.text),1)],2)):O("",!0)],10,Ep)],64)):w.type==="payment_notice"?(f(),v("div",{key:5,onClick:ae=>Jl(w),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[s("div",Dp,[s("div",Bp,[s("div",{class:K(["w-8 h-8 rounded-full flex items-center justify-center shrink-0",w.action==="collect"?"bg-black text-white":"bg-zinc-100 text-zinc-900"])},[s("span",Up,C(w.action==="collect"?"check":"close"),1)],2),g[31]||(g[31]=s("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Payment",-1))]),s("span",Fp,C(w.action==="collect"?"Success":"Returned"),1)]),s("div",Vp,[g[32]||(g[32]=s("span",{class:"text-xs opacity-60 mr-1"},"",-1)),s("span",Kp,C(w.amount?w.amount.toFixed(2):"0.00"),1)]),s("div",Wp,C(w.action==="collect"?`${w.senderName} accepted`:`${w.senderName} rejected transfer`),1)],8,Lp)):w.type==="transfer"?(f(),v("div",{key:6,onClick:ae=>ql(w),class:K(["rounded-2xl p-4 min-w-[220px] cursor-pointer transition-transform active:scale-95 border mb-1 relative overflow-hidden",[w.isMe?"bg-black text-white border-black":"bg-white text-black border-zinc-200",w.status==="rejected"?"opacity-60 grayscale":""]])},[w.status==="rejected"?(f(),v("div",Gp,[...g[33]||(g[33]=[s("div",{class:"w-full h-[1px] bg-current opacity-50 rotate-[-12deg]"},null,-1)])])):O("",!0),s("div",qp,[s("div",Jp,[s("div",{class:K(["w-8 h-8 rounded-full flex items-center justify-center",w.isMe?"bg-zinc-800":"bg-zinc-100"])},[...g[34]||(g[34]=[s("span",{class:"material-symbols-outlined text-[18px]"},"currency_yen",-1)])],2),g[35]||(g[35]=s("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Transfer",-1))]),s("span",Qp,C(w.status==="collected"?"Accepted":w.status==="rejected"?"Returned":w.status==="pending"?"Unclaimed":"Success"),1)]),s("div",Yp,[g[36]||(g[36]=s("span",{class:"text-xs opacity-60 mr-1"},"",-1)),s("span",{class:K(["text-2xl font-serif font-bold tracking-tight",w.status==="rejected"?"line-through decoration-2":""])},C(w.amount.toFixed(2)),3)]),s("div",Xp,[s("span",Zp,C(`to ${Mi(w)}`),1),w.note?(f(),v("span",e0,' "'+C(w.note)+'" ',1)):O("",!0)])],10,Hp)):(f(),v("div",{key:7,class:K([w.isMe?"bubble-sent bg-bubble-sent text-white":"bubble-received bg-bubble-received text-black","px-3 py-[7px] shadow-sm min-h-[34px] w-fit max-w-full"])},[w.replyTo?(f(),v("div",{key:0,class:"mb-2 mt-0.5 cursor-pointer select-none group",onClick:Ce(ae=>D(w.replyTo.id),["stop"])},[s("div",{class:K(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",w.isMe?"border-white/50 group-hover:border-white/70":"border-zinc-300 group-hover:border-zinc-400"])},[s("span",{class:K(["text-[9px] font-bold uppercase tracking-wider opacity-60",w.isMe?"text-white":"text-zinc-500"])},C(w.replyTo.senderName),3),s("span",{class:K(["text-[12px] line-clamp-1 leading-snug opacity-90",w.isMe?"text-white":"text-zinc-700"])},C(w.replyTo.text),3)],2)],8,t0)):O("",!0),s("p",s0,C(w.text),1)],2)),s("span",n0,C(new Date(w.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)],2)],42,bp)],2)]))],10,Zf))),128))])):O("",!0),c.value?(f(),v("div",o0,[s("div",i0,[i.value?.localSettings?.showOtherAvatar!==!1?(f(),v("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Ve({backgroundImage:`url(${i.value?.localSettings?.theirAvatarOverride||a.value.avatar||i.value?.avatar})`,backgroundSize:"cover"})},null,4)):O("",!0),g[37]||(g[37]=nt('<div class="bubble-received bg-bubble-received px-3 py-[7px] text-black w-fit" data-v-c9cf87ae><div class="flex gap-1 h-[21px] items-center" data-v-c9cf87ae><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-c9cf87ae></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-c9cf87ae></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-c9cf87ae></div></div></div>',1))]),g[38]||(g[38]=s("span",{class:"text-[9px] text-zinc-300 ml-[50px] tracking-wider uppercase"},"Typing...",-1))])):O("",!0),(!i.value?.id||i.value.id!=="noir")&&Te.value.length===0?(f(),v("div",a0,[...g[39]||(g[39]=[s("span",{class:"text-[12px] opacity-70"},"No messages yet",-1)])])):O("",!0),s("div",{ref_key:"messagesEndRef",ref:It,class:"h-px w-full"},null,512)],512),d.value||b.value?(f(),v("div",{key:0,class:"absolute inset-0 z-30",onClick:ce})):O("",!0),d.value?(f(),v("div",l0,[s("div",{class:"w-full flex justify-center pt-3 pb-1 shrink-0 bg-white",onClick:g[1]||(g[1]=w=>d.value=!1)},[...g[40]||(g[40]=[s("div",{class:"w-8 h-1 rounded-full bg-zinc-200/80"},null,-1)])]),s("div",r0,[g[43]||(g[43]=s("span",{class:"text-[10px] font-bold tracking-[0.2em] text-zinc-400 uppercase font-sans"},"Sticker Meanings",-1)),s("div",c0,[g[42]||(g[42]=s("button",{class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[s("span",{class:"material-symbols-outlined text-[18px]"},"search")],-1)),s("button",{onClick:Ce(fe,["stop"]),class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[...g[41]||(g[41]=[s("span",{class:"material-symbols-outlined text-[18px]"},"settings",-1)])])])]),s("div",d0,[G.value?(f(),v("div",u0,[(f(!0),v(se,null,be(ct(on)(G.value.id),w=>(f(),v("div",{key:w.id,class:"flex flex-col items-center gap-2 cursor-pointer group w-full",onClick:ae=>je(w)},[s("div",p0,[s("img",{src:w.url,class:"w-full h-full object-cover drop-shadow-sm group-hover:scale-110 transition-transform duration-300"},null,8,v0)]),s("span",b0,C(w.keyword),1)],8,f0))),128))])):(f(),v("div",x0,[g[45]||(g[45]=s("div",{class:"w-12 h-12 rounded-full bg-zinc-50 flex items-center justify-center mb-1"},[s("span",{class:"material-symbols-outlined text-2xl opacity-40"},"dashboard_customize")],-1)),s("div",g0,[g[44]||(g[44]=s("span",{class:"text-[10px] uppercase font-bold tracking-widest text-zinc-400"},"Library Empty",-1)),s("button",{onClick:Ce(fe,["stop"]),class:"text-[10px] text-zinc-500 hover:text-black border-b border-zinc-300 hover:border-black transition-colors pb-0.5"}," Mount your packs ")])]))]),s("div",m0,[g[47]||(g[47]=s("button",{class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-50 transition-colors text-zinc-400 hover:text-black"},[s("span",{class:"material-symbols-outlined text-[20px]"},"history")],-1)),g[48]||(g[48]=s("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),s("div",h0,[(f(!0),v(se,null,be(H.value,w=>(f(),v("button",{key:w.id,onClick:ae=>Me.value=w.id,class:K(["shrink-0 transition-all flex items-center justify-center relative",Me.value===w.id?"opacity-100":"opacity-30 hover:opacity-100"])},[s("div",w0,[Me.value===w.id?(f(),v("span",k0)):O("",!0),w.name.toLowerCase().includes("shape")?(f(),v("span",_0,"category")):(f(),v("span",z0,C(w.name.substring(0,2)),1))])],10,y0))),128))]),g[49]||(g[49]=s("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),s("button",{onClick:Ce(fe,["stop"]),class:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-black transition-colors rounded-lg hover:bg-zinc-50"},[...g[46]||(g[46]=[s("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])])])])):O("",!0),(f(),ye(mt,{to:"body"},[A.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:g[3]||(g[3]=Ce(w=>A.value=!1,["self"]))},[s("div",$0,[g[51]||(g[51]=s("div",{class:"text-center space-y-2"},[s("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Pack Selection"),s("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium"},"Choose what you see in this chat")],-1)),s("div",C0,[Q.value.length===0?(f(),v("div",S0,[...g[50]||(g[50]=[s("span",{class:"material-symbols-outlined text-3xl"},"folder_off",-1),s("span",{class:"text-[10px] uppercase tracking-widest font-bold"},"Library is empty",-1)])])):O("",!0),(f(!0),v(se,null,be(Q.value,w=>(f(),v("button",{key:w.id,onClick:ae=>Ne(w.id),class:K(["w-full flex items-center justify-between p-4 rounded-2xl transition-all group border",ke(w.id)?"bg-zinc-50 border-zinc-200":"bg-transparent border-transparent hover:bg-zinc-50"])},[s("div",M0,[s("div",j0,C(w.name.charAt(0)),1),s("span",T0,C(w.name),1)]),s("div",{class:K(["w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300 border",ke(w.id)?"bg-black border-black text-white scale-110":"bg-transparent border-zinc-300 group-hover:border-zinc-400"])},[te(s("span",A0,"check",512),[[pd,ke(w.id)]])],2)],10,I0))),128))]),s("div",E0,[s("button",{onClick:g[2]||(g[2]=w=>A.value=!1),class:"py-4 rounded-full font-bold text-[11px] uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5"},"Done")])])])):O("",!0)])),b.value?(f(),v("div",P0,[s("div",O0,[s("button",{onClick:oe,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...g[52]||(g[52]=[nt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><path d="M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z" data-v-c9cf87ae></path><path d="M14 3v4a2 2 0 0 0 2 2h4" data-v-c9cf87ae></path><path d="M8 13h0" data-v-c9cf87ae></path><path d="M16 13h0" data-v-c9cf87ae></path><path d="M10 16s.5 1 2 1 2-1 2-1" data-v-c9cf87ae></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>Sticker</span>',2)])]),s("button",{onClick:g[4]||(g[4]=w=>_.$refs.fileInput.click()),class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...g[53]||(g[53]=[nt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><rect width="18" height="18" x="3" y="3" rx="2" ry="2" data-v-c9cf87ae></rect><circle cx="9" cy="9" r="2" data-v-c9cf87ae></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" data-v-c9cf87ae></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>Gallery</span>',2)])]),s("button",{onClick:Ht,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...g[54]||(g[54]=[nt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" data-v-c9cf87ae></path><circle cx="12" cy="13" r="3" data-v-c9cf87ae></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>Camera</span>',2)])]),s("button",{onClick:Yt,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...g[55]||(g[55]=[s("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[s("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"mic")],-1),s("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Voice",-1)])]),g[57]||(g[57]=nt('<button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-c9cf87ae><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" data-v-c9cf87ae></path><circle cx="12" cy="10" r="3" data-v-c9cf87ae></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>Location</span></button><button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-c9cf87ae><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" data-v-c9cf87ae></path><circle cx="12" cy="7" r="4" data-v-c9cf87ae></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>Contact</span></button>',2)),s("button",{onClick:Bn,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...g[56]||(g[56]=[nt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><path d="M8 3 4 7l4 4" data-v-c9cf87ae></path><path d="M4 7h16" data-v-c9cf87ae></path><path d="m16 21 4-4-4-4" data-v-c9cf87ae></path><path d="M20 17H4" data-v-c9cf87ae></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>Transfer</span>',2)])]),g[58]||(g[58]=nt('<button class="flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200" data-v-c9cf87ae><div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-c9cf87ae><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-c9cf87ae><circle cx="12" cy="12" r="1" data-v-c9cf87ae></circle><circle cx="19" cy="12" r="1" data-v-c9cf87ae></circle><circle cx="5" cy="12" r="1" data-v-c9cf87ae></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-c9cf87ae>More</span></button>',1))])])):O("",!0),s("input",{type:"file",ref_key:"fileInput",ref:N,accept:"image/*",class:"hidden",onChange:U},null,544),(f(),ye(mt,{to:"body"},[it.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:g[7]||(g[7]=Ce(w=>it.value=!1,["self"]))},[s("div",N0,[g[59]||(g[59]=s("div",{class:"text-center"},[s("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"New Spoiler"),s("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap to reveal functionality")],-1)),te(s("textarea",{"onUpdate:modelValue":g[5]||(g[5]=w=>ft.value=w),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Enter content to hide..."},null,512),[[le,ft.value]]),s("div",R0,[s("button",{onClick:g[6]||(g[6]=w=>it.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),s("button",{onClick:Et,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[q.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:g[10]||(g[10]=Ce(w=>q.value=!1,["self"]))},[s("div",L0,[g[60]||(g[60]=s("div",{class:"text-center"},[s("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"Voice Message"),s("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap microphone to stop")],-1)),te(s("textarea",{"onUpdate:modelValue":g[8]||(g[8]=w=>de.value=w),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Listening...",autofocus:""},null,512),[[le,de.value]]),s("div",D0,[s("button",{onClick:g[9]||(g[9]=w=>q.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),s("button",{onClick:x,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[u.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:g[17]||(g[17]=Ce(w=>u.value=!1,["self"]))},[s("div",B0,[z.value==="input"?(f(),v("h3",U0,"Transfer")):(f(),v("h3",F0,"Verify")),z.value==="input"?(f(),v("div",V0,[j.value.length>0?(f(),v("div",K0,[g[63]||(g[63]=s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-2"},"Recipient",-1)),s("div",W0,[te(s("select",{"onUpdate:modelValue":g[11]||(g[11]=w=>I.value=w),class:"w-full bg-zinc-50 border-none rounded-xl px-4 py-3 text-sm appearance-none focus:ring-1 focus:ring-black outline-none font-medium text-center"},[g[61]||(g[61]=s("option",{value:"",disabled:""},"Select Member",-1)),(f(!0),v(se,null,be(j.value,w=>(f(),v("option",{key:w.id,value:w.id},C(w.name),9,H0))),128))],512),[[Ln,I.value]]),g[62]||(g[62]=s("span",{class:"material-symbols-outlined absolute right-3 top-3 text-zinc-400 pointer-events-none"},"expand_more",-1))])])):(f(),v("p",G0,"To "+C(Ie.value.name),1)),s("div",q0,[te(s("input",{"onUpdate:modelValue":g[12]||(g[12]=w=>M.value=w),type:"number",placeholder:" 0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors bg-transparent"},null,512),[[le,M.value]]),te(s("input",{"onUpdate:modelValue":g[13]||(g[13]=w=>R.value=w),type:"text",placeholder:"Add a note...",class:"w-full text-center text-sm bg-zinc-50 rounded-xl py-3 focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[le,R.value]])]),s("div",J0,C($.value),1),s("div",Q0,[s("button",{onClick:g[14]||(g[14]=w=>u.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:Un,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Next")])])):(f(),v("div",Y0,[g[64]||(g[64]=s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-6"},"Enter Payment Password",-1)),s("div",X0,[te(s("input",{"onUpdate:modelValue":g[15]||(g[15]=w=>T.value=w),type:"password",maxlength:"6",autofocus:"",class:"w-full bg-zinc-50 rounded-xl px-4 py-4 text-center text-2xl tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[le,T.value]])]),s("div",Z0,C($.value),1),s("div",ev,[s("button",{onClick:g[16]||(g[16]=w=>z.value="input"),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Back"),s("button",{onClick:Gl,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])]))])])):O("",!0)])),(f(),ye(mt,{to:"body"},[y.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:g[19]||(g[19]=Ce(w=>y.value=!1,["self"]))},[s("div",tv,[s("div",{class:K(["h-32 flex items-center justify-center",L.value?.status==="rejected"?"bg-zinc-100":"bg-black"])},[s("span",{class:K(["material-symbols-outlined text-6xl",L.value?.status==="rejected"?"text-zinc-400":"text-white/20"])},C(L.value?.status==="rejected"?"remove_circle_outline":"check_circle"),3)],2),s("div",sv,[g[67]||(g[67]=s("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg mb-4"},[s("span",{class:"material-symbols-outlined text-4xl text-black"},"currency_yen")],-1)),s("h3",nv," "+C(L.value?.amount.toFixed(2)),1),s("p",ov,C(L.value?.status==="pending"?"Waiting for collection":L.value?.status==="collected"?"Transfer Successful":L.value?.status==="rejected"?"Transfer Returned":"Transfer"),1),s("div",iv,[s("div",av,[g[65]||(g[65]=s("span",{class:"text-zinc-400"},"Time",-1)),s("span",lv,C(new Date(L.value?.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),s("div",rv,[s("span",cv,C(L.value?.isMe?"To":"From"),1),s("span",dv,C(Ql(L.value)),1)]),L.value?.note?(f(),v("div",uv,[g[66]||(g[66]=s("span",{class:"text-zinc-400"},"Note",-1)),s("span",fv,C(L.value?.note),1)])):O("",!0)]),!L.value?.isMe&&L.value?.status==="pending"&&tr(L.value)?(f(),v("div",pv,[s("button",{onClick:Xl,class:"w-full py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Reject "),s("button",{onClick:Yl,class:"w-full py-3.5 rounded-full bg-black text-white font-bold text-xs uppercase tracking-widest hover:scale-105 transition-transform shadow-lg"}," Collect ")])):(f(),v("button",{key:1,onClick:g[18]||(g[18]=w=>y.value=!1),class:"mt-8 w-full py-3 rounded-full bg-zinc-100 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Close "))])])])):O("",!0)])),p.value?(f(),v("div",{key:3,class:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center cursor-zoom-out animate-in fade-in duration-200",onClick:g[20]||(g[20]=w=>p.value=!1)},[s("img",{src:h.value,class:"max-w-full max-h-full object-contain shadow-2xl transition-transform duration-300 scale-100"},null,8,vv)])):O("",!0),(f(),ye(mt,{to:"body"},[ne.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[50] bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:g[21]||(g[21]=w=>{ne.value=!1,ee.value=null})})):O("",!0),ne.value?(f(),v("div",bv,[s("div",xv,[g[73]||(g[73]=s("div",{class:"w-full flex justify-center pt-3 pb-2"},[s("div",{class:"w-10 h-1 rounded-full bg-zinc-200"})],-1)),s("div",gv,[ee.value?.type==="text"||ee.value?.text?(f(),v("button",{key:0,onClick:g[22]||(g[22]=w=>ie(ee.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...g[68]||(g[68]=[s("span",{class:"text-[15px] font-medium text-black"},"Copy",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"content_copy",-1)])])):O("",!0),ee.value?.isMe&&!ee.value?.isRecalled&&Date.now()-ee.value.timestamp<12e4?(f(),v("button",{key:1,onClick:ht,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...g[69]||(g[69]=[s("span",{class:"text-[15px] font-medium text-black"},"Recall",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete_sweep",-1)])])):O("",!0),s("button",{onClick:m,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...g[70]||(g[70]=[s("span",{class:"text-[15px] font-medium text-black"},"Reply",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"reply",-1)])]),s("button",{onClick:Z,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...g[71]||(g[71]=[s("span",{class:"text-[15px] font-medium text-black"},"Select",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"check_circle",-1)])]),s("button",{onClick:We,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors"},[...g[72]||(g[72]=[s("span",{class:"text-[15px] font-medium text-black"},"Delete",-1),s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete",-1)])])]),s("div",mv,[s("button",{onClick:g[23]||(g[23]=w=>{ne.value=!1,ee.value=null}),class:"w-full py-2 text-center text-[13px] font-bold uppercase tracking-widest text-zinc-400 hover:text-black transition-colors"}," Cancel ")])])])):O("",!0)])),pe.value?(f(),v("div",hv,[s("div",yv,[s("span",wv,C(J.value.size)+" SELECTED ",1),s("div",kv,[s("button",{onClick:Qe,class:"flex items-center gap-2 text-white hover:text-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed group",disabled:J.value.size===0},[...g[74]||(g[74]=[s("span",{class:"material-symbols-outlined text-[20px] group-hover:scale-110 transition-transform"},"delete",-1),s("span",{class:"font-bold text-xs uppercase tracking-widest hidden sm:block"},"Delete",-1)])],8,_v),g[76]||(g[76]=s("div",{class:"w-px h-4 bg-white/20"},null,-1)),s("button",{onClick:Se,class:"flex items-center justify-center text-white/50 hover:text-white transition-colors"},[...g[75]||(g[75]=[s("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):(f(),v("footer",zv,[W.value?(f(),v("div",$v,[s("div",Cv,[g[77]||(g[77]=s("span",{class:"material-symbols-outlined text-zinc-400 text-lg"},"reply",-1)),s("div",Sv,[s("span",Iv,"Replying to "+C(k(W.value)),1),s("span",Mv,C(W.value.text||(W.value.type==="image"?"[Image]":"[Content]")),1)])]),s("button",{onClick:X,class:"p-1 rounded-full hover:bg-zinc-200 text-zinc-400 hover:text-black transition-colors"},[...g[78]||(g[78]=[s("span",{class:"material-symbols-outlined text-base"},"close",-1)])])])):O("",!0),s("div",jv,[s("button",{onClick:Ce(F,["stop"]),class:K(["flex items-center justify-center size-10 rounded-full transition-all duration-200 hover:bg-zinc-50 text-zinc-400 hover:text-black",b.value?"bg-zinc-100 text-black":""])},[...g[79]||(g[79]=[s("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])],2),s("div",Tv,[te(s("textarea",{"onUpdate:modelValue":g[24]||(g[24]=w=>r.value=w),onKeydown:g[25]||(g[25]=Ms(Ce(w=>Ii(!1),["exact","prevent"]),["enter"])),onFocus:ce,class:"w-full border-none bg-zinc-100/60 rounded-[26px] px-5 py-3 text-[15px] placeholder-zinc-400 focus:ring-0 focus:bg-zinc-100 transition-colors resize-none h-[44px] leading-snug",placeholder:"Message..."},null,544),[[le,r.value]])]),s("button",{onClick:Zl},[...g[80]||(g[80]=[s("svg",{class:"w-6 h-6 text-black relative right-0.5 bottom-0.5",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[s("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})],-1)])])])]))]))}},Ev=qe(Av,[["__scopeId","data-v-c9cf87ae"]]),Pv={class:"h-full flex flex-col bg-white text-black font-sans"},Ov={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl"},Nv={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Rv={class:"flex-1"},Lv={class:"flex items-center gap-2"},Dv={class:"flex-1 overflow-y-auto w-full pb-[calc(2rem+env(safe-area-inset-bottom))]"},Bv={class:"px-5 pt-2 pb-6"},Uv={class:"flex justify-between items-start"},Fv={class:"flex-1 pr-4 min-w-0"},Vv={class:"text-[24px] font-bold leading-tight truncate"},Kv={class:"mt-4 text-[14px] leading-relaxed whitespace-pre-wrap"},Wv={class:"mt-3 text-[14px] text-zinc-400 font-normal"},Hv={class:"shrink-0"},Gv={key:0,class:"flex items-center justify-center h-full w-full material-symbols-outlined text-zinc-300 text-[32px]"},qv={class:"flex gap-2 mt-6"},Jv={class:"flex border-b border-zinc-100 sticky top-0 bg-white z-10"},Qv={key:0,class:"space-y-0"},Yv={class:"relative px-5 py-6 border-b border-gray-50"},Xv={class:"flex items-start gap-4 mb-3 relative z-10"},Zv={class:"flex flex-col flex-1 min-w-0"},eb={class:"flex items-center justify-between"},tb={class:"text-[14px] font-bold text-black truncate"},sb={class:"relative px-5 py-6 border-b border-gray-50"},nb={class:"flex items-start gap-4 mb-3 relative z-10"},ob={class:"flex flex-col flex-1 min-w-0"},ib={class:"flex items-center justify-between"},ab={class:"text-[14px] font-bold text-black truncate"},lb={key:1,class:"p-12 text-center text-zinc-400 text-sm font-light"},rb={key:0,class:"fixed top-0 right-0 h-full w-[300px] z-[100] bg-white shadow-2xl flex flex-col border-l border-gray-50"},cb={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 border-b border-gray-100"},db={class:"flex-1 overflow-y-auto"},ub={__name:"Profile",props:{contactId:{type:String,default:null}},emits:["back","navigate"],setup(e,{emit:t}){const n=e,o=t,i=E(!1),a=E("threads"),l=ve(()=>{if(n.contactId&&n.contactId!==S.activePersonaId){const d=S.contacts.find(y=>y.id===n.contactId);if(d)return d;const u=S.personas.find(y=>y.id===n.contactId);if(u)return u}return ai.value}),r=ve(()=>!(n.contactId&&n.contactId!==S.activePersonaId&&!S.personas.find(d=>d.id===n.contactId))),c=d=>{i.value=!1,o("navigate",d)},b=ve(()=>l.value.stats?.followers||"100");return(d,u)=>(f(),v("div",Pv,[s("header",Ov,[s("div",Nv,[s("div",Rv,[s("button",{onClick:u[0]||(u[0]=y=>d.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...u[12]||(u[12]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),s("div",Lv,[u[14]||(u[14]=nt('<button class="header-btn" data-v-a5b8c516><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-a5b8c516><rect x="2" y="2" width="20" height="20" rx="5" ry="5" data-v-a5b8c516></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" data-v-a5b8c516></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5" data-v-a5b8c516></line></svg></button><button class="header-btn" data-v-a5b8c516><span class="material-symbols-outlined text-[26px]" data-v-a5b8c516>notifications</span></button>',2)),s("button",{onClick:u[1]||(u[1]=y=>i.value=!0),class:"header-btn"},[...u[13]||(u[13]=[s("span",{class:"material-symbols-outlined text-[26px]"},"more_horiz",-1)])])])])]),s("main",Dv,[s("section",Bv,[s("div",Uv,[s("div",Fv,[s("h1",Vv,C(l.value.handle),1),s("div",Kv,C(l.value.bio||""),1),s("div",Wv,C(b.value)+" ",1)]),s("div",Hv,[s("div",{class:"size-[80px] rounded-full overflow-hidden border border-gray-100 bg-zinc-50 editorial-image",style:Ve({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[l.value.avatar?O("",!0):(f(),v("span",Gv,"person"))],4)])]),s("div",qv,[r.value?(f(),v(se,{key:1},[u[17]||(u[17]=s("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1)),u[18]||(u[18]=s("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64)):(f(),v(se,{key:0},[u[15]||(u[15]=s("button",{class:"flex-1 py-1.5 bg-black text-white text-[14px] font-bold rounded-[8px] border border-black transition-opacity hover:opacity-90"},"  ",-1)),u[16]||(u[16]=s("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64))])]),s("nav",Jv,[s("button",{onClick:u[2]||(u[2]=y=>a.value="threads"),class:K(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",a.value==="threads"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),s("button",{onClick:u[3]||(u[3]=y=>a.value="replies"),class:K(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",a.value==="replies"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),s("button",{onClick:u[4]||(u[4]=y=>a.value="media"),class:K(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",a.value==="media"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),s("button",{onClick:u[5]||(u[5]=y=>a.value="reposts"),class:K(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",a.value==="reposts"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2)]),a.value==="threads"?(f(),v("div",Qv,[s("article",Yv,[u[21]||(u[21]=s("div",{class:"absolute left-[36px] top-[60px] bottom-[-10px] w-[1px] bg-zinc-100"},null,-1)),s("div",Xv,[s("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:Ve({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover"})},null,4),s("div",Zv,[s("div",eb,[s("span",tb,C(l.value.handle),1),u[19]||(u[19]=s("div",{class:"flex items-center gap-3"},[s("span",{class:"text-[13px] text-zinc-400 font-light"},"4h"),s("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),u[20]||(u[20]=s("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Just deployed the new changes. Feeling nervous but excited. code-life ",-1))])]),u[22]||(u[22]=nt('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-a5b8c516><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-a5b8c516></path></svg><span class="text-[12px] font-medium" data-v-a5b8c516>42</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-a5b8c516></path></svg><span class="text-[12px] font-medium" data-v-a5b8c516>5</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><polyline points="17 1 21 5 17 9" data-v-a5b8c516></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-a5b8c516></path><polyline points="7 23 3 19 7 15" data-v-a5b8c516></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-a5b8c516></path></svg><span class="text-[12px] font-medium" data-v-a5b8c516>2</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-a5b8c516></path></svg></button></div>',1))]),s("article",sb,[s("div",nb,[s("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:Ve({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover"})},null,4),s("div",ob,[s("div",ib,[s("span",ab,C(l.value.handle),1),u[23]||(u[23]=s("div",{class:"flex items-center gap-3"},[s("span",{class:"text-[13px] text-zinc-400 font-light"},"1d"),s("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),u[24]||(u[24]=s("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Weather is getting colder. Time for coffee and hoodies. ",-1))])]),u[25]||(u[25]=nt('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-a5b8c516><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-a5b8c516></path></svg><span class="text-[12px] font-medium" data-v-a5b8c516>108</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-a5b8c516></path></svg><span class="text-[12px] font-medium" data-v-a5b8c516>14</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><polyline points="17 1 21 5 17 9" data-v-a5b8c516></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-a5b8c516></path><polyline points="7 23 3 19 7 15" data-v-a5b8c516></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-a5b8c516></path></svg><span class="text-[12px] font-medium" data-v-a5b8c516>8</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-a5b8c516><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-a5b8c516><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-a5b8c516></path></svg></button></div>',1))])])):(f(),v("div",lb," Nothing here yet... "))]),i.value?(f(),v("div",{key:0,onClick:u[6]||(u[6]=y=>i.value=!1),class:"fixed inset-0 z-[99]"})):O("",!0),Ke(Gs,{name:"slide"},{default:Is(()=>[i.value?(f(),v("div",rb,[s("div",cb,[u[27]||(u[27]=s("span",{class:"text-[13px] font-bold tracking-[0.2em] text-zinc-400 uppercase"},"Menu",-1)),s("button",{onClick:u[7]||(u[7]=y=>i.value=!1),class:"p-2 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...u[26]||(u[26]=[s("span",{class:"material-symbols-outlined text-[24px]"},"close",-1)])])]),s("div",db,[r.value?(f(),v(se,{key:0},[s("div",{onClick:u[8]||(u[8]=y=>c("persona-archive")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...u[28]||(u[28]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"tune"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Persona Archive"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),s("div",{onClick:u[9]||(u[9]=y=>c("sticker-library")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...u[29]||(u[29]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"sentiment_satisfied"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Stickers"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),s("div",{onClick:u[10]||(u[10]=y=>c("wallet")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...u[30]||(u[30]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"credit_card"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Wallet"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])],64)):O("",!0),s("div",{onClick:u[11]||(u[11]=y=>c("relationship-network")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...u[31]||(u[31]=[s("div",{class:"flex items-center gap-6"},[s("span",{class:"material-symbols-outlined text-[26px] font-light"},"hub"),s("div",{class:"flex flex-col"},[s("span",{class:"text-[17px] font-medium tracking-tight"},"Network"),s("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])])])):O("",!0)]),_:1})]))}},fb=qe(ub,[["__scopeId","data-v-a5b8c516"]]),pb={class:"h-full flex flex-col bg-background-light text-black"},vb={class:"sticky top-0 z-50 bg-white border-b border-gray-50"},bb={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},xb={class:"flex-1"},gb={__name:"Compose",emits:["close"],setup(e,{emit:t}){return(n,o)=>(f(),v("div",pb,[s("header",vb,[s("div",bb,[s("div",xb,[s("button",{onClick:o[0]||(o[0]=i=>n.$emit("close")),class:"text-[15px] font-medium tracking-tight text-neutral-400 hover:text-black transition-colors"}," Cancel ")]),o[1]||(o[1]=s("div",{class:"flex justify-center"},[s("div",{class:"text-xl font-serif font-black tracking-[0.25em] uppercase italic"},"Noir")],-1)),o[2]||(o[2]=s("div",{class:"flex-1 flex justify-end"},[s("button",{class:"bg-black text-white px-5 py-1.5 rounded-lg text-[13px] font-semibold tracking-wide hover:bg-zinc-800 transition-colors"}," Post ")],-1))])]),o[3]||(o[3]=nt('<main class="flex-1 px-6 pt-8 pb-32 w-full" data-v-5df22c3c><div class="flex gap-4" data-v-5df22c3c><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-5df22c3c><div class="size-5 border border-white/40 rounded-full" data-v-5df22c3c></div></div><div class="flex-1 flex flex-col gap-6" data-v-5df22c3c><div class="pt-2" data-v-5df22c3c><textarea autofocus class="w-full border-0 p-0 focus:ring-0 text-[17px] leading-relaxed resize-none bg-transparent min-h-[120px]" placeholder="Start a thread..." data-v-5df22c3c></textarea></div><div class="relative w-full aspect-[4/5] rounded-sm border border-dashed border-neutral-200 bg-neutral-50/50 flex flex-col items-center justify-center group cursor-pointer hover:bg-neutral-50 transition-colors" data-v-5df22c3c><div class="size-12 rounded-full border border-neutral-200 flex items-center justify-center mb-3" data-v-5df22c3c><span class="material-symbols-outlined text-neutral-300" data-v-5df22c3c>add_photo_alternate</span></div><span class="text-[11px] uppercase tracking-[0.15em] text-neutral-400 font-medium" data-v-5df22c3c>Add Editorial Media</span></div></div></div></main><div class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-md border-t border-gray-50 pb-safe" data-v-5df22c3c><div class="flex items-center justify-between px-8 h-16 w-full" data-v-5df22c3c><div class="flex items-center gap-8" data-v-5df22c3c><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>image</span><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>gif_box</span><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>mic</span><span class="material-symbols-outlined text-neutral-400" data-v-5df22c3c>tag</span></div><div class="flex items-center gap-2" data-v-5df22c3c><span class="text-[12px] text-neutral-300 font-medium tracking-tight" data-v-5df22c3c>Anyone can reply</span></div></div><div class="h-6" data-v-5df22c3c></div></div>',2))]))}},mb=qe(gb,[["__scopeId","data-v-5df22c3c"]]),hb={class:"h-full flex flex-col bg-background-light text-black"},yb={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-zinc-100"},wb={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},kb={__name:"PostDetail",props:["postId"],emits:["back"],setup(e,{emit:t}){return(n,o)=>(f(),v("div",hb,[s("header",yb,[s("div",wb,[s("button",{onClick:o[0]||(o[0]=i=>n.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...o[1]||(o[1]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),o[2]||(o[2]=s("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir",-1)),o[3]||(o[3]=s("div",{class:"w-10"},null,-1))])]),o[4]||(o[4]=nt('<main class="flex-1 overflow-y-auto pb-32 w-full" data-v-eae84c1c><article class="pt-6" data-v-eae84c1c><div class="px-6 mb-6" data-v-eae84c1c><div class="flex items-center gap-3" data-v-eae84c1c><div class="size-10 rounded-full bg-black flex items-center justify-center overflow-hidden border border-zinc-200" data-v-eae84c1c><div class="w-full h-[0.5px] bg-white/30 rotate-45" data-v-eae84c1c></div><div class="absolute w-full h-[0.5px] bg-white/30 -rotate-45" data-v-eae84c1c></div></div><div class="flex flex-col" data-v-eae84c1c><span class="text-sm font-semibold tracking-tight" data-v-eae84c1c>studio_noir</span><span class="text-[9px] text-zinc-400 uppercase tracking-widest" data-v-eae84c1c>Paris, FR</span></div></div></div><div class="px-6 mb-6" data-v-eae84c1c><p class="text-[17px] leading-relaxed font-light text-zinc-900" data-v-eae84c1c> The silence of structure. Exploring the intersection of Brutalist architecture and morning light. Every angle is a dialogue with the sky. </p></div><div class="mx-6 aspect-[4/5] bg-zinc-100 overflow-hidden mb-6" data-v-eae84c1c><img alt="Editorial Architecture" class="w-full h-full object-cover editorial-image" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E" data-v-eae84c1c></div><div class="px-6 pb-8" data-v-eae84c1c><div class="flex items-center gap-7 pb-8 border-b border-zinc-50" data-v-eae84c1c><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>1,240</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48L4.32 21l4.287-1.022c1.026.177 2.104.272 3.393.272z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>48</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>12</span></button><button class="flex items-center group ml-auto" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg></button></div></div></article><section class="px-6 space-y-8" data-v-eae84c1c><h3 class="text-[10px] uppercase tracking-[0.25em] text-zinc-400 font-semibold mb-8" data-v-eae84c1c>Responses</h3><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-zinc-50 flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="size-3 border border-black/20 rounded-sm rotate-45" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>elena_di_rossi</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>2h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The high contrast captures the starkness perfectly. Exceptional work.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-black flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="w-4 h-[1px] bg-white/20" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>arc_digest</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>4h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The brutalist aesthetic is making a serious comeback this season.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-white flex items-center justify-center border border-zinc-200" data-v-eae84c1c><div class="size-2 bg-black rounded-full" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>minimal_vibe</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>5h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>Pure sophistication.</p></div></div></section></main><footer class="fixed bottom-0 left-0 right-0 bottom-input-bar border-t border-zinc-100 safe-area-bottom bg-white/90 backdrop-blur-md" data-v-eae84c1c><div class="flex items-center gap-4 px-6 pt-4 pb-[calc(1rem+env(safe-area-inset-bottom))] w-full" data-v-eae84c1c><div class="size-8 shrink-0 rounded-full bg-zinc-50 border border-zinc-200 flex items-center justify-center overflow-hidden" data-v-eae84c1c><div class="w-3 h-3 border-t border-l border-zinc-400 rotate-45 translate-y-0.5" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><input class="w-full bg-transparent border-none focus:ring-0 text-[14px] py-2 placeholder:text-zinc-400 font-light tracking-tight" placeholder="Write a comment..." type="text" data-v-eae84c1c></div><button class="text-[11px] font-bold tracking-[0.15em] uppercase hover:opacity-40 transition-opacity" data-v-eae84c1c> Post </button></div></footer>',2))]))}},_b=qe(kb,[["__scopeId","data-v-eae84c1c"]]),zb={class:"h-full flex flex-col bg-white text-black font-sans"},$b={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Cb={class:"flex-1 overflow-y-auto px-6 py-4 w-full"},Sb={class:"grid gap-4"},Ib=["onClick"],Mb={key:0,class:"absolute top-4 right-4 text-black"},jb={class:"flex-1 min-w-0 pr-6"},Tb={class:"text-[16px] font-bold tracking-tight truncate"},Ab={class:"text-[12px] text-zinc-500 font-light truncate mt-0.5"},Eb=["onClick"],Pb={__name:"PersonaArchive",emits:["back","add","edit","select"],setup(e,{emit:t}){const n=t,o=a=>{So(a),n("select")},i=(a,l)=>{l.stopPropagation(),n("edit",a)};return(a,l)=>(f(),v("div",zb,[s("header",$b,[s("button",{onClick:l[0]||(l[0]=r=>a.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...l[3]||(l[3]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),l[5]||(l[5]=s("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Persona Archive",-1)),s("button",{onClick:l[1]||(l[1]=r=>a.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...l[4]||(l[4]=[s("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])]),s("main",Cb,[s("div",Sb,[(f(!0),v(se,null,be(ct(S).personas,r=>(f(),v("div",{key:r.id,class:K(["group relative flex items-center gap-5 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer hover:shadow-sm hover:translate-y-[-1px]",{"bg-zinc-50 border-black/5":ct(S).activePersonaId===r.id,"bg-white":ct(S).activePersonaId!==r.id}]),onClick:c=>o(r.id)},[ct(S).activePersonaId===r.id?(f(),v("div",Mb,[...l[6]||(l[6]=[s("span",{class:"material-symbols-outlined text-[18px]"},"check_circle",-1)])])):O("",!0),s("div",{class:"size-16 shrink-0 rounded-full overflow-hidden border border-gray-100 editorial-image",style:Ve({backgroundImage:`url(${r.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("div",jb,[s("h3",Tb,C(r.handle),1),s("p",Ab,C(r.name||r.handle),1)]),s("div",{onClick:l[2]||(l[2]=Ce(()=>{},["stop"])),class:"relative z-20"},[s("button",{onClick:c=>i(r.id,c),class:"p-3 text-zinc-400 hover:text-black hover:bg-gray-100/50 rounded-full transition-all"},[...l[7]||(l[7]=[s("span",{class:"material-symbols-outlined text-[20px]"},"edit",-1)])],8,Eb)])],10,Ib))),128))])])]))}},Ob=qe(Pb,[["__scopeId","data-v-09dd5376"]]),Nb={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},Rb={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Lb={class:"flex items-center gap-3"},Db={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},Bb={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},Ub={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},Fb={class:"bg-zinc-50 rounded-2xl p-5"},Vb={class:"bg-zinc-50 rounded-2xl p-5"},Kb={class:"bg-zinc-50 rounded-2xl p-5"},Wb={class:"bg-zinc-50 rounded-2xl p-5"},Hb={class:"bg-zinc-50 rounded-2xl p-5"},Gb={key:0,class:"pt-4"},qb={__name:"PersonaEdit",props:["personaId"],emits:["back","save"],setup(e,{emit:t}){const n=e,o=t,i=E({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),a=E(!1);Lt(()=>{if(n.personaId){const b=S.personas.find(d=>d.id===n.personaId);b&&(a.value=!0,i.value={...b})}else i.value.id="p_"+Date.now(),i.value.avatar="https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0"});const l=async()=>{const b={...i.value,stats:i.value.stats||{followers:"0",following:"0"}};a.value?await Wd(b):await Kd(b),o("save")},r=()=>{const b=prompt("Enter image URL for avatar:",i.value.avatar);b&&(i.value.avatar=b)},c=async()=>{i.value.id&&confirm("Delete this persona? This cannot be undone.")&&(await Hd(i.value.id),o("save"))};return(b,d)=>(f(),v("div",Nb,[s("header",Rb,[s("div",Lb,[s("button",{onClick:d[0]||(d[0]=u=>b.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...d[6]||(d[6]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),s("span",Db,C(a.value?"":""),1)]),s("button",{onClick:l,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),s("main",Bb,[s("div",Ub,[s("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200",style:Ve({backgroundImage:`url(${i.value.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),s("button",{onClick:r,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),s("div",Fb,[d[7]||(d[7]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),te(s("input",{"onUpdate:modelValue":d[1]||(d[1]=u=>i.value.handle=u),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"your_handle"},null,512),[[le,i.value.handle]])]),s("div",Vb,[d[8]||(d[8]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("input",{"onUpdate:modelValue":d[2]||(d[2]=u=>i.value.name=u),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Official Name"},null,512),[[le,i.value.name]]),d[9]||(d[9]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),s("div",Kb,[d[10]||(d[10]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("textarea",{"onUpdate:modelValue":d[3]||(d[3]=u=>i.value.persona=u),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Describe the inner persona..."},null,512),[[le,i.value.persona]]),d[11]||(d[11]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),s("div",Wb,[d[12]||(d[12]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("textarea",{"onUpdate:modelValue":d[4]||(d[4]=u=>i.value.bio=u),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Write a brief description..."},null,512),[[le,i.value.bio]])]),s("div",Hb,[d[13]||(d[13]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("input",{"onUpdate:modelValue":d[5]||(d[5]=u=>i.value.link=u),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[le,i.value.link]])]),a.value?(f(),v("div",Gb,[s("button",{onClick:c,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):O("",!0)])]))}},Jb=qe(qb,[["__scopeId","data-v-e15adcb5"]]),Qb={class:"h-full flex flex-col bg-white text-black font-sans"},Yb={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Xb={class:"flex-1 overflow-y-auto w-full"},Zb={class:"px-6 py-4"},ex={class:"relative"},tx={class:"px-6 pb-20"},sx=["onClick"],nx={key:0,class:"material-symbols-outlined text-zinc-300 text-[24px]"},ox={class:"flex flex-col min-w-0"},ix={class:"text-[14px] font-bold tracking-tight truncate"},ax={class:"text-[11px] text-zinc-500 font-light truncate mt-0.5"},lx={class:"flex items-center gap-2 ml-4"},rx=["onClick"],cx={__name:"Following",emits:["back","add","edit","navigate"],setup(e,{emit:t}){const n=t,o=E(""),i=ve(()=>{if(!o.value)return S.contacts;const l=o.value.toLowerCase();return S.contacts.filter(r=>r.handle.toLowerCase().includes(l)||r.name&&r.name.toLowerCase().includes(l)||r.bio&&r.bio.toLowerCase().includes(l))}),a=l=>{n("edit",l)};return(l,r)=>(f(),v("div",Qb,[s("header",Yb,[s("button",{onClick:r[0]||(r[0]=c=>l.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[3]||(r[3]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),r[5]||(r[5]=s("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Following",-1)),s("button",{onClick:r[1]||(r[1]=c=>l.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[4]||(r[4]=[s("span",{class:"material-symbols-outlined text-[24px]"},"person_add",-1)])])]),s("main",Xb,[s("div",Zb,[s("div",ex,[r[6]||(r[6]=s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-zinc-400 text-[20px]"},"search",-1)),te(s("input",{"onUpdate:modelValue":r[2]||(r[2]=c=>o.value=c),type:"text",class:"w-full bg-zinc-50 border border-gray-100 rounded-lg py-2.5 pl-10 pr-4 text-sm font-light placeholder-zinc-400 focus:outline-none focus:border-black/10 transition-colors",placeholder:"Search connections..."},null,512),[[le,o.value]])])]),s("div",tx,[(f(!0),v(se,null,be(i.value,c=>(f(),v("div",{key:c.id,class:"flex items-center justify-between py-5 border-b border-gray-50 group hover:bg-zinc-50/50 -mx-6 px-6 transition-colors"},[s("div",{onClick:b=>l.$emit("navigate","profile",{id:c.id}),class:"flex items-center gap-4 min-w-0 flex-1 cursor-pointer"},[s("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100 bg-zinc-100 flex items-center justify-center editorial-image",style:Ve({backgroundImage:c.avatar?`url(${c.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[c.avatar?O("",!0):(f(),v("span",nx,"person"))],4),s("div",ox,[s("h3",ix,C(c.handle),1),s("p",ax,C(c.bio||c.name||"No bio"),1)])],8,sx),s("div",lx,[s("button",{onClick:b=>a(c.id),class:"px-4 py-1.5 border border-zinc-200 text-black rounded-full text-[11px] font-medium hover:bg-zinc-50 transition-colors"}," Edit ",8,rx),r[7]||(r[7]=s("div",{class:"px-5 py-1.5 bg-black text-white rounded-full text-[11px] font-medium tracking-wide"}," Following ",-1))])]))),128))])])]))}},dx=qe(cx,[["__scopeId","data-v-c8641243"]]),ux={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},fx={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},px={class:"flex items-center gap-3"},vx={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},bx={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},xx={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},gx={key:0,class:"material-symbols-outlined text-zinc-400 text-[40px]"},mx={class:"bg-zinc-50 rounded-2xl p-5"},hx={class:"bg-zinc-50 rounded-2xl p-5"},yx={class:"bg-zinc-50 rounded-2xl p-5"},wx={class:"bg-zinc-50 rounded-2xl p-5"},kx={class:"bg-zinc-50 rounded-2xl p-5"},_x={key:0,class:"pt-4"},zx={__name:"ContactEdit",props:["contactId"],emits:["back","save"],setup(e,{emit:t}){const n=e,o=t,i=E({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),a=E(!1);Lt(()=>{if(n.contactId){const b=S.contacts.find(d=>d.id===n.contactId);b&&(a.value=!0,i.value={...b})}else i.value.id="c_"+Date.now(),i.value.avatar=""});const l=()=>{const b={...i.value};a.value?qd(b):Gd(b),o("save")},r=()=>{const b=prompt("Enter image URL for avatar:",i.value.avatar);b&&(i.value.avatar=b)},c=async()=>{i.value.id&&confirm("Remove this contact?")&&(await Jd(i.value.id),o("save"))};return(b,d)=>(f(),v("div",ux,[s("header",fx,[s("div",px,[s("button",{onClick:d[0]||(d[0]=u=>b.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...d[6]||(d[6]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),s("span",vx,C(a.value?"":""),1)]),s("button",{onClick:l,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),s("main",bx,[s("div",xx,[s("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200 flex items-center justify-center",style:Ve({backgroundImage:i.value.avatar?`url(${i.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[i.value.avatar?O("",!0):(f(),v("span",gx,"person"))],4),s("button",{onClick:r,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),s("div",mx,[d[7]||(d[7]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),te(s("input",{"onUpdate:modelValue":d[1]||(d[1]=u=>i.value.handle=u),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"handle"},null,512),[[le,i.value.handle]])]),s("div",hx,[d[8]||(d[8]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("input",{"onUpdate:modelValue":d[2]||(d[2]=u=>i.value.name=u),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Real Name"},null,512),[[le,i.value.name]]),d[9]||(d[9]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),s("div",yx,[d[10]||(d[10]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("textarea",{"onUpdate:modelValue":d[3]||(d[3]=u=>i.value.persona=u),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Internal notes about this contact..."},null,512),[[le,i.value.persona]]),d[11]||(d[11]=s("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),s("div",wx,[d[12]||(d[12]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("textarea",{"onUpdate:modelValue":d[4]||(d[4]=u=>i.value.bio=u),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Public bio..."},null,512),[[le,i.value.bio]])]),s("div",kx,[d[13]||(d[13]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),te(s("input",{"onUpdate:modelValue":d[5]||(d[5]=u=>i.value.link=u),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[le,i.value.link]])]),a.value?(f(),v("div",_x,[s("button",{onClick:c,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):O("",!0)])]))}},$x=qe(zx,[["__scopeId","data-v-3b23ee71"]]),Cx={class:"h-full flex flex-col bg-white text-black font-sans relative overflow-hidden"},Sx={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},Ix={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Mx={class:"w-full pb-32 flex-1 overflow-y-auto scrollbar-hide"},jx={class:"flex flex-col items-center pt-8 pb-8 border-b border-gray-50"},Tx={class:"relative w-[86px] h-[86px] rounded-full p-[2px] border border-gray-100 mb-4 bg-white shadow-sm"},Ax={class:"font-serif text-2xl font-medium tracking-tight mb-1"},Ex={class:"text-[10px] tracking-[0.2em] font-bold uppercase text-zinc-400"},Px={class:"text-[11px] font-medium text-zinc-600 group-hover:text-black"},Ox={class:"px-6 py-6 space-y-8"},Nx={class:"bg-transparent flex flex-col gap-0"},Rx={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Lx={class:"flex flex-col gap-1"},Dx={key:0,class:"text-[11px] text-zinc-400 font-light"},Bx={class:"flex items-center gap-3"},Ux={class:"relative inline-flex items-center cursor-pointer"},Fx={class:"group flex items-center justify-between py-3 border-b border-gray-50"},Vx={class:"flex flex-col gap-1"},Kx={key:0,class:"text-[11px] text-zinc-400 font-light"},Wx={class:"flex items-center gap-3"},Hx={class:"relative inline-flex items-center cursor-pointer"},Gx={class:"group flex items-center justify-between py-3 border-b border-gray-50"},qx={class:"flex items-center gap-2"},Jx={class:"flex items-center gap-2"},Qx={class:"text-[12px] text-zinc-400"},Yx={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Xx={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Zx={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},e1={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-6"},t1={id:"timezone-list"},s1=["value"],n1={class:"flex flex-col gap-2"},o1={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},i1={key:0,class:"flex flex-col gap-2"},a1={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},l1={key:1,class:"flex flex-col gap-4"},r1={class:"text-[10px] text-zinc-500 font-medium ml-1"},c1=["onUpdate:modelValue","placeholder"],d1={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},u1={key:1,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},f1={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},p1={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},v1={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-8"},b1={class:"flex flex-col gap-3"},x1={class:"flex gap-2"},g1={key:0,class:"material-symbols-outlined text-sm animate-spin"},m1={key:1,class:"material-symbols-outlined text-sm"},h1={key:0,class:"flex flex-col gap-1 mt-1"},y1=["onClick"],w1={key:0,class:"material-symbols-outlined text-xs"},k1={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},_1={class:"text-[12px] font-medium"},z1={class:"text-[10px] text-zinc-400 font-mono ml-auto"},$1={class:"flex flex-col gap-4"},C1={class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},S1={key:0,class:"flex flex-col gap-3"},I1={class:"flex gap-2"},M1={key:0,class:"material-symbols-outlined text-sm animate-spin"},j1={key:1,class:"material-symbols-outlined text-sm"},T1={key:0,class:"flex flex-col gap-1 mt-1"},A1=["onClick"],E1={key:0,class:"material-symbols-outlined text-xs"},P1={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},O1={class:"text-[12px] font-medium"},N1={class:"text-[10px] text-zinc-400 font-mono ml-auto"},R1={key:1,class:"flex flex-col gap-6"},L1={class:"text-[11px] font-bold block mb-2"},D1={class:"flex gap-2"},B1=["onUpdate:modelValue","onKeyup"],U1=["onClick"],F1={key:0,class:"material-symbols-outlined text-sm animate-spin"},V1={key:1,class:"material-symbols-outlined text-sm"},K1={key:0,class:"flex flex-col gap-1 mt-2 bg-white rounded-md border border-gray-100 p-1"},W1=["onClick"],H1={class:"truncate"},G1={key:0,class:"material-symbols-outlined text-[10px]"},q1={key:1,class:"flex items-center gap-2 mt-2 px-2"},J1={class:"text-[11px] font-bold text-zinc-600"},Q1={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end gap-3"},Y1={key:2,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},X1={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Z1={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},eg={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},tg={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},sg={class:"text-[13px] text-zinc-600"},ng={class:"font-bold text-black"},og={class:"flex flex-col gap-2"},ig=["onClick"],ag={class:"flex items-center gap-3"},lg={class:"font-medium text-[14px] text-zinc-900"},rg={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},cg=["checked","onChange"],dg={key:0,class:"border-t border-zinc-100 px-4 pb-4"},ug={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},fg={class:"flex flex-col"},pg={class:"text-[13px] font-medium text-zinc-700"},vg={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},bg=["checked","disabled","onChange"],xg={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},gg={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},mg={__name:"ChatSettings",props:["chatId"],emits:["back","navigate"],setup(e,{emit:t}){const n=e,o=ve(()=>Io(n.chatId)),i=E(!1),a=E(!1),l=E(""),r=E(""),c=E(15),b=E(!1),d=E(""),u=E(""),y=E(""),M=E([]),R=E([]),T=E({}),L=E({}),z=E(null),$=E(null),I=E({}),j=Dn(),A=E(!1),q=E([]),de=E(new Set),pe=ve(()=>{const x=o.value?.localSettings?.myActivePersonaId;if(x){const p=S.personas.find(h=>h.id===x);return p?p.name:"My"}return ai.value?ai.value.name:"My"}),J=ve(()=>{if(!o.value)return"https://via.placeholder.com/150";const x=o.value.localSettings||{},p=o.value.type==="group"||o.value.isGroup?x.groupAvatarOverride:x.theirAvatarOverride;if(p)return p;if(!o.value.isGroup&&o.value.type!=="group"){const h=S.contacts.find(N=>N.id===o.value.id);if(h?.avatar)return h.avatar}return o.value.avatar||"https://via.placeholder.com/150"}),ne=ve(()=>{if(!o.value)return"Their";const x=o.value.localSettings||{};if(o.value.isGroup||o.value.type==="group")return x.groupNameOverride||o.value.title||"Group";const p=S.contacts.find(h=>h.id===o.value.id);return x.theirNicknameOverride||p?.handle||p?.name||o.value.handle||o.value.name||"Their"}),ee=E([]);try{ee.value=Intl.supportedValuesOf("timeZone")}catch{ee.value=["UTC","Asia/Shanghai","Asia/Tokyo","Europe/London","Europe/Paris","America/New_York","America/Los_Angeles"]}const W=E({}),D=ve(()=>o.value?.type==="group"||o.value?.isGroup===!0),k=E(!1),m=ve(()=>D.value?(o.value.members||[]).map(x=>S.contacts.find(p=>p.id===x)||{id:x,name:"Unknown"}):[]),P=()=>{if(o.value){const x=o.value.localSettings||{};i.value=x.timeAwareness!==!1,a.value=x.envSensing===!0,l.value=x.myLocationOverride||"",r.value=x.theirLocationOverride||"",c.value=x.shortTermMemoryLimit||15,z.value=x.myWeatherConfig||null,$.value=x.theirWeatherConfig||null,I.value=x.groupWeatherConfigs||{};const p=x.memberOverrides||{};D.value&&m.value.forEach(h=>{W.value[h.id]=p[h.id]?.location||""}),q.value=[...x.mountedWorldbooks||[]]}},V=async()=>{if(o.value){const x={};for(const[p,h]of Object.entries(W.value))h&&(x[p]={location:h});await rn({id:n.chatId,localSettings:{...o.value.localSettings||{},timeAwareness:i.value,envSensing:a.value,myLocationOverride:l.value,theirLocationOverride:r.value,shortTermMemoryLimit:c.value,memberOverrides:x,myWeatherConfig:z.value,theirWeatherConfig:$.value,groupWeatherConfigs:I.value}})}},Z=async x=>{y.value=x;let p="";if(x==="me"?p=d.value:x==="their"?p=u.value:p=T.value[x]||"",!p){y.value="";return}const h=await Lf(p);x==="me"?M.value=h:x==="their"?R.value=h:L.value={...L.value,[x]:h},y.value=""},Se=(x,p)=>{const h={city:p.name,lat:p.latitude,long:p.longitude};if(x==="me")z.value=h,M.value=[],d.value="";else if(x==="their")$.value=h,R.value=[],u.value="";else{I.value={...I.value,[x]:h};const N={...L.value};delete N[x],L.value=N,T.value[x]=""}},Be=x=>I.value[x],ht=ve(()=>j.state.categories),ie=ve(()=>j.state.entries),We=x=>ie.value.filter(p=>p.categoryId===x&&p.scope==="local"),Qe=x=>{const p=q.value.indexOf(x);p===-1?q.value.push(x):q.value.splice(p,1),Et()},Ie=x=>q.value.includes(x),Me=x=>{de.value.has(x)?de.value.delete(x):de.value.add(x),de.value=new Set(de.value)},it=x=>de.value.has(x),ft=x=>{Qe(x)},Ht=()=>{A.value=!0},Et=async()=>{if(o.value){const x=o.value.localSettings||{};await rn({id:n.chatId,localSettings:{...x,mountedWorldbooks:q.value}})}},Yt=ve(()=>ie.value.filter(x=>x.scope==="global").length);return Lt(()=>{P()}),(x,p)=>(f(),v("div",Cx,[s("header",Sx,[s("div",Ix,[s("button",{onClick:p[0]||(p[0]=h=>x.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors active:scale-95"},[...p[24]||(p[24]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),p[25]||(p[25]=s("h1",{class:"font-serif text-[16px] font-semibold tracking-wide uppercase text-center flex-1 pr-8 opacity-80"},"",-1)),p[26]||(p[26]=s("div",{class:"w-8 hidden"},null,-1))])]),s("main",Mx,[s("section",jx,[s("div",Tx,[s("div",{class:"w-full h-full rounded-full bg-neutral-100 bg-cover bg-center",style:Ve({backgroundImage:`url(${J.value})`})},null,4)]),s("h2",Ax,C(ne.value),1),s("span",Ex,C(D.value?"":""),1),s("button",{onClick:p[1]||(p[1]=h=>x.$emit("navigate","chat-settings-identity",{id:n.chatId})),class:"mt-6 flex items-center gap-2 pl-3 pr-4 py-1.5 rounded-full bg-zinc-50 border border-zinc-100 hover:bg-zinc-100 transition-colors group"},[s("div",{class:"w-5 h-5 rounded-full bg-cover bg-center",style:Ve({backgroundImage:`url(${ct(S).personas.find(h=>h.name===pe.value)?.avatar})`})},null,4),s("span",Px,": "+C(pe.value),1),p[27]||(p[27]=s("span",{class:"material-symbols-outlined text-[14px] text-zinc-300 group-hover:text-black"},"arrow_forward_ios",-1))])]),s("section",Ox,[s("div",null,[p[36]||(p[36]=s("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-300 mb-4 ml-1"},"",-1)),s("div",Nx,[s("div",Rx,[s("div",Lx,[p[28]||(p[28]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),i.value?(f(),v("span",Dx,C(l.value||"")+"  "+C(r.value||""),1)):O("",!0)]),s("div",Bx,[i.value?(f(),v("button",{key:0,onClick:p[2]||(p[2]=h=>k.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...p[29]||(p[29]=[s("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):O("",!0),s("label",Ux,[te(s("input",{type:"checkbox","onUpdate:modelValue":p[3]||(p[3]=h=>i.value=h),class:"sr-only noir-toggle",onChange:V},null,544),[[En,i.value]]),p[30]||(p[30]=s("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),s("div",Fx,[s("div",Vx,[p[31]||(p[31]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),a.value?(f(),v("span",Kx,C(d.value||"")+"  "+C(u.value||""),1)):O("",!0)]),s("div",Wx,[a.value?(f(),v("button",{key:0,onClick:p[4]||(p[4]=h=>b.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...p[32]||(p[32]=[s("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):O("",!0),s("label",Hx,[te(s("input",{type:"checkbox","onUpdate:modelValue":p[5]||(p[5]=h=>a.value=h),class:"sr-only noir-toggle",onChange:V},null,544),[[En,a.value]]),p[33]||(p[33]=s("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),s("div",Gx,[p[35]||(p[35]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),s("div",qx,[te(s("input",{type:"number","onUpdate:modelValue":p[6]||(p[6]=h=>c.value=h),onChange:V,class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[le,c.value]]),p[34]||(p[34]=s("span",{class:"text-[11px] text-zinc-400 uppercase tracking-widest"},"",-1))])])])]),s("div",null,[p[39]||(p[39]=s("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-300 mb-4 ml-1"},"",-1)),s("button",{onClick:Ht,class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors"},[p[38]||(p[38]=s("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),s("div",Jx,[s("span",Qx,C(q.value.length)+" ",1),p[37]||(p[37]=s("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),p[40]||(p[40]=s("button",{class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[s("span",{class:"text-[15px] font-medium text-zinc-500 group-hover:text-zinc-900 transition-colors"},""),s("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-zinc-900 transition-colors"},"delete_outline")],-1))])]),p[41]||(p[41]=s("div",{class:"flex flex-col items-center opacity-10 py-12 select-none pointer-events-none"},[s("span",{class:"font-serif italic text-2xl"},"NOIR")],-1))]),(f(),ye(mt,{to:"body"},[k.value?(f(),v("div",Yx,[s("div",Xx,[s("div",Zx,[p[42]||(p[42]=s("span",{class:"font-serif italic text-lg"},"",-1)),s("button",{onClick:p[7]||(p[7]=h=>k.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),s("div",e1,[s("datalist",t1,[(f(!0),v(se,null,be(ee.value,h=>(f(),v("option",{key:h,value:h},C(h),9,s1))),128))]),s("div",n1,[s("label",o1,C(pe.value)+" () ",1),te(s("input",{type:"text",list:"timezone-list","onUpdate:modelValue":p[8]||(p[8]=h=>l.value=h),onChange:V,placeholder:" Asia/Shanghai",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[le,l.value]])]),D.value?(f(),v("div",l1,[p[43]||(p[43]=s("div",{class:"w-full h-px bg-black/[0.03]"},null,-1)),p[44]||(p[44]=s("span",{class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},"",-1)),(f(!0),v(se,null,be(m.value,h=>(f(),v("div",{key:h.id,class:"flex flex-col gap-2"},[s("label",r1,C(h.name),1),te(s("input",{type:"text",list:"timezone-list","onUpdate:modelValue":N=>W.value[h.id]=N,onChange:V,placeholder:`${h.name} `,class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,40,c1),[[le,W.value[h.id]]])]))),128))])):(f(),v("div",i1,[s("label",a1,C(ne.value)+" () ",1),te(s("input",{type:"text",list:"timezone-list","onUpdate:modelValue":p[9]||(p[9]=h=>r.value=h),onChange:V,placeholder:" Europe/Paris",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[le,r.value]])]))]),s("div",d1,[s("button",{onClick:p[10]||(p[10]=h=>k.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):O("",!0),b.value?(f(),v("div",u1,[s("div",f1,[s("div",p1,[p[45]||(p[45]=s("div",{class:"flex flex-col"},[s("span",{class:"font-serif italic text-lg"},""),s("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Environment Simulation")],-1)),s("button",{onClick:p[11]||(p[11]=h=>b.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),s("div",v1,[p[50]||(p[50]=s("div",{class:"bg-gray-50 p-4 rounded-lg flex gap-3"},[s("span",{class:"material-symbols-outlined text-zinc-400 text-sm mt-0.5"},"info"),s("p",{class:"text-[11px] text-zinc-500 leading-relaxed"}," Noir  Prompt  ")],-1)),s("div",b1,[p[47]||(p[47]=s("span",{class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},"",-1)),s("div",x1,[te(s("input",{"onUpdate:modelValue":p[12]||(p[12]=h=>d.value=h),onKeyup:p[13]||(p[13]=Ms(h=>Z("me"),["enter"])),placeholder:" ( )",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[le,d.value]]),s("button",{onClick:p[14]||(p[14]=h=>Z("me")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[y.value==="me"?(f(),v("span",g1,"sync")):(f(),v("span",m1,"search"))])]),M.value.length>0?(f(),v("div",h1,[(f(!0),v(se,null,be(M.value,h=>(f(),v("button",{key:h.id,onClick:N=>Se("me",h),class:K(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",z.value?.city===h.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[s("span",null,C(h.name)+", "+C(h.admin1||h.country),1),z.value?.city===h.name?(f(),v("span",w1,"check")):O("",!0)],10,y1))),128))])):z.value?.city?(f(),v("div",k1,[p[46]||(p[46]=s("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),s("span",_1,C(z.value.city),1),s("span",z1,C(z.value.lat.toFixed(2))+", "+C(z.value.long.toFixed(2)),1)])):O("",!0)]),p[51]||(p[51]=s("div",{class:"w-full h-px bg-gray-100"},null,-1)),s("div",$1,[s("span",C1,C(D.value?"":""),1),D.value?(f(),v("div",R1,[(f(!0),v(se,null,be(m.value,h=>(f(),v("div",{key:h.id,class:"p-3 border border-gray-100 rounded-lg bg-gray-50/50"},[s("span",L1,C(h.name),1),s("div",D1,[te(s("input",{"onUpdate:modelValue":N=>T.value[h.id]=N,onKeyup:Ms(N=>Z(h.id),["enter"]),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-1.5 text-[12px] focus:border-black focus:outline-none transition-colors"},null,40,B1),[[le,T.value[h.id]]]),s("button",{onClick:N=>Z(h.id),class:"bg-white border border-gray-200 text-black rounded-lg px-3 flex items-center justify-center hover:border-black transition-colors"},[y.value===h.id?(f(),v("span",F1,"sync")):(f(),v("span",V1,"search"))],8,U1)]),L.value[h.id]&&L.value[h.id].length>0?(f(),v("div",K1,[(f(!0),v(se,null,be(L.value[h.id],N=>(f(),v("button",{key:N.id,onClick:B=>Se(h.id,N),class:K(["text-left px-2 py-1.5 rounded hover:bg-gray-50 text-[11px] flex items-center justify-between group transition-colors",Be(h.id)?.city===N.name?"font-bold text-black":"text-zinc-500"])},[s("span",H1,C(N.name)+", "+C(N.country),1),Be(h.id)?.city===N.name?(f(),v("span",G1,"check")):O("",!0)],10,W1))),128))])):Be(h.id)?.city?(f(),v("div",q1,[p[49]||(p[49]=s("span",{class:"material-symbols-outlined text-[10px] text-green-600"},"check_circle",-1)),s("span",J1,C(Be(h.id).city),1)])):O("",!0)]))),128))])):(f(),v("div",S1,[s("div",I1,[te(s("input",{"onUpdate:modelValue":p[15]||(p[15]=h=>u.value=h),onKeyup:p[16]||(p[16]=Ms(h=>Z("their"),["enter"])),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[le,u.value]]),s("button",{onClick:p[17]||(p[17]=h=>Z("their")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[y.value==="their"?(f(),v("span",M1,"sync")):(f(),v("span",j1,"search"))])]),R.value.length>0?(f(),v("div",T1,[(f(!0),v(se,null,be(R.value,h=>(f(),v("button",{key:h.id,onClick:N=>Se("their",h),class:K(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",$.value?.city===h.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[s("span",null,C(h.name)+", "+C(h.admin1||h.country),1),$.value?.city===h.name?(f(),v("span",E1,"check")):O("",!0)],10,A1))),128))])):$.value?.city?(f(),v("div",P1,[p[48]||(p[48]=s("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),s("span",O1,C($.value.city),1),s("span",N1,C($.value.lat.toFixed(2))+", "+C($.value.long.toFixed(2)),1)])):O("",!0)]))])]),s("div",Q1,[s("button",{onClick:p[18]||(p[18]=h=>b.value=!1),class:"px-6 py-2 border border-gray-200 bg-white text-black text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-gray-50 transition-colors"},"  "),s("button",{onClick:p[19]||(p[19]=h=>{V(),b.value=!1}),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):O("",!0),A.value?(f(),v("div",Y1,[s("div",X1,[s("div",Z1,[p[52]||(p[52]=s("div",{class:"flex flex-col"},[s("span",{class:"font-serif italic text-lg"},""),s("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"WorldBook Mount")],-1)),s("button",{onClick:p[20]||(p[20]=h=>A.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),s("div",eg,[s("div",tg,[p[54]||(p[54]=s("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),s("p",sg,[s("span",ng,C(Yt.value),1),p[53]||(p[53]=hs("  ",-1))])]),s("div",og,[(f(!0),v(se,null,be(ht.value,h=>(f(),v("div",{key:h.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[s("button",{onClick:N=>Me(h.id),class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[s("div",ag,[s("span",{class:K(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",it(h.id)?"rotate-90":""])},"chevron_right",2),s("span",lg,C(h.name),1),s("span",rg,C(We(h.id).length)+" local",1)]),s("label",{class:"relative inline-flex items-center cursor-pointer",onClick:p[21]||(p[21]=Ce(()=>{},["stop"]))},[s("input",{type:"checkbox",class:"sr-only",checked:Ie(h.id),onChange:N=>ft(h.id)},null,40,cg),s("div",{class:K(["w-[36px] h-[20px] rounded-full transition-colors duration-200",Ie(h.id)?"bg-black":"bg-zinc-200"])},[s("div",{class:K(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",Ie(h.id)?"translate-x-4":""])},null,2)],2)])],8,ig),it(h.id)?(f(),v("div",dg,[We(h.id).length===0?(f(),v("div",ug," No local entries ")):O("",!0),(f(!0),v(se,null,be(We(h.id),N=>(f(),v("div",{key:N.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[s("div",fg,[s("span",pg,C(N.title),1),s("span",vg,C(N.isConstant?"Constant":"Trigger")+"  "+C(N.position),1)]),s("label",{class:"relative inline-flex items-center cursor-pointer",onClick:p[22]||(p[22]=Ce(()=>{},["stop"]))},[s("input",{type:"checkbox",class:"sr-only",checked:Ie(h.id)||Ie(N.id),disabled:Ie(h.id),onChange:B=>!Ie(h.id)&&Qe(N.id)},null,40,bg),s("div",{class:K(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",Ie(h.id)||Ie(N.id)?"bg-black border-black":"bg-transparent"])},[Ie(h.id)||Ie(N.id)?(f(),v("span",xg,"check")):O("",!0)],2)])]))),128))])):O("",!0)]))),128))])]),s("div",gg,[s("button",{onClick:p[23]||(p[23]=h=>A.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):O("",!0)]))]))}},hg=qe(mg,[["__scopeId","data-v-80ac5c9a"]]),yg={class:"h-full flex flex-col bg-zinc-50 text-black font-sans"},wg={class:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50"},kg={class:"flex items-center justify-between px-4 pt-[calc(12px_+_env(safe-area-inset-top))] pb-3 max-w-lg mx-auto w-full"},_g={key:0,class:"w-full max-w-lg mx-auto px-4 pb-32 flex-1 overflow-y-auto scrollbar-hide pt-6"},zg={class:"space-y-6"},$g={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Cg={class:"px-5 py-3 border-b border-gray-50 flex items-center justify-between bg-white"},Sg={class:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 border border-zinc-100"},Ig={class:"text-[10px] font-medium text-zinc-600"},Mg={class:"p-5 flex flex-col gap-6"},jg={class:"relative"},Tg=["value"],Ag={class:"flex items-start gap-4"},Eg={class:"relative group shrink-0"},Pg={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},Og=["src"],Ng={class:"flex-1 space-y-3 pt-1"},Rg={class:"relative"},Lg=["placeholder"],Dg={class:"relative"},Bg={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Ug={class:"px-5 py-3 border-b border-gray-50 bg-white"},Fg={class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},Vg={class:"p-5 flex items-start gap-4"},Kg={class:"relative group shrink-0"},Wg={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},Hg=["src"],Gg={class:"flex-1 space-y-3 pt-1"},qg={class:"relative"},Jg=["placeholder"],Qg={class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},Yg={class:"relative"},Xg={key:0,class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},Zg={class:"divide-y divide-gray-50"},em={class:"relative size-10 rounded-full bg-zinc-100 shrink-0 border border-gray-100 overflow-hidden cursor-pointer group-hover:border-zinc-300 transition-colors"},tm=["src"],sm=["onChange"],nm={class:"flex-1 flex flex-col gap-2"},om=["onUpdate:modelValue","placeholder"],im=["onUpdate:modelValue"],am={class:"shrink-0 flex flex-col items-end"},lm={class:"text-[9px] font-mono text-zinc-300 bg-zinc-100 px-1.5 py-0.5 rounded"},rm={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},cm={class:"divide-y divide-gray-50"},dm={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},um={class:"relative inline-flex items-center cursor-pointer"},fm={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},pm={class:"relative inline-flex items-center cursor-pointer"},vm={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},bm={class:"flex bg-zinc-100 rounded-lg p-1 gap-1"},xm={__name:"ChatSettingsIdentity",props:["chatId"],emits:["back"],setup(e,{emit:t}){const n=e,o=E(null),i=E(""),a=ve(()=>S.personas),l=E({showSelfAvatar:!0,showOtherAvatar:!0,avatarShape:"circle",myActivePersonaId:"",myNicknameOverride:"",myAvatarOverride:"",theirNicknameOverride:"",theirAvatarOverride:"",groupNameOverride:"",groupAvatarOverride:""});Lt(async()=>{const $=Io(n.chatId);if($){o.value=$;const I=S.contacts.find(j=>j.id===$.id);i.value=I?.avatar||$.avatar||"",$.localSettings?($.localSettings.showAvatars===!1&&(l.value.showSelfAvatar=!1,l.value.showOtherAvatar=!1),l.value={...l.value,...$.localSettings}):l.value.myActivePersonaId=S.activePersonaId}});const r=($,I)=>{const j=$.target.files[0];if(!j)return;const A=new FileReader;A.onload=q=>{const de=q.target.result;I==="myAvatarOverride"?l.value.myAvatarOverride=de:I==="remote"&&(o.value.type==="group"||o.value.isGroup?l.value.groupAvatarOverride=de:l.value.theirAvatarOverride=de)},A.readAsDataURL(j)};let c=null;const b=async()=>{if(!o.value)return;let $;try{const j=we(o.value);$=JSON.parse(JSON.stringify(j))}catch(j){console.error("Failed to clone conversation for save",j);return}const I={...$,localSettings:{...we(l.value)}};(o.value.type==="group"||o.value.isGroup)&&(l.value.groupNameOverride&&(I.title=l.value.groupNameOverride),l.value.groupAvatarOverride&&(I.avatar=l.value.groupAvatarOverride)),await rn(I),Object.assign(o.value,I)};Hs(l,()=>{c&&clearTimeout(c),c=setTimeout(b,500)},{deep:!0});const d=ve(()=>o.value?S.contacts.find($=>$.id===o.value.id):null),u=ve(()=>{if(!o.value)return"https://via.placeholder.com/150";const $=o.value.type==="group"||o.value.isGroup?l.value.groupAvatarOverride:l.value.theirAvatarOverride;return $||d.value?.avatar||o.value.avatar||"https://via.placeholder.com/150"}),y=ve(()=>{const $=l.value.myActivePersonaId||S.activePersonaId;return S.personas.find(I=>I.id===$)||S.personas[0]||{}}),M=ve({get(){return o.value?o.value.type==="group"||o.value.isGroup?l.value.groupNameOverride:l.value.theirNicknameOverride:""},set($){o.value&&(o.value.type==="group"||o.value.isGroup?l.value.groupNameOverride=$:l.value.theirNicknameOverride=$)}}),R=ve(()=>o.value?.members?o.value.members.map($=>S.contacts.find(I=>I.id===$)).filter(Boolean):[]),T=$=>(l.value.memberOverrides||(l.value.memberOverrides={}),l.value.memberOverrides[$]||(l.value.memberOverrides[$]={nickname:"",avatar:""}),l.value.memberOverrides[$]),L=($,I)=>{const j=$.target.files[0];if(!j)return;const A=new FileReader;A.onload=q=>{const de=q.target.result,pe=T(I);pe.avatar=de},A.readAsDataURL(j)},z=$=>$==="square"?"rounded-none":"rounded-full";return($,I)=>(f(),v("div",yg,[s("header",wg,[s("div",kg,[s("button",{onClick:I[0]||(I[0]=j=>$.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 text-zinc-600 hover:text-black hover:bg-zinc-100 rounded-full transition-all active:scale-95"},[...I[13]||(I[13]=[s("span",{class:"material-symbols-outlined text-[20px]"},"arrow_back",-1)])]),I[14]||(I[14]=s("h1",{class:"font-serif text-[15px] font-semibold tracking-wider uppercase text-center text-zinc-800"},"",-1)),I[15]||(I[15]=s("div",{class:"w-8"},null,-1))])]),o.value?(f(),v("main",_g,[s("div",zg,[s("section",$g,[s("div",Cg,[I[17]||(I[17]=s("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"",-1)),s("div",Sg,[I[16]||(I[16]=s("div",{class:"size-1.5 rounded-full bg-emerald-500"},null,-1)),s("span",Ig,C(ct(S).personas.find(j=>j.id===l.value.myActivePersonaId)?.name||""),1)])]),s("div",Mg,[s("div",jg,[te(s("select",{"onUpdate:modelValue":I[1]||(I[1]=j=>l.value.myActivePersonaId=j),class:"w-full appearance-none bg-zinc-50 border border-gray-200 rounded-xl px-4 py-3 text-[13px] font-medium text-zinc-700 outline-none focus:border-zinc-400 focus:bg-white transition-all"},[(f(!0),v(se,null,be(a.value,j=>(f(),v("option",{key:j.id,value:j.id},C(j.name)+" ("+C(j.handle)+") ",9,Tg))),128))],512),[[Ln,l.value.myActivePersonaId]]),I[18]||(I[18]=s("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-[18px] pointer-events-none"},"unfold_more",-1))]),s("div",Ag,[s("div",Eg,[s("div",Pg,[s("img",{src:l.value.myAvatarOverride||y.value?.avatar,class:K(["w-full h-full object-cover",z(l.value.avatarShape)])},null,10,Og),I[19]||(I[19]=s("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[s("span",{class:"material-symbols-outlined text-white text-[20px]"},"photo_camera")],-1))]),s("input",{type:"file",accept:"image/*",onChange:I[2]||(I[2]=j=>r(j,"myAvatarOverride")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),s("div",Ng,[s("div",Rg,[te(s("input",{type:"text","onUpdate:modelValue":I[3]||(I[3]=j=>l.value.myNicknameOverride=j),placeholder:y.value?.handle||y.value?.name,class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,Lg),[[le,l.value.myNicknameOverride]]),I[20]||(I[20]=s("label",{class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},"Display Name",-1))]),s("div",Dg,[te(s("input",{type:"text","onUpdate:modelValue":I[4]||(I[4]=j=>l.value.myAvatarOverride=j),placeholder:"Paste Image URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512),[[le,l.value.myAvatarOverride]])])])])])]),s("section",Bg,[s("div",Ug,[s("span",Fg,C(o.value.type==="group"||o.value.isGroup?"":""),1)]),s("div",Vg,[s("div",Kg,[s("div",Wg,[s("img",{src:u.value,class:K(["w-full h-full object-cover",z(l.value.avatarShape)])},null,10,Hg),I[21]||(I[21]=s("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[s("span",{class:"material-symbols-outlined text-white text-[20px]"},"edit")],-1))]),s("input",{type:"file",accept:"image/*",onChange:I[5]||(I[5]=j=>r(j,"remote")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),s("div",Gg,[s("div",qg,[te(s("input",{type:"text","onUpdate:modelValue":I[6]||(I[6]=j=>M.value=j),placeholder:d.value?.handle||d.value?.name||o.value.handle||o.value.title||o.value.name||"",class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,Jg),[[le,M.value]]),s("label",Qg,C(o.value.type==="group"||o.value.isGroup?"Group Name":"Alias (Local)"),1)]),s("div",Yg,[o.value.type==="group"||o.value.isGroup?te((f(),v("input",{key:0,type:"text","onUpdate:modelValue":I[7]||(I[7]=j=>l.value.groupAvatarOverride=j),placeholder:"Group Icon URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[le,l.value.groupAvatarOverride]]):te((f(),v("input",{key:1,type:"text","onUpdate:modelValue":I[8]||(I[8]=j=>l.value.theirAvatarOverride=j),placeholder:"Avatar URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[le,l.value.theirAvatarOverride]])])])])]),(o.value.type==="group"||o.value.isGroup)&&o.value.members?.length?(f(),v("section",Xg,[I[23]||(I[23]=s("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[s("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),s("div",Zg,[(f(!0),v(se,null,be(R.value,j=>(f(),v("div",{key:j.id,class:"p-4 flex items-start gap-3 hover:bg-zinc-50/50 transition-colors group"},[s("div",em,[s("img",{src:l.value.memberOverrides?.[j.id]?.avatar||j.avatar,class:K(["w-full h-full object-cover",z(l.value.avatarShape)])},null,10,tm),I[22]||(I[22]=s("div",{class:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[s("span",{class:"material-symbols-outlined text-white text-[14px]"},"edit")],-1)),s("input",{type:"file",accept:"image/*",onChange:A=>L(A,j.id),class:"absolute inset-0 opacity-0 cursor-pointer z-10",title:""},null,40,sm)]),s("div",nm,[te(s("input",{type:"text","onUpdate:modelValue":A=>T(j.id).nickname=A,placeholder:j.handle||j.name,class:"w-full bg-transparent text-[14px] font-medium text-zinc-800 placeholder:text-zinc-300 focus:outline-none focus:border-b focus:border-zinc-300 transition-colors py-0.5"},null,8,om),[[le,T(j.id).nickname]]),te(s("input",{type:"text","onUpdate:modelValue":A=>T(j.id).avatar=A,placeholder:"Avatar URL...",class:"w-full bg-zinc-50/50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded px-2 py-1 text-[10px] text-zinc-500 max-w-[90%] outline-none transition-all placeholder:text-zinc-300"},null,8,im),[[le,T(j.id).avatar]])]),s("div",am,[s("span",lm,C(j.handle),1)])]))),128))])])):O("",!0),s("section",rm,[I[31]||(I[31]=s("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[s("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),s("div",cm,[s("div",dm,[I[25]||(I[25]=s("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),s("label",um,[te(s("input",{"onUpdate:modelValue":I[9]||(I[9]=j=>l.value.showSelfAvatar=j),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[En,l.value.showSelfAvatar]]),I[24]||(I[24]=s("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),s("div",fm,[I[27]||(I[27]=s("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),s("label",pm,[te(s("input",{"onUpdate:modelValue":I[10]||(I[10]=j=>l.value.showOtherAvatar=j),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[En,l.value.showOtherAvatar]]),I[26]||(I[26]=s("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[s("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),s("div",vm,[I[30]||(I[30]=s("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),s("div",bm,[s("button",{onClick:I[11]||(I[11]=j=>l.value.avatarShape="circle"),class:K(["size-7 rounded-md flex items-center justify-center transition-all",l.value.avatarShape==="circle"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...I[28]||(I[28]=[s("div",{class:"w-3 h-3 rounded-full border-[1.5px] border-current"},null,-1)])],2),s("button",{onClick:I[12]||(I[12]=j=>l.value.avatarShape="square"),class:K(["size-7 rounded-md flex items-center justify-center transition-all",l.value.avatarShape==="square"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...I[29]||(I[29]=[s("div",{class:"w-3 h-3 border-[1.5px] border-current rounded-[1px]"},null,-1)])],2)])])])])])])):O("",!0)]))}},gm=qe(xm,[["__scopeId","data-v-9a42c415"]]),mm={class:"h-full flex flex-col bg-white text-black font-sans"},hm={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},ym={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},wm={class:"w-full px-8 pb-32 flex-1 overflow-y-auto"},km={class:"mt-8 mb-10 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},_m={class:"text-[14px] text-zinc-600"},zm={class:"font-bold text-black"},$m={class:"flex flex-col gap-10"},Cm={class:"flex items-center justify-between py-2 border-b-2 border-black mb-4"},Sm={class:"font-serif text-[18px] tracking-tight font-bold"},Im={class:"relative inline-flex items-center cursor-pointer"},Mm=["checked","onChange"],jm={class:"noir-toggle-bg w-8 h-4 bg-zinc-200 rounded-full transition-colors duration-300"},Tm={class:"flex flex-col gap-1"},Am={class:"flex flex-col"},Em={class:"text-[14px] font-medium group-hover:text-black text-zinc-700 transition-colors"},Pm={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},Om={class:"relative inline-flex items-center cursor-pointer"},Nm=["checked","disabled","onChange"],Rm={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Lm={key:0,class:"py-2 text-center text-zinc-300 text-[12px] italic"},Dm={__name:"WorldBookSelector",props:["chatId"],emits:["back"],setup(e,{emit:t}){const n=e,o=Dn(),i=ve(()=>Io(n.chatId)),a=E([]);Lt(()=>{i.value?.localSettings?.mountedWorldbooks&&(a.value=[...i.value.localSettings.mountedWorldbooks])});const l=ve(()=>o.state.categories),r=ve(()=>o.state.entries),c=R=>r.value.filter(T=>T.categoryId===R),b=R=>{const T=a.value.indexOf(R);T===-1?a.value.push(R):a.value.splice(T,1),y()},d=R=>a.value.includes(R),u=R=>{b(R)},y=async()=>{if(i.value){const R=i.value.localSettings||{};await rn({id:n.chatId,localSettings:{...R,mountedWorldbooks:a.value}})}},M=ve(()=>r.value.filter(R=>R.scope==="global").length);return(R,T)=>(f(),v("div",mm,[s("header",hm,[s("div",ym,[s("button",{onClick:T[0]||(T[0]=L=>R.$emit("back")),class:"flex items-center justify-center -ml-2 w-10 h-10 hover:bg-gray-100 rounded-full transition-colors"},[...T[1]||(T[1]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),T[2]||(T[2]=s("h1",{class:"font-serif text-[18px] font-light tracking-[0.15em] uppercase text-center flex-1 pr-8"},"",-1)),T[3]||(T[3]=s("div",{class:"w-8 hidden"},null,-1))])]),s("main",wm,[s("div",km,[T[5]||(T[5]=s("span",{class:"block text-[12px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),s("p",_m,[s("span",zm,C(M.value),1),T[4]||(T[4]=hs("  ",-1))])]),s("div",$m,[(f(!0),v(se,null,be(l.value,L=>(f(),v("div",{key:L.id,class:"flex flex-col"},[s("div",Cm,[s("span",Sm,C(L.name),1),s("label",Im,[s("input",{type:"checkbox",class:"sr-only noir-toggle",checked:d(L.id),onChange:z=>u(L.id)},null,40,Mm),s("div",jm,[s("div",{class:K(["noir-toggle-bg-thumb absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform duration-300 shadow-sm",d(L.id)?"translate-x-4":""])},null,2)])])]),s("div",Tm,[(f(!0),v(se,null,be(c(L.id).filter(z=>z.scope==="local"),z=>(f(),v("div",{key:z.id,class:"flex items-center justify-between py-3 px-2 hover:bg-gray-50 rounded-lg transition-colors group"},[s("div",Am,[s("span",Em,C(z.title),1),s("span",Pm,C(z.isConstant?"Constant":"Trigger")+"  "+C(z.position),1)]),s("label",Om,[s("input",{type:"checkbox",class:"sr-only",checked:d(L.id)||d(z.id),disabled:d(L.id),onChange:$=>!d(L.id)&&b(z.id)},null,40,Nm),s("div",{class:K(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",d(L.id)||d(z.id)?"bg-black border-black":"bg-transparent"])},[d(L.id)||d(z.id)?(f(),v("span",Rm,"check")):O("",!0)],2)])]))),128)),c(L.id).filter(z=>z.scope==="local").length===0?(f(),v("div",Lm," No local entries ")):O("",!0)])]))),128))]),T[6]||(T[6]=s("div",{class:"h-20"},null,-1))])]))}},Bm=qe(Dm,[["__scopeId","data-v-623fc9e7"]]),Um={class:"relationship-network w-full h-full flex flex-col bg-white relative overflow-hidden"},Fm={class:"h-[calc(3.5rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 z-30 bg-white/80 backdrop-blur sticky top-0"},Vm={class:"flex items-center w-full justify-between"},Km={class:"material-symbols-outlined text-zinc-600 text-[20px]"},Wm=["viewBox"],Hm=["onClick"],Gm=["x1","y1","x2","y2"],qm=["x1","y1","x2","y2","stroke-dasharray"],Jm=["x","y"],Qm={class:"flex justify-center"},Ym={class:"bg-white border border-zinc-200 px-2 py-0.5 rounded-full text-[10px] text-center font-bold text-zinc-500 group-hover:text-black group-hover:border-black transition-colors shadow-sm whitespace-nowrap"},Xm={class:"absolute inset-0 w-full h-full pointer-events-none z-20"},Zm=["title"],eh=["src"],th={class:"absolute -bottom-6 bg-black text-white text-[10px] px-3 py-1 rounded-full uppercase font-bold tracking-widest whitespace-nowrap shadow-lg z-30"},sh=["title","onClick"],nh=["src"],oh={class:"absolute top-full mt-3 left-1/2 -translate-x-1/2 text-[11px] text-zinc-700 font-bold whitespace-nowrap bg-white/90 backdrop-blur px-2 py-0.5 rounded border border-zinc-100 shadow-sm z-30 pointer-events-none"},ih={class:"bg-white p-8 shadow-2xl rounded-2xl w-96 max-w-full flex flex-col gap-6 animate-in fade-in zoom-in duration-200"},ah={class:"bg-zinc-50 px-4 py-3 rounded-xl border border-zinc-100 focus-within:border-black focus-within:ring-1 focus-within:ring-black transition-all"},lh={class:"bg-white p-6 shadow-2xl rounded-2xl w-[400px] max-w-full flex flex-col gap-4 max-h-[80vh] animate-in fade-in slide-in-from-bottom-4 duration-300"},rh={class:"flex-1 overflow-y-auto custom-scrollbar px-1 space-y-5"},ch={class:"space-y-2"},dh=["onClick"],uh=["src"],fh={class:"flex flex-col flex-1"},ph={class:"text-sm font-bold text-zinc-900"},vh={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},bh={key:1,class:"ml-2"},xh={key:0,class:"text-[9px] bg-zinc-900 text-white px-2 py-0.5 rounded-full font-bold"},gh={key:0},mh={class:"space-y-2"},hh=["onClick"],yh=["src"],wh={class:"flex flex-col flex-1"},kh={class:"text-sm font-bold text-zinc-900"},_h={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},zh={key:1,class:"ml-2"},$h={key:0,class:"text-[9px] bg-zinc-200 text-zinc-600 px-2 py-0.5 rounded-full font-bold"},Ch={class:"flex gap-3 mt-2 shrink-0 pt-4 border-t border-zinc-50"},Sh={key:1,class:"flex-1 py-3 bg-zinc-100 text-zinc-400 font-bold text-sm cursor-default rounded-xl"},Ih={class:"flex flex-col h-full overflow-hidden"},Mh={class:"p-5 border-b border-zinc-50 flex justify-between items-center sm:hidden"},jh={class:"flex-1 p-5 flex flex-col overflow-hidden"},Th={class:"font-serif text-xs font-bold tracking-widest text-zinc-400 uppercase mb-6 flex justify-between items-center"},Ah={class:"bg-zinc-100 text-zinc-500 px-2 py-0.5 rounded-full text-[10px] font-bold"},Eh={class:"space-y-4 overflow-y-auto flex-1 pr-1 custom-scrollbar pb-10"},Ph=["onClick"],Oh=["src"],Nh={class:"text-sm font-bold text-zinc-700 truncate group-hover:text-black transition-colors"},Rh=["onClick"],xn=2e3,Lh={__name:"RelationshipNetwork",emits:["back"],setup(e,{emit:t}){const n=E(!1),o=E(null),i=E(""),a=E(!1),l=E(!1),r=E(null),c=E(null),b=E(0),d=E(0),u=E(!1),y=E(0),M=E(0),R=E(1),T=xn/2,L=D=>{D.target.tagName!=="svg"&&D.target.tagName!=="DIV"&&!D.target.classList.contains("canvas-area")||(u.value=!0,D.type==="touchstart"?(y.value=D.touches[0].clientX,M.value=D.touches[0].clientY):(y.value=D.clientX,M.value=D.clientY))},z=D=>{if(!u.value)return;let k,m;D.type==="touchmove"?(k=D.touches[0].clientX,m=D.touches[0].clientY):(k=D.clientX,m=D.clientY);const P=k-y.value,V=m-M.value;b.value+=P,d.value+=V,y.value=k,M.value=m},$=()=>{u.value=!1};Lt(()=>{b.value=-T+window.innerWidth/2,d.value=-T+window.innerHeight/2,window.addEventListener("mousemove",z),window.addEventListener("mouseup",$),window.addEventListener("touchmove",z,{passive:!1}),window.addEventListener("touchend",$)}),hi(()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",$),window.removeEventListener("touchmove",z),window.removeEventListener("touchend",$)});const I=ve(()=>{const D=S.personas,k=S.relationships,m=S.contacts,P=D.map((ie,We)=>{const Qe=D.length||1,Ie=150,Me=We/Qe*2*Math.PI-Math.PI/2;return{...ie,nodeType:"persona",x:T+Ie*Math.cos(Me),y:T+Ie*Math.sin(Me)}}),V=new Set;k.forEach(ie=>{V.add(ie.sourceId),V.add(ie.targetId)});const Se=m.filter(ie=>V.has(ie.id)).map(ie=>{const We=k.filter(Me=>Me.sourceId===ie.id||Me.targetId===ie.id);let Qe=0,Ie=350;if(We.length>0){let Me=0,it=0,ft=0;We.forEach(Ht=>{const Et=Ht.sourceId===ie.id?Ht.targetId:Ht.sourceId,Yt=P.find(x=>x.id===Et);Yt&&(Me+=Yt.x-T,it+=Yt.y-T,ft++)}),ft>0?(Qe=Math.atan2(it,Me),ft>1&&(Ie=250)):Qe=ie.id.split("").reduce((Et,Yt)=>Et+Yt.charCodeAt(0),0)%360*(Math.PI/180)}else Qe=ie.id.split("").reduce((it,ft)=>it+ft.charCodeAt(0),0)%360*(Math.PI/180);return{...ie,displayName:ie.handle||ie.nickname||ie.name,nodeType:"contact",idealAngle:Qe,radius:Ie,x:0,y:0}});Se.sort((ie,We)=>ie.idealAngle-We.idealAngle);for(let ie=0;ie<Se.length;ie++){const We=Se[ie];if(ie>0){const Qe=Se[ie-1],Ie=80/We.radius;let Me=We.idealAngle-Qe.idealAngle;for(;Me<0;)Me+=Math.PI*2;Me<Ie&&(We.idealAngle=Qe.idealAngle+Ie)}}Se.forEach(ie=>{ie.x=T+ie.radius*Math.cos(ie.idealAngle),ie.y=T+ie.radius*Math.sin(ie.idealAngle)});const Be=[...P,...Se],ht=k.map(ie=>{const We=Be.find(Ie=>Ie.id===ie.sourceId),Qe=Be.find(Ie=>Ie.id===ie.targetId);return We&&Qe?{...ie,x1:We.x,y1:We.y,x2:Qe.x,y2:Qe.y,isCharChar:We.nodeType==="contact"&&Qe.nodeType==="contact"}:null}).filter(Boolean);return{personaNodes:P,contactNodes:Se,links:ht}}),j=D=>{o.value=D,i.value=D.type,a.value=!0},A=async()=>{o.value&&i.value.trim()&&(await Wl(o.value.id,i.value.trim()),a.value=!1,o.value=null)},q=async()=>{o.value&&confirm("")&&(await Xd(o.value.id),a.value=!1,o.value=null)},de=D=>{r.value=D,c.value=null,l.value=!0},pe=async()=>{if(r.value&&c.value){if(S.relationships.find(m=>m.sourceId===c.value&&m.targetId===r.value||m.sourceId===r.value&&m.targetId===c.value)){alert("");return}const k="";await Kl(c.value,r.value,k),l.value=!1,setTimeout(()=>{const m=S.relationships.find(P=>P.sourceId===c.value&&P.targetId===r.value&&P.type===k);m&&(o.value=m,i.value="",a.value=!0)},100),r.value=null}},J=(D,k)=>{const m=S.relationships.find(P=>P.sourceId===D&&P.targetId===k||P.sourceId===k&&P.targetId===D);return m?m.type:null},ne=ve(()=>S.contacts),ee=ve(()=>r.value?S.contacts.filter(D=>D.id!==r.value):[]),W=D=>D.handle||D.nickname||D.name;return(D,k)=>(f(),v("div",Um,[s("header",Fm,[s("div",Vm,[s("button",{onClick:k[0]||(k[0]=m=>D.$emit("back")),class:"w-10 h-10 -ml-2 flex items-center justify-center hover:bg-zinc-100/50 rounded-full transition-colors"},[...k[7]||(k[7]=[s("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),k[8]||(k[8]=s("span",{class:"font-bold tracking-[0.2em] text-[13px] uppercase text-zinc-900 absolute left-1/2 -translate-x-1/2"}," (NETWORK)",-1)),s("button",{onClick:k[1]||(k[1]=m=>n.value=!n.value),class:"sm:hidden p-2 -mr-2 rounded-full hover:bg-zinc-100"},[s("span",Km,C(n.value?"close":"group_add"),1)]),k[9]||(k[9]=s("div",{class:"w-10 h-10 hidden sm:block"},null,-1))])]),s("div",{class:"flex-1 overflow-hidden relative bg-zinc-50 cursor-move",onMousedown:L,onTouchstart:L},[s("div",{class:"absolute top-0 left-0 w-full h-full canvas-area",style:Ve({transform:`translate(${b.value}px, ${d.value}px) scale(${R.value})`,transformOrigin:"0 0"})},[s("div",{class:"relative",style:Ve({width:`${xn}px`,height:`${xn}px`})},[k[10]||(k[10]=s("div",{class:"absolute inset-0 opacity-10 pointer-events-none",style:{"background-image":"radial-gradient(#000 1px, transparent 1px)","background-size":"20px 20px"}},null,-1)),(f(),v("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",viewBox:`0 0 ${xn} ${xn}`},[(f(!0),v(se,null,be(I.value.links,m=>(f(),v("g",{key:m.id,class:"pointer-events-auto cursor-pointer group",onClick:Ce(P=>j(m),["stop"])},[s("line",{x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,stroke:"transparent","stroke-width":"40"},null,8,Gm),s("line",{x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,class:"stroke-zinc-300 stroke-1 group-hover:stroke-black transition-colors","stroke-dasharray":m.isCharChar?"8 4":"0"},null,8,qm),(f(),v("foreignObject",{x:(m.x1+m.x2)/2-50,y:(m.y1+m.y2)/2-12,width:"100",height:"24",class:"overflow-visible pointer-events-none"},[s("div",Qm,[s("span",Ym,C(m.type),1)])],8,Jm))],8,Hm))),128))],8,Wm)),s("div",Xm,[(f(!0),v(se,null,be(I.value.personaNodes,m=>(f(),v("div",{key:m.id,class:"absolute w-20 h-20 -ml-10 -mt-10 rounded-full border-4 border-white ring-1 ring-zinc-200 bg-white flex items-center justify-center shadow-xl pointer-events-auto transition-transform hover:scale-110",style:Ve({left:`${m.x}px`,top:`${m.y}px`}),title:m.name},[s("img",{src:m.avatar,class:"w-full h-full rounded-full object-cover"},null,8,eh),s("div",th,"  ("+C(m.handle)+") ",1)],12,Zm))),128)),(f(!0),v(se,null,be(I.value.contactNodes,m=>(f(),v("div",{key:m.id,class:"absolute w-14 h-14 -ml-7 -mt-7 rounded-full border-2 border-white ring-1 ring-zinc-200 bg-white p-0.5 pointer-events-auto cursor-pointer hover:ring-black hover:shadow-xl transition-all flex items-center justify-center group",style:Ve({left:`${m.x}px`,top:`${m.y}px`}),title:m.displayName,onClick:Ce(P=>de(m.id),["stop"])},[s("img",{src:m.avatar,class:"w-full h-full rounded-full object-cover"},null,8,nh),s("span",oh,C(m.displayName),1)],12,sh))),128))])],4)],4),k[11]||(k[11]=s("div",{class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] right-6 text-zinc-300 text-xs font-serif tracking-widest pointer-events-none select-none z-20"}," UNIFIED NETWORK   ",-1))],32),a.value?(f(),v("div",{key:0,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:k[3]||(k[3]=Ce(m=>a.value=!1,["self"]))},[s("div",ih,[k[12]||(k[12]=s("div",{class:"text-center"},[s("h3",{class:"font-bold text-lg text-zinc-900"}," (Define Link)"),s("p",{class:"text-zinc-500 text-xs mt-1"},"")],-1)),s("div",ah,[te(s("input",{"onUpdate:modelValue":k[2]||(k[2]=m=>i.value=m),ref:"typeInput",placeholder:"...",class:"bg-transparent border-none w-full text-center font-bold text-xl focus:ring-0 p-0 text-zinc-900 placeholder:text-zinc-300",onKeyup:Ms(A,["enter"]),autofocus:""},null,544),[[le,i.value]])]),s("div",{class:"grid grid-cols-2 gap-3"},[s("button",{onClick:q,class:"py-3 bg-white text-red-500 border border-zinc-200 hover:border-red-200 hover:bg-red-50 font-bold text-sm rounded-xl transition-all shadow-sm"},"  "),s("button",{onClick:A,class:"py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg shadow-zinc-200"},"  ")])])])):O("",!0),l.value?(f(),v("div",{key:1,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:k[5]||(k[5]=Ce(m=>l.value=!1,["self"]))},[s("div",lh,[k[17]||(k[17]=s("div",{class:"shrink-0 text-center pb-2 border-b border-zinc-50"},[s("h3",{class:"font-bold text-base text-zinc-900"}," (Connect)")],-1)),s("div",rh,[s("div",null,[k[14]||(k[14]=s("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (ME)",-1)),s("div",ch,[(f(!0),v(se,null,be(ct(S).personas,m=>(f(),v("div",{key:m.id,onClick:P=>c.value=m.id,class:K(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",c.value===m.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[s("img",{src:m.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,uh),s("div",fh,[s("span",ph,C(m.handle),1)]),c.value===m.id?(f(),v("div",vh,[...k[13]||(k[13]=[s("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(f(),v("div",bh,[J(r.value,m.id)?(f(),v("span",xh,C(J(r.value,m.id)),1)):O("",!0)]))],10,dh))),128))])]),ee.value.length>0?(f(),v("div",gh,[k[16]||(k[16]=s("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (OTHERS)",-1)),s("div",mh,[(f(!0),v(se,null,be(ee.value,m=>(f(),v("div",{key:m.id,onClick:P=>c.value=m.id,class:K(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",c.value===m.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[s("img",{src:m.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,yh),s("div",wh,[s("span",kh,C(W(m)),1)]),c.value===m.id?(f(),v("div",_h,[...k[15]||(k[15]=[s("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(f(),v("div",zh,[J(r.value,m.id)?(f(),v("span",$h,C(J(r.value,m.id)),1)):O("",!0)]))],10,hh))),128))])])):O("",!0)]),s("div",Ch,[s("button",{onClick:k[4]||(k[4]=m=>l.value=!1),class:"flex-1 py-3 text-zinc-500 bg-white hover:bg-zinc-50 border border-zinc-200 font-bold text-sm rounded-xl transition-colors"},"  "),c.value&&!J(r.value,c.value)?(f(),v("button",{key:0,onClick:pe,class:"flex-1 py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg hover:shadow-xl"},"  ")):c.value?(f(),v("button",Sh,"  ")):O("",!0)])])])):O("",!0),s("div",{class:K(["absolute right-0 top-0 bottom-0 pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)] bg-white border-l border-zinc-100 shadow-2xl transition-transform duration-300 transform w-80 z-40 flex flex-col",n.value?"translate-x-0":"translate-x-full sm:translate-x-0"])},[s("div",Ih,[s("div",Mh,[k[19]||(k[19]=s("span",{class:"font-bold text-xs text-zinc-500 uppercase tracking-widest"},"Directory",-1)),s("button",{onClick:k[6]||(k[6]=m=>n.value=!1),class:"p-2 rounded-full hover:bg-zinc-100"},[...k[18]||(k[18]=[s("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),s("div",jh,[s("h3",Th,[k[20]||(k[20]=s("span",null," (ALL)",-1)),s("span",Ah,C(ne.value.length),1)]),s("div",Eh,[(f(!0),v(se,null,be(ne.value,m=>(f(),v("div",{key:m.id,class:"flex items-center justify-between group"},[s("div",{class:"flex items-center gap-3 overflow-hidden cursor-pointer",onClick:P=>de(m.id)},[s("img",{src:m.avatar,class:"w-10 h-10 rounded-full border border-zinc-100 object-cover shadow-sm transition-transform group-hover:scale-105"},null,8,Oh),s("span",Nh,C(W(m)),1)],8,Ph),s("button",{onClick:P=>de(m.id),class:"w-8 h-8 shrink-0 rounded-full border border-zinc-200 hover:border-black hover:bg-black hover:text-white flex items-center justify-center transition-all shadow-sm active:scale-90 opacity-0 group-hover:opacity-100",title:""},[...k[21]||(k[21]=[s("span",{class:"material-symbols-outlined text-[16px]"},"all_inclusive",-1)])],8,Rh)]))),128))])]),k[22]||(k[22]=s("div",{class:"p-4 border-t border-zinc-50 bg-zinc-50/50"},[s("p",{class:"text-[10px] text-zinc-400 leading-relaxed text-center font-medium"},[hs(" "),s("br"),hs("   ")])],-1))])],2)]))}},Dh=qe(Lh,[["__scopeId","data-v-0cda6011"]]),Bh={class:"h-full flex flex-col bg-white overflow-hidden relative"},Uh={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Fh={class:"flex items-center gap-3"},Vh={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},Kh={class:"flex items-center gap-2"},Wh={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},Hh={key:0},Gh={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},qh=["onClick"],Jh={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-110 transition-transform mb-2"},Qh={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},Yh={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},Xh={key:0,class:"w-3 h-3 bg-black rounded-full"},Zh={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},ey={class:"mb-8 flex items-end justify-between border-b border-zinc-50 pb-4"},ty={class:"flex-1 mr-8"},sy=["value"],ny={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-3 gap-y-8"},oy=["onClick"],iy=["src"],ay={key:0,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},ly={key:0,class:"w-3 h-3 bg-black rounded-full"},ry={key:1,class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},cy={class:"text-center px-1"},dy={class:"text-[11px] font-medium text-zinc-600 truncate leading-tight"},uy={key:0,class:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40 animate-in slide-in-from-bottom-4 duration-200"},fy={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},py={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},vy={class:"grid grid-cols-2 gap-3"},by={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},xy={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-2xl p-2"},gy=["onClick"],my={key:0,class:"material-symbols-outlined text-sm"},hy={key:0,class:"text-center py-4 text-zinc-400 text-xs"},yy={class:"grid grid-cols-2 gap-3"},wy=["disabled"],ky={class:"bg-white w-[420px] max-w-full rounded-[32px] shadow-2xl flex flex-col gap-6 p-8 max-h-[85vh] animate-in zoom-in-95 duration-300 transform transition-all"},_y={class:"text-center mb-8"},zy={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},$y={class:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-6"},Cy={class:"flex items-center justify-center w-full h-32 border border-dashed border-zinc-200 rounded-2xl cursor-pointer hover:border-black hover:bg-zinc-50 transition-all group"},Sy={class:"mt-8 grid grid-cols-2 gap-3"},Iy=["disabled"],My={__name:"StickerLibrary",emits:["back"],setup(e,{emit:t}){const n=E(null),o=E(!1),i=E(""),a=E(!1),l=E(""),r=E(!1),c=E(!1),b=E(new Set),d=E(!1),u=E(""),y=E(null),M=ve(()=>S.stickerCategories),R=async()=>{i.value.trim()&&(await za(i.value.trim(),""),i.value="",o.value=!1)},T=D=>{if(c.value){A(D.id);return}n.value=D,c.value=!1,b.value=new Set},L=async()=>{confirm("")&&(await $a(n.value.id),n.value=null)},z=async D=>{const k=D.target.value.trim();k&&k!==n.value.name&&await eu(n.value.id,{name:k})},$=ve(()=>n.value?on(n.value.id):[]),I=async()=>{if(!l.value.trim())return;r.value=!0;const D=l.value.split(`
`);for(const k of D){const m=k.split(/:(.+)/);let P="sticker",V=k.trim();m.length>1&&(P=m[0].trim(),V=m[1].trim()),V&&await Qn(n.value.id,V,P)}r.value=!1,l.value="",a.value=!1},j=async D=>{const k=D.target.files;if(!(!k||k.length===0)){r.value=!0;for(const m of k)if(m.type.startsWith("image/")){const P=new FileReader;await new Promise(V=>{P.onload=async Z=>{const Se=Z.target.result,Be=m.name.replace(/\.[^/.]+$/,"");await Qn(n.value.id,Se,Be),V()},P.readAsDataURL(m)})}r.value=!1,a.value=!1}},A=D=>{b.value.has(D)?b.value.delete(D):b.value.add(D)},q=()=>{const D=n.value?$.value:M.value;b.value.size===D.length?b.value.clear():D.forEach(k=>b.value.add(k.id))},de=async()=>{if(b.value.size===0)return;const D=b.value.size,k=n.value?"":"";if(confirm(` ${D} ${k}`)){for(const m of b.value)n.value?await li(m):await $a(m);b.value.clear(),n.value||(c.value=!1)}},pe=()=>{b.value.size!==0&&(d.value=!0,u.value="")},J=async()=>{if(u.value){for(const D of b.value){const k=S.stickers.find(m=>m.id===D);k&&(await li(D),await Qn(u.value,k.url,k.keyword))}b.value.clear(),c.value=!1,d.value=!1,n.value=null}},ne=()=>{if(b.value.size===0)return;const D={version:1,packs:[]};for(const V of b.value){const Z=M.value.find(Se=>Se.id===V);if(Z){const Se=on(V);D.packs.push({name:Z.name,stickers:Se.map(Be=>({keyword:Be.keyword,url:Be.url}))})}}const k=new Blob([JSON.stringify(D,null,2)],{type:"application/json"}),m=URL.createObjectURL(k),P=document.createElement("a");P.href=m,P.download=`Roche_stickers_export_${Date.now()}.json`,P.click(),URL.revokeObjectURL(m),b.value.clear(),c.value=!1},ee=()=>{y.value.click()},W=async D=>{const k=D.target.files[0];if(!k)return;const m=new FileReader;m.onload=async P=>{try{const V=JSON.parse(P.target.result),Z=V.packs||(V.name?[V]:[]);if(Z.length>0){let Se=0;for(const Be of Z)if(Be.name&&Array.isArray(Be.stickers)){const ht=await za(Be.name+" (Import)","");for(const ie of Be.stickers)await Qn(ht.id,ie.url,ie.keyword);Se++}alert(`Successfully imported ${Se} packs.`)}else alert("Invalid sticker pack format.")}catch(V){console.error(V),alert("Failed to parse sticker pack.")}D.target.value=""},m.readAsText(k)};return(D,k)=>(f(),v("div",Bh,[s("div",Uh,[s("div",Fh,[s("button",{onClick:k[0]||(k[0]=m=>n.value?n.value=null:D.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...k[14]||(k[14]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),s("span",Vh,C(n.value?n.value.name:"Sticker Packs"),1)]),s("div",Kh,[!n.value&&!c.value?(f(),v(se,{key:0},[s("button",{onClick:ee,class:"text-[10px] font-bold uppercase tracking-widest px-4 py-2 hover:bg-zinc-50 rounded-full border border-zinc-100 transition-colors flex items-center gap-2"},[...k[15]||(k[15]=[s("span",{class:"material-symbols-outlined text-[16px]"},"download",-1),s("span",null,"Import",-1)])]),s("input",{ref_key:"fileInputRef",ref:y,type:"file",accept:".json",class:"hidden",onChange:W},null,544),s("button",{onClick:k[1]||(k[1]=m=>c.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Packs"},[...k[16]||(k[16]=[s("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64)):c.value?(f(),v(se,{key:1},[s("button",{onClick:q,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),s("button",{onClick:k[2]||(k[2]=m=>{c.value=!1,b.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-red-500"},"Cancel")],64)):(f(),v("button",{key:2,onClick:k[3]||(k[3]=m=>c.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Stickers"},[...k[17]||(k[17]=[s("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])]))])]),s("div",Wh,[n.value?(f(),v("div",Zh,[s("div",ey,[s("div",ty,[s("input",{value:n.value.name,onChange:z,class:"text-3xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0",placeholder:"Pack Name"},null,40,sy)]),s("button",{onClick:L,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors",title:"Delete Pack"},[...k[19]||(k[19]=[s("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),s("div",ny,[(f(!0),v(se,null,be($.value,m=>(f(),v("div",{key:m.id,class:"relative group flex flex-col gap-2",onClick:P=>c.value?A(m.id):null},[s("div",{class:K(["aspect-square bg-zinc-50 rounded-2xl overflow-hidden border transition-all cursor-pointer relative",b.value.has(m.id)?"border-black ring-2 ring-black ring-offset-2":"border-zinc-50 hover:border-zinc-200"])},[s("img",{src:m.url,class:"w-full h-full object-cover"},null,8,iy),c.value?(f(),v("div",ay,[b.value.has(m.id)?(f(),v("div",ly)):O("",!0)])):(f(),v("div",ry,[...k[20]||(k[20]=[s("span",{class:"material-symbols-outlined text-white"},"visibility",-1)])]))],2),s("div",cy,[s("p",dy,C(m.keyword),1)])],8,oy))),128)),c.value?O("",!0):(f(),v("button",{key:0,onClick:k[5]||(k[5]=m=>a.value=!0),class:"aspect-square rounded-2xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-1"},[...k[21]||(k[21]=[s("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"add",-1),s("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"Add",-1)])]))])])):(f(),v("div",Hh,[s("div",Gh,[(f(!0),v(se,null,be(M.value,m=>(f(),v("div",{key:m.id,class:K(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border-2",b.value.has(m.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:P=>T(m)},[s("span",Jh,C(m.name),1),s("div",Qh,C(ct(on)(m.id).length)+" stickers",1),c.value?(f(),v("div",Yh,[b.value.has(m.id)?(f(),v("div",Xh)):O("",!0)])):O("",!0)],10,qh))),128)),c.value?O("",!0):(f(),v("button",{key:0,onClick:k[4]||(k[4]=m=>o.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...k[18]||(k[18]=[s("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2"},"add",-1),s("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))])]))]),c.value&&b.value.size>0?(f(),v("div",uy,[s("span",fy,C(b.value.size)+" Selected",1),k[25]||(k[25]=s("div",{class:"h-4 w-px bg-white/20"},null,-1)),n.value?(f(),v("button",{key:1,onClick:pe,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...k[23]||(k[23]=[s("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),s("span",{class:"text-[11px] font-bold"},"Move",-1)])])):(f(),v("button",{key:0,onClick:ne,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...k[22]||(k[22]=[s("span",{class:"material-symbols-outlined text-[18px]"},"ios_share",-1),s("span",{class:"text-[11px] font-bold"},"Export Items",-1)])])),k[26]||(k[26]=s("div",{class:"h-4 w-px bg-white/20"},null,-1)),s("button",{onClick:de,class:"flex items-center gap-2 hover:text-red-300 transition-colors"},[...k[24]||(k[24]=[s("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1),s("span",{class:"text-[11px] font-bold"},"Delete",-1)])])])):O("",!0),(f(),ye(mt,{to:"body"},[o.value?(f(),v("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:k[8]||(k[8]=Ce(m=>o.value=!1,["self"]))},[s("div",py,[k[27]||(k[27]=s("div",{class:"text-center"},[s("h3",{class:"font-serif italic text-2xl mb-1"},"New Sticker Pack"),s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new collection")],-1)),te(s("input",{"onUpdate:modelValue":k[6]||(k[6]=m=>i.value=m),placeholder:"Name your pack...",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:Ms(R,["enter"])},null,544),[[le,i.value]]),s("div",vy,[s("button",{onClick:k[7]||(k[7]=m=>o.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),s("button",{onClick:R,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[d.value?(f(),v("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:k[10]||(k[10]=Ce(m=>d.value=!1,["self"]))},[s("div",by,[k[28]||(k[28]=s("div",{class:"text-center"},[s("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),s("div",xy,[(f(!0),v(se,null,be(M.value.filter(m=>m.id!==n.value.id),m=>(f(),v("button",{key:m.id,onClick:P=>u.value=m.id,class:K(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",u.value===m.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[s("span",null,C(m.name),1),u.value===m.id?(f(),v("span",my,"check")):O("",!0)],10,gy))),128)),M.value.length<=1?(f(),v("div",hy,"No other packs available")):O("",!0)]),s("div",yy,[s("button",{onClick:k[9]||(k[9]=m=>d.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),s("button",{onClick:J,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!u.value}," Move ",8,wy)])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[a.value?(f(),v("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:k[13]||(k[13]=Ce(m=>a.value=!1,["self"]))},[s("div",ky,[s("div",_y,[k[29]||(k[29]=s("h3",{class:"font-serif italic text-2xl mb-1"},"Add Stickers",-1)),s("p",zy,C(n.value.name),1)]),s("div",$y,[s("div",null,[s("label",Cy,[k[30]||(k[30]=s("div",{class:"flex flex-col items-center gap-2"},[s("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-white group-hover:shadow-md transition-all"},[s("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black"},"cloud_upload")]),s("span",{class:"text-[10px] font-bold text-zinc-400 group-hover:text-black uppercase tracking-widest"},"Upload Images")],-1)),s("input",{type:"file",class:"hidden",multiple:"",accept:"image/*",onChange:j},null,32)])]),k[32]||(k[32]=s("div",{class:"flex items-center gap-4"},[s("div",{class:"h-px bg-zinc-100 flex-1"}),s("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"OR"),s("div",{class:"h-px bg-zinc-100 flex-1"})],-1)),s("div",null,[k[31]||(k[31]=s("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 block"},"Batch Import URLs",-1)),te(s("textarea",{"onUpdate:modelValue":k[11]||(k[11]=m=>l.value=m),rows:"4",class:"w-full bg-zinc-50 rounded-2xl p-4 text-xs font-mono border-none focus:ring-1 focus:ring-black resize-none placeholder:text-zinc-300 outline-none",placeholder:`happy:http://example.com/happy.jpg
sad:http://example.com/sad.jpg`},null,512),[[le,l.value]])])]),s("div",Sy,[s("button",{onClick:k[12]||(k[12]=m=>a.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),s("button",{onClick:I,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:r.value},C(r.value?"Processing...":"Confirm"),9,Iy)])])])):O("",!0)]))]))}},jy={class:"h-full flex flex-col bg-white overflow-hidden relative"},Ty={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Ay={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},Ey={class:"w-full aspect-[1.586] bg-black rounded-[24px] p-8 text-white flex flex-col justify-between shadow-2xl relative overflow-hidden mb-8 group"},Py={class:"relative z-10"},Oy={class:"font-serif text-4xl font-bold tracking-tight"},Ny={class:"grid grid-cols-2 gap-4 mb-8"},Ry={class:"flex flex-col"},Ly={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Dy={class:"text-xs text-red-500 text-center h-4 mb-6"},By={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Uy={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},Fy={key:0},Vy={key:1,class:"text-center text-red-500 text-xs mb-4"},Ky={class:"text-xs text-red-500 text-center h-4 mb-6"},Wy={class:"grid grid-cols-2 gap-3"},Hy=["disabled"],Gy={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},qy={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},Jy={class:"space-y-4 mb-6"},Qy={class:"text-xs text-red-500 text-center h-4 mb-6"},Yy={class:"bg-white w-full max-w-md rounded-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-300"},Xy={class:"px-6 py-4 border-b border-zinc-50 flex items-center gap-4 bg-zinc-50/50"},Zy={class:"relative group"},ew={class:"flex-1 flex bg-zinc-100 p-1 rounded-lg"},tw={class:"flex-1 overflow-y-auto custom-scrollbar p-0"},sw={key:0,class:"flex flex-col items-center justify-center h-64 text-zinc-300 gap-2"},nw={key:1,class:"divide-y divide-zinc-50"},ow={class:"flex flex-col"},iw={class:"font-bold text-sm"},aw={class:"text-[10px] text-zinc-400 mt-1"},lw={__name:"Wallet",emits:["back"],setup(e,{emit:t}){const n=E(null),o=E(""),i=E(""),a=E(""),l=E(""),r=ve(()=>S.wallet.balance.toFixed(2)),c=ve(()=>S.wallet.hasPassword),b=ve(()=>S.wallet.transactions),d=new Date,u=E(`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`),y=E("all"),M=ve(()=>b.value.filter(j=>{const A=new Date(j.timestamp),de=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}`===u.value;let pe=!0;return y.value==="deposit"&&(pe=j.type==="deposit"),y.value==="withdraw"&&(pe=j.type==="withdraw"),de&&pe})),R=j=>{n.value=j,o.value="",i.value="",a.value="",l.value=""},T=()=>{n.value=null},L=()=>{const j=parseFloat(o.value);if(!j||j<=0){l.value="Please enter a valid amount";return}ii("deposit",j,"Account Deposit"),T()},z=()=>{const j=parseFloat(o.value);if(!j||j<=0){l.value="Please enter a valid amount";return}if(j>S.wallet.balance){l.value="Insufficient balance";return}if(!c.value){l.value="Please set a payment password first";return}if(!Vl(i.value)){l.value="Incorrect password";return}ii("withdraw",j,"Withdrawal"),T()},$=()=>{if(i.value.length!==6||isNaN(i.value)){l.value="Password must be 6 digits";return}if(i.value!==a.value){l.value="Passwords do not match";return}Fd(i.value),T()},I=j=>new Date(j).toLocaleString();return(j,A)=>(f(),v("div",jy,[s("div",Ty,[s("button",{onClick:A[0]||(A[0]=q=>j.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2 mr-2"},[...A[14]||(A[14]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),A[15]||(A[15]=s("span",{class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},"My Wallet",-1))]),s("div",Ay,[s("div",Ey,[A[17]||(A[17]=s("div",{class:"absolute -right-20 -top-20 w-64 h-64 bg-zinc-800/30 rounded-full blur-3xl group-hover:bg-zinc-700/30 transition-colors duration-500"},null,-1)),A[18]||(A[18]=s("div",{class:"flex items-center justify-between relative z-10"},[s("span",{class:"font-serif italic text-lg opacity-80"},"Noir Card"),s("span",{class:"material-symbols-outlined opacity-50"},"contactless")],-1)),s("div",Py,[A[16]||(A[16]=s("div",{class:"text-[11px] uppercase tracking-[0.2em] opacity-60 mb-1"},"Total Balance",-1)),s("div",Oy," "+C(r.value),1)]),A[19]||(A[19]=s("div",{class:"flex items-center justify-between text-[10px] uppercase tracking-widest opacity-60 relative z-10"},[s("span",null,"**** 8848"),s("span",null,"Noir Inc.")],-1))]),s("div",Ny,[s("button",{onClick:A[1]||(A[1]=q=>R("recharge")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...A[20]||(A[20]=[s("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"add_card",-1),s("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Top Up",-1)])]),s("button",{onClick:A[2]||(A[2]=q=>R("withdraw")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...A[21]||(A[21]=[s("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"payments",-1),s("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Withdraw",-1)])])]),s("div",Ry,[s("button",{onClick:A[3]||(A[3]=q=>R("history")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...A[22]||(A[22]=[s("div",{class:"flex items-center gap-4"},[s("span",{class:"material-symbols-outlined text-zinc-400"},"receipt_long"),s("span",{class:"text-[15px] font-medium"},"Transaction History")],-1),s("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])]),s("button",{onClick:A[4]||(A[4]=q=>R("password")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...A[23]||(A[23]=[s("div",{class:"flex items-center gap-4"},[s("span",{class:"material-symbols-outlined text-zinc-400"},"lock"),s("span",{class:"text-[15px] font-medium"},"Payment Security")],-1),s("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])])])]),(f(),ye(mt,{to:"body"},[n.value==="recharge"?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Ce(T,["self"])},[s("div",Ly,[A[24]||(A[24]=s("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Top Up",-1)),A[25]||(A[25]=s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},"Add funds to wallet",-1)),te(s("input",{"onUpdate:modelValue":A[5]||(A[5]=q=>o.value=q),type:"number",placeholder:"0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-2 bg-transparent",autofocus:""},null,512),[[le,o.value]]),s("div",Dy,C(l.value),1),s("div",{class:"grid grid-cols-2 gap-3"},[s("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:L,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[n.value==="withdraw"?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Ce(T,["self"])},[s("div",By,[A[27]||(A[27]=s("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Withdraw",-1)),s("p",Uy,"Available: "+C(r.value),1),te(s("input",{"onUpdate:modelValue":A[6]||(A[6]=q=>o.value=q),type:"number",placeholder:"Amount",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-6 bg-transparent"},null,512),[[le,o.value]]),c.value?(f(),v("div",Fy,[A[26]||(A[26]=s("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 mb-2"},"Payment Password",-1)),te(s("input",{"onUpdate:modelValue":A[7]||(A[7]=q=>i.value=q),type:"password",maxlength:"6",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black mb-2"},null,512),[[le,i.value]])])):(f(),v("div",Vy,"Please set password first")),s("div",Ky,C(l.value),1),s("div",Wy,[s("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:z,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg",disabled:!c.value},"Confirm",8,Hy)])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[n.value==="password"?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Ce(T,["self"])},[s("div",Gy,[A[28]||(A[28]=s("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Security",-1)),s("p",qy,C(c.value?"Change Password":"Set Payment Password"),1),s("div",Jy,[s("div",null,[te(s("input",{"onUpdate:modelValue":A[8]||(A[8]=q=>i.value=q),type:"password",maxlength:"6",placeholder:"New Password (6 digits)",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[le,i.value]])]),s("div",null,[te(s("input",{"onUpdate:modelValue":A[9]||(A[9]=q=>a.value=q),type:"password",maxlength:"6",placeholder:"Confirm Password",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[le,a.value]])])]),s("div",Qy,C(l.value),1),s("div",{class:"grid grid-cols-2 gap-3"},[s("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),s("button",{onClick:$,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Save")])])])):O("",!0)])),(f(),ye(mt,{to:"body"},[n.value==="history"?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:Ce(T,["self"])},[s("div",Yy,[s("div",{class:"p-6 border-b border-zinc-50 flex items-center justify-between shrink-0"},[A[30]||(A[30]=s("h3",{class:"font-serif italic text-2xl"},"Transactions",-1)),s("button",{onClick:T,class:"w-8 h-8 flex items-center justify-center bg-zinc-50 rounded-full hover:bg-zinc-100"},[...A[29]||(A[29]=[s("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),s("div",Xy,[s("div",Zy,[te(s("input",{"onUpdate:modelValue":A[10]||(A[10]=q=>u.value=q),type:"month",class:"pl-8 pr-3 py-1.5 rounded-lg bg-white border border-zinc-200 text-xs font-bold uppercase tracking-wider focus:outline-none focus:border-black cursor-pointer w-32"},null,512),[[le,u.value]]),A[31]||(A[31]=s("span",{class:"material-symbols-outlined text-[16px] absolute left-2 top-1.5 text-zinc-400 pointer-events-none"},"calendar_month",-1))]),s("div",ew,[s("button",{onClick:A[11]||(A[11]=q=>y.value="all"),class:K(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",y.value==="all"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-black"])},"All",2),s("button",{onClick:A[12]||(A[12]=q=>y.value="deposit"),class:K(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",y.value==="deposit"?"bg-white shadow-sm text-green-600":"text-zinc-400 hover:text-black"])},"Income",2),s("button",{onClick:A[13]||(A[13]=q=>y.value="withdraw"),class:K(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",y.value==="withdraw"?"bg-white shadow-sm text-red-600":"text-zinc-400 hover:text-black"])},"Expense",2)])]),s("div",tw,[M.value.length===0?(f(),v("div",sw,[...A[32]||(A[32]=[s("span",{class:"material-symbols-outlined text-4xl"},"event_busy",-1),s("span",{class:"text-[10px] uppercase tracking-widest"},"No matching records",-1)])])):(f(),v("div",nw,[(f(!0),v(se,null,be(M.value,q=>(f(),v("div",{key:q.id,class:"flex items-center justify-between p-6 hover:bg-zinc-50 transition-colors"},[s("div",ow,[s("span",iw,C(q.title),1),s("span",aw,C(I(q.timestamp)),1)]),s("span",{class:K(["font-mono font-bold",q.type==="deposit"?"text-green-600":"text-black"])},C(q.type==="deposit"?"+":"-")+" "+C(q.amount.toFixed(2)),3)]))),128))]))])])])):O("",!0)]))]))}},rw={class:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100 pb-6 z-[60]"},cw={class:"max-w-7xl mx-auto flex items-center justify-around h-16 px-4 w-full"},dw=["onClick"],uw={key:0,class:"w-10 h-10 bg-zinc-50 rounded-lg text-black hover:bg-zinc-100 flex items-center justify-center"},fw={__name:"Navigation",props:["activeTab"],emits:["change"],setup(e,{emit:t}){const n=t,o=[{id:"feed",icon:"home"},{id:"inbox",icon:"mail"},{id:"compose",icon:"add",isAction:!0},{id:"activity",icon:"favorite"},{id:"profile",icon:"person"}],i=a=>{n("change",a)};return(a,l)=>(f(),v("nav",rw,[s("div",cw,[(f(),v(se,null,be(o,r=>s("button",{key:r.id,onClick:c=>i(r.id),class:K(["flex items-center justify-center w-12 transition-colors",[r.isAction?"":e.activeTab===r.id?"text-black":"text-zinc-400 hover:text-black"]])},[r.isAction?(f(),v("div",uw,[...l[0]||(l[0]=[s("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])):(f(),v("span",{key:1,class:K(["material-symbols-outlined text-[26px]",{"active-icon":e.activeTab===r.id}])},C(r.icon),3))],10,dw)),64))])]))}},pw=qe(fw,[["__scopeId","data-v-3dfd0e36"]]),vw={class:"noir-app-container w-full h-full bg-white relative font-sans text-black overflow-hidden flex flex-col"},bw={key:10,class:"flex-1 flex items-center justify-center h-full"},xw={__name:"NoirApp",emits:["close"],setup(e,{emit:t}){const n=E("feed"),o=E(null);Lt(()=>{Vd()});const i=(l,r=null)=>{o.value=r,n.value=l},a=l=>{n.value=l};return(l,r)=>(f(),v("div",vw,[n.value==="feed"?(f(),ye(du,{key:0,onClose:r[0]||(r[0]=c=>l.$emit("close")),onNavigate:i})):O("",!0),n.value==="post"?(f(),ye(_b,{key:1,postId:o.value?.id,onBack:r[1]||(r[1]=c=>i("feed"))},null,8,["postId"])):O("",!0),n.value==="inbox"?(f(),ye(zf,{key:2,onNavigate:i,onClose:r[2]||(r[2]=c=>l.$emit("close"))})):O("",!0),n.value==="chat"?(f(),ye(Ev,{key:3,chatId:o.value?.id,onBack:r[3]||(r[3]=c=>i("inbox")),onNavigate:i},null,8,["chatId"])):O("",!0),n.value==="chat-settings"?(f(),ye(hg,{key:4,chatId:o.value?.id,onBack:r[4]||(r[4]=c=>i("chat",{id:o.value?.id})),onNavigate:i},null,8,["chatId"])):O("",!0),n.value==="chat-settings-identity"?(f(),ye(gm,{key:5,chatId:o.value?.id,onBack:r[5]||(r[5]=c=>i("chat-settings",{id:o.value?.id}))},null,8,["chatId"])):O("",!0),n.value==="worldbook-selector"?(f(),ye(Bm,{key:6,chatId:o.value?.id,onBack:r[6]||(r[6]=c=>i("chat-settings",{id:o.value?.id}))},null,8,["chatId"])):O("",!0),n.value==="wallet"?(f(),ye(lw,{key:7,onBack:r[7]||(r[7]=c=>i("profile"))})):O("",!0),n.value==="profile"?(f(),ye(fb,{key:8,contactId:o.value?.id,onBack:r[8]||(r[8]=c=>o.value?.id?i("following"):l.$emit("close")),onNavigate:i},null,8,["contactId"])):O("",!0),n.value==="compose"?(f(),ye(mb,{key:9,onClose:r[9]||(r[9]=c=>i("feed"))})):O("",!0),n.value==="activity"?(f(),v("div",bw,[...r[23]||(r[23]=[s("span",{class:"text-zinc-400 font-serif italic text-xl"},"Coming soon...",-1)])])):O("",!0),n.value==="persona-archive"?(f(),ye(Ob,{key:11,onBack:r[10]||(r[10]=c=>i("profile")),onAdd:r[11]||(r[11]=c=>i("persona-edit")),onEdit:r[12]||(r[12]=c=>i("persona-edit",{id:c})),onSelect:r[13]||(r[13]=c=>i("profile"))})):O("",!0),n.value==="persona-edit"?(f(),ye(Jb,{key:12,personaId:o.value?.id,onBack:r[14]||(r[14]=c=>i("persona-archive")),onSave:r[15]||(r[15]=c=>i("persona-archive"))},null,8,["personaId"])):O("",!0),n.value==="following"?(f(),ye(dx,{key:13,onBack:r[16]||(r[16]=c=>i("feed")),onAdd:r[17]||(r[17]=c=>i("contact-edit")),onEdit:r[18]||(r[18]=c=>i("contact-edit",{id:c})),onNavigate:i})):O("",!0),n.value==="contact-edit"?(f(),ye($x,{key:14,contactId:o.value?.id,onBack:r[19]||(r[19]=c=>i("following")),onSave:r[20]||(r[20]=c=>i("following"))},null,8,["contactId"])):O("",!0),n.value==="relationship-network"?(f(),ye(Dh,{key:15,myPersonaId:o.value?.id,onBack:r[21]||(r[21]=c=>i("profile"))},null,8,["myPersonaId"])):O("",!0),n.value==="sticker-library"?(f(),ye(My,{key:16,onBack:r[22]||(r[22]=c=>i("profile"))})):O("",!0),["feed","inbox","profile","activity"].includes(n.value)?(f(),ye(pw,{key:17,activeTab:n.value,onChange:a},null,8,["activeTab"])):O("",!0)]))}},gw=qe(xw,[["__scopeId","data-v-f5ce889f"]]),mw={class:"h-full flex flex-col bg-white overflow-hidden"},hw={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},yw={class:"flex items-center gap-3"},ww={class:"flex-1 overflow-y-auto p-6 space-y-3 pb-12"},kw={class:"space-y-3"},_w={__name:"SettingsHome",emits:["close","navigate"],setup(e,{emit:t}){return(n,o)=>(f(),v("div",mw,[s("div",hw,[s("div",yw,[s("button",{onClick:o[0]||(o[0]=i=>n.$emit("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...o[2]||(o[2]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),o[3]||(o[3]=s("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"Settings",-1))])]),s("main",ww,[s("div",kw,[s("button",{onClick:o[1]||(o[1]=i=>n.$emit("navigate","api-setup")),class:"w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all"},[...o[4]||(o[4]=[nt('<div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>api</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501>API </span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Configure AI providers</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span>',2)])]),o[5]||(o[5]=nt('<button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>palette</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501></span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>person</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Manage personas</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>lock</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Privacy settings</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>notifications</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Notification preferences</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button>',4))]),o[6]||(o[6]=nt('<div class="mt-8" data-v-b01f0501><div class="text-[10px] text-zinc-400 uppercase tracking-widest mb-4 px-1 font-bold" data-v-b01f0501></div><div class="bg-zinc-50 rounded-2xl overflow-hidden" data-v-b01f0501><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors border-b border-zinc-100" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button></div><div class="text-center py-8" data-v-b01f0501><p class="text-[9px] font-mono uppercase tracking-[0.3em] text-zinc-300 italic" data-v-b01f0501>Settings  v2.4.0 (Build 992)</p></div></div><button class="w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors" data-v-b01f0501>  </button>',2))])]))}},zw=qe(_w,[["__scopeId","data-v-b01f0501"]]),$w={class:"h-full flex flex-col bg-white w-full relative overflow-hidden"},Cw={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Sw={class:"flex items-center gap-3"},Iw={class:"flex-1 overflow-y-auto p-6 pb-40 space-y-6"},Mw={class:"flex gap-2 overflow-x-auto no-scrollbar pb-2"},jw=["onClick"],Tw={class:"bg-zinc-50 rounded-2xl p-5"},Aw={class:"flex gap-2"},Ew={class:"bg-zinc-50 rounded-2xl p-5"},Pw={class:"flex justify-between items-center mb-4"},Ow={class:"mt-3 relative"},Nw=["value"],Rw={class:"bg-zinc-50 rounded-2xl p-5 space-y-4"},Lw={class:"relative"},Dw=["type"],Bw={class:"material-symbols-outlined text-[18px]"},Uw={class:"bg-zinc-50 rounded-2xl p-5"},Fw={class:"flex justify-between items-center mb-6"},Vw={class:"text-2xl font-semibold text-zinc-900"},Kw={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},Ww={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},Hw={class:"flex items-center gap-3"},Gw={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},qw={class:"grid grid-cols-2 gap-3"},Jw={__name:"ApiSetup",emits:["back"],setup(e,{emit:t}){const n=t,{provider:o,endpoint:i,apiKey:a,model:l,temperature:r,stream:c,modelsList:b,presetState:d,init:u,getPresetById:y,saveCurrentAsPreset:M,deleteCurrentPreset:R,fetchModels:T,commitSettings:L}=Hl(),z=Ps({provider:"openai",endpoint:"",apiKey:"",model:"",temperature:.7,stream:!1,currentPresetId:"custom"}),$=E(!1),I=E(!1),j=E(""),A=E(!1);Lt(async()=>{await u(),q()});const q=()=>{z.provider=o.value,z.endpoint=i.value,z.apiKey=a.value,z.model=l.value,z.temperature=r.value,z.stream=c.value!==void 0?c.value:!1,z.currentPresetId=d.currentPresetId},de=async()=>{await L({provider:z.provider,endpoint:z.endpoint,apiKey:z.apiKey,model:z.model,temperature:z.temperature,stream:z.stream,currentPresetId:z.currentPresetId}),n("back")},pe=async()=>{$.value=!0,await T({endpoint:z.endpoint,apiKey:z.apiKey}),$.value=!1},J=async()=>{if(j.value)try{await M(j.value,z),I.value=!1,j.value="",q()}catch(k){console.error(k),alert(": "+k)}},ne=async()=>{confirm("")&&(await R(),q())},ee=k=>{if(k==="custom"){z.currentPresetId="custom";return}const m=y(k);m&&(z.provider=m.provider,z.endpoint=m.endpoint,m.apiKey&&(z.apiKey=m.apiKey),z.model=m.model,z.temperature=m.temperature,z.stream=m.stream!==void 0?m.stream:!1,z.currentPresetId=k)},W=k=>{z.provider=k,k==="gemini"?(z.endpoint="https://generativelanguage.googleapis.com/v1beta/openai/",z.model.includes("gpt")&&(z.model="gemini-1.5-flash")):z.endpoint="https://api.openai.com/v1",z.currentPresetId!=="custom"&&(z.currentPresetId="custom")},D=()=>{A.value=!A.value};return(k,m)=>(f(),v("div",$w,[s("div",Cw,[s("div",Sw,[s("button",{onClick:m[0]||(m[0]=P=>k.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...m[14]||(m[14]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),m[15]||(m[15]=s("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"API Setup",-1))]),m[16]||(m[16]=s("div",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 transition-colors"},[s("span",{class:"material-symbols-outlined text-zinc-400 text-[20px]"},"tune")],-1))]),s("main",Iw,[s("div",Mw,[(f(!0),v(se,null,be(ct(d).list,P=>(f(),v("button",{key:P.id,onClick:V=>ee(P.id),class:K(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",z.currentPresetId===P.id?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])},C(P.name),11,jw))),128)),s("button",{onClick:m[1]||(m[1]=P=>ee("custom")),class:K(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",z.currentPresetId==="custom"?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])}," Custom ",2)]),s("div",Tw,[m[17]||(m[17]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-3 font-bold"}," / Provider",-1)),s("div",Aw,[s("button",{onClick:m[2]||(m[2]=P=>W("openai")),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",z.provider==="openai"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"OpenAI",2),s("button",{onClick:m[3]||(m[3]=P=>W("gemini")),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",z.provider==="gemini"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"Gemini",2)])]),s("div",Ew,[s("div",Pw,[m[19]||(m[19]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest font-bold"}," / Model",-1)),s("button",{onClick:pe,class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-all flex items-center gap-2"},[m[18]||(m[18]=hs("  ",-1)),s("span",{class:K(["material-symbols-outlined text-[14px]",{"animate-spin":$.value}])},"sync",2)])]),te(s("input",{"onUpdate:modelValue":m[4]||(m[4]=P=>z.model=P),class:"w-full bg-white rounded-2xl py-4 px-5 text-[15px] focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none border-none",placeholder:""},null,512),[[le,z.model]]),s("div",Ow,[te(s("select",{id:"modelSelect","onUpdate:modelValue":m[5]||(m[5]=P=>z.model=P),class:"w-full bg-white rounded-2xl py-3 px-5 text-[13px] font-medium text-zinc-600 appearance-none focus:ring-1 focus:ring-black outline-none cursor-pointer"},[(f(!0),v(se,null,be(ct(b),P=>(f(),v("option",{key:P,value:P},C(P),9,Nw))),128))],512),[[Ln,z.model]]),m[20]||(m[20]=s("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),s("div",Rw,[s("div",null,[m[21]||(m[21]=s("label",{class:"text-[10px] text-zinc-400 uppercase tracking-widest block mb-2 font-bold"}," / Endpoint",-1)),te(s("input",{"onUpdate:modelValue":m[6]||(m[6]=P=>z.endpoint=P),class:"w-full bg-white rounded-2xl py-3 px-5 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",type:"text",placeholder:"https://api.openai.com/v1"},null,512),[[le,z.endpoint]])]),s("div",null,[m[22]||(m[22]=s("label",{class:"text-[10px] text-zinc-400 uppercase tracking-widest block mb-2 font-bold"},"API  ( Key  , )",-1)),s("div",Lw,[te(s("input",{"onUpdate:modelValue":m[7]||(m[7]=P=>z.apiKey=P),type:A.value?"text":"password",class:"w-full bg-white rounded-2xl py-3 px-5 pr-12 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",placeholder:"sk-..., sk-..."},null,8,Dw),[[Md,z.apiKey]]),s("button",{onClick:D,class:"absolute right-3 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-400 hover:text-black transition-colors"},[s("span",Bw,C(A.value?"visibility_off":"visibility"),1)])])])]),s("div",Uw,[s("div",Fw,[m[23]||(m[23]=s("span",{class:"text-[10px] text-zinc-400 uppercase tracking-widest font-bold"}," / Temperature",-1)),s("span",Vw,C(z.temperature),1)]),te(s("input",{"onUpdate:modelValue":m[8]||(m[8]=P=>z.temperature=P),class:"w-full",max:"2",min:"0",step:"0.1",type:"range"},null,512),[[le,z.temperature,void 0,{number:!0}]]),m[24]||(m[24]=s("div",{class:"mt-3 flex justify-between text-[9px] font-mono uppercase text-zinc-300 tracking-widest"},[s("span",null," (0.0)"),s("span",null," (2.0)")],-1))]),s("div",Kw,[m[25]||(m[25]=s("label",{class:"text-[10px] text-zinc-400 uppercase tracking-widest font-bold"}," / Streaming",-1)),s("button",{onClick:m[9]||(m[9]=P=>z.stream=!z.stream),class:K(["w-14 h-8 rounded-full relative transition-colors duration-200",z.stream?"bg-black":"bg-zinc-200"])},[s("div",{class:K(["absolute top-1 left-1 w-6 h-6 rounded-full bg-white transition-transform duration-200 shadow-sm",z.stream?"translate-x-6":"translate-x-0"])},null,2)],2)]),s("div",Ww,[m[26]||(m[26]=s("span",{class:"text-[10px] text-zinc-400 uppercase tracking-widest font-bold"},"Preset Management",-1)),s("div",Hw,[z.currentPresetId!=="custom"?(f(),v("button",{key:0,onClick:ne,class:"px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-colors"},"  ")):O("",!0),s("button",{onClick:m[10]||(m[10]=P=>I.value=!0),class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-600 hover:bg-zinc-100 transition-colors"},"")])]),(f(),ye(mt,{to:"body"},[I.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-8 animate-in fade-in duration-200",onClick:m[13]||(m[13]=Ce(P=>I.value=!1,["self"]))},[s("div",Gw,[m[27]||(m[27]=s("div",{class:"text-center"},[s("h3",{class:"text-xl font-semibold mb-1"},"Save Preset"),s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new configuration")],-1)),te(s("input",{"onUpdate:modelValue":m[11]||(m[11]=P=>j.value=P),placeholder:"Preset Name (e.g. Coding)",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:Ms(J,["enter"])},null,544),[[le,j.value]]),s("div",qw,[s("button",{onClick:m[12]||(m[12]=P=>I.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),s("button",{onClick:J,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Save")])])])):O("",!0)])),s("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 w-[calc(100%-3rem)] max-w-sm"},[s("button",{onClick:de,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl"},[...m[28]||(m[28]=[s("span",{class:"text-[11px] uppercase tracking-[0.2em] font-bold"},"",-1),s("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])])]))}},Qw=qe(Jw,[["__scopeId","data-v-7e9b6da2"]]),Yw={class:"h-full w-full bg-background-light dark:bg-background-dark text-black dark:text-white font-sans overflow-hidden relative"},Xw={__name:"SettingsApp",emits:["close"],setup(e,{emit:t}){const n=t,o=E("home"),i=l=>{o.value=l},a=()=>{o.value==="home"?n("close"):o.value="home"};return(l,r)=>(f(),v("div",Yw,[Ke(Gs,{name:"slide"},{default:Is(()=>[o.value==="home"?(f(),ye(zw,{onClose:r[0]||(r[0]=c=>l.$emit("close")),onNavigate:i,key:"home"})):o.value==="api-setup"?(f(),ye(Qw,{onBack:a,key:"api-setup"})):O("",!0)]),_:1})]))}},Zw=qe(Xw,[["__scopeId","data-v-49131ef6"]]),e2={class:"h-full w-full bg-white flex flex-col"},t2={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},s2={class:"flex gap-2"},n2={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6 space-y-6"},o2={class:"bg-zinc-50 rounded-2xl p-5"},i2={class:"relative"},a2=["value"],l2={class:"bg-zinc-50 rounded-2xl p-5"},r2={class:"bg-zinc-50 rounded-2xl p-5"},c2={class:"flex gap-3"},d2={key:0,class:"bg-zinc-50 rounded-2xl p-5 animate-fade-in"},u2={class:"bg-zinc-50 rounded-2xl p-5"},f2={class:"flex gap-2"},p2={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},v2={class:"flex items-center gap-3"},b2={class:"text-2xl font-semibold w-12 text-center"},x2={__name:"EntryEdit",props:{entryId:{type:String,default:null},initialCategoryId:{type:String,required:!0},initialScope:{type:String,default:"global"}},emits:["back","save"],setup(e,{emit:t}){const n=e,o=t,i=Dn(),a=E(""),l=E(""),r=E(n.initialCategoryId),c=E(n.initialScope),b=E(!1),d=E(""),u=E("front"),y=E(4),M=i.getCategories(),R=!n.entryId;Lt(()=>{if(!R&&n.entryId){const z=i.getEntry(n.entryId);z&&(a.value=z.title,l.value=z.content,r.value=z.categoryId,c.value=z.scope||"global",b.value=z.isConstant,d.value=z.keywords.join(", "),u.value=z.position,y.value=z.depth)}});const T=()=>{if(!a.value.trim()||!l.value.trim())return;const z={title:a.value,content:l.value,categoryId:r.value,scope:c.value,isConstant:b.value,keywords:b.value?[]:d.value.split(",").map($=>$.trim()).filter(Boolean),position:u.value,depth:Number(y.value)};R?i.addEntry(z):n.entryId&&i.updateEntry(n.entryId,z),o("save")},L=()=>{!R&&n.entryId&&(i.deleteEntry(n.entryId),o("back"))};return(z,$)=>(f(),v("div",e2,[s("div",t2,[s("button",{onClick:$[0]||($[0]=I=>o("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...$[12]||($[12]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),s("div",s2,[R?O("",!0):(f(),v("button",{key:0,onClick:L,class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-400 hover:text-red-500 transition-colors"},[...$[13]||($[13]=[s("span",{class:"material-symbols-outlined text-[20px]"},"delete",-1)])])),$[14]||($[14]=s("button",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 transition-colors"},[s("span",{class:"material-symbols-outlined text-[20px]"},"more_horiz")],-1))])]),s("div",n2,[s("div",o2,[$[16]||($[16]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"}," / Category",-1)),s("div",i2,[te(s("select",{"onUpdate:modelValue":$[1]||($[1]=I=>r.value=I),class:"w-full text-[15px] font-medium bg-white rounded-2xl py-3 px-5 outline-none appearance-none cursor-pointer focus:ring-1 focus:ring-black border-none"},[(f(!0),v(se,null,be(ct(M),I=>(f(),v("option",{key:I.id,value:I.id},C(I.name),9,a2))),128))],512),[[Ln,r.value]]),$[15]||($[15]=s("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),s("div",null,[$[17]||($[17]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-3 font-bold px-1"}," / Title",-1)),te(s("input",{"onUpdate:modelValue":$[2]||($[2]=I=>a.value=I),type:"text",placeholder:"Enter Title",class:"w-full text-2xl font-semibold bg-transparent focus:outline-none placeholder:text-zinc-300 border-none p-0"},null,512),[[le,a.value]])]),s("div",l2,[$[18]||($[18]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-3 font-bold"}," / Content",-1)),te(s("textarea",{"onUpdate:modelValue":$[3]||($[3]=I=>l.value=I),placeholder:"Enter lore content...",class:"w-full min-h-[150px] text-[14px] leading-relaxed font-normal text-zinc-800 bg-white rounded-2xl p-4 outline-none resize-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[le,l.value]])]),s("div",r2,[$[19]||($[19]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-4 font-bold"}," / Mode",-1)),s("div",c2,[s("button",{onClick:$[4]||($[4]=I=>b.value=!1),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",b.value?"bg-white text-zinc-500 hover:bg-zinc-100":"bg-black text-white"])},"  (Trigger) ",2),s("button",{onClick:$[5]||($[5]=I=>b.value=!0),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",b.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Global) ",2)])]),b.value?O("",!0):(f(),v("div",d2,[$[20]||($[20]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"}," / Keywords",-1)),te(s("input",{"onUpdate:modelValue":$[6]||($[6]=I=>d.value=I),type:"text",placeholder:"tag1, tag2...",class:"w-full text-lg font-medium bg-white rounded-2xl py-3 px-5 outline-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[le,d.value]])])),s("div",u2,[$[21]||($[21]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-4 font-bold"}," / Injection Position",-1)),s("div",f2,[s("button",{onClick:$[7]||($[7]=I=>u.value="front"),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",u.value==="front"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Front) ",2),s("button",{onClick:$[8]||($[8]=I=>u.value="mid"),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",u.value==="mid"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Mid) ",2),s("button",{onClick:$[9]||($[9]=I=>u.value="back"),class:K(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",u.value==="back"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Back) ",2)])]),s("div",p2,[$[24]||($[24]=s("div",null,[s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-1 font-bold"}," / Logic Depth"),s("div",{class:"text-[10px] text-zinc-300 italic"},"Range: 1 - 10")],-1)),s("div",v2,[s("button",{onClick:$[10]||($[10]=I=>y.value=Math.max(1,y.value-1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...$[22]||($[22]=[s("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"remove",-1)])]),s("span",b2,C(y.value),1),s("button",{onClick:$[11]||($[11]=I=>y.value=Math.min(10,y.value+1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...$[23]||($[23]=[s("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"add",-1)])])])]),s("button",{onClick:T,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl mt-4"},[...$[25]||($[25]=[s("span",{class:"text-[11px] font-bold uppercase tracking-[0.2em]"},"Save & Sync",-1),s("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])]))}},g2=qe(x2,[["__scopeId","data-v-57fc83ba"]]),m2={class:"h-full w-full bg-white flex flex-col relative overflow-hidden"},h2={key:0,class:"absolute inset-0 z-20 bg-white"},y2={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},w2={class:"max-h-60 overflow-y-auto bg-zinc-50 rounded-2xl p-2"},k2=["onClick"],_2={key:0,class:"material-symbols-outlined text-sm"},z2={class:"grid grid-cols-2 gap-3"},$2={key:1,class:"flex flex-col h-full"},C2={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},S2={class:"flex items-center gap-3"},I2={class:"flex bg-zinc-100 rounded-full p-1"},M2={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6"},j2={key:0,class:"space-y-4"},T2={key:0,class:"animate-fade-in space-y-6"},A2={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40"},E2={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},P2={class:"space-y-4"},O2={class:"flex items-center justify-between mb-3"},N2=["onUpdate:modelValue","onChange"],R2=["onClick"],L2={class:"space-y-2"},D2=["onClick"],B2={class:"w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center"},U2={key:0,class:"w-3 h-3 bg-black rounded-full"},F2={class:"flex items-center gap-3"},V2=["disabled"],K2={key:1,class:"space-y-3"},W2=["onClick"],H2={class:"flex items-center gap-3"},G2={class:"text-[15px] font-medium text-zinc-900"},q2={class:"text-[9px] text-zinc-300 uppercase tracking-widest font-bold"},J2={key:0,class:"px-5 pb-5 pt-0 space-y-2 border-t border-zinc-100"},Q2=["onClick"],Y2={class:"font-medium text-[13px] text-zinc-800 group-hover/entry:text-black"},X2={class:"text-[11px] text-zinc-400 line-clamp-1 mt-0.5"},Z2=["onClick"],ek={class:"text-[10px] font-bold text-zinc-300 group-hover/add:text-black uppercase tracking-wider"},tk={key:1,class:"mt-2"},sk={class:"relative mb-6"},nk={class:"space-y-3"},ok=["onClick"],ik={class:"flex items-center gap-2 mb-2"},ak={class:"text-[9px] font-bold px-2 py-1 bg-white rounded-full text-zinc-500 uppercase"},lk={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},rk={class:"text-[14px] font-medium text-zinc-900 mb-1"},ck={class:"text-[12px] text-zinc-500 line-clamp-2"},dk={class:"fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur pb-[env(safe-area-inset-bottom)] pt-3 flex justify-around items-center z-10 border-t border-zinc-50"},uk={__name:"WorldBookApp",emits:["close"],setup(e,{emit:t}){const n=t,o=Dn(),i=E("home"),a=E("global"),l=E("main"),r=E(!1),c=E(""),b=E(new Set),d=E(!1),u=E(""),y=E(new Set),M=E(null),R=E(""),T=ve(()=>o.getCategories()),L=E(""),z=ve(()=>L.value?o.searchEntries(L.value):[]),$=m=>{if(r.value){J(m);return}M.value=m,R.value="",l.value="edit"},I=m=>{M.value=null,R.value=m||T.value[0]?.id,l.value="edit"},j=()=>{l.value="main",M.value=null},A=()=>{l.value="main",M.value=null},q=()=>{c.value.trim()&&(o.addCategory(c.value.trim()),c.value="")},de=m=>{confirm("Are you sure? This will delete all entries in this category.")&&o.deleteCategory(m)},pe=()=>{r.value=!r.value,r.value&&(i.value="home"),b.value.clear()},J=m=>{b.value.has(m)?b.value.delete(m):b.value.add(m),b.value=new Set(b.value)},ne=()=>{b.value.size!==0&&(u.value=T.value[0]?.id,d.value=!0)},ee=()=>{u.value&&(b.value.forEach(m=>{o.updateEntry(m,{categoryId:u.value})}),b.value.clear(),d.value=!1,r.value=!1)},W=m=>o.getEntriesByCategory(m,a.value),D=m=>{y.value.has(m)?y.value.delete(m):y.value.add(m),y.value=new Set(y.value)},k=m=>y.value.has(m);return(m,P)=>(f(),v("div",m2,[l.value==="edit"?(f(),v("div",h2,[Ke(g2,{"entry-id":M.value,"initial-category-id":R.value,"initial-scope":a.value,onBack:j,onSave:A},null,8,["entry-id","initial-category-id","initial-scope"])])):O("",!0),(f(),ye(mt,{to:"body"},[d.value?(f(),v("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:P[1]||(P[1]=Ce(V=>d.value=!1,["self"]))},[s("div",y2,[P[9]||(P[9]=s("div",{class:"text-center"},[s("h3",{class:"text-xl font-semibold mb-1"},"Move Entries"),s("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination category")],-1)),s("div",w2,[(f(!0),v(se,null,be(T.value,V=>(f(),v("button",{key:V.id,onClick:Z=>u.value=V.id,class:K(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",u.value===V.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[s("span",null,C(V.name),1),u.value===V.id?(f(),v("span",_2,"check")):O("",!0)],10,k2))),128))]),s("div",z2,[s("button",{onClick:P[0]||(P[0]=V=>d.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),s("button",{onClick:ee,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Confirm")])])])):O("",!0)])),l.value!=="edit"?(f(),v("div",$2,[s("div",C2,[s("div",S2,[s("button",{onClick:P[2]||(P[2]=V=>n("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...P[10]||(P[10]=[s("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),P[11]||(P[11]=s("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"World Book",-1))]),s("div",I2,[s("button",{onClick:P[3]||(P[3]=V=>a.value="global"),class:K(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all",a.value==="global"?"bg-black text-white":"text-zinc-500"])},"Global",2),s("button",{onClick:P[4]||(P[4]=V=>a.value="local"),class:K(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all",a.value==="local"?"bg-black text-white":"text-zinc-500"])},"Local",2)])]),s("div",M2,[i.value==="home"?(f(),v("div",j2,[r.value?(f(),v("div",T2,[b.value.size>0?(f(),v("div",A2,[s("span",E2,C(b.value.size)+" Selected",1),P[13]||(P[13]=s("div",{class:"h-4 w-px bg-white/20"},null,-1)),s("button",{onClick:ne,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...P[12]||(P[12]=[s("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),s("span",{class:"text-[11px] font-bold"},"Move",-1)])])])):O("",!0),P[16]||(P[16]=s("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest font-bold flex items-center gap-2"},[s("span",{class:"material-symbols-outlined text-[14px]"},"edit"),hs(" Manage Categories ")],-1)),s("div",P2,[(f(!0),v(se,null,be(T.value,V=>(f(),v("div",{key:V.id,class:"bg-zinc-50 rounded-2xl p-4"},[s("div",O2,[te(s("input",{"onUpdate:modelValue":Z=>V.name=Z,onChange:Z=>ct(o).updateCategory(V.id,V.name),class:"flex-grow text-[15px] font-medium bg-transparent outline-none focus:ring-0 border-none p-0"},null,40,N2),[[le,V.name]]),s("button",{onClick:Z=>de(V.id),class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors"},[...P[14]||(P[14]=[s("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])],8,R2)]),s("div",L2,[(f(!0),v(se,null,be(W(V.id),Z=>(f(),v("div",{key:Z.id,onClick:Se=>J(Z.id),class:K(["py-3 px-4 bg-white rounded-xl flex items-center gap-3 cursor-pointer transition-all",b.value.has(Z.id)?"ring-2 ring-black":"hover:bg-zinc-50"])},[s("div",B2,[b.value.has(Z.id)?(f(),v("div",U2)):O("",!0)]),s("div",{class:K(["font-medium text-[13px]",b.value.has(Z.id)?"text-black":"text-zinc-600"])},C(Z.title),3)],10,D2))),128))])]))),128)),s("div",F2,[te(s("input",{"onUpdate:modelValue":P[5]||(P[5]=V=>c.value=V),onKeyup:Ms(q,["enter"]),placeholder:"New Category...",class:"flex-grow bg-zinc-50 rounded-2xl py-3 px-5 text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none"},null,544),[[le,c.value]]),s("button",{onClick:q,class:"w-12 h-12 flex items-center justify-center bg-black text-white rounded-full hover:bg-zinc-800 transition-colors shadow-lg",disabled:!c.value.trim()},[...P[15]||(P[15]=[s("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])],8,V2)])])])):(f(),v("div",K2,[(f(!0),v(se,null,be(T.value,V=>(f(),v("div",{key:V.id,class:"bg-zinc-50 rounded-2xl overflow-hidden group"},[s("button",{onClick:Z=>D(V.id),class:"w-full flex items-center justify-between p-5 hover:bg-zinc-100 transition-colors"},[s("div",H2,[s("span",{class:K(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",k(V.id)?"rotate-90":""])},"chevron_right",2),s("h2",G2,C(V.name),1)]),s("span",q2,C(W(V.id).length)+" entries",1)],8,W2),k(V.id)?(f(),v("div",J2,[(f(!0),v(se,null,be(W(V.id),Z=>(f(),v("div",{key:Z.id,onClick:Se=>$(Z.id),class:"py-3 px-4 bg-white rounded-xl cursor-pointer hover:bg-zinc-100 transition-all group/entry"},[s("div",Y2,C(Z.title),1),s("div",X2,C(Z.content),1)],8,Q2))),128)),s("button",{onClick:Z=>I(V.id),class:"w-full py-3 border border-dashed border-zinc-200 rounded-xl flex items-center justify-center gap-2 hover:border-zinc-400 hover:bg-zinc-50 transition-all group/add"},[P[17]||(P[17]=s("span",{class:"material-symbols-outlined text-zinc-300 group-hover/add:text-black text-[16px]"},"add",-1)),s("span",ek,"Add "+C(a.value)+" Entry",1)],8,Z2)])):O("",!0)]))),128))]))])):O("",!0),i.value==="search"?(f(),v("div",tk,[s("div",sk,[P[18]||(P[18]=s("span",{class:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400"},"search",-1)),te(s("input",{"onUpdate:modelValue":P[6]||(P[6]=V=>L.value=V),type:"text",placeholder:"Search entries...",class:"w-full pl-12 pr-4 py-4 bg-zinc-50 rounded-2xl text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none",autofocus:""},null,512),[[le,L.value]])]),s("div",nk,[(f(!0),v(se,null,be(z.value,V=>(f(),v("div",{key:V.id,onClick:Z=>$(V.id),class:"bg-zinc-50 rounded-2xl p-4 cursor-pointer hover:bg-zinc-100 transition-all"},[s("div",ik,[s("span",ak,C(V.scope),1),s("span",lk,C(T.value.find(Z=>Z.id===V.categoryId)?.name),1)]),s("div",rk,C(V.title),1),s("div",ck,C(V.content),1)],8,ok))),128))])])):O("",!0)]),s("div",dk,[s("button",{onClick:pe,class:K(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",r.value?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[s("span",{class:K(["material-symbols-outlined text-[24px]",r.value?"font-variation-fill":""])},"grid_view",2)],2),s("button",{onClick:P[7]||(P[7]=V=>I()),class:"w-14 h-14 bg-black rounded-full shadow-2xl active:scale-95 transition-transform flex items-center justify-center -mt-6"},[...P[19]||(P[19]=[s("span",{class:"material-symbols-outlined text-white text-[24px]"},"add",-1)])]),s("button",{onClick:P[8]||(P[8]=V=>i.value=i.value==="search"?"home":"search"),class:K(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",i.value==="search"?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[...P[20]||(P[20]=[s("span",{class:"material-symbols-outlined text-[24px]"},"search",-1)])],2)])])):O("",!0)]))}},fk=qe(uk,[["__scopeId","data-v-87440a70"]]),pk={class:"relative h-screen w-full flex flex-col overflow-hidden bg-[#F2F2F7] font-sans text-black"},vk={class:"relative z-10 flex-grow px-5 pt-[calc(40px_+_env(safe-area-inset-top))] pb-32 overflow-y-auto no-scrollbar flex flex-col items-center gap-8"},bk={class:"w-full max-w-sm flex justify-between items-center mt-4"},xk={class:"flex flex-col gap-4"},gk={class:"flex flex-col gap-4"},mk={__name:"Desktop",emits:["open-app"],setup(e,{emit:t}){const n=t,o=()=>{n("open-app","noir")},i=()=>{n("open-app","worldbook")},a=()=>{n("open-app","settings")},l=r=>{console.log("Clicked",r)};return(r,c)=>(f(),v("div",pk,[s("div",vk,[s("div",bk,[s("div",xk,[s("button",{class:"app-pill",onClick:c[0]||(c[0]=b=>l("Music"))},[...c[4]||(c[4]=[s("span",{class:"material-symbols-outlined icon"},"headphones",-1),s("span",{class:"label"},"Music::",-1)])]),s("button",{class:"app-pill",onClick:c[1]||(c[1]=b=>l("Status"))},[...c[5]||(c[5]=[s("span",{class:"material-symbols-outlined icon fill-current"},"favorite",-1),s("span",{class:"label"},"Status",-1)])])]),c[8]||(c[8]=s("div",{class:"flex flex-col items-center gap-2 mx-2"},[s("div",{class:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-200"},[s("img",{src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover",alt:"Avatar"})]),s("div",{class:"text-[10px] text-gray-400 tracking-widest font-serif italic text-center leading-tight"}," **. ")],-1)),s("div",gk,[s("button",{class:"app-pill",onClick:c[2]||(c[2]=b=>l("Gallery"))},[...c[6]||(c[6]=[s("span",{class:"material-symbols-outlined icon"},"movie",-1),s("span",{class:"label"},"Gallery",-1)])]),s("button",{class:"app-pill",onClick:c[3]||(c[3]=b=>l("Weather"))},[...c[7]||(c[7]=[s("span",{class:"material-symbols-outlined icon"},"cloud",-1),s("span",{class:"label"},"Cloud",-1)])])])]),c[9]||(c[9]=nt('<div class="w-full max-w-sm grid grid-cols-[1.4fr_1fr] gap-4" data-v-6dbe5bb1><div class="bg-white rounded-[2rem] p-5 shadow-sm relative flex flex-col justify-between h-48 w-full" data-v-6dbe5bb1><div class="flex items-center gap-2 mb-1" data-v-6dbe5bb1><div class="w-1 h-3 bg-gray-300 rounded-full" data-v-6dbe5bb1></div><span class="text-xs text-gray-400 font-medium" data-v-6dbe5bb1>s.coups</span></div><div class="flex flex-col gap-2" data-v-6dbe5bb1><div class="flex flex-col gap-1 items-start" data-v-6dbe5bb1><span class="text-[10px] text-gray-400 ml-1" data-v-6dbe5bb1>    22:50</span></div><div class="self-end bg-[#333] text-white rounded-2xl rounded-tr-sm py-2.5 px-3 max-w-[90%] shadow-md" data-v-6dbe5bb1><span class="text-sm font-medium" data-v-6dbe5bb1></span><div class="flex justify-end items-center gap-1 mt-0.5" data-v-6dbe5bb1><span class="text-[8px] opacity-60" data-v-6dbe5bb1>jeonghan</span><span class="material-symbols-outlined text-[9px]" data-v-6dbe5bb1>done_all</span></div></div><div class="bg-gray-100/50 rounded-xl p-2 self-start max-w-[80%]" data-v-6dbe5bb1><span class="text-[9px] text-gray-500 leading-tight block" data-v-6dbe5bb1><br data-v-6dbe5bb1>  22:55</span></div></div></div><div class="grid grid-cols-2 gap-3 h-48 content-between" data-v-6dbe5bb1><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>calendar_month</span></div><span class="app-label" data-v-6dbe5bb1>Calendar</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>menu_book</span></div><span class="app-label" data-v-6dbe5bb1>WorldBook</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>pets</span></div><span class="app-label" data-v-6dbe5bb1>Pet</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>person</span></div><span class="app-label" data-v-6dbe5bb1>Me</span></button></div></div><div class="w-full max-w-sm flex justify-center gap-2 mt-4 relative h-40" data-v-6dbe5bb1><div class="polaroid rotate-[-6deg] translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/88/2c/83/882c83c21389c836dc22874136696b99.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[2deg] -translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/cf/17/dc/cf17dc13023cf8527a26f03027788484.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[8deg] translate-y-4 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/be/ab/e1/beabe17c5a08579932066d5b004278df.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption text-[8px] text-right pr-1 pt-1 opacity-50 font-serif" data-v-6dbe5bb1>~~</div></div></div>',2))]),s("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[85%] max-w-[280px] z-50"},[s("div",{class:"bg-white/80 backdrop-blur-xl border border-white/40 px-6 py-4 flex justify-between items-center shadow-lg rounded-[2.5rem]"},[s("button",{onClick:a,class:"dock-icon-btn"},[...c[10]||(c[10]=[s("span",{class:"material-symbols-outlined"},"settings",-1)])]),s("button",{onClick:i,class:"dock-icon-btn"},[...c[11]||(c[11]=[s("span",{class:"material-symbols-outlined"},"menu_book",-1)])]),s("button",{onClick:o,class:"dock-icon-btn"},[...c[12]||(c[12]=[s("span",{class:"material-symbols-outlined"},"chat_bubble",-1)])])])])]))}},hk=qe(mk,[["__scopeId","data-v-6dbe5bb1"]]),yk={class:"w-full min-h-[100dvh] relative"},wk={key:0,class:"fixed inset-0 z-50 bg-white"},kk={key:0,class:"fixed inset-0 z-50 bg-white"},_k={key:0,class:"fixed inset-0 z-50 bg-white"},zk={__name:"App",setup(e){const t=E(!1),n=E(!1),o=E(!1),i=c=>{c==="noir"?t.value=!0:c==="settings"?n.value=!0:c==="worldbook"&&(o.value=!0)},a=()=>{t.value=!1},l=()=>{n.value=!1},r=()=>{o.value=!1};return(c,b)=>(f(),v("div",yk,[!t.value&&!n.value&&!o.value?(f(),ye(hk,{key:0,onOpenApp:i})):O("",!0),Ke(Gs,{name:"app-launch"},{default:Is(()=>[t.value?(f(),v("div",wk,[Ke(gw,{onClose:a})])):O("",!0)]),_:1}),Ke(Gs,{name:"app-launch"},{default:Is(()=>[n.value?(f(),v("div",kk,[Ke(Zw,{onClose:l})])):O("",!0)]),_:1}),Ke(Gs,{name:"app-launch"},{default:Is(()=>[o.value?(f(),v("div",_k,[Ke(fk,{onClose:r})])):O("",!0)]),_:1})]))}};Nd(zk).mount("#app");
