(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function vi(e){const s=Object.create(null);for(const n of e.split(","))s[n]=1;return n=>n in s}const nt={},En=[],$s=()=>{},nr=()=>!1,ol=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),xi=e=>e.startsWith("onUpdate:"),It=Object.assign,bi=(e,s)=>{const n=e.indexOf(s);n>-1&&e.splice(n,1)},xd=Object.prototype.hasOwnProperty,Qe=(e,s)=>xd.call(e,s),Ie=Array.isArray,jn=e=>go(e)==="[object Map]",Bn=e=>go(e)==="[object Set]",ta=e=>go(e)==="[object Date]",Re=e=>typeof e=="function",mt=e=>typeof e=="string",Ss=e=>typeof e=="symbol",tt=e=>e!==null&&typeof e=="object",or=e=>(tt(e)||Re(e))&&Re(e.then)&&Re(e.catch),lr=Object.prototype.toString,go=e=>lr.call(e),bd=e=>go(e).slice(8,-1),ir=e=>go(e)==="[object Object]",ll=e=>mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,so=vi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),il=e=>{const s=Object.create(null);return(n=>s[n]||(s[n]=e(n)))},md=/-\w/g,on=il(e=>e.replace(md,s=>s.slice(1).toUpperCase())),gd=/\B([A-Z])/g,rn=il(e=>e.replace(gd,"-$1").toLowerCase()),ar=il(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ol=il(e=>e?`on${ar(e)}`:""),sn=(e,s)=>!Object.is(e,s),Vo=(e,...s)=>{for(let n=0;n<e.length;n++)e[n](...s)},rr=(e,s,n,o=!1)=>{Object.defineProperty(e,s,{configurable:!0,enumerable:!1,writable:o,value:n})},al=e=>{const s=parseFloat(e);return isNaN(s)?e:s},hd=e=>{const s=mt(e)?Number(e):NaN;return isNaN(s)?e:s};let sa;const rl=()=>sa||(sa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ve(e){if(Ie(e)){const s={};for(let n=0;n<e.length;n++){const o=e[n],l=mt(o)?_d(o):Ve(o);if(l)for(const i in l)s[i]=l[i]}return s}else if(mt(e)||tt(e))return e}const yd=/;(?![^(]*\))/g,wd=/:([^]+)/,kd=/\/\*[^]*?\*\//g;function _d(e){const s={};return e.replace(kd,"").split(yd).forEach(n=>{if(n){const o=n.split(wd);o.length>1&&(s[o[0].trim()]=o[1].trim())}}),s}function W(e){let s="";if(mt(e))s=e;else if(Ie(e))for(let n=0;n<e.length;n++){const o=W(e[n]);o&&(s+=o+" ")}else if(tt(e))for(const n in e)e[n]&&(s+=n+" ");return s.trim()}const zd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$d=vi(zd);function cr(e){return!!e||e===""}function Cd(e,s){if(e.length!==s.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=yn(e[o],s[o]);return n}function yn(e,s){if(e===s)return!0;let n=ta(e),o=ta(s);if(n||o)return n&&o?e.getTime()===s.getTime():!1;if(n=Ss(e),o=Ss(s),n||o)return e===s;if(n=Ie(e),o=Ie(s),n||o)return n&&o?Cd(e,s):!1;if(n=tt(e),o=tt(s),n||o){if(!n||!o)return!1;const l=Object.keys(e).length,i=Object.keys(s).length;if(l!==i)return!1;for(const a in e){const r=e.hasOwnProperty(a),p=s.hasOwnProperty(a);if(r&&!p||!r&&p||!yn(e[a],s[a]))return!1}}return String(e)===String(s)}function mi(e,s){return e.findIndex(n=>yn(n,s))}const dr=e=>!!(e&&e.__v_isRef===!0),w=e=>mt(e)?e:e==null?"":Ie(e)||tt(e)&&(e.toString===lr||!Re(e.toString))?dr(e)?w(e.value):JSON.stringify(e,ur,2):String(e),ur=(e,s)=>dr(s)?ur(e,s.value):jn(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((n,[o,l],i)=>(n[Pl(o,i)+" =>"]=l,n),{})}:Bn(s)?{[`Set(${s.size})`]:[...s.values()].map(n=>Pl(n))}:Ss(s)?Pl(s):tt(s)&&!Ie(s)&&!ir(s)?String(s):s,Pl=(e,s="")=>{var n;return Ss(e)?`Symbol(${(n=e.description)!=null?n:s})`:e};let es;class Sd{constructor(s=!1){this.detached=s,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=es,!s&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].pause();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,n;if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].resume();for(s=0,n=this.effects.length;s<n;s++)this.effects[s].resume()}}run(s){if(this._active){const n=es;try{return es=this,s()}finally{es=n}}}on(){++this._on===1&&(this.prevScope=es,es=this)}off(){this._on>0&&--this._on===0&&(es=this.prevScope,this.prevScope=void 0)}stop(s){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function Id(){return es}let it;const Rl=new WeakSet;class pr{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,es&&es.active&&es.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rl.has(this)&&(Rl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vr(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,na(this),xr(this);const s=it,n=vs;it=this,vs=!0;try{return this.fn()}finally{br(this),it=s,vs=n,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)yi(s);this.deps=this.depsTail=void 0,na(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yl(this)&&this.run()}get dirty(){return Yl(this)}}let fr=0,no,oo;function vr(e,s=!1){if(e.flags|=8,s){e.next=oo,oo=e;return}e.next=no,no=e}function gi(){fr++}function hi(){if(--fr>0)return;if(oo){let s=oo;for(oo=void 0;s;){const n=s.next;s.next=void 0,s.flags&=-9,s=n}}let e;for(;no;){let s=no;for(no=void 0;s;){const n=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(o){e||(e=o)}s=n}}if(e)throw e}function xr(e){for(let s=e.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function br(e){let s,n=e.depsTail,o=n;for(;o;){const l=o.prevDep;o.version===-1?(o===n&&(n=l),yi(o),Md(o)):s=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=l}e.deps=s,e.depsTail=n}function Yl(e){for(let s=e.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(mr(s.dep.computed)||s.dep.version!==s.version))return!0;return!!e._dirty}function mr(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===uo)||(e.globalVersion=uo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Yl(e))))return;e.flags|=2;const s=e.dep,n=it,o=vs;it=e,vs=!0;try{xr(e);const l=e.fn(e._value);(s.version===0||sn(l,e._value))&&(e.flags|=128,e._value=l,s.version++)}catch(l){throw s.version++,l}finally{it=n,vs=o,br(e),e.flags&=-3}}function yi(e,s=!1){const{dep:n,prevSub:o,nextSub:l}=e;if(o&&(o.nextSub=l,e.prevSub=void 0),l&&(l.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)yi(i,!0)}!s&&!--n.sc&&n.map&&n.map.delete(n.key)}function Md(e){const{prevDep:s,nextDep:n}=e;s&&(s.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=s,e.nextDep=void 0)}let vs=!0;const gr=[];function Fs(){gr.push(vs),vs=!1}function Ws(){const e=gr.pop();vs=e===void 0?!0:e}function na(e){const{cleanup:s}=e;if(e.cleanup=void 0,s){const n=it;it=void 0;try{s()}finally{it=n}}}let uo=0;class Td{constructor(s,n){this.sub=s,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wi{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(s){if(!it||!vs||it===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==it)n=this.activeLink=new Td(it,this),it.deps?(n.prevDep=it.depsTail,it.depsTail.nextDep=n,it.depsTail=n):it.deps=it.depsTail=n,hr(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=it.depsTail,n.nextDep=void 0,it.depsTail.nextDep=n,it.depsTail=n,it.deps===n&&(it.deps=o)}return n}trigger(s){this.version++,uo++,this.notify(s)}notify(s){gi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{hi()}}}function hr(e){if(e.dep.sc++,e.sub.flags&4){const s=e.dep.computed;if(s&&!e.dep.subs){s.flags|=20;for(let o=s.deps;o;o=o.nextDep)hr(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Go=new WeakMap,gn=Symbol(""),Jl=Symbol(""),po=Symbol("");function Nt(e,s,n){if(vs&&it){let o=Go.get(e);o||Go.set(e,o=new Map);let l=o.get(n);l||(o.set(n,l=new wi),l.map=o,l.key=n),l.track()}}function Vs(e,s,n,o,l,i){const a=Go.get(e);if(!a){uo++;return}const r=p=>{p&&p.trigger()};if(gi(),s==="clear")a.forEach(r);else{const p=Ie(e),b=p&&ll(n);if(p&&n==="length"){const u=Number(o);a.forEach((v,g)=>{(g==="length"||g===po||!Ss(g)&&g>=u)&&r(v)})}else switch((n!==void 0||a.has(void 0))&&r(a.get(n)),b&&r(a.get(po)),s){case"add":p?b&&r(a.get("length")):(r(a.get(gn)),jn(e)&&r(a.get(Jl)));break;case"delete":p||(r(a.get(gn)),jn(e)&&r(a.get(Jl)));break;case"set":jn(e)&&r(a.get(gn));break}}hi()}function Ed(e,s){const n=Go.get(e);return n&&n.get(s)}function Mn(e){const s=Ne(e);return s===e?s:(Nt(s,"iterate",po),is(e)?s:s.map(bs))}function cl(e){return Nt(e=Ne(e),"iterate",po),e}function Zs(e,s){return Hs(e)?Rn(hn(e)?bs(s):s):bs(s)}const jd={__proto__:null,[Symbol.iterator](){return Nl(this,Symbol.iterator,e=>Zs(this,e))},concat(...e){return Mn(this).concat(...e.map(s=>Ie(s)?Mn(s):s))},entries(){return Nl(this,"entries",e=>(e[1]=Zs(this,e[1]),e))},every(e,s){return Rs(this,"every",e,s,void 0,arguments)},filter(e,s){return Rs(this,"filter",e,s,n=>n.map(o=>Zs(this,o)),arguments)},find(e,s){return Rs(this,"find",e,s,n=>Zs(this,n),arguments)},findIndex(e,s){return Rs(this,"findIndex",e,s,void 0,arguments)},findLast(e,s){return Rs(this,"findLast",e,s,n=>Zs(this,n),arguments)},findLastIndex(e,s){return Rs(this,"findLastIndex",e,s,void 0,arguments)},forEach(e,s){return Rs(this,"forEach",e,s,void 0,arguments)},includes(...e){return Ll(this,"includes",e)},indexOf(...e){return Ll(this,"indexOf",e)},join(e){return Mn(this).join(e)},lastIndexOf(...e){return Ll(this,"lastIndexOf",e)},map(e,s){return Rs(this,"map",e,s,void 0,arguments)},pop(){return Jn(this,"pop")},push(...e){return Jn(this,"push",e)},reduce(e,...s){return oa(this,"reduce",e,s)},reduceRight(e,...s){return oa(this,"reduceRight",e,s)},shift(){return Jn(this,"shift")},some(e,s){return Rs(this,"some",e,s,void 0,arguments)},splice(...e){return Jn(this,"splice",e)},toReversed(){return Mn(this).toReversed()},toSorted(e){return Mn(this).toSorted(e)},toSpliced(...e){return Mn(this).toSpliced(...e)},unshift(...e){return Jn(this,"unshift",e)},values(){return Nl(this,"values",e=>Zs(this,e))}};function Nl(e,s,n){const o=cl(e),l=o[s]();return o!==e&&!is(e)&&(l._next=l.next,l.next=()=>{const i=l._next();return i.done||(i.value=n(i.value)),i}),l}const Ad=Array.prototype;function Rs(e,s,n,o,l,i){const a=cl(e),r=a!==e&&!is(e),p=a[s];if(p!==Ad[s]){const v=p.apply(e,i);return r?bs(v):v}let b=n;a!==e&&(r?b=function(v,g){return n.call(this,Zs(e,v),g,e)}:n.length>2&&(b=function(v,g){return n.call(this,v,g,e)}));const u=p.call(a,b,o);return r&&l?l(u):u}function oa(e,s,n,o){const l=cl(e);let i=n;return l!==e&&(is(e)?n.length>3&&(i=function(a,r,p){return n.call(this,a,r,p,e)}):i=function(a,r,p){return n.call(this,a,Zs(e,r),p,e)}),l[s](i,...o)}function Ll(e,s,n){const o=Ne(e);Nt(o,"iterate",po);const l=o[s](...n);return(l===-1||l===!1)&&dl(n[0])?(n[0]=Ne(n[0]),o[s](...n)):l}function Jn(e,s,n=[]){Fs(),gi();const o=Ne(e)[s].apply(e,n);return hi(),Ws(),o}const Od=vi("__proto__,__v_isRef,__isVue"),yr=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ss));function Pd(e){Ss(e)||(e=String(e));const s=Ne(this);return Nt(s,"has",e),s.hasOwnProperty(e)}class wr{constructor(s=!1,n=!1){this._isReadonly=s,this._isShallow=n}get(s,n,o){if(n==="__v_skip")return s.__v_skip;const l=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!l;if(n==="__v_isReadonly")return l;if(n==="__v_isShallow")return i;if(n==="__v_raw")return o===(l?i?Kd:$r:i?zr:_r).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(o)?s:void 0;const a=Ie(s);if(!l){let p;if(a&&(p=jd[n]))return p;if(n==="hasOwnProperty")return Pd}const r=Reflect.get(s,n,Et(s)?s:o);if((Ss(n)?yr.has(n):Od(n))||(l||Nt(s,"get",n),i))return r;if(Et(r)){const p=a&&ll(n)?r:r.value;return l&&tt(p)?Ql(p):p}return tt(r)?l?Ql(r):Ks(r):r}}class kr extends wr{constructor(s=!1){super(!1,s)}set(s,n,o,l){let i=s[n];const a=Ie(s)&&ll(n);if(!this._isShallow){const b=Hs(i);if(!is(o)&&!Hs(o)&&(i=Ne(i),o=Ne(o)),!a&&Et(i)&&!Et(o))return b||(i.value=o),!0}const r=a?Number(n)<s.length:Qe(s,n),p=Reflect.set(s,n,o,Et(s)?s:l);return s===Ne(l)&&(r?sn(o,i)&&Vs(s,"set",n,o):Vs(s,"add",n,o)),p}deleteProperty(s,n){const o=Qe(s,n);s[n];const l=Reflect.deleteProperty(s,n);return l&&o&&Vs(s,"delete",n,void 0),l}has(s,n){const o=Reflect.has(s,n);return(!Ss(n)||!yr.has(n))&&Nt(s,"has",n),o}ownKeys(s){return Nt(s,"iterate",Ie(s)?"length":gn),Reflect.ownKeys(s)}}class Rd extends wr{constructor(s=!1){super(!0,s)}set(s,n){return!0}deleteProperty(s,n){return!0}}const Nd=new kr,Ld=new Rd,Dd=new kr(!0);const Xl=e=>e,jo=e=>Reflect.getPrototypeOf(e);function Vd(e,s,n){return function(...o){const l=this.__v_raw,i=Ne(l),a=jn(i),r=e==="entries"||e===Symbol.iterator&&a,p=e==="keys"&&a,b=l[e](...o),u=n?Xl:s?Rn:bs;return!s&&Nt(i,"iterate",p?Jl:gn),It(Object.create(b),{next(){const{value:v,done:g}=b.next();return g?{value:v,done:g}:{value:r?[u(v[0]),u(v[1])]:u(v),done:g}}})}}function Ao(e){return function(...s){return e==="delete"?!1:e==="clear"?void 0:this}}function Bd(e,s){const n={get(l){const i=this.__v_raw,a=Ne(i),r=Ne(l);e||(sn(l,r)&&Nt(a,"get",l),Nt(a,"get",r));const{has:p}=jo(a),b=s?Xl:e?Rn:bs;if(p.call(a,l))return b(i.get(l));if(p.call(a,r))return b(i.get(r));i!==a&&i.get(l)},get size(){const l=this.__v_raw;return!e&&Nt(Ne(l),"iterate",gn),l.size},has(l){const i=this.__v_raw,a=Ne(i),r=Ne(l);return e||(sn(l,r)&&Nt(a,"has",l),Nt(a,"has",r)),l===r?i.has(l):i.has(l)||i.has(r)},forEach(l,i){const a=this,r=a.__v_raw,p=Ne(r),b=s?Xl:e?Rn:bs;return!e&&Nt(p,"iterate",gn),r.forEach((u,v)=>l.call(i,b(u),b(v),a))}};return It(n,e?{add:Ao("add"),set:Ao("set"),delete:Ao("delete"),clear:Ao("clear")}:{add(l){!s&&!is(l)&&!Hs(l)&&(l=Ne(l));const i=Ne(this);return jo(i).has.call(i,l)||(i.add(l),Vs(i,"add",l,l)),this},set(l,i){!s&&!is(i)&&!Hs(i)&&(i=Ne(i));const a=Ne(this),{has:r,get:p}=jo(a);let b=r.call(a,l);b||(l=Ne(l),b=r.call(a,l));const u=p.call(a,l);return a.set(l,i),b?sn(i,u)&&Vs(a,"set",l,i):Vs(a,"add",l,i),this},delete(l){const i=Ne(this),{has:a,get:r}=jo(i);let p=a.call(i,l);p||(l=Ne(l),p=a.call(i,l)),r&&r.call(i,l);const b=i.delete(l);return p&&Vs(i,"delete",l,void 0),b},clear(){const l=Ne(this),i=l.size!==0,a=l.clear();return i&&Vs(l,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(l=>{n[l]=Vd(l,e,s)}),n}function ki(e,s){const n=Bd(e,s);return(o,l,i)=>l==="__v_isReactive"?!e:l==="__v_isReadonly"?e:l==="__v_raw"?o:Reflect.get(Qe(n,l)&&l in o?n:o,l,i)}const Ud={get:ki(!1,!1)},Fd={get:ki(!1,!0)},Wd={get:ki(!0,!1)};const _r=new WeakMap,zr=new WeakMap,$r=new WeakMap,Kd=new WeakMap;function Hd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gd(e){return e.__v_skip||!Object.isExtensible(e)?0:Hd(bd(e))}function Ks(e){return Hs(e)?e:_i(e,!1,Nd,Ud,_r)}function qd(e){return _i(e,!1,Dd,Fd,zr)}function Ql(e){return _i(e,!0,Ld,Wd,$r)}function _i(e,s,n,o,l){if(!tt(e)||e.__v_raw&&!(s&&e.__v_isReactive))return e;const i=Gd(e);if(i===0)return e;const a=l.get(e);if(a)return a;const r=new Proxy(e,i===2?o:n);return l.set(e,r),r}function hn(e){return Hs(e)?hn(e.__v_raw):!!(e&&e.__v_isReactive)}function Hs(e){return!!(e&&e.__v_isReadonly)}function is(e){return!!(e&&e.__v_isShallow)}function dl(e){return e?!!e.__v_raw:!1}function Ne(e){const s=e&&e.__v_raw;return s?Ne(s):e}function Yd(e){return!Qe(e,"__v_skip")&&Object.isExtensible(e)&&rr(e,"__v_skip",!0),e}const bs=e=>tt(e)?Ks(e):e,Rn=e=>tt(e)?Ql(e):e;function Et(e){return e?e.__v_isRef===!0:!1}function C(e){return Jd(e,!1)}function Jd(e,s){return Et(e)?e:new Xd(e,s)}class Xd{constructor(s,n){this.dep=new wi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?s:Ne(s),this._value=n?s:bs(s),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(s){const n=this._rawValue,o=this.__v_isShallow||is(s)||Hs(s);s=o?s:Ne(s),sn(s,n)&&(this._rawValue=s,this._value=o?s:bs(s),this.dep.trigger())}}function at(e){return Et(e)?e.value:e}const Qd={get:(e,s,n)=>s==="__v_raw"?e:at(Reflect.get(e,s,n)),set:(e,s,n,o)=>{const l=e[s];return Et(l)&&!Et(n)?(l.value=n,!0):Reflect.set(e,s,n,o)}};function Cr(e){return hn(e)?e:new Proxy(e,Qd)}function Zd(e){const s=Ie(e)?new Array(e.length):{};for(const n in e)s[n]=tu(e,n);return s}class eu{constructor(s,n,o){this._object=s,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=Ne(s);let l=!0,i=s;if(!Ie(s)||!ll(String(n)))do l=!dl(i)||is(i);while(l&&(i=i.__v_raw));this._shallow=l}get value(){let s=this._object[this._key];return this._shallow&&(s=at(s)),this._value=s===void 0?this._defaultValue:s}set value(s){if(this._shallow&&Et(this._raw[this._key])){const n=this._object[this._key];if(Et(n)){n.value=s;return}}this._object[this._key]=s}get dep(){return Ed(this._raw,this._key)}}function tu(e,s,n){return new eu(e,s,n)}class su{constructor(s,n,o){this.fn=s,this.setter=n,this._value=void 0,this.dep=new wi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=uo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return vr(this,!0),!0}get value(){const s=this.dep.track();return mr(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function nu(e,s,n=!1){let o,l;return Re(e)?o=e:(o=e.get,l=e.set),new su(o,l,n)}const Oo={},qo=new WeakMap;let bn;function ou(e,s=!1,n=bn){if(n){let o=qo.get(n);o||qo.set(n,o=[]),o.push(e)}}function lu(e,s,n=nt){const{immediate:o,deep:l,once:i,scheduler:a,augmentJob:r,call:p}=n,b=O=>l?O:is(O)||l===!1||l===0?Bs(O,1):Bs(O);let u,v,g,j,U=!1,N=!1;if(Et(e)?(v=()=>e.value,U=is(e)):hn(e)?(v=()=>b(e),U=!0):Ie(e)?(N=!0,U=e.some(O=>hn(O)||is(O)),v=()=>e.map(O=>{if(Et(O))return O.value;if(hn(O))return b(O);if(Re(O))return p?p(O,2):O()})):Re(e)?s?v=p?()=>p(e,2):e:v=()=>{if(g){Fs();try{g()}finally{Ws()}}const O=bn;bn=u;try{return p?p(e,3,[j]):e(j)}finally{bn=O}}:v=$s,s&&l){const O=v,A=l===!0?1/0:l;v=()=>Bs(O(),A)}const L=Id(),S=()=>{u.stop(),L&&L.active&&bi(L.effects,u)};if(i&&s){const O=s;s=(...A)=>{O(...A),S()}}let E=N?new Array(e.length).fill(Oo):Oo;const T=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(s){const A=u.run();if(l||U||(N?A.some((R,Y)=>sn(R,E[Y])):sn(A,E))){g&&g();const R=bn;bn=u;try{const Y=[A,E===Oo?void 0:N&&E[0]===Oo?[]:E,j];E=A,p?p(s,3,Y):s(...Y)}finally{bn=R}}}else u.run()};return r&&r(T),u=new pr(v),u.scheduler=a?()=>a(T,!1):T,j=O=>ou(O,!1,u),g=u.onStop=()=>{const O=qo.get(u);if(O){if(p)p(O,4);else for(const A of O)A();qo.delete(u)}},s?o?T(!0):E=u.run():a?a(T.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Bs(e,s=1/0,n){if(s<=0||!tt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=s))return e;if(n.set(e,s),s--,Et(e))Bs(e.value,s,n);else if(Ie(e))for(let o=0;o<e.length;o++)Bs(e[o],s,n);else if(Bn(e)||jn(e))e.forEach(o=>{Bs(o,s,n)});else if(ir(e)){for(const o in e)Bs(e[o],s,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Bs(e[o],s,n)}return e}function ho(e,s,n,o){try{return o?e(...o):e()}catch(l){ul(l,s,n)}}function ms(e,s,n,o){if(Re(e)){const l=ho(e,s,n,o);return l&&or(l)&&l.catch(i=>{ul(i,s,n)}),l}if(Ie(e)){const l=[];for(let i=0;i<e.length;i++)l.push(ms(e[i],s,n,o));return l}}function ul(e,s,n,o=!0){const l=s?s.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=s&&s.appContext.config||nt;if(s){let r=s.parent;const p=s.proxy,b=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const u=r.ec;if(u){for(let v=0;v<u.length;v++)if(u[v](e,p,b)===!1)return}r=r.parent}if(i){Fs(),ho(i,null,10,[e,p,b]),Ws();return}}iu(e,n,l,o,a)}function iu(e,s,n,o=!0,l=!1){if(l)throw e;console.error(e)}const Wt=[];let ks=-1;const An=[];let en=null,Tn=0;const Sr=Promise.resolve();let Yo=null;function _s(e){const s=Yo||Sr;return e?s.then(this?e.bind(this):e):s}function au(e){let s=ks+1,n=Wt.length;for(;s<n;){const o=s+n>>>1,l=Wt[o],i=fo(l);i<e||i===e&&l.flags&2?s=o+1:n=o}return s}function zi(e){if(!(e.flags&1)){const s=fo(e),n=Wt[Wt.length-1];!n||!(e.flags&2)&&s>=fo(n)?Wt.push(e):Wt.splice(au(s),0,e),e.flags|=1,Ir()}}function Ir(){Yo||(Yo=Sr.then(Tr))}function ru(e){Ie(e)?An.push(...e):en&&e.id===-1?en.splice(Tn+1,0,e):e.flags&1||(An.push(e),e.flags|=1),Ir()}function la(e,s,n=ks+1){for(;n<Wt.length;n++){const o=Wt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;Wt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Mr(e){if(An.length){const s=[...new Set(An)].sort((n,o)=>fo(n)-fo(o));if(An.length=0,en){en.push(...s);return}for(en=s,Tn=0;Tn<en.length;Tn++){const n=en[Tn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}en=null,Tn=0}}const fo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Tr(e){try{for(ks=0;ks<Wt.length;ks++){const s=Wt[ks];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),ho(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;ks<Wt.length;ks++){const s=Wt[ks];s&&(s.flags&=-2)}ks=-1,Wt.length=0,Mr(),Yo=null,(Wt.length||An.length)&&Tr()}}let cs=null,Er=null;function Jo(e){const s=cs;return cs=e,Er=e&&e.type.__scopeId||null,s}function Cs(e,s=cs,n){if(!s||e._n)return e;const o=(...l)=>{o._d&&Zo(-1);const i=Jo(s);let a;try{a=e(...l)}finally{Jo(i),o._d&&Zo(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function ie(e,s){if(cs===null)return e;const n=bl(cs),o=e.dirs||(e.dirs=[]);for(let l=0;l<s.length;l++){let[i,a,r,p=nt]=s[l];i&&(Re(i)&&(i={mounted:i,updated:i}),i.deep&&Bs(a),o.push({dir:i,instance:n,value:a,oldValue:void 0,arg:r,modifiers:p}))}return e}function fn(e,s,n,o){const l=e.dirs,i=s&&s.dirs;for(let a=0;a<l.length;a++){const r=l[a];i&&(r.oldValue=i[a].value);let p=r.dir[o];p&&(Fs(),ms(p,n,8,[e.el,r,e,s]),Ws())}}function cu(e,s){if(Ht){let n=Ht.provides;const o=Ht.parent&&Ht.parent.provides;o===n&&(n=Ht.provides=Object.create(o)),n[e]=s}}function Bo(e,s,n=!1){const o=Ei();if(o||On){let l=On?On._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(l&&e in l)return l[e];if(arguments.length>1)return n&&Re(s)?s.call(o&&o.proxy):s}}const du=Symbol.for("v-scx"),uu=()=>Bo(du);function ds(e,s,n){return jr(e,s,n)}function jr(e,s,n=nt){const{immediate:o,deep:l,flush:i,once:a}=n,r=It({},n),p=s&&o||!s&&i!=="post";let b;if(bo){if(i==="sync"){const j=uu();b=j.__watcherHandles||(j.__watcherHandles=[])}else if(!p){const j=()=>{};return j.stop=$s,j.resume=$s,j.pause=$s,j}}const u=Ht;r.call=(j,U,N)=>ms(j,u,U,N);let v=!1;i==="post"?r.scheduler=j=>{Ft(j,u&&u.suspense)}:i!=="sync"&&(v=!0,r.scheduler=(j,U)=>{U?j():zi(j)}),r.augmentJob=j=>{s&&(j.flags|=4),v&&(j.flags|=2,u&&(j.id=u.uid,j.i=u))};const g=lu(e,s,r);return bo&&(b?b.push(g):p&&g()),g}function pu(e,s,n){const o=this.proxy,l=mt(e)?e.includes(".")?Ar(o,e):()=>o[e]:e.bind(o,o);let i;Re(s)?i=s:(i=s.handler,n=s);const a=yo(this),r=jr(l,i.bind(o),n);return a(),r}function Ar(e,s){const n=s.split(".");return()=>{let o=e;for(let l=0;l<n.length&&o;l++)o=o[n[l]];return o}}const Or=Symbol("_vte"),Pr=e=>e.__isTeleport,lo=e=>e&&(e.disabled||e.disabled===""),ia=e=>e&&(e.defer||e.defer===""),aa=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ra=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Zl=(e,s)=>{const n=e&&e.to;return mt(n)?s?s(n):null:n},Rr={name:"Teleport",__isTeleport:!0,process(e,s,n,o,l,i,a,r,p,b){const{mc:u,pc:v,pbc:g,o:{insert:j,querySelector:U,createText:N,createComment:L}}=b,S=lo(s.props);let{shapeFlag:E,children:T,dynamicChildren:O}=s;if(e==null){const A=s.el=N(""),R=s.anchor=N("");j(A,n,o),j(R,n,o);const Y=(ce,ze)=>{E&16&&u(T,ce,ze,l,i,a,r,p)},we=()=>{const ce=s.target=Zl(s.props,U),ze=Nr(ce,s,N,j);ce&&(a!=="svg"&&aa(ce)?a="svg":a!=="mathml"&&ra(ce)&&(a="mathml"),l&&l.isCE&&(l.ce._teleportTargets||(l.ce._teleportTargets=new Set)).add(ce),S||(Y(ce,ze),Uo(s,!1)))};S&&(Y(n,R),Uo(s,!0)),ia(s.props)?(s.el.__isMounted=!1,Ft(()=>{we(),delete s.el.__isMounted},i)):we()}else{if(ia(s.props)&&e.el.__isMounted===!1){Ft(()=>{Rr.process(e,s,n,o,l,i,a,r,p,b)},i);return}s.el=e.el,s.targetStart=e.targetStart;const A=s.anchor=e.anchor,R=s.target=e.target,Y=s.targetAnchor=e.targetAnchor,we=lo(e.props),ce=we?n:R,ze=we?A:Y;if(a==="svg"||aa(R)?a="svg":(a==="mathml"||ra(R))&&(a="mathml"),O?(g(e.dynamicChildren,O,ce,l,i,a,r),Mi(e,s,!0)):p||v(e,s,ce,ze,l,i,a,r,!1),S)we?s.props&&e.props&&s.props.to!==e.props.to&&(s.props.to=e.props.to):Po(s,n,A,b,1);else if((s.props&&s.props.to)!==(e.props&&e.props.to)){const Ee=s.target=Zl(s.props,U);Ee&&Po(s,Ee,null,b,0)}else we&&Po(s,R,Y,b,1);Uo(s,S)}},remove(e,s,n,{um:o,o:{remove:l}},i){const{shapeFlag:a,children:r,anchor:p,targetStart:b,targetAnchor:u,target:v,props:g}=e;if(v&&(l(b),l(u)),i&&l(p),a&16){const j=i||!lo(g);for(let U=0;U<r.length;U++){const N=r[U];o(N,s,n,j,!!N.dynamicChildren)}}},move:Po,hydrate:fu};function Po(e,s,n,{o:{insert:o},m:l},i=2){i===0&&o(e.targetAnchor,s,n);const{el:a,anchor:r,shapeFlag:p,children:b,props:u}=e,v=i===2;if(v&&o(a,s,n),(!v||lo(u))&&p&16)for(let g=0;g<b.length;g++)l(b[g],s,n,2);v&&o(r,s,n)}function fu(e,s,n,o,l,i,{o:{nextSibling:a,parentNode:r,querySelector:p,insert:b,createText:u}},v){function g(N,L,S,E){L.anchor=v(a(N),L,r(N),n,o,l,i),L.targetStart=S,L.targetAnchor=E}const j=s.target=Zl(s.props,p),U=lo(s.props);if(j){const N=j._lpa||j.firstChild;if(s.shapeFlag&16)if(U)g(e,s,N,N&&a(N));else{s.anchor=a(e);let L=N;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")s.targetStart=L;else if(L.data==="teleport anchor"){s.targetAnchor=L,j._lpa=s.targetAnchor&&a(s.targetAnchor);break}}L=a(L)}s.targetAnchor||Nr(j,s,u,b),v(N&&a(N),s,j,n,o,l,i)}Uo(s,U)}else U&&s.shapeFlag&16&&g(e,s,e,a(e));return s.anchor&&a(s.anchor)}const ft=Rr;function Uo(e,s){const n=e.ctx;if(n&&n.ut){let o,l;for(s?(o=e.el,l=e.anchor):(o=e.targetStart,l=e.targetAnchor);o&&o!==l;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Nr(e,s,n,o){const l=s.targetStart=n(""),i=s.targetAnchor=n("");return l[Or]=i,e&&(o(l,e),o(i,e)),i}const Ls=Symbol("_leaveCb"),Ro=Symbol("_enterCb");function Lr(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Dt(()=>{e.isMounted=!0}),Hr(()=>{e.isUnmounting=!0}),e}const rs=[Function,Array],Dr={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:rs,onEnter:rs,onAfterEnter:rs,onEnterCancelled:rs,onBeforeLeave:rs,onLeave:rs,onAfterLeave:rs,onLeaveCancelled:rs,onBeforeAppear:rs,onAppear:rs,onAfterAppear:rs,onAppearCancelled:rs},Vr=e=>{const s=e.subTree;return s.component?Vr(s.component):s},vu={name:"BaseTransition",props:Dr,setup(e,{slots:s}){const n=Ei(),o=Lr();return()=>{const l=s.default&&$i(s.default(),!0);if(!l||!l.length)return;const i=Br(l),a=Ne(e),{mode:r}=a;if(o.isLeaving)return Dl(i);const p=ca(i);if(!p)return Dl(i);let b=vo(p,a,o,n,v=>b=v);p.type!==Kt&&wn(p,b);let u=n.subTree&&ca(n.subTree);if(u&&u.type!==Kt&&!mn(u,p)&&Vr(n).type!==Kt){let v=vo(u,a,o,n);if(wn(u,v),r==="out-in"&&p.type!==Kt)return o.isLeaving=!0,v.afterLeave=()=>{o.isLeaving=!1,n.job.flags&8||n.update(),delete v.afterLeave,u=void 0},Dl(i);r==="in-out"&&p.type!==Kt?v.delayLeave=(g,j,U)=>{const N=Ur(o,u);N[String(u.key)]=u,g[Ls]=()=>{j(),g[Ls]=void 0,delete b.delayedLeave,u=void 0},b.delayedLeave=()=>{U(),delete b.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Br(e){let s=e[0];if(e.length>1){for(const n of e)if(n.type!==Kt){s=n;break}}return s}const xu=vu;function Ur(e,s){const{leavingVNodes:n}=e;let o=n.get(s.type);return o||(o=Object.create(null),n.set(s.type,o)),o}function vo(e,s,n,o,l){const{appear:i,mode:a,persisted:r=!1,onBeforeEnter:p,onEnter:b,onAfterEnter:u,onEnterCancelled:v,onBeforeLeave:g,onLeave:j,onAfterLeave:U,onLeaveCancelled:N,onBeforeAppear:L,onAppear:S,onAfterAppear:E,onAppearCancelled:T}=s,O=String(e.key),A=Ur(n,e),R=(ce,ze)=>{ce&&ms(ce,o,9,ze)},Y=(ce,ze)=>{const Ee=ze[1];R(ce,ze),Ie(ce)?ce.every(se=>se.length<=1)&&Ee():ce.length<=1&&Ee()},we={mode:a,persisted:r,beforeEnter(ce){let ze=p;if(!n.isMounted)if(i)ze=L||p;else return;ce[Ls]&&ce[Ls](!0);const Ee=A[O];Ee&&mn(e,Ee)&&Ee.el[Ls]&&Ee.el[Ls](),R(ze,[ce])},enter(ce){let ze=b,Ee=u,se=v;if(!n.isMounted)if(i)ze=S||b,Ee=E||u,se=T||v;else return;let K=!1;const I=ce[Ro]=y=>{K||(K=!0,y?R(se,[ce]):R(Ee,[ce]),we.delayedLeave&&we.delayedLeave(),ce[Ro]=void 0)};ze?Y(ze,[ce,I]):I()},leave(ce,ze){const Ee=String(e.key);if(ce[Ro]&&ce[Ro](!0),n.isUnmounting)return ze();R(g,[ce]);let se=!1;const K=ce[Ls]=I=>{se||(se=!0,ze(),I?R(N,[ce]):R(U,[ce]),ce[Ls]=void 0,A[Ee]===e&&delete A[Ee])};A[Ee]=e,j?Y(j,[ce,K]):K()},clone(ce){const ze=vo(ce,s,n,o,l);return l&&l(ze),ze}};return we}function Dl(e){if(pl(e))return e=ln(e),e.children=null,e}function ca(e){if(!pl(e))return Pr(e.type)&&e.children?Br(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:s,children:n}=e;if(n){if(s&16)return n[0];if(s&32&&Re(n.default))return n.default()}}function wn(e,s){e.shapeFlag&6&&e.component?(e.transition=s,wn(e.component.subTree,s)):e.shapeFlag&128?(e.ssContent.transition=s.clone(e.ssContent),e.ssFallback.transition=s.clone(e.ssFallback)):e.transition=s}function $i(e,s=!1,n){let o=[],l=0;for(let i=0;i<e.length;i++){let a=e[i];const r=n==null?a.key:String(n)+String(a.key!=null?a.key:i);a.type===oe?(a.patchFlag&128&&l++,o=o.concat($i(a.children,s,r))):(s||a.type!==Kt)&&o.push(r!=null?ln(a,{key:r}):a)}if(l>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function Fr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Xo=new WeakMap;function io(e,s,n,o,l=!1){if(Ie(e)){e.forEach((U,N)=>io(U,s&&(Ie(s)?s[N]:s),n,o,l));return}if(ao(o)&&!l){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&io(e,s,n,o.component.subTree);return}const i=o.shapeFlag&4?bl(o.component):o.el,a=l?null:i,{i:r,r:p}=e,b=s&&s.r,u=r.refs===nt?r.refs={}:r.refs,v=r.setupState,g=Ne(v),j=v===nt?nr:U=>Qe(g,U);if(b!=null&&b!==p){if(da(s),mt(b))u[b]=null,j(b)&&(v[b]=null);else if(Et(b)){b.value=null;const U=s;U.k&&(u[U.k]=null)}}if(Re(p))ho(p,r,12,[a,u]);else{const U=mt(p),N=Et(p);if(U||N){const L=()=>{if(e.f){const S=U?j(p)?v[p]:u[p]:p.value;if(l)Ie(S)&&bi(S,i);else if(Ie(S))S.includes(i)||S.push(i);else if(U)u[p]=[i],j(p)&&(v[p]=u[p]);else{const E=[i];p.value=E,e.k&&(u[e.k]=E)}}else U?(u[p]=a,j(p)&&(v[p]=a)):N&&(p.value=a,e.k&&(u[e.k]=a))};if(a){const S=()=>{L(),Xo.delete(e)};S.id=-1,Xo.set(e,S),Ft(S,n)}else da(e),L()}}}function da(e){const s=Xo.get(e);s&&(s.flags|=8,Xo.delete(e))}rl().requestIdleCallback;rl().cancelIdleCallback;const ao=e=>!!e.type.__asyncLoader,pl=e=>e.type.__isKeepAlive;function bu(e,s){Wr(e,"a",s)}function mu(e,s){Wr(e,"da",s)}function Wr(e,s,n=Ht){const o=e.__wdc||(e.__wdc=()=>{let l=n;for(;l;){if(l.isDeactivated)return;l=l.parent}return e()});if(fl(s,o,n),n){let l=n.parent;for(;l&&l.parent;)pl(l.parent.vnode)&&gu(o,s,n,l),l=l.parent}}function gu(e,s,n,o){const l=fl(s,e,o,!0);Ci(()=>{bi(o[s],l)},n)}function fl(e,s,n=Ht,o=!1){if(n){const l=n[e]||(n[e]=[]),i=s.__weh||(s.__weh=(...a)=>{Fs();const r=yo(n),p=ms(s,n,e,a);return r(),Ws(),p});return o?l.unshift(i):l.push(i),i}}const Gs=e=>(s,n=Ht)=>{(!bo||e==="sp")&&fl(e,(...o)=>s(...o),n)},hu=Gs("bm"),Dt=Gs("m"),yu=Gs("bu"),Kr=Gs("u"),Hr=Gs("bum"),Ci=Gs("um"),wu=Gs("sp"),ku=Gs("rtg"),_u=Gs("rtc");function zu(e,s=Ht){fl("ec",e,s)}const $u=Symbol.for("v-ndc");function ye(e,s,n,o){let l;const i=n,a=Ie(e);if(a||mt(e)){const r=a&&hn(e);let p=!1,b=!1;r&&(p=!is(e),b=Hs(e),e=cl(e)),l=new Array(e.length);for(let u=0,v=e.length;u<v;u++)l[u]=s(p?b?Rn(bs(e[u])):bs(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){l=new Array(e);for(let r=0;r<e;r++)l[r]=s(r+1,r,void 0,i)}else if(tt(e))if(e[Symbol.iterator])l=Array.from(e,(r,p)=>s(r,p,void 0,i));else{const r=Object.keys(e);l=new Array(r.length);for(let p=0,b=r.length;p<b;p++){const u=r[p];l[p]=s(e[u],u,p,i)}}else l=[];return l}const ei=e=>e?dc(e)?bl(e):ei(e.parent):null,ro=It(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ei(e.parent),$root:e=>ei(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qr(e),$forceUpdate:e=>e.f||(e.f=()=>{zi(e.update)}),$nextTick:e=>e.n||(e.n=_s.bind(e.proxy)),$watch:e=>pu.bind(e)}),Vl=(e,s)=>e!==nt&&!e.__isScriptSetup&&Qe(e,s),Cu={get({_:e},s){if(s==="__v_skip")return!0;const{ctx:n,setupState:o,data:l,props:i,accessCache:a,type:r,appContext:p}=e;if(s[0]!=="$"){const g=a[s];if(g!==void 0)switch(g){case 1:return o[s];case 2:return l[s];case 4:return n[s];case 3:return i[s]}else{if(Vl(o,s))return a[s]=1,o[s];if(l!==nt&&Qe(l,s))return a[s]=2,l[s];if(Qe(i,s))return a[s]=3,i[s];if(n!==nt&&Qe(n,s))return a[s]=4,n[s];ti&&(a[s]=0)}}const b=ro[s];let u,v;if(b)return s==="$attrs"&&Nt(e.attrs,"get",""),b(e);if((u=r.__cssModules)&&(u=u[s]))return u;if(n!==nt&&Qe(n,s))return a[s]=4,n[s];if(v=p.config.globalProperties,Qe(v,s))return v[s]},set({_:e},s,n){const{data:o,setupState:l,ctx:i}=e;return Vl(l,s)?(l[s]=n,!0):o!==nt&&Qe(o,s)?(o[s]=n,!0):Qe(e.props,s)||s[0]==="$"&&s.slice(1)in e?!1:(i[s]=n,!0)},has({_:{data:e,setupState:s,accessCache:n,ctx:o,appContext:l,props:i,type:a}},r){let p;return!!(n[r]||e!==nt&&r[0]!=="$"&&Qe(e,r)||Vl(s,r)||Qe(i,r)||Qe(o,r)||Qe(ro,r)||Qe(l.config.globalProperties,r)||(p=a.__cssModules)&&p[r])},defineProperty(e,s,n){return n.get!=null?e._.accessCache[s]=0:Qe(n,"value")&&this.set(e,s,n.value,null),Reflect.defineProperty(e,s,n)}};function ua(e){return Ie(e)?e.reduce((s,n)=>(s[n]=null,s),{}):e}let ti=!0;function Su(e){const s=qr(e),n=e.proxy,o=e.ctx;ti=!1,s.beforeCreate&&pa(s.beforeCreate,e,"bc");const{data:l,computed:i,methods:a,watch:r,provide:p,inject:b,created:u,beforeMount:v,mounted:g,beforeUpdate:j,updated:U,activated:N,deactivated:L,beforeDestroy:S,beforeUnmount:E,destroyed:T,unmounted:O,render:A,renderTracked:R,renderTriggered:Y,errorCaptured:we,serverPrefetch:ce,expose:ze,inheritAttrs:Ee,components:se,directives:K,filters:I}=s;if(b&&Iu(b,o,null),a)for(const D in a){const ae=a[D];Re(ae)&&(o[D]=ae.bind(n))}if(l){const D=l.call(n,n);tt(D)&&(e.data=Ks(D))}if(ti=!0,i)for(const D in i){const ae=i[D],ue=Re(ae)?ae.bind(n,n):Re(ae.get)?ae.get.bind(n,n):$s,F=!Re(ae)&&Re(ae.set)?ae.set.bind(n):$s,ve=be({get:ue,set:F});Object.defineProperty(o,D,{enumerable:!0,configurable:!0,get:()=>ve.value,set:xe=>ve.value=xe})}if(r)for(const D in r)Gr(r[D],o,n,D);if(p){const D=Re(p)?p.call(n):p;Reflect.ownKeys(D).forEach(ae=>{cu(ae,D[ae])})}u&&pa(u,e,"c");function z(D,ae){Ie(ae)?ae.forEach(ue=>D(ue.bind(n))):ae&&D(ae.bind(n))}if(z(hu,v),z(Dt,g),z(yu,j),z(Kr,U),z(bu,N),z(mu,L),z(zu,we),z(_u,R),z(ku,Y),z(Hr,E),z(Ci,O),z(wu,ce),Ie(ze))if(ze.length){const D=e.exposed||(e.exposed={});ze.forEach(ae=>{Object.defineProperty(D,ae,{get:()=>n[ae],set:ue=>n[ae]=ue,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===$s&&(e.render=A),Ee!=null&&(e.inheritAttrs=Ee),se&&(e.components=se),K&&(e.directives=K),ce&&Fr(e)}function Iu(e,s,n=$s){Ie(e)&&(e=si(e));for(const o in e){const l=e[o];let i;tt(l)?"default"in l?i=Bo(l.from||o,l.default,!0):i=Bo(l.from||o):i=Bo(l),Et(i)?Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):s[o]=i}}function pa(e,s,n){ms(Ie(e)?e.map(o=>o.bind(s.proxy)):e.bind(s.proxy),s,n)}function Gr(e,s,n,o){let l=o.includes(".")?Ar(n,o):()=>n[o];if(mt(e)){const i=s[e];Re(i)&&ds(l,i)}else if(Re(e))ds(l,e.bind(n));else if(tt(e))if(Ie(e))e.forEach(i=>Gr(i,s,n,o));else{const i=Re(e.handler)?e.handler.bind(n):s[e.handler];Re(i)&&ds(l,i,e)}}function qr(e){const s=e.type,{mixins:n,extends:o}=s,{mixins:l,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,r=i.get(s);let p;return r?p=r:!l.length&&!n&&!o?p=s:(p={},l.length&&l.forEach(b=>Qo(p,b,a,!0)),Qo(p,s,a)),tt(s)&&i.set(s,p),p}function Qo(e,s,n,o=!1){const{mixins:l,extends:i}=s;i&&Qo(e,i,n,!0),l&&l.forEach(a=>Qo(e,a,n,!0));for(const a in s)if(!(o&&a==="expose")){const r=Mu[a]||n&&n[a];e[a]=r?r(e[a],s[a]):s[a]}return e}const Mu={data:fa,props:va,emits:va,methods:to,computed:to,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:to,directives:to,watch:Eu,provide:fa,inject:Tu};function fa(e,s){return s?e?function(){return It(Re(e)?e.call(this,this):e,Re(s)?s.call(this,this):s)}:s:e}function Tu(e,s){return to(si(e),si(s))}function si(e){if(Ie(e)){const s={};for(let n=0;n<e.length;n++)s[e[n]]=e[n];return s}return e}function Ut(e,s){return e?[...new Set([].concat(e,s))]:s}function to(e,s){return e?It(Object.create(null),e,s):s}function va(e,s){return e?Ie(e)&&Ie(s)?[...new Set([...e,...s])]:It(Object.create(null),ua(e),ua(s??{})):s}function Eu(e,s){if(!e)return s;if(!s)return e;const n=It(Object.create(null),e);for(const o in s)n[o]=Ut(e[o],s[o]);return n}function Yr(){return{app:null,config:{isNativeTag:nr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ju=0;function Au(e,s){return function(o,l=null){Re(o)||(o=It({},o)),l!=null&&!tt(l)&&(l=null);const i=Yr(),a=new WeakSet,r=[];let p=!1;const b=i.app={_uid:ju++,_component:o,_props:l,_container:null,_context:i,_instance:null,version:up,get config(){return i.config},set config(u){},use(u,...v){return a.has(u)||(u&&Re(u.install)?(a.add(u),u.install(b,...v)):Re(u)&&(a.add(u),u(b,...v))),b},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),b},component(u,v){return v?(i.components[u]=v,b):i.components[u]},directive(u,v){return v?(i.directives[u]=v,b):i.directives[u]},mount(u,v,g){if(!p){const j=b._ceVNode||Ze(o,l);return j.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),e(j,u,g),p=!0,b._container=u,u.__vue_app__=b,bl(j.component)}},onUnmount(u){r.push(u)},unmount(){p&&(ms(r,b._instance,16),e(null,b._container),delete b._container.__vue_app__)},provide(u,v){return i.provides[u]=v,b},runWithContext(u){const v=On;On=b;try{return u()}finally{On=v}}};return b}}let On=null;const Ou=(e,s)=>s==="modelValue"||s==="model-value"?e.modelModifiers:e[`${s}Modifiers`]||e[`${on(s)}Modifiers`]||e[`${rn(s)}Modifiers`];function Pu(e,s,...n){if(e.isUnmounted)return;const o=e.vnode.props||nt;let l=n;const i=s.startsWith("update:"),a=i&&Ou(o,s.slice(7));a&&(a.trim&&(l=n.map(u=>mt(u)?u.trim():u)),a.number&&(l=n.map(al)));let r,p=o[r=Ol(s)]||o[r=Ol(on(s))];!p&&i&&(p=o[r=Ol(rn(s))]),p&&ms(p,e,6,l);const b=o[r+"Once"];if(b){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,ms(b,e,6,l)}}const Ru=new WeakMap;function Jr(e,s,n=!1){const o=n?Ru:s.emitsCache,l=o.get(e);if(l!==void 0)return l;const i=e.emits;let a={},r=!1;if(!Re(e)){const p=b=>{const u=Jr(b,s,!0);u&&(r=!0,It(a,u))};!n&&s.mixins.length&&s.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!i&&!r?(tt(e)&&o.set(e,null),null):(Ie(i)?i.forEach(p=>a[p]=null):It(a,i),tt(e)&&o.set(e,a),a)}function vl(e,s){return!e||!ol(s)?!1:(s=s.slice(2).replace(/Once$/,""),Qe(e,s[0].toLowerCase()+s.slice(1))||Qe(e,rn(s))||Qe(e,s))}function xa(e){const{type:s,vnode:n,proxy:o,withProxy:l,propsOptions:[i],slots:a,attrs:r,emit:p,render:b,renderCache:u,props:v,data:g,setupState:j,ctx:U,inheritAttrs:N}=e,L=Jo(e);let S,E;try{if(n.shapeFlag&4){const O=l||o,A=O;S=zs(b.call(A,O,u,v,j,g,U)),E=r}else{const O=s;S=zs(O.length>1?O(v,{attrs:r,slots:a,emit:p}):O(v,null)),E=s.props?r:Nu(r)}}catch(O){co.length=0,ul(O,e,1),S=Ze(Kt)}let T=S;if(E&&N!==!1){const O=Object.keys(E),{shapeFlag:A}=T;O.length&&A&7&&(i&&O.some(xi)&&(E=Lu(E,i)),T=ln(T,E,!1,!0))}return n.dirs&&(T=ln(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&wn(T,n.transition),S=T,Jo(L),S}const Nu=e=>{let s;for(const n in e)(n==="class"||n==="style"||ol(n))&&((s||(s={}))[n]=e[n]);return s},Lu=(e,s)=>{const n={};for(const o in e)(!xi(o)||!(o.slice(9)in s))&&(n[o]=e[o]);return n};function Du(e,s,n){const{props:o,children:l,component:i}=e,{props:a,children:r,patchFlag:p}=s,b=i.emitsOptions;if(s.dirs||s.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return o?ba(o,a,b):!!a;if(p&8){const u=s.dynamicProps;for(let v=0;v<u.length;v++){const g=u[v];if(a[g]!==o[g]&&!vl(b,g))return!0}}}else return(l||r)&&(!r||!r.$stable)?!0:o===a?!1:o?a?ba(o,a,b):!0:!!a;return!1}function ba(e,s,n){const o=Object.keys(s);if(o.length!==Object.keys(e).length)return!0;for(let l=0;l<o.length;l++){const i=o[l];if(s[i]!==e[i]&&!vl(n,i))return!0}return!1}function Vu({vnode:e,parent:s},n){for(;s;){const o=s.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=s.vnode).el=n,s=s.parent;else break}}const Xr={},Qr=()=>Object.create(Xr),Zr=e=>Object.getPrototypeOf(e)===Xr;function Bu(e,s,n,o=!1){const l={},i=Qr();e.propsDefaults=Object.create(null),ec(e,s,l,i);for(const a in e.propsOptions[0])a in l||(l[a]=void 0);n?e.props=o?l:qd(l):e.type.props?e.props=l:e.props=i,e.attrs=i}function Uu(e,s,n,o){const{props:l,attrs:i,vnode:{patchFlag:a}}=e,r=Ne(l),[p]=e.propsOptions;let b=!1;if((o||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let v=0;v<u.length;v++){let g=u[v];if(vl(e.emitsOptions,g))continue;const j=s[g];if(p)if(Qe(i,g))j!==i[g]&&(i[g]=j,b=!0);else{const U=on(g);l[U]=ni(p,r,U,j,e,!1)}else j!==i[g]&&(i[g]=j,b=!0)}}}else{ec(e,s,l,i)&&(b=!0);let u;for(const v in r)(!s||!Qe(s,v)&&((u=rn(v))===v||!Qe(s,u)))&&(p?n&&(n[v]!==void 0||n[u]!==void 0)&&(l[v]=ni(p,r,v,void 0,e,!0)):delete l[v]);if(i!==r)for(const v in i)(!s||!Qe(s,v))&&(delete i[v],b=!0)}b&&Vs(e.attrs,"set","")}function ec(e,s,n,o){const[l,i]=e.propsOptions;let a=!1,r;if(s)for(let p in s){if(so(p))continue;const b=s[p];let u;l&&Qe(l,u=on(p))?!i||!i.includes(u)?n[u]=b:(r||(r={}))[u]=b:vl(e.emitsOptions,p)||(!(p in o)||b!==o[p])&&(o[p]=b,a=!0)}if(i){const p=Ne(n),b=r||nt;for(let u=0;u<i.length;u++){const v=i[u];n[v]=ni(l,p,v,b[v],e,!Qe(b,v))}}return a}function ni(e,s,n,o,l,i){const a=e[n];if(a!=null){const r=Qe(a,"default");if(r&&o===void 0){const p=a.default;if(a.type!==Function&&!a.skipFactory&&Re(p)){const{propsDefaults:b}=l;if(n in b)o=b[n];else{const u=yo(l);o=b[n]=p.call(null,s),u()}}else o=p;l.ce&&l.ce._setProp(n,o)}a[0]&&(i&&!r?o=!1:a[1]&&(o===""||o===rn(n))&&(o=!0))}return o}const Fu=new WeakMap;function tc(e,s,n=!1){const o=n?Fu:s.propsCache,l=o.get(e);if(l)return l;const i=e.props,a={},r=[];let p=!1;if(!Re(e)){const u=v=>{p=!0;const[g,j]=tc(v,s,!0);It(a,g),j&&r.push(...j)};!n&&s.mixins.length&&s.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!p)return tt(e)&&o.set(e,En),En;if(Ie(i))for(let u=0;u<i.length;u++){const v=on(i[u]);ma(v)&&(a[v]=nt)}else if(i)for(const u in i){const v=on(u);if(ma(v)){const g=i[u],j=a[v]=Ie(g)||Re(g)?{type:g}:It({},g),U=j.type;let N=!1,L=!0;if(Ie(U))for(let S=0;S<U.length;++S){const E=U[S],T=Re(E)&&E.name;if(T==="Boolean"){N=!0;break}else T==="String"&&(L=!1)}else N=Re(U)&&U.name==="Boolean";j[0]=N,j[1]=L,(N||Qe(j,"default"))&&r.push(v)}}const b=[a,r];return tt(e)&&o.set(e,b),b}function ma(e){return e[0]!=="$"&&!so(e)}const Si=e=>e==="_"||e==="_ctx"||e==="$stable",Ii=e=>Ie(e)?e.map(zs):[zs(e)],Wu=(e,s,n)=>{if(s._n)return s;const o=Cs((...l)=>Ii(s(...l)),n);return o._c=!1,o},sc=(e,s,n)=>{const o=e._ctx;for(const l in e){if(Si(l))continue;const i=e[l];if(Re(i))s[l]=Wu(l,i,o);else if(i!=null){const a=Ii(i);s[l]=()=>a}}},nc=(e,s)=>{const n=Ii(s);e.slots.default=()=>n},oc=(e,s,n)=>{for(const o in s)(n||!Si(o))&&(e[o]=s[o])},Ku=(e,s,n)=>{const o=e.slots=Qr();if(e.vnode.shapeFlag&32){const l=s._;l?(oc(o,s,n),n&&rr(o,"_",l,!0)):sc(s,o)}else s&&nc(e,s)},Hu=(e,s,n)=>{const{vnode:o,slots:l}=e;let i=!0,a=nt;if(o.shapeFlag&32){const r=s._;r?n&&r===1?i=!1:oc(l,s,n):(i=!s.$stable,sc(s,l)),a=s}else s&&(nc(e,s),a={default:1});if(i)for(const r in l)!Si(r)&&a[r]==null&&delete l[r]},Ft=Xu;function Gu(e){return qu(e)}function qu(e,s){const n=rl();n.__VUE__=!0;const{insert:o,remove:l,patchProp:i,createElement:a,createText:r,createComment:p,setText:b,setElementText:u,parentNode:v,nextSibling:g,setScopeId:j=$s,insertStaticContent:U}=e,N=(_,$,B,X=null,q=null,J=null,re=void 0,ne=null,ee=!!$.dynamicChildren)=>{if(_===$)return;_&&!mn(_,$)&&(X=Tt(_),xe(_,q,J,!0),_=null),$.patchFlag===-2&&(ee=!1,$.dynamicChildren=null);const{type:G,ref:ke,shapeFlag:le}=$;switch(G){case xl:L(_,$,B,X);break;case Kt:S(_,$,B,X);break;case Fo:_==null&&E($,B,X,re);break;case oe:se(_,$,B,X,q,J,re,ne,ee);break;default:le&1?A(_,$,B,X,q,J,re,ne,ee):le&6?K(_,$,B,X,q,J,re,ne,ee):(le&64||le&128)&&G.process(_,$,B,X,q,J,re,ne,ee,Ot)}ke!=null&&q?io(ke,_&&_.ref,J,$||_,!$):ke==null&&_&&_.ref!=null&&io(_.ref,null,J,_,!0)},L=(_,$,B,X)=>{if(_==null)o($.el=r($.children),B,X);else{const q=$.el=_.el;$.children!==_.children&&b(q,$.children)}},S=(_,$,B,X)=>{_==null?o($.el=p($.children||""),B,X):$.el=_.el},E=(_,$,B,X)=>{[_.el,_.anchor]=U(_.children,$,B,X,_.el,_.anchor)},T=({el:_,anchor:$},B,X)=>{let q;for(;_&&_!==$;)q=g(_),o(_,B,X),_=q;o($,B,X)},O=({el:_,anchor:$})=>{let B;for(;_&&_!==$;)B=g(_),l(_),_=B;l($)},A=(_,$,B,X,q,J,re,ne,ee)=>{if($.type==="svg"?re="svg":$.type==="math"&&(re="mathml"),_==null)R($,B,X,q,J,re,ne,ee);else{const G=_.el&&_.el._isVueCE?_.el:null;try{G&&G._beginPatch(),ce(_,$,q,J,re,ne,ee)}finally{G&&G._endPatch()}}},R=(_,$,B,X,q,J,re,ne)=>{let ee,G;const{props:ke,shapeFlag:le,transition:ge,dirs:Me}=_;if(ee=_.el=a(_.type,J,ke&&ke.is,ke),le&8?u(ee,_.children):le&16&&we(_.children,ee,null,X,q,Bl(_,J),re,ne),Me&&fn(_,null,X,"created"),Y(ee,_,_.scopeId,re,X),ke){for(const Xe in ke)Xe!=="value"&&!so(Xe)&&i(ee,Xe,null,ke[Xe],J,X);"value"in ke&&i(ee,"value",null,ke.value,J),(G=ke.onVnodeBeforeMount)&&ys(G,X,_)}Me&&fn(_,null,X,"beforeMount");const Le=Yu(q,ge);Le&&ge.beforeEnter(ee),o(ee,$,B),((G=ke&&ke.onVnodeMounted)||Le||Me)&&Ft(()=>{G&&ys(G,X,_),Le&&ge.enter(ee),Me&&fn(_,null,X,"mounted")},q)},Y=(_,$,B,X,q)=>{if(B&&j(_,B),X)for(let J=0;J<X.length;J++)j(_,X[J]);if(q){let J=q.subTree;if($===J||ac(J.type)&&(J.ssContent===$||J.ssFallback===$)){const re=q.vnode;Y(_,re,re.scopeId,re.slotScopeIds,q.parent)}}},we=(_,$,B,X,q,J,re,ne,ee=0)=>{for(let G=ee;G<_.length;G++){const ke=_[G]=ne?tn(_[G]):zs(_[G]);N(null,ke,$,B,X,q,J,re,ne)}},ce=(_,$,B,X,q,J,re)=>{const ne=$.el=_.el;let{patchFlag:ee,dynamicChildren:G,dirs:ke}=$;ee|=_.patchFlag&16;const le=_.props||nt,ge=$.props||nt;let Me;if(B&&vn(B,!1),(Me=ge.onVnodeBeforeUpdate)&&ys(Me,B,$,_),ke&&fn($,_,B,"beforeUpdate"),B&&vn(B,!0),(le.innerHTML&&ge.innerHTML==null||le.textContent&&ge.textContent==null)&&u(ne,""),G?ze(_.dynamicChildren,G,ne,B,X,Bl($,q),J):re||ae(_,$,ne,null,B,X,Bl($,q),J,!1),ee>0){if(ee&16)Ee(ne,le,ge,B,q);else if(ee&2&&le.class!==ge.class&&i(ne,"class",null,ge.class,q),ee&4&&i(ne,"style",le.style,ge.style,q),ee&8){const Le=$.dynamicProps;for(let Xe=0;Xe<Le.length;Xe++){const Fe=Le[Xe],qe=le[Fe],wt=ge[Fe];(wt!==qe||Fe==="value")&&i(ne,Fe,qe,wt,q,B)}}ee&1&&_.children!==$.children&&u(ne,$.children)}else!re&&G==null&&Ee(ne,le,ge,B,q);((Me=ge.onVnodeUpdated)||ke)&&Ft(()=>{Me&&ys(Me,B,$,_),ke&&fn($,_,B,"updated")},X)},ze=(_,$,B,X,q,J,re)=>{for(let ne=0;ne<$.length;ne++){const ee=_[ne],G=$[ne],ke=ee.el&&(ee.type===oe||!mn(ee,G)||ee.shapeFlag&198)?v(ee.el):B;N(ee,G,ke,null,X,q,J,re,!0)}},Ee=(_,$,B,X,q)=>{if($!==B){if($!==nt)for(const J in $)!so(J)&&!(J in B)&&i(_,J,$[J],null,q,X);for(const J in B){if(so(J))continue;const re=B[J],ne=$[J];re!==ne&&J!=="value"&&i(_,J,ne,re,q,X)}"value"in B&&i(_,"value",$.value,B.value,q)}},se=(_,$,B,X,q,J,re,ne,ee)=>{const G=$.el=_?_.el:r(""),ke=$.anchor=_?_.anchor:r("");let{patchFlag:le,dynamicChildren:ge,slotScopeIds:Me}=$;Me&&(ne=ne?ne.concat(Me):Me),_==null?(o(G,B,X),o(ke,B,X),we($.children||[],B,ke,q,J,re,ne,ee)):le>0&&le&64&&ge&&_.dynamicChildren&&_.dynamicChildren.length===ge.length?(ze(_.dynamicChildren,ge,B,q,J,re,ne),($.key!=null||q&&$===q.subTree)&&Mi(_,$,!0)):ae(_,$,B,ke,q,J,re,ne,ee)},K=(_,$,B,X,q,J,re,ne,ee)=>{$.slotScopeIds=ne,_==null?$.shapeFlag&512?q.ctx.activate($,B,X,re,ee):I($,B,X,q,J,re,ee):y(_,$,ee)},I=(_,$,B,X,q,J,re)=>{const ne=_.component=op(_,X,q);if(pl(_)&&(ne.ctx.renderer=Ot),lp(ne,!1,re),ne.asyncDep){if(q&&q.registerDep(ne,z,re),!_.el){const ee=ne.subTree=Ze(Kt);S(null,ee,$,B),_.placeholder=ee.el}}else z(ne,_,$,B,q,J,re)},y=(_,$,B)=>{const X=$.component=_.component;if(Du(_,$,B))if(X.asyncDep&&!X.asyncResolved){D(X,$,B);return}else X.next=$,X.update();else $.el=_.el,X.vnode=$},z=(_,$,B,X,q,J,re)=>{const ne=()=>{if(_.isMounted){let{next:le,bu:ge,u:Me,parent:Le,vnode:Xe}=_;{const Pt=lc(_);if(Pt){le&&(le.el=Xe.el,D(_,le,re)),Pt.asyncDep.then(()=>{_.isUnmounted||ne()});return}}let Fe=le,qe;vn(_,!1),le?(le.el=Xe.el,D(_,le,re)):le=Xe,ge&&Vo(ge),(qe=le.props&&le.props.onVnodeBeforeUpdate)&&ys(qe,Le,le,Xe),vn(_,!0);const wt=xa(_),Vt=_.subTree;_.subTree=wt,N(Vt,wt,v(Vt.el),Tt(Vt),_,q,J),le.el=wt.el,Fe===null&&Vu(_,wt.el),Me&&Ft(Me,q),(qe=le.props&&le.props.onVnodeUpdated)&&Ft(()=>ys(qe,Le,le,Xe),q)}else{let le;const{el:ge,props:Me}=$,{bm:Le,m:Xe,parent:Fe,root:qe,type:wt}=_,Vt=ao($);vn(_,!1),Le&&Vo(Le),!Vt&&(le=Me&&Me.onVnodeBeforeMount)&&ys(le,Fe,$),vn(_,!0);{qe.ce&&qe.ce._def.shadowRoot!==!1&&qe.ce._injectChildStyle(wt);const Pt=_.subTree=xa(_);N(null,Pt,B,X,_,q,J),$.el=Pt.el}if(Xe&&Ft(Xe,q),!Vt&&(le=Me&&Me.onVnodeMounted)){const Pt=$;Ft(()=>ys(le,Fe,Pt),q)}($.shapeFlag&256||Fe&&ao(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&_.a&&Ft(_.a,q),_.isMounted=!0,$=B=X=null}};_.scope.on();const ee=_.effect=new pr(ne);_.scope.off();const G=_.update=ee.run.bind(ee),ke=_.job=ee.runIfDirty.bind(ee);ke.i=_,ke.id=_.uid,ee.scheduler=()=>zi(ke),vn(_,!0),G()},D=(_,$,B)=>{$.component=_;const X=_.vnode.props;_.vnode=$,_.next=null,Uu(_,$.props,X,B),Hu(_,$.children,B),Fs(),la(_),Ws()},ae=(_,$,B,X,q,J,re,ne,ee=!1)=>{const G=_&&_.children,ke=_?_.shapeFlag:0,le=$.children,{patchFlag:ge,shapeFlag:Me}=$;if(ge>0){if(ge&128){F(G,le,B,X,q,J,re,ne,ee);return}else if(ge&256){ue(G,le,B,X,q,J,re,ne,ee);return}}Me&8?(ke&16&&ct(G,q,J),le!==G&&u(B,le)):ke&16?Me&16?F(G,le,B,X,q,J,re,ne,ee):ct(G,q,J,!0):(ke&8&&u(B,""),Me&16&&we(le,B,X,q,J,re,ne,ee))},ue=(_,$,B,X,q,J,re,ne,ee)=>{_=_||En,$=$||En;const G=_.length,ke=$.length,le=Math.min(G,ke);let ge;for(ge=0;ge<le;ge++){const Me=$[ge]=ee?tn($[ge]):zs($[ge]);N(_[ge],Me,B,null,q,J,re,ne,ee)}G>ke?ct(_,q,J,!0,!1,le):we($,B,X,q,J,re,ne,ee,le)},F=(_,$,B,X,q,J,re,ne,ee)=>{let G=0;const ke=$.length;let le=_.length-1,ge=ke-1;for(;G<=le&&G<=ge;){const Me=_[G],Le=$[G]=ee?tn($[G]):zs($[G]);if(mn(Me,Le))N(Me,Le,B,null,q,J,re,ne,ee);else break;G++}for(;G<=le&&G<=ge;){const Me=_[le],Le=$[ge]=ee?tn($[ge]):zs($[ge]);if(mn(Me,Le))N(Me,Le,B,null,q,J,re,ne,ee);else break;le--,ge--}if(G>le){if(G<=ge){const Me=ge+1,Le=Me<ke?$[Me].el:X;for(;G<=ge;)N(null,$[G]=ee?tn($[G]):zs($[G]),B,Le,q,J,re,ne,ee),G++}}else if(G>ge)for(;G<=le;)xe(_[G],q,J,!0),G++;else{const Me=G,Le=G,Xe=new Map;for(G=Le;G<=ge;G++){const gt=$[G]=ee?tn($[G]):zs($[G]);gt.key!=null&&Xe.set(gt.key,G)}let Fe,qe=0;const wt=ge-Le+1;let Vt=!1,Pt=0;const ps=new Array(wt);for(G=0;G<wt;G++)ps[G]=0;for(G=Me;G<=le;G++){const gt=_[G];if(qe>=wt){xe(gt,q,J,!0);continue}let Jt;if(gt.key!=null)Jt=Xe.get(gt.key);else for(Fe=Le;Fe<=ge;Fe++)if(ps[Fe-Le]===0&&mn(gt,$[Fe])){Jt=Fe;break}Jt===void 0?xe(gt,q,J,!0):(ps[Jt-Le]=G+1,Jt>=Pt?Pt=Jt:Vt=!0,N(gt,$[Jt],B,null,q,J,re,ne,ee),qe++)}const Yt=Vt?Ju(ps):En;for(Fe=Yt.length-1,G=wt-1;G>=0;G--){const gt=Le+G,Jt=$[gt],H=$[gt+1],h=gt+1<ke?H.el||ic(H):X;ps[G]===0?N(null,Jt,B,h,q,J,re,ne,ee):Vt&&(Fe<0||G!==Yt[Fe]?ve(Jt,B,h,2):Fe--)}}},ve=(_,$,B,X,q=null)=>{const{el:J,type:re,transition:ne,children:ee,shapeFlag:G}=_;if(G&6){ve(_.component.subTree,$,B,X);return}if(G&128){_.suspense.move($,B,X);return}if(G&64){re.move(_,$,B,Ot);return}if(re===oe){o(J,$,B);for(let le=0;le<ee.length;le++)ve(ee[le],$,B,X);o(_.anchor,$,B);return}if(re===Fo){T(_,$,B);return}if(X!==2&&G&1&&ne)if(X===0)ne.beforeEnter(J),o(J,$,B),Ft(()=>ne.enter(J),q);else{const{leave:le,delayLeave:ge,afterLeave:Me}=ne,Le=()=>{_.ctx.isUnmounted?l(J):o(J,$,B)},Xe=()=>{J._isLeaving&&J[Ls](!0),le(J,()=>{Le(),Me&&Me()})};ge?ge(J,Le,Xe):Xe()}else o(J,$,B)},xe=(_,$,B,X=!1,q=!1)=>{const{type:J,props:re,ref:ne,children:ee,dynamicChildren:G,shapeFlag:ke,patchFlag:le,dirs:ge,cacheIndex:Me}=_;if(le===-2&&(q=!1),ne!=null&&(Fs(),io(ne,null,B,_,!0),Ws()),Me!=null&&($.renderCache[Me]=void 0),ke&256){$.ctx.deactivate(_);return}const Le=ke&1&&ge,Xe=!ao(_);let Fe;if(Xe&&(Fe=re&&re.onVnodeBeforeUnmount)&&ys(Fe,$,_),ke&6)Mt(_.component,B,X);else{if(ke&128){_.suspense.unmount(B,X);return}Le&&fn(_,null,$,"beforeUnmount"),ke&64?_.type.remove(_,$,B,Ot,X):G&&!G.hasOnce&&(J!==oe||le>0&&le&64)?ct(G,$,B,!1,!0):(J===oe&&le&384||!q&&ke&16)&&ct(ee,$,B),X&&We(_)}(Xe&&(Fe=re&&re.onVnodeUnmounted)||Le)&&Ft(()=>{Fe&&ys(Fe,$,_),Le&&fn(_,null,$,"unmounted")},B)},We=_=>{const{type:$,el:B,anchor:X,transition:q}=_;if($===oe){ot(B,X);return}if($===Fo){O(_);return}const J=()=>{l(B),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(_.shapeFlag&1&&q&&!q.persisted){const{leave:re,delayLeave:ne}=q,ee=()=>re(B,J);ne?ne(_.el,J,ee):ee()}else J()},ot=(_,$)=>{let B;for(;_!==$;)B=g(_),l(_),_=B;l($)},Mt=(_,$,B)=>{const{bum:X,scope:q,job:J,subTree:re,um:ne,m:ee,a:G}=_;ga(ee),ga(G),X&&Vo(X),q.stop(),J&&(J.flags|=8,xe(re,_,$,B)),ne&&Ft(ne,$),Ft(()=>{_.isUnmounted=!0},$)},ct=(_,$,B,X=!1,q=!1,J=0)=>{for(let re=J;re<_.length;re++)xe(_[re],$,B,X,q)},Tt=_=>{if(_.shapeFlag&6)return Tt(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const $=g(_.anchor||_.el),B=$&&$[Or];return B?g(B):$};let At=!1;const yt=(_,$,B)=>{let X;_==null?$._vnode&&(xe($._vnode,null,null,!0),X=$._vnode.component):N($._vnode||null,_,$,null,null,null,B),$._vnode=_,At||(At=!0,la(X),Mr(),At=!1)},Ot={p:N,um:xe,m:ve,r:We,mt:I,mc:we,pc:ae,pbc:ze,n:Tt,o:e};return{render:yt,hydrate:void 0,createApp:Au(yt)}}function Bl({type:e,props:s},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:n}function vn({effect:e,job:s},n){n?(e.flags|=32,s.flags|=4):(e.flags&=-33,s.flags&=-5)}function Yu(e,s){return(!e||e&&!e.pendingBranch)&&s&&!s.persisted}function Mi(e,s,n=!1){const o=e.children,l=s.children;if(Ie(o)&&Ie(l))for(let i=0;i<o.length;i++){const a=o[i];let r=l[i];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=l[i]=tn(l[i]),r.el=a.el),!n&&r.patchFlag!==-2&&Mi(a,r)),r.type===xl&&(r.patchFlag!==-1?r.el=a.el:r.__elIndex=i+(e.type===oe?1:0)),r.type===Kt&&!r.el&&(r.el=a.el)}}function Ju(e){const s=e.slice(),n=[0];let o,l,i,a,r;const p=e.length;for(o=0;o<p;o++){const b=e[o];if(b!==0){if(l=n[n.length-1],e[l]<b){s[o]=l,n.push(o);continue}for(i=0,a=n.length-1;i<a;)r=i+a>>1,e[n[r]]<b?i=r+1:a=r;b<e[n[i]]&&(i>0&&(s[o]=n[i-1]),n[i]=o)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=s[a];return n}function lc(e){const s=e.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:lc(s)}function ga(e){if(e)for(let s=0;s<e.length;s++)e[s].flags|=8}function ic(e){if(e.placeholder)return e.placeholder;const s=e.component;return s?ic(s.subTree):null}const ac=e=>e.__isSuspense;function Xu(e,s){s&&s.pendingBranch?Ie(e)?s.effects.push(...e):s.effects.push(e):ru(e)}const oe=Symbol.for("v-fgt"),xl=Symbol.for("v-txt"),Kt=Symbol.for("v-cmt"),Fo=Symbol.for("v-stc"),co=[];let ls=null;function d(e=!1){co.push(ls=e?null:[])}function Qu(){co.pop(),ls=co[co.length-1]||null}let xo=1;function Zo(e,s=!1){xo+=e,e<0&&ls&&s&&(ls.hasOnce=!0)}function rc(e){return e.dynamicChildren=xo>0?ls||En:null,Qu(),xo>0&&ls&&ls.push(e),e}function f(e,s,n,o,l,i){return rc(t(e,s,n,o,l,i,!0))}function Te(e,s,n,o,l){return rc(Ze(e,s,n,o,l,!0))}function el(e){return e?e.__v_isVNode===!0:!1}function mn(e,s){return e.type===s.type&&e.key===s.key}const cc=({key:e})=>e??null,Wo=({ref:e,ref_key:s,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?mt(e)||Et(e)||Re(e)?{i:cs,r:e,k:s,f:!!n}:e:null);function t(e,s=null,n=null,o=0,l=null,i=e===oe?0:1,a=!1,r=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:s,key:s&&cc(s),ref:s&&Wo(s),scopeId:Er,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:cs};return r?(Ti(p,n),i&128&&e.normalize(p)):n&&(p.shapeFlag|=mt(n)?8:16),xo>0&&!a&&ls&&(p.patchFlag>0||i&6)&&p.patchFlag!==32&&ls.push(p),p}const Ze=Zu;function Zu(e,s=null,n=null,o=0,l=null,i=!1){if((!e||e===$u)&&(e=Kt),el(e)){const r=ln(e,s,!0);return n&&Ti(r,n),xo>0&&!i&&ls&&(r.shapeFlag&6?ls[ls.indexOf(e)]=r:ls.push(r)),r.patchFlag=-2,r}if(cp(e)&&(e=e.__vccOpts),s){s=ep(s);let{class:r,style:p}=s;r&&!mt(r)&&(s.class=W(r)),tt(p)&&(dl(p)&&!Ie(p)&&(p=It({},p)),s.style=Ve(p))}const a=mt(e)?1:ac(e)?128:Pr(e)?64:tt(e)?4:Re(e)?2:0;return t(e,s,n,o,l,a,i,!0)}function ep(e){return e?dl(e)||Zr(e)?It({},e):e:null}function ln(e,s,n=!1,o=!1){const{props:l,ref:i,patchFlag:a,children:r,transition:p}=e,b=s?tp(l||{},s):l,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:b,key:b&&cc(b),ref:s&&s.ref?n&&i?Ie(i)?i.concat(Wo(s)):[i,Wo(s)]:Wo(s):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:s&&e.type!==oe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ln(e.ssContent),ssFallback:e.ssFallback&&ln(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&o&&wn(u,p.clone(u)),u}function ns(e=" ",s=0){return Ze(xl,null,e,s)}function kt(e,s){const n=Ze(Fo,null,e);return n.staticCount=s,n}function M(e="",s=!1){return s?(d(),Te(Kt,null,e)):Ze(Kt,null,e)}function zs(e){return e==null||typeof e=="boolean"?Ze(Kt):Ie(e)?Ze(oe,null,e.slice()):el(e)?tn(e):Ze(xl,null,String(e))}function tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ln(e)}function Ti(e,s){let n=0;const{shapeFlag:o}=e;if(s==null)s=null;else if(Ie(s))n=16;else if(typeof s=="object")if(o&65){const l=s.default;l&&(l._c&&(l._d=!1),Ti(e,l()),l._c&&(l._d=!0));return}else{n=32;const l=s._;!l&&!Zr(s)?s._ctx=cs:l===3&&cs&&(cs.slots._===1?s._=1:(s._=2,e.patchFlag|=1024))}else Re(s)?(s={default:s,_ctx:cs},n=32):(s=String(s),o&64?(n=16,s=[ns(s)]):n=8);e.children=s,e.shapeFlag|=n}function tp(...e){const s={};for(let n=0;n<e.length;n++){const o=e[n];for(const l in o)if(l==="class")s.class!==o.class&&(s.class=W([s.class,o.class]));else if(l==="style")s.style=Ve([s.style,o.style]);else if(ol(l)){const i=s[l],a=o[l];a&&i!==a&&!(Ie(i)&&i.includes(a))&&(s[l]=i?[].concat(i,a):a)}else l!==""&&(s[l]=o[l])}return s}function ys(e,s,n,o=null){ms(e,s,7,[n,o])}const sp=Yr();let np=0;function op(e,s,n){const o=e.type,l=(s?s.appContext:e.appContext)||sp,i={uid:np++,vnode:e,type:o,parent:s,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Sd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(l.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tc(o,l),emitsOptions:Jr(o,l),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:o.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=s?s.root:i,i.emit=Pu.bind(null,i),e.ce&&e.ce(i),i}let Ht=null;const Ei=()=>Ht||cs;let tl,oi;{const e=rl(),s=(n,o)=>{let l;return(l=e[n])||(l=e[n]=[]),l.push(o),i=>{l.length>1?l.forEach(a=>a(i)):l[0](i)}};tl=s("__VUE_INSTANCE_SETTERS__",n=>Ht=n),oi=s("__VUE_SSR_SETTERS__",n=>bo=n)}const yo=e=>{const s=Ht;return tl(e),e.scope.on(),()=>{e.scope.off(),tl(s)}},ha=()=>{Ht&&Ht.scope.off(),tl(null)};function dc(e){return e.vnode.shapeFlag&4}let bo=!1;function lp(e,s=!1,n=!1){s&&oi(s);const{props:o,children:l}=e.vnode,i=dc(e);Bu(e,o,i,s),Ku(e,l,n||s);const a=i?ip(e,s):void 0;return s&&oi(!1),a}function ip(e,s){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Cu);const{setup:o}=n;if(o){Fs();const l=e.setupContext=o.length>1?rp(e):null,i=yo(e),a=ho(o,e,0,[e.props,l]),r=or(a);if(Ws(),i(),(r||e.sp)&&!ao(e)&&Fr(e),r){if(a.then(ha,ha),s)return a.then(p=>{ya(e,p)}).catch(p=>{ul(p,e,0)});e.asyncDep=a}else ya(e,a)}else uc(e)}function ya(e,s,n){Re(s)?e.type.__ssrInlineRender?e.ssrRender=s:e.render=s:tt(s)&&(e.setupState=Cr(s)),uc(e)}function uc(e,s,n){const o=e.type;e.render||(e.render=o.render||$s);{const l=yo(e);Fs();try{Su(e)}finally{Ws(),l()}}}const ap={get(e,s){return Nt(e,"get",""),e[s]}};function rp(e){const s=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,ap),slots:e.slots,emit:e.emit,expose:s}}function bl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Cr(Yd(e.exposed)),{get(s,n){if(n in s)return s[n];if(n in ro)return ro[n](e)},has(s,n){return n in s||n in ro}})):e.proxy}function cp(e){return Re(e)&&"__vccOpts"in e}const be=(e,s)=>nu(e,s,bo);function dp(e,s,n){try{Zo(-1);const o=arguments.length;return o===2?tt(s)&&!Ie(s)?el(s)?Ze(e,null,[s]):Ze(e,s):Ze(e,null,s):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&el(n)&&(n=[n]),Ze(e,s,n))}finally{Zo(1)}}const up="3.5.27";let li;const wa=typeof window<"u"&&window.trustedTypes;if(wa)try{li=wa.createPolicy("vue",{createHTML:e=>e})}catch{}const pc=li?e=>li.createHTML(e):e=>e,pp="http://www.w3.org/2000/svg",fp="http://www.w3.org/1998/Math/MathML",Ns=typeof document<"u"?document:null,ka=Ns&&Ns.createElement("template"),vp={insert:(e,s,n)=>{s.insertBefore(e,n||null)},remove:e=>{const s=e.parentNode;s&&s.removeChild(e)},createElement:(e,s,n,o)=>{const l=s==="svg"?Ns.createElementNS(pp,e):s==="mathml"?Ns.createElementNS(fp,e):n?Ns.createElement(e,{is:n}):Ns.createElement(e);return e==="select"&&o&&o.multiple!=null&&l.setAttribute("multiple",o.multiple),l},createText:e=>Ns.createTextNode(e),createComment:e=>Ns.createComment(e),setText:(e,s)=>{e.nodeValue=s},setElementText:(e,s)=>{e.textContent=s},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ns.querySelector(e),setScopeId(e,s){e.setAttribute(s,"")},insertStaticContent(e,s,n,o,l,i){const a=n?n.previousSibling:s.lastChild;if(l&&(l===i||l.nextSibling))for(;s.insertBefore(l.cloneNode(!0),n),!(l===i||!(l=l.nextSibling)););else{ka.innerHTML=pc(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const r=ka.content;if(o==="svg"||o==="mathml"){const p=r.firstChild;for(;p.firstChild;)r.appendChild(p.firstChild);r.removeChild(p)}s.insertBefore(r,n)}return[a?a.nextSibling:s.firstChild,n?n.previousSibling:s.lastChild]}},Js="transition",Xn="animation",Nn=Symbol("_vtc"),fc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},vc=It({},Dr,fc),xp=e=>(e.displayName="Transition",e.props=vc,e),nn=xp((e,{slots:s})=>dp(xu,xc(e),s)),xn=(e,s=[])=>{Ie(e)?e.forEach(n=>n(...s)):e&&e(...s)},_a=e=>e?Ie(e)?e.some(s=>s.length>1):e.length>1:!1;function xc(e){const s={};for(const se in e)se in fc||(s[se]=e[se]);if(e.css===!1)return s;const{name:n="v",type:o,duration:l,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:r=`${n}-enter-to`,appearFromClass:p=i,appearActiveClass:b=a,appearToClass:u=r,leaveFromClass:v=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:j=`${n}-leave-to`}=e,U=bp(l),N=U&&U[0],L=U&&U[1],{onBeforeEnter:S,onEnter:E,onEnterCancelled:T,onLeave:O,onLeaveCancelled:A,onBeforeAppear:R=S,onAppear:Y=E,onAppearCancelled:we=T}=s,ce=(se,K,I,y)=>{se._enterCancelled=y,Qs(se,K?u:r),Qs(se,K?b:a),I&&I()},ze=(se,K)=>{se._isLeaving=!1,Qs(se,v),Qs(se,j),Qs(se,g),K&&K()},Ee=se=>(K,I)=>{const y=se?Y:E,z=()=>ce(K,se,I);xn(y,[K,z]),za(()=>{Qs(K,se?p:i),ws(K,se?u:r),_a(y)||$a(K,o,N,z)})};return It(s,{onBeforeEnter(se){xn(S,[se]),ws(se,i),ws(se,a)},onBeforeAppear(se){xn(R,[se]),ws(se,p),ws(se,b)},onEnter:Ee(!1),onAppear:Ee(!0),onLeave(se,K){se._isLeaving=!0;const I=()=>ze(se,K);ws(se,v),se._enterCancelled?(ws(se,g),ii(se)):(ii(se),ws(se,g)),za(()=>{se._isLeaving&&(Qs(se,v),ws(se,j),_a(O)||$a(se,o,L,I))}),xn(O,[se,I])},onEnterCancelled(se){ce(se,!1,void 0,!0),xn(T,[se])},onAppearCancelled(se){ce(se,!0,void 0,!0),xn(we,[se])},onLeaveCancelled(se){ze(se),xn(A,[se])}})}function bp(e){if(e==null)return null;if(tt(e))return[Ul(e.enter),Ul(e.leave)];{const s=Ul(e);return[s,s]}}function Ul(e){return hd(e)}function ws(e,s){s.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Nn]||(e[Nn]=new Set)).add(s)}function Qs(e,s){s.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const n=e[Nn];n&&(n.delete(s),n.size||(e[Nn]=void 0))}function za(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let mp=0;function $a(e,s,n,o){const l=e._endId=++mp,i=()=>{l===e._endId&&o()};if(n!=null)return setTimeout(i,n);const{type:a,timeout:r,propCount:p}=bc(e,s);if(!a)return o();const b=a+"end";let u=0;const v=()=>{e.removeEventListener(b,g),i()},g=j=>{j.target===e&&++u>=p&&v()};setTimeout(()=>{u<p&&v()},r+1),e.addEventListener(b,g)}function bc(e,s){const n=window.getComputedStyle(e),o=U=>(n[U]||"").split(", "),l=o(`${Js}Delay`),i=o(`${Js}Duration`),a=Ca(l,i),r=o(`${Xn}Delay`),p=o(`${Xn}Duration`),b=Ca(r,p);let u=null,v=0,g=0;s===Js?a>0&&(u=Js,v=a,g=i.length):s===Xn?b>0&&(u=Xn,v=b,g=p.length):(v=Math.max(a,b),u=v>0?a>b?Js:Xn:null,g=u?u===Js?i.length:p.length:0);const j=u===Js&&/\b(?:transform|all)(?:,|$)/.test(o(`${Js}Property`).toString());return{type:u,timeout:v,propCount:g,hasTransform:j}}function Ca(e,s){for(;e.length<s.length;)e=e.concat(e);return Math.max(...s.map((n,o)=>Sa(n)+Sa(e[o])))}function Sa(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ii(e){return(e?e.ownerDocument:document).body.offsetHeight}function gp(e,s,n){const o=e[Nn];o&&(s=(s?[s,...o]:[...o]).join(" ")),s==null?e.removeAttribute("class"):n?e.setAttribute("class",s):e.className=s}const sl=Symbol("_vod"),mc=Symbol("_vsh"),ji={name:"show",beforeMount(e,{value:s},{transition:n}){e[sl]=e.style.display==="none"?"":e.style.display,n&&s?n.beforeEnter(e):Qn(e,s)},mounted(e,{value:s},{transition:n}){n&&s&&n.enter(e)},updated(e,{value:s,oldValue:n},{transition:o}){!s!=!n&&(o?s?(o.beforeEnter(e),Qn(e,!0),o.enter(e)):o.leave(e,()=>{Qn(e,!1)}):Qn(e,s))},beforeUnmount(e,{value:s}){Qn(e,s)}};function Qn(e,s){e.style.display=s?e[sl]:"none",e[mc]=!s}const hp=Symbol(""),yp=/(?:^|;)\s*display\s*:/;function wp(e,s,n){const o=e.style,l=mt(n);let i=!1;if(n&&!l){if(s)if(mt(s))for(const a of s.split(";")){const r=a.slice(0,a.indexOf(":")).trim();n[r]==null&&Ko(o,r,"")}else for(const a in s)n[a]==null&&Ko(o,a,"");for(const a in n)a==="display"&&(i=!0),Ko(o,a,n[a])}else if(l){if(s!==n){const a=o[hp];a&&(n+=";"+a),o.cssText=n,i=yp.test(n)}}else s&&e.removeAttribute("style");sl in e&&(e[sl]=i?o.display:"",e[mc]&&(o.display="none"))}const Ia=/\s*!important$/;function Ko(e,s,n){if(Ie(n))n.forEach(o=>Ko(e,s,o));else if(n==null&&(n=""),s.startsWith("--"))e.setProperty(s,n);else{const o=kp(e,s);Ia.test(n)?e.setProperty(rn(o),n.replace(Ia,""),"important"):e[o]=n}}const Ma=["Webkit","Moz","ms"],Fl={};function kp(e,s){const n=Fl[s];if(n)return n;let o=on(s);if(o!=="filter"&&o in e)return Fl[s]=o;o=ar(o);for(let l=0;l<Ma.length;l++){const i=Ma[l]+o;if(i in e)return Fl[s]=i}return s}const Ta="http://www.w3.org/1999/xlink";function Ea(e,s,n,o,l,i=$d(s)){o&&s.startsWith("xlink:")?n==null?e.removeAttributeNS(Ta,s.slice(6,s.length)):e.setAttributeNS(Ta,s,n):n==null||i&&!cr(n)?e.removeAttribute(s):e.setAttribute(s,i?"":Ss(n)?String(n):n)}function ja(e,s,n,o,l){if(s==="innerHTML"||s==="textContent"){n!=null&&(e[s]=s==="innerHTML"?pc(n):n);return}const i=e.tagName;if(s==="value"&&i!=="PROGRESS"&&!i.includes("-")){const r=i==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(r!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(s),e._value=n;return}let a=!1;if(n===""||n==null){const r=typeof e[s];r==="boolean"?n=cr(n):n==null&&r==="string"?(n="",a=!0):r==="number"&&(n=0,a=!0)}try{e[s]=n}catch{}a&&e.removeAttribute(l||s)}function Us(e,s,n,o){e.addEventListener(s,n,o)}function _p(e,s,n,o){e.removeEventListener(s,n,o)}const Aa=Symbol("_vei");function zp(e,s,n,o,l=null){const i=e[Aa]||(e[Aa]={}),a=i[s];if(o&&a)a.value=o;else{const[r,p]=$p(s);if(o){const b=i[s]=Ip(o,l);Us(e,r,b,p)}else a&&(_p(e,r,a,p),i[s]=void 0)}}const Oa=/(?:Once|Passive|Capture)$/;function $p(e){let s;if(Oa.test(e)){s={};let o;for(;o=e.match(Oa);)e=e.slice(0,e.length-o[0].length),s[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rn(e.slice(2)),s]}let Wl=0;const Cp=Promise.resolve(),Sp=()=>Wl||(Cp.then(()=>Wl=0),Wl=Date.now());function Ip(e,s){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;ms(Mp(o,n.value),s,5,[o])};return n.value=e,n.attached=Sp(),n}function Mp(e,s){if(Ie(s)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},s.map(o=>l=>!l._stopped&&o&&o(l))}else return s}const Pa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Tp=(e,s,n,o,l,i)=>{const a=l==="svg";s==="class"?gp(e,o,a):s==="style"?wp(e,n,o):ol(s)?xi(s)||zp(e,s,n,o,i):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):Ep(e,s,o,a))?(ja(e,s,o),!e.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&Ea(e,s,o,a,i,s!=="value")):e._isVueCE&&(/[A-Z]/.test(s)||!mt(o))?ja(e,on(s),o,i,s):(s==="true-value"?e._trueValue=o:s==="false-value"&&(e._falseValue=o),Ea(e,s,o,a))};function Ep(e,s,n,o){if(o)return!!(s==="innerHTML"||s==="textContent"||s in e&&Pa(s)&&Re(n));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="autocorrect"||s==="sandbox"&&e.tagName==="IFRAME"||s==="form"||s==="list"&&e.tagName==="INPUT"||s==="type"&&e.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const l=e.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return Pa(s)&&mt(n)?!1:s in e}const gc=new WeakMap,hc=new WeakMap,nl=Symbol("_moveCb"),Ra=Symbol("_enterCb"),jp=e=>(delete e.props.mode,e),Ap=jp({name:"TransitionGroup",props:It({},vc,{tag:String,moveClass:String}),setup(e,{slots:s}){const n=Ei(),o=Lr();let l,i;return Kr(()=>{if(!l.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!Lp(l[0].el,n.vnode.el,a)){l=[];return}l.forEach(Pp),l.forEach(Rp);const r=l.filter(Np);ii(n.vnode.el),r.forEach(p=>{const b=p.el,u=b.style;ws(b,a),u.transform=u.webkitTransform=u.transitionDuration="";const v=b[nl]=g=>{g&&g.target!==b||(!g||g.propertyName.endsWith("transform"))&&(b.removeEventListener("transitionend",v),b[nl]=null,Qs(b,a))};b.addEventListener("transitionend",v)}),l=[]}),()=>{const a=Ne(e),r=xc(a);let p=a.tag||oe;if(l=[],i)for(let b=0;b<i.length;b++){const u=i[b];u.el&&u.el instanceof Element&&(l.push(u),wn(u,vo(u,r,o,n)),gc.set(u,{left:u.el.offsetLeft,top:u.el.offsetTop}))}i=s.default?$i(s.default()):[];for(let b=0;b<i.length;b++){const u=i[b];u.key!=null&&wn(u,vo(u,r,o,n))}return Ze(p,null,i)}}}),Op=Ap;function Pp(e){const s=e.el;s[nl]&&s[nl](),s[Ra]&&s[Ra]()}function Rp(e){hc.set(e,{left:e.el.offsetLeft,top:e.el.offsetTop})}function Np(e){const s=gc.get(e),n=hc.get(e),o=s.left-n.left,l=s.top-n.top;if(o||l){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${o}px,${l}px)`,i.transitionDuration="0s",e}}function Lp(e,s,n){const o=e.cloneNode(),l=e[Nn];l&&l.forEach(r=>{r.split(/\s+/).forEach(p=>p&&o.classList.remove(p))}),n.split(/\s+/).forEach(r=>r&&o.classList.add(r)),o.style.display="none";const i=s.nodeType===1?s:s.parentNode;i.appendChild(o);const{hasTransform:a}=bc(o);return i.removeChild(o),a}const an=e=>{const s=e.props["onUpdate:modelValue"]||!1;return Ie(s)?n=>Vo(s,n):s};function Dp(e){e.target.composing=!0}function Na(e){const s=e.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const us=Symbol("_assign");function La(e,s,n){return s&&(e=e.trim()),n&&(e=al(e)),e}const pe={created(e,{modifiers:{lazy:s,trim:n,number:o}},l){e[us]=an(l);const i=o||l.props&&l.props.type==="number";Us(e,s?"change":"input",a=>{a.target.composing||e[us](La(e.value,n,i))}),(n||i)&&Us(e,"change",()=>{e.value=La(e.value,n,i)}),s||(Us(e,"compositionstart",Dp),Us(e,"compositionend",Na),Us(e,"change",Na))},mounted(e,{value:s}){e.value=s??""},beforeUpdate(e,{value:s,oldValue:n,modifiers:{lazy:o,trim:l,number:i}},a){if(e[us]=an(a),e.composing)return;const r=(i||e.type==="number")&&!/^0\d/.test(e.value)?al(e.value):e.value,p=s??"";r!==p&&(document.activeElement===e&&e.type!=="range"&&(o&&s===n||l&&e.value.trim()===p)||(e.value=p))}},Ds={deep:!0,created(e,s,n){e[us]=an(n),Us(e,"change",()=>{const o=e._modelValue,l=Dn(e),i=e.checked,a=e[us];if(Ie(o)){const r=mi(o,l),p=r!==-1;if(i&&!p)a(o.concat(l));else if(!i&&p){const b=[...o];b.splice(r,1),a(b)}}else if(Bn(o)){const r=new Set(o);i?r.add(l):r.delete(l),a(r)}else a(yc(e,i))})},mounted:Da,beforeUpdate(e,s,n){e[us]=an(n),Da(e,s,n)}};function Da(e,{value:s,oldValue:n},o){e._modelValue=s;let l;if(Ie(s))l=mi(s,o.props.value)>-1;else if(Bn(s))l=s.has(o.props.value);else{if(s===n)return;l=yn(s,yc(e,!0))}e.checked!==l&&(e.checked=l)}const Vp={created(e,{value:s},n){e.checked=yn(s,n.props.value),e[us]=an(n),Us(e,"change",()=>{e[us](Dn(e))})},beforeUpdate(e,{value:s,oldValue:n},o){e[us]=an(o),s!==n&&(e.checked=yn(s,o.props.value))}},Ln={deep:!0,created(e,{value:s,modifiers:{number:n}},o){const l=Bn(s);Us(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?al(Dn(a)):Dn(a));e[us](e.multiple?l?new Set(i):i:i[0]),e._assigning=!0,_s(()=>{e._assigning=!1})}),e[us]=an(o)},mounted(e,{value:s}){Va(e,s)},beforeUpdate(e,s,n){e[us]=an(n)},updated(e,{value:s}){e._assigning||Va(e,s)}};function Va(e,s){const n=e.multiple,o=Ie(s);if(!(n&&!o&&!Bn(s))){for(let l=0,i=e.options.length;l<i;l++){const a=e.options[l],r=Dn(a);if(n)if(o){const p=typeof r;p==="string"||p==="number"?a.selected=s.some(b=>String(b)===String(r)):a.selected=mi(s,r)>-1}else a.selected=s.has(r);else if(yn(Dn(a),s)){e.selectedIndex!==l&&(e.selectedIndex=l);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Dn(e){return"_value"in e?e._value:e.value}function yc(e,s){const n=s?"_trueValue":"_falseValue";return n in e?e[n]:s}const Bp={created(e,s,n){No(e,s,n,null,"created")},mounted(e,s,n){No(e,s,n,null,"mounted")},beforeUpdate(e,s,n,o){No(e,s,n,o,"beforeUpdate")},updated(e,s,n,o){No(e,s,n,o,"updated")}};function Up(e,s){switch(e){case"SELECT":return Ln;case"TEXTAREA":return pe;default:switch(s){case"checkbox":return Ds;case"radio":return Vp;default:return pe}}}function No(e,s,n,o,l){const a=Up(e.tagName,n.props&&n.props.type)[l];a&&a(e,s,n,o)}const Fp=["ctrl","shift","alt","meta"],Wp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,s)=>Fp.some(n=>e[`${n}Key`]&&!s.includes(n))},je=(e,s)=>{const n=e._withMods||(e._withMods={}),o=s.join(".");return n[o]||(n[o]=((l,...i)=>{for(let a=0;a<s.length;a++){const r=Wp[s[a]];if(r&&r(l,s))return}return e(l,...i)}))},Kp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xs=(e,s)=>{const n=e._withKeys||(e._withKeys={}),o=s.join(".");return n[o]||(n[o]=(l=>{if(!("key"in l))return;const i=rn(l.key);if(s.some(a=>a===i||Kp[a]===i))return e(l)}))},Hp=It({patchProp:Tp},vp);let Ba;function Gp(){return Ba||(Ba=Gu(Hp))}const qp=((...e)=>{const s=Gp().createApp(...e),{mount:n}=s;return s.mount=o=>{const l=Jp(o);if(!l)return;const i=s._component;!Re(i)&&!i.render&&!i.template&&(i.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const a=n(l,!1,Yp(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),a},s});function Yp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Jp(e){return mt(e)?document.querySelector(e):e}const Xp="modulepreload",Qp=function(e,s){return new URL(e,s).href},Ua={},ai=function(s,n,o){let l=Promise.resolve();if(n&&n.length>0){let b=function(u){return Promise.all(u.map(v=>Promise.resolve(v).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const a=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),p=r?.nonce||r?.getAttribute("nonce");l=b(n.map(u=>{if(u=Qp(u,o),u in Ua)return;Ua[u]=!0;const v=u.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(o)for(let U=a.length-1;U>=0;U--){const N=a[U];if(N.href===u&&(!v||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${g}`))return;const j=document.createElement("link");if(j.rel=v?"stylesheet":Xp,v||(j.as="script"),j.crossOrigin="",j.href=u,p&&j.setAttribute("nonce",p),document.head.appendChild(j),v)return new Promise((U,N)=>{j.addEventListener("load",U),j.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return l.then(a=>{for(const r of a||[])r.status==="rejected"&&i(r.reason);return s().catch(i)})},Zp="Roche_db",ef=11,Pe={PERSONAS:"personas",CONTACTS:"contacts",SETTINGS:"settings",PRESETS:"presets",CONVERSATIONS:"conversations",MESSAGES:"messages",WORLDBOOK_CATEGORIES:"worldbook_categories",WORLDBOOK_ENTRIES:"worldbook_entries",RELATIONSHIPS:"relationships",STICKER_CATEGORIES:"sticker_categories",STICKERS:"stickers",CORE_MEMORIES:"core_memories",FACT_MEMORIES:"fact_memories",REGEX_CATEGORIES:"regex_categories",REGEX_ENTRIES:"regex_entries"};let Lt=null,Zn=null;const Is=()=>Lt?Promise.resolve():Zn||(Zn=new Promise((e,s)=>{const n=indexedDB.open(Zp,ef);n.onerror=o=>{const l=o.target.error;console.error("IndexedDB error:",l),Zn=null,s(l||"Error opening database")},n.onsuccess=o=>{Lt=o.target.result,e()},n.onupgradeneeded=o=>{const l=o.target.result;if(l.objectStoreNames.contains(Pe.PERSONAS)||l.createObjectStore(Pe.PERSONAS,{keyPath:"id"}),l.objectStoreNames.contains(Pe.CONTACTS)||l.createObjectStore(Pe.CONTACTS,{keyPath:"id"}),l.objectStoreNames.contains(Pe.SETTINGS)||l.createObjectStore(Pe.SETTINGS,{keyPath:"id"}),l.objectStoreNames.contains(Pe.PRESETS)||l.createObjectStore(Pe.PRESETS,{keyPath:"id"}),l.objectStoreNames.contains(Pe.CONVERSATIONS)||l.createObjectStore(Pe.CONVERSATIONS,{keyPath:"id"}),!l.objectStoreNames.contains(Pe.MESSAGES)){const i=l.createObjectStore(Pe.MESSAGES,{keyPath:"id"});i.createIndex("conversationId","conversationId",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1})}if(l.objectStoreNames.contains(Pe.WORLDBOOK_CATEGORIES)||l.createObjectStore(Pe.WORLDBOOK_CATEGORIES,{keyPath:"id"}),l.objectStoreNames.contains(Pe.WORLDBOOK_ENTRIES)||l.createObjectStore(Pe.WORLDBOOK_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),!l.objectStoreNames.contains(Pe.RELATIONSHIPS)){const i=l.createObjectStore(Pe.RELATIONSHIPS,{keyPath:"id"});i.createIndex("sourceId","sourceId",{unique:!1}),i.createIndex("targetId","targetId",{unique:!1}),i.createIndex("type","type",{unique:!1})}if(l.objectStoreNames.contains(Pe.STICKER_CATEGORIES)||l.createObjectStore(Pe.STICKER_CATEGORIES,{keyPath:"id"}),l.objectStoreNames.contains(Pe.STICKERS)||l.createObjectStore(Pe.STICKERS,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),l.objectStoreNames.contains(Pe.CORE_MEMORIES)||l.createObjectStore(Pe.CORE_MEMORIES,{keyPath:"conversationId"}),!l.objectStoreNames.contains(Pe.FACT_MEMORIES)){const i=l.createObjectStore(Pe.FACT_MEMORIES,{keyPath:"id"});i.createIndex("conversationId","conversationId",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1})}l.objectStoreNames.contains(Pe.REGEX_CATEGORIES)||l.createObjectStore(Pe.REGEX_CATEGORIES,{keyPath:"id"}),l.objectStoreNames.contains(Pe.REGEX_ENTRIES)||l.createObjectStore(Pe.REGEX_ENTRIES,{keyPath:"id"}).createIndex("categoryId","categoryId",{unique:!1}),l.objectStoreNames.contains("chats")&&l.deleteObjectStore("chats")}}),Zn),ss=async e=>(Lt||await Is(),new Promise((s,n)=>{const i=Lt.transaction([e],"readonly").objectStore(e).getAll();i.onsuccess=()=>s(i.result),i.onerror=()=>n(i.error)})),Je=async(e,s)=>(Lt||await Is(),new Promise((n,o)=>{const a=Lt.transaction([e],"readwrite").objectStore(e).put(s);a.onsuccess=()=>n(),a.onerror=()=>o(a.error)})),os=async(e,s)=>(Lt||await Is(),new Promise((n,o)=>{const a=Lt.transaction([e],"readwrite").objectStore(e).delete(s);a.onsuccess=()=>n(),a.onerror=()=>o(a.error)})),wc=async()=>{Lt||await Is();const n=Lt.transaction([Pe.SETTINGS],"readonly").objectStore(Pe.SETTINGS).get("current");return new Promise((o,l)=>{n.onsuccess=()=>o(n.result),n.onerror=()=>l(n.error)})},Ai=async e=>Je(Pe.SETTINGS,{...e,id:"current"}),mo=async()=>ss(Pe.PRESETS),Oi=async e=>Je(Pe.PRESETS,e),Se=Pe,kc=async e=>(Lt||await Is(),new Promise((s,n)=>{const a=Lt.transaction([Pe.MESSAGES],"readonly").objectStore(Pe.MESSAGES).index("conversationId").getAll(IDBKeyRange.only(e));a.onsuccess=()=>{const r=a.result;r.sort((p,b)=>p.timestamp-b.timestamp),s(r)},a.onerror=()=>n(a.error)})),_c=async e=>(Lt||await Is(),new Promise((s,n)=>{const a=Lt.transaction([Pe.FACT_MEMORIES],"readonly").objectStore(Pe.FACT_MEMORIES).index("conversationId").getAll(IDBKeyRange.only(e));a.onsuccess=()=>{const r=a.result;r.sort((p,b)=>b.timestamp-p.timestamp),s(r)},a.onerror=()=>n(a.error)})),tf=async e=>(Lt||await Is(),new Promise((s,n)=>{const a=Lt.transaction([Pe.REGEX_ENTRIES],"readonly").objectStore(Pe.REGEX_ENTRIES).index("categoryId").getAll(IDBKeyRange.only(e));a.onsuccess=()=>{const r=a.result;r.sort((p,b)=>(p.order||0)-(b.order||0)),s(r)},a.onerror=()=>n(a.error)})),ri=Object.freeze(Object.defineProperty({__proto__:null,DB_STORES:Se,deleteItem:os,getAll:ss,getFactMemoriesByConversationId:_c,getMessagesByConversationId:kc,getPresets:mo,getRegexEntriesByCategory:tf,getSettings:wc,initDB:Is,put:Je,savePreset:Oi,saveSettings:Ai},Symbol.toStringTag,{value:"Module"})),Fa=[{id:"p1",handle:"studio_noir",name:"Noir Official",persona:"A mysterious, high-end design studio director obsessed with brutalism and silence.",avatar:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",bio:"Curating architectural silence and high-contrast fashion. Based in Paris.",link:"noir.studio/archive",location:"Paris, FR",stats:{followers:"18.4k",following:"942"}}],k=Ks({activePersonaId:localStorage.getItem("noir_active_persona_id")||"p1",personas:[],contacts:[],conversations:[],messages:{},relationships:[],stickerCategories:[],stickers:[],regexCategories:[],regexEntries:[],isInitialized:!1,wallet:JSON.parse(localStorage.getItem("noir_wallet_data")||JSON.stringify({balance:0,hasPassword:!1,password:"",transactions:[]})),videoCallState:{isActive:!1,isMinimized:!1,chatId:null}}),Kl=(e,s)=>{k.videoCallState.isActive=e,s&&(k.videoCallState.chatId=s),e||(k.videoCallState.isMinimized=!1,k.videoCallState.chatId=null)},sf=e=>{k.videoCallState.isMinimized=e},Pi=()=>{localStorage.setItem("noir_wallet_data",JSON.stringify(k.wallet))},ci=(e,s,n)=>{const o=Date.now(),l={id:crypto.randomUUID(),type:e,amount:s,title:n,timestamp:o,status:"completed"};if(e==="deposit")k.wallet.balance+=s;else if(e==="withdraw"||e==="transfer"){if(k.wallet.balance<s)return!1;k.wallet.balance-=s}return k.wallet.transactions.unshift(l),Pi(),!0},Wa=(e,s)=>{k.wallet.balance+=e;const n={id:crypto.randomUUID(),type:"deposit",amount:e,title:"Refund: "+s,timestamp:Date.now(),status:"completed"};k.wallet.transactions.unshift(n),Pi()},nf=e=>{k.wallet.password=e,k.wallet.hasPassword=!0,Pi()},zc=e=>k.wallet.password===e,of=async()=>{const e=await ss(Se.REGEX_CATEGORIES);k.regexCategories=e||[];const s=await ss(Se.REGEX_ENTRIES);k.regexEntries=s||[]},lf=async()=>{try{await Is();const e=await ss(Se.PERSONAS);if(e.length>0){const a=e.filter(r=>r&&r.id);k.personas.splice(0,k.personas.length,...a)}else{k.personas.splice(0,k.personas.length,...Fa);for(const a of Fa)await Je(Se.PERSONAS,a)}const n=(await ss(Se.CONTACTS)).filter(a=>a&&a.id);k.contacts.splice(0,k.contacts.length,...n);const o=await ss(Se.CONVERSATIONS);k.conversations.splice(0,k.conversations.length,...o.reverse());const l=await ss(Se.RELATIONSHIPS);k.relationships.splice(0,k.relationships.length,...l),await xf(),await of();const i=localStorage.getItem("noir_active_persona_id");i&&(k.activePersonaId=i),k.isInitialized=!0,console.log("Store initialized. Actve:",k.activePersonaId,"Personas:",k.personas.length)}catch(e){console.error("Failed to initialize store:",e)}},di=be(()=>k.personas.find(e=>e.id===k.activePersonaId)||k.personas[0]),af=async e=>{k.personas.push(e),await Je(Se.PERSONAS,JSON.parse(JSON.stringify(e)))},rf=async e=>{const s=k.personas.findIndex(n=>n.id===e.id);s!==-1&&(k.personas[s]=e,await Je(Se.PERSONAS,JSON.parse(JSON.stringify(e))))},cf=async e=>{const s=k.personas.findIndex(n=>n.id===e);if(s!==-1&&(k.personas.splice(s,1),await os(Se.PERSONAS,e),k.activePersonaId===e)){const n=k.personas[0];n&&ml(n.id)}},ml=e=>{console.log("Setting active persona:",e),k.activePersonaId=e,localStorage.setItem("noir_active_persona_id",e)},df=async e=>{k.contacts.push(e),await Je(Se.CONTACTS,e)},uf=async e=>{const s=k.contacts.findIndex(n=>n.id===e.id);s!==-1&&(k.contacts[s]=e,await Je(Se.CONTACTS,e))},pf=async e=>{const s=k.contacts.findIndex(n=>n.id===e);s!==-1&&(k.contacts.splice(s,1),await os(Se.CONTACTS,e))},Ka=async e=>{if(!k.conversations.find(n=>n.id===e.id)){k.conversations.unshift(e);const n=JSON.parse(JSON.stringify(e));await Je(Se.CONVERSATIONS,n);const o=e.myActivePersonaId||k.activePersonaId,l=e.participants?.find(i=>i!==o&&i!=="user"&&i!==e.myActivePersonaId)||e.contactId;o&&l&&(k.relationships.find(a=>a.sourceId===o&&a.targetId===l)||await $c(o,l,"new"))}},Vn=async e=>{const s=k.conversations.findIndex(n=>n.id===e.id);if(s!==-1){const n={...k.conversations[s],...e};k.conversations[s]=n;try{const l=JSON.parse(JSON.stringify(Ne(n)));await Je(Se.CONVERSATIONS,l)}catch(o){console.error("Failed to serialize conversation for DB:",o)}}},Ho=async e=>{k.messages[e]||(k.messages[e]=[]);const s=await kc(e);k.messages[e]=s},jt=async(e,s)=>{k.messages[e]||(k.messages[e]=[]),k.messages[e].push(s),await Je(Se.MESSAGES,s);const n=k.conversations.find(o=>o.id===e);n&&Vn({...n,lastMessage:s.text,time:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),updatedAt:s.timestamp}),setTimeout(()=>{kf(e).catch(o=>{console.warn("[Memory] Summarization check failed:",o)})},500)},Xs=async(e,s)=>{if(!k.messages[e])return;const n=k.messages[e].findIndex(o=>o.id===s.id);n!==-1&&(k.messages[e][n]=s,await Je(Se.MESSAGES,s))},ff=async(e,s)=>{if(!k.messages[e])return;const n=k.messages[e].findIndex(o=>o.id===s);n!==-1&&(k.messages[e].splice(n,1),await os(Se.MESSAGES,s))},Hl=async(e,s)=>{if(k.messages[e]){k.messages[e]=k.messages[e].filter(n=>!s.includes(n.id));for(const n of s)await os(Se.MESSAGES,n)}},gl=e=>k.conversations.find(s=>s.id===e),$c=async(e,s,n)=>{const o=k.relationships.find(i=>i.sourceId===e&&i.targetId===s);if(o){o.type!==n&&await Cc(o.id,n);return}const l={id:crypto.randomUUID(),sourceId:e,targetId:s,type:n,createdAt:Date.now()};k.relationships.push(l),await Je(Se.RELATIONSHIPS,l)},Cc=async(e,s)=>{const n=k.relationships.findIndex(o=>o.id===e);if(n!==-1){const o={...k.relationships[n],type:s};k.relationships[n]=o,await Je(Se.RELATIONSHIPS,o)}},vf=async e=>{const s=k.relationships.findIndex(n=>n.id===e);s!==-1&&(k.relationships.splice(s,1),await os(Se.RELATIONSHIPS,e))},xf=async()=>{const e=await ss(Se.STICKER_CATEGORIES);k.stickerCategories=e||[];const s=await ss(Se.STICKERS);k.stickers=s||[]},Ha=async(e,s)=>{const n={id:crypto.randomUUID(),name:e,coverUrl:s||"",createdAt:Date.now()};return k.stickerCategories.push(n),await Je(Se.STICKER_CATEGORIES,n),n},bf=async(e,s)=>{const n=k.stickerCategories.findIndex(o=>o.id===e);if(n!==-1){const o={...k.stickerCategories[n],...s};k.stickerCategories[n]=o,await Je(Se.STICKER_CATEGORIES,o)}},Ga=async e=>{const s=k.stickerCategories.findIndex(n=>n.id===e);if(s!==-1){k.stickerCategories.splice(s,1),await os(Se.STICKER_CATEGORIES,e);const n=k.stickers.filter(o=>o.categoryId===e);for(const o of n)await ui(o.id)}},Lo=async(e,s,n)=>{const o={id:crypto.randomUUID(),categoryId:e,url:s,keyword:n||"sticker",createdAt:Date.now()};return k.stickers.push(o),await Je(Se.STICKERS,o),o},ui=async e=>{const s=k.stickers.findIndex(n=>n.id===e);s!==-1&&(k.stickers.splice(s,1),await os(Se.STICKERS,e))},Pn=e=>k.stickers.filter(s=>s.categoryId===e),hl=async e=>{try{return(await ss(Se.CORE_MEMORIES)).find(o=>o.conversationId===e)||null}catch(s){return console.error("Failed to load core memory:",s),null}},Sc=async(e,s)=>{const n={conversationId:e,summary:s,lastUpdatedAt:Date.now()};return await Je(Se.CORE_MEMORIES,n),n},Ic=async e=>{try{return await _c(e)}catch(s){return console.error("Failed to load fact memories:",s),[]}},mf=async(e,s)=>{const n={id:crypto.randomUUID(),conversationId:e,...s,timestamp:Date.now()};return await Je(Se.FACT_MEMORIES,n),n},gf=async e=>{await os(Se.FACT_MEMORIES,e)},hf=e=>{if(!e||e==="null")return null;try{const s=new Date(e);return isNaN(s.getTime())?null:s.getTime()}catch{return null}},yf=async e=>{try{const n=(await ss(Se.FACT_MEMORIES)).find(o=>o.id===e);n&&(n.appointmentMentioned=!0,await Je(Se.FACT_MEMORIES,n),console.log("[Appointment] Marked as mentioned:",e))}catch(s){console.error("[Appointment] Failed to mark as mentioned:",s)}},wf=async e=>{try{const s=localStorage.getItem("noir_mounted_apis");if(s){const i=JSON.parse(s)[e];if(i&&i!=="default"){const{getPresets:a}=await ai(async()=>{const{getPresets:b}=await Promise.resolve().then(()=>ri);return{getPresets:b}},void 0,import.meta.url),p=(await a()).find(b=>b.id===i);if(p)return{endpoint:p.endpoint,apiKey:p.apiKey,model:p.model,temperature:p.temperature??.3}}}const{getSettings:n}=await ai(async()=>{const{getSettings:l}=await Promise.resolve().then(()=>ri);return{getSettings:l}},void 0,import.meta.url),o=await n();return o?{endpoint:o.endpoint,apiKey:o.apiKey,model:o.model,temperature:.3}:null}catch(s){return console.error("[Memory] Failed to get mounted API config:",s),null}},Do=new Set,kf=async e=>{if(Do.has(e)){console.log(`[Memory] Summarization already in progress for ${e}, skipping.`);return}try{const s=k.conversations.find(p=>p.id===e);if(!s||!(s.localSettings?.longTermMemoryEnabled===!0))return;const o=s.localSettings?.ltmSummarizeTrigger||100,l=k.messages[e]||[],a=(await hl(e))?.lastUpdatedAt||0,r=l.filter(p=>p.timestamp>a);if(r.length>=o){Do.add(e),console.log(`[Memory] Triggering auto-summarization for ${e}. ${r.length} new messages.`);try{await Mc(e,r)}finally{Do.delete(e)}}}catch(s){Do.delete(e),console.error("[Memory] Check summarization failed:",s)}},Mc=async(e,s)=>{try{const n=await wf("memorySummarization");if(!n||!n.apiKey){console.warn("[Memory] No API configured for summarization");return}const l=k.conversations.find(L=>L.id===e)?.localSettings?.ltmCoreMaxChars||500,a=(await hl(e))?.summary||"",r=L=>{const S=new Date(L),E=S.getFullYear(),T=String(S.getMonth()+1).padStart(2,"0"),O=String(S.getDate()).padStart(2,"0"),A=String(S.getHours()).padStart(2,"0"),R=String(S.getMinutes()).padStart(2,"0");return`${E}-${T}-${O} ${A}:${R}`},p=s.map(L=>{const S=L.isMe?"User":k.contacts.find(O=>O.id===L.senderId)?.name||"Assistant",E=L.timestamp?`[${r(L.timestamp)}]`:"";let T=L.text||"";return L.type==="transfer"?T=`[${L.amount}${L.recipientName||""}${L.note?": "+L.note:""}]`:L.type==="sticker"?T=`[: ${L.keyword||""}]`:L.type==="voice"?T=`[: ${L.text||""}]`:L.type==="image"?T="[]":L.type==="payment_notice"?T=L.action==="collect"?`[${L.amount}]`:`[${L.amount}]`:T||(T="[]"),`${E} ${S}: ${T}`}).join(`
`),b=new Date,v=`

15
****
 
1. 
2. 
3. 
4. 
5. 

 
- 
- TODO
- 
- 

{"who": "", "what": "", "when": "", "fact_type": "", "appointment_time": "null"}


- event: 
- preference: 
- relationship: 
- identity: 
- appointment: 

 YYYY-MM-DD HH:mm ${`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`}
 appointment  appointment_time
 
 //

2
${l}


${a?`${a}
`:""}
${p}

JSON
{"facts": [{"who": "", "what": "", "when": "YYYY-MM-DD HH:mm", "fact_type": "", "appointment_time": "YYYY-MM-DD HH:mmnull"}], "core_summary": ""}`,g=n.endpoint.replace(/\/+$/,"")+"/chat/completions",j=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.apiKey}`},body:JSON.stringify({model:n.model,messages:[{role:"system",content:""},{role:"user",content:v}],temperature:n.temperature,response_format:{type:"json_object"}})});if(!j.ok)throw new Error(`API Error: ${j.status}`);const N=(await j.json()).choices?.[0]?.message?.content;if(N)try{const L=JSON.parse(N);if(L.facts&&Array.isArray(L.facts)){for(const S of L.facts){const E=Array.isArray(S.who)?S.who:[S.who].filter(Boolean);await mf(e,{who:E,action:S.what,when:S.when||null,factType:S.fact_type||"other",appointmentTime:S.appointment_time?hf(S.appointment_time):null,appointmentMentioned:!1})}console.log(`[Memory] Saved ${L.facts.length} fact memories`)}L.core_summary&&(await Sc(e,L.core_summary),console.log("[Memory] Updated core memory"))}catch(L){console.error("[Memory] Failed to parse AI response:",L)}}catch(n){console.error("[Memory] Auto-summarization failed:",n)}},pi=3,_f=15,zf=.2,$f=30,qa=1.5,Ya=.75,fi=e=>e?e.toLowerCase().replace(/[""''\s]+/g," ").split(" ").filter(s=>s.length>0):[],Cf=(e,s,n)=>{const o=fi(e),l=fi(s),i=l.length;if(o.length===0||i===0)return 0;const a={};l.forEach(p=>{a[p]=(a[p]||0)+1});let r=0;return o.forEach(p=>{const b=a[p]||0;if(b>0){const u=Math.log(2),v=b*(qa+1)/(b+qa*(1-Ya+Ya*i/n));r+=u*v}}),r},Sf=e=>{const o=(Date.now()-e)/(1e3*60*60*24);return o<=pi?1:Math.exp(-.1*(o-pi))},If=(e,s,n)=>{const o=k.conversations.find(i=>i.id===e);if(!o)return!1;if(o.type==="group"||o.isGroup){const i=o.members||[];return n.some(a=>i.includes(a))}else return n.includes(e)||s===e},Ja=e=>{if(e.length<=1)return e;const s=new Map;return e.forEach(n=>{const l=(n.action||n.what||"").toLowerCase().trim().substring(0,50);(!s.has(l)||n.timestamp>(s.get(l).timestamp||0))&&s.set(l,n)}),Array.from(s.values())},Xa=async(e,s)=>{const n={recentFacts:[],rankedFacts:[],noteMemory:null,coreMemories:[],upcomingAppointments:[],overdueAppointments:[]};try{const o=k.conversations.find(L=>L.id===e);if(!o)return n;const l=o.localSettings?.mountedMemorySources||[],a=o.type==="group"||o.isGroup?o.members||[]:[o.id],r=[e,...l];let p=[],b=[];const u=Date.now(),v=u-pi*24*60*60*1e3,g=u-$f*24*60*60*1e3;for(const L of r){if(L!==e&&!If(L,e,a))continue;const S=await hl(L);if(S?.summary){const T=k.conversations.find(A=>A.id===L),O=T?.title||T?.handle||(T?.type==="group"?"":k.contacts.find(A=>A.id===L)?.name||"");n.coreMemories.push({source:O,summary:S.summary})}const E=await Ic(L);E&&E.length>0&&E.forEach(T=>{const O={...T,sourceConversationId:L,sourceType:k.conversations.find(A=>A.id===L)?.type==="group"?"group":"dm"};T.timestamp>=v?n.recentFacts.push(O):(p.push(O),T.timestamp<g&&b.push(O))})}if(n.recentFacts=Ja(n.recentFacts),p.length>0&&s){const L=p.reduce((E,T)=>E+fi(T.action||T.what||"").length,0)/p.length;p=p.map(E=>({...E,score:Cf(s,E.action||E.what||"",L)*Sf(E.timestamp||0)})),p.sort((E,T)=>T.score-E.score),p=Ja(p);const S=_f-n.recentFacts.length;n.rankedFacts=p.slice(0,Math.max(0,S))}if(b.length>0&&Math.random()<zf){const L=Math.floor(Math.random()*b.length);n.noteMemory=b[L],console.log("[Memory] Note triggered: surfacing old memory")}const j=10800*1e3,N=[...n.recentFacts,...p].filter(L=>L.factType==="appointment"&&L.appointmentTime&&!L.appointmentMentioned);n.upcomingAppointments=N.filter(L=>L.appointmentTime>u&&L.appointmentTime<=u+j),n.overdueAppointments=N.filter(L=>L.appointmentTime<=u&&L.appointmentTime>u-j),(n.upcomingAppointments.length>0||n.overdueAppointments.length>0)&&console.log("[Appointment] Found active appointments:",{upcoming:n.upcomingAppointments.length,overdue:n.overdueAppointments.length})}catch(o){console.error("[Memory] Failed to load mounted memories:",o)}return n},Qa=async(e,s)=>{const n={id:crypto.randomUUID(),name:e,scope:s,timestamp:Date.now()};return k.regexCategories.push(n),await Je(Se.REGEX_CATEGORIES,n),n},Mf=async(e,s)=>{const n=k.regexCategories.findIndex(o=>o.id===e);if(n!==-1){const o={...k.regexCategories[n],...s};k.regexCategories[n]=o,await Je(Se.REGEX_CATEGORIES,o)}},Za=async e=>{const s=k.regexCategories.findIndex(n=>n.id===e);if(s!==-1){k.regexCategories.splice(s,1),await os(Se.REGEX_CATEGORIES,e);const n=k.regexEntries.filter(o=>o.categoryId===e);for(const o of n)await Tc(o.id)}},er=async e=>{const s={id:crypto.randomUUID(),...e,timestamp:Date.now()};return k.regexEntries.push(s),await Je(Se.REGEX_ENTRIES,s),s},tr=async(e,s)=>{const n=k.regexEntries.findIndex(o=>o.id===e);if(n!==-1){const o={...k.regexEntries[n],...s};k.regexEntries[n]=o,await Je(Se.REGEX_ENTRIES,o)}},Tc=async e=>{const s=k.regexEntries.findIndex(n=>n.id===e);s!==-1&&(k.regexEntries.splice(s,1),await os(Se.REGEX_ENTRIES,e))},Gl=e=>k.regexEntries.filter(s=>s.categoryId===e).sort((s,n)=>(s.order||0)-(n.order||0)),rt=(e,s)=>{const n=e.__vccOpts||e;for(const[o,l]of s)n[o]=l;return n},Tf={class:"h-full flex flex-col bg-background-light text-black"},Ef={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-50"},jf={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Af={class:"flex-1"},Of={class:"flex-1 flex justify-end"},Pf={class:"flex-1 overflow-y-auto w-full pb-[calc(6rem+env(safe-area-inset-bottom))]"},Rf={class:"relative px-6 py-8 border-b border-gray-50"},Nf={class:"ml-14 mt-6 flex items-center gap-6 text-black"},Lf={__name:"Feed",emits:["close","navigate"],setup(e,{emit:s}){return(n,o)=>(d(),f("div",Tf,[t("header",Ef,[t("div",jf,[t("div",Af,[t("button",{onClick:o[0]||(o[0]=l=>n.$emit("close")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...o[4]||(o[4]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),o[6]||(o[6]=t("div",{class:"flex justify-center"},[t("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir")],-1)),t("div",Of,[t("button",{onClick:o[1]||(o[1]=l=>n.$emit("navigate","following")),class:"size-10 rounded-full bg-white border border-gray-100 flex items-center justify-center overflow-hidden hover:bg-gray-50 transition-colors -mr-2"},[...o[5]||(o[5]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"text-black"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)])])])])]),t("main",Pf,[t("article",Rf,[o[10]||(o[10]=kt('<div class="thread-line" data-v-72b05aaa></div><div class="flex items-start gap-4 mb-4 relative z-10" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-900 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="w-1/2 h-[1px] bg-white rotate-45" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><div class="flex items-center gap-1" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>studio_noir</span><span class="material-symbols-outlined text-[14px] active-icon" data-v-72b05aaa>verified</span></div><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>4m</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> Symmetry in stone. A study of concrete textures and morning shadows. Winter editorial. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div>',2)),t("div",{onClick:o[2]||(o[2]=l=>n.$emit("navigate","post",{id:"p1"})),class:"cursor-pointer ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-[4/5] editorial-image",style:{"background-image":"url('https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E')","background-size":"cover","background-position":"center"}}),t("div",Nf,[o[8]||(o[8]=t("button",{class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[t("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),t("span",{class:"text-[12px] font-medium"},"2.8k")],-1)),t("button",{onClick:o[3]||(o[3]=l=>n.$emit("navigate","post",{id:"p1"})),class:"icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity"},[...o[7]||(o[7]=[t("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})],-1),t("span",{class:"text-[12px] font-medium"},"56",-1)])]),o[9]||(o[9]=kt('<button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>112</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button>',2))])]),o[11]||(o[11]=kt('<article class="relative px-6 py-8 border-b border-gray-50" data-v-72b05aaa><div class="flex items-start gap-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-zinc-50 overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-4 rounded-sm border border-black rotate-12" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>elena_di_rossi</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>2h</span></div><p class="text-[15px] leading-relaxed mt-1 font-serif italic text-zinc-900" data-v-72b05aaa> In design, if you are not taking a risk, you are not doing anything new. Perfection is the enemy. </p><div class="mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>892</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>4</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div></article><article class="relative px-6 py-8" data-v-72b05aaa><div class="flex items-start gap-4 mb-4" data-v-72b05aaa><div class="size-10 shrink-0 rounded-full bg-black overflow-hidden border border-gray-100 flex items-center justify-center" data-v-72b05aaa><div class="size-5 border-2 border-white/40 rounded-full" data-v-72b05aaa></div></div><div class="flex flex-col flex-1" data-v-72b05aaa><div class="flex items-center justify-between" data-v-72b05aaa><span class="font-bold text-[14px] tracking-tight" data-v-72b05aaa>arc_digest</span><span class="text-xs font-light tracking-tight text-neutral-400" data-v-72b05aaa>5h</span></div><p class="text-[15px] leading-relaxed mt-1 font-normal text-zinc-800" data-v-72b05aaa> High desert sanctuary. Minimalism meets nature. </p></div><button class="text-zinc-300" data-v-72b05aaa><span class="material-symbols-outlined" data-v-72b05aaa>more_horiz</span></button></div><div class="ml-14 mt-1 rounded-sm overflow-hidden border border-gray-100 bg-zinc-50 aspect-video editorial-image" style="background-image:url(&#39;https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0&#39;);background-size:cover;background-position:center;" data-v-72b05aaa></div><div class="ml-14 mt-6 flex items-center gap-6 text-black" data-v-72b05aaa><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>2.1k</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>12</span></button><button class="icon-btn flex items-center gap-1.5 hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><polyline points="17 1 21 5 17 9" data-v-72b05aaa></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-72b05aaa></path><polyline points="7 23 3 19 7 15" data-v-72b05aaa></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-72b05aaa></path></svg><span class="text-[12px] font-medium" data-v-72b05aaa>14</span></button><button class="icon-btn hover:opacity-60 transition-opacity" data-v-72b05aaa><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-72b05aaa><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-72b05aaa></path></svg></button></div></article>',2))])]))}},Df=rt(Lf,[["__scopeId","data-v-72b05aaa"]]),Vf={class:"fixed inset-x-0 bottom-0 h-[92%] z-[60] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},Bf={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},Uf={class:"text-[16px] font-bold tracking-tight"},Ff={class:"flex-1 overflow-y-auto"},Wf={key:0,class:"pb-[100px]"},Kf={class:"px-4 py-2 mt-2"},Hf={class:"flex items-center gap-2 bg-neutral-100 px-3 py-2 rounded-xl"},Gf=["onClick"],qf={class:"flex items-center gap-3"},Yf={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Jf={class:"flex flex-col"},Xf={class:"text-[14px] font-bold leading-tight"},Qf={class:"text-[13px] text-neutral-500 leading-tight"},Zf={key:1,class:"pb-[100px] px-4 pt-2"},e0={class:"flex flex-col gap-4"},t0=["onClick"],s0={class:"flex-1"},n0={class:"text-[15px] font-bold tracking-tight"},o0={class:"text-[12px] text-zinc-500"},l0={__name:"NewMessage",emits:["close","create-group","navigate"],setup(e,{emit:s}){const n=s,o=C(""),l=be(()=>{if(!o.value)return k.contacts;const u=o.value.toLowerCase();return k.contacts.filter(v=>v.handle.toLowerCase().includes(u)||v.name&&v.name.toLowerCase().includes(u))}),i=C("contacts"),a=C(null),r=u=>{a.value=u,i.value="persona"},p=u=>{ml(u),n("navigate","chat",{id:a.value}),n("close")},b=()=>{i.value==="persona"?i.value="contacts":n("close")};return(u,v)=>(d(),f("div",Vf,[t("header",Bf,[t("button",{onClick:b,class:"text-[16px] text-black hover:opacity-70 transition-opacity"},w(i.value==="persona"?"Back":"Cancel"),1),t("h2",Uf,w(i.value==="persona"?"Select Persona":"New message"),1),v[2]||(v[2]=t("div",{class:"w-[50px]"},null,-1))]),t("div",Ff,[i.value==="contacts"?(d(),f("div",Wf,[t("div",Kf,[t("div",Hf,[v[3]||(v[3]=t("span",{class:"material-symbols-outlined text-neutral-400 text-[20px]"},"search",-1)),ie(t("input",{"onUpdate:modelValue":v[0]||(v[0]=g=>o.value=g),type:"text",placeholder:"Search",class:"bg-transparent border-none text-[15px] placeholder:text-neutral-400 focus:ring-0 w-full p-0"},null,512),[[pe,o.value]])])]),t("div",{onClick:v[1]||(v[1]=g=>u.$emit("create-group")),class:"flex items-center gap-4 px-4 py-4 hover:bg-neutral-50 transition-colors cursor-pointer"},[...v[4]||(v[4]=[t("div",{class:"size-12 rounded-full border border-neutral-200 flex items-center justify-center bg-transparent shrink-0"},[t("span",{class:"material-symbols-outlined text-[24px] text-black"},"group_add")],-1),t("span",{class:"text-[15px] font-medium tracking-tight"},"Create a New Group",-1)])]),v[6]||(v[6]=t("div",{class:"px-4 py-2 mt-2"},[t("span",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase"},"Suggested")],-1)),(d(!0),f(oe,null,ye(l.value,g=>(d(),f("div",{key:g.id,onClick:j=>r(g.id),class:"flex items-center justify-between px-4 py-3 hover:bg-neutral-50 transition-colors cursor-pointer"},[t("div",qf,[t("div",{class:"size-10 rounded-full bg-neutral-900 overflow-hidden shrink-0 border border-neutral-100",style:Ve({backgroundImage:g.avatar?`url(${g.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[g.avatar?M("",!0):(d(),f("div",Yf))],4),t("div",Jf,[t("span",Xf,w(g.handle),1),t("span",Qf,w(g.name||"No Name"),1)])]),v[5]||(v[5]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"chevron_right",-1))],8,Gf))),128))])):i.value==="persona"?(d(),f("div",Zf,[t("div",e0,[(d(!0),f(oe,null,ye(at(k).personas,g=>(d(),f("div",{key:g.id,onClick:j=>p(g.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[t("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Ve({backgroundImage:`url(${g.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("div",s0,[t("h3",n0,w(g.handle),1),t("p",o0,w(g.name),1)])],8,t0))),128))])])):M("",!0)])]))}},i0=rt(l0,[["__scopeId","data-v-a35529b4"]]),a0={class:"fixed inset-x-0 bottom-0 h-[92%] z-[70] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},r0={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},c0={class:"text-[16px] font-bold tracking-tight"},d0=["disabled"],u0={key:1,class:"w-[30px]"},p0={class:"flex-1 overflow-y-auto px-6 pt-8 pb-[calc(6rem+env(safe-area-inset-bottom))]"},f0={key:0},v0={class:"flex flex-col items-center gap-6 mb-10"},x0={key:1,class:"material-symbols-outlined text-[24px]"},b0={class:"w-full"},m0={class:"mt-8"},g0={key:0,class:"text-center py-4 text-neutral-400 text-sm"},h0={class:"flex flex-col gap-1"},y0=["onClick"],w0={class:"flex items-center gap-3"},k0={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},_0={class:"text-[14px] font-bold"},z0={key:0,class:"material-symbols-outlined text-white text-[16px]"},$0={key:1,class:"mt-6 pt-6 border-t border-gray-100"},C0={class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},S0={class:"flex flex-wrap gap-4"},I0=["onClick"],M0={class:"text-[10px] text-neutral-600 text-center truncate w-full leading-tight"},T0={key:1},E0={class:"flex flex-col gap-4"},j0=["onClick"],A0={class:"flex-1"},O0={class:"text-[15px] font-bold tracking-tight"},P0={class:"text-[12px] text-zinc-500"},R0={__name:"CreateGroup",emits:["back","create"],setup(e,{emit:s}){const n=s,o=C(""),l=C(new Set),i=be(()=>k.contacts),a=be(()=>k.contacts.filter(N=>l.value.has(N.id))),r=N=>{l.value.has(N)?l.value.delete(N):l.value.add(N)},p=N=>{l.value.delete(N)},b=C("details"),u=C(""),v=()=>{const N=prompt("Enter image URL for group photo:");N&&(u.value=N)},g=()=>{b.value==="details"&&o.value&&(b.value="persona")},j=N=>{ml(N),n("create",{name:o.value,avatar:u.value,members:Array.from(l.value)})},U=()=>{b.value==="persona"?b.value="details":n("back")};return(N,L)=>(d(),f("div",a0,[t("header",r0,[t("button",{onClick:U,class:"text-[16px] text-black hover:opacity-70 transition-opacity flex items-center -ml-1"},[L[1]||(L[1]=t("span",{class:"material-symbols-outlined text-[24px]"},"chevron_left",-1)),ns(" "+w((b.value==="persona","Back")),1)]),t("h2",c0,w(b.value==="persona"?"Select Persona":"Create group"),1),b.value==="details"?(d(),f("button",{key:0,onClick:g,class:"text-[16px] font-bold text-black hover:opacity-70 transition-opacity disabled:opacity-30",disabled:!o.value||a.value.length<2}," Next ",8,d0)):(d(),f("div",u0))]),t("main",p0,[b.value==="details"?(d(),f("div",f0,[t("div",v0,[t("button",{onClick:v,class:"size-24 rounded-full border border-dashed border-neutral-300 flex items-center justify-center flex-col gap-1 text-neutral-400 hover:bg-neutral-50 transition-colors overflow-hidden relative"},[u.value?(d(),f("div",{key:0,class:"absolute inset-0 bg-cover bg-center",style:Ve({backgroundImage:`url(${u.value})`})},null,4)):(d(),f("span",x0,"add_a_photo"))]),L[2]||(L[2]=t("span",{class:"text-[10px] font-bold uppercase tracking-widest text-neutral-400"},"Add Group Photo",-1)),t("div",b0,[ie(t("input",{"onUpdate:modelValue":L[0]||(L[0]=S=>o.value=S),type:"text",placeholder:"Group name",class:"w-full bg-transparent border-0 border-b border-neutral-200 px-0 py-3 text-lg placeholder:text-neutral-300 focus:ring-0 focus:border-black transition-colors"},null,512),[[pe,o.value]])])]),t("div",m0,[L[4]||(L[4]=t("h3",{class:"text-[11px] font-bold text-neutral-400 tracking-wider uppercase mb-4"},"Select Members (Min 2)",-1)),i.value.length===0?(d(),f("div",g0," No contacts found in Following. ")):M("",!0),t("div",h0,[(d(!0),f(oe,null,ye(i.value,S=>(d(),f("div",{key:S.id,onClick:E=>r(S.id),class:"flex items-center justify-between py-3 px-2 -mx-2 hover:bg-neutral-50 rounded-xl cursor-pointer transition-colors"},[t("div",w0,[t("div",{class:"size-10 rounded-full bg-neutral-900 border border-neutral-100 overflow-hidden",style:Ve({backgroundImage:S.avatar?`url(${S.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[S.avatar?M("",!0):(d(),f("div",k0))],4),t("span",_0,w(S.handle),1)]),t("div",{class:W(["size-6 rounded-full border flex items-center justify-center transition-all",l.value.has(S.id)?"bg-black border-black":"border-neutral-300 bg-white"])},[l.value.has(S.id)?(d(),f("span",z0,"check")):M("",!0)],2)],8,y0))),128))]),a.value.length>0?(d(),f("div",$0,[t("h3",C0,"Selected ("+w(a.value.length)+")",1),t("div",S0,[(d(!0),f(oe,null,ye(a.value,S=>(d(),f("div",{key:S.id,class:"flex flex-col items-center gap-2 group relative w-[60px]"},[t("div",{class:"size-12 rounded-full bg-neutral-900 border border-white/20 shadow-sm relative overflow-hidden",style:Ve({backgroundImage:S.avatar?`url(${S.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[t("button",{onClick:je(E=>p(S.id),["stop"]),class:"absolute top-0 right-0 size-4 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-100 hover:bg-neutral-100"},[...L[3]||(L[3]=[t("span",{class:"material-symbols-outlined text-[10px] text-black"},"close",-1)])],8,I0)],4),t("span",M0,w(S.handle),1)]))),128))])])):M("",!0)])])):b.value==="persona"?(d(),f("div",T0,[t("div",E0,[(d(!0),f(oe,null,ye(at(k).personas,S=>(d(),f("div",{key:S.id,onClick:E=>j(S.id),class:"flex items-center gap-4 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer bg-white shadow-sm"},[t("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100",style:Ve({backgroundImage:`url(${S.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("div",A0,[t("h3",O0,w(S.handle),1),t("p",P0,w(S.name),1)])],8,j0))),128))])])):M("",!0)])]))}},N0={class:"h-full flex flex-col bg-background-light text-black relative"},L0={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100/50"},D0={class:"px-6 pb-4 pt-[calc(10px_+_env(safe-area-inset-top))] w-full"},V0={class:"flex items-center justify-between mb-6"},B0={class:"flex items-center gap-2"},U0={class:"flex-1 overflow-y-auto w-full pb-24"},F0=["onClick"],W0={key:0,class:"size-14 shrink-0 rounded-full avatar-abstract flex items-center justify-center"},K0={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},H0={class:"flex-1 min-w-0"},G0={class:"flex items-center justify-between mb-0.5"},q0={class:"font-bold text-[15px] tracking-tight"},Y0={class:"flex items-center gap-2"},J0={key:0,class:"size-2 bg-black rounded-full"},X0={__name:"Inbox",emits:["navigate","close"],setup(e,{emit:s}){const n=s,o=C(!1),l=C(!1),i=u=>{n("navigate","chat",{id:u})},a=()=>{l.value=!0},r=u=>{l.value=!1,o.value=!1;const v={id:"group_"+Date.now(),type:"group",name:u.name,handle:u.name.toLowerCase().replace(/\s+/g,"_"),avatar:u.avatar||"",members:u.members||[],lastMessage:"Group created",time:"Just now",unread:!1};Ka(v),n("navigate","chat",{id:v.id})},p=(u,v)=>{if(u==="chat"&&v.id){const g=k.contacts.find(U=>U.id===v.id);!k.conversations.find(U=>U.id===v.id)&&g&&Ka({id:g.id,type:"direct",name:g.name,handle:g.handle,avatar:g.avatar,lastMessage:"Draft",time:"Now",unread:!1})}o.value=!1,n("navigate",u,v),o.value=!1,n("navigate",u,v)},b=u=>{const v=u.localSettings||{};if(u.type==="group"||u.isAbstract)return{avatar:v.groupAvatarOverride||u.avatar,handle:v.groupNameOverride||u.title||u.handle||"Group",isAbstract:u.isAbstract};const g=k.contacts.find(j=>j.id===u.id);return g?{avatar:v.theirAvatarOverride||g.avatar,handle:v.theirNicknameOverride||g.handle,isAbstract:!1}:{avatar:v.theirAvatarOverride||u.avatar,handle:v.theirNicknameOverride||u.handle,isAbstract:!1}};return Dt(()=>{}),(u,v)=>(d(),f("div",N0,[t("header",L0,[t("div",D0,[t("div",V0,[t("div",B0,[t("button",{onClick:v[0]||(v[0]=g=>u.$emit("close")),class:"flex items-center justify-center size-8 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...v[4]||(v[4]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),v[5]||(v[5]=t("h1",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Messages",-1))]),t("button",{onClick:v[1]||(v[1]=g=>o.value=!0),class:"hover:opacity-50 transition-opacity"},[...v[6]||(v[6]=[t("span",{class:"material-symbols-outlined text-[24px]"},"edit_square",-1)])])]),v[7]||(v[7]=t("div",{class:"relative"},[t("input",{class:"w-full bg-neutral-100 border-none rounded-full py-2 px-5 text-sm placeholder:text-neutral-400 focus:ring-1 focus:ring-black transition-all",placeholder:"Search",type:"text"})],-1))])]),t("main",U0,[(d(!0),f(oe,null,ye(at(k).conversations,g=>(d(),f("div",{key:g.id,onClick:j=>i(g.id),class:"flex items-center gap-4 px-6 py-5 hover:bg-neutral-50 transition-colors cursor-pointer group border-b border-gray-50"},[g.isAbstract?(d(),f("div",W0,[...v[8]||(v[8]=[t("div",{class:"absolute inset-0 bg-zinc-900"},null,-1),t("div",{class:"relative size-6 border-[0.5px] border-white/30 rotate-45"},null,-1)])])):(d(),f("div",{key:1,class:"size-14 shrink-0 rounded-full bg-neutral-900 flex items-center justify-center overflow-hidden border border-neutral-100",style:Ve({backgroundImage:b(g).avatar?`url(${b(g).avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[b(g).avatar?M("",!0):(d(),f("div",K0))],4)),t("div",H0,[t("div",G0,[t("span",q0,w(b(g).handle),1),t("div",Y0,[t("span",{class:W(["text-[11px] font-medium",g.unread?"text-black":"text-neutral-400"])},w(g.time),3),g.unread?(d(),f("div",J0)):M("",!0)])]),t("p",{class:W(["text-[14px] font-semibold truncate leading-snug",g.unread?"text-black":"text-neutral-500"])},w(g.lastMessage),3)])],8,F0))),128))]),Ze(nn,{name:"slide-up"},{default:Cs(()=>[o.value?(d(),Te(i0,{key:0,onClose:v[2]||(v[2]=g=>o.value=!1),onCreateGroup:a,onNavigate:p})):M("",!0)]),_:1}),Ze(nn,{name:"slide-right"},{default:Cs(()=>[l.value?(d(),Te(R0,{key:0,onBack:v[3]||(v[3]=g=>l.value=!1),onCreate:r})):M("",!0)]),_:1})]))}},Q0=rt(X0,[["__scopeId","data-v-8dd3129f"]]),Gt=Ks({id:"current",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.7,stream:!1,modelsList:["gpt-4o","gpt-4-turbo","gpt-3.5-turbo"]}),ts=Ks({list:[],currentPresetId:"custom"}),Z0=async()=>{const e=await wc();e?(Object.assign(Gt,e),Gt.stream===void 0&&(Gt.stream=!1)):await Ai(Ne(Gt));const s=await mo();if(ts.list=s,ts.currentPresetId=Gt.activePresetId||"custom",s.length===0){const n=[{id:"editorial",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.3,stream:!1},{id:"creative",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-4o",temperature:.9,stream:!1},{id:"drafting",name:"",provider:"openai",endpoint:"https://api.openai.com/v1",apiKey:"",model:"gpt-3.5-turbo",temperature:.7,stream:!1}];for(const o of n)await Oi(o);ts.list=await mo()}},Ri=async e=>{Object.assign(Gt,e),e.currentPresetId&&(ts.currentPresetId=e.currentPresetId);const s={...Ne(Gt),activePresetId:ts.currentPresetId};await Ai(s)},ev=()=>{if(!Gt.apiKey)return"";const e=Gt.apiKey.split(",").map(n=>n.trim()).filter(n=>n);if(e.length===0)return"";const s=Math.floor(Math.random()*e.length);return e[s]},tv=async e=>{try{const s=e?.apiKey!==void 0?e.apiKey:Gt.apiKey,n=e?.endpoint!==void 0?e.endpoint:Gt.endpoint;let o="";if(s){const p=s.split(",").map(b=>b.trim()).filter(b=>b);p.length>0&&(o=p[Math.floor(Math.random()*p.length)])}if(!o)throw new Error("No API Key provided");let i=`${n.replace(/\/+$/,"")}/models`;const a=await fetch(i,{headers:{Authorization:`Bearer ${o}`}});if(!a.ok)throw new Error(`Fetch failed: ${a.statusText}`);const r=await a.json();return r.data&&Array.isArray(r.data)&&(Gt.modelsList=r.data.map(p=>p.id)),!0}catch(s){return console.error("Failed to fetch models",s),!1}},sv=e=>ts.list.find(s=>s.id===e),nv=async(e,s)=>{const n={id:Date.now().toString(),name:e,provider:s.provider,endpoint:s.endpoint,apiKey:s.apiKey,model:s.model,temperature:s.temperature,stream:s.stream};await Oi(n),ts.list=await mo(),ts.currentPresetId=n.id,Gt.activePresetId=n.id,await Ri({...s,activePresetId:n.id})},ov=async()=>{if(ts.currentPresetId&&ts.currentPresetId!=="custom"){const e=ts.currentPresetId;await ai(()=>Promise.resolve().then(()=>ri),void 0,import.meta.url).then(s=>s.deleteItem("presets",e)),ts.list=await mo(),ts.currentPresetId="custom",Gt.activePresetId="custom",await Ri({activePresetId:"custom"})}},Ec=()=>({...Zd(Gt),presetState:ts,init:Z0,getActiveKey:ev,fetchModels:tv,getPresetById:sv,commitSettings:Ri,saveCurrentAsPreset:nv,deleteCurrentPreset:ov}),sr="worldbook_db",st=Ks({categories:[],entries:[]}),lv=async()=>{try{await Is();const e=localStorage.getItem(sr);if(e){console.log("Migrating WorldBook data from localStorage to IndexedDB...");try{const o=JSON.parse(e),l=o.categories||[],i=o.entries||[];for(const a of l)await Je(Se.WORLDBOOK_CATEGORIES,a);for(const a of i)a.scope||(a.scope="global"),await Je(Se.WORLDBOOK_ENTRIES,a);localStorage.removeItem(sr),console.log("Migration complete.")}catch(o){console.error("Migration failed:",o)}}const s=await ss(Se.WORLDBOOK_CATEGORIES),n=await ss(Se.WORLDBOOK_ENTRIES);s.length===0&&n.length===0?await iv():(st.categories.splice(0,st.categories.length,...s),st.entries.splice(0,st.entries.length,...n))}catch(e){console.error("Failed to load WorldBook store:",e)}},iv=async()=>{const e=[{id:"cat_myth",name:""},{id:"cat_history",name:""},{id:"cat_chars",name:""},{id:"cat_locs",name:""}];st.categories.splice(0,st.categories.length,...e),st.entries.splice(0,st.entries.length);for(const s of e)await Je(Se.WORLDBOOK_CATEGORIES,s)},wo=()=>(st.categories.length===0&&lv(),{state:st,getCategories:()=>st.categories,getEntriesByCategory:(u,v="global")=>st.entries.filter(g=>g.categoryId===u&&g.scope===v),getEntry:u=>st.entries.find(v=>v.id===u),addCategory:async u=>{const v=`cat_${Date.now()}`,g={id:v,name:u};return st.categories.push(g),await Je(Se.WORLDBOOK_CATEGORIES,g),v},updateCategory:async(u,v)=>{const g=st.categories.find(j=>j.id===u);if(g){g.name=v;const j=Ne(g);await Je(Se.WORLDBOOK_CATEGORIES,{...j})}},deleteCategory:async u=>{const v=st.entries.filter(j=>j.categoryId===u);st.entries=st.entries.filter(j=>j.categoryId!==u);const g=st.categories.findIndex(j=>j.id===u);g!==-1&&st.categories.splice(g,1),await os(Se.WORLDBOOK_CATEGORIES,u);for(const j of v)await os(Se.WORLDBOOK_ENTRIES,j.id)},addEntry:async u=>{const v={...u,id:`entry_${Date.now()}`,createdAt:Date.now(),updatedAt:Date.now()};return st.entries.push(v),await Je(Se.WORLDBOOK_ENTRIES,v),v.id},updateEntry:async(u,v)=>{const g=st.entries.findIndex(j=>j.id===u);if(g!==-1){const j={...st.entries[g],...v,updatedAt:Date.now()};st.entries[g]=j;const U=Ne(j);await Je(Se.WORLDBOOK_ENTRIES,U)}},deleteEntry:async u=>{const v=st.entries.findIndex(g=>g.id===u);v!==-1&&(st.entries.splice(v,1),await os(Se.WORLDBOOK_ENTRIES,u))},searchEntries:u=>{const v=u.toLowerCase();return st.entries.filter(g=>g.title.toLowerCase().includes(v)||g.content.toLowerCase().includes(v)||g.keywords?.some(j=>j.toLowerCase().includes(v)))}}),av={0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"},rv=e=>av[e]||"Unknown",cv=async e=>{if(!e||e.length<2)return[];try{const s=`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=5&language=en&format=json`,o=await(await fetch(s)).json();return!o.results||!Array.isArray(o.results)?[]:o.results.map(l=>({id:l.id,name:l.name,latitude:l.latitude,longitude:l.longitude,country:l.country,admin1:l.admin1}))}catch(s){return console.error("City Search Failed",s),[]}},dv=async(e,s)=>{try{const n=`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${s}&current=temperature_2m,weather_code,is_day&timezone=auto`,l=await(await fetch(n)).json();return l.current?{temperature:l.current.temperature_2m,conditionCode:l.current.weather_code,isDay:l.current.is_day,time:l.current.time}:null}catch(n){return console.error("Weather Fetch Failed",n),null}},ql=new Map,uv=async(e,s)=>{const n=`${e.toFixed(2)},${s.toFixed(2)}`,o=Date.now();if(ql.has(n)){const i=ql.get(n);if(o-i.ts<36e5)return console.log("[Environment] Using Cached Weather for",n),i.data}const l=await dv(e,s);return l&&(console.log("[Environment] Fetched New Weather for",n),ql.set(n,{data:l,ts:o})),l},pv=["innerHTML"],fv={__name:"HtmlCard",props:["content","isMe"],setup(e){const s=C(null),n=C(1),o=()=>{if(!s.value)return;n.value=1,s.value.scrollWidth>210?n.value=.7:n.value=1};return Dt(()=>{o(),setTimeout(o,100),setTimeout(o,500)}),(l,i)=>(d(),f("div",{class:W(["html-card-wrapper relative",e.isMe?"origin-top-right":"origin-top-left"]),style:Ve({transform:`scale(${n.value})`})},[t("div",{ref_key:"containerRef",ref:s,class:"html-content inline-block text-left",innerHTML:e.content},null,8,pv)],6))}},vv=rt(fv,[["__scopeId","data-v-0bfcbd29"]]),xv={class:"bg-white w-full max-w-lg rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all h-[60vh]"},bv={class:"text-center shrink-0"},mv={class:"font-serif text-xl font-bold tracking-tight text-black"},gv={key:0,class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},hv=["placeholder"],yv={__name:"EditModal",props:{isOpen:Boolean,modelValue:String,title:String,subtitle:String,placeholder:String},emits:["update:isOpen","update:modelValue","save","cancel"],setup(e,{emit:s}){const n=e,o=s,l=C("");ds(()=>n.isOpen,r=>{r&&(l.value=n.modelValue||"")});const i=()=>{o("update:isOpen",!1),o("cancel")},a=()=>{o("update:modelValue",l.value),o("save",l.value),o("update:isOpen",!1)};return(r,p)=>(d(),Te(ft,{to:"body"},[e.isOpen?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(i,["self"])},[t("div",xv,[t("div",bv,[t("h3",mv,w(e.title||"Edit"),1),e.subtitle?(d(),f("p",gv,w(e.subtitle),1)):M("",!0)]),ie(t("textarea",{"onUpdate:modelValue":p[0]||(p[0]=b=>l.value=b),class:"w-full flex-1 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none font-mono leading-relaxed",placeholder:e.placeholder||"Enter text...",autofocus:""},null,8,hv),[[pe,l.value]]),t("div",{class:"flex items-center gap-3 w-full shrink-0"},[t("button",{onClick:i,class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),t("button",{onClick:a,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Save ")])])])):M("",!0)]))}},wv={class:"h-full flex flex-col bg-background-light text-black"},kv={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},_v={class:"flex items-center px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},zv={class:"flex items-center gap-3 ml-1 cursor-pointer"},$v={key:0,class:"absolute inset-0 bg-zinc-900"},Cv={key:1,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},Sv={class:"flex flex-col"},Iv={class:"font-serif text-[17px] font-semibold tracking-tight"},Mv={class:"flex-1 flex justify-end"},Tv={class:"flex justify-center my-4"},Ev={class:"text-[10px] text-zinc-400 uppercase tracking-[0.2em] font-semibold"},jv={key:0,class:"flex flex-col gap-4"},Av=["id"],Ov={key:0,class:"w-full flex items-center my-1 animate-in fade-in zoom-in-95 duration-300"},Pv=["onClick"],Rv={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Nv={class:"flex-1 flex justify-center"},Lv=["onClick","onContextmenu"],Dv={class:"text-[11px] text-zinc-400 px-3 py-1 rounded-full transition-colors"},Vv={class:"text-[9px] opacity-50 ml-1"},Bv={key:0,class:"mt-1 max-w-[280px] p-3 rounded-[16px] bg-zinc-50 border border-zinc-100 text-zinc-500 text-[13px] relative animate-in fade-in zoom-in-95 duration-200"},Uv=["src"],Fv=["src"],Wv={key:2,class:"italic opacity-70"},Kv=["innerHTML"],Hv={key:1,class:"w-full flex items-start transition-all duration-300"},Gv=["onClick"],qv={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Yv=["onContextmenu","onTouchstart"],Jv={key:0,class:"text-[10px] text-zinc-500 font-bold mb-1 ml-1"},Xv=["onClick"],Qv={class:"flex flex-col"},Zv=["onClick"],ex={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},tx={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},sx=["src"],nx=["onClick"],ox={key:0,class:"absolute inset-0 z-20 flex flex-col items-center justify-center animate-in fade-in duration-300"},lx={key:1,class:"absolute inset-0 z-20 p-6 flex items-center justify-center animate-in fade-in zoom-in-95 duration-500"},ix=["innerHTML"],ax=["onClick"],rx={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},cx={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},dx=["onClick"],ux=["src"],px=["onClick"],fx={class:"h-32 bg-[#F4F4F5] relative overflow-hidden group"},vx={class:"p-3 bg-white relative z-10 flex flex-col gap-0.5 border-t border-zinc-100"},xx={class:"flex items-start justify-between gap-2"},bx={class:"text-[14px] font-bold text-black leading-snug line-clamp-1"},mx={class:"text-[11px] text-zinc-500 line-clamp-1"},gx={class:"flex items-center gap-2 mt-2 pt-2 border-t border-zinc-50"},hx={class:"text-[9px] font-mono text-zinc-300 ml-auto tracking-tight"},yx=["onClick"],wx={class:"text-[9px] font-bold uppercase tracking-wider text-zinc-400"},kx={class:"text-[11px] line-clamp-1 leading-snug text-zinc-500"},_x=["onClick"],zx={class:"flex items-center gap-3 px-3 py-2"},$x={class:"flex items-center gap-0.5 h-4"},Cx={class:"text-[11px] font-medium opacity-60 ml-1"},Sx=["innerHTML"],Ix=["onClick"],Mx={class:"flex items-center justify-between mb-4 relative z-0"},Tx={class:"flex items-center gap-2"},Ex={class:"material-symbols-outlined text-[16px]"},jx={class:"text-[10px] font-bold opacity-40"},Ax={class:"mb-1 relative z-0"},Ox={class:"text-2xl font-serif font-bold tracking-tight"},Px={class:"text-[11px] opacity-50 relative z-0 flex justify-between items-center"},Rx={key:0,class:"flex items-center gap-1 text-[9px] uppercase tracking-wider font-bold opacity-60"},Nx=["onClick"],Lx={class:"flex items-center justify-between mb-4 relative z-0"},Dx={class:"flex items-center gap-2"},Vx={class:"material-symbols-outlined text-[16px]"},Bx={class:"text-[10px] font-bold opacity-40"},Ux={class:"mb-1 relative z-0"},Fx={class:"text-2xl font-serif font-bold tracking-tight"},Wx={class:"text-[11px] opacity-50 relative z-0"},Kx=["onClick"],Hx={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none z-10"},Gx={class:"flex items-center justify-between mb-4 relative z-0"},qx={class:"flex items-center gap-2"},Yx={class:"text-[10px] font-bold opacity-40"},Jx={class:"mb-1 relative z-0"},Xx={class:"flex flex-col relative z-0 gap-0.5"},Qx={class:"text-[11px] opacity-60 font-medium lowercase"},Zx={key:0,class:"text-[11px] opacity-50 italic truncate max-w-[180px]"},eb={key:0,class:"relative",style:{zoom:"0.7"}},tb={class:"entry-preview w-full max-w-full overflow-hidden"},sb=["innerHTML"],nb=["onClick"],ob=["innerHTML"],lb={class:"text-[9px] text-zinc-400 mt-1 mx-1 tracking-wider uppercase"},ib={key:1,class:"flex flex-col items-start gap-1"},ab={class:"flex items-end gap-2 px-1"},rb={key:2,class:"flex flex-col items-center justify-center h-full text-neutral-400"},cb={key:1,class:"absolute inset-x-0 bottom-0 top-auto h-auto bg-white rounded-t-[32px] shadow-[0_-8px_40px_rgba(0,0,0,0.1)] z-[60] flex flex-col animate-in slide-in-from-bottom-10 duration-300 overflow-hidden text-black border-t border-zinc-100/50"},db={class:"h-10 flex items-center justify-between px-6 shrink-0 bg-white"},ub={class:"flex items-center gap-3"},pb={class:"h-[255px] overflow-y-auto custom-scrollbar px-6 py-2 bg-white"},fb={key:0,class:"grid grid-cols-4 gap-4"},vb=["onClick"],xb={class:"aspect-square w-full bg-white border border-zinc-50 rounded-[22px] overflow-hidden group-hover:border-zinc-200 group-hover:shadow-[0_4px_12px_rgba(0,0,0,0.03)] transition-all relative"},bb=["src"],mb={class:"text-[8px] text-zinc-300 font-bold uppercase tracking-[0.15em] truncate w-full text-center group-hover:text-black transition-colors font-sans"},gb={key:1,class:"flex flex-col items-center justify-center h-full text-zinc-300 gap-3"},hb={class:"flex flex-col items-center gap-1"},yb={class:"flex items-center justify-between px-5 bg-white border-t border-zinc-50 gap-4 shrink-0 pt-2 pb-safe"},wb={class:"flex-1 overflow-x-auto custom-scrollbar flex items-center gap-4 px-2 hide-scrollbar"},kb=["onClick"],_b={class:"w-6 h-6 flex items-center justify-center"},zb={key:0,class:"absolute -bottom-2 w-1 h-1 bg-black rounded-full"},$b={key:1,class:"material-symbols-outlined text-[20px]"},Cb={key:2,class:"text-[10px] font-black uppercase font-serif"},Sb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Ib={class:"flex flex-col gap-2 max-h-[50vh] overflow-y-auto custom-scrollbar px-1"},Mb={key:0,class:"text-center py-10 text-zinc-300 flex flex-col items-center gap-3"},Tb=["onClick"],Eb={class:"flex items-center gap-4"},jb={class:"w-10 h-10 rounded-xl bg-white border border-zinc-100 flex items-center justify-center text-xs font-serif font-bold text-zinc-700 shadow-sm"},Ab={class:"font-semibold text-zinc-900 text-[15px]"},Ob={class:"material-symbols-outlined text-[14px] font-bold"},Pb={class:"grid grid-cols-1 mt-4"},Rb={class:"bg-white w-full sm:max-w-sm rounded-t-[32px] sm:rounded-[32px] shadow-2xl flex flex-col h-[80vh] sm:h-[600px] animate-in slide-in-from-bottom-10 sm:zoom-in-95 duration-300 transform transition-all"},Nb={class:"p-6 pb-2 shrink-0"},Lb={class:"flex items-center justify-between mb-6"},Db={class:"relative group flex items-center gap-2"},Vb={class:"relative flex-1"},Bb={class:"flex-1 overflow-y-auto custom-scrollbar p-6 pt-6 flex flex-col gap-2"},Ub=["onClick"],Fb={class:"min-w-0"},Wb={class:"text-sm font-bold text-zinc-900 truncate"},Kb={class:"text-xs text-zinc-500 truncate"},Hb={key:2,class:"absolute left-4 right-4 bottom-[80px] bg-white/90 backdrop-blur-2xl rounded-[32px] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.12)] border border-zinc-100 p-6 z-[80] animate-in slide-in-from-bottom-6 fade-in duration-300 ring-1 ring-black/5"},Gb={class:"grid grid-cols-4 gap-x-2 gap-y-6"},qb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Yb={class:"flex items-center gap-3 w-full"},Jb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-4 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},Xb={class:"flex items-center gap-3 w-full"},Qb={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Zb={key:0,class:"font-serif italic text-2xl mb-1 text-center"},e1={key:1,class:"font-serif italic text-2xl mb-1 text-center"},t1={key:2},s1={key:0,class:"mb-6"},n1={class:"relative"},o1=["value"],l1={key:1,class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},i1={class:"flex flex-col gap-4"},a1={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},r1={class:"grid grid-cols-2 gap-3"},c1={key:3,class:"animate-in slide-in-from-right-8 duration-300"},d1={class:"flex justify-center mb-8"},u1={class:"text-xs text-red-500 text-center h-4 mt-2 mb-4"},p1={class:"grid grid-cols-2 gap-3"},f1={class:"bg-white w-full max-w-xs rounded-[32px] shadow-2xl p-0 animate-in zoom-in-95 duration-300 overflow-hidden relative"},v1={class:"p-8 text-center -mt-10"},x1={class:"font-serif text-3xl font-bold mb-1"},b1={class:"text-xs text-zinc-400 uppercase tracking-widest mb-6"},m1={class:"space-y-3 text-sm border-t border-zinc-100 pt-6"},g1={class:"flex justify-between"},h1={class:"font-medium"},y1={class:"flex justify-between"},w1={class:"text-zinc-400"},k1={class:"font-medium"},_1={key:0,class:"flex justify-between"},z1={class:"font-medium text-zinc-800"},$1={key:0,class:"mt-8 grid grid-cols-2 gap-3"},C1=["src"],S1={key:1,class:"fixed inset-x-0 bottom-0 z-[10000] animate-in slide-in-from-bottom-full duration-300"},I1={class:"bg-white/95 backdrop-blur-xl rounded-t-[24px] shadow-[0_-4px_30px_rgba(0,0,0,0.1)] overflow-hidden"},M1={class:"flex flex-col"},T1={class:"border-t border-zinc-100 py-3 pb-safe"},E1={key:4,class:"fixed bottom-10 left-0 right-0 z-[100] flex justify-center pointer-events-none animate-in slide-in-from-bottom-20 duration-300"},j1={class:"bg-black text-white h-[64px] rounded-full shadow-[0_8px_40px_rgba(0,0,0,0.3)] flex items-center px-8 gap-8 pointer-events-auto min-w-[280px] justify-between ring-1 ring-white/10 mx-6"},A1={class:"font-bold text-xs tracking-[0.2em] font-sans whitespace-nowrap"},O1={class:"flex items-center gap-6"},P1=["disabled"],R1={class:"bg-white w-[90%] max-w-sm rounded-3xl p-5 animate-in zoom-in-95 duration-200 max-h-[60vh] overflow-hidden shadow-2xl"},N1={class:"flex items-center justify-between mb-4"},L1={class:"space-y-2 overflow-y-auto max-h-[40vh] pb-safe"},D1=["onClick"],V1={class:"font-medium text-[15px]"},B1={class:"flex items-center gap-2 z-[110] mb-6"},U1=["title"],F1={class:"material-symbols-outlined text-zinc-600 text-[20px]"},W1={key:0,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 shadow-2xl mx-auto"},K1={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},H1={class:"flex-1"},G1={class:"font-bold text-lg"},q1={key:0,class:"relative inner-voice-card max-h-[80vh] overflow-y-auto scrollbar-hide"},Y1=["onClick"],J1=["fill"],X1=["innerHTML"],Q1={key:1,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 shadow-2xl mx-auto"},Z1={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},em={class:"flex-1"},tm={class:"font-bold text-lg"},sm=["onClick"],nm=["fill"],om={class:"text-[14px] text-zinc-700 leading-relaxed"},lm={class:"text-[10px] text-zinc-400 mt-3 font-mono"},im={key:1,class:"bg-white w-[90%] max-w-md rounded-3xl p-5 animate-in zoom-in-95 duration-200 max-h-[70vh] overflow-hidden flex flex-col shadow-2xl"},am={class:"flex items-center gap-3 mb-4 pb-4 border-b border-zinc-100"},rm={class:"flex-1"},cm={class:"font-bold text-lg"},dm={class:"flex-1 overflow-y-auto space-y-3 scrollbar-hide"},um={key:0,class:"text-center py-12 text-zinc-400"},pm=["onClick"],fm={class:"text-[10px] text-zinc-400 mb-2 font-mono"},vm=["innerHTML"],xm={key:7,class:"sticky bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-100 z-50",style:{"padding-bottom":"calc(env(safe-area-inset-bottom) + 12px)"}},bm={key:0,class:"px-4 py-2 bg-zinc-50 border-b border-zinc-100 flex items-center justify-between"},mm={class:"flex items-center gap-3 overflow-hidden"},gm={class:"flex flex-col"},hm={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-500"},ym={class:"text-xs text-zinc-600 line-clamp-1 truncate"},wm={class:"px-4 py-3 flex items-center gap-2"},km={class:"flex-1 relative"},_m={class:"bg-white w-full max-w-sm max-h-[70vh] rounded-[32px] shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300"},zm={class:"bg-zinc-50 border-b border-zinc-100 p-5 flex items-center justify-between shrink-0"},$m={class:"text-xs text-zinc-400 mt-0.5 font-mono"},Cm={class:"flex-1 overflow-y-auto p-5 space-y-4 bg-white custom-scrollbar"},Sm={key:0,class:"text-center my-2 px-4"},Im={class:"text-[11px] text-zinc-400 italic bg-zinc-50 px-3 py-1.5 rounded-full border border-zinc-100 inline-block leading-relaxed"},Mm={key:0,class:"text-[10px] text-zinc-500 mb-1 ml-2 font-bold select-none"},Tm={key:0,class:"text-[13px] leading-relaxed"},Em={key:0,class:"text-zinc-400 italic block mb-1"},jm={key:1,class:"p-3 bg-zinc-50 rounded-xl text-zinc-800 border border-zinc-100"},Am={key:2,class:"text-zinc-500"},Om={key:1,class:"relative z-10 flex-1 flex flex-col items-center justify-center p-6 text-center bg-white"},Pm={class:"w-36 h-36 rounded-full ring-4 ring-zinc-100 mb-8 relative overflow-hidden shadow-xl"},Rm=["src"],Nm={class:"text-zinc-900 text-2xl font-bold mb-2"},Lm={key:2,class:"relative z-10 flex-1 flex flex-col items-center justify-center p-6 text-center bg-white"},Dm={class:"w-40 h-40 rounded-full ring-4 ring-zinc-200 mb-8 relative overflow-hidden shadow-2xl animate-bounce-slow"},Vm=["src"],Bm={class:"text-zinc-900 text-3xl font-bold mb-2"},Um={key:3,class:"relative z-10 flex flex-col h-full"},Fm={class:"pt-safe pt-6 px-4 py-2 flex items-center justify-between z-10 shrink-0 relative"},Wm={class:"absolute inset-x-0 top-6 pt-safe flex justify-center pointer-events-none"},Km={class:"px-3 py-1.5 rounded-full bg-black/30 backdrop-blur-md border border-white/10 flex items-center gap-2 pointer-events-auto"},Hm={class:"text-xs text-white/90 font-mono"},Gm={class:"flex items-center justify-center gap-1.5 overflow-x-auto py-2 shrink-0 z-10"},qm={class:"relative w-10 h-10 bg-zinc-800 rounded-lg overflow-hidden ring-1 ring-white/20 shadow-md shrink-0"},Ym=["src"],Jm=["src"],Xm={key:1,class:"pt-safe pt-6 px-4 py-3 flex justify-between items-start shrink-0 z-10"},Qm={class:"flex flex-col items-center mt-1"},Zm={class:"font-bold text-sm text-white shadow-sm"},eg={class:"mt-2 px-3 py-1.5 rounded-full flex items-center gap-2 bg-black/40 backdrop-blur-md border border-white/5"},tg={class:"text-xs text-white/90 font-mono tracking-widest"},sg={class:"w-20 h-28 rounded-xl overflow-hidden shadow-2xl ring-2 ring-white/30"},ng=["src"],og={id:"video-messages-container",class:"flex-1 overflow-y-auto px-4 py-2 space-y-4 custom-scrollbar scroll-smooth z-10"},lg={class:"flex flex-col justify-end min-h-full pb-4"},ig={key:0,class:"self-center max-w-[90%] my-2 text-center"},ag={class:"text-[11px] italic text-white/50 leading-relaxed"},rg=["onContextmenu"],cg={class:"shrink-0 pb-safe pt-4 px-6 z-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent"},dg={class:"flex items-center gap-3 mb-6"},ug={class:"flex-1 relative group"},pg=["onKeydown"],fg={class:"flex items-center justify-center gap-8 mb-4"},vg=["src"],xg={class:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-black/30 flex flex-col justify-between p-2"},bg={class:"flex flex-col items-center mb-1"},mg={class:"text-[10px] text-white/90 font-mono tracking-wider font-bold"},gg={key:5,class:"relative z-10 flex-1 flex flex-col items-center justify-center animate-in zoom-in-95 duration-300"},hg={class:"relative z-10 flex flex-col items-center"},yg={class:"text-white/50 text-sm font-mono"},wg={key:1,class:"fixed inset-0 z-[10000] flex items-end justify-center pointer-events-auto"},kg={class:"bg-zinc-900 w-full max-w-sm m-4 mb-safe rounded-2xl overflow-hidden border border-white/10 shadow-2xl relative z-10 animate-in slide-in-from-bottom-10 duration-200"},_g={class:"p-4 border-b border-white/5 bg-white/5"},zg={class:"text-xs text-white/50 line-clamp-1 italic text-center"},$g={class:"bg-black py-2"},Cg={__name:"Chat",props:["chatId"],emits:["back","navigate"],setup(e,{emit:s}){const n=e,o=s,l=be(()=>gl(n.chatId)),i=be(()=>{if(!k.regexCategories||!k.regexEntries)return[];const m=k.regexCategories.filter(Z=>Z.scope==="global").map(Z=>Z.id),c=l.value?.localSettings?.mountedRegexCategories||[],x=k.regexCategories.filter(Z=>Z.scope==="local"&&c.includes(Z.id)).map(Z=>Z.id),V=new Set([...m,...x]);return k.regexEntries.filter(Z=>!!(V.has(Z.categoryId)||c.includes(Z.id)))}),a=m=>{if(!m)return"";let c=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return i.value.forEach(x=>{if(!(!x.regex||!x.html))try{const V=new RegExp(x.regex,"gms");c=c.bind?c.replace(V,x.html):String(c).replace(V,x.html)}catch{}}),c},r=m=>m?i.value.some(c=>{if(!c.regex)return!1;try{return new RegExp(c.regex,"gms").test(m)}catch{return!1}}):!1,p=be(()=>{const m=l.value;if(!m)return{};const c=m.localSettings||{};if(m.type==="group"||m.isAbstract)return{avatar:c.groupAvatarOverride||m.avatar,handle:c.groupNameOverride||m.handle||m.title||"Group",isAbstract:m.isAbstract,id:m.id};const x=k.contacts.find(V=>V.id===m.id);return{avatar:c.theirAvatarOverride||x?.avatar||m.avatar,handle:c.theirNicknameOverride||x?.handle||m.handle,realName:x?.name||m.handle,isAbstract:!1,id:m.id}}),b=be(()=>He.value?He.value.filter(m=>m.type!=="innerVoice"):[]),u=()=>{o("back")},v=C(""),g=C(!1),j=C(!1),U=C(!1),N=C(!1),L=C(!1),S=C(""),E=C(""),T=C(""),O=C(null),A=C("input"),R=C(""),Y=C(""),we=C([]),ce=C(!1),ze=C(!1),Ee=C(""),se=C(!1),K=C(new Set),I=C(!1),y=C(null),z=C(null),D=m=>{const c=document.getElementById(`msg-${m}`);c?(c.scrollIntoView({behavior:"smooth",block:"center"}),c.classList.add("bg-zinc-100/50"),setTimeout(()=>c.classList.remove("bg-zinc-100/50"),1e3)):console.log("Message target not found in DOM")},ae=C(!1),ue=C(""),F=C(""),ve=C(""),xe=C(null),We=C("single"),ot=m=>{We.value="single",xe.value=m.id,ue.value="Edit Message",F.value="Modify this message content locally",ve.value=m.text,I.value=!1,y.value=null,ae.value=!0},Mt=()=>{const m=He.value;if(m.length===0)return;const c=[];let x=m.length-1;if(m[x].isMe)return;for(;x>=0&&!m[x].isMe;)c.unshift(m[x]),x--;if(c.length===0)return;let V=c.map(Z=>{let fe="[]",_e=Z.text,dt=Z.senderName||Tt(Z);if(Z.type==="sticker")fe="[]",_e=Z.keyword;else if(Z.type==="spoiler")fe="[]",_e=Z.text;else if(Z.type==="voice")fe="[]",_e=Z.text;else if(Z.type==="html")fe="[html]",_e=Z.content||Z.text;else if(Z.type==="location"){fe="[]";try{_e=JSON.parse(Z.content).name}catch{_e=Z.text}}else{if(Z.type==="video_call_notice")return`[] ${Z.text}`;Z.replyTo?(fe="[]",_e=`{${Z.replyTo.senderName}${Z.replyTo.text}} ${Z.text}`):Z.type==="action"?(fe="[]",_e=Z.text):Z.isAction}return`${fe} ${dt}${_e}`}).join(`
`);We.value="last_round",xe.value=null,ue.value="Edit Last Round",F.value="Edit the full AI response context",ve.value=V,I.value=!1,ae.value=!0},ct=async m=>{if(We.value==="single"){const c=He.value.find(x=>x.id===xe.value);c&&await Xs(n.chatId,{...c,text:m})}else if(We.value==="last_round"){const c=He.value,x=[];let V=c.length-1;for(;V>=0&&!c[V].isMe;)x.push(c[V].id),V--;await Hl(n.chatId,x);const Z=m.split(/(?=\[(?:|||||||||html||||)])/);for(const fe of Z)fe.trim()&&await Io(fe)}},Tt=m=>{if(m.isMe)return De.value.handle||De.value.name;const c=fs(m.senderId);return c&&(c.handle||c.name)||"Unknown"},At=()=>{y.value&&(z.value=y.value,I.value=!1,y.value=null,j.value=!1,_s(()=>{const m=document.querySelector("textarea");m&&m.focus()}))},yt=m=>{if(se.value){qt(m);return}y.value=m,I.value=!0},Ot=be(()=>He.value.length===0?!1:!He.value[He.value.length-1].isMe),qt=m=>{K.value.has(m.id)?K.value.delete(m.id):K.value.add(m.id)},_=()=>{se.value=!0,I.value=!1,y.value&&K.value.add(y.value.id),y.value=null},$=()=>{se.value=!1,K.value.clear()},B=async m=>{const c=He.value.find(x=>x.id===m);c&&await Xs(n.chatId,{...c,isRecalled:!0,isRecallRevealed:!1})},X=()=>{y.value&&(B(y.value.id),I.value=!1,y.value=null)},q=async m=>{if(m){try{await navigator.clipboard.writeText(m.text||m.content||"")}catch(c){console.error("Failed to copy",c)}I.value=!1,y.value=null}},J=async()=>{y.value&&(confirm("Delete this message?")&&await ff(n.chatId,y.value.id),I.value=!1,y.value=null)},re=async()=>{const m=Array.from(K.value);m.length!==0&&confirm(`Delete ${m.length} messages?`)&&(await Hl(n.chatId,m),$())},ne=be(()=>{const m=l.value;return m?m.type==="group"||m.isAbstract?{name:m.handle||"Group",isGroup:!0}:k.contacts.find(x=>x.id===m.id)||{name:m.handle||"Unknown",isGroup:!1}:{name:"Unknown"}}),ee=C(null),G=C(!1),ke=C(!1),le=C(null),ge=C("current"),Me=be(()=>He.value?He.value.filter(m=>m.type==="innerVoice"):[]),Le=m=>m?Me.value.filter(c=>c.senderId===m):Me.value,Xe=be(()=>{let c=(l.value?.type==="group"||l.value?.isGroup)&&le.value?Le(le.value):Me.value;const V=[...He.value].reverse().find(Z=>Z.isMe&&Z.type!=="innerVoice")?.timestamp||0;return c.filter(Z=>Z.timestamp>V)}),Fe=be(()=>((l.value?.type==="group"||l.value?.isGroup)&&le.value?Le(le.value):Me.value).filter(x=>x.isFavorited)),qe=be(()=>ge.value==="current"?Xe.value:Fe.value),wt=async m=>{const c=He.value.find(x=>x.id===m);c&&await Xs(n.chatId,{...c,isFavorited:!c.isFavorited})},Vt=()=>{ge.value="current",l.value?.type==="group"||l.value?.isGroup?ke.value=!0:G.value=!0},Pt=m=>{le.value=m,ke.value=!1,G.value=!0},ps=()=>{G.value=!1,le.value=null},Yt=m=>m?k.contacts.find(x=>x.id===m)||{name:"Unknown",avatar:null}:k.contacts.find(V=>V.id===n.chatId)||{name:"Unknown",avatar:null},gt=m=>{if(!m)return"";let c=m;return i.value.forEach(x=>{if(!(!x.regex||!x.html))try{const V=new RegExp(x.regex,"gms");c=c.replace(V,x.html)}catch{}}),c},Jt=m=>m?i.value.some(c=>{if(!c.regex||!c.html)return!1;try{return new RegExp(c.regex,"gms").test(m)}catch{return!1}}):!1,H=C(!1),h=C(""),P=()=>{j.value=!1,H.value=!0,h.value=""},me=async()=>{if(!h.value.trim())return;const m={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:h.value,type:"spoiler",senderId:"me",timestamp:Date.now(),isMe:!0,isRevealed:!1};await jt(n.chatId,m),H.value=!1,Qt(!0)},Ms=()=>{j.value=!1,ze.value=!0,Ee.value=""},Un=async()=>{if(!Ee.value.trim())return;const m={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:Ee.value,type:"voice",senderId:"me",timestamp:Date.now(),isMe:!0};await jt(n.chatId,m),ze.value=!1,Qt(!0)},kn=C(!1),ko=C(""),Ni=C(null),jc=m=>{ko.value=m,kn.value=!0},Ac=async m=>{const c=m.target.files[0];if(c){if(c.type.startsWith("image/")){const x=new FileReader;x.onload=async V=>{const Z=V.target.result,fe={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:"[Image Upload]",content:Z,type:"image",senderId:"me",timestamp:Date.now(),isMe:!0};await jt(n.chatId,fe),j.value=!1,Qt(!0)},x.readAsDataURL(c)}m.target.value=""}},Fn=be(()=>k.stickerCategories),qs=be(()=>{if(!l.value)return[];const m=l.value.localSettings?.mountedStickerPacks;return m==null?Fn.value:Fn.value.filter(c=>m.includes(c.id))}),Li=be(()=>{if(qs.value.length===0)return null;if(ee.value){const m=qs.value.find(c=>c.id===ee.value);if(m)return m}return qs.value[0]});ds(qs,m=>{m.length>0?(!ee.value||!m.find(c=>c.id===ee.value))&&(ee.value=m[0].id):ee.value=null},{immediate:!0});const Oc=async()=>{j.value=!1;const m=He.value;if(m.length===0)return;const c=[];for(let x=m.length-1;x>=0;x--){const V=m[x];if(V.isMe||["system","transfer","payment_notice","video_call_notice"].includes(V.type))break;c.push(V.id)}c.length>0&&await Hl(n.chatId,c),So()},Pc=()=>{j.value=!j.value,j.value&&(U.value=!1)},Di=()=>{j.value=!1,U.value=!1},Rc=()=>{z.value=null},Nc=()=>{j.value=!1,U.value=!0},Wn=C(!1),Kn=C(""),Lc=()=>{j.value=!1,Kn.value="",Wn.value=!0},_o=async m=>{Wn.value=!1;const c={id:crypto.randomUUID(),conversationId:n.chatId,senderId:"user",text:m.name,content:JSON.stringify(m),type:"location",timestamp:Date.now(),isMe:!0};await jt(n.chatId,c),Qt(!0)},yl=C(!1),Ys=C(null),wl=m=>{if(!m)return"";const c=Math.floor(m/1e3),x=Math.floor(c/60),V=c%60;return x>0?`${x}m ${V}s`:`${V}s`},Vi=m=>{m.callResult!=="missed"&&(Ys.value=m,yl.value=!0)},Bi=()=>{yl.value=!1,Ys.value=null},Ui=be(()=>k.videoCallState.isActive&&(k.videoCallState.chatId===n.chatId||!k.videoCallState.chatId)),_n=be(()=>k.videoCallState.isMinimized),Ts=C({x:window.innerWidth-130,y:100}),kl=C(!1),_l=C({x:0,y:0}),zl=()=>{if(!_n.value){const m=window.innerWidth-120;Ts.value.x>m&&(Ts.value.x=Math.max(10,m-10)),Ts.value.y>window.innerHeight-180&&(Ts.value.y=Math.max(50,window.innerHeight-180))}sf(!_n.value)},Fi=m=>{kl.value=!1;const c=m.touches?m.touches[0].clientX:m.clientX,x=m.touches?m.touches[0].clientY:m.clientY;_l.value={x:c-Ts.value.x,y:x-Ts.value.y},document.addEventListener("mousemove",zo),document.addEventListener("mouseup",$o),document.addEventListener("touchmove",zo,{passive:!1}),document.addEventListener("touchend",$o)},zo=m=>{m.preventDefault(),kl.value=!0;const c=m.touches?m.touches[0].clientX:m.clientX,x=m.touches?m.touches[0].clientY:m.clientY;let V=c-_l.value.x,Z=x-_l.value.y;const fe=window.innerWidth-112,_e=window.innerHeight-160;Ts.value={x:Math.max(10,Math.min(V,fe-10)),y:Math.max(50,Math.min(Z,_e-80))}},$o=()=>{document.removeEventListener("mousemove",zo),document.removeEventListener("mouseup",$o),document.removeEventListener("touchmove",zo),document.removeEventListener("touchend",$o)},Dc=()=>{kl.value||zl()},Xt=C("idle"),cn=C(null),_t=C([]),Hn=C(""),Co=C(0),zn=C("00:00");let Gn=null;const $n=C(!1),Es=C(null),Vc=m=>{Es.value=m,$n.value=!0},Bc=()=>{Es.value&&(_t.value=_t.value.filter(m=>m.id!==Es.value.id),$n.value=!1,Es.value=null)},Uc=()=>{if(!Es.value)return;const m=prompt("Videoscript Edit",Es.value.text);if(m!==null&&m.trim()!==""){const c=_t.value.findIndex(x=>x.id===Es.value.id);c!==-1&&(_t.value[c].text=m)}$n.value=!1,Es.value=null};ds(()=>k.videoCallState.isActive,m=>{m&&Xt.value},{immediate:!0});const Fc=m=>{if(Ui.value){console.log("[Video] Call already active, ignoring new incoming call from:",m);return}let c=null;l.value?.type==="group"||l.value?.isGroup?c=k.contacts.find(V=>V.name===m||V.handle===m):c=k.contacts.find(V=>V.id===n.chatId),c||(c={name:m,handle:m,avatar:l.value?.avatar||"https://via.placeholder.com/100"}),cn.value=c,Kl(!0,n.chatId),Xt.value="incoming"},Wc=()=>{Xt.value="active",Co.value=Date.now(),_t.value=[],Wi(),_t.value.push({id:"sys_start",text:"Video call connected",isAction:!0,isMe:!1})},Kc=async()=>{await jt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"video_call_notice",text:"[] ",callResult:"rejected",senderId:De.value.id,timestamp:Date.now(),isMe:!0}),qn(!1)},Hc=()=>{j.value=!1,Kl(!0,n.chatId),Xt.value="dialing",_t.value=[];const m=2e3+Math.random()*2e3;setTimeout(()=>{Math.random()>.3?(Xt.value="active",Co.value=Date.now(),Wi(),$l(!0)):(Xt.value="ended",jt(n.chatId,{id:"msg_vc_"+Date.now(),conversationId:n.chatId,text:"[] ",type:"video_call_notice",callResult:"missed",timestamp:Date.now(),isMe:!0}),setTimeout(()=>{qn(!0)},1500))},m)},qn=async(m=!1)=>{if(Gn&&clearInterval(Gn),cn.value=null,!m&&Xt.value==="active"){const c=Date.now()-Co.value;Xt.value="ended",await qc(c)}setTimeout(()=>{Kl(!1),Xt.value="idle",_t.value=[],zn.value="00:00"},m?0:800)},Wi=()=>{Gn&&clearInterval(Gn),Gn=setInterval(()=>{const m=Date.now()-Co.value,c=Math.floor(m/6e4),x=Math.floor(m%6e4/1e3);zn.value=`${String(c).padStart(2,"0")}:${String(x).padStart(2,"0")}`},1e3)},Ki=async()=>{if(!Hn.value.trim())return;const m={id:"vcm_"+Date.now(),text:Hn.value.trim(),isMe:!0,timestamp:Date.now()};_t.value.push(m),_s(()=>{const c=document.getElementById("video-messages-container");c&&(c.scrollTop=c.scrollHeight)}),Hn.value="",await $l(!1)},Gc=async()=>{const m=_t.value;if(m.length===0)return;const c=[];for(let x=m.length-1;x>=0;x--){const V=m[x];if(V.isMe||V.id.startsWith("sys_"))break;c.push(V.id)}c.length>0&&(_t.value=_t.value.filter(x=>!c.includes(x.id))),await $l(!1)},$l=async(m=!1)=>{const c=l.value?.type==="group"||l.value?.isGroup,x=l.value?.localSettings||{},V=x.shortTermMemoryLimit||50,fe=He.value.slice(-V).map(he=>he.text).join(`
`)+`
`+_t.value.map(he=>he.text).join(`
`),{front:_e,mid:dt,back:Ye}=Gi(fe,"");let Ae="";if(x.longTermMemoryEnabled===!0)try{const he=await Xa(n.chatId,fe.slice(-1e3));if(he.coreMemories.length>0&&(Ae+=`/
`,he.coreMemories.forEach($e=>Ae+=`: ${$e.source}
${$e.summary}

`)),he.recentFacts.length>0&&(Ae+=`
`,he.recentFacts.forEach($e=>{const Ge=Array.isArray($e.who)?$e.who.join(""):$e.who,ut=$e.sourceType==="group"?"[]":"[]";Ae+=`${ut} ${Ge}: ${$e.action||$e.what}${$e.when?` (${$e.when})`:""}
`}),Ae+=`
`),he.rankedFacts.length>0&&(Ae+=`
`,he.rankedFacts.forEach($e=>{const Ge=Array.isArray($e.who)?$e.who.join(""):$e.who,ut=$e.sourceType==="group"?"[]":"[]";Ae+=`${ut} ${Ge}: ${$e.action||$e.what}${$e.when?` (${$e.when})`:""}
`}),Ae+=`
`),he.noteMemory){const $e=he.noteMemory,Ge=Array.isArray($e.who)?$e.who.join(""):$e.who;Ae+=`/
${Ge}: ${$e.action||$e.what}

`}}catch(he){console.warn("[Video] Memory load failed",he)}let Ke="";if(c){const he=(l.value.members||[]).map(Ct=>{const vt=k.contacts.find(xt=>xt.id===Ct);if(!vt)return null;const pt=vt.persona||vt.bio||"";return`${vt.name}
${pt||""}`}).filter(Boolean).join(`

`),$e=(l.value.members||[]).map(Ct=>k.contacts.find(vt=>vt.id===Ct)?.name||"Unknown").join(", "),Ge=De.value?.name||De.value?.handle||"User",ut=De.value?.persona||De.value?.bio||"";Ke=`


${Ge}
${ut?`${ut}`:""}


${$e}


${he}



 - 
1. 
2. [] 
3. 
4. [] 
5. 


[] Alice
[] Alice
[] Bob
[] Bob

${m?"":""}`}else{const he=k.contacts.find(vt=>vt.id===n.chatId),$e=he?.name||p.value.handle,Ge=he?.persona||he?.bio||"",ut=De.value?.name||De.value?.handle||"User",Ct=De.value?.persona||De.value?.bio||"";Ke=`


${ut}
${Ct?`${Ct}`:""}


${$e}
${Ge}

 - 
1. 
2. [] ${$e}
3. 
4. [] ${$e}
5. 
6.  []+[] 
7. 


[] ${$e}
[] ${$e}~
[] ${$e}
[] ${$e}

${m?"":""}`}const $t=[..._e,Ke,dt,Ae,...Ye].filter(he=>he&&he.trim()).join(`

`),Os=_t.value.map(he=>({role:he.isMe?"user":"assistant",content:he.text})),Be=Rt.getActiveKey();if(!Rt.endpoint?.value){console.warn("[Video] No API Endpoint configured"),_t.value.push({id:"err_cfg_"+Date.now(),text:"[]  API ",isAction:!0,isMe:!0});return}const Ue=Rt.endpoint.value.replace(/\/+$/,"")+"/chat/completions";try{const ut=((await(await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Be}`},body:JSON.stringify({model:Rt.model.value||"gpt-3.5-turbo",messages:[{role:"system",content:$t},...Os],temperature:Rt.temperature.value!==void 0?Rt.temperature.value:.7})})).json()).choices?.[0]?.message?.content||"").split(`
`).filter(Ct=>Ct.trim());for(const Ct of ut){const vt=Ct.startsWith("[]"),pt=Ct.startsWith("[]");if(vt||pt){const xt=Ct.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];let as=null;if(xt&&l.value?.type==="group"){const hs=k.contacts.find(pn=>pn.name===xt||pn.handle===xt);hs&&(as=hs.id)}_t.value.push({id:"vcm_ai_"+Date.now()+Math.random(),text:Ct,isMe:!1,senderId:as,timestamp:Date.now(),isAction:vt}),await _s();const gs=document.getElementById("video-messages-container");gs&&(gs.scrollTop=gs.scrollHeight),await new Promise(hs=>setTimeout(hs,800+Math.random()*1e3))}}}catch(he){console.error("Video AI Error",he),_t.value.push({id:"err_"+Date.now(),text:`[] AI : ${he.message||""}`,isAction:!0,isMe:!0})}},Hi=m=>{if(!m)return null;try{const c=JSON.parse(m);return Array.isArray(c)?c:null}catch{return null}},qc=async m=>{const c=_e=>{const dt=Math.floor(_e/1e3),Ye=Math.floor(dt/60),Ae=dt%60;return Ye>0?`${Ye}${Ae}`:`${Ae}`},x=_t.value.map(_e=>({id:_e.id,text:_e.text,isMe:_e.isMe,isAction:_e.isAction,senderId:_e.senderId,timestamp:_e.timestamp})),V=JSON.stringify(x),Z=l.value?.type==="group",fe=c(m);await jt(n.chatId,{id:"msg_vc_"+Date.now(),conversationId:n.chatId,text:Z?`[]  ${fe}`:`[]  ${fe}`,type:"video_call_notice",callResult:"completed",duration:m,callTranscript:V,timestamp:Date.now(),isMe:!0})},Yc=m=>{let c=0;const x=m||"Location";for(let fe=0;fe<x.length;fe++)c=x.charCodeAt(fe)+((c<<5)-c);c=Math.abs(c);const V=[],Z=12+c%8;for(let fe=0;fe<Z;fe++){const _e=c*(fe+131)*37+fe*101;V.push({left:_e%100+"%",top:_e/100%100+"%",width:20+_e%30+"px",height:20+(_e>>4)%30+"px",opacity:.03+_e%10/100})}return V},Cl=()=>{U.value=!1,ce.value=!0},Sl=m=>{const c=l.value?.localSettings?.mountedStickerPacks;return c==null?!0:c.includes(m)},Jc=async m=>{if(!l.value)return;let c=l.value.localSettings?.mountedStickerPacks;c==null?c=Fn.value.map(V=>V.id):c=[...c];const x=c.indexOf(m);x>-1?c.splice(x,1):c.push(m),await Vn({id:n.chatId,localSettings:{...l.value.localSettings,mountedStickerPacks:c}})},Xc=async m=>{const c={id:"msg_"+Date.now(),conversationId:n.chatId,text:m.url,content:m.url,type:"sticker",keyword:m.keyword,senderId:"me",timestamp:Date.now(),isMe:!0};await jt(n.chatId,c)},He=be(()=>k.messages[n.chatId]||[]),De=be(()=>{const m=l.value?.localSettings?.myActivePersonaId,c=k.activePersonaId,x=m||c;return k.personas.find(V=>V.id===x)||k.personas[0]}),Il=C(null),dn=C(null),js=C(!0),Qt=async(m=!1)=>{if(await _s(),!dn.value&&Il.value){Il.value.scrollIntoView({behavior:m?"auto":"smooth"});return}dn.value&&(m?dn.value.scrollTop=dn.value.scrollHeight:dn.value.scrollTo({top:dn.value.scrollHeight,behavior:"smooth"}))};ds(()=>He.value.length,m=>{m!==0&&(js.value?(Qt(!0),js.value=!1):Qt(!1))},{flush:"post"}),Dt(async()=>{if(await Rt.init(),n.chatId){if(js.value=!0,await Ho(n.chatId),He.value.length>0&&js.value)Qt(!0),js.value=!1;else if(n.chatId==="noir"&&He.value.length===0){const m=[{id:"demo_1",conversationId:"noir",text:"The composition in your latest editorial is remarkable. The use of negative space creates a profound tension.",senderId:"noir_official",timestamp:new Date().setHours(14,22,0,0),isMe:!1,type:"text"},{id:"demo_2",conversationId:"noir",text:"Thank you. I was exploring the intersection of brutalist architecture and morning light.",senderId:"me",timestamp:new Date().setHours(14,25,0,0),isMe:!0,type:"text"},{id:"demo_3",conversationId:"noir",text:'"Silent Forms". Focusing on textures of concrete and silk.',senderId:"noir_official",timestamp:new Date().setHours(14,28,0,0),isMe:!1,type:"text"}];for(const c of m)await jt("noir",c);await Ho("noir"),Qt(!0),js.value=!1}}}),ds(()=>n.chatId,async m=>{m&&(js.value=!0,await Ho(m),He.value.length>0&&js.value&&(Qt(!0),js.value=!1))});const Qc=wo(),Gi=(m,c)=>{const x=(m+`
`+c).toLowerCase(),V=Qc.state.entries;let Z=V.filter(Ke=>Ke.scope==="global");const fe=l.value?.localSettings?.mountedWorldbooks||[];if(fe.length>0){const Ke=V.filter($t=>$t.scope==="local"&&(fe.includes($t.categoryId)||fe.includes($t.id)));Z=[...Z,...Ke]}const _e=Z.filter(Ke=>Ke.isConstant?!0:!Ke.keywords||Ke.keywords.length===0?!1:Ke.keywords.some($t=>x.includes($t.toLowerCase()))),dt=[],Ye=[],Ae=[],zt=[];return _e.forEach(Ke=>{Ke.depth&&Ke.depth>0?zt.push({content:Ke.content,depth:Ke.depth}):Ke.position==="front"?dt.push(Ke.content):Ke.position==="back"?Ae.push(Ke.content):Ye.push(Ke.content)}),console.log("[WorldBook] Active Entries:",_e.length),console.log("[WorldBook] Front:",dt),console.log("[WorldBook] Mid:",Ye),console.log("[WorldBook] Back:",Ae),console.log("[WorldBook] HistoryInjections:",zt),{front:dt,mid:Ye.join(`

`),back:Ae,historyInjections:zt}},Zc=()=>{S.value="",E.value="",T.value="",R.value="",A.value="input",N.value=!0,j.value=!1;const m=l.value;m.type==="group"||m.isGroup?(we.value=(m.members||[]).map(c=>k.contacts.find(x=>x.id===c)).filter(c=>c&&c.id!==De.value.id),Y.value=""):(Y.value=ne.value.id||m.id,we.value=[])},ed=()=>{const m=parseFloat(S.value);if(!m||m<=0){R.value="Invalid amount";return}if(!Y.value){R.value="Please select a recipient";return}R.value="",A.value="password"},td=async()=>{if(!k.wallet.hasPassword){R.value="Please set payment password in Wallet first";return}if(!zc(T.value)){R.value="Incorrect password";return}const m=parseFloat(S.value);let c=ne.value.name;if(we.value.length>0){const Z=we.value.find(fe=>fe.id===Y.value);c=Z?Z.name:"Unknown"}if(!ci("transfer",m,`Transfer to ${c}`)){R.value="Insufficient balance";return}const V={id:"msg_"+Date.now(),conversationId:n.chatId,text:`Transfer: ${m.toFixed(2)}`,senderId:De.value.id,recipientId:Y.value,timestamp:Date.now(),isMe:!0,type:"transfer",amount:m,note:E.value,type:"transfer",amount:m,note:E.value,status:"pending"};await jt(n.chatId,V),N.value=!1,Qt()},sd=m=>{O.value=m,L.value=!0},nd=m=>{O.value={...m,status:m.action==="collect"?"collected":"rejected",note:m.action==="collect"?"Payment Accepted":"Payment Returned",isMe:!m.isMe},L.value=!0},od=m=>{if(m.type==="payment_notice")return m.isMe?m.senderName:m.targetName;if(m.isMe){if(m.recipientId){const c=k.contacts.find(x=>x.id===m.recipientId);if(c)return c.name}return ne.value.name||"User"}else{const c=fs(m.senderId);return c?c.name:ne.value.name||"User"}},ld=async()=>{if(!O.value)return;const m=O.value;await Xs(n.chatId,{...m,status:"collected"});const c=k.contacts.find(V=>V.id===m.senderId),x=c?c.name:"Unknown";Wa(m.amount,`Transfer from ${x}`),await jt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"collect",amount:m.amount,senderName:De.value.name,targetName:x,timestamp:Date.now(),isMe:!0,text:"Accepted transfer"}),L.value=!1},id=async()=>{if(!O.value)return;const m=O.value;await Xs(n.chatId,{...m,status:"rejected"});const c=k.contacts.find(V=>V.id===m.senderId),x=c?c.name:"Unknown";await jt(n.chatId,{id:"msg_"+Date.now(),conversationId:n.chatId,type:"payment_notice",action:"reject",amount:m.amount,senderName:De.value.name,targetName:x,timestamp:Date.now(),isMe:!0,text:"Rejected transfer"}),L.value=!1},qi=async(m=!1)=>{if(!v.value.trim())return;if(m&&!Rt.apiKey.value){alert(" API Setup  API Key  Model");return}const c=v.value;v.value="";let x="text",V=c;const Z=c.trim();/^<[a-z][\s\S]*>$/i.test(Z)&&(x="html",V=Z);const _e=c.match(/^\[html\]\s*(.+?)[:](.+)$/s);_e&&(x="html",V=_e[2].trim());const dt={id:"msg_"+Date.now(),conversationId:n.chatId,text:c,senderId:"me",timestamp:Date.now(),isMe:!0,replyTo:z.value?{id:z.value.id,text:z.value.text||(z.value.type==="image"?"[Image]":"[Content]"),senderName:Tt(z.value),type:z.value.type}:null,type:x,content:V};z.value=null,await jt(n.chatId,dt),m&&(l.value?.isGroup,So())},ad=async()=>{if(v.value.trim())await qi(!0);else{if(!Rt.apiKey.value){alert(" API Setup  API Key  Model");return}So()}},Rt=Ec(),So=async()=>{if(!Rt.apiKey.value)return;g.value=!0;const m=De.value.name,c=De.value.persona||"Unknown",x=l.value?.localSettings?.shortTermMemoryLimit||15,V=He.value.slice(-x),Z=V.map(Q=>Q.text).join(`
`),{front:fe,mid:_e,back:dt,historyInjections:Ye}=Gi(Z,""),Ae=l.value?.localSettings||{},zt=Ae.timeAwareness!==!1,Ke=Ae.envSensing===!0,$t=Ae.innerVoiceEnabled===!0,Os=Ae.innerVoiceUseCustom===!0,Be=Ae.innerVoiceTemplate||"";let Ue="",he="",$e=[];if(Ae.longTermMemoryEnabled===!0)try{const Q=He.value.slice(-5).map(de=>de.text||"").join(" "),te=await Xa(n.chatId,Q);if(te.coreMemories.length>0&&(he+=`/
`,te.coreMemories.forEach(de=>{he+=`: ${de.source}
${de.summary}

`})),te.recentFacts.length>0&&(he+=`
`,te.recentFacts.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=de.sourceType==="group"?"[]":"[]";he+=`${Ce} ${Oe}: ${de.action||de.what}${de.when?` (${de.when})`:""}
`}),he+=`
`),te.rankedFacts.length>0&&(he+=`
`,te.rankedFacts.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=de.sourceType==="group"?"[]":"[]";he+=`${Ce} ${Oe}: ${de.action||de.what}${de.when?` (${de.when})`:""}
`}),he+=`
`),te.noteMemory){const de=te.noteMemory,Oe=Array.isArray(de.who)?de.who.join(""):de.who;he+=`/
`,he+=`"${Oe}: ${de.action||de.what}"
`,he+=`......

`}zt&&(te.upcomingAppointments?.length>0&&(he+=`
`,te.upcomingAppointments.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=new Date(de.appointmentTime).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});he+=`- ${Oe}: ${de.action} (${Ce})
`}),he+=`
`),te.overdueAppointments?.length>0&&(he+=`
`,te.overdueAppointments.forEach(de=>{const Oe=Array.isArray(de.who)?de.who.join(""):de.who,Ce=new Date(de.appointmentTime).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});he+=`- ${Oe}: ${de.action} ( ${Ce})
`}),he+=`
`)),he&&console.log("[Memory] Prepared smart memory context:",{cores:te.coreMemories.length,recent:te.recentFacts.length,ranked:te.rankedFacts.length,hasNote:!!te.noteMemory}),$e=[...te.upcomingAppointments||[],...te.overdueAppointments||[]]}catch(Q){console.warn("[Memory] Failed to load memories for injection:",Q),he=""}const ut=(_e?_e+`
`:"")+Ue,Ct=he?`

${he}`:"";let vt="";const pt=[],xt=[];for(let Q=1;Q<V.length;Q++){const te=V[Q],de=V[Q-1],Oe=te.timestamp-de.timestamp,Ce=Math.floor(Oe/6e4);Ce>15&&xt.push({index:Q,diffMins:Ce,currTimestamp:te.timestamp})}xt.length>4&&xt.splice(0,xt.length-4);const as=Q=>{if(Q<60)return`${Q} `;const te=Math.floor(Q/60),de=Q%60;return te<24?`${te} ${de>0?" "+de+" ":""}`:`${Math.floor(te/24)}  ${te%24} `},gs=Q=>{const te=new Date(Q),de=te.getFullYear(),Oe=String(te.getMonth()+1).padStart(2,"0"),Ce=String(te.getDate()).padStart(2,"0"),lt=te.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return`${de}-${Oe}-${Ce} ${lt}`},hs=(Q,te)=>{let de=Intl.DateTimeFormat().resolvedOptions().timeZone;Q&&Q.trim()&&(de=Q.trim());try{const Oe=te?new Date(te):new Date,Ce=Oe.getFullYear(),lt=String(Oe.getMonth()+1).padStart(2,"0"),bt=String(Oe.getDate()).padStart(2,"0"),St=["","","","","","",""][Oe.getDay()],Zt=Oe.toLocaleTimeString("en-US",{timeZone:de,hour:"2-digit",minute:"2-digit",hour12:!1});return`${Ce}-${lt}-${bt} ${St} ${Zt}`}catch{return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}};let pn=!1,El=0;const Mo=[];if(V.forEach((Q,te)=>{if(Q.type==="innerVoice")return;const de=xt.find(Ce=>Ce.index===te);if(de){if(zt){const Ce=as(de.diffMins),bt=`[(${gs(de.currTimestamp)})  ${Ce}]`;pt.push({role:"system",content:bt})}pn=!0,El=de.currTimestamp}let Oe="Unknown";if(Q.isMe)Oe=De.value.name;else{const Ce=fs(Q.senderId);Oe=Ce?Ce.name:"Unknown"}if(Q.isRecalled)pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe}${Q.text||"[]"}`});else if(Q.type==="image")Q.isAnalyzed?pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe}[]`}):(pt.push({role:Q.isMe?"user":"assistant",content:[{type:"text",text:`[] ${Oe} sent an image.`},{type:"image_url",image_url:{url:Q.content}}]}),Mo.push(Q.id));else if(Q.type==="transfer")pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe}@${Yi(Q)} ${Q.amount?Q.amount.toFixed(2):"0.00"} ${Q.note||""}`.trim()});else if(Q.type==="payment_notice")Q.action==="collect"?pt.push({role:"assistant",content:`[] ${Q.senderName}${Q.targetName} ${Q.amount}`}):pt.push({role:"assistant",content:`[] ${Q.senderName}${Q.targetName} ${Q.amount}`});else if(Q.type==="video_call_notice"){if(Q.callResult==="missed")pt.push({role:Q.isMe?"user":"assistant",content:`[] ${Oe} `});else if(Q.callResult==="completed"&&Q.callTranscript){let Ce="";try{const lt=typeof Q.callTranscript=="string"?JSON.parse(Q.callTranscript):Q.callTranscript;Array.isArray(lt)&&(Ce=lt.map(bt=>bt.text).join(`
`))}catch{}Ce&&pt.push({role:"system",content:`[] ${Oe} ${Math.floor((Q.duration||0)/1e3)}
${Ce}`})}}else{let Ce="[]",lt=Q.text;if(Q.type==="sticker"?(Ce="[]",lt=Q.keyword):Q.type==="spoiler"?(Ce="[]",lt=Q.text):Q.type==="voice"?(Ce="[]",lt=Q.text):Q.type==="action"?(Ce="[]",lt=Q.text):Q.type==="html"?(Ce="[html]",lt=Q.content||Q.text):Q.type==="location"&&(Ce="[]",lt=Q.text),Q.replyTo){Ce="[]";let bt=Q.replyTo.senderName;if(Q.replyTo.id){const St=He.value.find(Zt=>Zt.id===Q.replyTo.id);if(St)if(St.isMe)bt=De.value.name;else{const Zt=fs(St.senderId);Zt&&Zt.name&&(bt=Zt.name)}}const Yn=`{${bt}${Q.replyTo.text}}`;pt.push({role:Q.isMe?"user":"assistant",content:`${Ce} ${Oe}${Yn} ${lt}`})}else pt.push({role:Q.isMe?"user":"assistant",content:`${Ce} ${Oe}${lt}`})}}),V.length>0){const Q=V[V.length-1],te=Date.now(),de=te-Q.timestamp,Oe=Math.floor(de/6e4);if(Oe>15){if(zt){const Ce=as(Oe),bt=`[(${gs(te)})  ${Ce}]`;pt.push({role:"system",content:bt})}pn=!0,El=te}}if(pn&&(zt||Ke)||!pn&&Ke){const Q=l.value?.localSettings?.myLocationOverride,te=De.value.name,de=El||Date.now(),Oe=l.value?.localSettings?.myWeatherConfig,Ce=async(et,ht)=>{let Bt=[];if(zt&&Bt.push(hs(et,de)),Ke&&ht&&ht.lat){const Sn=await uv(ht.lat,ht.long);Sn&&Bt.push(`${rv(Sn.conditionCode)} ${Sn.temperature}C`)}return Bt.join(" ")},lt=await Ce(Q,Oe),bt=[];lt&&bt.push(`${te}: ${lt}`);const Yn=l.value?.localSettings?.theirLocationOverride,St=l.value?.localSettings?.memberOverrides||{},Zt=l.value?.localSettings?.theirWeatherConfig,Cn=l.value?.localSettings?.groupWeatherConfigs||{};if((l.value?.type==="group"||l.value?.isGroup)&&Array.isArray(l.value.members))for(const et of l.value.members){const ht=k.contacts.find(Bt=>Bt.id===et);if(ht){const Bt=St[et]?.location||ht.location,Sn=Cn[et],To=await Ce(Bt,Sn);To&&bt.push(`${ht.name}: ${To}`)}}else{const et=k.contacts.find(ht=>ht.id===n.chatId);if(et){const ht=Yn||et.location,Bt=await Ce(ht,Zt);Bt&&bt.push(`${et.name}: ${Bt}`)}}if(bt.length>0){let et="",ht="Current Context";zt&&!Ke&&(et="",ht="Current Time"),!zt&&Ke&&(et="",ht="Current Weather");const Bt=bt.join(", ");console.log("[ContextAwareness] Injected:",Bt),pt.push({role:"system",content:`[${et} (${ht})${Bt}]`})}}const jl=[];qs.value.length>0&&qs.value.forEach(Q=>{Pn(Q.id).forEach(de=>jl.push(de.keyword))});const Ji=jl.length>0?`
[]: ${jl.join(", ")}`:`
[]: `;if(l.value?.type==="group"||l.value?.isGroup){const te=(l.value.members||[]).map(de=>{const Oe=typeof de=="object"?de.id:de,Ce=k.contacts.find(lt=>lt.id===Oe);return Ce?`${Ce.name||"Unknown"} (${Ce.handle||Ce.name}): ${Ce.persona||Ce.bio||"No persona"}`:""}).filter(Boolean).join(`
`);vt=`
 "${l.value.title||"Group"}"
"${m}" (${c})
${ut?`
`+ut+`
`:""}

${te||""}${Ct}
${Ji}

 - 
 [] 
- " X //"""""""""
- 
- 
- 

 - 
- A  B  Alice Bob  []  Alice
- 
-  Alice  Bob  Alice Bob Alice  Charlie 
-  [] 
- 
- 

 - 
- "..."""
- "...""..."
- 
- 

 - 
 []  []  [] 
- 
- /


HTML - 
HTML/
1.  [html]  [] 
2. [html] 
3. HTML[html]

 - 
1.  [] "[] "  "[] "
2. "[] "



[] Alice
[html] Alice<div>HTML</div>   


[] 
[] {} 
[] 
[] 
[] @  
[]  [] AliceMagic 100.00
[]  [] BobMagic 50.00
[] 
[html] <HTML>
[] 
[] 
[] ${$t?`
[] 

 - 
1[]${Os&&Be?`

 - 

[] ${Be}`:`

[] Alice...
[] Alice~`}`:""}

1${$t?`
[] Alice~`:""}
[] Alice~
[] Bob{Alice~} 
[] Alice
[] Charlie{Bob} 


2-4${$t?"1[]":""}`}else{const Q=k.contacts.find(Oe=>Oe.id===n.chatId),te=Q?.name||p.value.handle,de=Q?.persona||Q?.bio||"A helpful assistant.";vt=`
"${te}"
Persona${de}${Ct}
"${m}"
${c}
${ut?`
`+ut+`
`:""}
${Ji}

 - 
 [] 
- " X //"""""""""
- 
- 
- 

 - 
- "..."""
- "...""..."
- 
- 

 - 
 [] "[] @ 100.00" []  [] 
- 
- /

HTML - 
HTML/
1.  [html]  [] 
2. [html] 
3. HTML[html]

 - 
1.  [] "[] ${te}"  "[] ${te}"
2. "[] ${te}"


[] ${te}
[html] ${te}<div>HTML</div>   HTML


[] ${te}
[] ${te}{} 
[] ${te}
[] ${te}
[] ${te}@  
[] ${te} [] ${te}${m} 100.00
[] ${te} [] ${te}${m} 50.00
[] ${te}
[html] ${te}<HTML>
[] ${te}
[] ${te}
[] ${te}${$t?`
[] ${te}

 - 
1[]${Os&&Be?`

 - 

[] ${te}${Be}`:`

[] ${te}...
[] ${te}...
[] ${te}...`}`:""}

1${$t?`
[] ${te}...`:""}
[] ${te}
[] ${te}


2-7${$t?"1[]":""}1`}Ye&&Ye.length>0&&Ye.forEach(Q=>{const te=Math.max(0,pt.length-Q.depth);pt.splice(te,0,{role:"system",content:`[] ${Q.content}`})});try{const Q=[...fe.map(St=>({role:"system",content:`[/] ${St}`})),{role:"system",content:vt},...pt,...dt.map(St=>({role:"system",content:`[/] ${St}`}))],te=Rt.stream.value===!0;console.log("[TimeAwareness] Settings Stream Value:",Rt.stream.value),console.log("[TimeAwareness] Effective useStream:",te);const de={model:Rt.model.value||"gpt-3.5-turbo",messages:Q,temperature:Rt.temperature.value||.7,stream:te},Oe=Rt.getActiveKey(),Ce=Rt.endpoint.value.replace(/\/+$/,"")+"/chat/completions",lt=async()=>{const St=1500+Math.random()*1500;console.log(`[TimeAwareness] Simulating Delay: ${Math.floor(St)}ms`),await new Promise(Zt=>setTimeout(Zt,St))},bt=await fetch(Ce,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Oe}`},body:JSON.stringify(de)});if(!bt.ok){const St=await bt.text();throw new Error(`API Error: ${bt.status} - ${St}`)}let Yn="";if(te){const St=bt.body.getReader(),Zt=new TextDecoder("utf-8");let Cn=!1,et="";for(;!Cn;){const{value:ht,done:Bt}=await St.read();if(Cn=Bt,ht){const To=Zt.decode(ht,{stream:!0}).split(`
`);for(const Xi of To)if(Xi.trim().startsWith("data: ")){const Qi=Xi.trim().slice(6);if(Qi==="[DONE]")continue;try{const vd=JSON.parse(Qi).choices?.[0]?.delta?.content||"";et+=vd;const Eo=/\[(?:|||||||||html||||)]/;let Ps=et.search(Eo),In=-1;if(Ps!==-1){const Al=et.substring(Ps+1).search(Eo);Al!==-1&&(In=Ps+1+Al)}for(;Ps!==-1&&In!==-1;){const Zi=et.slice(Ps,In).trim();if(await Io(Zi),await lt(),et=et.slice(In),Ps=et.search(Eo),In=-1,Ps!==-1){const ea=et.substring(Ps+1).search(Eo);ea!==-1&&(In=Ps+1+ea)}}}catch{}}}}if(et.search(/\[(?:|||||||||html||||)]/)!==-1){const ht=et.substring(et.search(/\[(?:|||||||||html||||)]/)).trim();await Io(ht)}}else{const Cn=((await bt.json()).choices?.[0]?.message?.content||"").split(/(?=\[(?:|||||||||html||||)])/);for(const et of Cn)et.trim()&&(await Io(et),await lt())}}catch(Q){console.error("AI Reply failed",Q),g.value=!1}finally{if(g.value=!1,Mo&&Mo.length>0)for(const Q of Mo){const te=He.value.find(de=>de.id===Q);te&&await Xs(n.chatId,{...te,isAnalyzed:!0})}if($e&&$e.length>0){const Q=He.value.filter(te=>!te.isMe&&te.timestamp>Date.now()-6e4).map(te=>(te.text||"").toLowerCase()).join(" ");for(const te of $e)(te.action||"").toLowerCase().split(/[\s]+/).filter(Ce=>Ce.length>1).some(Ce=>Q.includes(Ce))&&te.id&&await yf(te.id)}await _s(),Qt()}},Ml=new Set,rd=async(m,c,x,V)=>{const Z=He.value.filter(_e=>_e.type==="transfer"&&_e.status==="pending"&&_e.isMe===!0&&Math.abs(_e.amount-V)<.1&&!Ml.has(_e.id)),fe=Z[Z.length-1];if(fe){Ml.add(fe.id),m==="collect"?await Xs(n.chatId,{...fe,status:"collected"}):m==="reject"&&(await Xs(n.chatId,{...fe,status:"rejected"}),Wa(fe.amount,`Refund from ${c}`));let _e=n.chatId;if(l.value?.type==="group"||l.value?.isGroup){const Ye=k.contacts.find(Ae=>Ae.name===c);Ye&&(_e=Ye.id)}await jt(n.chatId,{id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"payment_notice",action:m,amount:V,senderId:_e,senderName:c,targetName:x,timestamp:Date.now(),isMe:!1,text:m==="collect"?"Accepted transfer":"Rejected transfer"}),setTimeout(()=>Ml.delete(fe.id),5e3)}},Io=async m=>{const c=m.match(/^\[(|)]\s*(.+?)[:]\s*(.+?)\s+(\d+(\.\d+)?)/);if(c){const Be=c[1]===""?"collect":"reject",Ue=c[2].trim(),he=c[3].trim(),$e=parseFloat(c[4]);await rd(Be,Ue,he,$e);return}const x=m.match(/^\[\]\s*(.+?)[:]\s*\{(.+?)[:](.+?)\}\s*(.+)$/s);if(x&&x[4]){const Be=x[1].trim(),Ue=x[2].trim(),he=x[3].trim(),$e=x[4].trim(),Ge=He.value.slice().reverse().find(xt=>{const as=xt.text&&xt.text.includes(he);let gs=!1;if(xt.isMe)gs=Ue===De.value.name||Ue===De.value.handle;else{const hs=fs(xt.senderId);hs&&(gs=Ue===hs.name||Ue===hs.handle)}return as&&gs});let ut=n.chatId;if(l.value?.type==="group"||l.value?.isGroup){let xt=k.contacts.find(as=>as.name===Be||as.handle===Be);xt&&(ut=xt.id)}let vt=Ue;if(Ge)vt=Tt(Ge);else if(Ue===De.value.name)vt=De.value.handle||De.value.name;else{const xt=k.contacts.find(as=>as.name===Ue);xt&&(vt=xt.handle||xt.name)}const pt={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:$e,content:$e,type:"text",senderId:ut,timestamp:Date.now(),isMe:!1,replyTo:{id:Ge?Ge.id:"unknown_quote",text:he,senderName:vt,type:Ge?Ge.type:"text"}};await jt(n.chatId,pt),await _s(),Qt();return}const V=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(V&&V[2]){const Be=V[1].trim(),Ue=V[2].trim();await As(Be,Ue,"text");return}const Z=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(Z&&Z[2]){const Be=Z[1].trim(),Ue=Z[2].trim();await As(Be,Ue,"spoiler");return}const fe=m.match(/^\[]\s*(.+?)[:]\s*@(.+?)\s+(\d+(\.\d+)?)\s*(.*)$/);if(fe){fe[1].trim();const Be=fe[2].trim(),Ue=parseFloat(fe[3]),he=fe[5]?fe[5].trim():"";let $e=n.chatId;l.value?.type==="group"||l.value?.isGroup;const Ge=De.value.name.toLowerCase();let ut=null;if(Be.toLowerCase()===Ge||Be===""||Be==="")ut=De.value.id;else{const vt=k.contacts.find(pt=>pt.name===Be);vt&&(ut=vt.id)}const Ct={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,type:"transfer",amount:Ue,note:he,senderId:$e,recipientId:ut,recipientName:Be,timestamp:Date.now(),isMe:!1,status:"pending"};await jt(n.chatId,Ct);return}const _e=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(_e&&_e[2]){const Be=_e[1].trim(),Ue=_e[2].trim();await As(Be,JSON.stringify({name:Ue,address:"Shared Location"}),"location");return}const dt=m.match(/^\[\]\s*(.+?)[:](.+)$/s);if(dt&&dt[2]){const Be=dt[1].trim(),Ue=dt[2].trim();await As(Be,Ue,"action");return}const Ye=m.match(/^\[\]\s*(.+)$/s);if(Ye){const Be=Ye[1].trim();Fc(Be);return}const Ae=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(Ae&&Ae[2]){const Be=Ae[1].trim(),Ue=Ae[2].trim(),he=qs.value.flatMap($e=>Pn($e.id)).find($e=>$e.keyword===Ue);he&&await As(Be,he.url,"sticker",Ue);return}const zt=m.match(/^\[]\s*(.+?)[:](.+)$/s);if(zt&&zt[2]){const Be=zt[1].trim(),Ue=zt[2].trim();await As(Be,Ue,"voice");return}const Ke=m.match(/^\[html\]\s*(.+?)[:](.+)$/s);if(Ke&&Ke[2]){const Be=Ke[1].trim(),Ue=Ke[2].trim();await As(Be,Ue,"html");return}const $t=m.match(/^\[\]\s*(.+?)[:](.+)$/s);if($t&&$t[2]){const Be=$t[1].trim(),Ue=$t[2].trim();await As(Be,Ue,"innerVoice");return}const Os=m.match(/\[\]\s*(.+?)[:](.+)$/s);if(Os&&Os[2]){const Be=Os[1].trim(),Ue=Os[2].trim(),$e=He.value.slice(-20).reverse().find(Ge=>!Ge.isRecalled&&Ge.text&&(Ge.text.includes(Ue)||Ue.includes(Ge.text))&&Ge.senderId!==n.chatId);if($e)await new Promise(Ge=>setTimeout(Ge,2e3)),B($e.id);else{await As(Be,Ue,"text"),await _s(),Qt(),await new Promise(ut=>setTimeout(ut,2500));const Ge=He.value[He.value.length-1];Ge&&!Ge.isRecalled&&B(Ge.id)}return}},As=async(m,c,x="text",V="")=>{let Z=n.chatId;if(l.value?.type==="group"||l.value?.isGroup){const dt=m.toLowerCase();let Ye=k.contacts.find(Ae=>Ae.name===m||Ae.handle===m||Ae.id===m||Ae.name&&Ae.name.toLowerCase()===dt||Ae.handle&&Ae.handle.toLowerCase()===dt);if(!Ye&&l.value.members.includes(m)&&(Ye=k.contacts.find(Ae=>Ae.id===m)),!Ye&&l.value.members&&l.value.members.length>0){const Ae=l.value.members[0];Ye=k.contacts.find(zt=>zt.id===Ae)}Ye&&(Z=Ye.id)}const _e={id:"msg_"+Date.now()+Math.random(),conversationId:n.chatId,text:c,content:c,type:x,keyword:V,senderId:Z,senderName:m,timestamp:Date.now(),isMe:!1};await jt(n.chatId,_e),await _s(),Qt()},Yi=m=>{if(m.recipientName)return m.recipientName;if(m.recipientId){if(m.recipientId===De.value.id)return De.value.name;const c=k.contacts.find(x=>x.id===m.recipientId);if(c)return c.name}return m.isMe?ne.value.name||"User":De.value.name},cd=m=>m.isMe?!1:!!(!m.recipientId&&!m.recipientName||m.recipientId===De.value.id||m.recipientName&&(m.recipientName===De.value.name||m.recipientName===""||m.recipientName.includes(De.value.name))),fs=m=>{if(m==="me")return null;const c=l.value?.localSettings?.memberOverrides?.[m],x=k.contacts.find(V=>V.id===m);return c?{...x,handle:c.nickname||x?.handle||"Unknown",avatar:c.avatar||x?.avatar,id:m}:x},un=C(null),Tl=C({x:0,y:0}),dd=(m,c)=>{m.touches.length>1||(Tl.value={x:m.touches[0].clientX,y:m.touches[0].clientY},un.value=setTimeout(()=>{yt(c),navigator.vibrate&&navigator.vibrate(50)},500))},ud=()=>{un.value&&(clearTimeout(un.value),un.value=null)},pd=m=>{if(!un.value)return;const c=m.touches[0].clientX,x=m.touches[0].clientY;(Math.abs(c-Tl.value.x)>10||Math.abs(x-Tl.value.y)>10)&&(clearTimeout(un.value),un.value=null)};return(m,c)=>(d(),f(oe,null,[t("div",wv,[t("header",kv,[t("div",_v,[t("button",{onClick:u,class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...c[44]||(c[44]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),t("div",zv,[t("div",{class:"size-9 rounded-full bg-black overflow-hidden flex items-center justify-center relative border border-gray-100",style:Ve({backgroundImage:p.value.avatar?`url(${p.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[!p.value.avatar&&p.value.isAbstract?(d(),f("div",$v,[...c[45]||(c[45]=[t("div",{class:"w-[0.5px] h-full bg-white/30 rotate-45 absolute left-1/2"},null,-1),t("div",{class:"w-[0.5px] h-full bg-white/30 -rotate-45 absolute left-1/2"},null,-1)])])):p.value.avatar?M("",!0):(d(),f("div",Cv))],4),t("div",Sv,[t("h1",Iv,w(p.value.handle||"Unknown"),1),c[46]||(c[46]=t("span",{class:"text-[9px] text-zinc-400 uppercase tracking-[0.15em] font-medium"},"Online",-1))])]),t("div",Mv,[t("button",{onClick:c[0]||(c[0]=x=>m.$emit("navigate","chat-settings",{id:n.chatId})),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"more_horiz")])])]),t("main",{ref_key:"messagesContainer",ref:dn,class:"flex-1 overflow-y-auto px-5 pt-4 pb-2 flex flex-col gap-4 w-full"},[t("div",Tv,[t("span",Ev,w(l.value?.time||"Today"),1)]),b.value.length>0?(d(),f("div",jv,[(d(!0),f(oe,null,ye(b.value,x=>(d(),f("div",{key:x.id,id:"msg-"+x.id,class:W(["flex flex-col relative select-none",x.isMe?"items-end":"items-start"])},[x.isRecalled?(d(),f("div",Ov,[t("div",{class:W(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0",se.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[t("div",{class:W(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",K.value.has(x.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:V=>qt(x)},[K.value.has(x.id)?(d(),f("span",Rv,"check")):M("",!0)],10,Pv)],2),t("div",Nv,[t("div",{class:"flex flex-col items-center gap-1 cursor-pointer group p-2",onClick:je(V=>x.isRecallRevealed=!x.isRecallRevealed,["stop"]),onContextmenu:je(V=>yt(x),["prevent"])},[t("span",Dv,[ns(w(x.isMe?"":`${fs(x.senderId)?.handle||fs(x.senderId)?.name||"Someone"} `)+" ",1),t("span",Vv,w(x.isRecallRevealed?"()":"()"),1)]),x.isRecallRevealed?(d(),f("div",Bv,[x.type==="image"?(d(),f("img",{key:0,src:x.content||x.text,class:"max-w-[120px] rounded-lg opacity-80 grayscale"},null,8,Uv)):x.type==="sticker"?(d(),f("img",{key:1,src:x.content||x.text,class:"max-w-[80px] opacity-80 grayscale"},null,8,Fv)):x.type==="transfer"||x.type==="payment_notice"?(d(),f("span",Wv,"["+w(x.type)+"]",1)):(d(),f("p",{key:3,class:"break-words leading-relaxed whitespace-pre-wrap",innerHTML:a(x.text||"[Empty Message]")},null,8,Kv))])):M("",!0)],40,Lv)])])):(d(),f("div",Hv,[t("div",{class:W(["overflow-hidden transition-all duration-300 flex items-start justify-center shrink-0 pt-[5px]",se.value?"w-[42px] opacity-100 pr-2":"w-0 opacity-0 pr-0"])},[t("div",{class:W(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-200 cursor-pointer shrink-0",K.value.has(x.id)?"bg-black border-black scale-100":"bg-transparent border-zinc-300 hover:border-zinc-400 scale-95"]),onClick:V=>qt(x)},[K.value.has(x.id)?(d(),f("span",qv,"check")):M("",!0)],10,Gv)],2),t("div",{class:W(["flex-1 min-w-0 flex flex-col relative transition-all duration-300",[x.isMe?"items-end":"items-start",y.value&&y.value.id===x.id?"z-[60]":"z-auto",x.isRecalled?"opacity-90":""]])},[t("div",{class:W(["flex items-start gap-2 mb-2 w-full transition-all duration-300 select-none",x.isMe?"flex-row-reverse":"flex-row"]),onContextmenu:je(V=>yt(x),["prevent"]),onTouchstart:V=>dd(V,x),onTouchend:ud,onTouchmove:pd},[x.isMe&&l.value?.localSettings?.showSelfAvatar!==!1||!x.isMe&&l.value?.localSettings?.showOtherAvatar!==!1?(d(),f("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Ve({backgroundImage:`url(${x.isMe?l.value?.localSettings?.myAvatarOverride||De.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E":l.value?.localSettings?.theirAvatarOverride||fs(x.senderId)?.avatar||l.value?.avatar})`,backgroundSize:"cover"})},null,4)):M("",!0),t("div",{class:W(["flex flex-col max-w-[88%] text-[15px]",x.isMe?"items-end":"items-start"])},[l.value?.type==="group"&&!x.isMe?(d(),f("div",Jv,w(fs(x.senderId)?.handle||"Unknown"),1)):M("",!0),x.type==="video_call_notice"?(d(),f("div",{key:1,onClick:V=>Vi(x),class:W(["px-4 py-3 rounded-2xl cursor-pointer transition-all flex items-center gap-3 select-none shadow-sm group border active:scale-[98%]",x.isMe?"bg-black text-white border-zinc-800 hover:bg-zinc-900 rounded-br-sm":"bg-white border-zinc-100 hover:bg-zinc-50 rounded-bl-sm"])},[t("div",{class:W(["w-9 h-9 rounded-full flex items-center justify-center transition-colors",x.isMe?"bg-white/10 group-hover:bg-white/20":"bg-zinc-100 group-hover:bg-zinc-200"])},[t("span",{class:W(["material-symbols-outlined text-xl",x.callResult==="missed"?"text-red-400":x.isMe?"text-white":"text-zinc-800"])},w(x.callResult==="missed"?"call_missed":"videocam"),3)],2),t("div",Qv,[t("span",{class:W(["text-[13px] font-bold leading-tight tracking-wide",x.isMe?"text-white":"text-zinc-800"])},w(x.callResult==="missed"?"Missed Call":"Video Chat"),3),t("span",{class:W(["text-[10px] font-mono mt-0.5 transition-colors",x.isMe?"text-white/60":"text-zinc-500"])},w(x.duration?wl(x.duration):x.callResult==="missed"?"No Answer":"Ended"),3)]),x.callResult==="completed"?(d(),f("span",{key:0,class:W(["material-symbols-outlined text-lg ml-1 group-hover:translate-x-0.5 transition-all",x.isMe?"text-white/30 group-hover:text-white/60":"text-zinc-300 group-hover:text-zinc-500"])},"chevron_right",2)):M("",!0)],10,Xv)):x.type==="sticker"?(d(),f("div",{key:2,class:W(["flex flex-col",x.isMe?"items-end":"items-start"])},[x.replyTo?(d(),f("div",{key:0,class:W(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",x.isMe?"items-end":"items-start"]),onClick:je(V=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(x.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[t("span",ex,w(x.replyTo.senderName),1),t("span",tx,w(x.replyTo.text),1)],2)],10,Zv)):M("",!0),t("div",{class:W(["rounded-2xl overflow-hidden mb-1",x.isMe?"rounded-tr-sm":"rounded-tl-sm"])},[t("img",{src:x.content||x.text,class:"max-w-[110px] max-h-[110px] object-contain block bg-white/50 backdrop-blur-sm"},null,8,sx)],2)],2)):x.type==="spoiler"?(d(),f("div",{key:3,class:"relative overflow-hidden rounded-[24px] cursor-pointer group w-[240px] h-[320px] shadow-sm transition-all duration-300 hover:shadow-md",onClick:V=>x.isRevealed=!x.isRevealed},[c[48]||(c[48]=t("div",{class:"absolute inset-0 bokeh-effect"},null,-1)),x.isRevealed?(d(),f("div",lx,[t("p",{class:"font-serif text-[20px] leading-relaxed text-center text-black/90 break-words drop-shadow-sm italic",innerHTML:a(x.text)},null,8,ix)])):(d(),f("div",ox,[...c[47]||(c[47]=[kt('<div class="absolute inset-0 z-0 opacity-80" data-v-3e790d84><div class="absolute w-14 h-16 top-6 left-6 -rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-translate-y-1" data-v-3e790d84><div class="w-full h-[80%] bg-zinc-800 flex items-center justify-center" data-v-3e790d84><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-3e790d84>filter_hdr</span></div></div><div class="absolute w-12 h-16 top-10 right-4 rotate-12 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:translate-x-1" data-v-3e790d84><div class="w-full h-[80%] bg-zinc-300 flex items-center justify-center" data-v-3e790d84><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-3e790d84>photo_camera</span></div></div><div class="absolute w-14 h-16 bottom-12 left-8 rotate-6 bg-white p-[3px] shadow-sm border border-black/5 transform transition-transform group-hover:-rotate-3" data-v-3e790d84><div class="w-full h-[80%] bg-zinc-600 flex items-center justify-center" data-v-3e790d84><span class="material-symbols-outlined text-white/50 text-[10px]" data-v-3e790d84>auto_awesome_motion</span></div></div></div><div class="relative z-10 flex flex-col items-center transform translate-y-2" data-v-3e790d84><span class="font-serif italic text-black text-[18px] tracking-tight drop-shadow-sm" data-v-3e790d84>Click to reveal</span><span class="text-[9px] text-black/50 uppercase tracking-[0.2em] font-medium mt-1" data-v-3e790d84>Tap/Click</span></div>',2)])]))],8,nx)):x.type==="image"?(d(),f("div",{key:4,class:W(["flex flex-col",x.isMe?"items-end":"items-start"])},[x.replyTo?(d(),f("div",{key:0,class:W(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[200px]",x.isMe?"items-end":"items-start"]),onClick:je(V=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(x.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[t("span",rx,w(x.replyTo.senderName),1),t("span",cx,w(x.replyTo.text),1)],2)],10,ax)):M("",!0),t("div",{class:"rounded-2xl overflow-hidden mb-1 cursor-zoom-in",onClick:V=>jc(x.content)},[t("img",{src:x.content,class:"max-w-[200px] max-h-[300px] object-cover block bg-zinc-50 border border-black/5"},null,8,ux)],8,dx)],2)):x.type==="location"?(d(),f("div",{key:5,class:W(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl rounded-[24px]",[x.isMe?"bg-white rounded-br-md border border-zinc-100":"bg-white rounded-bl-md border border-zinc-100",K.value.has(x.id)?"ring-2 ring-indigo-500":""]]),onClick:()=>{try{m.window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(JSON.parse(x.content).name||x.text)}`,"_blank")}catch{}},style:{width:"260px"}},[t("div",fx,[c[49]||(c[49]=t("div",{class:"absolute inset-0",style:{"background-image":"linear-gradient(#e4e4e7 1px, transparent 1px), linear-gradient(to right, #e4e4e7 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),(d(!0),f(oe,null,ye(Yc(x.text),(V,Z)=>(d(),f("div",{key:Z,class:"absolute bg-black transition-all duration-700 hover:scale-105",style:Ve({left:V.left,top:V.top,width:V.width,height:V.height,opacity:V.opacity,borderRadius:"2px"})},null,4))),128)),c[50]||(c[50]=kt('<div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000 translate-y-full group-hover:-translate-y-full transform" data-v-3e790d84></div><div class="absolute inset-0 flex items-center justify-center pt-4" data-v-3e790d84><div class="relative flex flex-col items-center" data-v-3e790d84><div class="w-12 h-12 bg-black/5 rounded-full animate-ping absolute top-0 -translate-y-1.5 opacity-0 group-hover:opacity-100 transition-opacity" data-v-3e790d84></div><div class="w-8 h-8 rounded-full bg-black shadow-lg flex items-center justify-center relative z-10 transform transition-transform group-hover:-translate-y-2 ring-2 ring-white" data-v-3e790d84><div class="w-2.5 h-2.5 rounded-full bg-white" data-v-3e790d84></div></div><div class="w-1 h-3 bg-black rounded-b-sm -mt-0.5 z-0 shadow-sm" data-v-3e790d84></div><div class="w-3 h-1.5 bg-black/10 rounded-full blur-[1px] mt-0.5 group-hover:scale-75 group-hover:opacity-50 transition-all" data-v-3e790d84></div></div></div>',2))]),t("div",vx,[t("div",xx,[t("h4",bx,w((()=>{try{return JSON.parse(x.content).name}catch{return x.text}})()),1),c[51]||(c[51]=t("div",{class:"w-5 h-5 rounded-full bg-zinc-50 flex items-center justify-center shrink-0 group-hover:bg-zinc-100 transition-colors"},[t("span",{class:"material-symbols-outlined text-zinc-400 text-[12px]"},"open_in_new")],-1))]),t("p",mx,w((()=>{try{return JSON.parse(x.content).address}catch{return"Unknown Location"}})()),1),t("div",gx,[c[52]||(c[52]=t("div",{class:"flex items-center gap-1.5"},[t("div",{class:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),t("span",{class:"text-[9px] font-bold text-zinc-400 tracking-wide"},"LIVE")],-1)),t("span",hx,w((()=>{const V=(x.text||"Location")+(x.id||"")+"salt";let Z=3735928559,fe=1103547991;for(let Ye=0;Ye<V.length;Ye++){const Ae=V.charCodeAt(Ye);Z=Math.imul(Z^Ae,2654435761),fe=Math.imul(fe^Ae,1597334677)}Z=Math.imul(Z^Z>>>16,2246822507)^Math.imul(fe^fe>>>13,3266489909);const _e=(Math.abs(Z)%18e5/1e4-90).toFixed(4),dt=(Math.abs(fe)%36e5/1e4-180).toFixed(4);return`${_e}, ${dt}`})()),1)])])],10,px)):x.type==="voice"?(d(),f(oe,{key:6},[x.replyTo?(d(),f("div",{key:0,class:W(["mb-1 mt-0.5 cursor-pointer select-none group max-w-[140px]",x.isMe?"items-end":"items-start"]),onClick:je(V=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",(x.isMe,"border-zinc-300 group-hover:border-zinc-400")])},[t("span",wx,w(x.replyTo.senderName),1),t("span",kx,w(x.replyTo.text),1)],2)],10,yx)):M("",!0),t("div",{class:W(["flex flex-col relative overflow-hidden transition-all duration-300 cursor-pointer shadow-sm hover:shadow-md",[x.isMe?"bg-black text-white rounded-[18px] rounded-br-sm":"bg-white text-black rounded-[18px] rounded-bl-sm",K.value.has(x.id)?"ring-2 ring-indigo-500":""]]),onClick:V=>x.isExpanded=!x.isExpanded},[t("div",zx,[t("div",$x,[t("div",{class:W(["w-1 h-2 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.8s"}},null,2),t("div",{class:W(["w-1 h-3 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.1s"}},null,2),t("div",{class:W(["w-1 h-2 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.9s"}},null,2),t("div",{class:W(["w-1 h-4 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"1.3s"}},null,2),t("div",{class:W(["w-1 h-2 rounded-full animate-pulse",x.isMe?"bg-white/80":"bg-black/60"]),style:{"animation-duration":"0.7s"}},null,2)]),t("span",Cx,w(Math.min(60,Math.ceil(x.text.length/3)))+"'",1)]),x.isExpanded?(d(),f("div",{key:0,class:W(["px-3 pb-3 pt-1 animate-in slide-in-from-top-1 duration-200 border-t",x.isMe?"border-white/10":"border-black/5"])},[t("p",{class:"text-[15px] leading-relaxed break-words",innerHTML:a(x.text)},null,8,Sx)],2)):M("",!0)],10,_x)],64)):x.type==="html"?(d(),Te(vv,{key:7,content:x.content,"is-me":x.isMe},null,8,["content","is-me"])):x.type==="video_call_notice"||x.type==="text"&&x.text==="[] "?(d(),f("div",{key:8,onClick:V=>Vi(x),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[t("div",Mx,[t("div",Tx,[t("div",{class:W(["w-8 h-8 rounded-full flex items-center justify-center shrink-0",(x.callResult||"rejected")==="missed"||(x.callResult||"rejected")==="rejected"?"bg-zinc-100 text-zinc-500":"bg-black text-white"])},[t("span",Ex,w((x.callResult||"rejected")==="missed"?"call_missed":(x.callResult||"rejected")==="rejected"?"call_end":"videocam"),1)],2),c[53]||(c[53]=t("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Video Call",-1))]),t("span",jx,w((x.callResult||"rejected")==="missed"?"Missed":(x.callResult||"rejected")==="rejected"?"Declined":"Ended"),1)]),t("div",Ax,[t("span",Ox,w(x.duration?wl(x.duration):(x.callResult||"rejected")==="rejected"?"Declined":"No Answer"),1)]),t("div",Px,[t("span",null,w(new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1),x.callTranscript?(d(),f("span",Rx,[...c[54]||(c[54]=[t("span",{class:"material-symbols-outlined text-[10px]"},"description",-1),ns(" Transcript ",-1)])])):M("",!0)])],8,Ix)):x.type==="payment_notice"?(d(),f("div",{key:9,onClick:V=>nd(x),class:"rounded-2xl p-4 min-w-[220px] border mb-1 relative overflow-hidden bg-white text-black border-zinc-200 cursor-pointer transition-transform active:scale-95"},[t("div",Lx,[t("div",Dx,[t("div",{class:W(["w-8 h-8 rounded-full flex items-center justify-center shrink-0",x.action==="collect"?"bg-black text-white":"bg-zinc-100 text-zinc-900"])},[t("span",Vx,w(x.action==="collect"?"check":"close"),1)],2),c[55]||(c[55]=t("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Payment",-1))]),t("span",Bx,w(x.action==="collect"?"Success":"Returned"),1)]),t("div",Ux,[c[56]||(c[56]=t("span",{class:"text-xs opacity-60 mr-1"},"",-1)),t("span",Fx,w(x.amount?x.amount.toFixed(2):"0.00"),1)]),t("div",Wx,w(x.action==="collect"?`${x.senderName} accepted`:`${x.senderName} rejected transfer`),1)],8,Nx)):x.type==="transfer"?(d(),f("div",{key:10,onClick:V=>sd(x),class:W(["rounded-2xl p-4 min-w-[220px] cursor-pointer transition-transform active:scale-95 border mb-1 relative overflow-hidden",[x.isMe?"bg-black text-white border-black":"bg-white text-black border-zinc-200",x.status==="rejected"?"opacity-60 grayscale":""]])},[x.status==="rejected"?(d(),f("div",Hx,[...c[57]||(c[57]=[t("div",{class:"w-full h-[1px] bg-current opacity-50 rotate-[-12deg]"},null,-1)])])):M("",!0),t("div",Gx,[t("div",qx,[t("div",{class:W(["w-8 h-8 rounded-full flex items-center justify-center",x.isMe?"bg-zinc-800":"bg-zinc-100"])},[...c[58]||(c[58]=[t("span",{class:"material-symbols-outlined text-[18px]"},"currency_yen",-1)])],2),c[59]||(c[59]=t("span",{class:"text-[11px] font-bold uppercase tracking-widest opacity-60"},"Transfer",-1))]),t("span",Yx,w(x.status==="collected"?"Accepted":x.status==="rejected"?"Returned":x.status==="pending"?"Unclaimed":"Success"),1)]),t("div",Jx,[c[60]||(c[60]=t("span",{class:"text-xs opacity-60 mr-1"},"",-1)),t("span",{class:W(["text-2xl font-serif font-bold tracking-tight",x.status==="rejected"?"line-through decoration-2":""])},w(x.amount.toFixed(2)),3)]),t("div",Xx,[t("span",Qx,w(`to ${Yi(x)}`),1),x.note?(d(),f("span",Zx,' "'+w(x.note)+'" ',1)):M("",!0)])],10,Kx)):(d(),f(oe,{key:11},[r(x.text)?(d(),f("div",eb,[t("div",tb,[t("div",{innerHTML:a(x.text)},null,8,sb)])])):(d(),f("div",{key:1,class:W([x.isMe?"bubble-sent bg-bubble-sent text-white":"bubble-received bg-bubble-received text-black","px-3 py-[7px] shadow-sm min-h-[34px] w-fit max-w-full"])},[x.replyTo?(d(),f("div",{key:0,class:"mb-2 mt-0.5 cursor-pointer select-none group",onClick:je(V=>D(x.replyTo.id),["stop"])},[t("div",{class:W(["flex flex-col gap-0.5 border-l-[2px] pl-2 py-0.5 transition-colors",x.isMe?"border-white/50 group-hover:border-white/70":"border-zinc-300 group-hover:border-zinc-400"])},[t("span",{class:W(["text-[9px] font-bold uppercase tracking-wider opacity-60",x.isMe?"text-white":"text-zinc-500"])},w(x.replyTo.senderName),3),t("span",{class:W(["text-[12px] line-clamp-1 leading-snug opacity-90",x.isMe?"text-white":"text-zinc-700"])},w(x.replyTo.text),3)],2)],8,nb)):M("",!0),t("p",{class:"message-text leading-snug break-words whitespace-pre-wrap",innerHTML:a(x.text)},null,8,ob)],2))],64)),t("span",lb,w(new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)],2)],42,Yv)],2)]))],10,Av))),128))])):M("",!0),g.value?(d(),f("div",ib,[t("div",ab,[l.value?.localSettings?.showOtherAvatar!==!1?(d(),f("div",{key:0,class:"shrink-0 w-[34px] h-[34px] rounded-full bg-neutral-200 overflow-hidden relative border border-gray-100",style:Ve({backgroundImage:`url(${l.value?.localSettings?.theirAvatarOverride||p.value.avatar||l.value?.avatar})`,backgroundSize:"cover"})},null,4)):M("",!0),c[61]||(c[61]=kt('<div class="bubble-received bg-bubble-received px-3 py-[7px] text-black w-fit" data-v-3e790d84><div class="flex gap-1 h-[21px] items-center" data-v-3e790d84><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-3e790d84></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-3e790d84></div><div class="typing-dot w-1.5 h-1.5 bg-zinc-400 rounded-full" data-v-3e790d84></div></div></div>',1))]),c[62]||(c[62]=t("span",{class:"text-[9px] text-zinc-300 ml-[50px] tracking-wider uppercase"},"Typing...",-1))])):M("",!0),(!l.value?.id||l.value.id!=="noir")&&He.value.length===0?(d(),f("div",rb,[...c[63]||(c[63]=[t("span",{class:"text-[12px] opacity-70"},"No messages yet",-1)])])):M("",!0),t("div",{ref_key:"messagesEndRef",ref:Il,class:"h-px w-full"},null,512)],512),U.value||j.value?(d(),f("div",{key:0,class:"absolute inset-0 z-50",onClick:Di})):M("",!0),U.value?(d(),f("div",cb,[t("div",{class:"w-full flex justify-center pt-3 pb-1 shrink-0 bg-white",onClick:c[1]||(c[1]=x=>U.value=!1)},[...c[64]||(c[64]=[t("div",{class:"w-8 h-1 rounded-full bg-zinc-200/80"},null,-1)])]),t("div",db,[c[67]||(c[67]=t("span",{class:"text-[10px] font-bold tracking-[0.2em] text-zinc-400 uppercase font-sans"},"Sticker Meanings",-1)),t("div",ub,[c[66]||(c[66]=t("button",{class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[t("span",{class:"material-symbols-outlined text-[18px]"},"search")],-1)),t("button",{onClick:je(Cl,["stop"]),class:"w-6 h-6 flex items-center justify-center text-zinc-300 hover:text-black transition-colors"},[...c[65]||(c[65]=[t("span",{class:"material-symbols-outlined text-[18px]"},"settings",-1)])])])]),t("div",pb,[Li.value?(d(),f("div",fb,[(d(!0),f(oe,null,ye(at(Pn)(Li.value.id),x=>(d(),f("div",{key:x.id,class:"flex flex-col items-center gap-2 cursor-pointer group w-full",onClick:V=>Xc(x)},[t("div",xb,[t("img",{src:x.url,class:"w-full h-full object-cover drop-shadow-sm group-hover:scale-110 transition-transform duration-300"},null,8,bb)]),t("span",mb,w(x.keyword),1)],8,vb))),128))])):(d(),f("div",gb,[c[69]||(c[69]=t("div",{class:"w-12 h-12 rounded-full bg-zinc-50 flex items-center justify-center mb-1"},[t("span",{class:"material-symbols-outlined text-2xl opacity-40"},"dashboard_customize")],-1)),t("div",hb,[c[68]||(c[68]=t("span",{class:"text-[10px] uppercase font-bold tracking-widest text-zinc-400"},"Library Empty",-1)),t("button",{onClick:je(Cl,["stop"]),class:"text-[10px] text-zinc-500 hover:text-black border-b border-zinc-300 hover:border-black transition-colors pb-0.5"}," Mount your packs ")])]))]),t("div",yb,[c[71]||(c[71]=t("button",{class:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-zinc-50 transition-colors text-zinc-400 hover:text-black"},[t("span",{class:"material-symbols-outlined text-[20px]"},"history")],-1)),c[72]||(c[72]=t("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),t("div",wb,[(d(!0),f(oe,null,ye(qs.value,x=>(d(),f("button",{key:x.id,onClick:V=>ee.value=x.id,class:W(["shrink-0 transition-all flex items-center justify-center relative",ee.value===x.id?"opacity-100":"opacity-30 hover:opacity-100"])},[t("div",_b,[ee.value===x.id?(d(),f("span",zb)):M("",!0),x.name.toLowerCase().includes("shape")?(d(),f("span",$b,"category")):(d(),f("span",Cb,w(x.name.substring(0,2)),1))])],10,kb))),128))]),c[73]||(c[73]=t("div",{class:"w-[1px] h-4 bg-zinc-100"},null,-1)),t("button",{onClick:je(Cl,["stop"]),class:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-black transition-colors rounded-lg hover:bg-zinc-50"},[...c[70]||(c[70]=[t("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])])])])):M("",!0),(d(),Te(ft,{to:"body"},[ce.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:c[3]||(c[3]=je(x=>ce.value=!1,["self"]))},[t("div",Sb,[c[75]||(c[75]=t("div",{class:"text-center space-y-2"},[t("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Pack Selection"),t("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium"},"Choose what you see in this chat")],-1)),t("div",Ib,[Fn.value.length===0?(d(),f("div",Mb,[...c[74]||(c[74]=[t("span",{class:"material-symbols-outlined text-3xl"},"folder_off",-1),t("span",{class:"text-[10px] uppercase tracking-widest font-bold"},"Library is empty",-1)])])):M("",!0),(d(!0),f(oe,null,ye(Fn.value,x=>(d(),f("button",{key:x.id,onClick:V=>Jc(x.id),class:W(["w-full flex items-center justify-between p-4 rounded-2xl transition-all group border",Sl(x.id)?"bg-zinc-50 border-zinc-200":"bg-transparent border-transparent hover:bg-zinc-50"])},[t("div",Eb,[t("div",jb,w(x.name.charAt(0)),1),t("span",Ab,w(x.name),1)]),t("div",{class:W(["w-6 h-6 rounded-full flex items-center justify-center transition-all duration-300 border",Sl(x.id)?"bg-black border-black text-white scale-110":"bg-transparent border-zinc-300 group-hover:border-zinc-400"])},[ie(t("span",Ob,"check",512),[[ji,Sl(x.id)]])],2)],10,Tb))),128))]),t("div",Pb,[t("button",{onClick:c[2]||(c[2]=x=>ce.value=!1),class:"py-4 rounded-full font-bold text-[11px] uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-all shadow-lg hover:shadow-xl hover:-translate-y-0.5"},"Done")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[Wn.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-6 animate-in fade-in duration-200",onClick:c[9]||(c[9]=je(x=>Wn.value=!1,["self"]))},[t("div",Rb,[t("div",Nb,[t("div",Lb,[c[77]||(c[77]=t("h3",{class:"font-serif text-2xl font-bold tracking-tight text-black"},"Location",-1)),t("button",{onClick:c[4]||(c[4]=x=>Wn.value=!1),class:"w-8 h-8 rounded-full bg-zinc-100 flex items-center justify-center hover:bg-zinc-200 transition-colors"},[...c[76]||(c[76]=[t("span",{class:"material-symbols-outlined text-[18px]"},"close",-1)])])]),t("div",Db,[t("div",Vb,[c[78]||(c[78]=t("span",{class:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-black transition-colors"},"search",-1)),ie(t("input",{"onUpdate:modelValue":c[5]||(c[5]=x=>Kn.value=x),type:"text",placeholder:"Search places (e.g. Eiffel Tower)...",class:"w-full bg-zinc-50 border border-zinc-100 rounded-xl py-3 pl-10 pr-4 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-black/5 focus:border-black/10 transition-all placeholder:text-zinc-400",onKeydown:c[6]||(c[6]=xs(x=>_o({name:Kn.value,address:"Custom Location",lat:0,lng:0}),["enter"]))},null,544),[[pe,Kn.value]])]),t("button",{onClick:c[7]||(c[7]=x=>_o({name:Kn.value||"My Location",address:"Custom Location",lat:0,lng:0})),class:"h-[46px] px-4 bg-black text-white rounded-xl font-bold text-xs uppercase tracking-wider hover:scale-105 active:scale-95 transition-all shadow-md"}," Send ")])]),t("div",{class:"h-24 mx-6 mt-4 rounded-2xl relative overflow-hidden shrink-0 group cursor-pointer border border-zinc-100 shadow-sm hover:shadow-md transition-all",onClick:c[8]||(c[8]=x=>_o({name:"Current Location",address:"Near coordinates",lat:0,lng:0}))},[...c[79]||(c[79]=[t("div",{class:"absolute inset-0 bg-gradient-to-r from-zinc-100 to-zinc-50 opacity-100"},null,-1),t("div",{class:"absolute inset-0 flex items-center justify-between px-5"},[t("div",{class:"flex items-center gap-4"},[t("div",{class:"w-10 h-10 rounded-full bg-black flex items-center justify-center text-white group-hover:scale-110 transition-transform shadow-lg ring-4 ring-zinc-50"},[t("span",{class:"material-symbols-outlined text-[20px]"},"my_location")]),t("div",{class:"flex flex-col relative z-10"},[t("span",{class:"text-sm font-bold text-black"},"Current Location"),t("span",{class:"text-[10px] text-zinc-500 font-medium uppercase tracking-wider"},"Tap to share")])]),t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:translate-x-1 transition-transform"},"chevron_right")],-1)])]),t("div",Bb,[c[81]||(c[81]=t("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 font-bold mb-2"},"Nearby Places",-1)),(d(),f(oe,null,ye([{name:"Central Park",address:"New York, NY",lat:40.785091,lng:-73.968285},{name:"Starbucks Reserve",address:"61 9th Ave, New York",lat:40.741895,lng:-74.004745},{name:"Empire State Building",address:"20 W 34th St",lat:40.748817,lng:-73.985428},{name:"Brooklyn Bridge",address:"New York, NY 10038",lat:40.7061,lng:-73.9969},{name:"The High Line",address:"New York, NY 10011",lat:40.748,lng:-74.0048}],x=>t("button",{key:x.name,onClick:V=>_o(x),class:"flex items-center gap-4 p-3 hover:bg-zinc-50 rounded-xl transition-colors text-left group border border-transparent hover:border-zinc-100"},[c[80]||(c[80]=t("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-400 group-hover:bg-black group-hover:text-white transition-all shrink-0"},[t("span",{class:"material-symbols-outlined text-[20px]"},"location_on")],-1)),t("div",Fb,[t("div",Wb,w(x.name),1),t("div",Kb,w(x.address),1)])],8,Ub)),64))])])])):M("",!0)])),j.value?(d(),f("div",Hb,[t("div",Gb,[t("button",{onClick:Nc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[82]||(c[82]=[kt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-3e790d84><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-3e790d84><path d="M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z" data-v-3e790d84></path><path d="M14 3v4a2 2 0 0 0 2 2h4" data-v-3e790d84></path><path d="M8 13h0" data-v-3e790d84></path><path d="M16 13h0" data-v-3e790d84></path><path d="M10 16s.5 1 2 1 2-1 2-1" data-v-3e790d84></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-3e790d84>Sticker</span>',2)])]),t("button",{onClick:c[10]||(c[10]=x=>Ni.value.click()),class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[83]||(c[83]=[kt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-3e790d84><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-3e790d84><rect width="18" height="18" x="3" y="3" rx="2" ry="2" data-v-3e790d84></rect><circle cx="9" cy="9" r="2" data-v-3e790d84></circle><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" data-v-3e790d84></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-3e790d84>Gallery</span>',2)])]),t("button",{onClick:P,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[84]||(c[84]=[kt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-3e790d84><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-3e790d84><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z" data-v-3e790d84></path><circle cx="12" cy="13" r="3" data-v-3e790d84></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-3e790d84>Camera</span>',2)])]),t("button",{onClick:Ms,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[85]||(c[85]=[t("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[t("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"mic")],-1),t("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Voice",-1)])]),t("button",{onClick:Lc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[86]||(c[86]=[kt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-3e790d84><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-3e790d84><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" data-v-3e790d84></path><circle cx="12" cy="10" r="3" data-v-3e790d84></circle></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-3e790d84>Location</span>',2)])]),t("button",{onClick:Hc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[87]||(c[87]=[t("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[t("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"videocam")],-1),t("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Video",-1)])]),t("button",{onClick:Zc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[88]||(c[88]=[kt('<div class="w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300" data-v-3e790d84><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-zinc-700 group-hover:text-black transition-colors" data-v-3e790d84><path d="M8 3 4 7l4 4" data-v-3e790d84></path><path d="M4 7h16" data-v-3e790d84></path><path d="m16 21 4-4-4-4" data-v-3e790d84></path><path d="M20 17H4" data-v-3e790d84></path></svg></div><span class="text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors" data-v-3e790d84>Transfer</span>',2)])]),t("button",{onClick:Oc,class:"flex flex-col items-center gap-2 group cursor-pointer active:scale-95 transition-transform duration-200"},[...c[89]||(c[89]=[t("div",{class:"w-11 h-11 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-zinc-200 transition-colors duration-300"},[t("span",{class:"material-symbols-outlined text-zinc-700 group-hover:text-black transition-colors"},"refresh")],-1),t("span",{class:"text-[10px] font-medium text-zinc-500 group-hover:text-black transition-colors"},"Reroll",-1)])])])])):M("",!0),t("input",{type:"file",ref_key:"fileInput",ref:Ni,accept:"image/*",class:"hidden",onChange:Ac},null,544),(d(),Te(ft,{to:"body"},[H.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:c[13]||(c[13]=je(x=>H.value=!1,["self"]))},[t("div",qb,[c[90]||(c[90]=t("div",{class:"text-center"},[t("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"New Spoiler"),t("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap to reveal functionality")],-1)),ie(t("textarea",{"onUpdate:modelValue":c[11]||(c[11]=x=>h.value=x),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Enter content to hide..."},null,512),[[pe,h.value]]),t("div",Yb,[t("button",{onClick:c[12]||(c[12]=x=>H.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),t("button",{onClick:me,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[ze.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:c[16]||(c[16]=je(x=>ze.value=!1,["self"]))},[t("div",Jb,[c[91]||(c[91]=t("div",{class:"text-center"},[t("h3",{class:"font-serif text-xl font-bold tracking-tight text-black"},"Voice Message"),t("p",{class:"text-[11px] text-zinc-400 uppercase tracking-widest font-medium mt-1"},"Tap microphone to stop")],-1)),ie(t("textarea",{"onUpdate:modelValue":c[14]||(c[14]=x=>Ee.value=x),class:"w-full h-32 bg-zinc-50 border border-zinc-200 rounded-2xl p-4 text-[15px] resize-none focus:ring-1 focus:ring-black focus:border-black transition-all outline-none mb-2",placeholder:"Listening...",autofocus:""},null,512),[[pe,Ee.value]]),t("div",Xb,[t("button",{onClick:c[15]||(c[15]=x=>ze.value=!1),class:"flex-1 py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-[11px] tracking-widest hover:bg-zinc-200 transition-colors uppercase"}," Cancel "),t("button",{onClick:Un,class:"flex-1 py-3.5 rounded-full bg-black text-white font-bold text-[11px] tracking-widest hover:bg-zinc-900 transition-colors shadow-lg uppercase"}," Create ")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[N.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:c[23]||(c[23]=je(x=>N.value=!1,["self"]))},[t("div",Qb,[A.value==="input"?(d(),f("h3",Zb,"Transfer")):(d(),f("h3",e1,"Verify")),A.value==="input"?(d(),f("div",t1,[we.value.length>0?(d(),f("div",s1,[c[94]||(c[94]=t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-2"},"Recipient",-1)),t("div",n1,[ie(t("select",{"onUpdate:modelValue":c[17]||(c[17]=x=>Y.value=x),class:"w-full bg-zinc-50 border-none rounded-xl px-4 py-3 text-sm appearance-none focus:ring-1 focus:ring-black outline-none font-medium text-center"},[c[92]||(c[92]=t("option",{value:"",disabled:""},"Select Member",-1)),(d(!0),f(oe,null,ye(we.value,x=>(d(),f("option",{key:x.id,value:x.id},w(x.name),9,o1))),128))],512),[[Ln,Y.value]]),c[93]||(c[93]=t("span",{class:"material-symbols-outlined absolute right-3 top-3 text-zinc-400 pointer-events-none"},"expand_more",-1))])])):(d(),f("p",l1,"To "+w(ne.value.name),1)),t("div",i1,[ie(t("input",{"onUpdate:modelValue":c[18]||(c[18]=x=>S.value=x),type:"number",placeholder:" 0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors bg-transparent"},null,512),[[pe,S.value]]),ie(t("input",{"onUpdate:modelValue":c[19]||(c[19]=x=>E.value=x),type:"text",placeholder:"Add a note...",class:"w-full text-center text-sm bg-zinc-50 rounded-xl py-3 focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[pe,E.value]])]),t("div",a1,w(R.value),1),t("div",r1,[t("button",{onClick:c[20]||(c[20]=x=>N.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:ed,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Next")])])):(d(),f("div",c1,[c[95]||(c[95]=t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-6"},"Enter Payment Password",-1)),t("div",d1,[ie(t("input",{"onUpdate:modelValue":c[21]||(c[21]=x=>T.value=x),type:"password",maxlength:"6",autofocus:"",class:"w-full bg-zinc-50 rounded-xl px-4 py-4 text-center text-2xl tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black"},null,512),[[pe,T.value]])]),t("div",u1,w(R.value),1),t("div",p1,[t("button",{onClick:c[22]||(c[22]=x=>A.value="input"),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Back"),t("button",{onClick:td,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])]))])])):M("",!0)])),(d(),Te(ft,{to:"body"},[L.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:c[25]||(c[25]=je(x=>L.value=!1,["self"]))},[t("div",f1,[t("div",{class:W(["h-32 flex items-center justify-center",O.value?.status==="rejected"?"bg-zinc-100":"bg-black"])},[t("span",{class:W(["material-symbols-outlined text-6xl",O.value?.status==="rejected"?"text-zinc-400":"text-white/20"])},w(O.value?.status==="rejected"?"remove_circle_outline":"check_circle"),3)],2),t("div",v1,[c[98]||(c[98]=t("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg mb-4"},[t("span",{class:"material-symbols-outlined text-4xl text-black"},"currency_yen")],-1)),t("h3",x1," "+w(O.value?.amount.toFixed(2)),1),t("p",b1,w(O.value?.status==="pending"?"Waiting for collection":O.value?.status==="collected"?"Transfer Successful":O.value?.status==="rejected"?"Transfer Returned":"Transfer"),1),t("div",m1,[t("div",g1,[c[96]||(c[96]=t("span",{class:"text-zinc-400"},"Time",-1)),t("span",h1,w(new Date(O.value?.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),t("div",y1,[t("span",w1,w(O.value?.isMe?"To":"From"),1),t("span",k1,w(od(O.value)),1)]),O.value?.note?(d(),f("div",_1,[c[97]||(c[97]=t("span",{class:"text-zinc-400"},"Note",-1)),t("span",z1,w(O.value?.note),1)])):M("",!0)]),!O.value?.isMe&&O.value?.status==="pending"&&cd(O.value)?(d(),f("div",$1,[t("button",{onClick:id,class:"w-full py-3.5 rounded-full bg-zinc-100 text-zinc-500 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Reject "),t("button",{onClick:ld,class:"w-full py-3.5 rounded-full bg-black text-white font-bold text-xs uppercase tracking-widest hover:scale-105 transition-transform shadow-lg"}," Collect ")])):(d(),f("button",{key:1,onClick:c[24]||(c[24]=x=>L.value=!1),class:"mt-8 w-full py-3 rounded-full bg-zinc-100 font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 transition-colors"}," Close "))])])])):M("",!0)])),kn.value?(d(),f("div",{key:3,class:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex items-center justify-center cursor-zoom-out animate-in fade-in duration-200",onClick:c[26]||(c[26]=x=>kn.value=!1)},[t("img",{src:ko.value,class:"max-w-full max-h-full object-contain shadow-2xl transition-transform duration-300 scale-100"},null,8,C1)])):M("",!0),Ze(yv,{isOpen:ae.value,"onUpdate:isOpen":c[27]||(c[27]=x=>ae.value=x),modelValue:ve.value,"onUpdate:modelValue":c[28]||(c[28]=x=>ve.value=x),title:ue.value,subtitle:F.value,onSave:ct},null,8,["isOpen","modelValue","title","subtitle"]),(d(),Te(ft,{to:"body"},[I.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[50] bg-black/60 backdrop-blur-sm transition-opacity duration-300",onClick:c[29]||(c[29]=x=>{I.value=!1,y.value=null})})):M("",!0),I.value?(d(),f("div",S1,[t("div",I1,[c[106]||(c[106]=t("div",{class:"w-full flex justify-center pt-3 pb-2"},[t("div",{class:"w-10 h-1 rounded-full bg-zinc-200"})],-1)),t("div",M1,[y.value?.type==="text"||y.value?.text?(d(),f("button",{key:0,onClick:c[30]||(c[30]=x=>q(y.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...c[99]||(c[99]=[t("span",{class:"text-[15px] font-medium text-black"},"Copy",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"content_copy",-1)])])):M("",!0),t("button",{onClick:c[31]||(c[31]=x=>ot(y.value)),class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...c[100]||(c[100]=[t("span",{class:"text-[15px] font-medium text-black"},"Edit",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"edit",-1)])]),Ot.value&&!y.value?.isMe&&y.value===He.value[He.value.length-1]?(d(),f("button",{key:1,onClick:Mt,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...c[101]||(c[101]=[t("span",{class:"text-[15px] font-medium text-black"},"Edit Full Response",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"history_edu",-1)])])):M("",!0),y.value?.isMe&&!y.value?.isRecalled&&Date.now()-y.value.timestamp<12e4?(d(),f("button",{key:2,onClick:X,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...c[102]||(c[102]=[t("span",{class:"text-[15px] font-medium text-black"},"Recall",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete_sweep",-1)])])):M("",!0),t("button",{onClick:At,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...c[103]||(c[103]=[t("span",{class:"text-[15px] font-medium text-black"},"Reply",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"reply",-1)])]),t("button",{onClick:_,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors border-b border-zinc-100"},[...c[104]||(c[104]=[t("span",{class:"text-[15px] font-medium text-black"},"Select",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"check_circle",-1)])]),t("button",{onClick:J,class:"w-full py-4 px-6 bg-transparent hover:bg-zinc-50 flex items-center justify-between group transition-colors"},[...c[105]||(c[105]=[t("span",{class:"text-[15px] font-medium text-black"},"Delete",-1),t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black text-[22px]"},"delete",-1)])])]),t("div",T1,[t("button",{onClick:c[32]||(c[32]=x=>{I.value=!1,y.value=null}),class:"w-full py-2 text-center text-[13px] font-bold uppercase tracking-widest text-zinc-400 hover:text-black transition-colors"}," Cancel ")])])])):M("",!0)])),se.value?(d(),f("div",E1,[t("div",j1,[t("span",A1,w(K.value.size)+" SELECTED ",1),t("div",O1,[t("button",{onClick:re,class:"flex items-center gap-2 text-white hover:text-red-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed group",disabled:K.value.size===0},[...c[107]||(c[107]=[t("span",{class:"material-symbols-outlined text-[20px] group-hover:scale-110 transition-transform"},"delete",-1),t("span",{class:"font-bold text-xs uppercase tracking-widest hidden sm:block"},"Delete",-1)])],8,P1),c[109]||(c[109]=t("div",{class:"w-px h-4 bg-white/20"},null,-1)),t("button",{onClick:$,class:"flex items-center justify-center text-white/50 hover:text-white transition-colors"},[...c[108]||(c[108]=[t("span",{class:"material-symbols-outlined text-[20px]"},"close",-1)])])])])])):M("",!0),ke.value?(d(),f("div",{key:5,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex items-center justify-center animate-in fade-in duration-200",onClick:c[34]||(c[34]=je(x=>ke.value=!1,["self"]))},[t("div",R1,[t("div",N1,[c[111]||(c[111]=t("h3",{class:"text-lg font-bold"},"",-1)),t("button",{onClick:c[33]||(c[33]=x=>ke.value=!1),class:"p-1 rounded-full hover:bg-zinc-100"},[...c[110]||(c[110]=[t("span",{class:"material-symbols-outlined text-zinc-400"},"close",-1)])])]),t("div",L1,[(d(!0),f(oe,null,ye(l.value?.members||[],x=>(d(),f("button",{key:x,onClick:V=>Pt(x),class:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-zinc-50 transition-colors"},[t("div",{class:"w-10 h-10 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${at(k).contacts.find(V=>V.id===x)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("span",V1,w(at(k).contacts.find(V=>V.id===x)?.handle||at(k).contacts.find(V=>V.id===x)?.name||"Unknown"),1)],8,D1))),128))])])])):M("",!0),G.value?(d(),f("div",{key:6,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex flex-col items-center justify-center animate-in fade-in duration-200",onClick:je(ps,["self"])},[t("div",B1,[t("button",{onClick:c[35]||(c[35]=x=>ge.value=ge.value==="current"?"favorites":"current"),class:"p-2.5 rounded-full bg-white/90 backdrop-blur shadow-lg transition-all hover:bg-white",title:ge.value==="current"?"":""},[t("span",F1,w(ge.value==="current"?"bookmark":"schedule"),1)],8,U1),t("button",{onClick:ps,class:"p-2.5 rounded-full bg-white/90 backdrop-blur shadow-lg transition-all hover:bg-white"},[...c[112]||(c[112]=[t("span",{class:"material-symbols-outlined text-zinc-600 text-[20px]"},"close",-1)])])]),ge.value==="current"?(d(),f(oe,{key:0},[qe.value.length===0?(d(),f("div",W1,[t("div",K1,[t("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${Yt(le.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("div",H1,[t("h3",G1,w(Yt(le.value)?.handle||Yt(le.value)?.name||"Unknown"),1),c[113]||(c[113]=t("p",{class:"text-xs text-zinc-400"},"",-1))])]),c[114]||(c[114]=t("div",{class:"text-center py-8 text-zinc-400"},[t("svg",{class:"w-10 h-10 mx-auto mb-2 text-zinc-300",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})]),t("p",null,"")],-1))])):M("",!0),(d(!0),f(oe,null,ye([...qe.value].reverse(),(x,V)=>(d(),f(oe,{key:x.id},[Jt(x.text||x.content)?(d(),f("div",q1,[t("button",{onClick:Z=>wt(x.id),class:W(["absolute top-2 right-2 p-1.5 rounded-full transition-all z-10 bg-black/20 backdrop-blur-sm",x.isFavorited?"text-zinc-400":"text-white/50 hover:text-white/80"])},[(d(),f("svg",{class:"w-4 h-4",fill:x.isFavorited?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...c[115]||(c[115]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1)])],8,J1))],10,Y1),t("div",{innerHTML:gt(x.text||x.content)},null,8,X1)])):(d(),f("div",Q1,[t("div",Z1,[t("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${Yt(le.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("div",em,[t("h3",tm,w(Yt(le.value)?.handle||Yt(le.value)?.name||"Unknown"),1),c[116]||(c[116]=t("p",{class:"text-xs text-zinc-400"},"",-1))]),t("button",{onClick:Z=>wt(x.id),class:W(["p-2 rounded-full transition-all",x.isFavorited?"text-zinc-500":"text-zinc-300 hover:text-zinc-500"])},[(d(),f("svg",{class:"w-5 h-5",fill:x.isFavorited?"currentColor":"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...c[117]||(c[117]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"},null,-1)])],8,nm))],10,sm)]),t("div",om,w(x.text||x.content),1),t("div",lm,w(new Date(x.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]))],64))),128))],64)):(d(),f("div",im,[t("div",am,[t("div",{class:"w-12 h-12 rounded-full bg-zinc-200",style:Ve({backgroundImage:`url(${Yt(le.value)?.avatar||""})`,backgroundSize:"cover"})},null,4),t("div",rm,[t("h3",cm,w(Yt(le.value)?.handle||Yt(le.value)?.name||"Unknown"),1),c[118]||(c[118]=t("p",{class:"text-xs text-zinc-400"},"",-1))])]),t("div",dm,[qe.value.length===0?(d(),f("div",um,[...c[119]||(c[119]=[t("svg",{class:"w-10 h-10 mx-auto mb-2 text-zinc-300",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1),t("p",null,"",-1)])])):M("",!0),(d(!0),f(oe,null,ye([...qe.value].reverse(),(x,V)=>(d(),f("div",{key:x.id,class:"p-4 bg-gradient-to-r from-zinc-50 to-zinc-100/50 rounded-2xl relative"},[t("button",{onClick:Z=>wt(x.id),class:"absolute top-3 right-3 p-1.5 rounded-full transition-all text-zinc-400 hover:text-zinc-600"},[...c[120]||(c[120]=[t("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],8,pm),t("div",fm,w(new Date(x.timestamp).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1),t("div",{class:"text-[14px] text-zinc-700 leading-relaxed pr-8",innerHTML:gt(x.text||x.content)},null,8,vm)]))),128))])]))])):(d(),f("footer",xm,[z.value?(d(),f("div",bm,[t("div",mm,[c[121]||(c[121]=t("span",{class:"material-symbols-outlined text-zinc-400 text-lg"},"reply",-1)),t("div",gm,[t("span",hm,"Replying to "+w(Tt(z.value)),1),t("span",ym,w(z.value.text||(z.value.type==="image"?"[Image]":"[Content]")),1)])]),t("button",{onClick:Rc,class:"p-1 rounded-full hover:bg-zinc-200 text-zinc-400 hover:text-black transition-colors"},[...c[122]||(c[122]=[t("span",{class:"material-symbols-outlined text-base"},"close",-1)])])])):M("",!0),t("div",wm,[t("button",{onClick:je(Pc,["stop"]),class:W(["flex items-center justify-center size-10 rounded-full transition-all duration-200 hover:bg-zinc-50 text-zinc-400 hover:text-black",j.value?"bg-zinc-100 text-black":""])},[...c[123]||(c[123]=[t("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])],2),t("div",km,[ie(t("textarea",{"onUpdate:modelValue":c[36]||(c[36]=x=>v.value=x),onKeydown:c[37]||(c[37]=xs(je(x=>qi(!1),["exact","prevent"]),["enter"])),onFocus:Di,class:"w-full border-none bg-zinc-100/60 rounded-[26px] px-5 py-3 pr-12 text-[15px] placeholder-zinc-400 focus:ring-0 focus:bg-zinc-100 transition-colors resize-none h-[44px] leading-snug",placeholder:"Message..."},null,544),[[pe,v.value]]),t("button",{onClick:Vt,class:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center justify-center size-7 rounded-full transition-all duration-200 hover:bg-zinc-200/50 text-zinc-300 hover:text-zinc-500",title:""},[...c[124]||(c[124]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])])]),t("button",{onClick:ad},[...c[125]||(c[125]=[t("svg",{class:"w-6 h-6 text-black relative right-0.5 bottom-0.5",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24"},[t("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"})],-1)])])])]))]),(d(),Te(ft,{to:"body"},[yl.value&&Ys.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[10000] bg-black/60 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(Bi,["self"])},[t("div",_m,[t("div",zm,[t("div",null,[c[126]||(c[126]=t("h3",{class:"font-bold text-lg text-black"},"Call Transcript",-1)),t("p",$m,w(new Date(Ys.value.timestamp).toLocaleString("zh-CN",{hour:"2-digit",minute:"2-digit"}))+"  "+w(wl(Ys.value.duration)),1)]),t("button",{onClick:Bi,class:"w-8 h-8 rounded-full bg-zinc-200 flex items-center justify-center hover:bg-zinc-300 transition-colors"},[...c[127]||(c[127]=[t("span",{class:"material-symbols-outlined text-black text-sm"},"close",-1)])])]),t("div",Cm,[Hi(Ys.value.callTranscript)?(d(!0),f(oe,{key:0},ye(Hi(Ys.value.callTranscript),(x,V)=>(d(),f("div",{key:V},[x.isAction?(d(),f("div",Sm,[t("span",Im,w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),1)])):(d(),f("div",{key:1,class:W(["flex w-full flex-col",x.isMe?"items-end":"items-start"])},[x.isMe?M("",!0):(d(),f("div",Mm,w((()=>{if(x.senderId&&x.senderId!=="ai"){const fe=fs(x.senderId);if(fe?.handle)return fe.handle;if(fe?.name)return fe.name}const Z=x.text.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2];if(Z){const fe=at(k).contacts.find(_e=>_e.name===Z||_e.handle===Z);if(fe?.handle)return fe.handle}return Z||"AI"})()),1)),t("div",{class:W(["px-4 py-2.5 max-w-[85%] text-[14px] leading-snug shadow-sm border relative",x.isMe?"bg-black text-white rounded-[18px] rounded-br-sm border-transparent":"bg-zinc-100 text-zinc-800 rounded-[18px] rounded-bl-sm border-zinc-100"])},w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),3)],2))]))),128)):(d(!0),f(oe,{key:1},ye((Ys.value.callTranscript||"").split(`
`),(x,V)=>(d(),f(oe,{key:V},[x.trim()?(d(),f("div",Tm,[x.startsWith("[]")?(d(),f("span",Em,w(x.replace(/^\[\]/,"").trim()),1)):x.startsWith("[]")?(d(),f("div",jm,w(x.replace(/^\[\]/,"").trim()),1)):(d(),f("span",Am,w(x),1))])):M("",!0)],64))),128))])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[Ui.value?(d(),f("div",{key:0,class:W(["fixed inset-0 z-[9999] flex flex-col animate-in fade-in duration-500",_n.value?"bg-transparent pointer-events-none":"bg-black pointer-events-auto"])},[_n.value?M("",!0):(d(),f("div",{key:0,class:W(["absolute inset-0 overflow-hidden pointer-events-none",(l.value?.type==="group","bg-zinc-900")])},[l.value?.type==="group"?(d(),f("div",{key:0,class:"absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-110",style:Ve({backgroundImage:`url(${De.value?.avatar||"https://via.placeholder.com/400"})`})},[...c[128]||(c[128]=[t("div",{class:"absolute inset-0 bg-black/70 backdrop-blur-3xl"},null,-1)])],4)):(d(),f("div",{key:1,class:"absolute inset-0 bg-cover bg-center transition-all duration-1000 scale-105",style:Ve({backgroundImage:`url(${Xt.value==="incoming"?cn.value?.avatar||l.value?.avatar:l.value?.localSettings?.videoCallUseImage&&l.value?.localSettings?.videoCallCharImage||l.value?.avatar||p.value.avatar})`})},[...c[129]||(c[129]=[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-3xl"},null,-1)])],4))],2)),Xt.value==="dialing"?(d(),f("div",Om,[t("div",Pm,[c[130]||(c[130]=t("div",{class:"absolute inset-0 border-4 border-zinc-200 rounded-full animate-[ping_2s_infinite] opacity-50"},null,-1)),t("img",{src:p.value.avatar,class:"w-full h-full rounded-full object-cover relative z-10"},null,8,Rm)]),t("h2",Nm,w(p.value.handle),1),c[132]||(c[132]=t("p",{class:"text-zinc-400 text-xs uppercase tracking-[0.2em] animate-pulse"},"Calling...",-1)),t("button",{onClick:c[38]||(c[38]=x=>qn(!1)),class:"mt-16 w-16 h-16 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors shadow-lg hover:scale-105 active:scale-95"},[...c[131]||(c[131]=[t("span",{class:"material-symbols-outlined text-3xl"},"call_end",-1)])])])):Xt.value==="incoming"?(d(),f("div",Lm,[t("div",Dm,[c[133]||(c[133]=t("div",{class:"absolute inset-0 border-4 border-green-400 rounded-full animate-ping opacity-30"},null,-1)),t("img",{src:cn.value?.avatar||l.value?.avatar,class:"w-full h-full rounded-full object-cover relative z-10"},null,8,Vm)]),t("h2",Bm,w(cn.value?.handle||cn.value?.name||"Incoming Call"),1),c[136]||(c[136]=t("p",{class:"text-zinc-500 text-sm uppercase tracking-[0.2em] animate-pulse"},"Inviting to Video Call...",-1)),t("div",{class:"flex items-center gap-16 mt-20"},[t("button",{onClick:Kc,class:"flex flex-col items-center gap-3 group"},[...c[134]||(c[134]=[t("div",{class:"w-20 h-20 rounded-full bg-red-500/90 flex items-center justify-center transition-all group-hover:bg-red-600 group-hover:scale-110 shadow-xl shadow-red-500/30"},[t("span",{class:"material-symbols-outlined text-4xl text-white"},"call_end")],-1),t("span",{class:"text-xs text-zinc-400 tracking-widest uppercase group-hover:text-zinc-600 transition-colors"},"Decline",-1)])]),t("button",{onClick:Wc,class:"flex flex-col items-center gap-3 group"},[...c[135]||(c[135]=[t("div",{class:"w-20 h-20 rounded-full bg-green-500/90 flex items-center justify-center transition-all group-hover:bg-green-500 group-hover:scale-110 shadow-xl shadow-green-500/30 animate-pulse-fast"},[t("span",{class:"material-symbols-outlined text-4xl text-white"},"videocam")],-1),t("span",{class:"text-xs text-zinc-400 tracking-widest uppercase group-hover:text-zinc-600 transition-colors"},"Accept",-1)])])])])):Xt.value==="active"&&!_n.value?(d(),f("div",Um,[l.value?.type==="group"||l.value?.isGroup?(d(),f(oe,{key:0},[t("div",Fm,[t("button",{onClick:zl,class:"w-12 h-12 rounded-full flex items-center justify-center bg-black/20 text-white backdrop-blur-md hover:bg-black/30 transition-colors shrink-0 z-20 active:scale-95"},[...c[137]||(c[137]=[t("span",{class:"material-symbols-outlined text-2xl"},"expand_more",-1)])]),t("div",Wm,[t("div",Km,[c[138]||(c[138]=t("div",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1)),t("span",Hm,w(zn.value),1)])]),c[139]||(c[139]=t("div",{class:"w-12"},null,-1))]),t("div",Gm,[t("div",qm,[t("img",{src:l.value?.localSettings?.videoCallUseImage&&l.value?.localSettings?.videoCallUserImage||De.value?.avatar||"https://via.placeholder.com/150",class:"w-full h-full object-cover"},null,8,Ym)]),(d(!0),f(oe,null,ye(l.value.members||[],x=>(d(),f("div",{key:x,class:"relative w-10 h-10 bg-zinc-800 rounded-lg overflow-hidden ring-1 ring-white/20 shadow-md shrink-0"},[t("img",{src:at(k).contacts.find(V=>V.id===x)?.avatar||"https://via.placeholder.com/150",class:"w-full h-full object-cover"},null,8,Jm)]))),128))])],64)):(d(),f("div",Xm,[t("button",{onClick:zl,class:"w-12 h-12 rounded-full flex items-center justify-center transition-all bg-white/10 text-white hover:bg-white/20 active:scale-95 backdrop-blur-md"},[...c[140]||(c[140]=[t("span",{class:"material-symbols-outlined text-2xl"},"expand_more",-1)])]),t("div",Qm,[t("h3",Zm,w(p.value.handle),1),t("div",eg,[c[141]||(c[141]=t("div",{class:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"},null,-1)),t("span",tg,w(zn.value),1)])]),t("div",sg,[t("img",{src:l.value?.localSettings?.videoCallUseImage&&l.value?.localSettings?.videoCallUserImage||De.value?.avatar||"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJXWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover"},null,8,ng)])])),t("div",og,[t("div",lg,[Ze(Op,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0"},{default:Cs(()=>[(d(!0),f(oe,null,ye(_t.value,x=>(d(),f("div",{key:x.id,class:"flex flex-col gap-1 mb-2"},[x.isAction?(d(),f("div",ig,[t("span",ag,w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),1)])):(d(),f("div",{key:1,class:W(["flex flex-col max-w-[85%] text-[15px] leading-snug",x.isMe?"self-end items-end":"self-start items-start"])},[!x.isMe&&(l.value?.type==="group"||l.value?.isGroup)?(d(),f("div",{key:0,class:W(["text-[10px] mb-1 ml-3 font-bold",l.value?.type==="group"||l.value?.isGroup?"text-white/80":"text-white/60 drop-shadow-md"])},w((()=>{if(x.senderId&&x.senderId!=="ai"){const Z=fs(x.senderId);if(Z?.handle)return Z.handle;if(Z?.name)return Z.name}return x.text.match(/^\[(|)\]\s*([^:]+)[:]/)?.[2]||p.value.handle})()),3)):M("",!0),t("div",{class:W(["px-4 py-2.5 shadow-sm border relative backdrop-blur-md cursor-pointer",x.isMe?"bg-white/10 text-white rounded-[18px] rounded-br-sm border-white/10":"bg-black/40 text-white rounded-[18px] rounded-bl-sm border-white/5"]),onContextmenu:je(V=>Vc(x),["prevent"])},w(x.text.replace(/^\[\]\s*([^:]+[:])?/,"")),43,rg)],2))]))),128))]),_:1})])]),t("div",cg,[t("div",dg,[t("div",ug,[ie(t("input",{"onUpdate:modelValue":c[39]||(c[39]=x=>Hn.value=x),onKeydown:xs(je(Ki,["prevent"]),["enter"]),type:"text",placeholder:"Type designed to speak...",class:"relative w-full rounded-full h-12 px-6 focus:outline-none transition-all text-sm bg-black/40 border border-white/20 text-white placeholder:text-white/30 focus:border-white/50 backdrop-blur-md"},null,40,pg),[[pe,Hn.value]])]),t("button",{onClick:Gc,class:"w-12 h-12 rounded-full flex items-center justify-center hover:scale-105 active:scale-95 transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-md"},[...c[142]||(c[142]=[t("span",{class:"material-symbols-outlined"},"refresh",-1)])]),t("button",{onClick:Ki,class:"w-12 h-12 rounded-full flex items-center justify-center hover:scale-105 active:scale-95 transition-all bg-white text-black shadow-[0_0_20px_rgba(255,255,255,0.3)]"},[...c[143]||(c[143]=[t("span",{class:"material-symbols-outlined"},"arrow_upward",-1)])])]),t("div",fg,[c[145]||(c[145]=t("button",{class:"flex flex-col items-center gap-1 group"},[t("div",{class:"w-14 h-14 rounded-full flex items-center justify-center transition-all bg-white/10 backdrop-blur-md group-hover:bg-white/20"},[t("span",{class:"material-symbols-outlined text-2xl text-white"},"mic")]),t("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"Mute")],-1)),t("button",{onClick:c[40]||(c[40]=x=>qn(!1)),class:"flex flex-col items-center gap-1 group"},[...c[144]||(c[144]=[t("div",{class:"w-16 h-16 rounded-full bg-red-500 flex items-center justify-center group-hover:bg-red-600 group-hover:scale-105 transition-all shadow-xl shadow-red-500/20"},[t("span",{class:"material-symbols-outlined text-white text-3xl"},"call_end")],-1),t("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"End",-1)])]),c[146]||(c[146]=t("button",{class:"flex flex-col items-center gap-1 group"},[t("div",{class:"w-14 h-14 rounded-full flex items-center justify-center transition-all bg-white/10 backdrop-blur-md group-hover:bg-white/20"},[t("span",{class:"material-symbols-outlined text-2xl text-white"},"videocam")]),t("span",{class:"text-[10px] uppercase tracking-widest text-white/50"},"Cam")],-1))])])])):_n.value?(d(),f("div",{key:4,onMousedown:Fi,onTouchstart:Fi,onClick:Dc,class:"fixed z-[9999] w-28 h-40 bg-zinc-900 rounded-2xl shadow-2xl overflow-hidden border border-white/20 cursor-move transition-shadow hover:scale-105 active:scale-95 animate-in zoom-in duration-300 ring-2 ring-black/50 pointer-events-auto",style:Ve({left:Ts.value.x+"px",top:Ts.value.y+"px"})},[t("img",{src:l.value?.type==="group"?De.value?.avatar:cn.value?.avatar||l.value?.avatar||p.value.avatar,class:"w-full h-full object-cover opacity-80"},null,8,vg),t("div",xg,[c[147]||(c[147]=t("div",{class:"flex justify-end"},[t("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,0.8)]"})],-1)),t("div",bg,[t("span",mg,w(zn.value),1)])])],36)):Xt.value==="ended"?(d(),f("div",gg,[c[150]||(c[150]=t("div",{class:"absolute inset-0 bg-black/40 backdrop-blur-xl"},null,-1)),t("div",hg,[c[148]||(c[148]=t("div",{class:"w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-6 backdrop-blur-md shadow-2xl ring-4 ring-white/5"},[t("span",{class:"material-symbols-outlined text-white/70 text-5xl"},"call_end")],-1)),c[149]||(c[149]=t("h2",{class:"text-white text-2xl font-bold tracking-wide mb-2"},"Call Ended",-1)),t("p",yg,w(zn.value),1),t("button",{onClick:c[41]||(c[41]=x=>qn(!0)),class:"mt-12 px-8 py-3 bg-white text-black rounded-full font-bold text-sm uppercase tracking-widest hover:bg-zinc-100 transition-all hover:scale-105 active:scale-95 shadow-xl"}," Return ")])])):M("",!0)],2)):M("",!0),$n.value?(d(),f("div",wg,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c[42]||(c[42]=x=>$n.value=!1)}),t("div",kg,[t("div",_g,[t("p",zg,w(Es.value?.text),1)]),t("button",{onClick:Uc,class:"w-full py-4 bg-transparent hover:bg-white/5 flex items-center justify-center gap-2 border-b border-white/5 transition-colors"},[...c[151]||(c[151]=[t("span",{class:"material-symbols-outlined text-white/80"},"edit",-1),t("span",{class:"text-sm font-bold text-white uppercase tracking-widest"},"Edit",-1)])]),t("button",{onClick:Bc,class:"w-full py-4 bg-transparent hover:bg-red-500/10 flex items-center justify-center gap-2 transition-colors"},[...c[152]||(c[152]=[t("span",{class:"material-symbols-outlined text-red-400"},"delete",-1),t("span",{class:"text-sm font-bold text-red-400 uppercase tracking-widest"},"Delete",-1)])]),t("div",$g,[t("button",{onClick:c[43]||(c[43]=x=>$n.value=!1),class:"w-full py-3 text-xs text-white/30 uppercase tracking-widest"},"Cancel")])])])):M("",!0)]))],64))}},Sg=rt(Cg,[["__scopeId","data-v-3e790d84"]]),Ig={class:"h-full flex flex-col bg-white text-black font-sans"},Mg={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl"},Tg={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},Eg={class:"flex-1"},jg={class:"flex items-center gap-2"},Ag={class:"flex-1 overflow-y-auto w-full pb-[calc(2rem+env(safe-area-inset-bottom))]"},Og={class:"px-5 pt-2 pb-6"},Pg={class:"flex justify-between items-start"},Rg={class:"flex-1 pr-4 min-w-0"},Ng={class:"text-[24px] font-bold leading-tight truncate"},Lg={class:"mt-4 text-[14px] leading-relaxed whitespace-pre-wrap"},Dg={class:"mt-3 text-[14px] text-zinc-400 font-normal"},Vg={class:"shrink-0"},Bg={key:0,class:"flex items-center justify-center h-full w-full material-symbols-outlined text-zinc-300 text-[32px]"},Ug={class:"flex gap-2 mt-6"},Fg={class:"flex border-b border-zinc-100 sticky top-0 bg-white z-10"},Wg={key:0,class:"space-y-0"},Kg={class:"relative px-5 py-6 border-b border-gray-50"},Hg={class:"flex items-start gap-4 mb-3 relative z-10"},Gg={class:"flex flex-col flex-1 min-w-0"},qg={class:"flex items-center justify-between"},Yg={class:"text-[14px] font-bold text-black truncate"},Jg={class:"relative px-5 py-6 border-b border-gray-50"},Xg={class:"flex items-start gap-4 mb-3 relative z-10"},Qg={class:"flex flex-col flex-1 min-w-0"},Zg={class:"flex items-center justify-between"},eh={class:"text-[14px] font-bold text-black truncate"},th={key:1,class:"p-12 text-center text-zinc-400 text-sm font-light"},sh={key:0,class:"fixed top-0 right-0 h-full w-[300px] z-[100] bg-white shadow-2xl flex flex-col border-l border-gray-50"},nh={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 border-b border-gray-100"},oh={class:"flex-1 overflow-y-auto"},lh={__name:"Profile",props:{contactId:{type:String,default:null}},emits:["back","navigate"],setup(e,{emit:s}){const n=e,o=s,l=C(!1),i=C("threads"),a=be(()=>{if(n.contactId&&n.contactId!==k.activePersonaId){const u=k.contacts.find(g=>g.id===n.contactId);if(u)return u;const v=k.personas.find(g=>g.id===n.contactId);if(v)return v}return di.value}),r=be(()=>!(n.contactId&&n.contactId!==k.activePersonaId&&!k.personas.find(u=>u.id===n.contactId))),p=u=>{l.value=!1,o("navigate",u)},b=be(()=>a.value.stats?.followers||"100");return(u,v)=>(d(),f("div",Ig,[t("header",Mg,[t("div",Tg,[t("div",Eg,[t("button",{onClick:v[0]||(v[0]=g=>u.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...v[14]||(v[14]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),t("div",jg,[v[17]||(v[17]=kt('<button class="header-btn" data-v-3e48d63d><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3e48d63d><rect x="2" y="2" width="20" height="20" rx="5" ry="5" data-v-3e48d63d></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" data-v-3e48d63d></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5" data-v-3e48d63d></line></svg></button>',1)),r.value?M("",!0):(d(),f("button",{key:0,onClick:v[1]||(v[1]=g=>u.$emit("navigate","char-memory",{id:e.contactId||a.value.id})),class:"header-btn"},[...v[15]||(v[15]=[t("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),t("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})],-1)])])),t("button",{onClick:v[2]||(v[2]=g=>l.value=!0),class:"header-btn"},[...v[16]||(v[16]=[t("span",{class:"material-symbols-outlined text-[26px]"},"more_horiz",-1)])])])])]),t("main",Ag,[t("section",Og,[t("div",Pg,[t("div",Rg,[t("h1",Ng,w(a.value.handle),1),t("div",Lg,w(a.value.bio||""),1),t("div",Dg,w(b.value)+" ",1)]),t("div",Vg,[t("div",{class:"size-[80px] rounded-full overflow-hidden border border-gray-100 bg-zinc-50 editorial-image",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[a.value.avatar?M("",!0):(d(),f("span",Bg,"person"))],4)])]),t("div",Ug,[r.value?(d(),f(oe,{key:1},[v[20]||(v[20]=t("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1)),v[21]||(v[21]=t("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64)):(d(),f(oe,{key:0},[v[18]||(v[18]=t("button",{class:"flex-1 py-1.5 bg-black text-white text-[14px] font-bold rounded-[8px] border border-black transition-opacity hover:opacity-90"},"  ",-1)),v[19]||(v[19]=t("button",{class:"flex-1 py-1.5 bg-white text-black text-[14px] font-bold rounded-[8px] border border-zinc-200 transition-colors hover:bg-zinc-50"},"  ",-1))],64))])]),t("nav",Fg,[t("button",{onClick:v[3]||(v[3]=g=>i.value="threads"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",i.value==="threads"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),t("button",{onClick:v[4]||(v[4]=g=>i.value="replies"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",i.value==="replies"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),t("button",{onClick:v[5]||(v[5]=g=>i.value="media"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",i.value==="media"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2),t("button",{onClick:v[6]||(v[6]=g=>i.value="reposts"),class:W(["flex-1 py-3 text-[14px] font-bold text-center border-b-[1.5px] transition-colors relative",i.value==="reposts"?"border-black text-black":"border-transparent text-zinc-400"])},"  ",2)]),i.value==="threads"?(d(),f("div",Wg,[t("article",Kg,[v[24]||(v[24]=t("div",{class:"absolute left-[36px] top-[60px] bottom-[-10px] w-[1px] bg-zinc-100"},null,-1)),t("div",Hg,[t("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover"})},null,4),t("div",Gg,[t("div",qg,[t("span",Yg,w(a.value.handle),1),v[22]||(v[22]=t("div",{class:"flex items-center gap-3"},[t("span",{class:"text-[13px] text-zinc-400 font-light"},"4h"),t("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),v[23]||(v[23]=t("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Just deployed the new changes. Feeling nervous but excited. code-life ",-1))])]),v[25]||(v[25]=kt('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-3e48d63d><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>42</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>5</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><polyline points="17 1 21 5 17 9" data-v-3e48d63d></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-3e48d63d></path><polyline points="7 23 3 19 7 15" data-v-3e48d63d></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>2</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-3e48d63d></path></svg></button></div>',1))]),t("article",Jg,[t("div",Xg,[t("div",{class:"size-9 rounded-full bg-zinc-100 overflow-hidden border border-zinc-200 flex items-center justify-center shrink-0",style:Ve({backgroundImage:a.value.avatar?`url(${a.value.avatar})`:"none",backgroundSize:"cover"})},null,4),t("div",Qg,[t("div",Zg,[t("span",eh,w(a.value.handle),1),v[26]||(v[26]=t("div",{class:"flex items-center gap-3"},[t("span",{class:"text-[13px] text-zinc-400 font-light"},"1d"),t("span",{class:"material-symbols-outlined text-[16px] text-zinc-800"},"more_horiz")],-1))]),v[27]||(v[27]=t("p",{class:"text-[15px] leading-relaxed mt-0.5 text-black"}," Weather is getting colder. Time for coffee and hoodies. ",-1))])]),v[28]||(v[28]=kt('<div class="ml-[52px] flex items-center gap-2 text-black" data-v-3e48d63d><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>108</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.1a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>14</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><polyline points="17 1 21 5 17 9" data-v-3e48d63d></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" data-v-3e48d63d></path><polyline points="7 23 3 19 7 15" data-v-3e48d63d></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" data-v-3e48d63d></path></svg><span class="text-[12px] font-medium" data-v-3e48d63d>8</span></button><button class="post-action-btn hover:opacity-60 transition-opacity" data-v-3e48d63d><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" data-v-3e48d63d><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" data-v-3e48d63d></path></svg></button></div>',1))])])):(d(),f("div",th," Nothing here yet... "))]),l.value?(d(),f("div",{key:0,onClick:v[7]||(v[7]=g=>l.value=!1),class:"fixed inset-0 z-[99]"})):M("",!0),Ze(nn,{name:"slide"},{default:Cs(()=>[l.value?(d(),f("div",sh,[t("div",nh,[v[30]||(v[30]=t("span",{class:"text-[13px] font-bold tracking-[0.2em] text-zinc-400 uppercase"},"Menu",-1)),t("button",{onClick:v[8]||(v[8]=g=>l.value=!1),class:"p-2 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...v[29]||(v[29]=[t("span",{class:"material-symbols-outlined text-[24px]"},"close",-1)])])]),t("div",oh,[r.value?(d(),f(oe,{key:0},[t("div",{onClick:v[9]||(v[9]=g=>p("persona-archive")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[31]||(v[31]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"tune"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Persona Archive"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),t("div",{onClick:v[10]||(v[10]=g=>p("sticker-library")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[32]||(v[32]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"sentiment_satisfied"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Stickers"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),t("div",{onClick:v[11]||(v[11]=g=>p("wallet")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[33]||(v[33]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"credit_card"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Wallet"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])],64)):M("",!0),t("div",{onClick:v[12]||(v[12]=g=>p("relationship-network")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[34]||(v[34]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"hub"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Network"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])]),t("div",{onClick:v[13]||(v[13]=g=>p("regex-manager")),class:"flex items-center justify-between px-8 py-6 border-b border-gray-50 cursor-pointer hover:bg-gray-50 transition-colors group"},[...v[35]||(v[35]=[t("div",{class:"flex items-center gap-6"},[t("span",{class:"material-symbols-outlined text-[26px] font-light"},"style"),t("div",{class:"flex flex-col"},[t("span",{class:"text-[17px] font-medium tracking-tight"},"Regex Cards"),t("span",{class:"text-[11px] text-zinc-400 font-normal tracking-wide mt-0.5"},"")])],-1)])])])])):M("",!0)]),_:1})]))}},ih=rt(lh,[["__scopeId","data-v-3e48d63d"]]),ah={class:"fixed inset-x-0 bottom-0 h-[92%] z-[100] bg-white rounded-t-[20px] shadow-[0_-10px_40px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden border-t border-black/5"},rh={class:"flex items-center justify-between px-4 py-4 border-b border-gray-100 shrink-0 bg-white z-10"},ch={class:"flex-1 overflow-y-auto px-4 pt-4 pb-32 w-full"},dh={class:"flex gap-4"},uh={class:"flex flex-col items-center"},ph={key:0,class:"w-full h-full bg-gradient-to-br from-neutral-800 to-black"},fh={class:"flex-1 flex flex-col gap-1 min-h-[120px]"},vh={class:"font-bold text-[15px] pt-1 leading-none"},xh={class:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-50 pb-safe z-20 px-6 py-4 flex items-center justify-between"},bh=["disabled"],mh={__name:"Compose",emits:["close"],setup(e,{emit:s}){const n=s,o=C(""),l=be(()=>k.activePersonaId?k.personas.find(a=>a.id===k.activePersonaId):k.personas[0]||{}),i=()=>{console.log("Posting:",o.value),n("close")};return(a,r)=>(d(),f("div",ah,[t("header",rh,[t("button",{onClick:r[0]||(r[0]=p=>a.$emit("close")),class:"text-[16px] text-black hover:opacity-70 transition-opacity"}," Cancel "),r[2]||(r[2]=t("h2",{class:"text-[16px] font-bold tracking-tight"}," New thread ",-1)),r[3]||(r[3]=t("button",{class:"w-[50px] flex justify-end"},[t("span",{class:"material-symbols-outlined text-black"},"more_horiz")],-1))]),t("main",ch,[t("div",dh,[t("div",uh,[t("div",{class:"size-10 shrink-0 rounded-full bg-zinc-200 overflow-hidden border border-gray-100",style:Ve({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[l.value.avatar?M("",!0):(d(),f("div",ph))],4),r[4]||(r[4]=t("div",{class:"w-0.5 flex-1 bg-gray-200 my-2 rounded-full min-h-[40px]"},null,-1)),t("div",{class:"size-5 shrink-0 rounded-full bg-zinc-200 overflow-hidden opacity-50",style:Ve({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},null,4)]),t("div",fh,[t("div",vh,w(l.value.handle||"user"),1),ie(t("textarea",{"onUpdate:modelValue":r[1]||(r[1]=p=>o.value=p),autofocus:"",class:"w-full border-0 p-0 focus:ring-0 text-[15px] leading-relaxed resize-none bg-transparent placeholder:text-neutral-400 mt-1 min-h-[60px]",placeholder:"What's new?"},null,512),[[pe,o.value]]),r[5]||(r[5]=kt('<div class="flex items-center gap-5 mt-2" data-v-2e69b1af><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>imagesmode</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>gif_box</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>mic</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>tag</span></button><button class="text-zinc-400 hover:text-black transition-colors" data-v-2e69b1af><span class="material-symbols-outlined text-[20px]" data-v-2e69b1af>poll</span></button></div>',1))])]),r[6]||(r[6]=t("div",{class:"flex gap-4 mt-4"},[t("div",{class:"w-10 flex justify-center opacity-0"}),t("div",{class:"flex-1"},[t("button",{class:"text-[14px] text-neutral-400 hover:text-black transition-colors"},"Add to thread")])],-1))]),t("div",xh,[r[7]||(r[7]=t("button",{class:"text-[14px] text-neutral-400 font-medium hover:text-black transition-colors"}," Anyone can reply ",-1)),t("button",{onClick:i,disabled:!o.value.trim(),class:"bg-black text-white px-5 py-2 rounded-full text-[15px] font-bold tracking-wide hover:opacity-80 transition-opacity disabled:opacity-30 disabled:cursor-not-allowed"}," Post ",8,bh)])]))}},gh=rt(mh,[["__scopeId","data-v-2e69b1af"]]),hh={class:"h-full flex flex-col bg-background-light text-black"},yh={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-zinc-100"},wh={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},kh={__name:"PostDetail",props:["postId"],emits:["back"],setup(e,{emit:s}){return(n,o)=>(d(),f("div",hh,[t("header",yh,[t("div",wh,[t("button",{onClick:o[0]||(o[0]=l=>n.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...o[1]||(o[1]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),o[2]||(o[2]=t("div",{class:"text-xl font-extrabold tracking-[0.2em] uppercase"},"Noir",-1)),o[3]||(o[3]=t("div",{class:"w-10"},null,-1))])]),o[4]||(o[4]=kt('<main class="flex-1 overflow-y-auto pb-32 w-full" data-v-eae84c1c><article class="pt-6" data-v-eae84c1c><div class="px-6 mb-6" data-v-eae84c1c><div class="flex items-center gap-3" data-v-eae84c1c><div class="size-10 rounded-full bg-black flex items-center justify-center overflow-hidden border border-zinc-200" data-v-eae84c1c><div class="w-full h-[0.5px] bg-white/30 rotate-45" data-v-eae84c1c></div><div class="absolute w-full h-[0.5px] bg-white/30 -rotate-45" data-v-eae84c1c></div></div><div class="flex flex-col" data-v-eae84c1c><span class="text-sm font-semibold tracking-tight" data-v-eae84c1c>studio_noir</span><span class="text-[9px] text-zinc-400 uppercase tracking-widest" data-v-eae84c1c>Paris, FR</span></div></div></div><div class="px-6 mb-6" data-v-eae84c1c><p class="text-[17px] leading-relaxed font-light text-zinc-900" data-v-eae84c1c> The silence of structure. Exploring the intersection of Brutalist architecture and morning light. Every angle is a dialogue with the sky. </p></div><div class="mx-6 aspect-[4/5] bg-zinc-100 overflow-hidden mb-6" data-v-eae84c1c><img alt="Editorial Architecture" class="w-full h-full object-cover editorial-image" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E" data-v-eae84c1c></div><div class="px-6 pb-8" data-v-eae84c1c><div class="flex items-center gap-7 pb-8 border-b border-zinc-50" data-v-eae84c1c><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>1,240</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48L4.32 21l4.287-1.022c1.026.177 2.104.272 3.393.272z" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>48</span></button><button class="flex items-center gap-2 group" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg><span class="text-[11px] font-medium tracking-tighter" data-v-eae84c1c>12</span></button><button class="flex items-center group ml-auto" data-v-eae84c1c><svg class="w-6 h-6 thin-icon group-hover:opacity-40 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eae84c1c><path d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" stroke-linecap="round" stroke-linejoin="round" data-v-eae84c1c></path></svg></button></div></div></article><section class="px-6 space-y-8" data-v-eae84c1c><h3 class="text-[10px] uppercase tracking-[0.25em] text-zinc-400 font-semibold mb-8" data-v-eae84c1c>Responses</h3><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-zinc-50 flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="size-3 border border-black/20 rounded-sm rotate-45" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>elena_di_rossi</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>2h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The high contrast captures the starkness perfectly. Exceptional work.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-black flex items-center justify-center border border-zinc-100" data-v-eae84c1c><div class="w-4 h-[1px] bg-white/20" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>arc_digest</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>4h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>The brutalist aesthetic is making a serious comeback this season.</p></div></div><div class="flex gap-4" data-v-eae84c1c><div class="size-9 shrink-0 rounded-full bg-white flex items-center justify-center border border-zinc-200" data-v-eae84c1c><div class="size-2 bg-black rounded-full" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><div class="flex items-center justify-between mb-1" data-v-eae84c1c><span class="text-[13px] font-bold tracking-tight" data-v-eae84c1c>minimal_vibe</span><span class="text-[10px] text-zinc-400" data-v-eae84c1c>5h</span></div><p class="text-[14px] leading-relaxed text-zinc-800 font-light" data-v-eae84c1c>Pure sophistication.</p></div></div></section></main><footer class="fixed bottom-0 left-0 right-0 bottom-input-bar border-t border-zinc-100 safe-area-bottom bg-white/90 backdrop-blur-md" data-v-eae84c1c><div class="flex items-center gap-4 px-6 pt-4 pb-[calc(1rem+env(safe-area-inset-bottom))] w-full" data-v-eae84c1c><div class="size-8 shrink-0 rounded-full bg-zinc-50 border border-zinc-200 flex items-center justify-center overflow-hidden" data-v-eae84c1c><div class="w-3 h-3 border-t border-l border-zinc-400 rotate-45 translate-y-0.5" data-v-eae84c1c></div></div><div class="flex-1" data-v-eae84c1c><input class="w-full bg-transparent border-none focus:ring-0 text-[14px] py-2 placeholder:text-zinc-400 font-light tracking-tight" placeholder="Write a comment..." type="text" data-v-eae84c1c></div><button class="text-[11px] font-bold tracking-[0.15em] uppercase hover:opacity-40 transition-opacity" data-v-eae84c1c> Post </button></div></footer>',2))]))}},_h=rt(kh,[["__scopeId","data-v-eae84c1c"]]),zh={class:"h-full flex flex-col bg-white text-black font-sans"},$h={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Ch={class:"flex-1 overflow-y-auto px-6 py-4 w-full"},Sh={class:"grid gap-4"},Ih=["onClick"],Mh={key:0,class:"absolute top-4 right-4 text-black"},Th={class:"flex-1 min-w-0 pr-6"},Eh={class:"text-[16px] font-bold tracking-tight truncate"},jh={class:"text-[12px] text-zinc-500 font-light truncate mt-0.5"},Ah=["onClick"],Oh={__name:"PersonaArchive",emits:["back","add","edit","select"],setup(e,{emit:s}){const n=s,o=i=>{ml(i),n("select")},l=(i,a)=>{a.stopPropagation(),n("edit",i)};return(i,a)=>(d(),f("div",zh,[t("header",$h,[t("button",{onClick:a[0]||(a[0]=r=>i.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...a[3]||(a[3]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),a[5]||(a[5]=t("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Persona Archive",-1)),t("button",{onClick:a[1]||(a[1]=r=>i.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...a[4]||(a[4]=[t("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])]),t("main",Ch,[t("div",Sh,[(d(!0),f(oe,null,ye(at(k).personas,r=>(d(),f("div",{key:r.id,class:W(["group relative flex items-center gap-5 p-4 rounded-2xl border border-gray-100 hover:border-black/10 transition-all cursor-pointer hover:shadow-sm hover:translate-y-[-1px]",{"bg-zinc-50 border-black/5":at(k).activePersonaId===r.id,"bg-white":at(k).activePersonaId!==r.id}]),onClick:p=>o(r.id)},[at(k).activePersonaId===r.id?(d(),f("div",Mh,[...a[6]||(a[6]=[t("span",{class:"material-symbols-outlined text-[18px]"},"check_circle",-1)])])):M("",!0),t("div",{class:"size-16 shrink-0 rounded-full overflow-hidden border border-gray-100 editorial-image",style:Ve({backgroundImage:`url(${r.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("div",Th,[t("h3",Eh,w(r.handle),1),t("p",jh,w(r.name||r.handle),1)]),t("div",{onClick:a[2]||(a[2]=je(()=>{},["stop"])),class:"relative z-20"},[t("button",{onClick:p=>l(r.id,p),class:"p-3 text-zinc-400 hover:text-black hover:bg-gray-100/50 rounded-full transition-all"},[...a[7]||(a[7]=[t("span",{class:"material-symbols-outlined text-[20px]"},"edit",-1)])],8,Ah)])],10,Ih))),128))])])]))}},Ph=rt(Oh,[["__scopeId","data-v-09dd5376"]]),Rh={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},Nh={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},Lh={class:"flex items-center gap-3"},Dh={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},Vh={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},Bh={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},Uh={class:"bg-zinc-50 rounded-2xl p-5"},Fh={class:"bg-zinc-50 rounded-2xl p-5"},Wh={class:"bg-zinc-50 rounded-2xl p-5"},Kh={class:"bg-zinc-50 rounded-2xl p-5"},Hh={class:"bg-zinc-50 rounded-2xl p-5"},Gh={key:0,class:"pt-4"},qh={__name:"PersonaEdit",props:["personaId"],emits:["back","save"],setup(e,{emit:s}){const n=e,o=s,l=C({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),i=C(!1);Dt(()=>{if(n.personaId){const b=k.personas.find(u=>u.id===n.personaId);b&&(i.value=!0,l.value={...b})}else l.value.id="p_"+Date.now(),l.value.avatar="https://lh3.googleusercontent.com/aida-public/AB6AXuBmMKAa3mhN1sScpskGMbskeOx8geuTbbnxV_lq_bmsxt3N01G-QgLf97F5smPz8wKg7d9T1aTo0SQJyIYEf6v3JykBRbCwSoWPaowTtAfWBPvQ2ynBALN99158d40apQmYMze-B178tmIsbFAENH_0Sy82AaZOiuBKnB3Bo_IfL26qz0aQgmAlULkUEqMcdJloDMqaAj0dM_e0x-l0t6Ts7kvUqLgZVS-Euh5yDQvQPQ6tv44VsEnIDBGDDaLFqr28_wW7Rd3glO0"});const a=async()=>{const b={...l.value,stats:l.value.stats||{followers:"0",following:"0"}};i.value?await rf(b):await af(b),o("save")},r=()=>{const b=prompt("Enter image URL for avatar:",l.value.avatar);b&&(l.value.avatar=b)},p=async()=>{l.value.id&&confirm("Delete this persona? This cannot be undone.")&&(await cf(l.value.id),o("save"))};return(b,u)=>(d(),f("div",Rh,[t("header",Nh,[t("div",Lh,[t("button",{onClick:u[0]||(u[0]=v=>b.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...u[6]||(u[6]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("span",Dh,w(i.value?"":""),1)]),t("button",{onClick:a,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),t("main",Vh,[t("div",Bh,[t("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200",style:Ve({backgroundImage:`url(${l.value.avatar})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4),t("button",{onClick:r,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),t("div",Uh,[u[7]||(u[7]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),ie(t("input",{"onUpdate:modelValue":u[1]||(u[1]=v=>l.value.handle=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"your_handle"},null,512),[[pe,l.value.handle]])]),t("div",Fh,[u[8]||(u[8]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("input",{"onUpdate:modelValue":u[2]||(u[2]=v=>l.value.name=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Official Name"},null,512),[[pe,l.value.name]]),u[9]||(u[9]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),t("div",Wh,[u[10]||(u[10]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("textarea",{"onUpdate:modelValue":u[3]||(u[3]=v=>l.value.persona=v),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Describe the inner persona..."},null,512),[[pe,l.value.persona]]),u[11]||(u[11]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),t("div",Kh,[u[12]||(u[12]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("textarea",{"onUpdate:modelValue":u[4]||(u[4]=v=>l.value.bio=v),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Write a brief description..."},null,512),[[pe,l.value.bio]])]),t("div",Hh,[u[13]||(u[13]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("input",{"onUpdate:modelValue":u[5]||(u[5]=v=>l.value.link=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[pe,l.value.link]])]),i.value?(d(),f("div",Gh,[t("button",{onClick:p,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):M("",!0)])]))}},Yh=rt(qh,[["__scopeId","data-v-e15adcb5"]]),Jh={class:"h-full flex flex-col bg-white text-black font-sans"},Xh={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 sticky top-0 bg-white/95 backdrop-blur-md z-10 border-b border-gray-50"},Qh={class:"flex-1 overflow-y-auto w-full"},Zh={class:"px-6 py-4"},ey={class:"relative"},ty={class:"px-6 pb-20"},sy=["onClick"],ny={key:0,class:"material-symbols-outlined text-zinc-300 text-[24px]"},oy={class:"flex flex-col min-w-0"},ly={class:"text-[14px] font-bold tracking-tight truncate"},iy={class:"text-[11px] text-zinc-500 font-light truncate mt-0.5"},ay={class:"flex items-center gap-2 ml-4"},ry=["onClick"],cy={__name:"Following",emits:["back","add","edit","navigate"],setup(e,{emit:s}){const n=s,o=C(""),l=be(()=>{if(!o.value)return k.contacts;const a=o.value.toLowerCase();return k.contacts.filter(r=>r.handle.toLowerCase().includes(a)||r.name&&r.name.toLowerCase().includes(a)||r.bio&&r.bio.toLowerCase().includes(a))}),i=a=>{n("edit",a)};return(a,r)=>(d(),f("div",Jh,[t("header",Xh,[t("button",{onClick:r[0]||(r[0]=p=>a.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[3]||(r[3]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),r[5]||(r[5]=t("div",{class:"text-[13px] font-bold uppercase tracking-[0.25em]"},"Following",-1)),t("button",{onClick:r[1]||(r[1]=p=>a.$emit("add")),class:"flex items-center justify-center size-10 -mr-2 hover:bg-gray-100 rounded-full transition-colors"},[...r[4]||(r[4]=[t("span",{class:"material-symbols-outlined text-[24px]"},"person_add",-1)])])]),t("main",Qh,[t("div",Zh,[t("div",ey,[r[6]||(r[6]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-zinc-400 text-[20px]"},"search",-1)),ie(t("input",{"onUpdate:modelValue":r[2]||(r[2]=p=>o.value=p),type:"text",class:"w-full bg-zinc-50 border border-gray-100 rounded-lg py-2.5 pl-10 pr-4 text-sm font-light placeholder-zinc-400 focus:outline-none focus:border-black/10 transition-colors",placeholder:"Search connections..."},null,512),[[pe,o.value]])])]),t("div",ty,[(d(!0),f(oe,null,ye(l.value,p=>(d(),f("div",{key:p.id,class:"flex items-center justify-between py-5 border-b border-gray-50 group hover:bg-zinc-50/50 -mx-6 px-6 transition-colors"},[t("div",{onClick:b=>a.$emit("navigate","profile",{id:p.id}),class:"flex items-center gap-4 min-w-0 flex-1 cursor-pointer"},[t("div",{class:"size-12 shrink-0 rounded-full overflow-hidden border border-gray-100 bg-zinc-100 flex items-center justify-center editorial-image",style:Ve({backgroundImage:p.avatar?`url(${p.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[p.avatar?M("",!0):(d(),f("span",ny,"person"))],4),t("div",oy,[t("h3",ly,w(p.handle),1),t("p",iy,w(p.bio||p.name||"No bio"),1)])],8,sy),t("div",ay,[t("button",{onClick:b=>i(p.id),class:"px-4 py-1.5 border border-zinc-200 text-black rounded-full text-[11px] font-medium hover:bg-zinc-50 transition-colors"}," Edit ",8,ry),r[7]||(r[7]=t("div",{class:"px-5 py-1.5 bg-black text-white rounded-full text-[11px] font-medium tracking-wide"}," Following ",-1))])]))),128))])])]))}},dy=rt(cy,[["__scopeId","data-v-c8641243"]]),uy={class:"h-full flex flex-col bg-white text-black font-sans overflow-hidden"},py={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},fy={class:"flex items-center gap-3"},vy={class:"text-[17px] font-semibold tracking-tight text-zinc-900"},xy={class:"flex-1 overflow-y-auto p-6 pb-12 space-y-4"},by={class:"bg-zinc-50 rounded-2xl p-6 flex flex-col items-center"},my={key:0,class:"material-symbols-outlined text-zinc-400 text-[40px]"},gy={class:"bg-zinc-50 rounded-2xl p-5"},hy={class:"bg-zinc-50 rounded-2xl p-5"},yy={class:"bg-zinc-50 rounded-2xl p-5"},wy={class:"bg-zinc-50 rounded-2xl p-5"},ky={class:"bg-zinc-50 rounded-2xl p-5"},_y={key:0,class:"pt-4"},zy={__name:"ContactEdit",props:["contactId"],emits:["back","save"],setup(e,{emit:s}){const n=e,o=s,l=C({id:"",handle:"",name:"",persona:"",bio:"",link:"",avatar:""}),i=C(!1);Dt(()=>{if(n.contactId){const b=k.contacts.find(u=>u.id===n.contactId);b&&(i.value=!0,l.value={...b})}else l.value.id="c_"+Date.now(),l.value.avatar=""});const a=()=>{const b={...l.value};i.value?uf(b):df(b),o("save")},r=()=>{const b=prompt("Enter image URL for avatar:",l.value.avatar);b&&(l.value.avatar=b)},p=async()=>{l.value.id&&confirm("Remove this contact?")&&(await pf(l.value.id),o("save"))};return(b,u)=>(d(),f("div",uy,[t("header",py,[t("div",fy,[t("button",{onClick:u[0]||(u[0]=v=>b.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...u[6]||(u[6]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("span",vy,w(i.value?"":""),1)]),t("button",{onClick:a,class:"bg-black text-white rounded-full px-5 py-2 text-[12px] font-bold uppercase tracking-wider hover:bg-zinc-800 transition-colors"},"  ")]),t("main",xy,[t("div",by,[t("div",{class:"w-24 h-24 rounded-full overflow-hidden mb-4 border-2 border-white shadow-lg bg-zinc-200 flex items-center justify-center",style:Ve({backgroundImage:l.value.avatar?`url(${l.value.avatar})`:"none",backgroundSize:"cover",backgroundPosition:"center"})},[l.value.avatar?M("",!0):(d(),f("span",my,"person"))],4),t("button",{onClick:r,class:"text-[11px] text-zinc-500 uppercase tracking-widest font-bold hover:text-black transition-colors"},"  ")]),t("div",gy,[u[7]||(u[7]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"ID / ",-1)),ie(t("input",{"onUpdate:modelValue":u[1]||(u[1]=v=>l.value.handle=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"handle"},null,512),[[pe,l.value.handle]])]),t("div",hy,[u[8]||(u[8]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("input",{"onUpdate:modelValue":u[2]||(u[2]=v=>l.value.name=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"Real Name"},null,512),[[pe,l.value.name]]),u[9]||(u[9]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"},"",-1))]),t("div",yy,[u[10]||(u[10]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("textarea",{"onUpdate:modelValue":u[3]||(u[3]=v=>l.value.persona=v),rows:"4",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Internal notes about this contact..."},null,512),[[pe,l.value.persona]]),u[11]||(u[11]=t("div",{class:"mt-2 text-[10px] text-zinc-300 tracking-wide"}," ()",-1))]),t("div",wy,[u[12]||(u[12]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("textarea",{"onUpdate:modelValue":u[4]||(u[4]=v=>l.value.bio=v),rows:"3",class:"w-full bg-white rounded-xl py-3 px-4 text-[14px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none resize-none leading-relaxed",placeholder:"Public bio..."},null,512),[[pe,l.value.bio]])]),t("div",ky,[u[13]||(u[13]=t("div",{class:"text-[10px] text-zinc-400 uppercase tracking-widest mb-2 font-bold"},"",-1)),ie(t("input",{"onUpdate:modelValue":u[5]||(u[5]=v=>l.value.link=v),type:"text",class:"w-full bg-white rounded-xl py-3 px-4 text-[15px] font-medium text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:ring-1 focus:ring-black transition-all border-none",placeholder:"website.com"},null,512),[[pe,l.value.link]])]),i.value?(d(),f("div",_y,[t("button",{onClick:p,class:"w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 hover:text-zinc-700 transition-colors"},"  ")])):M("",!0)])]))}},$y=rt(zy,[["__scopeId","data-v-3b23ee71"]]),Cy={class:"h-full flex flex-col bg-white text-black font-sans relative"},Sy={class:"sticky top-0 z-50 bg-white/95 backdrop-blur-xl border-b border-zinc-100"},Iy={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},My={class:"flex-1"},Ty={class:"flex-1 text-center flex flex-col items-center"},Ey={key:0,class:"text-[10px] text-zinc-400 bg-zinc-50 px-2 py-0.5 rounded-full mt-0.5 max-w-[120px] truncate"},jy={class:"flex-1 flex justify-end"},Ay={class:"flex-1 overflow-y-auto w-full"},Oy={key:0,class:"p-12 text-center text-zinc-400"},Py={key:1,class:"pb-12"},Ry={class:"p-5 border-b-8 border-zinc-50"},Ny={class:"flex items-center justify-between mb-3"},Ly={key:0,class:"bg-zinc-50 p-4 rounded-xl border border-zinc-100"},Dy={key:0,class:"text-[15px] leading-relaxed text-black/80 font-serif italic"},Vy={key:1,class:"text-zinc-400 text-sm italic"},By={key:2,class:"mt-2 text-right text-[11px] text-zinc-400"},Uy={class:"p-5"},Fy={class:"flex items-center justify-between mb-4"},Wy={class:"relative"},Ky={class:"space-y-3"},Hy=["onClick"],Gy={class:"flex flex-col gap-1.5"},qy={class:"flex items-center gap-2 text-[11px] font-bold text-zinc-400 uppercase tracking-wider"},Yy={class:"pr-6"},Jy={class:"text-[14px] text-black font-medium"},Xy={class:"text-[14px] text-zinc-600"},Qy={key:0,class:"mt-1 flex items-start"},Zy={class:"bg-zinc-100 text-zinc-500 text-[11px] px-2 py-0.5 rounded text-left"},e2={key:0,class:"absolute inset-0 z-[100] flex justify-end"},t2={class:"relative w-[280px] h-full bg-white shadow-2xl flex flex-col animate-slide-in"},s2={class:"p-5 border-b border-zinc-100 flex items-center justify-between"},n2={class:"flex-1 overflow-y-auto p-2"},o2=["onClick"],l2={class:"size-10 rounded-full bg-zinc-200 flex items-center justify-center text-zinc-500 shrink-0"},i2={class:"material-symbols-outlined"},a2={class:"flex flex-col overflow-hidden"},r2={class:"text-sm font-bold truncate"},c2={class:"text-xs text-zinc-400 uppercase"},d2={key:0,class:"text-center p-8 text-zinc-400 text-sm"},u2={__name:"CharMemory",props:{contactId:{type:String,required:!0}},emits:["back"],setup(e,{emit:s}){const n=e,o=C(!0),l=C(null),i=C([]),a=C(""),r=C(!1),p=C(""),b=C(!1),u=C(null),v=be(()=>{const A=k.conversations.filter(R=>!!((R.type==="dm"||R.type==="direct")&&R.id===n.contactId||(R.type==="group"||R.isGroup)&&R.members&&R.members.includes(n.contactId))).map(R=>{const Y=k.contacts.find(ce=>ce.id===n.contactId),we=Y?.handle&&Y.handle.trim()||Y?.name||"Unknown";return{id:R.id,name:R.title||(R.type==="group"||R.isGroup?"":we),type:R.type==="group"||R.isGroup?"group":"dm",avatar:R.avatar||null}});if(A.length===0){const R=k.contacts.find(we=>we.id===n.contactId);return[{id:"no_conv",name:` ${R?.handle&&R.handle.trim()||R?.name||"Unknown"} `,type:"placeholder",avatar:null}]}return A}),g=be(()=>{if(!a.value)return i.value.slice(0,50);const A=a.value.toLowerCase();return i.value.filter(R=>{const Y=Array.isArray(R.who)?R.who.join(" "):R.who||"";return(R.action||R.what||"").toLowerCase().includes(A)||Y.toLowerCase().includes(A)||R.why&&R.why.toLowerCase().includes(A)||R.when&&R.when.toLowerCase().includes(A)})}),j=async A=>{if(o.value=!0,!A||A==="no_conv"){l.value=null,p.value="",i.value=[],o.value=!1;return}const[R,Y]=await Promise.all([hl(A),Ic(A)]);R?(l.value=R,p.value=R.summary||""):(l.value=null,p.value=""),i.value=Y||[],o.value=!1},U=async()=>{v.value.length>0&&!u.value&&(u.value=v.value[0].id),await j(u.value)},N=A=>{u.value=A,b.value=!1,j(A)},L=async()=>{if(!u.value||u.value.startsWith("mock_")){l.value={...l.value,summary:p.value,lastUpdatedAt:Date.now()},r.value=!1;return}await Sc(u.value,p.value),l.value={...l.value,summary:p.value,lastUpdatedAt:Date.now()},r.value=!1},S=async A=>{confirm("")&&(u.value&&!u.value.startsWith("mock_")&&await gf(A),i.value=i.value.filter(R=>R.id!==A))},E=A=>A?(Array.isArray(A)?A:[A]).map(Y=>Y==="User"?"":Y).join(""):"",T=A=>A.action||A.what||"",O=A=>new Date(A).toLocaleDateString()+" "+new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return Dt(U),(A,R)=>(d(),f("div",Cy,[t("header",Sy,[t("div",Iy,[t("div",My,[t("button",{onClick:R[0]||(R[0]=Y=>A.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-zinc-50 rounded-full transition-colors"},[...R[7]||(R[7]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])])]),t("div",Ty,[R[8]||(R[8]=t("span",{class:"text-[16px] font-bold"},"Memory",-1)),u.value?(d(),f("span",Ey,w(v.value.find(Y=>Y.id===u.value)?.name||""),1)):M("",!0)]),t("div",jy,[t("button",{onClick:R[1]||(R[1]=Y=>b.value=!0),class:"size-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors"},[...R[9]||(R[9]=[t("span",{class:"material-symbols-outlined text-[24px]"},"more_horiz",-1)])])])])]),t("main",Ay,[o.value?(d(),f("div",Oy," ... ")):(d(),f("div",Py,[t("section",Ry,[t("div",Ny,[R[10]||(R[10]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"material-symbols-outlined text-[20px] text-zinc-900"},"psychology"),t("h2",{class:"text-[16px] font-bold uppercase tracking-wide"},"CORE COGNITION")],-1)),r.value?(d(),f("button",{key:1,onClick:L,class:"text-[13px] font-bold text-black border border-black px-3 py-0.5 rounded-full hover:bg-black hover:text-white transition-colors"}," SAVE ")):(d(),f("button",{key:0,onClick:R[2]||(R[2]=Y=>r.value=!0),class:"text-[13px] font-bold text-zinc-400 hover:text-black transition-colors"}," EDIT "))]),r.value?ie((d(),f("textarea",{key:1,"onUpdate:modelValue":R[3]||(R[3]=Y=>p.value=Y),class:"w-full h-[120px] bg-white border border-black p-3 rounded-lg text-[15px] font-serif focus:outline-none"},null,512)),[[pe,p.value]]):(d(),f("div",Ly,[l.value?(d(),f("p",Dy,' "'+w(l.value.summary)+'" ',1)):(d(),f("p",Vy,"  "))])),l.value?(d(),f("div",By," : "+w(O(l.value.lastUpdatedAt)),1)):M("",!0)]),t("section",Uy,[t("div",Fy,[R[12]||(R[12]=t("h2",{class:"text-[16px] font-bold uppercase tracking-wide"},"MEMORY STREAM",-1)),t("div",Wy,[ie(t("input",{"onUpdate:modelValue":R[4]||(R[4]=Y=>a.value=Y),type:"text",placeholder:"...",class:"bg-zinc-50 border border-zinc-200 rounded-full py-1.5 pl-9 pr-4 text-[13px] w-[140px] focus:w-[180px] focus:border-black transition-all focus:outline-none"},null,512),[[pe,a.value]]),R[11]||(R[11]=t("span",{class:"material-symbols-outlined absolute left-2.5 top-1.5 text-[16px] text-zinc-400"},"search",-1))])]),t("div",Ky,[(d(!0),f(oe,null,ye(g.value,Y=>(d(),f("div",{key:Y.id,class:"group relative bg-white border border-zinc-100 rounded-xl p-4 transition-shadow hover:shadow-sm hover:border-zinc-200"},[t("button",{onClick:we=>S(Y.id),class:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-zinc-100 rounded-md"},[...R[13]||(R[13]=[t("span",{class:"material-symbols-outlined text-[16px] text-zinc-400"},"delete",-1)])],8,Hy),t("div",Gy,[t("div",qy,[t("span",null,w(Y.when||""),1),R[14]||(R[14]=t("span",{class:"w-1 h-1 rounded-full bg-zinc-300"},null,-1)),t("span",null,w(Y.where||""),1)]),t("div",Yy,[t("span",Jy,w(E(Y.who)),1),t("span",Xy,w(T(Y)),1)]),Y.why?(d(),f("div",Qy,[t("span",Zy," : "+w(Y.why),1)])):M("",!0)])]))),128))])])]))]),b.value?(d(),f("div",e2,[t("div",{class:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:R[5]||(R[5]=Y=>b.value=!1)}),t("div",t2,[t("div",s2,[R[16]||(R[16]=t("span",{class:"font-bold text-lg"},"",-1)),t("button",{onClick:R[6]||(R[6]=Y=>b.value=!1),class:"text-zinc-400 hover:text-black"},[...R[15]||(R[15]=[t("span",{class:"material-symbols-outlined"},"close",-1)])])]),t("div",n2,[(d(!0),f(oe,null,ye(v.value,Y=>(d(),f("div",{key:Y.id,onClick:we=>N(Y.id),class:W(["p-3 rounded-lg cursor-pointer flex items-center gap-3 transition-colors hover:bg-zinc-50",u.value===Y.id?"bg-zinc-100 ring-1 ring-zinc-200":""])},[t("div",l2,[t("span",i2,w(Y.type==="group"?"group":"person"),1)]),t("div",a2,[t("span",r2,w(Y.name),1),t("span",c2,w(Y.type==="dm"?"":""),1)])],10,o2))),128)),v.value.length===0?(d(),f("div",d2,"  ")):M("",!0)])])])):M("",!0)]))}},p2=rt(u2,[["__scopeId","data-v-882b9b31"]]),f2={class:"h-full flex flex-col bg-white text-black font-sans relative overflow-hidden"},v2={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},x2={class:"flex items-center justify-between px-4 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},b2={class:"w-full pb-32 flex-1 overflow-y-auto scrollbar-hide"},m2={class:"flex flex-col items-center pt-8 pb-8 border-b border-gray-50"},g2={class:"relative w-[86px] h-[86px] rounded-full p-[2px] border border-gray-100 mb-4 bg-white shadow-sm"},h2={class:"font-serif text-2xl font-medium tracking-tight mb-1"},y2={class:"text-[10px] tracking-[0.2em] font-bold uppercase text-zinc-400"},w2={class:"text-[11px] font-medium text-zinc-600 group-hover:text-black"},k2={class:"px-6 py-6 space-y-8"},_2={class:"bg-transparent flex flex-col gap-0"},z2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},$2={class:"flex flex-col gap-1"},C2={key:0,class:"text-[11px] text-zinc-400 font-light"},S2={class:"flex items-center gap-3"},I2={class:"relative inline-flex items-center cursor-pointer"},M2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},T2={class:"flex flex-col gap-1"},E2={key:0,class:"text-[11px] text-zinc-400 font-light"},j2={class:"flex items-center gap-3"},A2={class:"relative inline-flex items-center cursor-pointer"},O2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},P2={class:"flex items-center gap-2"},R2={class:"group flex items-center justify-between py-3 border-b border-gray-50"},N2={class:"relative inline-flex items-center cursor-pointer"},L2={key:0,class:"space-y-3 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},D2={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},V2={class:"relative inline-flex items-center cursor-pointer"},B2={key:0,class:"pl-4 border-l-2 border-zinc-100"},U2={key:1,class:"group flex items-center justify-between py-3 border-b border-gray-50"},F2={class:"relative inline-flex items-center cursor-pointer"},W2={key:2,class:"space-y-4 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},K2={class:"flex items-start gap-3 py-2 pl-4 border-l-2 border-zinc-100"},H2={class:"flex flex-col gap-2 flex-1"},G2={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-zinc-100 ring-1 ring-zinc-200 shrink-0"},q2=["src"],Y2={class:"flex items-start gap-3 py-2 pl-4 border-l-2 border-zinc-100"},J2={class:"flex flex-col gap-2 flex-1"},X2={class:"text-[12px] text-zinc-500 font-medium"},Q2={key:0,class:"w-12 h-12 rounded-lg overflow-hidden bg-zinc-100 ring-1 ring-zinc-200 shrink-0"},Z2=["src"],ew={class:"flex items-center gap-2"},tw={class:"text-[12px] text-zinc-400"},sw={class:"flex items-center gap-2"},nw={class:"text-[12px] text-zinc-400"},ow={class:"mt-4 pt-4 border-t border-gray-100"},lw={class:"flex items-center justify-between py-3"},iw={class:"relative inline-flex items-center cursor-pointer"},aw={key:0,class:"space-y-3 pb-3 animate-in fade-in slide-in-from-top-1 duration-200"},rw={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},cw={class:"flex items-center gap-2"},dw={class:"flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100"},uw={class:"flex items-center gap-2"},pw=["disabled"],fw={class:"flex items-center gap-2"},vw={key:0,class:"text-[11px] text-zinc-400"},xw={key:1,class:"text-[11px] text-zinc-300"},bw={class:"material-symbols-outlined text-zinc-300 text-[16px] group-hover:text-black"},mw={class:"flex items-center gap-2"},gw={key:0,class:"text-[12px] text-zinc-400"},hw={key:1,class:"text-[12px] text-zinc-400"},yw={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},ww={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},kw={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},_w={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-6"},zw={id:"timezone-list"},$w=["value"],Cw={class:"flex flex-col gap-2"},Sw={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},Iw={key:0,class:"flex flex-col gap-2"},Mw={class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},Tw={key:1,class:"flex flex-col gap-4"},Ew={class:"text-[10px] text-zinc-500 font-medium ml-1"},jw=["onUpdate:modelValue","placeholder"],Aw={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Ow={key:1,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Pw={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Rw={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Nw={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-8"},Lw={class:"flex flex-col gap-3"},Dw={class:"flex gap-2"},Vw={key:0,class:"material-symbols-outlined text-sm animate-spin"},Bw={key:1,class:"material-symbols-outlined text-sm"},Uw={key:0,class:"flex flex-col gap-1 mt-1"},Fw=["onClick"],Ww={key:0,class:"material-symbols-outlined text-xs"},Kw={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},Hw={class:"text-[12px] font-medium"},Gw={class:"text-[10px] text-zinc-400 font-mono ml-auto"},qw={class:"flex flex-col gap-4"},Yw={class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},Jw={key:0,class:"flex flex-col gap-3"},Xw={class:"flex gap-2"},Qw={key:0,class:"material-symbols-outlined text-sm animate-spin"},Zw={key:1,class:"material-symbols-outlined text-sm"},ek={key:0,class:"flex flex-col gap-1 mt-1"},tk=["onClick"],sk={key:0,class:"material-symbols-outlined text-xs"},nk={key:1,class:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md border border-gray-100"},ok={class:"text-[12px] font-medium"},lk={class:"text-[10px] text-zinc-400 font-mono ml-auto"},ik={key:1,class:"flex flex-col gap-6"},ak={class:"text-[11px] font-bold block mb-2"},rk={class:"flex gap-2"},ck=["onUpdate:modelValue","onKeyup"],dk=["onClick"],uk={key:0,class:"material-symbols-outlined text-sm animate-spin"},pk={key:1,class:"material-symbols-outlined text-sm"},fk={key:0,class:"flex flex-col gap-1 mt-2 bg-white rounded-md border border-gray-100 p-1"},vk=["onClick"],xk={class:"truncate"},bk={key:0,class:"material-symbols-outlined text-[10px]"},mk={key:1,class:"flex items-center gap-2 mt-2 px-2"},gk={class:"text-[11px] font-bold text-zinc-600"},hk={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end gap-3"},yk={key:2,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},wk={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},kk={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},_k={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},zk={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},$k={class:"text-[13px] text-zinc-600"},Ck={class:"font-bold text-black"},Sk={class:"flex flex-col gap-2"},Ik=["onClick"],Mk={class:"flex items-center gap-3"},Tk={class:"font-medium text-[14px] text-zinc-900"},Ek={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},jk=["checked","onChange"],Ak={key:0,class:"border-t border-zinc-100 px-4 pb-4"},Ok={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},Pk={class:"flex flex-col"},Rk={class:"text-[13px] font-medium text-zinc-700"},Nk={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},Lk=["checked","disabled","onChange"],Dk={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},Vk={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},Bk={key:3,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},Uk={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},Fk={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},Wk={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},Kk={key:0,class:"py-8 text-center"},Hk={key:1,class:"flex flex-col gap-2"},Gk=["onClick"],qk={class:"flex items-center gap-3"},Yk={key:0,class:"material-symbols-outlined text-zinc-400 flex items-center justify-center h-full"},Jk={class:"flex flex-col items-start"},Xk={class:"text-[14px] font-medium"},Qk={key:0,class:"material-symbols-outlined text-black text-[16px] font-bold"},Zk={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},e4={key:0,class:"fixed inset-0 z-[100] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6"},t4={class:"bg-white w-full max-w-md max-h-[80vh] rounded-2xl shadow-xl flex flex-col overflow-hidden"},s4={class:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-white shrink-0"},n4={class:"flex-1 overflow-y-auto p-6 flex flex-col gap-4"},o4={class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},l4={class:"text-[13px] text-zinc-600"},i4={class:"font-bold text-black"},a4={key:0,class:"py-8 text-center bg-zinc-50 rounded-2xl border border-zinc-100"},r4={key:1,class:"flex flex-col gap-2"},c4=["onClick"],d4={class:"flex items-center gap-3"},u4={class:"font-medium text-[14px] text-zinc-900"},p4={class:"text-[10px] text-zinc-400 uppercase tracking-wide"},f4=["checked","onChange"],v4={key:0,class:"border-t border-zinc-100 px-4 pb-4"},x4={key:0,class:"py-4 text-center text-zinc-300 text-[12px] italic"},b4={class:"flex flex-col"},m4={class:"text-[13px] font-medium text-zinc-700"},g4={class:"text-[10px] text-zinc-400 font-mono truncate max-w-[200px]"},h4=["checked","disabled","onChange"],y4={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},w4={class:"px-6 py-4 bg-gray-50 border-t border-gray-100 shrink-0 flex justify-end"},k4={__name:"ChatSettings",props:["chatId"],emits:["back","navigate"],setup(e,{emit:s}){const n=e,o=be(()=>gl(n.chatId)),l=C(!1),i=C(!1),a=C(""),r=C(""),p=C(15),b=C(!1),u=C(100),v=C(500),g=C(!1),j=C([]),U=C(!1),N=C(!1),L=C(""),S=C(""),E=C(""),T=C([]),O=C([]),A=C({}),R=C({}),Y=C(null),we=C(null),ce=C({}),ze=wo(),Ee=C(!1),se=C([]),K=C(new Set),I=C(!1),y=C([]),z=C(new Set),D=be(()=>k.regexCategories.filter(H=>H.scope==="local")),ae=C(!1),ue=C(!1),F=C(""),ve=C(!1),xe=C(""),We=C(""),ot=be(()=>{const H=o.value?.localSettings?.myActivePersonaId;if(H){const h=k.personas.find(P=>P.id===H);return h?h.name:"My"}return di.value?di.value.name:"My"}),Mt=be(()=>{if(!o.value)return"https://via.placeholder.com/150";const H=o.value.localSettings||{},h=o.value.type==="group"||o.value.isGroup?H.groupAvatarOverride:H.theirAvatarOverride;if(h)return h;if(!o.value.isGroup&&o.value.type!=="group"){const P=k.contacts.find(me=>me.id===o.value.id);if(P?.avatar)return P.avatar}return o.value.avatar||"https://via.placeholder.com/150"}),ct=be(()=>{if(!o.value)return"Their";const H=o.value.localSettings||{};if(o.value.isGroup||o.value.type==="group")return H.groupNameOverride||o.value.title||"Group";const h=k.contacts.find(P=>P.id===o.value.id);return H.theirNicknameOverride||h?.handle||h?.name||o.value.handle||o.value.name||"Their"}),Tt=C([]);try{Tt.value=Intl.supportedValuesOf("timeZone")}catch{Tt.value=["UTC","Asia/Shanghai","Asia/Tokyo","Europe/London","Europe/Paris","America/New_York","America/Los_Angeles"]}const At=C({}),yt=be(()=>o.value?.type==="group"||o.value?.isGroup===!0),Ot=C(!1),qt=be(()=>yt.value?(o.value.members||[]).map(H=>k.contacts.find(h=>h.id===H)||{id:H,name:"Unknown"}):[]),_=()=>{if(o.value){const H=o.value.localSettings||{};l.value=H.timeAwareness!==!1,i.value=H.envSensing===!0,a.value=H.myLocationOverride||"",r.value=H.theirLocationOverride||"",p.value=H.shortTermMemoryLimit||15,Y.value=H.myWeatherConfig||null,we.value=H.theirWeatherConfig||null,ce.value=H.groupWeatherConfigs||{};const h=H.memberOverrides||{};yt.value&&qt.value.forEach(P=>{At.value[P.id]=h[P.id]?.location||""}),se.value=[...H.mountedWorldbooks||[]],y.value=[...H.mountedRegexCategories||[]],b.value=H.longTermMemoryEnabled===!0,u.value=H.ltmSummarizeTrigger||15,v.value=H.ltmCoreMaxChars||500,j.value=[...H.mountedMemorySources||[]],ae.value=H.innerVoiceEnabled===!0,ue.value=H.innerVoiceUseCustom===!0,F.value=H.innerVoiceTemplate||"",ve.value=H.videoCallUseImage===!0,xe.value=H.videoCallUserImage||"",We.value=H.videoCallCharImage||""}},$=async()=>{if(o.value){const H={};for(const[h,P]of Object.entries(At.value))P&&(H[h]={location:P});await Vn({id:n.chatId,localSettings:{...o.value.localSettings||{},timeAwareness:l.value,envSensing:i.value,myLocationOverride:a.value,theirLocationOverride:r.value,shortTermMemoryLimit:p.value,memberOverrides:H,myWeatherConfig:Y.value,theirWeatherConfig:we.value,groupWeatherConfigs:ce.value,longTermMemoryEnabled:b.value,ltmSummarizeTrigger:u.value,ltmCoreMaxChars:v.value,mountedMemorySources:j.value,mountedRegexCategories:y.value,innerVoiceEnabled:ae.value,innerVoiceUseCustom:ue.value,innerVoiceTemplate:F.value,videoCallUseImage:ve.value,videoCallUserImage:xe.value,videoCallCharImage:We.value}})}},B=async H=>{E.value=H;let h="";if(H==="me"?h=L.value:H==="their"?h=S.value:h=A.value[H]||"",!h){E.value="";return}const P=await cv(h);H==="me"?T.value=P:H==="their"?O.value=P:R.value={...R.value,[H]:P},E.value=""},X=(H,h)=>{const P={city:h.name,lat:h.latitude,long:h.longitude};if(H==="me")Y.value=P,T.value=[],L.value="";else if(H==="their")we.value=P,O.value=[],S.value="";else{ce.value={...ce.value,[H]:P};const me={...R.value};delete me[H],R.value=me,A.value[H]=""}},q=H=>ce.value[H],J=be(()=>ze.state.categories),re=be(()=>ze.state.entries),ne=H=>re.value.filter(h=>h.categoryId===H&&h.scope==="local"),ee=H=>{const h=se.value.indexOf(H);h===-1?se.value.push(H):se.value.splice(h,1),Le()},G=H=>se.value.includes(H),ke=H=>{K.value.has(H)?K.value.delete(H):K.value.add(H),K.value=new Set(K.value)},le=H=>K.value.has(H),ge=H=>{ee(H)},Me=()=>{Ee.value=!0},Le=async()=>{if(o.value){const H=o.value.localSettings||{};await Vn({id:n.chatId,localSettings:{...H,mountedWorldbooks:se.value}})}},Xe=be(()=>re.value.filter(H=>H.scope==="global").length),Fe=H=>{const h=y.value.indexOf(H);h===-1?y.value.push(H):y.value.splice(h,1),$()},qe=H=>y.value.includes(H),wt=H=>{z.value.has(H)?z.value.delete(H):z.value.add(H),z.value=new Set(z.value)},Vt=H=>z.value.has(H),Pt=H=>k.regexEntries.filter(h=>h.categoryId===H),ps=be(()=>{const H=o.value;if(!H)return[];const h=H.type==="group"||H.isGroup?null:H.id,P=H.members||[];return k.conversations.filter(me=>{if(me.id===H.id)return!1;if(h){if((me.type==="dm"||me.type==="direct")&&me.id===h||(me.type==="group"||me.isGroup)&&me.members?.includes(h))return!0}else if((me.type==="dm"||me.type==="direct")&&P.includes(me.id)||(me.type==="group"||me.isGroup)&&me.members?.some(Ms=>P.includes(Ms)))return!0;return!1}).map(me=>{const Ms=me.type==="group"||me.isGroup;let Un="";if(Ms)Un=me.title||me.handle||"";else{const kn=k.contacts.find(ko=>ko.id===me.id);Un=kn?.name||kn?.handle||""}return{id:me.id,name:Un,type:Ms?"group":"dm",avatar:me.avatar||null}})}),Yt=H=>{const h=j.value.indexOf(H);h===-1?j.value.push(H):j.value.splice(h,1),$()},gt=H=>j.value.includes(H),Jt=async()=>{if(!U.value)try{U.value=!0,await Ho(n.chatId);const H=k.messages[n.chatId]||[];if(H.length===0){alert("");return}await Mc(n.chatId,H.slice(-50)),alert("")}catch(H){console.error("[Memory] Manual summarization failed:",H),alert(": "+H.message)}finally{U.value=!1}};return Dt(()=>{_()}),(H,h)=>(d(),f("div",f2,[t("header",v2,[t("div",x2,[t("button",{onClick:h[0]||(h[0]=P=>H.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 hover:bg-gray-100 rounded-full transition-colors active:scale-95"},[...h[43]||(h[43]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),h[44]||(h[44]=t("h1",{class:"font-serif text-[16px] font-semibold tracking-wide uppercase text-center flex-1 pr-8 opacity-80"},"",-1)),h[45]||(h[45]=t("div",{class:"w-8 hidden"},null,-1))])]),t("main",b2,[t("section",m2,[t("div",g2,[t("div",{class:"w-full h-full rounded-full bg-neutral-100 bg-cover bg-center",style:Ve({backgroundImage:`url(${Mt.value})`})},null,4)]),t("h2",h2,w(ct.value),1),t("span",y2,w(yt.value?"":""),1),t("button",{onClick:h[1]||(h[1]=P=>H.$emit("navigate","chat-settings-identity",{id:n.chatId})),class:"mt-6 flex items-center gap-2 pl-3 pr-4 py-1.5 rounded-full bg-zinc-50 border border-zinc-100 hover:bg-zinc-100 transition-colors group"},[t("div",{class:"w-5 h-5 rounded-full bg-cover bg-center",style:Ve({backgroundImage:`url(${at(k).personas.find(P=>P.name===ot.value)?.avatar})`})},null,4),t("span",w2,": "+w(ot.value),1),h[46]||(h[46]=t("span",{class:"material-symbols-outlined text-[14px] text-zinc-300 group-hover:text-black"},"arrow_forward_ios",-1))])]),t("section",k2,[t("div",null,[h[62]||(h[62]=t("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-500 mb-4 ml-1"},"",-1)),t("div",_2,[t("div",z2,[t("div",$2,[h[47]||(h[47]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),l.value?(d(),f("span",C2,w(a.value||"")+"  "+w(r.value||""),1)):M("",!0)]),t("div",S2,[l.value?(d(),f("button",{key:0,onClick:h[2]||(h[2]=P=>Ot.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...h[48]||(h[48]=[t("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):M("",!0),t("label",I2,[ie(t("input",{type:"checkbox","onUpdate:modelValue":h[3]||(h[3]=P=>l.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,l.value]]),h[49]||(h[49]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),t("div",M2,[t("div",T2,[h[50]||(h[50]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),i.value?(d(),f("span",E2,w(L.value||"")+"  "+w(S.value||""),1)):M("",!0)]),t("div",j2,[i.value?(d(),f("button",{key:0,onClick:h[4]||(h[4]=P=>N.value=!0),class:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-zinc-50 transition-colors"},[...h[51]||(h[51]=[t("span",{class:"material-symbols-outlined text-[18px] text-zinc-400"},"settings",-1)])])):M("",!0),t("label",A2,[ie(t("input",{type:"checkbox","onUpdate:modelValue":h[5]||(h[5]=P=>i.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,i.value]]),h[52]||(h[52]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])]),t("div",O2,[h[54]||(h[54]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),t("div",P2,[ie(t("input",{type:"number","onUpdate:modelValue":h[6]||(h[6]=P=>p.value=P),onChange:$,class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[pe,p.value]]),h[53]||(h[53]=t("span",{class:"text-[11px] text-zinc-400 uppercase tracking-widest"},"",-1))])]),t("div",R2,[h[56]||(h[56]=t("div",{class:"flex flex-col gap-1"},[t("span",{class:"text-[15px] font-medium text-zinc-900"},""),t("span",{class:"text-[11px] text-zinc-400 font-light"},"AI ")],-1)),t("label",N2,[ie(t("input",{type:"checkbox","onUpdate:modelValue":h[7]||(h[7]=P=>ae.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,ae.value]]),h[55]||(h[55]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),ae.value?(d(),f("div",L2,[t("div",D2,[h[58]||(h[58]=t("span",{class:"text-[13px] text-zinc-600"},"",-1)),t("label",V2,[ie(t("input",{type:"checkbox","onUpdate:modelValue":h[8]||(h[8]=P=>ue.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,ue.value]]),h[57]||(h[57]=t("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),ue.value?(d(),f("div",B2,[ie(t("textarea",{"onUpdate:modelValue":h[9]||(h[9]=P=>F.value=P),onChange:$,placeholder:` {{content}} 
<div class='thought'> {{content}}</div>`,class:"w-full h-20 bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20 resize-none"},null,544),[[pe,F.value]])])):M("",!0)])):M("",!0),yt.value?M("",!0):(d(),f("div",U2,[h[60]||(h[60]=t("div",{class:"flex flex-col gap-1"},[t("span",{class:"text-[15px] font-medium text-zinc-900"},""),t("span",{class:"text-[11px] text-zinc-400 font-light"},"")],-1)),t("label",F2,[ie(t("input",{type:"checkbox","onUpdate:modelValue":h[10]||(h[10]=P=>ve.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,ve.value]]),h[59]||(h[59]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])])),ve.value&&!yt.value?(d(),f("div",W2,[t("div",K2,[t("div",H2,[h[61]||(h[61]=t("span",{class:"text-[12px] text-zinc-500 font-medium"},"",-1)),ie(t("input",{"onUpdate:modelValue":h[11]||(h[11]=P=>xe.value=P),onChange:$,placeholder:"URL ()",class:"w-full bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20"},null,544),[[pe,xe.value]])]),xe.value?(d(),f("div",G2,[t("img",{src:xe.value,class:"w-full h-full object-cover",onError:h[12]||(h[12]=P=>xe.value="")},null,40,q2)])):M("",!0)]),t("div",Y2,[t("div",J2,[t("span",X2,w(ct.value)+" ",1),ie(t("input",{"onUpdate:modelValue":h[13]||(h[13]=P=>We.value=P),onChange:$,placeholder:"URL ()",class:"w-full bg-zinc-50 border border-zinc-100 rounded-lg px-3 py-2 text-[12px] focus:outline-none focus:border-black/20"},null,544),[[pe,We.value]])]),We.value?(d(),f("div",Q2,[t("img",{src:We.value,class:"w-full h-full object-cover",onError:h[14]||(h[14]=P=>We.value="")},null,40,Z2)])):M("",!0)])])):M("",!0)])]),t("div",null,[h[76]||(h[76]=t("h3",{class:"text-[10px] font-bold tracking-[0.2em] uppercase text-zinc-500 mb-4 ml-1"},"",-1)),t("button",{onClick:Me,class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors"},[h[64]||(h[64]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),t("div",ew,[t("span",tw,w(se.value.length)+" ",1),h[63]||(h[63]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),t("button",{onClick:h[15]||(h[15]=P=>I.value=!0),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group transition-colors mt-0"},[h[66]||(h[66]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"Regex ",-1)),t("div",sw,[t("span",nw,w(y.value.length)+" ",1),h[65]||(h[65]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),t("div",ow,[t("div",lw,[h[68]||(h[68]=t("div",{class:"flex flex-col gap-1"},[t("span",{class:"text-[15px] font-medium text-zinc-900"},""),t("span",{class:"text-[11px] text-zinc-400 font-light"},"")],-1)),t("label",iw,[ie(t("input",{type:"checkbox","onUpdate:modelValue":h[16]||(h[16]=P=>b.value=P),class:"sr-only noir-toggle",onChange:$},null,544),[[Ds,b.value]]),h[67]||(h[67]=t("div",{class:"noir-toggle-bg w-[40px] h-[22px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[18px] h-[18px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),b.value?(d(),f("div",aw,[t("div",rw,[h[70]||(h[70]=t("span",{class:"text-[13px] text-zinc-600"},"",-1)),t("div",cw,[ie(t("input",{type:"number","onUpdate:modelValue":h[17]||(h[17]=P=>u.value=P),onChange:$,min:"10",max:"200",class:"w-14 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[pe,u.value]]),h[69]||(h[69]=t("span",{class:"text-[11px] text-zinc-400"},"",-1))])]),t("div",dw,[h[72]||(h[72]=t("span",{class:"text-[13px] text-zinc-600"},"",-1)),t("div",uw,[ie(t("input",{type:"number","onUpdate:modelValue":h[18]||(h[18]=P=>v.value=P),onChange:$,min:"100",max:"2000",step:"50",class:"w-16 text-right bg-transparent text-[14px] font-bold focus:outline-none border-b border-transparent focus:border-black transition-colors"},null,544),[[pe,v.value]]),h[71]||(h[71]=t("span",{class:"text-[11px] text-zinc-400"},"",-1))])]),t("button",{onClick:Jt,disabled:U.value,class:"w-full flex items-center justify-between py-2 pl-4 border-l-2 border-zinc-100 group hover:bg-zinc-50 rounded-r-lg transition-colors disabled:opacity-50"},[h[73]||(h[73]=t("span",{class:"text-[13px] text-zinc-600 group-hover:text-black"},"",-1)),t("div",fw,[U.value?(d(),f("span",vw,"...")):(d(),f("span",xw,"")),t("span",bw,w(U.value?"sync":"play_arrow"),1)])],8,pw)])):M("",!0)]),t("button",{onClick:h[19]||(h[19]=P=>g.value=!0),class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[h[75]||(h[75]=t("span",{class:"text-[15px] font-medium text-zinc-900"},"",-1)),t("div",mw,[j.value.length>0?(d(),f("span",gw,w(j.value.length)+" ",1)):(d(),f("span",hw,"")),h[74]||(h[74]=t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-black transition-colors"},"chevron_right",-1))])]),h[77]||(h[77]=t("button",{class:"w-full flex items-center justify-between py-3 border-b border-gray-50 group hover:bg-zinc-50 transition-colors mt-2"},[t("span",{class:"text-[15px] font-medium text-zinc-500 group-hover:text-zinc-900 transition-colors"},""),t("span",{class:"material-symbols-outlined text-zinc-300 text-[18px] group-hover:text-zinc-900 transition-colors"},"delete_outline")],-1))])]),h[78]||(h[78]=t("div",{class:"flex flex-col items-center opacity-10 py-12 select-none pointer-events-none"},[t("span",{class:"font-serif italic text-2xl"},"NOIR")],-1))]),(d(),Te(ft,{to:"body"},[Ot.value?(d(),f("div",yw,[t("div",ww,[t("div",kw,[h[79]||(h[79]=t("span",{class:"font-serif italic text-lg"},"",-1)),t("button",{onClick:h[20]||(h[20]=P=>Ot.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",_w,[t("datalist",zw,[(d(!0),f(oe,null,ye(Tt.value,P=>(d(),f("option",{key:P,value:P},w(P),9,$w))),128))]),t("div",Cw,[t("label",Sw,w(ot.value)+" () ",1),ie(t("input",{type:"text",list:"timezone-list","onUpdate:modelValue":h[21]||(h[21]=P=>a.value=P),onChange:$,placeholder:" Asia/Shanghai",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[pe,a.value]])]),yt.value?(d(),f("div",Tw,[h[80]||(h[80]=t("div",{class:"w-full h-px bg-black/[0.03]"},null,-1)),h[81]||(h[81]=t("span",{class:"text-[10px] text-zinc-400 tracking-wider uppercase font-light ml-1"},"",-1)),(d(!0),f(oe,null,ye(qt.value,P=>(d(),f("div",{key:P.id,class:"flex flex-col gap-2"},[t("label",Ew,w(P.name),1),ie(t("input",{type:"text",list:"timezone-list","onUpdate:modelValue":me=>At.value[P.id]=me,onChange:$,placeholder:`${P.name} `,class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,40,jw),[[pe,At.value[P.id]]])]))),128))])):(d(),f("div",Iw,[t("label",Mw,w(ct.value)+" () ",1),ie(t("input",{type:"text",list:"timezone-list","onUpdate:modelValue":h[22]||(h[22]=P=>r.value=P),onChange:$,placeholder:" Europe/Paris",class:"w-full bg-gray-50 border border-gray-100 rounded-lg px-4 py-3 text-[14px] focus:outline-none focus:border-black/20 focus:bg-white transition-colors"},null,544),[[pe,r.value]])]))]),t("div",Aw,[t("button",{onClick:h[23]||(h[23]=P=>Ot.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0),N.value?(d(),f("div",Ow,[t("div",Pw,[t("div",Rw,[h[82]||(h[82]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},""),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Environment Simulation")],-1)),t("button",{onClick:h[24]||(h[24]=P=>N.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",Nw,[h[87]||(h[87]=t("div",{class:"bg-gray-50 p-4 rounded-lg flex gap-3"},[t("span",{class:"material-symbols-outlined text-zinc-400 text-sm mt-0.5"},"info"),t("p",{class:"text-[11px] text-zinc-500 leading-relaxed"}," Noir  Prompt  ")],-1)),t("div",Lw,[h[84]||(h[84]=t("span",{class:"text-[10px] uppercase tracking-widest font-bold text-black border-l-2 border-black pl-2"},"",-1)),t("div",Dw,[ie(t("input",{"onUpdate:modelValue":h[25]||(h[25]=P=>L.value=P),onKeyup:h[26]||(h[26]=xs(P=>B("me"),["enter"])),placeholder:" ( )",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[pe,L.value]]),t("button",{onClick:h[27]||(h[27]=P=>B("me")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[E.value==="me"?(d(),f("span",Vw,"sync")):(d(),f("span",Bw,"search"))])]),T.value.length>0?(d(),f("div",Uw,[(d(!0),f(oe,null,ye(T.value,P=>(d(),f("button",{key:P.id,onClick:me=>X("me",P),class:W(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",Y.value?.city===P.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[t("span",null,w(P.name)+", "+w(P.admin1||P.country),1),Y.value?.city===P.name?(d(),f("span",Ww,"check")):M("",!0)],10,Fw))),128))])):Y.value?.city?(d(),f("div",Kw,[h[83]||(h[83]=t("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),t("span",Hw,w(Y.value.city),1),t("span",Gw,w(Y.value.lat.toFixed(2))+", "+w(Y.value.long.toFixed(2)),1)])):M("",!0)]),h[88]||(h[88]=t("div",{class:"w-full h-px bg-gray-100"},null,-1)),t("div",qw,[t("span",Yw,w(yt.value?"":""),1),yt.value?(d(),f("div",ik,[(d(!0),f(oe,null,ye(qt.value,P=>(d(),f("div",{key:P.id,class:"p-3 border border-gray-100 rounded-lg bg-gray-50/50"},[t("span",ak,w(P.name),1),t("div",rk,[ie(t("input",{"onUpdate:modelValue":me=>A.value[P.id]=me,onKeyup:xs(me=>B(P.id),["enter"]),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-1.5 text-[12px] focus:border-black focus:outline-none transition-colors"},null,40,ck),[[pe,A.value[P.id]]]),t("button",{onClick:me=>B(P.id),class:"bg-white border border-gray-200 text-black rounded-lg px-3 flex items-center justify-center hover:border-black transition-colors"},[E.value===P.id?(d(),f("span",uk,"sync")):(d(),f("span",pk,"search"))],8,dk)]),R.value[P.id]&&R.value[P.id].length>0?(d(),f("div",fk,[(d(!0),f(oe,null,ye(R.value[P.id],me=>(d(),f("button",{key:me.id,onClick:Ms=>X(P.id,me),class:W(["text-left px-2 py-1.5 rounded hover:bg-gray-50 text-[11px] flex items-center justify-between group transition-colors",q(P.id)?.city===me.name?"font-bold text-black":"text-zinc-500"])},[t("span",xk,w(me.name)+", "+w(me.country),1),q(P.id)?.city===me.name?(d(),f("span",bk,"check")):M("",!0)],10,vk))),128))])):q(P.id)?.city?(d(),f("div",mk,[h[86]||(h[86]=t("span",{class:"material-symbols-outlined text-[10px] text-green-600"},"check_circle",-1)),t("span",gk,w(q(P.id).city),1)])):M("",!0)]))),128))])):(d(),f("div",Jw,[t("div",Xw,[ie(t("input",{"onUpdate:modelValue":h[28]||(h[28]=P=>S.value=P),onKeyup:h[29]||(h[29]=xs(P=>B("their"),["enter"])),placeholder:"",class:"flex-1 bg-white border border-gray-200 rounded-lg px-3 py-2 text-[13px] focus:border-black focus:outline-none transition-colors"},null,544),[[pe,S.value]]),t("button",{onClick:h[30]||(h[30]=P=>B("their")),class:"bg-black text-white rounded-lg px-4 flex items-center justify-center hover:opacity-80 transition-opacity"},[E.value==="their"?(d(),f("span",Qw,"sync")):(d(),f("span",Zw,"search"))])]),O.value.length>0?(d(),f("div",ek,[(d(!0),f(oe,null,ye(O.value,P=>(d(),f("button",{key:P.id,onClick:me=>X("their",P),class:W(["text-left px-3 py-2 rounded-md hover:bg-gray-50 text-[12px] flex items-center justify-between group transition-colors",we.value?.city===P.name?"bg-black text-white hover:bg-black":"text-zinc-600"])},[t("span",null,w(P.name)+", "+w(P.admin1||P.country),1),we.value?.city===P.name?(d(),f("span",sk,"check")):M("",!0)],10,tk))),128))])):we.value?.city?(d(),f("div",nk,[h[85]||(h[85]=t("span",{class:"material-symbols-outlined text-xs text-green-600"},"check_circle",-1)),t("span",ok,w(we.value.city),1),t("span",lk,w(we.value.lat.toFixed(2))+", "+w(we.value.long.toFixed(2)),1)])):M("",!0)]))])]),t("div",hk,[t("button",{onClick:h[31]||(h[31]=P=>N.value=!1),class:"px-6 py-2 border border-gray-200 bg-white text-black text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-gray-50 transition-colors"},"  "),t("button",{onClick:h[32]||(h[32]=P=>{$(),N.value=!1}),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0),Ee.value?(d(),f("div",yk,[t("div",wk,[t("div",kk,[h[89]||(h[89]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},""),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"WorldBook Mount")],-1)),t("button",{onClick:h[33]||(h[33]=P=>Ee.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",_k,[t("div",zk,[h[91]||(h[91]=t("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),t("p",$k,[t("span",Ck,w(Xe.value),1),h[90]||(h[90]=ns("  ",-1))])]),t("div",Sk,[(d(!0),f(oe,null,ye(J.value,P=>(d(),f("div",{key:P.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[t("button",{onClick:me=>ke(P.id),class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[t("div",Mk,[t("span",{class:W(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",le(P.id)?"rotate-90":""])},"chevron_right",2),t("span",Tk,w(P.name),1),t("span",Ek,w(ne(P.id).length)+" local",1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[34]||(h[34]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:G(P.id),onChange:me=>ge(P.id)},null,40,jk),t("div",{class:W(["w-[36px] h-[20px] rounded-full transition-colors duration-200",G(P.id)?"bg-black":"bg-zinc-200"])},[t("div",{class:W(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",G(P.id)?"translate-x-4":""])},null,2)],2)])],8,Ik),le(P.id)?(d(),f("div",Ak,[ne(P.id).length===0?(d(),f("div",Ok," No local entries ")):M("",!0),(d(!0),f(oe,null,ye(ne(P.id),me=>(d(),f("div",{key:me.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[t("div",Pk,[t("span",Rk,w(me.title),1),t("span",Nk,w(me.isConstant?"Constant":"Trigger")+"  "+w(me.position),1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[35]||(h[35]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:G(P.id)||G(me.id),disabled:G(P.id),onChange:Ms=>!G(P.id)&&ee(me.id)},null,40,Lk),t("div",{class:W(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",G(P.id)||G(me.id)?"bg-black border-black":"bg-transparent"])},[G(P.id)||G(me.id)?(d(),f("span",Dk,"check")):M("",!0)],2)])]))),128))])):M("",!0)]))),128))])]),t("div",Vk,[t("button",{onClick:h[36]||(h[36]=P=>Ee.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0),g.value?(d(),f("div",Bk,[t("div",Uk,[t("div",Fk,[h[92]||(h[92]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},""),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Memory Mount")],-1)),t("button",{onClick:h[37]||(h[37]=P=>g.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",Wk,[h[94]||(h[94]=t("div",{class:"p-4 bg-gray-50 rounded-xl border border-dashed border-gray-200"},[t("p",{class:"text-[12px] text-zinc-500 leading-relaxed"},"  ")],-1)),ps.value.length===0?(d(),f("div",Kk,[...h[93]||(h[93]=[t("span",{class:"material-symbols-outlined text-[48px] text-zinc-200 mb-2"},"memory",-1),t("p",{class:"text-[13px] text-zinc-400"},"",-1),t("p",{class:"text-[11px] text-zinc-300 mt-1"},"",-1)])])):(d(),f("div",Hk,[(d(!0),f(oe,null,ye(ps.value,P=>(d(),f("button",{key:P.id,onClick:me=>Yt(P.id),class:W(["flex items-center justify-between p-4 rounded-xl border transition-all",gt(P.id)?"bg-black text-white border-black":"bg-white text-black border-zinc-200 hover:border-zinc-400"])},[t("div",qk,[t("div",{class:"w-10 h-10 rounded-full bg-zinc-200 bg-cover bg-center shrink-0",style:Ve(P.avatar?{backgroundImage:`url(${P.avatar})`}:{})},[P.avatar?M("",!0):(d(),f("span",Yk,w(P.type==="group"?"groups":"person"),1))],4),t("div",Jk,[t("span",Xk,w(P.name),1),t("span",{class:W(["text-[10px] uppercase tracking-wider",(gt(P.id),"text-zinc-400")])},w(P.type==="group"?"":""),3)])]),t("div",{class:W(["w-5 h-5 rounded flex items-center justify-center transition-colors",gt(P.id)?"bg-white":"border border-zinc-300"])},[gt(P.id)?(d(),f("span",Qk,"check")):M("",!0)],2)],10,Gk))),128))]))]),t("div",Zk,[t("button",{onClick:h[38]||(h[38]=P=>g.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[I.value?(d(),f("div",e4,[t("div",t4,[t("div",s4,[h[95]||(h[95]=t("div",{class:"flex flex-col"},[t("span",{class:"font-serif italic text-lg"},"Regex "),t("span",{class:"text-[9px] uppercase tracking-widest text-zinc-400"},"Regex Mount")],-1)),t("button",{onClick:h[39]||(h[39]=P=>I.value=!1),class:"material-symbols-outlined text-zinc-400 hover:text-black"},"close")]),t("div",n4,[t("div",o4,[h[97]||(h[97]=t("span",{class:"block text-[10px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),t("p",l4,[t("span",i4,w(at(k).regexCategories.filter(P=>P.scope==="global").length),1),h[96]||(h[96]=ns("  ",-1))])]),D.value.length===0?(d(),f("div",a4,[...h[98]||(h[98]=[t("span",{class:"material-symbols-outlined text-[32px] text-zinc-200 mb-2"},"style",-1),t("p",{class:"text-[13px] text-zinc-400"}," Local ",-1),t("p",{class:"text-[11px] text-zinc-300 mt-1"}," Regex Manager  Scope  Local ",-1)])])):(d(),f("div",r4,[(d(!0),f(oe,null,ye(D.value,P=>(d(),f("div",{key:P.id,class:"bg-zinc-50 rounded-xl overflow-hidden"},[t("button",{onClick:me=>wt(P.id),class:"w-full flex items-center justify-between p-4 hover:bg-zinc-100 transition-colors"},[t("div",d4,[t("span",{class:W(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",Vt(P.id)?"rotate-90":""])},"chevron_right",2),t("span",u4,w(P.name),1),t("span",p4,w(Pt(P.id).length)+" local",1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[40]||(h[40]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:qe(P.id),onChange:me=>Fe(P.id)},null,40,f4),t("div",{class:W(["w-[36px] h-[20px] rounded-full transition-colors duration-200",qe(P.id)?"bg-black":"bg-zinc-200"])},[t("div",{class:W(["absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full transition-transform duration-200 shadow-sm",qe(P.id)?"translate-x-4":""])},null,2)],2)])],8,c4),Vt(P.id)?(d(),f("div",v4,[Pt(P.id).length===0?(d(),f("div",x4," No entries in this pack ")):M("",!0),(d(!0),f(oe,null,ye(Pt(P.id),me=>(d(),f("div",{key:me.id,class:"flex items-center justify-between py-3 border-b border-zinc-100 last:border-b-0"},[t("div",b4,[t("span",m4,w(me.name),1),t("code",g4,w(me.regex),1)]),t("label",{class:"relative inline-flex items-center cursor-pointer",onClick:h[41]||(h[41]=je(()=>{},["stop"]))},[t("input",{type:"checkbox",class:"sr-only",checked:qe(P.id)||qe(me.id),disabled:qe(P.id),onChange:Ms=>!qe(P.id)&&Fe(me.id)},null,40,h4),t("div",{class:W(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",qe(P.id)||qe(me.id)?"bg-black border-black":"bg-transparent"])},[qe(P.id)||qe(me.id)?(d(),f("span",y4,"check")):M("",!0)],2)])]))),128))])):M("",!0)]))),128))]))]),t("div",w4,[t("button",{onClick:h[42]||(h[42]=P=>I.value=!1),class:"px-6 py-2 bg-black text-white text-[12px] font-bold tracking-widest uppercase rounded-full hover:bg-neutral-800 transition-colors"},"  ")])])])):M("",!0)]))]))}},_4=rt(k4,[["__scopeId","data-v-1543b7a6"]]),z4={class:"h-full flex flex-col bg-zinc-50 text-black font-sans"},$4={class:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50"},C4={class:"flex items-center justify-between px-4 pt-[calc(12px_+_env(safe-area-inset-top))] pb-3 max-w-lg mx-auto w-full"},S4={key:0,class:"w-full max-w-lg mx-auto px-4 pb-32 flex-1 overflow-y-auto scrollbar-hide pt-6"},I4={class:"space-y-6"},M4={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},T4={class:"px-5 py-3 border-b border-gray-50 flex items-center justify-between bg-white"},E4={class:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-zinc-50 border border-zinc-100"},j4={class:"text-[10px] font-medium text-zinc-600"},A4={class:"p-5 flex flex-col gap-6"},O4={class:"relative"},P4=["value"],R4={class:"flex items-start gap-4"},N4={class:"relative group shrink-0"},L4={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},D4=["src"],V4={class:"flex-1 space-y-3 pt-1"},B4={class:"relative"},U4=["placeholder"],F4={class:"relative"},W4={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},K4={class:"px-5 py-3 border-b border-gray-50 bg-white"},H4={class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},G4={class:"p-5 flex items-start gap-4"},q4={class:"relative group shrink-0"},Y4={class:"size-16 rounded-full bg-zinc-100 border border-gray-100 overflow-hidden shadow-sm transition-transform active:scale-95 cursor-pointer"},J4=["src"],X4={class:"flex-1 space-y-3 pt-1"},Q4={class:"relative"},Z4=["placeholder"],e5={class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},t5={class:"relative"},s5={key:0,class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},n5={class:"divide-y divide-gray-50"},o5={class:"relative size-10 rounded-full bg-zinc-100 shrink-0 border border-gray-100 overflow-hidden cursor-pointer group-hover:border-zinc-300 transition-colors"},l5=["src"],i5=["onChange"],a5={class:"flex-1 flex flex-col gap-2"},r5=["onUpdate:modelValue","placeholder"],c5=["onUpdate:modelValue"],d5={class:"shrink-0 flex flex-col items-end"},u5={class:"text-[9px] font-mono text-zinc-300 bg-zinc-100 px-1.5 py-0.5 rounded"},p5={class:"bg-white rounded-2xl shadow-[0_2px_8px_-2px_rgba(0,0,0,0.05)] border border-gray-100 overflow-hidden"},f5={class:"divide-y divide-gray-50"},v5={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},x5={class:"relative inline-flex items-center cursor-pointer"},b5={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},m5={class:"relative inline-flex items-center cursor-pointer"},g5={class:"px-5 py-4 flex items-center justify-between group hover:bg-zinc-50/30 transition-colors"},h5={class:"flex bg-zinc-100 rounded-lg p-1 gap-1"},y5={__name:"ChatSettingsIdentity",props:["chatId"],emits:["back"],setup(e,{emit:s}){const n=e,o=C(null),l=C(""),i=be(()=>k.personas),a=C({showSelfAvatar:!0,showOtherAvatar:!0,avatarShape:"circle",myActivePersonaId:"",myNicknameOverride:"",myAvatarOverride:"",theirNicknameOverride:"",theirAvatarOverride:"",groupNameOverride:"",groupAvatarOverride:""});Dt(async()=>{const E=gl(n.chatId);if(E){o.value=E;const T=k.contacts.find(O=>O.id===E.id);l.value=T?.avatar||E.avatar||"",E.localSettings?(E.localSettings.showAvatars===!1&&(a.value.showSelfAvatar=!1,a.value.showOtherAvatar=!1),a.value={...a.value,...E.localSettings}):a.value.myActivePersonaId=k.activePersonaId}});const r=(E,T)=>{const O=E.target.files[0];if(!O)return;const A=new FileReader;A.onload=R=>{const Y=R.target.result;T==="myAvatarOverride"?a.value.myAvatarOverride=Y:T==="remote"&&(o.value.type==="group"||o.value.isGroup?a.value.groupAvatarOverride=Y:a.value.theirAvatarOverride=Y)},A.readAsDataURL(O)};let p=null;const b=async()=>{if(!o.value)return;let E;try{const O=Ne(o.value);E=JSON.parse(JSON.stringify(O))}catch(O){console.error("Failed to clone conversation for save",O);return}const T={...E,localSettings:{...Ne(a.value)}};(o.value.type==="group"||o.value.isGroup)&&(a.value.groupNameOverride&&(T.title=a.value.groupNameOverride),a.value.groupAvatarOverride&&(T.avatar=a.value.groupAvatarOverride)),await Vn(T),Object.assign(o.value,T)};ds(a,()=>{p&&clearTimeout(p),p=setTimeout(b,500)},{deep:!0});const u=be(()=>o.value?k.contacts.find(E=>E.id===o.value.id):null),v=be(()=>{if(!o.value)return"https://via.placeholder.com/150";const E=o.value.type==="group"||o.value.isGroup?a.value.groupAvatarOverride:a.value.theirAvatarOverride;return E||u.value?.avatar||o.value.avatar||"https://via.placeholder.com/150"}),g=be(()=>{const E=a.value.myActivePersonaId||k.activePersonaId;return k.personas.find(T=>T.id===E)||k.personas[0]||{}}),j=be({get(){return o.value?o.value.type==="group"||o.value.isGroup?a.value.groupNameOverride:a.value.theirNicknameOverride:""},set(E){o.value&&(o.value.type==="group"||o.value.isGroup?a.value.groupNameOverride=E:a.value.theirNicknameOverride=E)}}),U=be(()=>o.value?.members?o.value.members.map(E=>k.contacts.find(T=>T.id===E)).filter(Boolean):[]),N=E=>(a.value.memberOverrides||(a.value.memberOverrides={}),a.value.memberOverrides[E]||(a.value.memberOverrides[E]={nickname:"",avatar:""}),a.value.memberOverrides[E]),L=(E,T)=>{const O=E.target.files[0];if(!O)return;const A=new FileReader;A.onload=R=>{const Y=R.target.result,we=N(T);we.avatar=Y},A.readAsDataURL(O)},S=E=>E==="square"?"rounded-none":"rounded-full";return(E,T)=>(d(),f("div",z4,[t("header",$4,[t("div",C4,[t("button",{onClick:T[0]||(T[0]=O=>E.$emit("back")),class:"flex items-center justify-center size-10 -ml-2 text-zinc-600 hover:text-black hover:bg-zinc-100 rounded-full transition-all active:scale-95"},[...T[13]||(T[13]=[t("span",{class:"material-symbols-outlined text-[20px]"},"arrow_back",-1)])]),T[14]||(T[14]=t("h1",{class:"font-serif text-[15px] font-semibold tracking-wider uppercase text-center text-zinc-800"},"",-1)),T[15]||(T[15]=t("div",{class:"w-8"},null,-1))])]),o.value?(d(),f("main",S4,[t("div",I4,[t("section",M4,[t("div",T4,[T[17]||(T[17]=t("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"",-1)),t("div",E4,[T[16]||(T[16]=t("div",{class:"size-1.5 rounded-full bg-emerald-500"},null,-1)),t("span",j4,w(at(k).personas.find(O=>O.id===a.value.myActivePersonaId)?.name||""),1)])]),t("div",A4,[t("div",O4,[ie(t("select",{"onUpdate:modelValue":T[1]||(T[1]=O=>a.value.myActivePersonaId=O),class:"w-full appearance-none bg-zinc-50 border border-gray-200 rounded-xl px-4 py-3 text-[13px] font-medium text-zinc-700 outline-none focus:border-zinc-400 focus:bg-white transition-all"},[(d(!0),f(oe,null,ye(i.value,O=>(d(),f("option",{key:O.id,value:O.id},w(O.name)+" ("+w(O.handle)+") ",9,P4))),128))],512),[[Ln,a.value.myActivePersonaId]]),T[18]||(T[18]=t("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-[18px] pointer-events-none"},"unfold_more",-1))]),t("div",R4,[t("div",N4,[t("div",L4,[t("img",{src:a.value.myAvatarOverride||g.value?.avatar,class:W(["w-full h-full object-cover",S(a.value.avatarShape)])},null,10,D4),T[19]||(T[19]=t("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[t("span",{class:"material-symbols-outlined text-white text-[20px]"},"photo_camera")],-1))]),t("input",{type:"file",accept:"image/*",onChange:T[2]||(T[2]=O=>r(O,"myAvatarOverride")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),t("div",V4,[t("div",B4,[ie(t("input",{type:"text","onUpdate:modelValue":T[3]||(T[3]=O=>a.value.myNicknameOverride=O),placeholder:g.value?.handle||g.value?.name,class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,U4),[[pe,a.value.myNicknameOverride]]),T[20]||(T[20]=t("label",{class:"absolute -top-3 left-0 text-[9px] text-zinc-400 font-medium uppercase tracking-wider"},"Display Name",-1))]),t("div",F4,[ie(t("input",{type:"text","onUpdate:modelValue":T[4]||(T[4]=O=>a.value.myAvatarOverride=O),placeholder:"Paste Image URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512),[[pe,a.value.myAvatarOverride]])])])])])]),t("section",W4,[t("div",K4,[t("span",H4,w(o.value.type==="group"||o.value.isGroup?"":""),1)]),t("div",G4,[t("div",q4,[t("div",Y4,[t("img",{src:v.value,class:W(["w-full h-full object-cover",S(a.value.avatarShape)])},null,10,J4),T[21]||(T[21]=t("div",{class:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-[1px]"},[t("span",{class:"material-symbols-outlined text-white text-[20px]"},"edit")],-1))]),t("input",{type:"file",accept:"image/*",onChange:T[5]||(T[5]=O=>r(O,"remote")),class:"absolute inset-0 opacity-0 cursor-pointer text-[0]",title:""},null,32)]),t("div",X4,[t("div",Q4,[ie(t("input",{type:"text","onUpdate:modelValue":T[6]||(T[6]=O=>j.value=O),placeholder:u.value?.handle||u.value?.name||o.value.handle||o.value.title||o.value.name||"",class:"w-full bg-transparent border-b border-gray-200 py-1 font-serif text-[16px] text-zinc-900 placeholder:text-zinc-300 focus:outline-none focus:border-black transition-colors"},null,8,Z4),[[pe,j.value]]),t("label",e5,w(o.value.type==="group"||o.value.isGroup?"Group Name":"Alias (Local)"),1)]),t("div",t5,[o.value.type==="group"||o.value.isGroup?ie((d(),f("input",{key:0,type:"text","onUpdate:modelValue":T[7]||(T[7]=O=>a.value.groupAvatarOverride=O),placeholder:"Group Icon URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[pe,a.value.groupAvatarOverride]]):ie((d(),f("input",{key:1,type:"text","onUpdate:modelValue":T[8]||(T[8]=O=>a.value.theirAvatarOverride=O),placeholder:"Avatar URL...",class:"w-full bg-zinc-50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded-lg py-1.5 px-3 text-[11px] text-zinc-600 outline-none transition-all placeholder:text-zinc-300"},null,512)),[[pe,a.value.theirAvatarOverride]])])])])]),(o.value.type==="group"||o.value.isGroup)&&o.value.members?.length?(d(),f("section",s5,[T[23]||(T[23]=t("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[t("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),t("div",n5,[(d(!0),f(oe,null,ye(U.value,O=>(d(),f("div",{key:O.id,class:"p-4 flex items-start gap-3 hover:bg-zinc-50/50 transition-colors group"},[t("div",o5,[t("img",{src:a.value.memberOverrides?.[O.id]?.avatar||O.avatar,class:W(["w-full h-full object-cover",S(a.value.avatarShape)])},null,10,l5),T[22]||(T[22]=t("div",{class:"absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[t("span",{class:"material-symbols-outlined text-white text-[14px]"},"edit")],-1)),t("input",{type:"file",accept:"image/*",onChange:A=>L(A,O.id),class:"absolute inset-0 opacity-0 cursor-pointer z-10",title:""},null,40,i5)]),t("div",a5,[ie(t("input",{type:"text","onUpdate:modelValue":A=>N(O.id).nickname=A,placeholder:O.handle||O.name,class:"w-full bg-transparent text-[14px] font-medium text-zinc-800 placeholder:text-zinc-300 focus:outline-none focus:border-b focus:border-zinc-300 transition-colors py-0.5"},null,8,r5),[[pe,N(O.id).nickname]]),ie(t("input",{type:"text","onUpdate:modelValue":A=>N(O.id).avatar=A,placeholder:"Avatar URL...",class:"w-full bg-zinc-50/50 border border-transparent hover:border-zinc-200 focus:border-zinc-300 rounded px-2 py-1 text-[10px] text-zinc-500 max-w-[90%] outline-none transition-all placeholder:text-zinc-300"},null,8,c5),[[pe,N(O.id).avatar]])]),t("div",d5,[t("span",u5,w(O.handle),1)])]))),128))])])):M("",!0),t("section",p5,[T[31]||(T[31]=t("div",{class:"px-5 py-3 border-b border-gray-50 bg-white"},[t("span",{class:"text-[10px] font-bold tracking-[0.15em] uppercase text-zinc-400"},"")],-1)),t("div",f5,[t("div",v5,[T[25]||(T[25]=t("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),t("label",x5,[ie(t("input",{"onUpdate:modelValue":T[9]||(T[9]=O=>a.value.showSelfAvatar=O),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[Ds,a.value.showSelfAvatar]]),T[24]||(T[24]=t("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),t("div",b5,[T[27]||(T[27]=t("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),t("label",m5,[ie(t("input",{"onUpdate:modelValue":T[10]||(T[10]=O=>a.value.showOtherAvatar=O),type:"checkbox",class:"sr-only noir-toggle"},null,512),[[Ds,a.value.showOtherAvatar]]),T[26]||(T[26]=t("div",{class:"noir-toggle-bg w-[36px] h-[20px] bg-zinc-200 rounded-full transition-colors duration-300 ease-out border border-transparent"},[t("div",{class:"noir-toggle-dot absolute top-[2px] left-[2px] w-[16px] h-[16px] bg-white rounded-full shadow-sm transition-transform duration-300"})],-1))])]),t("div",g5,[T[30]||(T[30]=t("span",{class:"text-[14px] font-medium text-zinc-700"},"",-1)),t("div",h5,[t("button",{onClick:T[11]||(T[11]=O=>a.value.avatarShape="circle"),class:W(["size-7 rounded-md flex items-center justify-center transition-all",a.value.avatarShape==="circle"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...T[28]||(T[28]=[t("div",{class:"w-3 h-3 rounded-full border-[1.5px] border-current"},null,-1)])],2),t("button",{onClick:T[12]||(T[12]=O=>a.value.avatarShape="square"),class:W(["size-7 rounded-md flex items-center justify-center transition-all",a.value.avatarShape==="square"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-zinc-600"])},[...T[29]||(T[29]=[t("div",{class:"w-3 h-3 border-[1.5px] border-current rounded-[1px]"},null,-1)])],2)])])])])])])):M("",!0)]))}},w5=rt(y5,[["__scopeId","data-v-9a42c415"]]),k5={class:"h-full flex flex-col bg-white text-black font-sans"},_5={class:"sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100"},z5={class:"flex items-center justify-between px-6 pt-[calc(10px_+_env(safe-area-inset-top))] pb-3 w-full"},$5={class:"w-full px-8 pb-32 flex-1 overflow-y-auto"},C5={class:"mt-8 mb-10 p-6 bg-gray-50 rounded-xl border border-dashed border-gray-200 text-center"},S5={class:"text-[14px] text-zinc-600"},I5={class:"font-bold text-black"},M5={class:"flex flex-col gap-10"},T5={class:"flex items-center justify-between py-2 border-b-2 border-black mb-4"},E5={class:"font-serif text-[18px] tracking-tight font-bold"},j5={class:"relative inline-flex items-center cursor-pointer"},A5=["checked","onChange"],O5={class:"noir-toggle-bg w-8 h-4 bg-zinc-200 rounded-full transition-colors duration-300"},P5={class:"flex flex-col gap-1"},R5={class:"flex flex-col"},N5={class:"text-[14px] font-medium group-hover:text-black text-zinc-700 transition-colors"},L5={class:"text-[10px] text-zinc-400 uppercase tracking-wider"},D5={class:"relative inline-flex items-center cursor-pointer"},V5=["checked","disabled","onChange"],B5={key:0,class:"material-symbols-outlined text-white text-[14px] font-bold"},U5={key:0,class:"py-2 text-center text-zinc-300 text-[12px] italic"},F5={__name:"WorldBookSelector",props:["chatId"],emits:["back"],setup(e,{emit:s}){const n=e,o=wo(),l=be(()=>gl(n.chatId)),i=C([]);Dt(()=>{l.value?.localSettings?.mountedWorldbooks&&(i.value=[...l.value.localSettings.mountedWorldbooks])});const a=be(()=>o.state.categories),r=be(()=>o.state.entries),p=U=>r.value.filter(N=>N.categoryId===U),b=U=>{const N=i.value.indexOf(U);N===-1?i.value.push(U):i.value.splice(N,1),g()},u=U=>i.value.includes(U),v=U=>{b(U)},g=async()=>{if(l.value){const U=l.value.localSettings||{};await Vn({id:n.chatId,localSettings:{...U,mountedWorldbooks:i.value}})}},j=be(()=>r.value.filter(U=>U.scope==="global").length);return(U,N)=>(d(),f("div",k5,[t("header",_5,[t("div",z5,[t("button",{onClick:N[0]||(N[0]=L=>U.$emit("back")),class:"flex items-center justify-center -ml-2 w-10 h-10 hover:bg-gray-100 rounded-full transition-colors"},[...N[1]||(N[1]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),N[2]||(N[2]=t("h1",{class:"font-serif text-[18px] font-light tracking-[0.15em] uppercase text-center flex-1 pr-8"},"",-1)),N[3]||(N[3]=t("div",{class:"w-8 hidden"},null,-1))])]),t("main",$5,[t("div",C5,[N[5]||(N[5]=t("span",{class:"block text-[12px] text-zinc-400 mb-1 tracking-wider uppercase"},"Global Scope",-1)),t("p",S5,[t("span",I5,w(j.value),1),N[4]||(N[4]=ns("  ",-1))])]),t("div",M5,[(d(!0),f(oe,null,ye(a.value,L=>(d(),f("div",{key:L.id,class:"flex flex-col"},[t("div",T5,[t("span",E5,w(L.name),1),t("label",j5,[t("input",{type:"checkbox",class:"sr-only noir-toggle",checked:u(L.id),onChange:S=>v(L.id)},null,40,A5),t("div",O5,[t("div",{class:W(["noir-toggle-bg-thumb absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full transition-transform duration-300 shadow-sm",u(L.id)?"translate-x-4":""])},null,2)])])]),t("div",P5,[(d(!0),f(oe,null,ye(p(L.id).filter(S=>S.scope==="local"),S=>(d(),f("div",{key:S.id,class:"flex items-center justify-between py-3 px-2 hover:bg-gray-50 rounded-lg transition-colors group"},[t("div",R5,[t("span",N5,w(S.title),1),t("span",L5,w(S.isConstant?"Constant":"Trigger")+"  "+w(S.position),1)]),t("label",D5,[t("input",{type:"checkbox",class:"sr-only",checked:u(L.id)||u(S.id),disabled:u(L.id),onChange:E=>!u(L.id)&&b(S.id)},null,40,V5),t("div",{class:W(["w-5 h-5 border border-zinc-300 rounded flex items-center justify-center transition-colors",u(L.id)||u(S.id)?"bg-black border-black":"bg-transparent"])},[u(L.id)||u(S.id)?(d(),f("span",B5,"check")):M("",!0)],2)])]))),128)),p(L.id).filter(S=>S.scope==="local").length===0?(d(),f("div",U5," No local entries ")):M("",!0)])]))),128))]),N[6]||(N[6]=t("div",{class:"h-20"},null,-1))])]))}},W5=rt(F5,[["__scopeId","data-v-623fc9e7"]]),K5={class:"relationship-network w-full h-full flex flex-col bg-white relative overflow-hidden"},H5={class:"h-[calc(3.5rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 z-30 bg-white/80 backdrop-blur sticky top-0"},G5={class:"flex items-center w-full justify-between"},q5={class:"material-symbols-outlined text-zinc-600 text-[20px]"},Y5=["viewBox"],J5=["onClick"],X5=["x1","y1","x2","y2"],Q5=["x1","y1","x2","y2","stroke-dasharray"],Z5=["x","y"],e3={class:"flex justify-center"},t3={class:"bg-white border border-zinc-200 px-2 py-0.5 rounded-full text-[10px] text-center font-bold text-zinc-500 group-hover:text-black group-hover:border-black transition-colors shadow-sm whitespace-nowrap"},s3={class:"absolute inset-0 w-full h-full pointer-events-none z-20"},n3=["title"],o3=["src"],l3={class:"absolute -bottom-6 bg-black text-white text-[10px] px-3 py-1 rounded-full uppercase font-bold tracking-widest whitespace-nowrap shadow-lg z-30"},i3=["title","onClick"],a3=["src"],r3={class:"absolute top-full mt-3 left-1/2 -translate-x-1/2 text-[11px] text-zinc-700 font-bold whitespace-nowrap bg-white/90 backdrop-blur px-2 py-0.5 rounded border border-zinc-100 shadow-sm z-30 pointer-events-none"},c3={class:"bg-white p-8 shadow-2xl rounded-2xl w-96 max-w-full flex flex-col gap-6 animate-in fade-in zoom-in duration-200"},d3={class:"bg-zinc-50 px-4 py-3 rounded-xl border border-zinc-100 focus-within:border-black focus-within:ring-1 focus-within:ring-black transition-all"},u3={class:"bg-white p-6 shadow-2xl rounded-2xl w-[400px] max-w-full flex flex-col gap-4 max-h-[80vh] animate-in fade-in slide-in-from-bottom-4 duration-300"},p3={class:"flex-1 overflow-y-auto custom-scrollbar px-1 space-y-5"},f3={class:"space-y-2"},v3=["onClick"],x3=["src"],b3={class:"flex flex-col flex-1"},m3={class:"text-sm font-bold text-zinc-900"},g3={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},h3={key:1,class:"ml-2"},y3={key:0,class:"text-[9px] bg-zinc-900 text-white px-2 py-0.5 rounded-full font-bold"},w3={key:0},k3={class:"space-y-2"},_3=["onClick"],z3=["src"],$3={class:"flex flex-col flex-1"},C3={class:"text-sm font-bold text-zinc-900"},S3={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-black rounded-full flex items-center justify-center text-white"},I3={key:1,class:"ml-2"},M3={key:0,class:"text-[9px] bg-zinc-200 text-zinc-600 px-2 py-0.5 rounded-full font-bold"},T3={class:"flex gap-3 mt-2 shrink-0 pt-4 border-t border-zinc-50"},E3={key:1,class:"flex-1 py-3 bg-zinc-100 text-zinc-400 font-bold text-sm cursor-default rounded-xl"},j3={class:"flex flex-col h-full overflow-hidden"},A3={class:"p-5 border-b border-zinc-50 flex justify-between items-center sm:hidden"},O3={class:"flex-1 p-5 flex flex-col overflow-hidden"},P3={class:"font-serif text-xs font-bold tracking-widest text-zinc-400 uppercase mb-6 flex justify-between items-center"},R3={class:"bg-zinc-100 text-zinc-500 px-2 py-0.5 rounded-full text-[10px] font-bold"},N3={class:"space-y-4 overflow-y-auto flex-1 pr-1 custom-scrollbar pb-10"},L3=["onClick"],D3=["src"],V3={class:"text-sm font-bold text-zinc-700 truncate group-hover:text-black transition-colors"},B3=["onClick"],eo=2e3,U3={__name:"RelationshipNetwork",emits:["back"],setup(e,{emit:s}){const n=C(!1),o=C(null),l=C(""),i=C(!1),a=C(!1),r=C(null),p=C(null),b=C(0),u=C(0),v=C(!1),g=C(0),j=C(0),U=C(1),N=eo/2,L=K=>{K.target.tagName!=="svg"&&K.target.tagName!=="DIV"&&!K.target.classList.contains("canvas-area")||(v.value=!0,K.type==="touchstart"?(g.value=K.touches[0].clientX,j.value=K.touches[0].clientY):(g.value=K.clientX,j.value=K.clientY))},S=K=>{if(!v.value)return;let I,y;K.type==="touchmove"?(I=K.touches[0].clientX,y=K.touches[0].clientY):(I=K.clientX,y=K.clientY);const z=I-g.value,D=y-j.value;b.value+=z,u.value+=D,g.value=I,j.value=y},E=()=>{v.value=!1};Dt(()=>{b.value=-N+window.innerWidth/2,u.value=-N+window.innerHeight/2,window.addEventListener("mousemove",S),window.addEventListener("mouseup",E),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",E)}),Ci(()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",E),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",E)});const T=be(()=>{const K=k.personas,I=k.relationships,y=k.contacts,z=K.map((xe,We)=>{const ot=K.length||1,Mt=150,ct=We/ot*2*Math.PI-Math.PI/2;return{...xe,nodeType:"persona",x:N+Mt*Math.cos(ct),y:N+Mt*Math.sin(ct)}}),D=new Set;I.forEach(xe=>{D.add(xe.sourceId),D.add(xe.targetId)});const ue=y.filter(xe=>D.has(xe.id)).map(xe=>{const We=I.filter(ct=>ct.sourceId===xe.id||ct.targetId===xe.id);let ot=0,Mt=350;if(We.length>0){let ct=0,Tt=0,At=0;We.forEach(yt=>{const Ot=yt.sourceId===xe.id?yt.targetId:yt.sourceId,qt=z.find(_=>_.id===Ot);qt&&(ct+=qt.x-N,Tt+=qt.y-N,At++)}),At>0?(ot=Math.atan2(Tt,ct),At>1&&(Mt=250)):ot=xe.id.split("").reduce((Ot,qt)=>Ot+qt.charCodeAt(0),0)%360*(Math.PI/180)}else ot=xe.id.split("").reduce((Tt,At)=>Tt+At.charCodeAt(0),0)%360*(Math.PI/180);return{...xe,displayName:xe.handle||xe.nickname||xe.name,nodeType:"contact",idealAngle:ot,radius:Mt,x:0,y:0}});ue.sort((xe,We)=>xe.idealAngle-We.idealAngle);for(let xe=0;xe<ue.length;xe++){const We=ue[xe];if(xe>0){const ot=ue[xe-1],Mt=80/We.radius;let ct=We.idealAngle-ot.idealAngle;for(;ct<0;)ct+=Math.PI*2;ct<Mt&&(We.idealAngle=ot.idealAngle+Mt)}}ue.forEach(xe=>{xe.x=N+xe.radius*Math.cos(xe.idealAngle),xe.y=N+xe.radius*Math.sin(xe.idealAngle)});const F=[...z,...ue],ve=I.map(xe=>{const We=F.find(Mt=>Mt.id===xe.sourceId),ot=F.find(Mt=>Mt.id===xe.targetId);return We&&ot?{...xe,x1:We.x,y1:We.y,x2:ot.x,y2:ot.y,isCharChar:We.nodeType==="contact"&&ot.nodeType==="contact"}:null}).filter(Boolean);return{personaNodes:z,contactNodes:ue,links:ve}}),O=K=>{o.value=K,l.value=K.type,i.value=!0},A=async()=>{o.value&&l.value.trim()&&(await Cc(o.value.id,l.value.trim()),i.value=!1,o.value=null)},R=async()=>{o.value&&confirm("")&&(await vf(o.value.id),i.value=!1,o.value=null)},Y=K=>{r.value=K,p.value=null,a.value=!0},we=async()=>{if(r.value&&p.value){if(k.relationships.find(y=>y.sourceId===p.value&&y.targetId===r.value||y.sourceId===r.value&&y.targetId===p.value)){alert("");return}const I="";await $c(p.value,r.value,I),a.value=!1,setTimeout(()=>{const y=k.relationships.find(z=>z.sourceId===p.value&&z.targetId===r.value&&z.type===I);y&&(o.value=y,l.value="",i.value=!0)},100),r.value=null}},ce=(K,I)=>{const y=k.relationships.find(z=>z.sourceId===K&&z.targetId===I||z.sourceId===I&&z.targetId===K);return y?y.type:null},ze=be(()=>k.contacts),Ee=be(()=>r.value?k.contacts.filter(K=>K.id!==r.value):[]),se=K=>K.handle||K.nickname||K.name;return(K,I)=>(d(),f("div",K5,[t("header",H5,[t("div",G5,[t("button",{onClick:I[0]||(I[0]=y=>K.$emit("back")),class:"w-10 h-10 -ml-2 flex items-center justify-center hover:bg-zinc-100/50 rounded-full transition-colors"},[...I[7]||(I[7]=[t("span",{class:"material-symbols-outlined text-[18px]"},"arrow_back_ios_new",-1)])]),I[8]||(I[8]=t("span",{class:"font-bold tracking-[0.2em] text-[13px] uppercase text-zinc-900 absolute left-1/2 -translate-x-1/2"}," (NETWORK)",-1)),t("button",{onClick:I[1]||(I[1]=y=>n.value=!n.value),class:"sm:hidden p-2 -mr-2 rounded-full hover:bg-zinc-100"},[t("span",q5,w(n.value?"close":"group_add"),1)]),I[9]||(I[9]=t("div",{class:"w-10 h-10 hidden sm:block"},null,-1))])]),t("div",{class:"flex-1 overflow-hidden relative bg-zinc-50 cursor-move",onMousedown:L,onTouchstart:L},[t("div",{class:"absolute top-0 left-0 w-full h-full canvas-area",style:Ve({transform:`translate(${b.value}px, ${u.value}px) scale(${U.value})`,transformOrigin:"0 0"})},[t("div",{class:"relative",style:Ve({width:`${eo}px`,height:`${eo}px`})},[I[10]||(I[10]=t("div",{class:"absolute inset-0 opacity-10 pointer-events-none",style:{"background-image":"radial-gradient(#000 1px, transparent 1px)","background-size":"20px 20px"}},null,-1)),(d(),f("svg",{class:"absolute inset-0 w-full h-full pointer-events-none z-10",viewBox:`0 0 ${eo} ${eo}`},[(d(!0),f(oe,null,ye(T.value.links,y=>(d(),f("g",{key:y.id,class:"pointer-events-auto cursor-pointer group",onClick:je(z=>O(y),["stop"])},[t("line",{x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,stroke:"transparent","stroke-width":"40"},null,8,X5),t("line",{x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,class:"stroke-zinc-300 stroke-1 group-hover:stroke-black transition-colors","stroke-dasharray":y.isCharChar?"8 4":"0"},null,8,Q5),(d(),f("foreignObject",{x:(y.x1+y.x2)/2-50,y:(y.y1+y.y2)/2-12,width:"100",height:"24",class:"overflow-visible pointer-events-none"},[t("div",e3,[t("span",t3,w(y.type),1)])],8,Z5))],8,J5))),128))],8,Y5)),t("div",s3,[(d(!0),f(oe,null,ye(T.value.personaNodes,y=>(d(),f("div",{key:y.id,class:"absolute w-20 h-20 -ml-10 -mt-10 rounded-full border-4 border-white ring-1 ring-zinc-200 bg-white flex items-center justify-center shadow-xl pointer-events-auto transition-transform hover:scale-110",style:Ve({left:`${y.x}px`,top:`${y.y}px`}),title:y.name},[t("img",{src:y.avatar,class:"w-full h-full rounded-full object-cover"},null,8,o3),t("div",l3,"  ("+w(y.handle)+") ",1)],12,n3))),128)),(d(!0),f(oe,null,ye(T.value.contactNodes,y=>(d(),f("div",{key:y.id,class:"absolute w-14 h-14 -ml-7 -mt-7 rounded-full border-2 border-white ring-1 ring-zinc-200 bg-white p-0.5 pointer-events-auto cursor-pointer hover:ring-black hover:shadow-xl transition-all flex items-center justify-center group",style:Ve({left:`${y.x}px`,top:`${y.y}px`}),title:y.displayName,onClick:je(z=>Y(y.id),["stop"])},[t("img",{src:y.avatar,class:"w-full h-full rounded-full object-cover"},null,8,a3),t("span",r3,w(y.displayName),1)],12,i3))),128))])],4)],4),I[11]||(I[11]=t("div",{class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] right-6 text-zinc-300 text-xs font-serif tracking-widest pointer-events-none select-none z-20"}," UNIFIED NETWORK   ",-1))],32),i.value?(d(),f("div",{key:0,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:I[3]||(I[3]=je(y=>i.value=!1,["self"]))},[t("div",c3,[I[12]||(I[12]=t("div",{class:"text-center"},[t("h3",{class:"font-bold text-lg text-zinc-900"}," (Define Link)"),t("p",{class:"text-zinc-500 text-xs mt-1"},"")],-1)),t("div",d3,[ie(t("input",{"onUpdate:modelValue":I[2]||(I[2]=y=>l.value=y),ref:"typeInput",placeholder:"...",class:"bg-transparent border-none w-full text-center font-bold text-xl focus:ring-0 p-0 text-zinc-900 placeholder:text-zinc-300",onKeyup:xs(A,["enter"]),autofocus:""},null,544),[[pe,l.value]])]),t("div",{class:"grid grid-cols-2 gap-3"},[t("button",{onClick:R,class:"py-3 bg-white text-red-500 border border-zinc-200 hover:border-red-200 hover:bg-red-50 font-bold text-sm rounded-xl transition-all shadow-sm"},"  "),t("button",{onClick:A,class:"py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg shadow-zinc-200"},"  ")])])])):M("",!0),a.value?(d(),f("div",{key:1,class:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center backdrop-blur-sm px-4",onClick:I[5]||(I[5]=je(y=>a.value=!1,["self"]))},[t("div",u3,[I[17]||(I[17]=t("div",{class:"shrink-0 text-center pb-2 border-b border-zinc-50"},[t("h3",{class:"font-bold text-base text-zinc-900"}," (Connect)")],-1)),t("div",p3,[t("div",null,[I[14]||(I[14]=t("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (ME)",-1)),t("div",f3,[(d(!0),f(oe,null,ye(at(k).personas,y=>(d(),f("div",{key:y.id,onClick:z=>p.value=y.id,class:W(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",p.value===y.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[t("img",{src:y.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,x3),t("div",b3,[t("span",m3,w(y.handle),1)]),p.value===y.id?(d(),f("div",g3,[...I[13]||(I[13]=[t("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(d(),f("div",h3,[ce(r.value,y.id)?(d(),f("span",y3,w(ce(r.value,y.id)),1)):M("",!0)]))],10,v3))),128))])]),Ee.value.length>0?(d(),f("div",w3,[I[16]||(I[16]=t("h4",{class:"text-[10px] text-zinc-400 uppercase font-black tracking-widest mb-3"}," (OTHERS)",-1)),t("div",k3,[(d(!0),f(oe,null,ye(Ee.value,y=>(d(),f("div",{key:y.id,onClick:z=>p.value=y.id,class:W(["flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden group",p.value===y.id?"border-black bg-zinc-50 ring-1 ring-black/5":"border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50"])},[t("img",{src:y.avatar,class:"w-10 h-10 rounded-full object-cover bg-zinc-200 shadow-sm"},null,8,z3),t("div",$3,[t("span",C3,w(se(y)),1)]),p.value===y.id?(d(),f("div",S3,[...I[15]||(I[15]=[t("span",{class:"material-symbols-outlined text-[14px] font-bold"},"check",-1)])])):(d(),f("div",I3,[ce(r.value,y.id)?(d(),f("span",M3,w(ce(r.value,y.id)),1)):M("",!0)]))],10,_3))),128))])])):M("",!0)]),t("div",T3,[t("button",{onClick:I[4]||(I[4]=y=>a.value=!1),class:"flex-1 py-3 text-zinc-500 bg-white hover:bg-zinc-50 border border-zinc-200 font-bold text-sm rounded-xl transition-colors"},"  "),p.value&&!ce(r.value,p.value)?(d(),f("button",{key:0,onClick:we,class:"flex-1 py-3 bg-black text-white font-bold text-sm hover:bg-zinc-800 rounded-xl transition-all shadow-lg hover:shadow-xl"},"  ")):p.value?(d(),f("button",E3,"  ")):M("",!0)])])])):M("",!0),t("div",{class:W(["absolute right-0 top-0 bottom-0 pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)] bg-white border-l border-zinc-100 shadow-2xl transition-transform duration-300 transform w-80 z-40 flex flex-col",n.value?"translate-x-0":"translate-x-full sm:translate-x-0"])},[t("div",j3,[t("div",A3,[I[19]||(I[19]=t("span",{class:"font-bold text-xs text-zinc-500 uppercase tracking-widest"},"Directory",-1)),t("button",{onClick:I[6]||(I[6]=y=>n.value=!1),class:"p-2 rounded-full hover:bg-zinc-100"},[...I[18]||(I[18]=[t("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),t("div",O3,[t("h3",P3,[I[20]||(I[20]=t("span",null," (ALL)",-1)),t("span",R3,w(ze.value.length),1)]),t("div",N3,[(d(!0),f(oe,null,ye(ze.value,y=>(d(),f("div",{key:y.id,class:"flex items-center justify-between group"},[t("div",{class:"flex items-center gap-3 overflow-hidden cursor-pointer",onClick:z=>Y(y.id)},[t("img",{src:y.avatar,class:"w-10 h-10 rounded-full border border-zinc-100 object-cover shadow-sm transition-transform group-hover:scale-105"},null,8,D3),t("span",V3,w(se(y)),1)],8,L3),t("button",{onClick:z=>Y(y.id),class:"w-8 h-8 shrink-0 rounded-full border border-zinc-200 hover:border-black hover:bg-black hover:text-white flex items-center justify-center transition-all shadow-sm active:scale-90 opacity-0 group-hover:opacity-100",title:""},[...I[21]||(I[21]=[t("span",{class:"material-symbols-outlined text-[16px]"},"all_inclusive",-1)])],8,B3)]))),128))])]),I[22]||(I[22]=t("div",{class:"p-4 border-t border-zinc-50 bg-zinc-50/50"},[t("p",{class:"text-[10px] text-zinc-400 leading-relaxed text-center font-medium"},[ns(" "),t("br"),ns("   ")])],-1))])],2)]))}},F3=rt(U3,[["__scopeId","data-v-0cda6011"]]),W3={class:"h-full flex flex-col bg-white overflow-hidden relative"},K3={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},H3={class:"flex items-center gap-3"},G3={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},q3={class:"flex items-center gap-2"},Y3={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},J3={key:0},X3={class:"grid grid-cols-2 sm:grid-cols-3 gap-4"},Q3=["onClick"],Z3={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-110 transition-transform mb-2"},e_={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},t_={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},s_={key:0,class:"w-3 h-3 bg-black rounded-full"},n_={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},o_={class:"mb-8 flex items-end justify-between border-b border-zinc-50 pb-4"},l_={class:"flex-1 mr-8"},i_=["value"],a_={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-x-3 gap-y-8"},r_=["onClick"],c_=["src"],d_={key:0,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-black/10 bg-white flex items-center justify-center shadow-sm"},u_={key:0,class:"w-3 h-3 bg-black rounded-full"},p_={key:1,class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},f_={class:"text-center px-1"},v_={class:"text-[11px] font-medium text-zinc-600 truncate leading-tight"},x_={key:0,class:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40 animate-in slide-in-from-bottom-4 duration-200"},b_={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},m_={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},g_={class:"grid grid-cols-2 gap-3"},h_={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},y_={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-2xl p-2"},w_=["onClick"],k_={key:0,class:"material-symbols-outlined text-sm"},__={key:0,class:"text-center py-4 text-zinc-400 text-xs"},z_={class:"grid grid-cols-2 gap-3"},$_=["disabled"],C_={class:"bg-white w-[420px] max-w-full rounded-[32px] shadow-2xl flex flex-col gap-6 p-8 max-h-[85vh] animate-in zoom-in-95 duration-300 transform transition-all"},S_={class:"text-center mb-8"},I_={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},M_={class:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-6"},T_={class:"flex items-center justify-center w-full h-32 border border-dashed border-zinc-200 rounded-2xl cursor-pointer hover:border-black hover:bg-zinc-50 transition-all group"},E_={class:"mt-8 grid grid-cols-2 gap-3"},j_=["disabled"],A_={__name:"StickerLibrary",emits:["back"],setup(e,{emit:s}){const n=C(null),o=C(!1),l=C(""),i=C(!1),a=C(""),r=C(!1),p=C(!1),b=C(new Set),u=C(!1),v=C(""),g=C(null),j=be(()=>k.stickerCategories),U=async()=>{l.value.trim()&&(await Ha(l.value.trim(),""),l.value="",o.value=!1)},N=K=>{if(p.value){A(K.id);return}n.value=K,p.value=!1,b.value=new Set},L=async()=>{confirm("")&&(await Ga(n.value.id),n.value=null)},S=async K=>{const I=K.target.value.trim();I&&I!==n.value.name&&await bf(n.value.id,{name:I})},E=be(()=>n.value?Pn(n.value.id):[]),T=async()=>{if(!a.value.trim())return;r.value=!0;const K=a.value.split(`
`);for(const I of K){const y=I.split(/:(.+)/);let z="sticker",D=I.trim();y.length>1&&(z=y[0].trim(),D=y[1].trim()),D&&await Lo(n.value.id,D,z)}r.value=!1,a.value="",i.value=!1},O=async K=>{const I=K.target.files;if(!(!I||I.length===0)){r.value=!0;for(const y of I)if(y.type.startsWith("image/")){const z=new FileReader;await new Promise(D=>{z.onload=async ae=>{const ue=ae.target.result,F=y.name.replace(/\.[^/.]+$/,"");await Lo(n.value.id,ue,F),D()},z.readAsDataURL(y)})}r.value=!1,i.value=!1}},A=K=>{b.value.has(K)?b.value.delete(K):b.value.add(K)},R=()=>{const K=n.value?E.value:j.value;b.value.size===K.length?b.value.clear():K.forEach(I=>b.value.add(I.id))},Y=async()=>{if(b.value.size===0)return;const K=b.value.size,I=n.value?"":"";if(confirm(` ${K} ${I}`)){for(const y of b.value)n.value?await ui(y):await Ga(y);b.value.clear(),n.value||(p.value=!1)}},we=()=>{b.value.size!==0&&(u.value=!0,v.value="")},ce=async()=>{if(v.value){for(const K of b.value){const I=k.stickers.find(y=>y.id===K);I&&(await ui(K),await Lo(v.value,I.url,I.keyword))}b.value.clear(),p.value=!1,u.value=!1,n.value=null}},ze=()=>{if(b.value.size===0)return;const K={version:1,packs:[]};for(const D of b.value){const ae=j.value.find(ue=>ue.id===D);if(ae){const ue=Pn(D);K.packs.push({name:ae.name,stickers:ue.map(F=>({keyword:F.keyword,url:F.url}))})}}const I=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),y=URL.createObjectURL(I),z=document.createElement("a");z.href=y,z.download=`Roche_stickers_export_${Date.now()}.json`,z.click(),URL.revokeObjectURL(y),b.value.clear(),p.value=!1},Ee=()=>{g.value.click()},se=async K=>{const I=K.target.files[0];if(!I)return;const y=new FileReader;y.onload=async z=>{try{const D=JSON.parse(z.target.result),ae=D.packs||(D.name?[D]:[]);if(ae.length>0){let ue=0;for(const F of ae)if(F.name&&Array.isArray(F.stickers)){const ve=await Ha(F.name+" (Import)","");for(const xe of F.stickers)await Lo(ve.id,xe.url,xe.keyword);ue++}alert(`Successfully imported ${ue} packs.`)}else alert("Invalid sticker pack format.")}catch(D){console.error(D),alert("Failed to parse sticker pack.")}K.target.value=""},y.readAsText(I)};return(K,I)=>(d(),f("div",W3,[t("div",K3,[t("div",H3,[t("button",{onClick:I[0]||(I[0]=y=>n.value?n.value=null:K.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...I[14]||(I[14]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("span",G3,w(n.value?n.value.name:"Sticker Packs"),1)]),t("div",q3,[!n.value&&!p.value?(d(),f(oe,{key:0},[t("button",{onClick:Ee,class:"text-[10px] font-bold uppercase tracking-widest px-4 py-2 hover:bg-zinc-50 rounded-full border border-zinc-100 transition-colors flex items-center gap-2"},[...I[15]||(I[15]=[t("span",{class:"material-symbols-outlined text-[16px]"},"download",-1),t("span",null,"Import",-1)])]),t("input",{ref_key:"fileInputRef",ref:g,type:"file",accept:".json",class:"hidden",onChange:se},null,544),t("button",{onClick:I[1]||(I[1]=y=>p.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Packs"},[...I[16]||(I[16]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64)):p.value?(d(),f(oe,{key:1},[t("button",{onClick:R,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),t("button",{onClick:I[2]||(I[2]=y=>{p.value=!1,b.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-red-500"},"Cancel")],64)):(d(),f("button",{key:2,onClick:I[3]||(I[3]=y=>p.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select Stickers"},[...I[17]||(I[17]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])]))])]),t("div",Y3,[n.value?(d(),f("div",n_,[t("div",o_,[t("div",l_,[t("input",{value:n.value.name,onChange:S,class:"text-3xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0",placeholder:"Pack Name"},null,40,i_)]),t("button",{onClick:L,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors",title:"Delete Pack"},[...I[19]||(I[19]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),t("div",a_,[(d(!0),f(oe,null,ye(E.value,y=>(d(),f("div",{key:y.id,class:"relative group flex flex-col gap-2",onClick:z=>p.value?A(y.id):null},[t("div",{class:W(["aspect-square bg-zinc-50 rounded-2xl overflow-hidden border transition-all cursor-pointer relative",b.value.has(y.id)?"border-black ring-2 ring-black ring-offset-2":"border-zinc-50 hover:border-zinc-200"])},[t("img",{src:y.url,class:"w-full h-full object-cover"},null,8,c_),p.value?(d(),f("div",d_,[b.value.has(y.id)?(d(),f("div",u_)):M("",!0)])):(d(),f("div",p_,[...I[20]||(I[20]=[t("span",{class:"material-symbols-outlined text-white"},"visibility",-1)])]))],2),t("div",f_,[t("p",v_,w(y.keyword),1)])],8,r_))),128)),p.value?M("",!0):(d(),f("button",{key:0,onClick:I[5]||(I[5]=y=>i.value=!0),class:"aspect-square rounded-2xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-1"},[...I[21]||(I[21]=[t("span",{class:"material-symbols-outlined text-zinc-300 text-[20px]"},"add",-1),t("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"Add",-1)])]))])])):(d(),f("div",J3,[t("div",X3,[(d(!0),f(oe,null,ye(j.value,y=>(d(),f("div",{key:y.id,class:W(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border-2",b.value.has(y.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:z=>N(y)},[t("span",Z3,w(y.name),1),t("div",e_,w(at(Pn)(y.id).length)+" stickers",1),p.value?(d(),f("div",t_,[b.value.has(y.id)?(d(),f("div",s_)):M("",!0)])):M("",!0)],10,Q3))),128)),p.value?M("",!0):(d(),f("button",{key:0,onClick:I[4]||(I[4]=y=>o.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...I[18]||(I[18]=[t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2"},"add",-1),t("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))])]))]),p.value&&b.value.size>0?(d(),f("div",x_,[t("span",b_,w(b.value.size)+" Selected",1),I[25]||(I[25]=t("div",{class:"h-4 w-px bg-white/20"},null,-1)),n.value?(d(),f("button",{key:1,onClick:we,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...I[23]||(I[23]=[t("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),t("span",{class:"text-[11px] font-bold"},"Move",-1)])])):(d(),f("button",{key:0,onClick:ze,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...I[22]||(I[22]=[t("span",{class:"material-symbols-outlined text-[18px]"},"ios_share",-1),t("span",{class:"text-[11px] font-bold"},"Export Items",-1)])])),I[26]||(I[26]=t("div",{class:"h-4 w-px bg-white/20"},null,-1)),t("button",{onClick:Y,class:"flex items-center gap-2 hover:text-red-300 transition-colors"},[...I[24]||(I[24]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1),t("span",{class:"text-[11px] font-bold"},"Delete",-1)])])])):M("",!0),(d(),Te(ft,{to:"body"},[o.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:I[8]||(I[8]=je(y=>o.value=!1,["self"]))},[t("div",m_,[I[27]||(I[27]=t("div",{class:"text-center"},[t("h3",{class:"font-serif italic text-2xl mb-1"},"New Sticker Pack"),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new collection")],-1)),ie(t("input",{"onUpdate:modelValue":I[6]||(I[6]=y=>l.value=y),placeholder:"Name your pack...",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:xs(U,["enter"])},null,544),[[pe,l.value]]),t("div",g_,[t("button",{onClick:I[7]||(I[7]=y=>o.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:U,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[u.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:I[10]||(I[10]=je(y=>u.value=!1,["self"]))},[t("div",h_,[I[28]||(I[28]=t("div",{class:"text-center"},[t("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),t("div",y_,[(d(!0),f(oe,null,ye(j.value.filter(y=>y.id!==n.value.id),y=>(d(),f("button",{key:y.id,onClick:z=>v.value=y.id,class:W(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",v.value===y.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[t("span",null,w(y.name),1),v.value===y.id?(d(),f("span",k_,"check")):M("",!0)],10,w_))),128)),j.value.length<=1?(d(),f("div",__,"No other packs available")):M("",!0)]),t("div",z_,[t("button",{onClick:I[9]||(I[9]=y=>u.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:ce,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!v.value}," Move ",8,$_)])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[i.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:I[13]||(I[13]=je(y=>i.value=!1,["self"]))},[t("div",C_,[t("div",S_,[I[29]||(I[29]=t("h3",{class:"font-serif italic text-2xl mb-1"},"Add Stickers",-1)),t("p",I_,w(n.value.name),1)]),t("div",M_,[t("div",null,[t("label",T_,[I[30]||(I[30]=t("div",{class:"flex flex-col items-center gap-2"},[t("div",{class:"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center group-hover:bg-white group-hover:shadow-md transition-all"},[t("span",{class:"material-symbols-outlined text-zinc-400 group-hover:text-black"},"cloud_upload")]),t("span",{class:"text-[10px] font-bold text-zinc-400 group-hover:text-black uppercase tracking-widest"},"Upload Images")],-1)),t("input",{type:"file",class:"hidden",multiple:"",accept:"image/*",onChange:O},null,32)])]),I[32]||(I[32]=t("div",{class:"flex items-center gap-4"},[t("div",{class:"h-px bg-zinc-100 flex-1"}),t("span",{class:"text-[9px] font-bold text-zinc-300 uppercase"},"OR"),t("div",{class:"h-px bg-zinc-100 flex-1"})],-1)),t("div",null,[I[31]||(I[31]=t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 block"},"Batch Import URLs",-1)),ie(t("textarea",{"onUpdate:modelValue":I[11]||(I[11]=y=>a.value=y),rows:"4",class:"w-full bg-zinc-50 rounded-2xl p-4 text-xs font-mono border-none focus:ring-1 focus:ring-black resize-none placeholder:text-zinc-300 outline-none",placeholder:`happy:http://example.com/happy.jpg
sad:http://example.com/sad.jpg`},null,512),[[pe,a.value]])])]),t("div",E_,[t("button",{onClick:I[12]||(I[12]=y=>i.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:T,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:r.value},w(r.value?"Processing...":"Confirm"),9,j_)])])])):M("",!0)]))]))}},O_={class:"h-full flex flex-col bg-white overflow-hidden relative"},P_={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center px-6 shrink-0 bg-white/95 backdrop-blur z-20"},R_={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},N_={class:"w-full aspect-[1.586] bg-black rounded-[24px] p-8 text-white flex flex-col justify-between shadow-2xl relative overflow-hidden mb-8 group"},L_={class:"relative z-10"},D_={class:"font-serif text-4xl font-bold tracking-tight"},V_={class:"grid grid-cols-2 gap-4 mb-8"},B_={class:"flex flex-col"},U_={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},F_={class:"text-xs text-red-500 text-center h-4 mb-6"},W_={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},K_={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},H_={key:0},G_={key:1,class:"text-center text-red-500 text-xs mb-4"},q_={class:"text-xs text-red-500 text-center h-4 mb-6"},Y_={class:"grid grid-cols-2 gap-3"},J_=["disabled"],X_={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl p-8 animate-in zoom-in-95 duration-300"},Q_={class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},Z_={class:"space-y-4 mb-6"},ez={class:"text-xs text-red-500 text-center h-4 mb-6"},tz={class:"bg-white w-full max-w-md rounded-[32px] shadow-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-300"},sz={class:"px-6 py-4 border-b border-zinc-50 flex items-center gap-4 bg-zinc-50/50"},nz={class:"relative group"},oz={class:"flex-1 flex bg-zinc-100 p-1 rounded-lg"},lz={class:"flex-1 overflow-y-auto custom-scrollbar p-0"},iz={key:0,class:"flex flex-col items-center justify-center h-64 text-zinc-300 gap-2"},az={key:1,class:"divide-y divide-zinc-50"},rz={class:"flex flex-col"},cz={class:"font-bold text-sm"},dz={class:"text-[10px] text-zinc-400 mt-1"},uz={__name:"Wallet",emits:["back"],setup(e,{emit:s}){const n=C(null),o=C(""),l=C(""),i=C(""),a=C(""),r=be(()=>k.wallet.balance.toFixed(2)),p=be(()=>k.wallet.hasPassword),b=be(()=>k.wallet.transactions),u=new Date,v=C(`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`),g=C("all"),j=be(()=>b.value.filter(O=>{const A=new Date(O.timestamp),Y=`${A.getFullYear()}-${String(A.getMonth()+1).padStart(2,"0")}`===v.value;let we=!0;return g.value==="deposit"&&(we=O.type==="deposit"),g.value==="withdraw"&&(we=O.type==="withdraw"),Y&&we})),U=O=>{n.value=O,o.value="",l.value="",i.value="",a.value=""},N=()=>{n.value=null},L=()=>{const O=parseFloat(o.value);if(!O||O<=0){a.value="Please enter a valid amount";return}ci("deposit",O,"Account Deposit"),N()},S=()=>{const O=parseFloat(o.value);if(!O||O<=0){a.value="Please enter a valid amount";return}if(O>k.wallet.balance){a.value="Insufficient balance";return}if(!p.value){a.value="Please set a payment password first";return}if(!zc(l.value)){a.value="Incorrect password";return}ci("withdraw",O,"Withdrawal"),N()},E=()=>{if(l.value.length!==6||isNaN(l.value)){a.value="Password must be 6 digits";return}if(l.value!==i.value){a.value="Passwords do not match";return}nf(l.value),N()},T=O=>new Date(O).toLocaleString();return(O,A)=>(d(),f("div",O_,[t("div",P_,[t("button",{onClick:A[0]||(A[0]=R=>O.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2 mr-2"},[...A[14]||(A[14]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),A[15]||(A[15]=t("span",{class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900"},"My Wallet",-1))]),t("div",R_,[t("div",N_,[A[17]||(A[17]=t("div",{class:"absolute -right-20 -top-20 w-64 h-64 bg-zinc-800/30 rounded-full blur-3xl group-hover:bg-zinc-700/30 transition-colors duration-500"},null,-1)),A[18]||(A[18]=t("div",{class:"flex items-center justify-between relative z-10"},[t("span",{class:"font-serif italic text-lg opacity-80"},"Noir Card"),t("span",{class:"material-symbols-outlined opacity-50"},"contactless")],-1)),t("div",L_,[A[16]||(A[16]=t("div",{class:"text-[11px] uppercase tracking-[0.2em] opacity-60 mb-1"},"Total Balance",-1)),t("div",D_," "+w(r.value),1)]),A[19]||(A[19]=t("div",{class:"flex items-center justify-between text-[10px] uppercase tracking-widest opacity-60 relative z-10"},[t("span",null,"**** 8848"),t("span",null,"Noir Inc.")],-1))]),t("div",V_,[t("button",{onClick:A[1]||(A[1]=R=>U("recharge")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...A[20]||(A[20]=[t("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"add_card",-1),t("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Top Up",-1)])]),t("button",{onClick:A[2]||(A[2]=R=>U("withdraw")),class:"flex items-center justify-center gap-3 py-4 rounded-2xl bg-zinc-50 hover:bg-black hover:text-white transition-all group"},[...A[21]||(A[21]=[t("span",{class:"material-symbols-outlined text-[20px] text-zinc-400 group-hover:text-white transition-colors"},"payments",-1),t("span",{class:"text-[13px] font-bold uppercase tracking-wide"},"Withdraw",-1)])])]),t("div",B_,[t("button",{onClick:A[3]||(A[3]=R=>U("history")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...A[22]||(A[22]=[t("div",{class:"flex items-center gap-4"},[t("span",{class:"material-symbols-outlined text-zinc-400"},"receipt_long"),t("span",{class:"text-[15px] font-medium"},"Transaction History")],-1),t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])]),t("button",{onClick:A[4]||(A[4]=R=>U("password")),class:"flex items-center justify-between py-5 border-b border-zinc-50 group hover:pl-2 transition-all"},[...A[23]||(A[23]=[t("div",{class:"flex items-center gap-4"},[t("span",{class:"material-symbols-outlined text-zinc-400"},"lock"),t("span",{class:"text-[15px] font-medium"},"Payment Security")],-1),t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black"},"chevron_right",-1)])])])]),(d(),Te(ft,{to:"body"},[n.value==="recharge"?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",U_,[A[24]||(A[24]=t("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Top Up",-1)),A[25]||(A[25]=t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest text-center mb-8"},"Add funds to wallet",-1)),ie(t("input",{"onUpdate:modelValue":A[5]||(A[5]=R=>o.value=R),type:"number",placeholder:"0.00",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-2 bg-transparent",autofocus:""},null,512),[[pe,o.value]]),t("div",F_,w(a.value),1),t("div",{class:"grid grid-cols-2 gap-3"},[t("button",{onClick:N,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:L,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Confirm")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[n.value==="withdraw"?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",W_,[A[27]||(A[27]=t("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Withdraw",-1)),t("p",K_,"Available: "+w(r.value),1),ie(t("input",{"onUpdate:modelValue":A[6]||(A[6]=R=>o.value=R),type:"number",placeholder:"Amount",class:"w-full text-center text-3xl font-bold border-b border-zinc-200 py-4 focus:outline-none focus:border-black transition-colors mb-6 bg-transparent"},null,512),[[pe,o.value]]),p.value?(d(),f("div",H_,[A[26]||(A[26]=t("p",{class:"text-[10px] uppercase tracking-widest text-zinc-400 mb-2"},"Payment Password",-1)),ie(t("input",{"onUpdate:modelValue":A[7]||(A[7]=R=>l.value=R),type:"password",maxlength:"6",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center tracking-[1em] font-bold focus:outline-none focus:ring-1 focus:ring-black mb-2"},null,512),[[pe,l.value]])])):(d(),f("div",G_,"Please set password first")),t("div",q_,w(a.value),1),t("div",Y_,[t("button",{onClick:N,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:S,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg",disabled:!p.value},"Confirm",8,J_)])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[n.value==="password"?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",X_,[A[28]||(A[28]=t("h3",{class:"font-serif italic text-2xl mb-1 text-center"},"Security",-1)),t("p",Q_,w(p.value?"Change Password":"Set Payment Password"),1),t("div",Z_,[t("div",null,[ie(t("input",{"onUpdate:modelValue":A[8]||(A[8]=R=>l.value=R),type:"password",maxlength:"6",placeholder:"New Password (6 digits)",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[pe,l.value]])]),t("div",null,[ie(t("input",{"onUpdate:modelValue":A[9]||(A[9]=R=>i.value=R),type:"password",maxlength:"6",placeholder:"Confirm Password",class:"w-full bg-zinc-50 rounded-xl px-4 py-3 text-center focus:outline-none focus:ring-1 focus:ring-black transition-all"},null,512),[[pe,i.value]])])]),t("div",ez,w(a.value),1),t("div",{class:"grid grid-cols-2 gap-3"},[t("button",{onClick:N,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200"},"Cancel"),t("button",{onClick:E,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 shadow-lg"},"Save")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[n.value==="history"?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",onClick:je(N,["self"])},[t("div",tz,[t("div",{class:"p-6 border-b border-zinc-50 flex items-center justify-between shrink-0"},[A[30]||(A[30]=t("h3",{class:"font-serif italic text-2xl"},"Transactions",-1)),t("button",{onClick:N,class:"w-8 h-8 flex items-center justify-center bg-zinc-50 rounded-full hover:bg-zinc-100"},[...A[29]||(A[29]=[t("span",{class:"material-symbols-outlined text-sm"},"close",-1)])])]),t("div",sz,[t("div",nz,[ie(t("input",{"onUpdate:modelValue":A[10]||(A[10]=R=>v.value=R),type:"month",class:"pl-8 pr-3 py-1.5 rounded-lg bg-white border border-zinc-200 text-xs font-bold uppercase tracking-wider focus:outline-none focus:border-black cursor-pointer w-32"},null,512),[[pe,v.value]]),A[31]||(A[31]=t("span",{class:"material-symbols-outlined text-[16px] absolute left-2 top-1.5 text-zinc-400 pointer-events-none"},"calendar_month",-1))]),t("div",oz,[t("button",{onClick:A[11]||(A[11]=R=>g.value="all"),class:W(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",g.value==="all"?"bg-white shadow-sm text-black":"text-zinc-400 hover:text-black"])},"All",2),t("button",{onClick:A[12]||(A[12]=R=>g.value="deposit"),class:W(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",g.value==="deposit"?"bg-white shadow-sm text-green-600":"text-zinc-400 hover:text-black"])},"Income",2),t("button",{onClick:A[13]||(A[13]=R=>g.value="withdraw"),class:W(["flex-1 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all",g.value==="withdraw"?"bg-white shadow-sm text-red-600":"text-zinc-400 hover:text-black"])},"Expense",2)])]),t("div",lz,[j.value.length===0?(d(),f("div",iz,[...A[32]||(A[32]=[t("span",{class:"material-symbols-outlined text-4xl"},"event_busy",-1),t("span",{class:"text-[10px] uppercase tracking-widest"},"No matching records",-1)])])):(d(),f("div",az,[(d(!0),f(oe,null,ye(j.value,R=>(d(),f("div",{key:R.id,class:"flex items-center justify-between p-6 hover:bg-zinc-50 transition-colors"},[t("div",rz,[t("span",cz,w(R.title),1),t("span",dz,w(T(R.timestamp)),1)]),t("span",{class:W(["font-mono font-bold",R.type==="deposit"?"text-green-600":"text-black"])},w(R.type==="deposit"?"+":"-")+" "+w(R.amount.toFixed(2)),3)]))),128))]))])])])):M("",!0)]))]))}},pz={class:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t border-gray-100 pb-6 z-[60]"},fz={class:"max-w-7xl mx-auto flex items-center justify-around h-16 px-4 w-full"},vz=["onClick"],xz={key:0,class:"w-10 h-10 bg-zinc-50 rounded-lg text-black hover:bg-zinc-100 flex items-center justify-center"},bz={__name:"Navigation",props:["activeTab"],emits:["change"],setup(e,{emit:s}){const n=s,o=[{id:"feed",icon:"home",customSvg:!0},{id:"inbox",icon:"mail"},{id:"compose",icon:"add",isAction:!0},{id:"activity",icon:"favorite"},{id:"profile",icon:"person"}],l=i=>{n("change",i)};return(i,a)=>(d(),f("nav",pz,[t("div",fz,[(d(),f(oe,null,ye(o,r=>t("button",{key:r.id,onClick:p=>l(r.id),class:W(["flex items-center justify-center w-12 transition-colors",[r.isAction?"":e.activeTab===r.id?"text-black":"text-zinc-400 hover:text-black"]])},[r.isAction?(d(),f("div",xz,[...a[0]||(a[0]=[t("span",{class:"material-symbols-outlined text-[24px]"},"add",-1)])])):r.customSvg?(d(),f("svg",{key:1,width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:W({"nav-icon-active":e.activeTab===r.id})},[...a[1]||(a[1]=[t("path",{d:"M3 10.5L12 3L21 10.5"},null,-1),t("path",{d:"M5 9.5V19C5 19.5523 5.44772 20 6 20H18C18.5523 20 19 19.5523 19 19V9.5"},null,-1)])],2)):(d(),f("span",{key:2,class:W(["material-symbols-outlined text-[26px]",{"active-icon":e.activeTab===r.id}])},w(r.icon),3))],10,vz)),64))])]))}},mz=rt(bz,[["__scopeId","data-v-0d87dcee"]]),gz={class:"h-full flex flex-col bg-white overflow-hidden relative font-sans text-black"},hz={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-100 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},yz={class:"flex items-center gap-3"},wz={class:"flex flex-col"},kz={class:"font-serif text-[17px] font-semibold tracking-tight text-zinc-900 max-w-[200px] truncate"},_z={class:"flex items-center gap-2"},zz={key:0,class:"px-6 pt-2 pb-0 bg-white z-10"},$z={class:"flex items-center p-1.5 bg-zinc-100 rounded-full border border-zinc-200/50"},Cz={class:"flex-1 overflow-y-auto custom-scrollbar p-6"},Sz={key:0},Iz={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Mz=["onClick"],Tz={class:"font-serif italic text-xl text-zinc-900 group-hover:scale-105 transition-transform mb-2"},Ez={class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest"},jz={key:0,class:"absolute top-3 right-3 w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center shadow-sm"},Az={key:0,class:"w-2.5 h-2.5 bg-black rounded-full"},Oz={key:0,class:"mt-20 text-center text-zinc-300"},Pz={class:"text-xs uppercase tracking-widest"},Rz={key:1,class:"pb-[calc(6rem+env(safe-area-inset-bottom))]"},Nz={class:"mb-6 flex items-end justify-between border-b border-zinc-100 pb-4 pt-2 -mt-2"},Lz={class:"flex-1 mr-8"},Dz=["value"],Vz={class:"text-[10px] text-zinc-400 uppercase tracking-widest block mt-1"},Bz={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Uz=["onClick"],Fz={class:"h-[100px] bg-zinc-100 flex items-center justify-center border-b border-zinc-100 relative p-3 overflow-hidden"},Wz=["innerHTML"],Kz={key:0,class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},Hz=["onClick"],Gz={key:1,class:"absolute top-2 right-2 w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center shadow-sm z-10"},qz={key:0,class:"w-2.5 h-2.5 bg-black rounded-full"},Yz={class:"p-3"},Jz={class:"font-bold text-[13px] truncate text-zinc-800"},Xz={class:"text-[10px] text-zinc-400 font-mono mt-0.5 block truncate opacity-70"},Qz={key:1,class:"absolute bottom-[calc(1.5rem+env(safe-area-inset-bottom))] left-1/2 -translate-x-1/2 bg-zinc-900 text-white pl-3 pr-3 py-1.5 rounded-full shadow-2xl flex items-center gap-3 z-40 animate-in slide-in-from-bottom-4 duration-200"},Zz={class:"text-[10px] font-bold uppercase tracking-wider text-zinc-400"},e$={class:"bg-white w-full max-w-sm rounded-[24px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all border border-zinc-100"},t$={class:"text-center"},s$={class:"text-[10px] text-zinc-400 uppercase tracking-widest"},n$={class:"text-black font-bold"},o$={class:"grid grid-cols-2 gap-3"},l$={class:"bg-white w-[420px] max-w-full rounded-[28px] shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 transform transition-all border border-zinc-100 overflow-hidden relative"},i$={class:"overflow-y-auto custom-scrollbar p-6 flex flex-col gap-5"},a$={class:"text-center mb-1"},r$={class:"font-sans font-bold text-xl mb-1 text-black tracking-tight"},c$={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},d$={class:"space-y-4"},u$={class:"space-y-1"},p$={class:"space-y-1"},f$={class:"space-y-1"},v$={class:"bg-zinc-50 rounded-xl p-6 flex items-center justify-center min-h-[100px] border border-dashed border-zinc-200 relative overflow-hidden"},x$=["innerHTML"],b$={key:1,class:"text-zinc-300 text-[10px] font-bold uppercase tracking-widest"},m$={class:"grid grid-cols-2 gap-3 mt-4"},g$={class:"bg-white w-full max-w-sm rounded-[24px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300 transform transition-all"},h$={class:"max-h-60 overflow-y-auto custom-scrollbar bg-zinc-50 rounded-xl p-2"},y$=["onClick"],w$={key:0,class:"material-symbols-outlined text-sm"},k$={key:0,class:"text-center py-4 text-zinc-400 text-xs"},_$={class:"grid grid-cols-2 gap-3"},z$=["disabled"],$$={__name:"RegexManager",emits:["back"],setup(e,{emit:s}){const n=C("global"),o=C(null),l=C(!1),i=C(""),a=C(!1),r=C(null),p=C({name:"",regex:"",html:""}),b=C(!1),u=C(new Set),v=C(!1),g=C(""),j=C(null),U=be(()=>k.regexCategories.filter(y=>y.scope===n.value||!y.scope&&n.value==="local")),N=be(()=>o.value?Gl(o.value.id):[]),L=y=>{n.value=y,o.value=null,b.value=!1,u.value.clear()},S=y=>{if(b.value){Y(y.id);return}o.value=y,b.value=!1,u.value=new Set},E=async()=>{i.value.trim()&&(await Qa(i.value.trim(),n.value),i.value="",l.value=!1)},T=async y=>{const z=y.target.value.trim();z&&z!==o.value.name&&await Mf(o.value.id,{name:z})},O=async()=>{confirm("Delete this category and all its cards?")&&(await Za(o.value.id),o.value=null)},A=(y=null)=>{y?(r.value=y,p.value={...y}):(r.value=null,p.value={name:"",regex:"",html:""}),a.value=!0},R=async()=>{if(!p.value.name)return;const y={categoryId:o.value.id,name:p.value.name,regex:p.value.regex,html:p.value.html};r.value?await tr(r.value.id,y):await er(y),a.value=!1},Y=y=>{u.value.has(y)?u.value.delete(y):u.value.add(y)},we=()=>{const y=o.value?N.value:U.value;u.value.size===y.length?u.value.clear():y.forEach(z=>u.value.add(z.id))},ce=async()=>{if(u.value.size===0)return;const y=u.value.size;if(confirm(`Delete ${y} selected items?`)){for(const z of u.value)o.value?await Tc(z):await Za(z);u.value.clear(),o.value||(b.value=!1)}},ze=()=>{u.value.size!==0&&(v.value=!0,g.value="")},Ee=async()=>{if(g.value){for(const y of u.value)k.regexEntries.find(D=>D.id===y)&&await tr(y,{categoryId:g.value});u.value.clear(),b.value=!1,v.value=!1}},se=()=>{if(u.value.size===0)return;const y={version:1,categories:[]};if(o.value){const ue=N.value.filter(F=>u.value.has(F.id));y.categories.push({name:o.value.name,scope:o.value.scope,entries:ue})}else for(const ue of u.value){const F=U.value.find(ve=>ve.id===ue);if(F){const ve=Gl(ue);y.categories.push({name:F.name,scope:F.scope,entries:ve})}}const z=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),D=URL.createObjectURL(z),ae=document.createElement("a");ae.href=D,ae.download=`noir_regex_export_${Date.now()}.json`,ae.click(),URL.revokeObjectURL(D),u.value.clear(),b.value=!1},K=()=>{j.value.click()},I=async y=>{const z=y.target.files[0];if(!z)return;const D=new FileReader;D.onload=async ae=>{try{const ue=JSON.parse(ae.target.result),F=ue.categories||(ue.category?[ue]:[]);if(F.length>0){let ve=0;for(const xe of F){const We=await Qa(xe.name+" (Import)",n.value);if(xe.entries&&Array.isArray(xe.entries))for(const ot of xe.entries)await er({categoryId:We.id,name:ot.name,regex:ot.regex,html:ot.html});ve++}alert(`Successfully imported ${ve} categories.`)}else alert("Invalid regex format.")}catch(ue){console.error(ue),alert("Failed to parse file.")}y.target.value=""},D.readAsText(z)};return(y,z)=>(d(),f("div",gz,[t("div",hz,[t("div",yz,[t("button",{onClick:z[0]||(z[0]=D=>o.value?o.value=null:y.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...z[18]||(z[18]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("div",wz,[t("span",kz,w(o.value?o.value.name:"Regex Manager"),1)])]),t("div",_z,[!o.value&&!b.value?(d(),f(oe,{key:0},[t("button",{onClick:K,class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Import"},[...z[19]||(z[19]=[t("span",{class:"material-symbols-outlined text-[20px]"},"download",-1)])]),t("input",{ref_key:"fileInputRef",ref:j,type:"file",accept:".json",class:"hidden",onChange:I},null,544),t("button",{onClick:z[1]||(z[1]=D=>b.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select"},[...z[20]||(z[20]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])])],64)):b.value?(d(),f(oe,{key:1},[t("button",{onClick:we,class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg"},"All"),t("button",{onClick:z[2]||(z[2]=D=>{b.value=!1,u.value.clear()}),class:"text-[10px] font-bold uppercase tracking-wider px-3 py-1.5 hover:bg-zinc-50 rounded-lg text-zinc-400 hover:text-zinc-600"},"Cancel")],64)):(d(),f("button",{key:2,onClick:z[3]||(z[3]=D=>b.value=!0),class:"p-2 rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black transition-colors",title:"Select"},[...z[21]||(z[21]=[t("span",{class:"material-symbols-outlined text-[20px]"},"checklist",-1)])]))])]),o.value?M("",!0):(d(),f("div",zz,[t("div",$z,[t("button",{onClick:z[4]||(z[4]=D=>L("global")),class:W(["flex-1 flex flex-col items-center justify-center py-2.5 rounded-full transition-all duration-200",n.value==="global"?"bg-white shadow-sm text-black ring-1 ring-black/5":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-200/50"])},[...z[22]||(z[22]=[t("div",{class:"flex flex-col leading-none gap-0.5"},[t("span",{class:"text-[12px] font-bold uppercase tracking-wider"},"Global"),t("span",{class:"text-[9px] opacity-40 font-normal scale-90"},"Apply Everywhere")],-1)])],2),t("button",{onClick:z[5]||(z[5]=D=>L("local")),class:W(["flex-1 flex flex-col items-center justify-center py-2.5 rounded-full transition-all duration-200",n.value==="local"?"bg-white shadow-sm text-black ring-1 ring-black/5":"text-zinc-400 hover:text-zinc-600 hover:bg-zinc-200/50"])},[...z[23]||(z[23]=[t("div",{class:"flex flex-col leading-none gap-0.5"},[t("span",{class:"text-[12px] font-bold uppercase tracking-wider"},"Local"),t("span",{class:"text-[9px] opacity-40 font-normal scale-90"},"Mount per Chat")],-1)])],2)]),z[24]||(z[24]=t("div",{class:"h-px w-full bg-zinc-100 mt-4"},null,-1))])),t("div",Cz,[o.value?(d(),f("div",Rz,[t("div",Nz,[t("div",Lz,[t("input",{value:o.value.name,onChange:T,class:"text-2xl font-serif italic bg-transparent focus:outline-none w-full placeholder-zinc-300 p-0 m-0 border-none ring-0 text-zinc-900",placeholder:"Pack Name"},null,40,Dz),t("span",Vz,w(n.value)+" Pack  "+w(N.value.length)+" Cards",1)]),t("button",{onClick:O,class:"shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-300 hover:text-black transition-colors"},[...z[27]||(z[27]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])])]),t("div",Bz,[(d(!0),f(oe,null,ye(N.value,D=>(d(),f("div",{key:D.id,class:W(["relative group rounded-xl bg-white border border-zinc-100 shadow-sm hover:shadow-md transition-all overflow-hidden",u.value.has(D.id)?"ring-1 ring-black":""]),onClick:ae=>b.value?Y(D.id):null},[t("div",Fz,[t("div",{class:"w-full h-full flex items-center justify-center pointer-events-none select-none origin-center scale-[0.7] entry-preview",innerHTML:D.html},null,8,Wz),b.value?M("",!0):(d(),f("div",Kz,[t("button",{onClick:je(ae=>A(D),["stop"]),class:"p-1.5 bg-white rounded-full shadow-sm hover:bg-zinc-100 text-zinc-600"},[...z[28]||(z[28]=[t("span",{class:"material-symbols-outlined text-[14px]"},"edit",-1)])],8,Hz)])),b.value?(d(),f("div",Gz,[u.value.has(D.id)?(d(),f("div",qz)):M("",!0)])):M("",!0)]),t("div",Yz,[t("h4",Jz,w(D.name),1),t("code",Xz,w(D.regex),1)])],10,Uz))),128)),b.value?M("",!0):(d(),f("button",{key:0,onClick:z[7]||(z[7]=D=>A()),class:"min-h-[180px] rounded-xl border border-dashed border-zinc-200 flex flex-col items-center justify-center hover:bg-zinc-50 hover:border-zinc-400 transition-all gap-2 group"},[...z[29]||(z[29]=[t("span",{class:"material-symbols-outlined text-zinc-300 text-[20px] group-hover:text-black transition-colors"},"add",-1),t("span",{class:"text-[9px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black transition-colors"},"Add Card",-1)])]))])])):(d(),f("div",Sz,[t("div",Iz,[(d(!0),f(oe,null,ye(U.value,D=>(d(),f("div",{key:D.id,class:W(["aspect-[4/3] bg-zinc-50 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 transition-all group relative p-6 text-center select-none border",u.value.has(D.id)?"border-black bg-zinc-100":"border-transparent"]),onClick:ae=>S(D)},[t("span",Tz,w(D.name),1),t("div",Ez,w(at(Gl)(D.id).length)+" cards",1),b.value?(d(),f("div",jz,[u.value.has(D.id)?(d(),f("div",Az)):M("",!0)])):M("",!0)],10,Mz))),128)),b.value?M("",!0):(d(),f("button",{key:0,onClick:z[6]||(z[6]=D=>l.value=!0),class:"aspect-[4/3] border border-dashed border-zinc-200 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:border-zinc-400 hover:bg-zinc-50 transition-all group"},[...z[25]||(z[25]=[t("span",{class:"material-symbols-outlined text-zinc-300 group-hover:text-black transition-colors mb-2 text-[32px]"},"add",-1),t("span",{class:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest group-hover:text-black"},"New Pack",-1)])]))]),U.value.length===0&&!b.value?(d(),f("div",Oz,[z[26]||(z[26]=t("span",{class:"material-symbols-outlined text-[48px] mb-2 opacity-20"},"style",-1)),t("p",Pz,"No categories in "+w(n.value),1)])):M("",!0)]))]),b.value&&u.value.size>0?(d(),f("div",Qz,[t("span",Zz,w(u.value.size),1),z[33]||(z[33]=t("div",{class:"h-3 w-px bg-zinc-700"},null,-1)),t("button",{onClick:se,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Export"},[...z[30]||(z[30]=[t("span",{class:"material-symbols-outlined text-[16px]"},"ios_share",-1)])]),o.value?(d(),f("button",{key:0,onClick:ze,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Move"},[...z[31]||(z[31]=[t("span",{class:"material-symbols-outlined text-[16px]"},"drive_file_move",-1)])])):M("",!0),t("button",{onClick:ce,class:"p-1.5 hover:bg-zinc-800 rounded-full transition-colors",title:"Delete"},[...z[32]||(z[32]=[t("span",{class:"material-symbols-outlined text-[16px]"},"delete",-1)])])])):M("",!0),(d(),Te(ft,{to:"body"},[l.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:z[10]||(z[10]=je(D=>l.value=!1,["self"]))},[t("div",e$,[t("div",t$,[z[35]||(z[35]=t("h3",{class:"font-serif italic text-2xl mb-1"},"New Pack",-1)),t("p",s$,[z[34]||(z[34]=ns("Create a regex collection in ",-1)),t("span",n$,w(n.value),1)])]),ie(t("input",{"onUpdate:modelValue":z[8]||(z[8]=D=>i.value=D),placeholder:"Pack Name...",class:"w-full bg-zinc-50 border-none rounded-xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:xs(E,["enter"])},null,544),[[pe,i.value]]),t("div",o$,[t("button",{onClick:z[9]||(z[9]=D=>l.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:E,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"}," Create ")])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[a.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-6 animate-in fade-in duration-200",onClick:z[15]||(z[15]=je(D=>a.value=!1,["self"]))},[t("div",l$,[t("div",i$,[t("div",a$,[t("h3",r$,w(r.value?"Edit Card":"New Card"),1),t("p",c$,w(o.value.name),1)]),t("div",d$,[t("div",u$,[z[36]||(z[36]=t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest ml-1"},"Name",-1)),ie(t("input",{"onUpdate:modelValue":z[11]||(z[11]=D=>p.value.name=D),type:"text",placeholder:"e.g. Bold Text",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 focus:ring-1 focus:ring-black transition-all outline-none text-sm"},null,512),[[pe,p.value.name]])]),t("div",p$,[z[37]||(z[37]=t("div",{class:"flex justify-between px-1"},[t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest"},"Regex"),t("a",{href:"https://regex101.com/",target:"_blank",class:"text-[9px] font-bold text-zinc-400 hover:text-black hover:underline transition-colors"},"Open Regex101 ")],-1)),ie(t("input",{"onUpdate:modelValue":z[12]||(z[12]=D=>p.value.regex=D),type:"text",placeholder:"^\\d+$",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 font-mono text-sm focus:ring-1 focus:ring-black transition-all outline-none"},null,512),[[pe,p.value.regex]])]),t("div",f$,[z[38]||(z[38]=t("label",{class:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest ml-1"},"HTML Template",-1)),ie(t("textarea",{"onUpdate:modelValue":z[13]||(z[13]=D=>p.value.html=D),rows:"4",placeholder:"<div>Content</div>",class:"w-full bg-zinc-50 border-none rounded-xl py-3 px-4 font-mono text-sm focus:ring-1 focus:ring-black transition-all resize-none outline-none"},null,512),[[pe,p.value.html]])]),t("div",v$,[p.value.html?(d(),f("div",{key:0,innerHTML:p.value.html},null,8,x$)):(d(),f("span",b$,"Preview Output"))])]),t("div",m$,[t("button",{onClick:z[14]||(z[14]=D=>a.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:R,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},w(r.value?"Save":"Create"),1)])])])])):M("",!0)])),(d(),Te(ft,{to:"body"},[v.value?(d(),f("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999] flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:z[17]||(z[17]=je(D=>v.value=!1,["self"]))},[t("div",g$,[z[39]||(z[39]=t("div",{class:"text-center"},[t("h3",{class:"font-serif italic text-2xl mb-1"},"Move to..."),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination pack")],-1)),t("div",h$,[(d(!0),f(oe,null,ye(U.value.filter(D=>D.id!==o.value.id),D=>(d(),f("button",{key:D.id,onClick:ae=>g.value=D.id,class:W(["w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex items-center justify-between",g.value===D.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[t("span",null,w(D.name),1),g.value===D.id?(d(),f("span",w$,"check")):M("",!0)],10,y$))),128)),U.value.length<=1?(d(),f("div",k$,"No other packs available")):M("",!0)]),t("div",_$,[t("button",{onClick:z[16]||(z[16]=D=>v.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"}," Cancel "),t("button",{onClick:Ee,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg",disabled:!g.value}," Move ",8,z$)])])])):M("",!0)]))]))}},C$=rt($$,[["__scopeId","data-v-1a2505a7"]]),S$={class:"noir-app-container w-full h-full bg-white relative font-sans text-black overflow-hidden flex flex-col"},I$={key:3,class:"w-full h-full"},M$={key:10,class:"flex-1 flex items-center justify-center h-full"},T$={__name:"NoirApp",emits:["close"],setup(e,{emit:s}){const n=C("feed"),o=C(!1),l=C(null),i=C(!1),a=be(()=>k.videoCallState.isActive&&k.videoCallState.chatId?k.videoCallState.chatId:l.value?.id);Dt(()=>{lf()}),ds([()=>n.value,()=>k.videoCallState.isActive],([u,v])=>{(u==="chat"||v)&&(i.value=!0)});const r=(u,v=null)=>{l.value=v,n.value=u},p=u=>{if(u==="compose"){o.value=!0;return}n.value=u},b=be(()=>{const u=n.value;return u==="profile"&&l.value?.id||u==="following"?"feed":u});return(u,v)=>(d(),f("div",S$,[n.value==="feed"?(d(),Te(Df,{key:0,onClose:v[0]||(v[0]=g=>u.$emit("close")),onNavigate:r})):M("",!0),n.value==="post"?(d(),Te(_h,{key:1,postId:l.value?.id,onBack:v[1]||(v[1]=g=>r("feed"))},null,8,["postId"])):M("",!0),n.value==="inbox"?(d(),Te(Q0,{key:2,onNavigate:r,onClose:v[2]||(v[2]=g=>u.$emit("close"))})):M("",!0),i.value?ie((d(),f("div",I$,[Ze(Sg,{chatId:a.value,onBack:v[3]||(v[3]=g=>r("inbox")),onNavigate:r},null,8,["chatId"])],512)),[[ji,n.value==="chat"]]):M("",!0),n.value==="chat-settings"?(d(),Te(_4,{key:4,chatId:l.value?.id,onBack:v[4]||(v[4]=g=>r("chat",{id:l.value?.id})),onNavigate:r},null,8,["chatId"])):M("",!0),n.value==="chat-settings-identity"?(d(),Te(w5,{key:5,chatId:l.value?.id,onBack:v[5]||(v[5]=g=>r("chat-settings",{id:l.value?.id}))},null,8,["chatId"])):M("",!0),n.value==="worldbook-selector"?(d(),Te(W5,{key:6,chatId:l.value?.id,onBack:v[6]||(v[6]=g=>r("chat-settings",{id:l.value?.id}))},null,8,["chatId"])):M("",!0),n.value==="wallet"?(d(),Te(uz,{key:7,onBack:v[7]||(v[7]=g=>r("profile"))})):M("",!0),n.value==="profile"?(d(),Te(ih,{key:8,contactId:l.value?.id,onBack:v[8]||(v[8]=g=>l.value?.id?r("following"):u.$emit("close")),onNavigate:r},null,8,["contactId"])):M("",!0),n.value==="char-memory"?(d(),Te(p2,{key:9,contactId:l.value?.id,onBack:v[9]||(v[9]=g=>r("profile",{id:l.value?.id}))},null,8,["contactId"])):M("",!0),Ze(nn,{name:"slide-up"},{default:Cs(()=>[o.value?(d(),Te(gh,{key:0,onClose:v[10]||(v[10]=g=>o.value=!1)})):M("",!0)]),_:1}),n.value==="activity"?(d(),f("div",M$,[...v[25]||(v[25]=[t("span",{class:"text-zinc-400 font-serif italic text-xl"},"Coming soon...",-1)])])):M("",!0),n.value==="persona-archive"?(d(),Te(Ph,{key:11,onBack:v[11]||(v[11]=g=>r("profile")),onAdd:v[12]||(v[12]=g=>r("persona-edit")),onEdit:v[13]||(v[13]=g=>r("persona-edit",{id:g})),onSelect:v[14]||(v[14]=g=>r("profile"))})):M("",!0),n.value==="persona-edit"?(d(),Te(Yh,{key:12,personaId:l.value?.id,onBack:v[15]||(v[15]=g=>r("persona-archive")),onSave:v[16]||(v[16]=g=>r("persona-archive"))},null,8,["personaId"])):M("",!0),n.value==="following"?(d(),Te(dy,{key:13,onBack:v[17]||(v[17]=g=>r("feed")),onAdd:v[18]||(v[18]=g=>r("contact-edit")),onEdit:v[19]||(v[19]=g=>r("contact-edit",{id:g})),onNavigate:r})):M("",!0),n.value==="contact-edit"?(d(),Te($y,{key:14,contactId:l.value?.id,onBack:v[20]||(v[20]=g=>r("following")),onSave:v[21]||(v[21]=g=>r("following"))},null,8,["contactId"])):M("",!0),n.value==="relationship-network"?(d(),Te(F3,{key:15,myPersonaId:l.value?.id,onBack:v[22]||(v[22]=g=>r("profile"))},null,8,["myPersonaId"])):M("",!0),n.value==="sticker-library"?(d(),Te(A_,{key:16,onBack:v[23]||(v[23]=g=>r("profile"))})):M("",!0),n.value==="regex-manager"?(d(),Te(C$,{key:17,onBack:v[24]||(v[24]=g=>r("profile"))})):M("",!0),["feed","inbox","profile","activity","following"].includes(n.value)||n.value==="profile"&&l.value?.id?(d(),Te(mz,{key:18,activeTab:b.value,onChange:p},null,8,["activeTab"])):M("",!0)]))}},E$=rt(T$,[["__scopeId","data-v-c14519fb"]]),j$={class:"h-full flex flex-col bg-white overflow-hidden"},A$={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},O$={class:"flex items-center gap-3"},P$={class:"flex-1 overflow-y-auto p-6 space-y-3 pb-12"},R$={class:"space-y-3"},N$={__name:"SettingsHome",emits:["close","navigate"],setup(e,{emit:s}){return(n,o)=>(d(),f("div",j$,[t("div",A$,[t("div",O$,[t("button",{onClick:o[0]||(o[0]=l=>n.$emit("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...o[2]||(o[2]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),o[3]||(o[3]=t("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"Settings",-1))])]),t("main",P$,[t("div",R$,[t("button",{onClick:o[1]||(o[1]=l=>n.$emit("navigate","api-setup")),class:"w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all"},[...o[4]||(o[4]=[kt('<div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>api</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501>API </span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Configure AI providers</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span>',2)])]),o[5]||(o[5]=kt('<button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>palette</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501></span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>person</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Manage personas</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>lock</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Privacy settings</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button><button class="w-full bg-zinc-50 rounded-2xl p-5 flex items-center justify-between group hover:bg-zinc-100 transition-all" data-v-b01f0501><div class="flex items-center gap-4" data-v-b01f0501><div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm" data-v-b01f0501><span class="material-symbols-outlined text-zinc-600 text-[20px]" data-v-b01f0501>notifications</span></div><div class="text-left" data-v-b01f0501><span class="text-[14px] font-medium text-zinc-900 block" data-v-b01f0501></span><span class="text-[11px] text-zinc-400" data-v-b01f0501>Notification preferences</span></div></div><span class="material-symbols-outlined text-zinc-300 group-hover:text-zinc-500 transition-colors" data-v-b01f0501>chevron_right</span></button>',4))]),o[6]||(o[6]=kt('<div class="mt-8" data-v-b01f0501><div class="text-[10px] text-zinc-400 uppercase tracking-widest mb-4 px-1 font-bold" data-v-b01f0501></div><div class="bg-zinc-50 rounded-2xl overflow-hidden" data-v-b01f0501><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors border-b border-zinc-100" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button><button class="w-full px-5 py-4 flex items-center justify-between group hover:bg-zinc-100 transition-colors" data-v-b01f0501><span class="text-[13px] font-medium text-zinc-600" data-v-b01f0501></span><span class="material-symbols-outlined text-zinc-300 text-[18px]" data-v-b01f0501>chevron_right</span></button></div><div class="text-center py-8" data-v-b01f0501><p class="text-[9px] font-mono uppercase tracking-[0.3em] text-zinc-300 italic" data-v-b01f0501>Settings  v2.4.0 (Build 992)</p></div></div><button class="w-full py-4 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors" data-v-b01f0501>  </button>',2))])]))}},L$=rt(N$,[["__scopeId","data-v-b01f0501"]]),D$={class:"h-full flex flex-col bg-white w-full relative overflow-hidden"},V$={class:"sticky top-0 h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-20"},B$={class:"flex items-center gap-3"},U$={class:"flex-1 overflow-y-auto p-6 pb-40 space-y-6"},F$={class:"flex gap-2 overflow-x-auto no-scrollbar pb-2"},W$=["onClick"],K$={class:"bg-zinc-50 rounded-2xl p-5"},H$={class:"flex gap-2"},G$={class:"bg-zinc-50 rounded-2xl p-5"},q$={class:"flex justify-between items-center mb-4"},Y$={class:"mt-3 relative"},J$=["value"],X$={class:"bg-zinc-50 rounded-2xl p-5 space-y-4"},Q$={class:"relative"},Z$=["type"],e8={class:"material-symbols-outlined text-[18px]"},t8={class:"bg-zinc-50 rounded-2xl p-5"},s8={class:"flex justify-between items-center mb-6"},n8={class:"text-2xl font-semibold text-zinc-900"},o8={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},l8={class:"bg-zinc-50 rounded-2xl p-5 flex items-center justify-between"},i8={class:"flex items-center gap-3"},a8={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},r8={class:"grid grid-cols-2 gap-3"},c8={key:1,class:"fixed inset-0 z-[9999] flex justify-end"},d8={class:"relative w-[300px] h-full bg-white shadow-2xl flex flex-col animate-slide-in-right"},u8={class:"p-5 border-b border-zinc-100 flex items-center justify-between shrink-0"},p8={class:"flex-1 overflow-y-auto p-5 space-y-6"},f8={class:"bg-zinc-50 rounded-xl p-4"},v8={class:"relative"},x8=["value"],b8={key:0,class:"mt-3 flex items-center gap-2 text-[11px] text-green-600"},m8={__name:"ApiSetup",emits:["back"],setup(e,{emit:s}){const n=s,{provider:o,endpoint:l,apiKey:i,model:a,temperature:r,stream:p,modelsList:b,presetState:u,init:v,getPresetById:g,saveCurrentAsPreset:j,deleteCurrentPreset:U,fetchModels:N,commitSettings:L}=Ec(),S=Ks({provider:"openai",endpoint:"",apiKey:"",model:"",temperature:.7,stream:!1,currentPresetId:"custom"}),E=C(!1),T=C(!1),O=C(""),A=C(!1),R=C(!1),Y=Ks({memorySummarization:null}),we=()=>{try{const ue=localStorage.getItem("noir_mounted_apis");if(ue){const F=JSON.parse(ue);F.memorySummarization&&(Y.memorySummarization=F.memorySummarization)}}catch(ue){console.warn("Failed to load mounted APIs:",ue)}};ds(Y,()=>{localStorage.setItem("noir_mounted_apis",JSON.stringify(Y))},{deep:!0}),Dt(async()=>{await v(),ze(),we()});const ze=()=>{S.provider=o.value,S.endpoint=l.value,S.apiKey=i.value,S.model=a.value,S.temperature=r.value,S.stream=p.value!==void 0?p.value:!1,S.currentPresetId=u.currentPresetId},Ee=async()=>{await L({provider:S.provider,endpoint:S.endpoint,apiKey:S.apiKey,model:S.model,temperature:S.temperature,stream:S.stream,currentPresetId:S.currentPresetId}),n("back")},se=async()=>{E.value=!0,await N({endpoint:S.endpoint,apiKey:S.apiKey}),E.value=!1},K=async()=>{if(O.value)try{await j(O.value,S),T.value=!1,O.value="",ze()}catch(ue){console.error(ue),alert(": "+ue)}},I=async()=>{confirm("")&&(await U(),ze())},y=ue=>{if(ue==="custom"){S.currentPresetId="custom";return}const F=g(ue);F&&(S.provider=F.provider,S.endpoint=F.endpoint,F.apiKey&&(S.apiKey=F.apiKey),S.model=F.model,S.temperature=F.temperature,S.stream=F.stream!==void 0?F.stream:!1,S.currentPresetId=ue)},z=ue=>{S.provider=ue,ue==="gemini"?(S.endpoint="https://generativelanguage.googleapis.com/v1beta/openai/",S.model.includes("gpt")&&(S.model="gemini-1.5-flash")):S.endpoint="https://api.openai.com/v1",S.currentPresetId!=="custom"&&(S.currentPresetId="custom")},D=()=>{A.value=!A.value},ae=ue=>ue?ue==="custom"?"Custom":g(ue)?.name||ue:"";return(ue,F)=>(d(),f("div",D$,[t("div",V$,[t("div",B$,[t("button",{onClick:F[0]||(F[0]=ve=>ue.$emit("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...F[18]||(F[18]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),F[19]||(F[19]=t("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"API Setup",-1))]),t("button",{onClick:F[1]||(F[1]=ve=>R.value=!0),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 transition-colors"},[...F[20]||(F[20]=[t("span",{class:"material-symbols-outlined text-zinc-400 text-[20px]"},"tune",-1)])])]),t("main",U$,[t("div",F$,[(d(!0),f(oe,null,ye(at(u).list,ve=>(d(),f("button",{key:ve.id,onClick:xe=>y(ve.id),class:W(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",S.currentPresetId===ve.id?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])},w(ve.name),11,W$))),128)),t("button",{onClick:F[2]||(F[2]=ve=>y("custom")),class:W(["px-4 py-2 rounded-full text-[11px] font-bold uppercase tracking-wider whitespace-nowrap transition-all",S.currentPresetId==="custom"?"bg-black text-white":"bg-zinc-100 text-zinc-500 hover:bg-zinc-200"])}," Custom ",2)]),t("div",K$,[F[21]||(F[21]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold"}," / Provider",-1)),t("div",H$,[t("button",{onClick:F[3]||(F[3]=ve=>z("openai")),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",S.provider==="openai"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"OpenAI",2),t("button",{onClick:F[4]||(F[4]=ve=>z("gemini")),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",S.provider==="gemini"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"Gemini",2)])]),t("div",G$,[t("div",q$,[F[23]||(F[23]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Model",-1)),t("button",{onClick:se,class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-all flex items-center gap-2"},[F[22]||(F[22]=ns("  ",-1)),t("span",{class:W(["material-symbols-outlined text-[14px]",{"animate-spin":E.value}])},"sync",2)])]),ie(t("input",{"onUpdate:modelValue":F[5]||(F[5]=ve=>S.model=ve),class:"w-full bg-white rounded-2xl py-4 px-5 text-[15px] focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none border-none",placeholder:""},null,512),[[pe,S.model]]),t("div",Y$,[ie(t("select",{id:"modelSelect","onUpdate:modelValue":F[6]||(F[6]=ve=>S.model=ve),class:"w-full bg-white rounded-2xl py-3 px-5 text-[13px] font-medium text-zinc-600 appearance-none focus:ring-1 focus:ring-black outline-none cursor-pointer"},[(d(!0),f(oe,null,ye(at(b),ve=>(d(),f("option",{key:ve,value:ve},w(ve),9,J$))),128))],512),[[Ln,S.model]]),F[24]||(F[24]=t("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),t("div",X$,[t("div",null,[F[25]||(F[25]=t("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest block mb-2 font-bold"}," / Endpoint",-1)),ie(t("input",{"onUpdate:modelValue":F[7]||(F[7]=ve=>S.endpoint=ve),class:"w-full bg-white rounded-2xl py-3 px-5 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",type:"text",placeholder:"https://api.openai.com/v1"},null,512),[[pe,S.endpoint]])]),t("div",null,[F[26]||(F[26]=t("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest block mb-2 font-bold"},"API  ( Key  , )",-1)),t("div",Q$,[ie(t("input",{"onUpdate:modelValue":F[8]||(F[8]=ve=>S.apiKey=ve),type:A.value?"text":"password",class:"w-full bg-white rounded-2xl py-3 px-5 pr-12 focus:ring-1 focus:ring-black transition-all font-mono text-[13px] placeholder:text-zinc-300 outline-none border-none",placeholder:"sk-..., sk-..."},null,8,Z$),[[Bp,S.apiKey]]),t("button",{onClick:D,class:"absolute right-3 top-1/2 -translate-y-1/2 w-8 h-8 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-400 hover:text-black transition-colors"},[t("span",e8,w(A.value?"visibility_off":"visibility"),1)])])])]),t("div",t8,[t("div",s8,[F[27]||(F[27]=t("span",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Temperature",-1)),t("span",n8,w(S.temperature),1)]),ie(t("input",{"onUpdate:modelValue":F[9]||(F[9]=ve=>S.temperature=ve),class:"w-full",max:"2",min:"0",step:"0.1",type:"range"},null,512),[[pe,S.temperature,void 0,{number:!0}]]),F[28]||(F[28]=t("div",{class:"mt-3 flex justify-between text-[9px] font-mono uppercase text-zinc-300 tracking-widest"},[t("span",null," (0.0)"),t("span",null," (2.0)")],-1))]),t("div",o8,[F[29]||(F[29]=t("label",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"}," / Streaming",-1)),t("button",{onClick:F[10]||(F[10]=ve=>S.stream=!S.stream),class:W(["w-14 h-8 rounded-full relative transition-colors duration-200",S.stream?"bg-black":"bg-zinc-200"])},[t("div",{class:W(["absolute top-1 left-1 w-6 h-6 rounded-full bg-white transition-transform duration-200 shadow-sm",S.stream?"translate-x-6":"translate-x-0"])},null,2)],2)]),t("div",l8,[F[30]||(F[30]=t("span",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold"},"Preset Management",-1)),t("div",i8,[S.currentPresetId!=="custom"?(d(),f("button",{key:0,onClick:I,class:"px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 transition-colors"},"  ")):M("",!0),t("button",{onClick:F[11]||(F[11]=ve=>T.value=!0),class:"px-4 py-2 rounded-full bg-white text-[10px] font-bold uppercase tracking-wider text-zinc-600 hover:bg-zinc-100 transition-colors"},"")])]),(d(),Te(ft,{to:"body"},[T.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm px-8 animate-in fade-in duration-200",onClick:F[14]||(F[14]=je(ve=>T.value=!1,["self"]))},[t("div",a8,[F[31]||(F[31]=t("div",{class:"text-center"},[t("h3",{class:"text-xl font-semibold mb-1"},"Save Preset"),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Create a new configuration")],-1)),ie(t("input",{"onUpdate:modelValue":F[12]||(F[12]=ve=>O.value=ve),placeholder:"Preset Name (e.g. Coding)",class:"w-full bg-zinc-50 border-none rounded-2xl py-4 px-6 text-center text-lg font-medium focus:ring-1 focus:ring-black placeholder:text-zinc-300 transition-all outline-none",autofocus:"",onKeyup:xs(K,["enter"])},null,544),[[pe,O.value]]),t("div",r8,[t("button",{onClick:F[13]||(F[13]=ve=>T.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),t("button",{onClick:K,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Save")])])])):M("",!0),R.value?(d(),f("div",c8,[t("div",{class:"absolute inset-0 bg-black/30 backdrop-blur-sm",onClick:F[15]||(F[15]=ve=>R.value=!1)}),t("div",d8,[t("div",u8,[F[33]||(F[33]=t("div",null,[t("span",{class:"font-bold text-lg block"},"API "),t("span",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Function Bindings")],-1)),t("button",{onClick:F[16]||(F[16]=ve=>R.value=!1),class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 hover:text-black"},[...F[32]||(F[32]=[t("span",{class:"material-symbols-outlined"},"close",-1)])])]),t("div",p8,[F[39]||(F[39]=t("div",{class:"bg-zinc-50 rounded-xl p-4 text-[12px] text-zinc-500 leading-relaxed"},[t("span",{class:"material-symbols-outlined text-[14px] mr-1 align-middle"},"info"),ns("  ")],-1)),t("div",f8,[F[37]||(F[37]=t("div",{class:"flex items-center gap-2 mb-3"},[t("span",{class:"material-symbols-outlined text-[18px] text-zinc-600"},"psychology"),t("span",{class:"text-[13px] font-bold"},"")],-1)),F[38]||(F[38]=t("p",{class:"text-[11px] text-zinc-400 mb-4"}," API ",-1)),t("div",v8,[ie(t("select",{"onUpdate:modelValue":F[17]||(F[17]=ve=>Y.memorySummarization=ve),class:"w-full bg-white border border-zinc-200 rounded-lg py-2.5 px-4 text-[13px] appearance-none focus:border-black focus:outline-none cursor-pointer"},[F[34]||(F[34]=t("option",{value:null},"",-1)),(d(!0),f(oe,null,ye(at(u).list,ve=>(d(),f("option",{key:ve.id,value:ve.id},w(ve.name),9,x8))),128))],512),[[Ln,Y.memorySummarization]]),F[35]||(F[35]=t("span",{class:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400 text-[18px]"},"expand_more",-1))]),Y.memorySummarization?(d(),f("div",b8,[F[36]||(F[36]=t("span",{class:"material-symbols-outlined text-[14px]"},"check_circle",-1)),ns(" : "+w(ae(Y.memorySummarization)),1)])):M("",!0)]),F[40]||(F[40]=t("div",{class:"text-center py-8 text-zinc-300 text-[11px] uppercase tracking-widest"},"  ",-1))])])])):M("",!0)])),t("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 w-[calc(100%-3rem)] max-w-sm"},[t("button",{onClick:Ee,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl"},[...F[41]||(F[41]=[t("span",{class:"text-[11px] uppercase tracking-[0.2em] font-bold"},"",-1),t("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])])]))}},g8=rt(m8,[["__scopeId","data-v-c8052ce6"]]),h8={class:"h-full w-full bg-background-light dark:bg-background-dark text-black dark:text-white font-sans overflow-hidden relative"},y8={__name:"SettingsApp",emits:["close"],setup(e,{emit:s}){const n=s,o=C("home"),l=a=>{o.value=a},i=()=>{o.value==="home"?n("close"):o.value="home"};return(a,r)=>(d(),f("div",h8,[Ze(nn,{name:"slide"},{default:Cs(()=>[o.value==="home"?(d(),Te(L$,{onClose:r[0]||(r[0]=p=>a.$emit("close")),onNavigate:l,key:"home"})):o.value==="api-setup"?(d(),Te(g8,{onBack:i,key:"api-setup"})):M("",!0)]),_:1})]))}},w8=rt(y8,[["__scopeId","data-v-49131ef6"]]),k8={class:"h-full w-full bg-white flex flex-col"},_8={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},z8={class:"flex gap-2"},$8={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6 space-y-6"},C8={class:"bg-zinc-50 rounded-2xl p-5"},S8={class:"relative"},I8=["value"],M8={class:"bg-zinc-50 rounded-2xl p-5"},T8={class:"bg-zinc-50 rounded-2xl p-5"},E8={class:"flex gap-3"},j8={key:0,class:"bg-zinc-50 rounded-2xl p-5 animate-fade-in"},A8={class:"bg-zinc-50 rounded-2xl p-5"},O8={class:"flex gap-2"},P8={class:"bg-zinc-50 rounded-2xl p-5"},R8={class:"flex items-center justify-between mb-3"},N8={class:"text-[10px] text-zinc-400"},L8={class:"flex items-center gap-3"},D8={class:"text-2xl font-semibold w-12 text-center"},V8={__name:"EntryEdit",props:{entryId:{type:String,default:null},initialCategoryId:{type:String,required:!0},initialScope:{type:String,default:"global"}},emits:["back","save"],setup(e,{emit:s}){const n=e,o=s,l=wo(),i=C(""),a=C(""),r=C(n.initialCategoryId),p=C(n.initialScope),b=C(!1),u=C(""),v=C("front"),g=C(0),j=l.getCategories(),U=!n.entryId;Dt(()=>{if(!U&&n.entryId){const S=l.getEntry(n.entryId);S&&(i.value=S.title,a.value=S.content,r.value=S.categoryId,p.value=S.scope||"global",b.value=S.isConstant,u.value=S.keywords.join(", "),v.value=S.position,g.value=S.depth)}});const N=()=>{if(!i.value.trim()||!a.value.trim())return;const S={title:i.value,content:a.value,categoryId:r.value,scope:p.value,isConstant:b.value,keywords:b.value?[]:u.value.split(",").map(E=>E.trim()).filter(Boolean),position:v.value,depth:Number(g.value)};U?l.addEntry(S):n.entryId&&l.updateEntry(n.entryId,S),o("save")},L=()=>{!U&&n.entryId&&(l.deleteEntry(n.entryId),o("back"))};return(S,E)=>(d(),f("div",k8,[t("div",_8,[t("button",{onClick:E[0]||(E[0]=T=>o("back")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...E[12]||(E[12]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),t("div",z8,[U?M("",!0):(d(),f("button",{key:0,onClick:L,class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-400 hover:text-red-500 transition-colors"},[...E[13]||(E[13]=[t("span",{class:"material-symbols-outlined text-[20px]"},"delete",-1)])])),E[14]||(E[14]=t("button",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-50 text-zinc-400 transition-colors"},[t("span",{class:"material-symbols-outlined text-[20px]"},"more_horiz")],-1))])]),t("div",$8,[t("div",C8,[E[16]||(E[16]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-bold"}," / Category",-1)),t("div",S8,[ie(t("select",{"onUpdate:modelValue":E[1]||(E[1]=T=>r.value=T),class:"w-full text-[15px] font-medium bg-white rounded-2xl py-3 px-5 outline-none appearance-none cursor-pointer focus:ring-1 focus:ring-black border-none"},[(d(!0),f(oe,null,ye(at(j),T=>(d(),f("option",{key:T.id,value:T.id},w(T.name),9,I8))),128))],512),[[Ln,r.value]]),E[15]||(E[15]=t("span",{class:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-400"},"expand_more",-1))])]),t("div",null,[E[17]||(E[17]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold px-1"}," / Title",-1)),ie(t("input",{"onUpdate:modelValue":E[2]||(E[2]=T=>i.value=T),type:"text",placeholder:"Enter Title",class:"w-full text-2xl font-semibold bg-transparent focus:outline-none placeholder:text-zinc-300 border-none p-0"},null,512),[[pe,i.value]])]),t("div",M8,[E[18]||(E[18]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-3 font-bold"}," / Content",-1)),ie(t("textarea",{"onUpdate:modelValue":E[3]||(E[3]=T=>a.value=T),placeholder:"Enter lore content...",class:"w-full min-h-[150px] text-[14px] leading-relaxed font-normal text-zinc-800 bg-white rounded-2xl p-4 outline-none resize-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[pe,a.value]])]),t("div",T8,[E[19]||(E[19]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-4 font-bold"}," / Mode",-1)),t("div",E8,[t("button",{onClick:E[4]||(E[4]=T=>b.value=!1),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",b.value?"bg-white text-zinc-500 hover:bg-zinc-100":"bg-black text-white"])},"  (Trigger) ",2),t("button",{onClick:E[5]||(E[5]=T=>b.value=!0),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",b.value?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Global) ",2)])]),b.value?M("",!0):(d(),f("div",j8,[E[20]||(E[20]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-2 font-bold"}," / Keywords",-1)),ie(t("input",{"onUpdate:modelValue":E[6]||(E[6]=T=>u.value=T),type:"text",placeholder:"tag1, tag2...",class:"w-full text-lg font-medium bg-white rounded-2xl py-3 px-5 outline-none placeholder:text-zinc-300 focus:ring-1 focus:ring-black border-none"},null,512),[[pe,u.value]])])),t("div",A8,[E[21]||(E[21]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-4 font-bold"}," / Injection Position",-1)),t("div",O8,[t("button",{onClick:E[7]||(E[7]=T=>v.value="front"),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",v.value==="front"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Front) ",2),t("button",{onClick:E[8]||(E[8]=T=>v.value="mid"),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",v.value==="mid"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Mid) ",2),t("button",{onClick:E[9]||(E[9]=T=>v.value="back"),class:W(["flex-1 py-3 rounded-full font-bold text-xs uppercase tracking-widest transition-all",v.value==="back"?"bg-black text-white":"bg-white text-zinc-500 hover:bg-zinc-100"])},"  (Back) ",2)])]),t("div",P8,[t("div",R8,[t("div",null,[E[22]||(E[22]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest mb-1 font-bold"}," / Logic Depth",-1)),t("div",N8,w(g.value===0?"":`${g.value}`),1)]),t("div",L8,[t("button",{onClick:E[10]||(E[10]=T=>g.value=Math.max(0,g.value-1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...E[23]||(E[23]=[t("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"remove",-1)])]),t("span",D8,w(g.value),1),t("button",{onClick:E[11]||(E[11]=T=>g.value=Math.min(10,g.value+1)),class:"w-10 h-10 rounded-full bg-white flex items-center justify-center hover:bg-zinc-100 transition-colors"},[...E[24]||(E[24]=[t("span",{class:"material-symbols-outlined text-zinc-500 text-[18px]"},"add",-1)])])])]),E[25]||(E[25]=t("div",{class:"text-[10px] text-zinc-300 italic"},"0 = , 1-10 = ",-1))]),t("button",{onClick:N,class:"w-full bg-black text-white py-4 rounded-full flex items-center justify-center gap-3 transition-transform active:scale-95 shadow-2xl mt-4"},[...E[26]||(E[26]=[t("span",{class:"text-[11px] font-bold uppercase tracking-[0.2em]"},"Save & Sync",-1),t("span",{class:"material-symbols-outlined text-[18px]"},"check",-1)])])])]))}},B8=rt(V8,[["__scopeId","data-v-560b7b8d"]]),U8={class:"h-full w-full bg-white flex flex-col relative overflow-hidden"},F8={key:0,class:"absolute inset-0 z-20 bg-white"},W8={class:"bg-white w-full max-w-sm rounded-[32px] shadow-2xl flex flex-col gap-6 p-6 animate-in zoom-in-95 duration-300"},K8={class:"max-h-60 overflow-y-auto bg-zinc-50 rounded-2xl p-2"},H8=["onClick"],G8={key:0,class:"material-symbols-outlined text-sm"},q8={class:"grid grid-cols-2 gap-3"},Y8={key:1,class:"flex flex-col h-full"},J8={class:"h-[calc(4rem+env(safe-area-inset-top))] pt-[env(safe-area-inset-top)] border-b border-zinc-50 flex items-center justify-between px-6 shrink-0 bg-white/95 backdrop-blur z-10"},X8={class:"flex items-center gap-3"},Q8={class:"flex bg-zinc-100 rounded-full p-1"},Z8={class:"flex-grow overflow-y-auto px-6 pb-32 no-scrollbar pt-6"},eC={key:0,class:"space-y-4"},tC={key:0,class:"animate-fade-in space-y-6"},sC={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-black text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6 z-40"},nC={class:"text-[11px] font-bold uppercase tracking-wider text-white/50"},oC={class:"space-y-4"},lC={class:"flex items-center justify-between mb-3"},iC=["onUpdate:modelValue","onChange"],aC=["onClick"],rC={class:"space-y-2"},cC=["onClick"],dC={class:"w-5 h-5 rounded-full border border-zinc-200 bg-white flex items-center justify-center"},uC={key:0,class:"w-3 h-3 bg-black rounded-full"},pC={class:"flex items-center gap-3"},fC=["disabled"],vC={key:1,class:"space-y-3"},xC=["onClick"],bC={class:"flex items-center gap-3"},mC={class:"text-[15px] font-medium text-zinc-900"},gC={class:"text-[9px] text-zinc-300 uppercase tracking-widest font-bold"},hC={key:0,class:"px-5 pb-5 pt-0 space-y-2 border-t border-zinc-100"},yC=["onClick"],wC={class:"font-medium text-[13px] text-zinc-800 group-hover/entry:text-black"},kC={class:"text-[11px] text-zinc-400 line-clamp-1 mt-0.5"},_C=["onClick"],zC={class:"text-[10px] font-bold text-zinc-300 group-hover/add:text-black uppercase tracking-wider"},$C={key:1,class:"mt-2"},CC={class:"relative mb-6"},SC={class:"space-y-3"},IC=["onClick"],MC={class:"flex items-center gap-2 mb-2"},TC={class:"text-[9px] font-bold px-2 py-1 bg-white rounded-full text-zinc-500 uppercase"},EC={class:"text-[9px] text-zinc-400 uppercase tracking-widest"},jC={class:"text-[14px] font-medium text-zinc-900 mb-1"},AC={class:"text-[12px] text-zinc-500 line-clamp-2"},OC={class:"fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur pb-[env(safe-area-inset-bottom)] pt-3 flex justify-around items-center z-10 border-t border-zinc-50"},PC={__name:"WorldBookApp",emits:["close"],setup(e,{emit:s}){const n=s,o=wo(),l=C("home"),i=C("global"),a=C("main"),r=C(!1),p=C(""),b=C(new Set),u=C(!1),v=C(""),g=C(new Set),j=C(null),U=C(""),N=be(()=>o.getCategories()),L=C(""),S=be(()=>L.value?o.searchEntries(L.value):[]),E=y=>{if(r.value){ce(y);return}j.value=y,U.value="",a.value="edit"},T=y=>{j.value=null,U.value=y||N.value[0]?.id,a.value="edit"},O=()=>{a.value="main",j.value=null},A=()=>{a.value="main",j.value=null},R=()=>{p.value.trim()&&(o.addCategory(p.value.trim()),p.value="")},Y=y=>{confirm("Are you sure? This will delete all entries in this category.")&&o.deleteCategory(y)},we=()=>{r.value=!r.value,r.value&&(l.value="home"),b.value.clear()},ce=y=>{b.value.has(y)?b.value.delete(y):b.value.add(y),b.value=new Set(b.value)},ze=()=>{b.value.size!==0&&(v.value=N.value[0]?.id,u.value=!0)},Ee=()=>{v.value&&(b.value.forEach(y=>{o.updateEntry(y,{categoryId:v.value})}),b.value.clear(),u.value=!1,r.value=!1)},se=y=>o.getEntriesByCategory(y,i.value),K=y=>{g.value.has(y)?g.value.delete(y):g.value.add(y),g.value=new Set(g.value)},I=y=>g.value.has(y);return(y,z)=>(d(),f("div",U8,[a.value==="edit"?(d(),f("div",F8,[Ze(B8,{"entry-id":j.value,"initial-category-id":U.value,"initial-scope":i.value,onBack:O,onSave:A},null,8,["entry-id","initial-category-id","initial-scope"])])):M("",!0),(d(),Te(ft,{to:"body"},[u.value?(d(),f("div",{key:0,class:"fixed inset-0 z-[9999] bg-black/40 backdrop-blur-sm flex items-center justify-center px-8 animate-in fade-in duration-200",onClick:z[1]||(z[1]=je(D=>u.value=!1,["self"]))},[t("div",W8,[z[9]||(z[9]=t("div",{class:"text-center"},[t("h3",{class:"text-xl font-semibold mb-1"},"Move Entries"),t("p",{class:"text-[10px] text-zinc-400 uppercase tracking-widest"},"Select destination category")],-1)),t("div",K8,[(d(!0),f(oe,null,ye(N.value,D=>(d(),f("button",{key:D.id,onClick:ae=>v.value=D.id,class:W(["w-full text-left px-4 py-3 rounded-xl text-sm font-medium transition-colors flex items-center justify-between",v.value===D.id?"bg-black text-white":"hover:bg-zinc-200 text-zinc-600"])},[t("span",null,w(D.name),1),v.value===D.id?(d(),f("span",G8,"check")):M("",!0)],10,H8))),128))]),t("div",q8,[t("button",{onClick:z[0]||(z[0]=D=>u.value=!1),class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-zinc-100 text-zinc-500 hover:bg-zinc-200 transition-colors"},"Cancel"),t("button",{onClick:Ee,class:"py-3.5 rounded-full font-bold text-xs uppercase tracking-widest bg-black text-white hover:bg-zinc-800 transition-colors shadow-lg"},"Confirm")])])])):M("",!0)])),a.value!=="edit"?(d(),f("div",Y8,[t("div",J8,[t("div",X8,[t("button",{onClick:z[2]||(z[2]=D=>n("close")),class:"w-10 h-10 flex items-center justify-center hover:bg-zinc-50 rounded-full transition-colors -ml-2"},[...z[10]||(z[10]=[t("span",{class:"material-symbols-outlined text-zinc-900 text-[18px]"},"arrow_back_ios_new",-1)])]),z[11]||(z[11]=t("span",{class:"text-[17px] font-semibold tracking-tight text-zinc-900"},"World Book",-1))]),t("div",Q8,[t("button",{onClick:z[3]||(z[3]=D=>i.value="global"),class:W(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all",i.value==="global"?"bg-black text-white":"text-zinc-500"])},"Global",2),t("button",{onClick:z[4]||(z[4]=D=>i.value="local"),class:W(["px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all",i.value==="local"?"bg-black text-white":"text-zinc-500"])},"Local",2)])]),t("div",Z8,[l.value==="home"?(d(),f("div",eC,[r.value?(d(),f("div",tC,[b.value.size>0?(d(),f("div",sC,[t("span",nC,w(b.value.size)+" Selected",1),z[13]||(z[13]=t("div",{class:"h-4 w-px bg-white/20"},null,-1)),t("button",{onClick:ze,class:"flex items-center gap-2 hover:opacity-80 transition-opacity"},[...z[12]||(z[12]=[t("span",{class:"material-symbols-outlined text-[18px]"},"drive_file_move",-1),t("span",{class:"text-[11px] font-bold"},"Move",-1)])])])):M("",!0),z[16]||(z[16]=t("div",{class:"text-[10px] text-zinc-600 uppercase tracking-widest font-bold flex items-center gap-2"},[t("span",{class:"material-symbols-outlined text-[14px]"},"edit"),ns(" Manage Categories ")],-1)),t("div",oC,[(d(!0),f(oe,null,ye(N.value,D=>(d(),f("div",{key:D.id,class:"bg-zinc-50 rounded-2xl p-4"},[t("div",lC,[ie(t("input",{"onUpdate:modelValue":ae=>D.name=ae,onChange:ae=>at(o).updateCategory(D.id,D.name),class:"flex-grow text-[15px] font-medium bg-transparent outline-none focus:ring-0 border-none p-0"},null,40,iC),[[pe,D.name]]),t("button",{onClick:ae=>Y(D.id),class:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-zinc-300 hover:text-red-500 transition-colors"},[...z[14]||(z[14]=[t("span",{class:"material-symbols-outlined text-[18px]"},"delete",-1)])],8,aC)]),t("div",rC,[(d(!0),f(oe,null,ye(se(D.id),ae=>(d(),f("div",{key:ae.id,onClick:ue=>ce(ae.id),class:W(["py-3 px-4 bg-white rounded-xl flex items-center gap-3 cursor-pointer transition-all",b.value.has(ae.id)?"ring-2 ring-black":"hover:bg-zinc-50"])},[t("div",dC,[b.value.has(ae.id)?(d(),f("div",uC)):M("",!0)]),t("div",{class:W(["font-medium text-[13px]",b.value.has(ae.id)?"text-black":"text-zinc-600"])},w(ae.title),3)],10,cC))),128))])]))),128)),t("div",pC,[ie(t("input",{"onUpdate:modelValue":z[5]||(z[5]=D=>p.value=D),onKeyup:xs(R,["enter"]),placeholder:"New Category...",class:"flex-grow bg-zinc-50 rounded-2xl py-3 px-5 text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none"},null,544),[[pe,p.value]]),t("button",{onClick:R,class:"w-12 h-12 flex items-center justify-center bg-black text-white rounded-full hover:bg-zinc-800 transition-colors shadow-lg",disabled:!p.value.trim()},[...z[15]||(z[15]=[t("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])],8,fC)])])])):(d(),f("div",vC,[(d(!0),f(oe,null,ye(N.value,D=>(d(),f("div",{key:D.id,class:"bg-zinc-50 rounded-2xl overflow-hidden group"},[t("button",{onClick:ae=>K(D.id),class:"w-full flex items-center justify-between p-5 hover:bg-zinc-100 transition-colors"},[t("div",bC,[t("span",{class:W(["material-symbols-outlined text-zinc-400 text-[18px] transition-transform",I(D.id)?"rotate-90":""])},"chevron_right",2),t("h2",mC,w(D.name),1)]),t("span",gC,w(se(D.id).length)+" entries",1)],8,xC),I(D.id)?(d(),f("div",hC,[(d(!0),f(oe,null,ye(se(D.id),ae=>(d(),f("div",{key:ae.id,onClick:ue=>E(ae.id),class:"py-3 px-4 bg-white rounded-xl cursor-pointer hover:bg-zinc-100 transition-all group/entry"},[t("div",wC,w(ae.title),1),t("div",kC,w(ae.content),1)],8,yC))),128)),t("button",{onClick:ae=>T(D.id),class:"w-full py-3 border border-dashed border-zinc-200 rounded-xl flex items-center justify-center gap-2 hover:border-zinc-400 hover:bg-zinc-50 transition-all group/add"},[z[17]||(z[17]=t("span",{class:"material-symbols-outlined text-zinc-300 group-hover/add:text-black text-[16px]"},"add",-1)),t("span",zC,"Add "+w(i.value)+" Entry",1)],8,_C)])):M("",!0)]))),128))]))])):M("",!0),l.value==="search"?(d(),f("div",$C,[t("div",CC,[z[18]||(z[18]=t("span",{class:"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400"},"search",-1)),ie(t("input",{"onUpdate:modelValue":z[6]||(z[6]=D=>L.value=D),type:"text",placeholder:"Search entries...",class:"w-full pl-12 pr-4 py-4 bg-zinc-50 rounded-2xl text-[15px] outline-none focus:ring-1 focus:ring-black placeholder:text-zinc-300 border-none",autofocus:""},null,512),[[pe,L.value]])]),t("div",SC,[(d(!0),f(oe,null,ye(S.value,D=>(d(),f("div",{key:D.id,onClick:ae=>E(D.id),class:"bg-zinc-50 rounded-2xl p-4 cursor-pointer hover:bg-zinc-100 transition-all"},[t("div",MC,[t("span",TC,w(D.scope),1),t("span",EC,w(N.value.find(ae=>ae.id===D.categoryId)?.name),1)]),t("div",jC,w(D.title),1),t("div",AC,w(D.content),1)],8,IC))),128))])])):M("",!0)]),t("div",OC,[t("button",{onClick:we,class:W(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",r.value?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[t("span",{class:W(["material-symbols-outlined text-[24px]",r.value?"font-variation-fill":""])},"grid_view",2)],2),t("button",{onClick:z[7]||(z[7]=D=>T()),class:"w-14 h-14 bg-black rounded-full shadow-2xl active:scale-95 transition-transform flex items-center justify-center -mt-6"},[...z[19]||(z[19]=[t("span",{class:"material-symbols-outlined text-white text-[24px]"},"add",-1)])]),t("button",{onClick:z[8]||(z[8]=D=>l.value=l.value==="search"?"home":"search"),class:W(["w-12 h-12 flex items-center justify-center rounded-full transition-colors",l.value==="search"?"bg-black text-white":"text-zinc-400 hover:bg-zinc-100"])},[...z[20]||(z[20]=[t("span",{class:"material-symbols-outlined text-[24px]"},"search",-1)])],2)])])):M("",!0)]))}},RC=rt(PC,[["__scopeId","data-v-3d94a1bb"]]),NC={class:"relative h-screen w-full flex flex-col overflow-hidden bg-[#F2F2F7] font-sans text-black"},LC={class:"relative z-10 flex-grow px-5 pt-[calc(40px_+_env(safe-area-inset-top))] pb-32 overflow-y-auto no-scrollbar flex flex-col items-center gap-8"},DC={class:"w-full max-w-sm flex justify-between items-center mt-4"},VC={class:"flex flex-col gap-4"},BC={class:"flex flex-col gap-4"},UC={__name:"Desktop",emits:["open-app"],setup(e,{emit:s}){const n=s,o=()=>{n("open-app","noir")},l=()=>{n("open-app","worldbook")},i=()=>{n("open-app","settings")},a=r=>{console.log("Clicked",r)};return(r,p)=>(d(),f("div",NC,[t("div",LC,[t("div",DC,[t("div",VC,[t("button",{class:"app-pill",onClick:p[0]||(p[0]=b=>a("Music"))},[...p[4]||(p[4]=[t("span",{class:"material-symbols-outlined icon"},"headphones",-1),t("span",{class:"label"},"Music::",-1)])]),t("button",{class:"app-pill",onClick:p[1]||(p[1]=b=>a("Status"))},[...p[5]||(p[5]=[t("span",{class:"material-symbols-outlined icon fill-current"},"favorite",-1),t("span",{class:"label"},"Status",-1)])])]),p[8]||(p[8]=t("div",{class:"flex flex-col items-center gap-2 mx-2"},[t("div",{class:"w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg bg-gray-200"},[t("img",{src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDcAFY6_Bt1ezg7r0W-A0o06SA0hcV-KRVCEKkmnxkF4HYixgyMDnQ_zxMl1vdOB621SBR_CpqAIMipO-7SBkRSPbzy9t9IFJGwVbyC4M7Ynqwx89TbO31kuH24kuSC4j0Zsji5QTLS76dstQUq9SPS7dnI0Iq7P5nh7eSmFnKMcx5QfmcurO80ByNLbvSc8TWY-SptbQvJfLLl9_8Om7VjeW0NQmoKiIPuf0AfMNKJwWxB_bGXlX-4UCr8VW5THk8ViMve95wX44E",class:"w-full h-full object-cover",alt:"Avatar"})]),t("div",{class:"text-[10px] text-gray-400 tracking-widest font-serif italic text-center leading-tight"}," **. ")],-1)),t("div",BC,[t("button",{class:"app-pill",onClick:p[2]||(p[2]=b=>a("Gallery"))},[...p[6]||(p[6]=[t("span",{class:"material-symbols-outlined icon"},"movie",-1),t("span",{class:"label"},"Gallery",-1)])]),t("button",{class:"app-pill",onClick:p[3]||(p[3]=b=>a("Weather"))},[...p[7]||(p[7]=[t("span",{class:"material-symbols-outlined icon"},"cloud",-1),t("span",{class:"label"},"Cloud",-1)])])])]),p[9]||(p[9]=kt('<div class="w-full max-w-sm grid grid-cols-[1.4fr_1fr] gap-4" data-v-6dbe5bb1><div class="bg-white rounded-[2rem] p-5 shadow-sm relative flex flex-col justify-between h-48 w-full" data-v-6dbe5bb1><div class="flex items-center gap-2 mb-1" data-v-6dbe5bb1><div class="w-1 h-3 bg-gray-300 rounded-full" data-v-6dbe5bb1></div><span class="text-xs text-gray-400 font-medium" data-v-6dbe5bb1>s.coups</span></div><div class="flex flex-col gap-2" data-v-6dbe5bb1><div class="flex flex-col gap-1 items-start" data-v-6dbe5bb1><span class="text-[10px] text-gray-400 ml-1" data-v-6dbe5bb1>    22:50</span></div><div class="self-end bg-[#333] text-white rounded-2xl rounded-tr-sm py-2.5 px-3 max-w-[90%] shadow-md" data-v-6dbe5bb1><span class="text-sm font-medium" data-v-6dbe5bb1></span><div class="flex justify-end items-center gap-1 mt-0.5" data-v-6dbe5bb1><span class="text-[8px] opacity-60" data-v-6dbe5bb1>jeonghan</span><span class="material-symbols-outlined text-[9px]" data-v-6dbe5bb1>done_all</span></div></div><div class="bg-gray-100/50 rounded-xl p-2 self-start max-w-[80%]" data-v-6dbe5bb1><span class="text-[9px] text-gray-500 leading-tight block" data-v-6dbe5bb1><br data-v-6dbe5bb1>  22:55</span></div></div></div><div class="grid grid-cols-2 gap-3 h-48 content-between" data-v-6dbe5bb1><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>calendar_month</span></div><span class="app-label" data-v-6dbe5bb1>Calendar</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>menu_book</span></div><span class="app-label" data-v-6dbe5bb1>WorldBook</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>pets</span></div><span class="app-label" data-v-6dbe5bb1>Pet</span></button><button class="square-app-btn" data-v-6dbe5bb1><div class="app-icon-bg" data-v-6dbe5bb1><span class="material-symbols-outlined text-[26px] text-gray-600" data-v-6dbe5bb1>person</span></div><span class="app-label" data-v-6dbe5bb1>Me</span></button></div></div><div class="w-full max-w-sm flex justify-center gap-2 mt-4 relative h-40" data-v-6dbe5bb1><div class="polaroid rotate-[-6deg] translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/88/2c/83/882c83c21389c836dc22874136696b99.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[2deg] -translate-y-2 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/cf/17/dc/cf17dc13023cf8527a26f03027788484.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption" data-v-6dbe5bb1></div></div><div class="polaroid rotate-[8deg] translate-y-4 z-10 hover:z-20 hover:scale-105 transition-all duration-300" data-v-6dbe5bb1><div class="tape" data-v-6dbe5bb1></div><div class="photo" data-v-6dbe5bb1><img src="https://i.pinimg.com/736x/be/ab/e1/beabe17c5a08579932066d5b004278df.jpg" class="w-full h-full object-cover grayscale-[20%]" data-v-6dbe5bb1></div><div class="caption text-[8px] text-right pr-1 pt-1 opacity-50 font-serif" data-v-6dbe5bb1>~~</div></div></div>',2))]),t("div",{class:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[85%] max-w-[280px] z-50"},[t("div",{class:"bg-white/80 backdrop-blur-xl border border-white/40 px-6 py-4 flex justify-between items-center shadow-lg rounded-[2.5rem]"},[t("button",{onClick:i,class:"dock-icon-btn"},[...p[10]||(p[10]=[t("span",{class:"material-symbols-outlined"},"settings",-1)])]),t("button",{onClick:l,class:"dock-icon-btn"},[...p[11]||(p[11]=[t("span",{class:"material-symbols-outlined"},"menu_book",-1)])]),t("button",{onClick:o,class:"dock-icon-btn"},[...p[12]||(p[12]=[t("span",{class:"material-symbols-outlined"},"chat_bubble",-1)])])])])]))}},FC=rt(UC,[["__scopeId","data-v-6dbe5bb1"]]),WC={class:"w-full h-full relative overflow-hidden flex flex-col bg-white"},KC={key:0,class:"absolute inset-0 w-full h-full z-50 bg-white"},HC={key:0,class:"absolute inset-0 w-full h-full z-50 bg-white"},GC={key:0,class:"absolute inset-0 w-full h-full z-50 bg-white"},qC={__name:"App",setup(e){const s=C(!1),n=C(!1),o=C(!1),l=be(()=>s.value||k.videoCallState.isActive);ds(()=>k.videoCallState.isMinimized,u=>{!u&&k.videoCallState.isActive&&(s.value=!0)});const i=u=>{u==="noir"?s.value=!0:u==="settings"?n.value=!0:u==="worldbook"&&(o.value=!0)},a=()=>{s.value=!1},r=()=>{n.value=!1},p=()=>{o.value=!1},b=()=>{setTimeout(()=>{window.scrollTo(0,0)},100)};return Dt(()=>{document.body.addEventListener("focusout",u=>{(u.target.tagName==="INPUT"||u.target.tagName==="TEXTAREA")&&b()}),window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{})}),(u,v)=>(d(),f("div",WC,[!s.value&&!n.value&&!o.value?(d(),Te(FC,{key:0,onOpenApp:i})):M("",!0),Ze(nn,{name:"app-launch"},{default:Cs(()=>[l.value?ie((d(),f("div",KC,[Ze(E$,{onClose:a})],512)),[[ji,s.value]]):M("",!0)]),_:1}),Ze(nn,{name:"app-launch"},{default:Cs(()=>[n.value?(d(),f("div",HC,[Ze(w8,{onClose:r})])):M("",!0)]),_:1}),Ze(nn,{name:"app-launch"},{default:Cs(()=>[o.value?(d(),f("div",GC,[Ze(RC,{onClose:p})])):M("",!0)]),_:1})]))}};qp(qC).mount("#app");
